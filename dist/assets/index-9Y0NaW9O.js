const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BVu4liiy.js","assets/matrix-sdk-crypto-wasm-uJxA3lWn.js","assets/polyfill-force-DEAq6lV2.js","assets/index-FKZIcHXc.js","assets/polyfill-force-3i2-chVN.js"])))=>i.map(i=>d[i]);
var e1e=Object.defineProperty;var t1e=(t,e,n)=>e in t?e1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>t1e(t,typeof e!="symbol"?e+"":e,n);function n1e(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var OXe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function AXe(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var sb={exports:{}},e3={},ab={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN;function r1e(){if(JN)return wt;JN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(B){return B===null||typeof B!="object"?null:(B=f&&B[f]||B["@@iterator"],typeof B=="function"?B:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function b(B,Q,pe){this.props=B,this.context=Q,this.refs=v,this.updater=pe||g}b.prototype.isReactComponent={},b.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},b.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function C(){}C.prototype=b.prototype;function S(B,Q,pe){this.props=B,this.context=Q,this.refs=v,this.updater=pe||g}var R=S.prototype=new C;R.constructor=S,y(R,b.prototype),R.isPureReactComponent=!0;var w=Array.isArray,I=Object.prototype.hasOwnProperty,k={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function L(B,Q,pe){var ve,Re={},Te=null,Ce=null;if(Q!=null)for(ve in Q.ref!==void 0&&(Ce=Q.ref),Q.key!==void 0&&(Te=""+Q.key),Q)I.call(Q,ve)&&!x.hasOwnProperty(ve)&&(Re[ve]=Q[ve]);var we=arguments.length-2;if(we===1)Re.children=pe;else if(1<we){for(var Ee=Array(we),ze=0;ze<we;ze++)Ee[ze]=arguments[ze+2];Re.children=Ee}if(B&&B.defaultProps)for(ve in we=B.defaultProps,we)Re[ve]===void 0&&(Re[ve]=we[ve]);return{$$typeof:t,type:B,key:Te,ref:Ce,props:Re,_owner:k.current}}function N(B,Q){return{$$typeof:t,type:B.type,key:Q,ref:B.ref,props:B.props,_owner:B._owner}}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function U(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(pe){return Q[pe]})}var j=/\/+/g;function $(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):Q.toString(36)}function Z(B,Q,pe,ve,Re){var Te=typeof B;(Te==="undefined"||Te==="boolean")&&(B=null);var Ce=!1;if(B===null)Ce=!0;else switch(Te){case"string":case"number":Ce=!0;break;case"object":switch(B.$$typeof){case t:case e:Ce=!0}}if(Ce)return Ce=B,Re=Re(Ce),B=ve===""?"."+$(Ce,0):ve,w(Re)?(pe="",B!=null&&(pe=B.replace(j,"$&/")+"/"),Z(Re,Q,pe,"",function(ze){return ze})):Re!=null&&(D(Re)&&(Re=N(Re,pe+(!Re.key||Ce&&Ce.key===Re.key?"":(""+Re.key).replace(j,"$&/")+"/")+B)),Q.push(Re)),1;if(Ce=0,ve=ve===""?".":ve+":",w(B))for(var we=0;we<B.length;we++){Te=B[we];var Ee=ve+$(Te,we);Ce+=Z(Te,Q,pe,Ee,Re)}else if(Ee=p(B),typeof Ee=="function")for(B=Ee.call(B),we=0;!(Te=B.next()).done;)Te=Te.value,Ee=ve+$(Te,we++),Ce+=Z(Te,Q,pe,Ee,Re);else if(Te==="object")throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ce}function V(B,Q,pe){if(B==null)return B;var ve=[],Re=0;return Z(B,ve,"","",function(Te){return Q.call(pe,Te,Re++)}),ve}function z(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(pe){(B._status===0||B._status===-1)&&(B._status=1,B._result=pe)},function(pe){(B._status===0||B._status===-1)&&(B._status=2,B._result=pe)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var K={current:null},q={transition:null},G={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:q,ReactCurrentOwner:k};function J(){throw Error("act(...) is not supported in production builds of React.")}return wt.Children={map:V,forEach:function(B,Q,pe){V(B,function(){Q.apply(this,arguments)},pe)},count:function(B){var Q=0;return V(B,function(){Q++}),Q},toArray:function(B){return V(B,function(Q){return Q})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},wt.Component=b,wt.Fragment=n,wt.Profiler=i,wt.PureComponent=S,wt.StrictMode=r,wt.Suspense=l,wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,wt.act=J,wt.cloneElement=function(B,Q,pe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ve=y({},B.props),Re=B.key,Te=B.ref,Ce=B._owner;if(Q!=null){if(Q.ref!==void 0&&(Te=Q.ref,Ce=k.current),Q.key!==void 0&&(Re=""+Q.key),B.type&&B.type.defaultProps)var we=B.type.defaultProps;for(Ee in Q)I.call(Q,Ee)&&!x.hasOwnProperty(Ee)&&(ve[Ee]=Q[Ee]===void 0&&we!==void 0?we[Ee]:Q[Ee])}var Ee=arguments.length-2;if(Ee===1)ve.children=pe;else if(1<Ee){we=Array(Ee);for(var ze=0;ze<Ee;ze++)we[ze]=arguments[ze+2];ve.children=we}return{$$typeof:t,type:B.type,key:Re,ref:Te,props:ve,_owner:Ce}},wt.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},wt.createElement=L,wt.createFactory=function(B){var Q=L.bind(null,B);return Q.type=B,Q},wt.createRef=function(){return{current:null}},wt.forwardRef=function(B){return{$$typeof:o,render:B}},wt.isValidElement=D,wt.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:z}},wt.memo=function(B,Q){return{$$typeof:c,type:B,compare:Q===void 0?null:Q}},wt.startTransition=function(B){var Q=q.transition;q.transition={};try{B()}finally{q.transition=Q}},wt.unstable_act=J,wt.useCallback=function(B,Q){return K.current.useCallback(B,Q)},wt.useContext=function(B){return K.current.useContext(B)},wt.useDebugValue=function(){},wt.useDeferredValue=function(B){return K.current.useDeferredValue(B)},wt.useEffect=function(B,Q){return K.current.useEffect(B,Q)},wt.useId=function(){return K.current.useId()},wt.useImperativeHandle=function(B,Q,pe){return K.current.useImperativeHandle(B,Q,pe)},wt.useInsertionEffect=function(B,Q){return K.current.useInsertionEffect(B,Q)},wt.useLayoutEffect=function(B,Q){return K.current.useLayoutEffect(B,Q)},wt.useMemo=function(B,Q){return K.current.useMemo(B,Q)},wt.useReducer=function(B,Q,pe){return K.current.useReducer(B,Q,pe)},wt.useRef=function(B){return K.current.useRef(B)},wt.useState=function(B){return K.current.useState(B)},wt.useSyncExternalStore=function(B,Q,pe){return K.current.useSyncExternalStore(B,Q,pe)},wt.useTransition=function(){return K.current.useTransition()},wt.version="18.3.1",wt}var QN;function II(){return QN||(QN=1,ab.exports=r1e()),ab.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN;function i1e(){if(XN)return e3;XN=1;var t=II(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var d,f={},p=null,g=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:o,key:p,ref:g,props:f,_owner:i.current}}return e3.Fragment=n,e3.jsx=a,e3.jsxs=a,e3}var eD;function s1e(){return eD||(eD=1,sb.exports=i1e()),sb.exports}var E=s1e();function tD(t,e,n,r,i,s,a){try{var o=t[s](a),l=o.value}catch(c){return void n(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function F(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function a(l){tD(s,r,i,a,o,"next",l)}function o(l){tD(s,r,i,a,o,"throw",l)}a(void 0)})}}function G0(t){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G0(t)}function a1e(t,e){if(G0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(G0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o1e(t){var e=a1e(t,"string");return G0(e)=="symbol"?e:e+""}function P(t,e,n){return(e=o1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l1e="l",c1e="rn",u1e={0:"O",1:"l","֭":"֖","֮":"֘","֨":"֙","֤":"֚","᪴":"ۛ","⃛":"ۛ","ؙ":"̓","ࣳ":"̓","̓":"̓","̕":"̓","ُ":"̓","ٝ":"̔","֜":"́","֝":"́","ؘ":"́","݇":"́","́":"́","॔":"́","َ":"́","̀":"̀","॓":"̀","̌":"̆","꙼":"̆","٘":"̆","ٚ":"̆","ͮ":"̆","ۨ":"̆̇","̐":"̆̇","ँ":"̆̇","ঁ":"̆̇","ઁ":"̆̇","ଁ":"̆̇","ఀ":"̆̇","ಁ":"̆̇","ഁ":"̆̇","𑒿":"̆̇","᳐":"̂","̑":"̂","ٛ":"̂","߮":"̂","꛰":"̂","֯":"̊","۟":"̊","៓":"̊","゚":"̊","ْ":"̊","ஂ":"̊","ံ":"̊","ំ":"̊","𑌀":"̊","ํ":"̊","ໍ":"̊","ͦ":"̊","ⷪ":"̊","࣫":"̈","߳":"̈","ً":"̋","ࣰ":"̋","͂":"̃","ٓ":"̃","ׄ":"̇","۬":"̇","݀":"̇","࣪":"̇","݁":"̇","͘":"̇","ֹ":"̇","ֺ":"̇","ׂ":"̇","ׁ":"̇","߭":"̇","ं":"̇","ਂ":"̇","ં":"̇","்":"̇","̷":"̸","᪷":"̨","̢":"̨","ͅ":"̨","᳒":"̄","̅":"̄","ٙ":"̄","߫":"̄","꛱":"̄","᳚":"̎","ٗ":"̒","͗":"͐","ࣿ":"͐","ࣸ":"͐","ऀ":"͒","᳭":"̖","᳜":"̩","ٖ":"̩","᳕":"̫","͇":"̳","ࣹ":"͔","ࣺ":"͕","゛":"ﾞ","゜":"ﾟ","̶":"̵","〬":"̉","ׅ":"̣","࣭":"̣","᳝":"̣","ִ":"̣","ٜ":"̣","़":"̣","়":"̣","਼":"̣","઼":"̣","଼":"̣","𑇊":"̣","𑓃":"̣","𐨺":"̣","࣮":"̤","᳞":"̤","༷":"̥","〭":"̥","̧":"̦","̡":"̦","̹":"̦","᳙":"̭","᳘":"̮","॒":"̱","̠":"̱","ࣱ":"ٌ","ࣨ":"ٌ","ࣥ":"ٌ",ﱞ:"ﹲّ","ࣲ":"ٍ",ﱟ:"ﹴّ",ﳲ:"ﹷّ",ﱠ:"ﹶّ",ﳳ:"ﹹّ",ﱡ:"ﹸّ","ؚ":"ِ","̗":"ِ",ﳴ:"ﹻّ",ﱢ:"ﹺّ",ﱣ:"ﹼٰ","ٟ":"ٕ","̍":"ٰ","݂":"ܼ","ਃ":"ঃ","ః":"ঃ","ಃ":"ঃ","ഃ":"ঃ","ඃ":"ঃ","း":"ঃ","𑓁":"ঃ","់":"่","່":"่","້":"้","໊":"๊","໋":"๋","꙯":"⃩","\u2028":" ","\u2029":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" "," ":" ","ߺ":"_","﹍":"_","﹎":"_","﹏":"_","‐":"-","‑":"-","‒":"-","–":"-","﹘":"-","۔":"-","⁃":"-","˗":"-","−":"-","➖":"-","Ⲻ":"-","⨩":"-̓","⸚":"-̈","﬩":"-̇","∸":"-̇","⨪":"-̣","꓾":"-.","～":"〜","؍":",","٫":",","‚":",","¸":",","ꓹ":",","⸲":"،","٬":"،",";":";","⸵":"؛","ः":":","ઃ":":","：":":","։":":","܃":":","܄":":","᛬":":","︰":":","᠃":":","᠉":":","⁚":":","׃":":","˸":":","꞉":":","∶":":",ː:":","ꓽ":":","⩴":"::=","⧴":":→","！":"!",ǃ:"!","ⵑ":"!","‼":"!!","⁉":"!?",ʔ:"?","Ɂ":"?","ॽ":"?",Ꭾ:"?","ꛫ":"?","⁈":"?!","⁇":"??","⸮":"؟","𝅭":".","․":".","܁":".","܂":".","꘎":".","𐩐":".","٠":".","۰":".","ꓸ":".","ꓻ":".,","‥":"..","ꓺ":"..","…":"...","꛴":"꛳꛳","・":"·","･":"·","᛫":"·","·":"·","⸱":"·","𐄁":"·","•":"·","‧":"·","∙":"·","⋅":"·","ꞏ":"·",ᐧ:"·","⋯":"···","ⵈ":"···",ᑄ:"·<","⋗":"·>",ᐷ:"·>",ᑀ:"·>",ᔯ:"·4",ᑾ:"·b",ᒀ:"·ḃ",ᑺ:"·d",ᒘ:"·J",ᒶ:"·L",ᑶ:"·P",ᑗ:"·U",ᐺ:"·V",ᐼ:"·Ʌ",ᒮ:"·Γ",ᐎ:"·Δ",ᑙ:"·Ո",ᐌ:"·ᐁ",ᐐ:"·ᐄ",ᐒ:"·ᐅ",ᐔ:"·ᐆ",ᐗ:"·ᐊ",ᐙ:"·ᐋ",ᐾ:"·ᐲ",ᑂ:"·ᐴ",ᑆ:"·ᐹ",ᑛ:"·ᑏ",ᑔ:"·ᑐ",ᑝ:"·ᑐ",ᑟ:"·ᑑ",ᑡ:"·ᑕ",ᑣ:"·ᑖ",ᑴ:"·ᑫ",ᑸ:"·ᑮ",ᑼ:"·ᑰ",ᒒ:"·ᒉ",ᒔ:"·ᒋ",ᒖ:"·ᒌ",ᒚ:"·ᒎ",ᒜ:"·ᒐ",ᒞ:"·ᒑ",ᒬ:"·ᒣ",ᒰ:"·ᒦ",ᒲ:"·ᒧ",ᒴ:"·ᒨ",ᒸ:"·ᒫ",ᓉ:"·ᓀ","ᣆ":"·ᓂ","ᣈ":"·ᓃ","ᣊ":"·ᓄ","ᣌ":"·ᓅ",ᓋ:"·ᓇ",ᓍ:"·ᓈ",ᓜ:"·ᓓ",ᓞ:"·ᓕ",ᓠ:"·ᓖ",ᓢ:"·ᓗ",ᓤ:"·ᓘ",ᓦ:"·ᓚ",ᓨ:"·ᓛ",ᓶ:"·ᓭ",ᓸ:"·ᓯ",ᓺ:"·ᓰ",ᓼ:"·ᓱ",ᓾ:"·ᓲ",ᔀ:"·ᓴ",ᔂ:"·ᓵ",ᔗ:"·ᔐ",ᔙ:"·ᔑ",ᔛ:"·ᔒ",ᔝ:"·ᔓ",ᔟ:"·ᔔ",ᔡ:"·ᔕ",ᔣ:"·ᔖ",ᔱ:"·ᔨ",ᔳ:"·ᔩ",ᔵ:"·ᔪ",ᔷ:"·ᔫ",ᔹ:"·ᔭ",ᔻ:"·ᔮ","ᣎ":"·ᕃ","ᣏ":"·ᕆ","ᣐ":"·ᕇ","ᣑ":"·ᕈ","ᣒ":"·ᕉ","ᣓ":"·ᕋ",ᕎ:"·ᕌ",ᕛ:"·ᕚ",ᕨ:"·ᕧ","ᢳ":"·ᢱ","ᢶ":"·ᢴ","ᢹ":"·ᢸ","ᣂ":"·ᣀ","꠰":"।","॥":"।।","᰼":"᰻᰻","။":"၊၊","᪩":"᪨᪨","᪫":"᪪᪨","᭟":"᭞᭞","𐩗":"𐩖𐩖","𑑌":"𑑋𑑋","𑙂":"𑙁𑙁","𑱂":"𑱁𑱁","᱿":"᱾᱾","՝":"'","＇":"'","‘":"'","’":"'","‛":"'","′":"'","‵":"'","՚":"'","׳":"'","`":"'","`":"'","｀":"'","´":"'","΄":"'","´":"'","᾽":"'","᾿":"'","῾":"'","ʹ":"'","ʹ":"'","ˈ":"'","ˊ":"'","ˋ":"'","˴":"'",ʻ:"'",ʽ:"'",ʼ:"'",ʾ:"'","ꞌ":"'",י:"'","ߴ":"'","ߵ":"'",ᑊ:"'",ᛌ:"'","𖽑":"'","𖽒":"'","᳓":"''",'"':"''","＂":"''","“":"''","”":"''","‟":"''","″":"''","‶":"''","〃":"''","״":"''","˝":"''","ʺ":"''","˶":"''",ˮ:"''",ײ:"''","‴":"'''","‷":"'''","⁗":"''''",Ɓ:"'B",Ɗ:"'D",ŉ:"'n",Ƥ:"'P",Ƭ:"'T",Ƴ:"'Y","［":"(","❨":"(","❲":"(","〔":"(","﴾":"(","⸨":"((","㈠":"(ー)","⑵":"(2)","⒇":"(2O)","⑶":"(3)","⑷":"(4)","⑸":"(5)","⑹":"(6)","⑺":"(7)","⑻":"(8)","⑼":"(9)","⒜":"(a)","🄐":"(A)","⒝":"(b)","🄑":"(B)","⒞":"(c)","🄒":"(C)","⒟":"(d)","🄓":"(D)","⒠":"(e)","🄔":"(E)","⒡":"(f)","🄕":"(F)","⒢":"(g)","🄖":"(G)","⒣":"(h)","🄗":"(H)","⒤":"(i)","⒥":"(j)","🄙":"(J)","⒦":"(k)","🄚":"(K)","⑴":"(l)","🄘":"(l)","⒧":"(l)","🄛":"(L)","⑿":"(l2)","⒀":"(l3)","⒁":"(l4)","⒂":"(l5)","⒃":"(l6)","⒄":"(l7)","⒅":"(l8)","⒆":"(l9)","⑾":"(ll)","⑽":"(lO)","🄜":"(M)","⒩":"(n)","🄝":"(N)","⒪":"(o)","🄞":"(O)","⒫":"(p)","🄟":"(P)","⒬":"(q)","🄠":"(Q)","⒭":"(r)","🄡":"(R)","⒨":"(rn)","⒮":"(s)","🄢":"(S)","🄪":"(S)","⒯":"(t)","🄣":"(T)","⒰":"(u)","🄤":"(U)","⒱":"(v)","🄥":"(V)","⒲":"(w)","🄦":"(W)","⒳":"(x)","🄧":"(X)","⒴":"(y)","🄨":"(Y)","⒵":"(z)","🄩":"(Z)","㈀":"(ᄀ)","㈎":"(가)","㈁":"(ᄂ)","㈏":"(나)","㈂":"(ᄃ)","㈐":"(다)","㈃":"(ᄅ)","㈑":"(라)","㈄":"(ᄆ)","㈒":"(마)","㈅":"(ᄇ)","㈓":"(바)","㈆":"(ᄉ)","㈔":"(사)","㈇":"(ᄋ)","㈕":"(아)","㈝":"(오전)","㈞":"(오후)","㈈":"(ᄌ)","㈖":"(자)","㈜":"(주)","㈉":"(ᄎ)","㈗":"(차)","㈊":"(ᄏ)","㈘":"(카)","㈋":"(ᄐ)","㈙":"(타)","㈌":"(ᄑ)","㈚":"(파)","㈍":"(ᄒ)","㈛":"(하)","㈦":"(七)","㈢":"(三)","🉁":"(三)","㈨":"(九)","㈡":"(二)","🉂":"(二)","㈤":"(五)","㈹":"(代)","㈽":"(企)","㉁":"(休)","㈧":"(八)","㈥":"(六)","㈸":"(労)","🉇":"(勝)","㈩":"(十)","㈿":"(協)","㈴":"(名)","㈺":"(呼)","㈣":"(四)","㈯":"(土)","㈻":"(学)","🉃":"(安)","🉅":"(打)","🉈":"(敗)","㈰":"(日)","㈪":"(月)","㈲":"(有)","㈭":"(木)","🉀":"(本)","㈱":"(株)","㈬":"(水)","㈫":"(火)","🉄":"(点)","㈵":"(特)","🉆":"(盗)","㈼":"(監)","㈳":"(社)","㈷":"(祝)","㉀":"(祭)","㉂":"(自)","㉃":"(至)","㈶":"(財)","㈾":"(資)","㈮":"(金)","］":")","❩":")","❳":")","〕":")","﴿":")","⸩":"))","❴":"{","𝄔":"{","❵":"}","〚":"⟦","〛":"⟧","⟨":"❬","〈":"❬","〈":"❬","㇛":"❬",く:"❬","𡿨":"❬","⟩":"❭","〉":"❭","〉":"❭","＾":"︿","⸿":"¶","⁎":"*","٭":"*","∗":"*","𐌟":"*","᜵":"/","⁁":"/","∕":"/","⁄":"/","╱":"/","⟋":"/","⧸":"/","𝈺":"/","㇓":"/",〳:"/","Ⳇ":"/",ノ:"/",丿:"/","⼃":"/","⧶":"/̄","⫽":"//","⫻":"///","＼":"\\","﹨":"\\","∖":"\\","⟍":"\\","⧵":"\\","⧹":"\\","𝈏":"\\","𝈻":"\\","㇔":"\\",丶:"\\","⼂":"\\","⳹":"\\\\","⑊":"\\\\","⟈":"\\ᑕ","ꝸ":"&","૰":"॰","𑂻":"॰","𑇇":"॰","⚬":"॰","𑇛":"꣼","៙":"๏","៕":"๚","៚":"๛","༌":"་","༎":"།།","˄":"^","ˆ":"^","꙾":"ˇ","˘":"ˇ","‾":"ˉ","﹉":"ˉ","﹊":"ˉ","﹋":"ˉ","﹌":"ˉ","¯":"ˉ","￣":"ˉ","▔":"ˉ",ъ:"ˉb","ꙑ":"ˉbi","͵":"ˏ","˻":"˪","꜖":"˪","꜔":"˫","。":"˳","⸰":"°","˚":"°","∘":"°","○":"°","◦":"°","⍜":"°̲","⍤":"°̈","℃":"°C","℉":"°F","௵":"௳","༛":"༚༚","༟":"༚༝","࿎":"༝༚","༞":"༝༝","Ⓒ":"©","Ⓡ":"®","Ⓟ":"℗","𝈛":"⅄","⯬":"↞","⯭":"↟","⯮":"↠","⯯":"↡","↵":"↲","⥥":"⇃⇂","⥯":"⇃ᛚ","𝛛":"∂","𝜕":"∂","𝝏":"∂","𝞉":"∂","𝟃":"∂","𞣌":"∂","𞣍":"∂̵",ð:"∂̵","⌀":"∅","𝛁":"∇","𝛻":"∇","𝜵":"∇","𝝯":"∇","𝞩":"∇","𑢨":"∇","⍢":"∇̈","⍫":"∇̴","█":"∎","■":"∎","⨿":"∐","᛭":"+","➕":"+","𐊛":"+","⨣":"+̂","⨢":"+̊","⨤":"+̃","∔":"+̇","⨥":"+̣","⨦":"+̰","⨧":"+₂","➗":"÷","‹":"<","❮":"<","˂":"<","𝈶":"<",ᐸ:"<",ᚲ:"<","⋖":"<·","Ⲵ":"<·",ᑅ:"<·","≪":"<<","⋘":"<<<","᐀":"=","⹀":"=","゠":"=","꓿":"=","≚":"=̆","≙":"=̂","≗":"=̊","≐":"=̇","≑":"=̣̇","⩮":"=⃰","⩵":"==","⩶":"===","≞":"=ͫ","›":">","❯":">","˃":">","𝈷":">",ᐳ:">","𖼿":">",ᑁ:">·","⪥":"><","≫":">>","⨠":">>","⋙":">>>","⁓":"~","˜":"~","῀":"~","∼":"~","⍨":"~̈","⸞":"~̇","⩪":"~̇","⸟":"~̣","𞣈":"∠","⋀":"∧","∯":"∮∮","∰":"∮∮∮","⸫":"∴","⸪":"∵","⸬":"∷","𑇞":"≈","♎":"≏","🝞":"≏","≣":"≡","⨃":"⊍","⨄":"⊎","𝈸":"⊏","𝈹":"⊐","⨅":"⊓","⨆":"⊔","⨂":"⊗","⍟":"⊛","🝱":"⊠","🝕":"⊡","◁":"⊲","▷":"⊳","⍣":"⋆̈","︴":"⌇","◠":"⌒","⨽":"⌙","⌥":"⌤","⧇":"⌻","◎":"⌾","⦾":"⌾","⧅":"⍂","⦰":"⍉","⏃":"⍋","⏂":"⍎","⏁":"⍕","⏆":"⍭","☸":"⎈","︵":"⏜","︶":"⏝","︷":"⏞","︸":"⏟","︹":"⏠","︺":"⏡","▱":"⏥","⏼":"⏻","︱":"│","｜":"│","┃":"│","┏":"┌","┣":"├","▐":"▌","▗":"▖","▝":"▘","☐":"□","￭":"▪","▸":"▶","►":"▶","⳩":"☧","🜊":"☩","🌒":"☽","🌙":"☽","⏾":"☾","🌘":"☾","⧙":"⦚","🜺":"⧟","⨾":"⨟","𐆠":"⳨","♩":"𝅘𝅥","♪":"𝅘𝅥𝅮","⓪":"🄍","↺":"🄎","˙":"ॱ","ൎ":"ॱ","－":"ー","—":"ー","―":"ー","─":"ー","━":"ー","㇐":"ー","ꟷ":"ー",ᅳ:"ー",ㅡ:"ー",一:"ー","⼀":"ー",ᆖ:"ーー","ힹ":"ーᅡ","ힺ":"ーᅥ","ힻ":"ーᅥ丨","ힼ":"ーᅩ",ᆕ:"ーᅮ",ᅴ:"ー丨",ㅢ:"ー丨",ᆗ:"ー丨ᅮ","🄏":"$⃠","₤":"£","〒":"₸","〶":"₸","᭜":"᭐","꧆":"꧐","𑓑":"১","೧":"౧","ၥ":"၁","①":"➀","⑩":"➉","⏨":"₁₀","𝟐":"2","𝟚":"2","𝟤":"2","𝟮":"2","𝟸":"2","🯲":"2","Ꝛ":"2",Ƨ:"2",Ϩ:"2","Ꙅ":"2",ᒿ:"2","ꛯ":"2","ꧏ":"٢","۲":"٢","૨":"२","𑓒":"২","೨":"౨","②":"➁",ƻ:"2̵","🄃":"2,","⒉":"2.","㏵":"22日","㍮":"22点","㏶":"23日","㍯":"23点","㏷":"24日","㍰":"24点","㏸":"25日","㏹":"26日","㏺":"27日","㏻":"28日","㏼":"29日","㏴":"2l日","㍭":"2l点","⒛":"2O.","㏳":"2O日","㍬":"2O点","෩":"෨ා","෯":"෨ී","㏡":"2日","㋁":"2月","㍚":"2点","𝈆":"3","𝟑":"3","𝟛":"3","𝟥":"3","𝟯":"3","𝟹":"3","🯳":"3","Ɜ":"3",Ȝ:"3",Ʒ:"3","Ꝫ":"3","Ⳍ":"3",З:"3",Ӡ:"3","𖼻":"3","𑣊":"3","۳":"٣","𞣉":"٣","૩":"३","③":"➂",Ҙ:"3̦","🄄":"3,","⒊":"3.","㏾":"3l日","㏽":"3O日","㏢":"3日","㋂":"3月","㍛":"3点","𝟒":"4","𝟜":"4","𝟦":"4","𝟰":"4","𝟺":"4","🯴":"4",Ꮞ:"4","𑢯":"4","۴":"٤","૪":"४","④":"➃","🄅":"4,","⒋":"4.",ᔰ:"4·","㏣":"4日","㋃":"4月","㍜":"4点","𝟓":"5","𝟝":"5","𝟧":"5","𝟱":"5","𝟻":"5","🯵":"5",Ƽ:"5","𑢻":"5","⑤":"➄","🄆":"5,","⒌":"5.","㏤":"5日","㋄":"5月","㍝":"5点","𝟔":"6","𝟞":"6","𝟨":"6","𝟲":"6","𝟼":"6","🯶":"6","Ⳓ":"6",б:"6",Ꮾ:"6","𑣕":"6","۶":"٦","𑓖":"৬","⑥":"➅","🄇":"6,","⒍":"6.","㏥":"6日","㋅":"6月","㍞":"6点","𝈒":"7","𝟕":"7","𝟟":"7","𝟩":"7","𝟳":"7","𝟽":"7","🯷":"7","𐓒":"7","𑣆":"7","⑦":"➆","🄈":"7,","⒎":"7.","㏦":"7日","㋆":"7月","㍟":"7点","ଃ":"8","৪":"8","੪":"8","𞣋":"8","𝟖":"8","𝟠":"8","𝟪":"8","𝟴":"8","𝟾":"8","🯸":"8",ȣ:"8",Ȣ:"8","𐌚":"8","૮":"८","⑧":"➇","🄉":"8,","⒏":"8.","㏧":"8日","㋇":"8月","㍠":"8点","੧":"9","୨":"9","৭":"9","൭":"9","𝟗":"9","𝟡":"9","𝟫":"9","𝟵":"9","𝟿":"9","🯹":"9","Ꝯ":"9","Ⳋ":"9","𑣌":"9","𑢬":"9","𑣖":"9","१":"٩","𑣤":"٩","۹":"٩","೯":"౯","⑨":"➈","🄊":"9,","⒐":"9.","㏨":"9日","㋈":"9月","㍡":"9点","⍺":"a",ａ:"a","𝐚":"a","𝑎":"a","𝒂":"a","𝒶":"a","𝓪":"a","𝔞":"a","𝕒":"a","𝖆":"a","𝖺":"a","𝗮":"a","𝘢":"a","𝙖":"a","𝚊":"a",ɑ:"a",α:"a","𝛂":"a","𝛼":"a","𝜶":"a","𝝰":"a","𝞪":"a",а:"a","ⷶ":"ͣ",Ａ:"A","𝐀":"A","𝐴":"A","𝑨":"A","𝒜":"A","𝓐":"A","𝔄":"A","𝔸":"A","𝕬":"A","𝖠":"A","𝗔":"A","𝘈":"A","𝘼":"A","𝙰":"A",Α:"A","𝚨":"A","𝛢":"A","𝜜":"A","𝝖":"A","𝞐":"A",А:"A",Ꭺ:"A",ᗅ:"A","ꓮ":"A","𖽀":"A","𐊠":"A","⍶":"a̲",ǎ:"ă",Ǎ:"Ă",ȧ:"å",Ȧ:"Å",ẚ:"ả","℀":"a/c","℁":"a/s","ꜳ":"aa","Ꜳ":"AA",æ:"ae",ӕ:"ae",Æ:"AE",Ӕ:"AE","ꜵ":"ao","Ꜵ":"AO","🜇":"AR","ꜷ":"au","Ꜷ":"AU","ꜹ":"av","ꜻ":"av","Ꜹ":"AV","Ꜻ":"AV","ꜽ":"ay","Ꜽ":"AY","ꭺ":"ᴀ","∀":"Ɐ","𝈗":"Ɐ",ᗄ:"Ɐ","ꓯ":"Ɐ","𐐟":"Ɒ","𝐛":"b","𝑏":"b","𝒃":"b","𝒷":"b","𝓫":"b","𝔟":"b","𝕓":"b","𝖇":"b","𝖻":"b","𝗯":"b","𝘣":"b","𝙗":"b","𝚋":"b",Ƅ:"b",Ь:"b",Ꮟ:"b",ᑲ:"b",ᖯ:"b",Ｂ:"B",ℬ:"B","𝐁":"B","𝐵":"B","𝑩":"B","𝓑":"B","𝔅":"B","𝔹":"B","𝕭":"B","𝖡":"B","𝗕":"B","𝘉":"B","𝘽":"B","𝙱":"B","Ꞵ":"B",Β:"B","𝚩":"B","𝛣":"B","𝜝":"B","𝝗":"B","𝞑":"B",В:"B",Ᏼ:"B",ᗷ:"B","ꓐ":"B","𐊂":"B","𐊡":"B","𐌁":"B",ɓ:"b̔",ᑳ:"ḃ",ƃ:"b̄",Ƃ:"b̄",Б:"b̄",ƀ:"b̵",ҍ:"b̵",Ҍ:"b̵",ѣ:"b̵",Ѣ:"b̵",ᑿ:"b·",ᒁ:"ḃ·",ᒈ:"b'",Ы:"bl",в:"ʙ","ᏼ":"ʙ",ｃ:"c","ⅽ":"c","𝐜":"c","𝑐":"c","𝒄":"c","𝒸":"c","𝓬":"c","𝔠":"c","𝕔":"c","𝖈":"c","𝖼":"c","𝗰":"c","𝘤":"c","𝙘":"c","𝚌":"c","ᴄ":"c",ϲ:"c","ⲥ":"c",с:"c","ꮯ":"c","𐐽":"c","ⷭ":"ͨ","🝌":"C","𑣲":"C","𑣩":"C",Ｃ:"C","Ⅽ":"C",ℂ:"C",ℭ:"C","𝐂":"C","𝐶":"C","𝑪":"C","𝒞":"C","𝓒":"C","𝕮":"C","𝖢":"C","𝗖":"C","𝘊":"C","𝘾":"C","𝙲":"C","Ϲ":"C","Ⲥ":"C",С:"C",Ꮯ:"C","ꓚ":"C","𐊢":"C","𐌂":"C","𐐕":"C","𐔜":"C","¢":"c̸","ȼ":"c̸","₡":"C⃫","🅮":"C⃠",ç:"c̦",ҫ:"c̦",Ç:"C̦",Ҫ:"C̦",Ƈ:"C'","℅":"c/o","℆":"c/u","🅭":"㏄	⃝","⋴":"ꞓ",ɛ:"ꞓ",ε:"ꞓ","ϵ":"ꞓ","𝛆":"ꞓ","𝛜":"ꞓ","𝜀":"ꞓ","𝜖":"ꞓ","𝜺":"ꞓ","𝝐":"ꞓ","𝝴":"ꞓ","𝞊":"ꞓ","𝞮":"ꞓ","𝟄":"ꞓ","ⲉ":"ꞓ",є:"ꞓ","ԑ":"ꞓ","ꮛ":"ꞓ","𑣎":"ꞓ","𐐩":"ꞓ","€":"Ꞓ","Ⲉ":"Ꞓ",Є:"Ꞓ","⍷":"ꞓ̲","ͽ":"ꜿ","Ͽ":"Ꜿ","ⅾ":"d","ⅆ":"d","𝐝":"d","𝑑":"d","𝒅":"d","𝒹":"d","𝓭":"d","𝔡":"d","𝕕":"d","𝖉":"d","𝖽":"d","𝗱":"d","𝘥":"d","𝙙":"d","𝚍":"d","ԁ":"d",Ꮷ:"d",ᑯ:"d","ꓒ":"d","Ⅾ":"D","ⅅ":"D","𝐃":"D","𝐷":"D","𝑫":"D","𝒟":"D","𝓓":"D","𝔇":"D","𝔻":"D","𝕯":"D","𝖣":"D","𝗗":"D","𝘋":"D","𝘿":"D","𝙳":"D",Ꭰ:"D",ᗞ:"D",ᗪ:"D","ꓓ":"D",ɗ:"d̔",ɖ:"d̨",ƌ:"d̄",đ:"d̵",Đ:"D̵",Ð:"D̵",Ɖ:"D̵","₫":"ḏ̵","ꝺ":"Ꝺ",ᑻ:"d·",ᒇ:"d'",ʤ:"dȝ",ǳ:"dz",ʣ:"dz",ǲ:"Dz",Ǳ:"DZ",ǆ:"dž",ǅ:"Dž",Ǆ:"DŽ",ʥ:"dʑ","ꭰ":"ᴅ","⸹":"ẟ",δ:"ẟ","𝛅":"ẟ","𝛿":"ẟ","𝜹":"ẟ","𝝳":"ẟ","𝞭":"ẟ",ծ:"ẟ",ᕷ:"ẟ","℮":"e",ｅ:"e",ℯ:"e","ⅇ":"e","𝐞":"e","𝑒":"e","𝒆":"e","𝓮":"e","𝔢":"e","𝕖":"e","𝖊":"e","𝖾":"e","𝗲":"e","𝘦":"e","𝙚":"e","𝚎":"e","ꬲ":"e",е:"e",ҽ:"e","ⷷ":"ͤ","⋿":"E",Ｅ:"E",ℰ:"E","𝐄":"E","𝐸":"E","𝑬":"E","𝓔":"E","𝔈":"E","𝔼":"E","𝕰":"E","𝖤":"E","𝗘":"E","𝘌":"E","𝙀":"E","𝙴":"E",Ε:"E","𝚬":"E","𝛦":"E","𝜠":"E","𝝚":"E","𝞔":"E",Е:"E","ⴹ":"E",Ꭼ:"E","ꓰ":"E","𑢦":"E","𑢮":"E","𐊆":"E",ě:"ĕ",Ě:"Ĕ","ɇ":"e̸","Ɇ":"E̸",ҿ:"ę","ꭼ":"ᴇ",ə:"ǝ",ә:"ǝ","∃":"Ǝ","ⴺ":"Ǝ","ꓱ":"Ǝ",ɚ:"ǝ˞","ᴔ":"ǝo","ꭁ":"ǝo̸","ꭂ":"ǝo̵",Ә:"Ə","𝈡":"Ɛ",ℇ:"Ɛ","Ԑ":"Ɛ",Ꮛ:"Ɛ","𖼭":"Ɛ","𐐁":"Ɛ","ᶟ":"ᵋ","ᴈ":"ɜ",з:"ɜ",ҙ:"ɜ̦","𐑂":"ɞ","ꞝ":"ʚ","𐐪":"ʚ","𝐟":"f","𝑓":"f","𝒇":"f","𝒻":"f","𝓯":"f","𝔣":"f","𝕗":"f","𝖋":"f","𝖿":"f","𝗳":"f","𝘧":"f","𝙛":"f","𝚏":"f","ꬵ":"f","ꞙ":"f",ſ:"f","ẝ":"f",ք:"f","𝈓":"F",ℱ:"F","𝐅":"F","𝐹":"F","𝑭":"F","𝓕":"F","𝔉":"F","𝔽":"F","𝕱":"F","𝖥":"F","𝗙":"F","𝘍":"F","𝙁":"F","𝙵":"F","Ꞙ":"F",Ϝ:"F","𝟊":"F",ᖴ:"F","ꓝ":"F","𑣂":"F","𑢢":"F","𐊇":"F","𐊥":"F","𐔥":"F",ƒ:"f̦",Ƒ:"F̦","ᵮ":"f̴","℻":"FAX",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ʩ:"fŋ",ᖵ:"Ⅎ","ꓞ":"Ⅎ","𝈰":"ꟻ",ᖷ:"ꟻ",ｇ:"g",ℊ:"g","𝐠":"g","𝑔":"g","𝒈":"g","𝓰":"g","𝔤":"g","𝕘":"g","𝖌":"g","𝗀":"g","𝗴":"g","𝘨":"g","𝙜":"g","𝚐":"g",ɡ:"g","ᶃ":"g",ƍ:"g",ց:"g","𝐆":"G","𝐺":"G","𝑮":"G","𝒢":"G","𝓖":"G","𝔊":"G","𝔾":"G","𝕲":"G","𝖦":"G","𝗚":"G","𝘎":"G","𝙂":"G","𝙶":"G","Ԍ":"G",Ꮐ:"G",Ᏻ:"G","ꓖ":"G","ᶢ":"ᵍ",ɠ:"g̔",ǧ:"ğ",Ǧ:"Ğ",ǵ:"ģ",ǥ:"g̵",Ǥ:"G̵",Ɠ:"G'","ԍ":"ɢ","ꮐ":"ɢ","ᏻ":"ɢ",ｈ:"h",ℎ:"h","𝐡":"h","𝒉":"h","𝒽":"h","𝓱":"h","𝔥":"h","𝕙":"h","𝖍":"h","𝗁":"h","𝗵":"h","𝘩":"h","𝙝":"h","𝚑":"h",һ:"h",հ:"h",Ꮒ:"h",Ｈ:"H",ℋ:"H",ℌ:"H",ℍ:"H","𝐇":"H","𝐻":"H","𝑯":"H","𝓗":"H","𝕳":"H","𝖧":"H","𝗛":"H","𝘏":"H","𝙃":"H","𝙷":"H",Η:"H","𝚮":"H","𝛨":"H","𝜢":"H","𝝜":"H","𝞖":"H","Ⲏ":"H",Н:"H",Ꮋ:"H",ᕼ:"H","ꓧ":"H","𐋏":"H","ᵸ":"ᴴ",ɦ:"h̔","ꚕ":"h̔",Ᏺ:"h̔","Ⱨ":"H̩",Ң:"H̩",ħ:"h̵",ℏ:"h̵",ћ:"h̵",Ħ:"H̵","Ӊ":"H̦",Ӈ:"H̦",н:"ʜ","ꮋ":"ʜ",ң:"ʜ̩","ӊ":"ʜ̦",ӈ:"ʜ̦","Ԋ":"Ƕ","ꮀ":"ⱶ","Ͱ":"Ⱶ",Ꭸ:"Ⱶ",Ꮀ:"Ⱶ","ꚱ":"Ⱶ","ꞕ":"ꜧ","˛":"i","⍳":"i",ｉ:"i","ⅰ":"i",ℹ:"i","ⅈ":"i","𝐢":"i","𝑖":"i","𝒊":"i","𝒾":"i","𝓲":"i","𝔦":"i","𝕚":"i","𝖎":"i","𝗂":"i","𝗶":"i","𝘪":"i","𝙞":"i","𝚒":"i",ı:"i","𝚤":"i",ɪ:"i",ɩ:"i",ι:"i",ι:"i",ͺ:"i","𝛊":"i","𝜄":"i","𝜾":"i","𝝸":"i","𝞲":"i",і:"i","ꙇ":"i","ӏ":"i","ꭵ":"i",Ꭵ:"i","𑣃":"i","ⓛ":"Ⓘ","⍸":"i̲",ǐ:"ĭ",Ǐ:"Ĭ",ɨ:"i̵","ᵻ":"i̵","ᵼ":"i̵","ⅱ":"ii","ⅲ":"iii",ĳ:"ij","ⅳ":"iv","ⅸ":"ix",ｊ:"j","ⅉ":"j","𝐣":"j","𝑗":"j","𝒋":"j","𝒿":"j","𝓳":"j","𝔧":"j","𝕛":"j","𝖏":"j","𝗃":"j","𝗷":"j","𝘫":"j","𝙟":"j","𝚓":"j",ϳ:"j",ј:"j",Ｊ:"J","𝐉":"J","𝐽":"J","𝑱":"J","𝒥":"J","𝓙":"J","𝔍":"J","𝕁":"J","𝕵":"J","𝖩":"J","𝗝":"J","𝘑":"J","𝙅":"J","𝙹":"J","Ʝ":"J","Ϳ":"J",Ј:"J",Ꭻ:"J",ᒍ:"J","ꓙ":"J","ɉ":"j̵","Ɉ":"J̵",ᒙ:"J·","𝚥":"ȷ",յ:"ȷ","ꭻ":"ᴊ","𝐤":"k","𝑘":"k","𝒌":"k","𝓀":"k","𝓴":"k","𝔨":"k","𝕜":"k","𝖐":"k","𝗄":"k","𝗸":"k","𝘬":"k","𝙠":"k","𝚔":"k",K:"K",Ｋ:"K","𝐊":"K","𝐾":"K","𝑲":"K","𝒦":"K","𝓚":"K","𝔎":"K","𝕂":"K","𝕶":"K","𝖪":"K","𝗞":"K","𝘒":"K","𝙆":"K","𝙺":"K",Κ:"K","𝚱":"K","𝛫":"K","𝜥":"K","𝝟":"K","𝞙":"K","Ⲕ":"K",К:"K",Ꮶ:"K",ᛕ:"K","ꓗ":"K","𐔘":"K",ƙ:"k̔","Ⱪ":"K̩",Қ:"K̩","₭":"K̵","Ꝁ":"K̵",Ҟ:"K̵",Ƙ:"K'","׀":"l","|":"l","∣":"l","⏽":"l","￨":"l","١":"l","۱":"l","𐌠":"l","𞣇":"l","𝟏":"l","𝟙":"l","𝟣":"l","𝟭":"l","𝟷":"l","🯱":"l",I:l1e,Ｉ:"l","Ⅰ":"l",ℐ:"l",ℑ:"l","𝐈":"l","𝐼":"l","𝑰":"l","𝓘":"l","𝕀":"l","𝕴":"l","𝖨":"l","𝗜":"l","𝘐":"l","𝙄":"l","𝙸":"l",Ɩ:"l",ｌ:"l","ⅼ":"l",ℓ:"l","𝐥":"l","𝑙":"l","𝒍":"l","𝓁":"l","𝓵":"l","𝔩":"l","𝕝":"l","𝖑":"l","𝗅":"l","𝗹":"l","𝘭":"l","𝙡":"l","𝚕":"l",ǀ:"l",Ι:"l","𝚰":"l","𝛪":"l","𝜤":"l","𝝞":"l","𝞘":"l","Ⲓ":"l",І:"l",Ӏ:"l",ו:"l",ן:"l",ا:"l","𞸀":"l","𞺀":"l",ﺎ:"l",ﺍ:"l","ߊ":"l","ⵏ":"l",ᛁ:"l","ꓲ":"l","𖼨":"l","𐊊":"l","𐌉":"l","𝈪":"L","Ⅼ":"L",ℒ:"L","𝐋":"L","𝐿":"L","𝑳":"L","𝓛":"L","𝔏":"L","𝕃":"L","𝕷":"L","𝖫":"L","𝗟":"L","𝘓":"L","𝙇":"L","𝙻":"L","Ⳑ":"L",Ꮮ:"L",ᒪ:"L","ꓡ":"L","𖼖":"L","𑢣":"L","𑢲":"L","𐐛":"L","𐔦":"L",ﴼ:"l̋",ﴽ:"l̋",ł:"l̸",Ł:"L̸",ɭ:"l̨",Ɨ:"l̵",ƚ:"l̵",ɫ:"l̴",إ:"lٕ",ﺈ:"lٕ",ﺇ:"lٕ",ٳ:"lٕ",ŀ:"l·",Ŀ:"l·",ᒷ:"l·","🄂":"l,","⒈":"l.",ױ:"l'","⒓":"l2.","㏫":"l2日","㋋":"l2月","㍤":"l2点","⒔":"l3.","㏬":"l3日","㍥":"l3点","⒕":"l4.","㏭":"l4日","㍦":"l4点","⒖":"l5.","㏮":"l5日","㍧":"l5点","⒗":"l6.","㏯":"l6日","㍨":"l6点","⒘":"l7.","㏰":"l7日","㍩":"l7点","⒙":"l8.","㏱":"l8日","㍪":"l8点","⒚":"l9.","㏲":"l9日","㍫":"l9点",ǉ:"lj",Ĳ:"lJ",ǈ:"Lj",Ǉ:"LJ","‖":"ll","∥":"ll","Ⅱ":"ll",ǁ:"ll",װ:"ll","𐆙":"l̵l̵","⒒":"ll.","Ⅲ":"lll","𐆘":"l̵l̵S̵","㏪":"ll日","㋊":"ll月","㍣":"ll点",Ю:"lO","⒑":"lO.","㏩":"lO日","㋉":"lO月","㍢":"lO点",ʪ:"ls","₶":"lt","Ⅳ":"lV","Ⅸ":"lX",ɮ:"lȝ",ʫ:"lz",أ:"lٴ",ﺄ:"lٴ",ﺃ:"lٴ",ٲ:"lٴ",ٵ:"lٴ",ﷳ:"lكبر",ﷲ:"lللّٰo","㏠":"l日","㋀":"l月","㍙":"l点","ⳑ":"ʟ","ꮮ":"ʟ","𐑃":"ʟ",Ｍ:"M","Ⅿ":"M",ℳ:"M","𝐌":"M","𝑀":"M","𝑴":"M","𝓜":"M","𝔐":"M","𝕄":"M","𝕸":"M","𝖬":"M","𝗠":"M","𝘔":"M","𝙈":"M","𝙼":"M",Μ:"M","𝚳":"M","𝛭":"M","𝜧":"M","𝝡":"M","𝞛":"M","Ϻ":"M","Ⲙ":"M",М:"M",Ꮇ:"M",ᗰ:"M",ᛖ:"M","ꓟ":"M","𐊰":"M","𐌑":"M","Ӎ":"M̦","🝫":"MB","ⷨ":"ᷟ","𝐧":"n","𝑛":"n","𝒏":"n","𝓃":"n","𝓷":"n","𝔫":"n","𝕟":"n","𝖓":"n","𝗇":"n","𝗻":"n","𝘯":"n","𝙣":"n","𝚗":"n",ո:"n",ռ:"n",Ｎ:"N",ℕ:"N","𝐍":"N","𝑁":"N","𝑵":"N","𝒩":"N","𝓝":"N","𝔑":"N","𝕹":"N","𝖭":"N","𝗡":"N","𝘕":"N","𝙉":"N","𝙽":"N",Ν:"N","𝚴":"N","𝛮":"N","𝜨":"N","𝝢":"N","𝞜":"N","Ⲛ":"N","ꓠ":"N","𐔓":"N","𐆎":"N̊",ɳ:"n̨",ƞ:"n̩",η:"n̩","𝛈":"n̩","𝜂":"n̩","𝜼":"n̩","𝝶":"n̩","𝞰":"n̩",Ɲ:"N̦","ᵰ":"n̴",ǌ:"nj",ǋ:"Nj",Ǌ:"NJ","№":"No","ͷ":"ᴎ",и:"ᴎ","𐑍":"ᴎ",ņ:"ɲ","ం":"o","ಂ":"o","ം":"o","ං":"o","०":"o","੦":"o","૦":"o","௦":"o","౦":"o","೦":"o","൦":"o","๐":"o","໐":"o","၀":"o","٥":"o","۵":"o",ｏ:"o",ℴ:"o","𝐨":"o","𝑜":"o","𝒐":"o","𝓸":"o","𝔬":"o","𝕠":"o","𝖔":"o","𝗈":"o","𝗼":"o","𝘰":"o","𝙤":"o","𝚘":"o","ᴏ":"o","ᴑ":"o","ꬽ":"o",ο:"o","𝛐":"o","𝜊":"o","𝝄":"o","𝝾":"o","𝞸":"o",σ:"o","𝛔":"o","𝜎":"o","𝝈":"o","𝞂":"o","𝞼":"o","ⲟ":"o",о:"o","ჿ":"o",օ:"o",ס:"o",ه:"o","𞸤":"o","𞹤":"o","𞺄":"o",ﻫ:"o",ﻬ:"o",ﻪ:"o",ﻩ:"o",ھ:"o",ﮬ:"o",ﮭ:"o",ﮫ:"o",ﮪ:"o",ہ:"o",ﮨ:"o",ﮩ:"o",ﮧ:"o",ﮦ:"o",ە:"o",ഠ:"o",ဝ:"o","𐓪":"o","𑣈":"o","𑣗":"o","𐐬":"o","߀":"O","০":"O","୦":"O","〇":"O","𑓐":"O","𑣠":"O","𝟎":"O","𝟘":"O","𝟢":"O","𝟬":"O","𝟶":"O","🯰":"O",Ｏ:"O","𝐎":"O","𝑂":"O","𝑶":"O","𝒪":"O","𝓞":"O","𝔒":"O","𝕆":"O","𝕺":"O","𝖮":"O","𝗢":"O","𝘖":"O","𝙊":"O","𝙾":"O",Ο:"O","𝚶":"O","𝛰":"O","𝜪":"O","𝝤":"O","𝞞":"O","Ⲟ":"O",О:"O",Օ:"O","ⵔ":"O",ዐ:"O",ଠ:"O","𐓂":"O","ꓳ":"O","𑢵":"O","𐊒":"O","𐊫":"O","𐐄":"O","𐔖":"O","⁰":"º","ᵒ":"º",ǒ:"ŏ",Ǒ:"Ŏ","ۿ":"ô",Ő:"Ö",ø:"o̸","ꬾ":"o̸",Ø:"O̸","ⵁ":"O̸",Ǿ:"Ó̸",ɵ:"o̵","ꝋ":"o̵",ө:"o̵",ѳ:"o̵","ꮎ":"o̵","ꮻ":"o̵","⊖":"O̵","⊝":"O̵","⍬":"O̵","𝈚":"O̵","🜔":"O̵",Ɵ:"O̵","Ꝋ":"O̵",θ:"O̵",ϑ:"O̵","𝛉":"O̵","𝛝":"O̵","𝜃":"O̵","𝜗":"O̵","𝜽":"O̵","𝝑":"O̵","𝝷":"O̵","𝞋":"O̵","𝞱":"O̵","𝟅":"O̵",Θ:"O̵","ϴ":"O̵","𝚯":"O̵","𝚹":"O̵","𝛩":"O̵","𝛳":"O̵","𝜣":"O̵","𝜭":"O̵","𝝝":"O̵","𝝧":"O̵","𝞗":"O̵","𝞡":"O̵",Ө:"O̵",Ѳ:"O̵","ⴱ":"O̵",Ꮎ:"O̵",Ꮻ:"O̵","ꭴ":"ơ",ﳙ:"oٰ","🄁":"O,","🄀":"O.",ơ:"o'",Ơ:"O'",Ꭴ:"O'","%":"º/₀","٪":"º/₀","⁒":"º/₀","‰":"º/₀₀","؉":"º/₀₀","‱":"º/₀₀₀","؊":"º/₀₀₀",œ:"oe",Œ:"OE",ɶ:"oᴇ","∞":"oo","ꝏ":"oo","ꚙ":"oo","Ꝏ":"OO","Ꚙ":"OO",ﳗ:"oج",ﱑ:"oج",ﳘ:"oم",ﱒ:"oم",ﶓ:"oمج",ﶔ:"oمم",ﱓ:"oى",ﱔ:"oى","ൟ":"oരo",တ:"oာ","㍘":"O点","ↄ":"ɔ","ᴐ":"ɔ","ͻ":"ɔ","𐑋":"ɔ","Ↄ":"Ɔ","Ͻ":"Ɔ","ꓛ":"Ɔ","𐐣":"Ɔ","ꬿ":"ɔ̸","ꭢ":"ɔe","𐐿":"ɷ","⍴":"p",ｐ:"p","𝐩":"p","𝑝":"p","𝒑":"p","𝓅":"p","𝓹":"p","𝔭":"p","𝕡":"p","𝖕":"p","𝗉":"p","𝗽":"p","𝘱":"p","𝙥":"p","𝚙":"p",ρ:"p",ϱ:"p","𝛒":"p","𝛠":"p","𝜌":"p","𝜚":"p","𝝆":"p","𝝔":"p","𝞀":"p","𝞎":"p","𝞺":"p","𝟈":"p","ⲣ":"p",р:"p",Ｐ:"P",ℙ:"P","𝐏":"P","𝑃":"P","𝑷":"P","𝒫":"P","𝓟":"P","𝔓":"P","𝕻":"P","𝖯":"P","𝗣":"P","𝘗":"P","𝙋":"P","𝙿":"P",Ρ:"P","𝚸":"P","𝛲":"P","𝜬":"P","𝝦":"P","𝞠":"P","Ⲣ":"P",Р:"P",Ꮲ:"P",ᑭ:"P","ꓑ":"P","𐊕":"P",ƥ:"p̔","ᵽ":"p̵",ᑷ:"p·",ᒆ:"P'","ᴩ":"ᴘ","ꮲ":"ᴘ",φ:"ɸ",ϕ:"ɸ","𝛗":"ɸ","𝛟":"ɸ","𝜑":"ɸ","𝜙":"ɸ","𝝋":"ɸ","𝝓":"ɸ","𝞅":"ɸ","𝞍":"ɸ","𝞿":"ɸ","𝟇":"ɸ","ⲫ":"ɸ",ф:"ɸ","𝐪":"q","𝑞":"q","𝒒":"q","𝓆":"q","𝓺":"q","𝔮":"q","𝕢":"q","𝖖":"q","𝗊":"q","𝗾":"q","𝘲":"q","𝙦":"q","𝚚":"q","ԛ":"q",գ:"q",զ:"q",ℚ:"Q","𝐐":"Q","𝑄":"Q","𝑸":"Q","𝒬":"Q","𝓠":"Q","𝔔":"Q","𝕼":"Q","𝖰":"Q","𝗤":"Q","𝘘":"Q","𝙌":"Q","𝚀":"Q","ⵕ":"Q",ʠ:"q̔","🜀":"QE","ᶐ":"ɋ","ᴋ":"ĸ",κ:"ĸ",ϰ:"ĸ","𝛋":"ĸ","𝛞":"ĸ","𝜅":"ĸ","𝜘":"ĸ","𝜿":"ĸ","𝝒":"ĸ","𝝹":"ĸ","𝞌":"ĸ","𝞳":"ĸ","𝟆":"ĸ","ⲕ":"ĸ",к:"ĸ","ꮶ":"ĸ",қ:"ĸ̩",ҟ:"ĸ̵","𝐫":"r","𝑟":"r","𝒓":"r","𝓇":"r","𝓻":"r","𝔯":"r","𝕣":"r","𝖗":"r","𝗋":"r","𝗿":"r","𝘳":"r","𝙧":"r","𝚛":"r","ꭇ":"r","ꭈ":"r","ᴦ":"r","ⲅ":"r",г:"r","ꮁ":"r","𝈖":"R",ℛ:"R",ℜ:"R",ℝ:"R","𝐑":"R","𝑅":"R","𝑹":"R","𝓡":"R","𝕽":"R","𝖱":"R","𝗥":"R","𝘙":"R","𝙍":"R","𝚁":"R",Ʀ:"R",Ꭱ:"R",Ꮢ:"R","𐒴":"R",ᖇ:"R","ꓣ":"R","𖼵":"R",ɽ:"r̨",ɼ:"r̩","ɍ":"r̵",ғ:"r̵","ᵲ":"r̴",ґ:"r'","𑣣":"rn",m:c1e,"ⅿ":"rn","𝐦":"rn","𝑚":"rn","𝒎":"rn","𝓂":"rn","𝓶":"rn","𝔪":"rn","𝕞":"rn","𝖒":"rn","𝗆":"rn","𝗺":"rn","𝘮":"rn","𝙢":"rn","𝚖":"rn","𑜀":"rn","₥":"rn̸",ɱ:"rn̦","ᵯ":"rn̴","₨":"Rs","ꭱ":"ʀ","ꮢ":"ʀ",я:"ᴙ","ᵳ":"ɾ̴","℩":"ɿ",ｓ:"s","𝐬":"s","𝑠":"s","𝒔":"s","𝓈":"s","𝓼":"s","𝔰":"s","𝕤":"s","𝖘":"s","𝗌":"s","𝘀":"s","𝘴":"s","𝙨":"s","𝚜":"s","ꜱ":"s",ƽ:"s",ѕ:"s","ꮪ":"s","𑣁":"s","𐑈":"s",Ｓ:"S","𝐒":"S","𝑆":"S","𝑺":"S","𝒮":"S","𝓢":"S","𝔖":"S","𝕊":"S","𝕾":"S","𝖲":"S","𝗦":"S","𝘚":"S","𝙎":"S","𝚂":"S",Ѕ:"S",Տ:"S",Ꮥ:"S",Ꮪ:"S","ꓢ":"S","𖼺":"S","𐊖":"S","𐐠":"S",ʂ:"s̨","ᵴ":"s̴","ꞵ":"ß",β:"ß",ϐ:"ß","𝛃":"ß","𝛽":"ß","𝜷":"ß","𝝱":"ß","𝞫":"ß",Ᏸ:"ß","🝜":"sss",ﬆ:"st","∫":"ʃ","ꭍ":"ʃ","∑":"Ʃ","⅀":"Ʃ",Σ:"Ʃ","𝚺":"Ʃ","𝛴":"Ʃ","𝜮":"Ʃ","𝝨":"Ʃ","𝞢":"Ʃ","ⵉ":"Ʃ","∬":"ʃʃ","∭":"ʃʃʃ","⨌":"ʃʃʃʃ","𝐭":"t","𝑡":"t","𝒕":"t","𝓉":"t","𝓽":"t","𝔱":"t","𝕥":"t","𝖙":"t","𝗍":"t","𝘁":"t","𝘵":"t","𝙩":"t","𝚝":"t","⊤":"T","⟙":"T","🝨":"T",Ｔ:"T","𝐓":"T","𝑇":"T","𝑻":"T","𝒯":"T","𝓣":"T","𝔗":"T","𝕋":"T","𝕿":"T","𝖳":"T","𝗧":"T","𝘛":"T","𝙏":"T","𝚃":"T",Τ:"T","𝚻":"T","𝛵":"T","𝜯":"T","𝝩":"T","𝞣":"T","Ⲧ":"T",Т:"T",Ꭲ:"T","ꓔ":"T","𖼊":"T","𑢼":"T","𐊗":"T","𐊱":"T","𐌕":"T",ƭ:"t̔","⍡":"T̈","Ⱦ":"T̸",Ț:"Ţ",Ʈ:"T̨",Ҭ:"T̩","₮":"T⃫",ŧ:"t̵",Ŧ:"T̵","ᵵ":"t̴",Ⴀ:"Ꞇ","Ꜩ":"T3",ʨ:"tɕ","℡":"TEL","ꝷ":"tf",ʦ:"ts",ʧ:"tʃ","ꜩ":"tȝ",τ:"ᴛ","𝛕":"ᴛ","𝜏":"ᴛ","𝝉":"ᴛ","𝞃":"ᴛ","𝞽":"ᴛ",т:"ᴛ","ꭲ":"ᴛ",ҭ:"ᴛ̩",ţ:"ƫ",ț:"ƫ",Ꮏ:"ƫ","𝐮":"u","𝑢":"u","𝒖":"u","𝓊":"u","𝓾":"u","𝔲":"u","𝕦":"u","𝖚":"u","𝗎":"u","𝘂":"u","𝘶":"u","𝙪":"u","𝚞":"u","ꞟ":"u","ᴜ":"u","ꭎ":"u","ꭒ":"u",ʋ:"u",υ:"u","𝛖":"u","𝜐":"u","𝝊":"u","𝞄":"u","𝞾":"u",ս:"u","𐓶":"u","𑣘":"u","∪":"U","⋃":"U","𝐔":"U","𝑈":"U","𝑼":"U","𝒰":"U","𝓤":"U","𝔘":"U","𝕌":"U","𝖀":"U","𝖴":"U","𝗨":"U","𝘜":"U","𝙐":"U","𝚄":"U",Ս:"U",ሀ:"U","𐓎":"U",ᑌ:"U","ꓴ":"U","𖽂":"U","𑢸":"U",ǔ:"ŭ",Ǔ:"Ŭ","ᵾ":"u̵","ꮜ":"u̵","Ʉ":"U̵",Ꮜ:"U̵",ᑘ:"U·",ᑧ:"U'","ᵫ":"ue","ꭣ":"uo",ṃ:"ꭑ",պ:"ɰ",ሣ:"ɰ","℧":"Ʊ",ᘮ:"Ʊ",ᘴ:"Ʊ","ᵿ":"ʊ̵","∨":"v","⋁":"v",ｖ:"v","ⅴ":"v","𝐯":"v","𝑣":"v","𝒗":"v","𝓋":"v","𝓿":"v","𝔳":"v","𝕧":"v","𝖛":"v","𝗏":"v","𝘃":"v","𝘷":"v","𝙫":"v","𝚟":"v","ᴠ":"v",ν:"v","𝛎":"v","𝜈":"v","𝝂":"v","𝝼":"v","𝞶":"v",ѵ:"v",ט:"v","𑜆":"v","ꮩ":"v","𑣀":"v","𝈍":"V","٧":"V","۷":"V","Ⅴ":"V","𝐕":"V","𝑉":"V","𝑽":"V","𝒱":"V","𝓥":"V","𝔙":"V","𝕍":"V","𝖁":"V","𝖵":"V","𝗩":"V","𝘝":"V","𝙑":"V","𝚅":"V",Ѵ:"V","ⴸ":"V",Ꮩ:"V",ᐯ:"V","ꛟ":"V","ꓦ":"V","𖼈":"V","𑢠":"V","𐔝":"V","𐆗":"V̵",ᐻ:"V·","🝬":"VB","ⅵ":"vi","ⅶ":"vii","ⅷ":"viii","Ⅵ":"Vl","Ⅶ":"Vll","Ⅷ":"Vlll","🜈":"Vᷤ","ᴧ":"ʌ","𐓘":"ʌ","٨":"Ʌ","۸":"Ʌ",Λ:"Ʌ","𝚲":"Ʌ","𝛬":"Ʌ","𝜦":"Ʌ","𝝠":"Ʌ","𝞚":"Ʌ",Л:"Ʌ","ⴷ":"Ʌ","𐒰":"Ʌ",ᐱ:"Ʌ","ꛎ":"Ʌ","ꓥ":"Ʌ","𖼽":"Ʌ","𐊍":"Ʌ","Ӆ":"Ʌ̦",ᐽ:"Ʌ·",ɯ:"w","𝐰":"w","𝑤":"w","𝒘":"w","𝓌":"w","𝔀":"w","𝔴":"w","𝕨":"w","𝖜":"w","𝗐":"w","𝘄":"w","𝘸":"w","𝙬":"w","𝚠":"w","ᴡ":"w",ѡ:"w","ԝ":"w",ա:"w","𑜊":"w","𑜎":"w","𑜏":"w","ꮃ":"w","𑣯":"W","𑣦":"W","𝐖":"W","𝑊":"W","𝑾":"W","𝒲":"W","𝓦":"W","𝔚":"W","𝕎":"W","𝖂":"W","𝖶":"W","𝗪":"W","𝘞":"W","𝙒":"W","𝚆":"W","Ԝ":"W",Ꮃ:"W",Ꮤ:"W","ꓪ":"W",ѽ:"w҆҇","𑓅":"ẇ","₩":"W̵","ꝡ":"w̦","ᴍ":"ʍ",м:"ʍ","ꮇ":"ʍ","ӎ":"ʍ̦","᙮":"x","×":"x","⤫":"x","⤬":"x","⨯":"x",ｘ:"x","ⅹ":"x","𝐱":"x","𝑥":"x","𝒙":"x","𝓍":"x","𝔁":"x","𝔵":"x","𝕩":"x","𝖝":"x","𝗑":"x","𝘅":"x","𝘹":"x","𝙭":"x","𝚡":"x",х:"x",ᕁ:"x",ᕽ:"x","ⷯ":"ͯ","᙭":"X","╳":"X","𐌢":"X","𑣬":"X",Ｘ:"X","Ⅹ":"X","𝐗":"X","𝑋":"X","𝑿":"X","𝒳":"X","𝓧":"X","𝔛":"X","𝕏":"X","𝖃":"X","𝖷":"X","𝗫":"X","𝘟":"X","𝙓":"X","𝚇":"X","Ꭓ":"X",Χ:"X","𝚾":"X","𝛸":"X","𝜲":"X","𝝬":"X","𝞦":"X","Ⲭ":"X",Х:"X","ⵝ":"X",ᚷ:"X","ꓫ":"X","𐊐":"X","𐊴":"X","𐌗":"X","𐔧":"X","⨰":"ẋ",Ҳ:"X̩","𐆖":"X̵","ⅺ":"xi","ⅻ":"xii","Ⅺ":"Xl","Ⅻ":"Xll",ɣ:"y","ᶌ":"y",ｙ:"y","𝐲":"y","𝑦":"y","𝒚":"y","𝓎":"y","𝔂":"y","𝔶":"y","𝕪":"y","𝖞":"y","𝗒":"y","𝘆":"y","𝘺":"y","𝙮":"y","𝚢":"y",ʏ:"y","ỿ":"y","ꭚ":"y",γ:"y","ℽ":"y","𝛄":"y","𝛾":"y","𝜸":"y","𝝲":"y","𝞬":"y",у:"y",ү:"y",ყ:"y","𑣜":"y",Ｙ:"Y","𝐘":"Y","𝑌":"Y","𝒀":"Y","𝒴":"Y","𝓨":"Y","𝔜":"Y","𝕐":"Y","𝖄":"Y","𝖸":"Y","𝗬":"Y","𝘠":"Y","𝙔":"Y","𝚈":"Y",Υ:"Y",ϒ:"Y","𝚼":"Y","𝛶":"Y","𝜰":"Y","𝝪":"Y","𝞤":"Y","Ⲩ":"Y",У:"Y",Ү:"Y",Ꭹ:"Y",Ꮍ:"Y","ꓬ":"Y","𖽃":"Y","𑢤":"Y","𐊲":"Y",ƴ:"y̔","ɏ":"y̵",ұ:"y̵","¥":"Y̵","Ɏ":"Y̵",Ұ:"Y̵",ʒ:"ȝ","ꝫ":"ȝ","ⳍ":"ȝ",ӡ:"ȝ",ჳ:"ȝ","𝐳":"z","𝑧":"z","𝒛":"z","𝓏":"z","𝔃":"z","𝔷":"z","𝕫":"z","𝖟":"z","𝗓":"z","𝘇":"z","𝘻":"z","𝙯":"z","𝚣":"z","ᴢ":"z","ꮓ":"z","𑣄":"z","𐋵":"Z","𑣥":"Z",Ｚ:"Z",ℤ:"Z",ℨ:"Z","𝐙":"Z","𝑍":"Z","𝒁":"Z","𝒵":"Z","𝓩":"Z","𝖅":"Z","𝖹":"Z","𝗭":"Z","𝘡":"Z","𝙕":"Z","𝚉":"Z",Ζ:"Z","𝚭":"Z","𝛧":"Z","𝜡":"Z","𝝛":"Z","𝞕":"Z",Ꮓ:"Z","ꓜ":"Z","𑢩":"Z",ʐ:"z̨",ƶ:"z̵",Ƶ:"Z̵",ȥ:"z̦",Ȥ:"Z̦","ᵶ":"z̴",ƿ:"þ","ϸ":"þ","Ϸ":"Þ","𐓄":"Þ","⁹":"ꝰ","ᴤ":"ƨ",ϩ:"ƨ","ꙅ":"ƨ",ь:"ƅ","ꮟ":"ƅ",ы:"ƅi","ꭾ":"ɂ",ˤ:"ˁ","ꛍ":"ʡ","⊙":"ʘ","☉":"ʘ","⨀":"ʘ","Ꙩ":"ʘ","ⵙ":"ʘ","𐓃":"ʘ","ℾ":"Γ","𝚪":"Γ","𝛤":"Γ","𝜞":"Γ","𝝘":"Γ","𝞒":"Γ","Ⲅ":"Γ",Г:"Γ",Ꮁ:"Γ",ᒥ:"Γ","𖼇":"Γ",Ғ:"Γ̵",ᒯ:"Γ·",Ґ:"Γ'","∆":"Δ","△":"Δ","🜂":"Δ","𝚫":"Δ","𝛥":"Δ","𝜟":"Δ","𝝙":"Δ","𝞓":"Δ","Ⲇ":"Δ","ⵠ":"Δ",ᐃ:"Δ","𖼚":"Δ","𐊅":"Δ","𐊣":"Δ","⍙":"Δ̲",ᐏ:"Δ·",ᐬ:"Δᐠ","𝟋":"ϝ","𝛇":"ζ","𝜁":"ζ","𝜻":"ζ","𝝵":"ζ","𝞯":"ζ","ⳤ":"ϗ","𝛌":"λ","𝜆":"λ","𝝀":"λ","𝝺":"λ","𝞴":"λ","Ⲗ":"λ","𐓛":"λ",µ:"μ","𝛍":"μ","𝜇":"μ","𝝁":"μ","𝝻":"μ","𝞵":"μ","𝛏":"ξ","𝜉":"ξ","𝝃":"ξ","𝝽":"ξ","𝞷":"ξ","𝚵":"Ξ","𝛯":"Ξ","𝜩":"Ξ","𝝣":"Ξ","𝞝":"Ξ",ϖ:"π","ℼ":"π","𝛑":"π","𝛡":"π","𝜋":"π","𝜛":"π","𝝅":"π","𝝕":"π","𝝿":"π","𝞏":"π","𝞹":"π","𝟉":"π","ᴨ":"π",п:"π","∏":"Π","ℿ":"Π","𝚷":"Π","𝛱":"Π","𝜫":"Π","𝝥":"Π","𝞟":"Π","Ⲡ":"Π",П:"Π","ꛛ":"Π","𐊭":"Ϙ","𐌒":"Ϙ",ϛ:"ς","𝛓":"ς","𝜍":"ς","𝝇":"ς","𝞁":"ς","𝞻":"ς","𝚽":"Φ","𝛷":"Φ","𝜱":"Φ","𝝫":"Φ","𝞥":"Φ","Ⲫ":"Φ",Ф:"Φ",Փ:"Φ",ቀ:"Φ","ᛰ":"Φ","𐊳":"Φ","ꭓ":"χ","ꭕ":"χ","𝛘":"χ","𝜒":"χ","𝝌":"χ","𝞆":"χ","𝟀":"χ","ⲭ":"χ","𝛙":"ψ","𝜓":"ψ","𝝍":"ψ","𝞇":"ψ","𝟁":"ψ",ѱ:"ψ","𐓹":"ψ","𝚿":"Ψ","𝛹":"Ψ","𝜳":"Ψ","𝝭":"Ψ","𝞧":"Ψ","Ⲯ":"Ψ",Ѱ:"Ψ","𐓑":"Ψ",ᛘ:"Ψ","𐊵":"Ψ","⍵":"ω","ꞷ":"ω","𝛚":"ω","𝜔":"ω","𝝎":"ω","𝞈":"ω","𝟂":"ω","ⲱ":"ω","ꙍ":"ω",Ω:"Ω","𝛀":"Ω","𝛺":"Ω","𝜴":"Ω","𝝮":"Ω","𝞨":"Ω",ᘯ:"Ω",ᘵ:"Ω","𐊶":"Ω","⍹":"ω̲",ώ:"ῴ","☰":"Ⲷ","Ⳝ":"Ϭ",җ:"ж̩",Җ:"Ж̩","𝈋":"И","Ͷ":"И","ꚡ":"И","𐐥":"И",Й:"Ѝ","Ҋ":"Ѝ̦",ѝ:"й","ҋ":"й̦","𐒼":"Ӄ","ᴫ":"л","ӆ":"л̦","ꭠ":"љ","𐓫":"ꙩ","ᷮ":"ⷬ","𐓍":"Ћ","𝈂":"Ӿ","𝈢":"Ѡ",Ꮗ:"Ѡ",ᗯ:"Ѡ",Ѽ:"Ѡ҆҇","ᣭ":"Ѡ·","Ꞷ":"Ꙍ",ӌ:"ҷ",Ӌ:"Ҷ",Ҿ:"Ҽ̨","ⲽ":"ш","Ⲽ":"Ш","Ꙑ":"Ъl","℈":"Э","🜁":"Ꙙ","𖼜":"Ꙙ","ꦒ":"ⰿ",և:"եւ",ኔ:"ձ",ﬔ:"մե",ﬕ:"մի",ﬗ:"մխ",ﬓ:"մն","∩":"Ո","⋂":"Ո","𝉅":"Ո",በ:"Ո",ᑎ:"Ո","ꓵ":"Ո",ᑚ:"Ո·",ᑨ:"Ո'",ﬖ:"վն","₽":"Ք","˓":"ՙ",ʿ:"ՙ",ℵ:"א",ﬡ:"א",אָ:"אַ",אּ:"אַ",ﭏ:"אל",ℶ:"ב",ℷ:"ג",ℸ:"ד",ﬢ:"ד",ﬣ:"ה",יּ:"יִ",ﬤ:"כ",ﬥ:"ל",ﬦ:"ם",ﬠ:"ע",ﬧ:"ר",שׂ:"שׁ",שּ:"שׁ",שּׂ:"שּׁ",ﬨ:"ת",ﺀ:"ء","۽":"ء͈",ﺂ:"آ",ﺁ:"آ",ﭑ:"ٱ",ﭐ:"ٱ","𞸁":"ب","𞸡":"ب","𞹡":"ب","𞺁":"ب","𞺡":"ب",ﺑ:"ب",ﺒ:"ب",ﺐ:"ب",ﺏ:"ب","ݑ":"بۛ","ࢶ":"بۢ","ࢡ":"بٔ",ﲠ:"بo",ﳢ:"بo",ﲜ:"بج",ﰅ:"بج",ﲝ:"بح",ﰆ:"بح",ﷂ:"بحى",ﲞ:"بخ",ﰇ:"بخ",ﳒ:"بخ",ﱋ:"بخ",ﶞ:"بخى",ﱪ:"بر",ﱫ:"بز",ﲟ:"بم",ﳡ:"بم",ﱬ:"بم",ﰈ:"بم",ﱭ:"بن",ﱮ:"بى",ﰉ:"بى",ﱯ:"بى",ﰊ:"بى",ﭔ:"ٻ",ﭕ:"ٻ",ﭓ:"ٻ",ﭒ:"ٻ",ې:"ٻ",ﯦ:"ٻ",ﯧ:"ٻ",ﯥ:"ٻ",ﯤ:"ٻ",ﭜ:"ڀ",ﭝ:"ڀ",ﭛ:"ڀ",ﭚ:"ڀ","ࢩ":"ݔ","ݧ":"ݔ","⍥":"ة",ö:"ة",ﺔ:"ة",ﺓ:"ة",ۃ:"ة","𞸕":"ت","𞸵":"ت","𞹵":"ت","𞺕":"ت","𞺵":"ت",ﺗ:"ت",ﺘ:"ت",ﺖ:"ت",ﺕ:"ت",ﲥ:"تo",ﳤ:"تo",ﲡ:"تج",ﰋ:"تج",ﵐ:"تجم",ﶠ:"تجى",ﶟ:"تجى",ﲢ:"تح",ﰌ:"تح",ﵒ:"تحج",ﵑ:"تحج",ﵓ:"تحم",ﲣ:"تخ",ﰍ:"تخ",ﵔ:"تخم",ﶢ:"تخى",ﶡ:"تخى",ﱰ:"تر",ﱱ:"تز",ﲤ:"تم",ﳣ:"تم",ﱲ:"تم",ﰎ:"تم",ﵕ:"تمج",ﵖ:"تمح",ﵗ:"تمخ",ﶤ:"تمى",ﶣ:"تمى",ﱳ:"تن",ﱴ:"تى",ﰏ:"تى",ﱵ:"تى",ﰐ:"تى",ﭠ:"ٺ",ﭡ:"ٺ",ﭟ:"ٺ",ﭞ:"ٺ",ﭤ:"ٿ",ﭥ:"ٿ",ﭣ:"ٿ",ﭢ:"ٿ","𞸂":"ج","𞸢":"ج","𞹂":"ج","𞹢":"ج","𞺂":"ج","𞺢":"ج",ﺟ:"ج",ﺠ:"ج",ﺞ:"ج",ﺝ:"ج",ﲧ:"جح",ﰕ:"جح",ﶦ:"جحى",ﶾ:"جحى",ﷻ:"جل جلlلo",ﲨ:"جم",ﰖ:"جم",ﵙ:"جمح",ﵘ:"جمح",ﶧ:"جمى",ﶥ:"جمى",ﴝ:"جى",ﴁ:"جى",ﴞ:"جى",ﴂ:"جى",ﭸ:"ڃ",ﭹ:"ڃ",ﭷ:"ڃ",ﭶ:"ڃ",ﭴ:"ڄ",ﭵ:"ڄ",ﭳ:"ڄ",ﭲ:"ڄ",ﭼ:"چ",ﭽ:"چ",ﭻ:"چ",ﭺ:"چ",ﮀ:"ڇ",ﮁ:"ڇ",ﭿ:"ڇ",ﭾ:"ڇ","𞸇":"ح","𞸧":"ح","𞹇":"ح","𞹧":"ح","𞺇":"ح","𞺧":"ح",ﺣ:"ح",ﺤ:"ح",ﺢ:"ح",ﺡ:"ح",څ:"حۛ",ځ:"حٔ","ݲ":"حٔ",ﲩ:"حج",ﰗ:"حج",ﶿ:"حجى",ﲪ:"حم",ﰘ:"حم",ﵛ:"حمى",ﵚ:"حمى",ﴛ:"حى",ﳿ:"حى",ﴜ:"حى",ﴀ:"حى","𞸗":"خ","𞸷":"خ","𞹗":"خ","𞹷":"خ","𞺗":"خ","𞺷":"خ",ﺧ:"خ",ﺨ:"خ",ﺦ:"خ",ﺥ:"خ",ﲫ:"خج",ﰙ:"خج",ﰚ:"خح",ﲬ:"خم",ﰛ:"خم",ﴟ:"خى",ﴃ:"خى",ﴠ:"خى",ﴄ:"خى","𐋡":"د","𞸃":"د","𞺃":"د","𞺣":"د",ﺪ:"د",ﺩ:"د",ڈ:"دؕ",ﮉ:"دؕ",ﮈ:"دؕ",ڎ:"دۛ",ﮇ:"دۛ",ﮆ:"دۛ","ۮ":"د̂","ࢮ":"د̤̣","𞸘":"ذ","𞺘":"ذ","𞺸":"ذ",ﺬ:"ذ",ﺫ:"ذ",ﱛ:"ذٰ",ڋ:"ڊؕ",ﮅ:"ڌ",ﮄ:"ڌ",ﮃ:"ڍ",ﮂ:"ڍ","𞸓":"ر","𞺓":"ر","𞺳":"ر",ﺮ:"ر",ﺭ:"ر",ڑ:"رؕ",ﮍ:"رؕ",ﮌ:"رؕ",ژ:"رۛ",ﮋ:"رۛ",ﮊ:"رۛ",ڒ:"ر̆","ࢹ":"ر̆̇","ۯ":"ر̂","ݬ":"رٔ",ﱜ:"رٰ",ﷶ:"رسول","﷼":"رىlل","𞸆":"ز","𞺆":"ز","𞺦":"ز",ﺰ:"ز",ﺯ:"ز","ࢲ":"ز̂","ݱ":"ڗؕ","𞸎":"س","𞸮":"س","𞹎":"س","𞹮":"س","𞺎":"س","𞺮":"س",ﺳ:"س",ﺴ:"س",ﺲ:"س",ﺱ:"س",ش:"سۛ","𞸔":"سۛ","𞸴":"سۛ","𞹔":"سۛ","𞹴":"سۛ","𞺔":"سۛ","𞺴":"سۛ",ﺷ:"سۛ",ﺸ:"سۛ",ﺶ:"سۛ",ﺵ:"سۛ","ݾ":"س̂",ﴱ:"سo",ﳨ:"سo",ﴲ:"سۛo",ﳪ:"سۛo",ﲭ:"سج",ﴴ:"سج",ﰜ:"سج",ﴭ:"سۛج",ﴷ:"سۛج",ﴥ:"سۛج",ﴉ:"سۛج",ﵝ:"سجح",ﵞ:"سجى",ﵩ:"سۛجى",ﲮ:"سح",ﴵ:"سح",ﰝ:"سح",ﴮ:"سۛح",ﴸ:"سۛح",ﴦ:"سۛح",ﴊ:"سۛح",ﵜ:"سحج",ﵨ:"سۛحم",ﵧ:"سۛحم",ﶪ:"سۛحى",ﲯ:"سخ",ﴶ:"سخ",ﰞ:"سخ",ﴯ:"سۛخ",ﴹ:"سۛخ",ﴧ:"سۛخ",ﴋ:"سۛخ",ﶨ:"سخى",ﷆ:"سخى",ﴪ:"سر",ﴎ:"سر",ﴩ:"سۛر",ﴍ:"سۛر",ﲰ:"سم",ﳧ:"سم",ﰟ:"سم",ﴰ:"سۛم",ﳩ:"سۛم",ﴨ:"سۛم",ﴌ:"سۛم",ﵡ:"سمج",ﵠ:"سمح",ﵟ:"سمح",ﵫ:"سۛمخ",ﵪ:"سۛمخ",ﵣ:"سمم",ﵢ:"سمم",ﵭ:"سۛمم",ﵬ:"سۛمم",ﴗ:"سى",ﳻ:"سى",ﴘ:"سى",ﳼ:"سى",ﴙ:"سۛى",ﳽ:"سۛى",ﴚ:"سۛى",ﳾ:"سۛى","𐋲":"ص","𞸑":"ص","𞸱":"ص","𞹑":"ص","𞹱":"ص","𞺑":"ص","𞺱":"ص",ﺻ:"ص",ﺼ:"ص",ﺺ:"ص",ﺹ:"ص",ڞ:"صۛ","ࢯ":"ص̤̣",ﲱ:"صح",ﰠ:"صح",ﵥ:"صحح",ﵤ:"صحح",ﶩ:"صحى",ﲲ:"صخ",ﴫ:"صر",ﴏ:"صر",ﷵ:"صلعم",ﷹ:"صلى",ﷰ:"صلى",ﷺ:"صلى lللo علىo وسلم",ﲳ:"صم",ﰡ:"صم",ﷅ:"صمم",ﵦ:"صمم",ﴡ:"صى",ﴅ:"صى",ﴢ:"صى",ﴆ:"صى","𞸙":"ض","𞸹":"ض","𞹙":"ض","𞹹":"ض","𞺙":"ض","𞺹":"ض",ﺿ:"ض",ﻀ:"ض",ﺾ:"ض",ﺽ:"ض",ﲴ:"ضج",ﰢ:"ضج",ﲵ:"ضح",ﰣ:"ضح",ﵮ:"ضحى",ﶫ:"ضحى",ﲶ:"ضخ",ﰤ:"ضخ",ﵰ:"ضخم",ﵯ:"ضخم",ﴬ:"ضر",ﴐ:"ضر",ﲷ:"ضم",ﰥ:"ضم",ﴣ:"ضى",ﴇ:"ضى",ﴤ:"ضى",ﴈ:"ضى","𐋨":"ط","𞸈":"ط","𞹨":"ط","𞺈":"ط","𞺨":"ط",ﻃ:"ط",ﻄ:"ط",ﻂ:"ط",ﻁ:"ط",ڟ:"طۛ",ﲸ:"طح",ﰦ:"طح",ﴳ:"طم",ﴺ:"طم",ﰧ:"طم",ﵲ:"طمح",ﵱ:"طمح",ﵳ:"طمم",ﵴ:"طمى",ﴑ:"طى",ﳵ:"طى",ﴒ:"طى",ﳶ:"طى","𞸚":"ظ","𞹺":"ظ","𞺚":"ظ","𞺺":"ظ",ﻇ:"ظ",ﻈ:"ظ",ﻆ:"ظ",ﻅ:"ظ",ﲹ:"ظم",ﴻ:"ظم",ﰨ:"ظم","؏":"ع","𞸏":"ع","𞸯":"ع","𞹏":"ع","𞹯":"ع","𞺏":"ع","𞺯":"ع",ﻋ:"ع",ﻌ:"ع",ﻊ:"ع",ﻉ:"ع",ﲺ:"عج",ﰩ:"عج",ﷄ:"عجم",ﵵ:"عجم",ﷷ:"علىo",ﲻ:"عم",ﰪ:"عم",ﵷ:"عمم",ﵶ:"عمم",ﵸ:"عمى",ﶶ:"عمى",ﴓ:"عى",ﳷ:"عى",ﴔ:"عى",ﳸ:"عى","𞸛":"غ","𞸻":"غ","𞹛":"غ","𞹻":"غ","𞺛":"غ","𞺻":"غ",ﻏ:"غ",ﻐ:"غ",ﻎ:"غ",ﻍ:"غ",ﲼ:"غج",ﰫ:"غج",ﲽ:"غم",ﰬ:"غم",ﵹ:"غمم",ﵻ:"غمى",ﵺ:"غمى",ﴕ:"غى",ﳹ:"غى",ﴖ:"غى",ﳺ:"غى","𞸐":"ف","𞸰":"ف","𞹰":"ف","𞺐":"ف","𞺰":"ف",ﻓ:"ف",ﻔ:"ف",ﻒ:"ف",ﻑ:"ف",ڧ:"ف",ﲾ:"فج",ﰭ:"فج",ﲿ:"فح",ﰮ:"فح",ﳀ:"فخ",ﰯ:"فخ",ﵽ:"فخم",ﵼ:"فخم",ﳁ:"فم",ﰰ:"فم",ﷁ:"فمى",ﱼ:"فى",ﰱ:"فى",ﱽ:"فى",ﰲ:"فى","𞸞":"ڡ","𞹾":"ڡ","ࢻ":"ڡ","ٯ":"ڡ","𞸟":"ڡ","𞹟":"ڡ","ࢼ":"ڡ",ڤ:"ڡۛ",ﭬ:"ڡۛ",ﭭ:"ڡۛ",ﭫ:"ڡۛ",ﭪ:"ڡۛ",ڨ:"ڡۛ","ࢤ":"ڢۛ",ﭰ:"ڦ",ﭱ:"ڦ",ﭯ:"ڦ",ﭮ:"ڦ","𞸒":"ق","𞸲":"ق","𞹒":"ق","𞹲":"ق","𞺒":"ق","𞺲":"ق",ﻗ:"ق",ﻘ:"ق",ﻖ:"ق",ﻕ:"ق",ﳂ:"قح",ﰳ:"قح",ﷱ:"قلى",ﳃ:"قم",ﰴ:"قم",ﶴ:"قمح",ﵾ:"قمح",ﵿ:"قمم",ﶲ:"قمى",ﱾ:"قى",ﰵ:"قى",ﱿ:"قى",ﰶ:"قى","𞸊":"ك","𞸪":"ك","𞹪":"ك",ﻛ:"ك",ﻜ:"ك",ﻚ:"ك",ﻙ:"ك",ک:"ك",ﮐ:"ك",ﮑ:"ك",ﮏ:"ك",ﮎ:"ك",ڪ:"ك",ڭ:"كۛ",ﯕ:"كۛ",ﯖ:"كۛ",ﯔ:"كۛ",ﯓ:"كۛ","ݣ":"كۛ",ﲀ:"كl",ﰷ:"كl",ﳄ:"كج",ﰸ:"كج",ﳅ:"كح",ﰹ:"كح",ﳆ:"كخ",ﰺ:"كخ",ﳇ:"كل",ﳫ:"كل",ﲁ:"كل",ﰻ:"كل",ﳈ:"كم",ﳬ:"كم",ﲂ:"كم",ﰼ:"كم",ﷃ:"كمم",ﶻ:"كمم",ﶷ:"كمى",ﲃ:"كى",ﰽ:"كى",ﲄ:"كى",ﰾ:"كى","ݢ":"ڬ",ﮔ:"گ",ﮕ:"گ",ﮓ:"گ",ﮒ:"گ","ࢰ":"گ",ڴ:"گۛ",ﮜ:"ڱ",ﮝ:"ڱ",ﮛ:"ڱ",ﮚ:"ڱ",ﮘ:"ڳ",ﮙ:"ڳ",ﮗ:"ڳ",ﮖ:"ڳ","𞸋":"ل","𞸫":"ل","𞹋":"ل","𞺋":"ل","𞺫":"ل",ﻟ:"ل",ﻠ:"ل",ﻞ:"ل",ﻝ:"ل",ڷ:"لۛ",ڵ:"ل̆",ﻼ:"لl",ﻻ:"لl",ﻺ:"لlٕ",ﻹ:"لlٕ",ﻸ:"لlٴ",ﻷ:"لlٴ",ﳍ:"لo",ﻶ:"لآ",ﻵ:"لآ",ﳉ:"لج",ﰿ:"لج",ﶃ:"لجج",ﶄ:"لجج",ﶺ:"لجم",ﶼ:"لجم",ﶬ:"لجى",ﳊ:"لح",ﱀ:"لح",ﶵ:"لحم",ﶀ:"لحم",ﶂ:"لحى",ﶁ:"لحى",ﳋ:"لخ",ﱁ:"لخ",ﶆ:"لخم",ﶅ:"لخم",ﳌ:"لم",ﳭ:"لم",ﲅ:"لم",ﱂ:"لم",ﶈ:"لمح",ﶇ:"لمح",ﶭ:"لمى",ﲆ:"لى",ﱃ:"لى",ﲇ:"لى",ﱄ:"لى","𞸌":"م","𞸬":"م","𞹬":"م","𞺌":"م","𞺬":"م",ﻣ:"م",ﻤ:"م",ﻢ:"م",ﻡ:"م","ࢧ":"مۛ","۾":"م͈",ﲈ:"مl",ﳎ:"مج",ﱅ:"مج",ﶌ:"مجح",ﶒ:"مجخ",ﶍ:"مجم",ﷀ:"مجى",ﳏ:"مح",ﱆ:"مح",ﶉ:"محج",ﶊ:"محم",ﷴ:"محمد",ﶋ:"محى",ﳐ:"مخ",ﱇ:"مخ",ﶎ:"مخج",ﶏ:"مخم",ﶹ:"مخى",ﳑ:"مم",ﲉ:"مم",ﱈ:"مم",ﶱ:"ممى",ﱉ:"مى",ﱊ:"مى","𞸍":"ن","𞸭":"ن","𞹍":"ن","𞹭":"ن","𞺍":"ن","𞺭":"ن",ﻧ:"ن",ﻨ:"ن",ﻦ:"ن",ﻥ:"ن","ݨ":"نؕ","ݩ":"ن̆",ﳖ:"نo",ﳯ:"نo",ﶸ:"نجح",ﶽ:"نجح",ﶘ:"نجم",ﶗ:"نجم",ﶙ:"نجى",ﷇ:"نجى",ﳓ:"نح",ﱌ:"نح",ﶕ:"نحم",ﶖ:"نحى",ﶳ:"نحى",ﳔ:"نخ",ﱍ:"نخ",ﲊ:"نر",ﲋ:"نز",ﳕ:"نم",ﳮ:"نم",ﲌ:"نم",ﱎ:"نم",ﶛ:"نمى",ﶚ:"نمى",ﲍ:"نن",ﲎ:"نى",ﱏ:"نى",ﲏ:"نى",ﱐ:"نى",ۂ:"ۀ",ﮥ:"ۀ",ﮤ:"ۀ","𐋤":"و","𞸅":"و","𞺅":"و","𞺥":"و",ﻮ:"و",ﻭ:"و","ࢱ":"و",ۋ:"وۛ",ﯟ:"وۛ",ﯞ:"وۛ",ۇ:"و̓",ﯘ:"و̓",ﯗ:"و̓",ۆ:"و̆",ﯚ:"و̆",ﯙ:"و̆",ۉ:"و̂",ﯣ:"و̂",ﯢ:"و̂",ۈ:"وٰ",ﯜ:"وٰ",ﯛ:"وٰ",ؤ:"وٴ",ﺆ:"وٴ",ﺅ:"وٴ",ٶ:"وٴ",ٷ:"و̓ٴ",ﯝ:"و̓ٴ",ﷸ:"وسلم",ﯡ:"ۅ",ﯠ:"ۅ","ٮ":"ى","𞸜":"ى","𞹼":"ى",ں:"ى","𞸝":"ى","𞹝":"ى",ﮟ:"ى",ﮞ:"ى","ࢽ":"ى",ﯨ:"ى",ﯩ:"ى",ﻰ:"ى",ﻯ:"ى",ي:"ى","𞸉":"ى","𞸩":"ى","𞹉":"ى","𞹩":"ى","𞺉":"ى","𞺩":"ى",ﻳ:"ى",ﻴ:"ى",ﻲ:"ى",ﻱ:"ى",ی:"ى",ﯾ:"ى",ﯿ:"ى",ﯽ:"ى",ﯼ:"ى",ے:"ى",ﮯ:"ى",ﮮ:"ى",ٹ:"ىؕ",ﭨ:"ىؕ",ﭩ:"ىؕ",ﭧ:"ىؕ",ﭦ:"ىؕ",ڻ:"ىؕ",ﮢ:"ىؕ",ﮣ:"ىؕ",ﮡ:"ىؕ",ﮠ:"ىؕ",پ:"ىۛ",ﭘ:"ىۛ",ﭙ:"ىۛ",ﭗ:"ىۛ",ﭖ:"ىۛ",ث:"ىۛ","𞸖":"ىۛ","𞸶":"ىۛ","𞹶":"ىۛ","𞺖":"ىۛ","𞺶":"ىۛ",ﺛ:"ىۛ",ﺜ:"ىۛ",ﺚ:"ىۛ",ﺙ:"ىۛ",ڽ:"ىۛ",ۑ:"ىۛ","ؿ":"ىۛ","ࢷ":"ىۛۢ","ݖ":"ى̆",ێ:"ى̆","ࢺ":"ى̆̇","ؽ":"ى̂","ࢨ":"ىٔ",ﲐ:"ىٰ",ﱝ:"ىٰ",ﳞ:"ىo",ﳱ:"ىo",ﳦ:"ىۛo",ئ:"ىٴ",ﺋ:"ىٴ",ﺌ:"ىٴ",ﺊ:"ىٴ",ﺉ:"ىٴ",ٸ:"ىٴ",ﯫ:"ىٴl",ﯪ:"ىٴl",ﲛ:"ىٴo",ﳠ:"ىٴo",ﯭ:"ىٴo",ﯬ:"ىٴo",ﯸ:"ىٴٻ",ﯷ:"ىٴٻ",ﯶ:"ىٴٻ",ﲗ:"ىٴج",ﰀ:"ىٴج",ﲘ:"ىٴح",ﰁ:"ىٴح",ﲙ:"ىٴخ",ﱤ:"ىٴر",ﱥ:"ىٴز",ﲚ:"ىٴم",ﳟ:"ىٴم",ﱦ:"ىٴم",ﰂ:"ىٴم",ﱧ:"ىٴن",ﯯ:"ىٴو",ﯮ:"ىٴو",ﯱ:"ىٴو̓",ﯰ:"ىٴو̓",ﯳ:"ىٴو̆",ﯲ:"ىٴو̆",ﯵ:"ىٴوٰ",ﯴ:"ىٴوٰ",ﯻ:"ىٴى",ﯺ:"ىٴى",ﱨ:"ىٴى",ﯹ:"ىٴى",ﰃ:"ىٴى",ﱩ:"ىٴى",ﰄ:"ىٴى",ﳚ:"ىج",ﱕ:"ىج",ﰑ:"ىۛج",ﶯ:"ىجى",ﳛ:"ىح",ﱖ:"ىح",ﶮ:"ىحى",ﳜ:"ىخ",ﱗ:"ىخ",ﲑ:"ىر",ﱶ:"ىۛر",ﲒ:"ىز",ﱷ:"ىۛز",ﳝ:"ىم",ﳰ:"ىم",ﲓ:"ىم",ﱘ:"ىم",ﲦ:"ىۛم",ﳥ:"ىۛم",ﱸ:"ىۛم",ﰒ:"ىۛم",ﶝ:"ىمم",ﶜ:"ىمم",ﶰ:"ىمى",ﲔ:"ىن",ﱹ:"ىۛن",ﲕ:"ىى",ﱙ:"ىى",ﲖ:"ىى",ﱚ:"ىى",ﱺ:"ىۛى",ﰓ:"ىۛى",ﱻ:"ىۛى",ﰔ:"ىۛى",ﮱ:"ۓ",ﮰ:"ۓ","𐊸":"ⵀ","⁞":"ⵂ","⸽":"ⵂ","⦙":"ⵂ","︙":"ⵗ","⁝":"ⵗ","⋮":"ⵗ",Մ:"ሆ",Ռ:"ቡ",Ի:"ኮ",Պ:"ጣ",आ:"अा",ऒ:"अाॆ",ओ:"अाे",औ:"अाै","ऄ":"अॆ",ऑ:"अॉ",ऍ:"एॅ",ऎ:"एॆ",ऐ:"एे",ई:"र्इ",ઽ:"ऽ","𑇜":"ꣻ","𑇋":"ऺ","ુ":"ु","ૂ":"ू","ੋ":"ॆ","੍":"्","્":"्",আ:"অা",ৠ:"ঋৃ",ৡ:"ঋৃ","𑒒":"ঘ","𑒔":"চ","𑒖":"জ","𑒘":"ঞ","𑒙":"ট","𑒛":"ড","𑒪":"ণ","𑒞":"ত","𑒟":"থ","𑒠":"দ","𑒡":"ধ","𑒢":"ন","𑒣":"প","𑒩":"ব","𑒧":"ম","𑒨":"য","𑒫":"র","𑒝":"ল","𑒭":"ষ","𑒮":"স","𑓄":"ঽ","𑒰":"া","𑒱":"ি","𑒹":"ে","𑒼":"ো","𑒾":"ৌ","𑓂":"্","𑒽":"ৗ",ਉ:"ੳੁ",ਊ:"ੳੂ",ਆ:"ਅਾ",ਐ:"ਅੈ",ਔ:"ਅੌ",ਇ:"ੲਿ",ਈ:"ੲੀ",ਏ:"ੲੇ",આ:"અા",ઑ:"અાૅ",ઓ:"અાે",ઔ:"અાૈ",ઍ:"અૅ",એ:"અે",ઐ:"અૈ",ଆ:"ଅା","௮":"அ",ர:"ஈ","ா":"ஈ","௫":"ஈு","௨":"உ",ഉ:"உ",ஊ:"உள",ഊ:"உൗ","௭":"எ","௷":"எவ",ஜ:"ஐ",ജ:"ஐ","௧":"க","௪":"ச","௬":"சு","௲":"சூ","ഺ":"டி",ണ:"ண","௺":"நீ","௴":"மீ","௰":"ய",ഴ:"ழ","ௗ":"ள","ை":"ன",ശ:"ஶ","௸":"ஷ","ി":"ி","ീ":"ி","ொ":"ெஈ","ௌ":"ெள","ோ":"ேஈ",ಅ:"అ",ಆ:"ఆ",ಇ:"ఇ",ౠ:"ఋా",ౡ:"ఌా",ಒ:"ఒ",ఔ:"ఒౌ",ಔ:"ఒౌ",ఓ:"ఒౕ",ಓ:"ఒౕ",ಜ:"జ",ಞ:"ఞ",ఢ:"డ̣",ಣ:"ణ",థ:"ధּ",భ:"బ̣",ಯ:"య",ఠ:"రּ",ಱ:"ఱ",ಲ:"ల",ష:"వ̣",హ:"వా",మ:"వు","ూ":"ుా","ౄ":"ృా",ೡ:"ಌಾ",ഈ:"ഇൗ",ഐ:"എെ",ഓ:"ഒാ",ഔ:"ഒൗ",ൡ:"ഞ","൫":"ദ്ര","൹":"നു",ഌ:"നു",ങ:"നു","൯":"ന്","ൻ":"ന്","൬":"ന്ന","൚":"ന്മ",റ:"ര","൪":"ര്","ർ":"ര്","൮":"വ്ര","൶":"ഹ്മ","ൂ":"ു","ൃ":"ു","ൈ":"െെ","෪":"ජ","෫":"ද","𑐓":"𑐴𑑂𑐒","𑐙":"𑐴𑑂𑐘","𑐤":"𑐴𑑂𑐣","𑐪":"𑐴𑑂𑐩","𑐭":"𑐴𑑂𑐬","𑐯":"𑐴𑑂𑐮","𑗘":"𑖂","𑗙":"𑖂","𑗚":"𑖃","𑗛":"𑖄","𑗜":"𑖲","𑗝":"𑖳",ฃ:"ข",ด:"ค",ต:"ค",ม:"ฆ",ຈ:"จ",ซ:"ช",ฏ:"ฎ",ท:"ฑ",ບ:"บ",ປ:"ป",ຝ:"ฝ",ພ:"พ",ຟ:"ฟ",ฦ:"ภ",ຍ:"ย","។":"ฯ",ๅ:"า",ำ:"̊า","ិ":"ิ","ី":"ี","ឹ":"ึ","ឺ":"ื","ຸ":"ุ","ູ":"ู",แ:"เเ",ໜ:"ຫນ",ໝ:"ຫມ",ຳ:"̊າ","༂":"འུྂཿ","༃":"འུྂ༔",ཪ:"ར",ༀ:"ཨོཾ","ཷ":"ྲཱྀ","ཹ":"ླཱྀ","𑲲":"𑲪","ႁ":"ဂှ",က:"ဂာ","ၰ":"ဃှ","ၦ":"ပှ",ဟ:"ပာ","ၯ":"ပာှ","ၾ":"ၽှ",ဩ:"သြ",ဪ:"သြော်","႞":"ႃ̊",ឣ:"អ","᧐":"ᦞ","᧑":"ᦱ","᪀":"ᩅ","᪐":"ᩅ","꩓":"ꨁ","꩖":"ꨣ","᭒":"ᬍ","᭓":"ᬑ","᭘":"ᬨ","ꦣ":"ꦝ",ᢖ:"ᡜ",ᡕ:"ᠵ",ῶ:"Ꮿ",ᐍ:"ᐁ·",ᐫ:"ᐁᐠ",ᐑ:"ᐄ·",ᐓ:"ᐅ·",ᐭ:"ᐅᐠ",ᐕ:"ᐆ·",ᐘ:"ᐊ·",ᐮ:"ᐊᐠ",ᐚ:"ᐋ·","ᣝ":"ᐞᣟ",ᓑ:"ᐡ",ᕀ:"ᐩ",ᐿ:"ᐲ·",ᑃ:"ᐴ·","⍩":"ᐵ",ᑇ:"ᐹ·",ᑜ:"ᑏ·","⸧":"ᑐ","⊃":"ᑐ",ᑞ:"ᑐ·",ᑩ:"ᑐ'","⟉":"ᑐ/","⫗":"ᑐᑕ",ᑠ:"ᑑ·","⸦":"ᑕ","⊂":"ᑕ",ᑢ:"ᑕ·",ᑪ:"ᑕ'",ᑤ:"ᑖ·",ᑵ:"ᑫ·",ᒅ:"ᑫ'",ᑹ:"ᑮ·",ᑽ:"ᑰ·",ᘃ:"ᒉ",ᒓ:"ᒉ·",ᒕ:"ᒋ·",ᒗ:"ᒌ·",ᒛ:"ᒎ·",ᘂ:"ᒐ",ᒝ:"ᒐ·",ᒟ:"ᒑ·",ᒭ:"ᒣ·",ᒱ:"ᒦ·",ᒳ:"ᒧ·",ᒵ:"ᒨ·",ᒹ:"ᒫ·",ᓊ:"ᓀ·","ᣇ":"ᓂ·","ᣉ":"ᓃ·","ᣋ":"ᓄ·","ᣍ":"ᓅ·",ᓌ:"ᓇ·",ᓎ:"ᓈ·",ᘄ:"ᓓ",ᓝ:"ᓓ·",ᓟ:"ᓕ·",ᓡ:"ᓖ·",ᓣ:"ᓗ·",ᓥ:"ᓘ·",ᘇ:"ᓚ",ᓧ:"ᓚ·",ᓩ:"ᓛ·",ᓷ:"ᓭ·",ᓹ:"ᓯ·",ᓻ:"ᓰ·",ᓽ:"ᓱ·",ᓿ:"ᓲ·",ᔁ:"ᓴ·",ᔃ:"ᓵ·",ᔌ:"ᔋ<",ᔎ:"ᔋb",ᔍ:"ᔋᑕ",ᔏ:"ᔋᒐ",ᔘ:"ᔐ·",ᔚ:"ᔑ·",ᔜ:"ᔒ·",ᔞ:"ᔓ·",ᔠ:"ᔔ·",ᔢ:"ᔕ·",ᔤ:"ᔖ·",ᔲ:"ᔨ·",ᔴ:"ᔩ·",ᔶ:"ᔪ·",ᔸ:"ᔫ·",ᔺ:"ᔭ·",ᔼ:"ᔮ·",ᘢ:"ᕃ","ᣠ":"ᕃ·",ᘣ:"ᕆ",ᘤ:"ᕊ",ᕏ:"ᕌ·",ᖃ:"ᕐb",ᖄ:"ᕐḃ",ᖁ:"ᕐd",ᕿ:"ᕐP",ᙯ:"ᕐᑫ",ᕾ:"ᕐᑬ",ᖀ:"ᕐᑮ",ᖂ:"ᕐᑰ",ᖅ:"ᕐᒃ",ᕜ:"ᕚ·","ᣣ":"ᕞ·","ᣤ":"ᕦ·",ᕩ:"ᕧ·","ᣥ":"ᕫ·","ᣨ":"ᖆ·",ᖑ:"ᖕJ",ᙰ:"ᖕᒉ",ᖎ:"ᖕᒊ",ᖏ:"ᖕᒋ",ᖐ:"ᖕᒌ",ᖒ:"ᖕᒎ",ᖓ:"ᖕᒐ",ᖔ:"ᖕᒑ",ᙳ:"ᖖJ",ᙱ:"ᖖᒋ",ᙲ:"ᖖᒌ",ᙴ:"ᖖᒎ",ᙵ:"ᖖᒐ",ᙶ:"ᖖᒑ","ᣪ":"ᖗ·","ᙷ":"ᖧ·","ᙸ":"ᖨ·","ᙹ":"ᖩ·","ᙺ":"ᖪ·","ᙻ":"ᖫ·","ᙼ":"ᖬ·","ᙽ":"ᖭ·","⪫":"ᗒ","⪪":"ᗕ","ꓷ":"ᗡ","ᣰ":"ᗴ·","ᣲ":"ᘛ·","ᶻ":"ᙆ","ꓭ":"ᙠ","ᶺ":"ᣔ","ᴾ":"ᣖ","ᣜ":"ᣟᐞ",ˡ:"ᣳ",ʳ:"ᣴ",ˢ:"ᣵ","ᣛ":"ᣵ","ꚰ":"ᚹ",ᛡ:"ᚼ","⍿":"ᚽ",ᛂ:"ᚽ","𝈿":"ᛋ","↑":"ᛏ","↿":"ᛐ","⥮":"ᛐ⇂","⥣":"ᛐᛚ","ⵣ":"ᛯ","↾":"ᛚ","⨡":"ᛚ","⋄":"ᛜ","◇":"ᛜ","◊":"ᛜ","♢":"ᛜ","🝔":"ᛜ","𑢷":"ᛜ","𐊔":"ᛜ","⍚":"ᛜ̲","⋈":"ᛞ","⨝":"ᛞ","𐓐":"ᛦ","↕":"ᛨ","𐳼":"𐲂","𐳺":"𐲥",ㄱ:"ᄀ",ᆨ:"ᄀ",ᄁ:"ᄀᄀ",ㄲ:"ᄀᄀ",ᆩ:"ᄀᄀ","ᇺ":"ᄀᄂ","ᅚ":"ᄀᄃ",ᇃ:"ᄀᄅ","ᇻ":"ᄀᄇ",ᆪ:"ᄀᄉ",ㄳ:"ᄀᄉ",ᇄ:"ᄀᄉᄀ","ᇼ":"ᄀᄎ","ᇽ":"ᄀᄏ","ᇾ":"ᄀᄒ",ㄴ:"ᄂ",ᆫ:"ᄂ",ᄓ:"ᄂᄀ",ᇅ:"ᄂᄀ",ᄔ:"ᄂᄂ",ㅥ:"ᄂᄂ","ᇿ":"ᄂᄂ",ᄕ:"ᄂᄃ",ㅦ:"ᄂᄃ",ᇆ:"ᄂᄃ","ퟋ":"ᄂᄅ",ᄖ:"ᄂᄇ","ᅛ":"ᄂᄉ",ᇇ:"ᄂᄉ",ㅧ:"ᄂᄉ","ᅜ":"ᄂᄌ",ᆬ:"ᄂᄌ",ㄵ:"ᄂᄌ","ퟌ":"ᄂᄎ",ᇉ:"ᄂᄐ","ᅝ":"ᄂᄒ",ᆭ:"ᄂᄒ",ㄶ:"ᄂᄒ",ᇈ:"ᄂᅀ",ㅨ:"ᄂᅀ",ㄷ:"ᄃ",ᆮ:"ᄃ",ᄗ:"ᄃᄀ",ᇊ:"ᄃᄀ",ᄄ:"ᄃᄃ",ㄸ:"ᄃᄃ","ퟍ":"ᄃᄃ","ퟎ":"ᄃᄃᄇ","ᅞ":"ᄃᄅ",ᇋ:"ᄃᄅ","ꥠ":"ᄃᄆ","ꥡ":"ᄃᄇ","ퟏ":"ᄃᄇ","ꥢ":"ᄃᄉ","ퟐ":"ᄃᄉ","ퟑ":"ᄃᄉᄀ","ꥣ":"ᄃᄌ","ퟒ":"ᄃᄌ","ퟓ":"ᄃᄎ","ퟔ":"ᄃᄐ",ㄹ:"ᄅ",ᆯ:"ᄅ","ꥤ":"ᄅᄀ",ᆰ:"ᄅᄀ",ㄺ:"ᄅᄀ","ꥥ":"ᄅᄀᄀ","ퟕ":"ᄅᄀᄀ",ᇌ:"ᄅᄀᄉ",ㅩ:"ᄅᄀᄉ","ퟖ":"ᄅᄀᄒ",ᄘ:"ᄅᄂ",ᇍ:"ᄅᄂ","ꥦ":"ᄅᄃ",ᇎ:"ᄅᄃ",ㅪ:"ᄅᄃ","ꥧ":"ᄅᄃᄃ",ᇏ:"ᄅᄃᄒ",ᄙ:"ᄅᄅ",ᇐ:"ᄅᄅ","ퟗ":"ᄅᄅᄏ","ꥨ":"ᄅᄆ",ᆱ:"ᄅᄆ",ㄻ:"ᄅᄆ",ᇑ:"ᄅᄆᄀ",ᇒ:"ᄅᄆᄉ","ퟘ":"ᄅᄆᄒ","ꥩ":"ᄅᄇ",ᆲ:"ᄅᄇ",ㄼ:"ᄅᄇ","ퟙ":"ᄅᄇᄃ","ꥪ":"ᄅᄇᄇ",ᇓ:"ᄅᄇᄉ",ㅫ:"ᄅᄇᄉ","ꥫ":"ᄅᄇᄋ",ᇕ:"ᄅᄇᄋ","ퟚ":"ᄅᄇᄑ",ᇔ:"ᄅᄇᄒ","ꥬ":"ᄅᄉ",ᆳ:"ᄅᄉ",ㄽ:"ᄅᄉ",ᇖ:"ᄅᄉᄉ",ᄛ:"ᄅᄋ","ퟝ":"ᄅᄋ","ꥭ":"ᄅᄌ","ꥮ":"ᄅᄏ",ᇘ:"ᄅᄏ",ᆴ:"ᄅᄐ",ㄾ:"ᄅᄐ",ᆵ:"ᄅᄑ",ㄿ:"ᄅᄑ",ᄚ:"ᄅᄒ",ㅀ:"ᄅᄒ",ᄻ:"ᄅᄒ",ᆶ:"ᄅᄒ","ퟲ":"ᄅᄒ",ᇗ:"ᄅᅀ",ㅬ:"ᄅᅀ","ퟛ":"ᄅᅌ",ᇙ:"ᄅᅙ",ㅭ:"ᄅᅙ","ퟜ":"ᄅᅙᄒ",ㅁ:"ᄆ",ᆷ:"ᄆ","ꥯ":"ᄆᄀ",ᇚ:"ᄆᄀ","ퟞ":"ᄆᄂ","ퟟ":"ᄆᄂᄂ","ꥰ":"ᄆᄃ",ᇛ:"ᄆᄅ","ퟠ":"ᄆᄆ",ᄜ:"ᄆᄇ",ㅮ:"ᄆᄇ",ᇜ:"ᄆᄇ","ퟡ":"ᄆᄇᄉ","ꥱ":"ᄆᄉ",ᇝ:"ᄆᄉ",ㅯ:"ᄆᄉ",ᇞ:"ᄆᄉᄉ",ᄝ:"ᄆᄋ",ㅱ:"ᄆᄋ",ᇢ:"ᄆᄋ","ퟢ":"ᄆᄌ",ᇠ:"ᄆᄎ",ᇡ:"ᄆᄒ",ᇟ:"ᄆᅀ",ㅰ:"ᄆᅀ",ㅂ:"ᄇ",ᆸ:"ᄇ",ᄞ:"ᄇᄀ",ㅲ:"ᄇᄀ",ᄟ:"ᄇᄂ",ᄠ:"ᄇᄃ",ㅳ:"ᄇᄃ","ퟣ":"ᄇᄃ",ᇣ:"ᄇᄅ","ퟤ":"ᄇᄅᄑ","ퟥ":"ᄇᄆ",ᄈ:"ᄇᄇ",ㅃ:"ᄇᄇ","ퟦ":"ᄇᄇ",ᄬ:"ᄇᄇᄋ",ㅹ:"ᄇᄇᄋ",ᄡ:"ᄇᄉ",ㅄ:"ᄇᄉ",ᆹ:"ᄇᄉ",ᄢ:"ᄇᄉᄀ",ㅴ:"ᄇᄉᄀ",ᄣ:"ᄇᄉᄃ",ㅵ:"ᄇᄉᄃ","ퟧ":"ᄇᄉᄃ",ᄤ:"ᄇᄉᄇ",ᄥ:"ᄇᄉᄉ",ᄦ:"ᄇᄉᄌ","ꥲ":"ᄇᄉᄐ",ᄫ:"ᄇᄋ",ㅸ:"ᄇᄋ",ᇦ:"ᄇᄋ",ᄧ:"ᄇᄌ",ㅶ:"ᄇᄌ","ퟨ":"ᄇᄌ",ᄨ:"ᄇᄎ","ퟩ":"ᄇᄎ","ꥳ":"ᄇᄏ",ᄩ:"ᄇᄐ",ㅷ:"ᄇᄐ",ᄪ:"ᄇᄑ",ᇤ:"ᄇᄑ","ꥴ":"ᄇᄒ",ᇥ:"ᄇᄒ",ㅅ:"ᄉ",ᆺ:"ᄉ",ᄭ:"ᄉᄀ",ㅺ:"ᄉᄀ",ᇧ:"ᄉᄀ",ᄮ:"ᄉᄂ",ㅻ:"ᄉᄂ",ᄯ:"ᄉᄃ",ㅼ:"ᄉᄃ",ᇨ:"ᄉᄃ",ᄰ:"ᄉᄅ",ᇩ:"ᄉᄅ",ᄱ:"ᄉᄆ","ퟪ":"ᄉᄆ",ᄲ:"ᄉᄇ",ㅽ:"ᄉᄇ",ᇪ:"ᄉᄇ",ᄳ:"ᄉᄇᄀ","ퟫ":"ᄉᄇᄋ",ᄊ:"ᄉᄉ",ㅆ:"ᄉᄉ",ᆻ:"ᄉᄉ","ퟬ":"ᄉᄉᄀ","ퟭ":"ᄉᄉᄃ","ꥵ":"ᄉᄉᄇ",ᄴ:"ᄉᄉᄉ",ᄵ:"ᄉᄋ",ᄶ:"ᄉᄌ",ㅾ:"ᄉᄌ","ퟯ":"ᄉᄌ",ᄷ:"ᄉᄎ","ퟰ":"ᄉᄎ",ᄸ:"ᄉᄏ",ᄹ:"ᄉᄐ","ퟱ":"ᄉᄐ",ᄺ:"ᄉᄑ","ퟮ":"ᄉᅀ",ㅇ:"ᄋ",ᆼ:"ᄋ",ᅁ:"ᄋᄀ",ᇬ:"ᄋᄀ",ᇭ:"ᄋᄀᄀ",ᅂ:"ᄋᄃ","ꥶ":"ᄋᄅ",ᅃ:"ᄋᄆ",ᅄ:"ᄋᄇ",ᅅ:"ᄋᄉ",ᇱ:"ᄋᄉ",ㆂ:"ᄋᄉ",ᅇ:"ᄋᄋ",ㆀ:"ᄋᄋ",ᇮ:"ᄋᄋ",ᅈ:"ᄋᄌ",ᅉ:"ᄋᄎ",ᇯ:"ᄋᄏ",ᅊ:"ᄋᄐ",ᅋ:"ᄋᄑ","ꥷ":"ᄋᄒ",ᅆ:"ᄋᅀ",ᇲ:"ᄋᅀ",ㆃ:"ᄋᅀ",ㅈ:"ᄌ",ᆽ:"ᄌ","ퟷ":"ᄌᄇ","ퟸ":"ᄌᄇᄇ",ᅍ:"ᄌᄋ",ᄍ:"ᄌᄌ",ㅉ:"ᄌᄌ","ퟹ":"ᄌᄌ","ꥸ":"ᄌᄌᄒ",ㅊ:"ᄎ",ᆾ:"ᄎ",ᅒ:"ᄎᄏ",ᅓ:"ᄎᄒ",ㅋ:"ᄏ",ᆿ:"ᄏ",ㅌ:"ᄐ",ᇀ:"ᄐ","ꥹ":"ᄐᄐ",ㅍ:"ᄑ",ᇁ:"ᄑ",ᅖ:"ᄑᄇ",ᇳ:"ᄑᄇ","ퟺ":"ᄑᄉ",ᅗ:"ᄑᄋ",ㆄ:"ᄑᄋ",ᇴ:"ᄑᄋ","ퟻ":"ᄑᄐ","ꥺ":"ᄑᄒ",ㅎ:"ᄒ",ᇂ:"ᄒ",ᇵ:"ᄒᄂ",ᇶ:"ᄒᄅ",ᇷ:"ᄒᄆ",ᇸ:"ᄒᄇ","ꥻ":"ᄒᄉ",ᅘ:"ᄒᄒ",ㆅ:"ᄒᄒ",ᄽ:"ᄼᄼ",ᄿ:"ᄾᄾ",ㅿ:"ᅀ",ᇫ:"ᅀ","ퟳ":"ᅀᄇ","ퟴ":"ᅀᄇᄋ",ㆁ:"ᅌ",ᇰ:"ᅌ","ퟵ":"ᅌᄆ","ퟶ":"ᅌᄒ",ᅏ:"ᅎᅎ",ᅑ:"ᅐᅐ",ㆆ:"ᅙ",ᇹ:"ᅙ","ꥼ":"ᅙᅙ",ㅤ:"ᅠ",ㅏ:"ᅡ","ᆣ":"ᅡー",ᅶ:"ᅡᅩ",ᅷ:"ᅡᅮ",ᅢ:"ᅡ丨",ㅐ:"ᅡ丨",ㅑ:"ᅣ",ᅸ:"ᅣᅩ",ᅹ:"ᅣᅭ","ᆤ":"ᅣᅮ",ᅤ:"ᅣ丨",ㅒ:"ᅣ丨",ㅓ:"ᅥ",ᅼ:"ᅥー",ᅺ:"ᅥᅩ",ᅻ:"ᅥᅮ",ᅦ:"ᅥ丨",ㅔ:"ᅥ丨",ㅕ:"ᅧ","ᆥ":"ᅧᅣ",ᅽ:"ᅧᅩ",ᅾ:"ᅧᅮ",ᅨ:"ᅧ丨",ㅖ:"ᅧ丨",ㅗ:"ᅩ",ᅪ:"ᅩᅡ",ㅘ:"ᅩᅡ",ᅫ:"ᅩᅡ丨",ㅙ:"ᅩᅡ丨","ᆦ":"ᅩᅣ","ᆧ":"ᅩᅣ丨",ᅿ:"ᅩᅥ",ᆀ:"ᅩᅥ丨","ힰ":"ᅩᅧ",ᆁ:"ᅩᅧ丨",ᆂ:"ᅩᅩ","ힱ":"ᅩᅩ丨",ᆃ:"ᅩᅮ",ᅬ:"ᅩ丨",ㅚ:"ᅩ丨",ㅛ:"ᅭ","ힲ":"ᅭᅡ","ힳ":"ᅭᅡ丨",ᆄ:"ᅭᅣ",ㆇ:"ᅭᅣ",ᆆ:"ᅭᅣ",ᆅ:"ᅭᅣ丨",ㆈ:"ᅭᅣ丨","ힴ":"ᅭᅥ",ᆇ:"ᅭᅩ",ᆈ:"ᅭ丨",ㆉ:"ᅭ丨",ㅜ:"ᅮ",ᆉ:"ᅮᅡ",ᆊ:"ᅮᅡ丨",ᅯ:"ᅮᅥ",ㅝ:"ᅮᅥ",ᆋ:"ᅮᅥー",ᅰ:"ᅮᅥ丨",ㅞ:"ᅮᅥ丨","ힵ":"ᅮᅧ",ᆌ:"ᅮᅧ丨",ᆍ:"ᅮᅮ",ᅱ:"ᅮ丨",ㅟ:"ᅮ丨","ힶ":"ᅮ丨丨",ㅠ:"ᅲ",ᆎ:"ᅲᅡ","ힷ":"ᅲᅡ丨",ᆏ:"ᅲᅥ",ᆐ:"ᅲᅥ丨",ᆑ:"ᅲᅧ",ㆊ:"ᅲᅧ",ᆒ:"ᅲᅧ丨",ㆋ:"ᅲᅧ丨","ힸ":"ᅲᅩ",ᆓ:"ᅲᅮ",ᆔ:"ᅲ丨",ㆌ:"ᅲ丨",ㆍ:"ᆞ","ퟅ":"ᆞᅡ",ᆟ:"ᆞᅥ","ퟆ":"ᆞᅥ丨",ᆠ:"ᆞᅮ",ᆢ:"ᆞᆞ",ᆡ:"ᆞ丨",ㆎ:"ᆞ丨",ヘ:"へ","⍁":"〼","⧄":"〼","꒞":"ꁊ","꒬":"ꁐ","꒜":"ꃀ","꒨":"ꄲ","꒿":"ꉙ","꒾":"ꊱ","꒔":"ꋍ","꓀":"ꎫ","꓂":"ꎵ","꒺":"ꎿ","꒰":"ꏂ","꒧":"ꑘ","⊥":"ꓕ","⟂":"ꓕ","𝈜":"ꓕ","Ʇ":"ꓕ","Ꞟ":"ꓤ","⅁":"ꓨ","⅂":"ꓶ","𝈕":"ꓶ","𝈫":"ꓶ","𖼦":"ꓶ","𐐑":"ꓶ","⅃":"𖼀","𑫦":"𑫥𑫯","𑫨":"𑫥𑫥","𑫩":"𑫥𑫥𑫯","𑫪":"𑫥𑫥𑫰","𑫧":"𑫥𑫰","𑫴":"𑫳𑫯","𑫶":"𑫳𑫳","𑫷":"𑫳𑫳𑫯","𑫸":"𑫳𑫳𑫰","𑫵":"𑫳𑫰","𑫬":"𑫫𑫯","𑫭":"𑫫𑫫","𑫮":"𑫫𑫫𑫯","⊕":"𐊨","⨁":"𐊨","🜨":"𐊨","Ꚛ":"𐊨","▽":"𐊼","𝈔":"𐊼","🜄":"𐊼","⧖":"𐋀","ꞛ":"𐐺","Ꞛ":"𐐒","𐒠":"𐒆","𐏑":"𐎂","𐏓":"𐎓","𒀸":"𐎚","☥":"𐦞","𓋹":"𐦞","〹":"卄",不:"不","丽":"丽","並":"並","⎜":"丨","⎟":"丨","⎢":"丨","⎥":"丨","⎪":"丨","⎮":"丨","㇑":"丨",ᅵ:"丨",ㅣ:"丨","⼁":"丨",ᆜ:"丨ー",ᆘ:"丨ᅡ",ᆙ:"丨ᅣ","ힽ":"丨ᅣᅩ","ힾ":"丨ᅣ丨","ힿ":"丨ᅧ","ퟀ":"丨ᅧ丨",ᆚ:"丨ᅩ","ퟁ":"丨ᅩ丨","ퟂ":"丨ᅭ",ᆛ:"丨ᅮ","ퟃ":"丨ᅲ",ᆝ:"丨ᆞ","ퟄ":"丨丨",串:"串","丸":"丸",丹:"丹","乁":"乁","㇠":"乙","⼄":"乙","㇟":"乚","⺃":"乚","㇖":"乛","⺂":"乛","⻲":"亀",亂:"亂","㇚":"亅","⼅":"亅",了:"了",ニ:"二","⼆":"二","𠄢":"𠄢","⼇":"亠",亮:"亮","⼈":"人",イ:"亻","⺅":"亻",什:"什","仌":"仌",令:"令","你":"你",倂:"併","倂":"併","侀":"侀",來:"來",例:"例","侮":"侮","侮":"侮","侻":"侻",便:"便",值:"値",倫:"倫","偺":"偺","備":"備","像":"像",僚:"僚","僧":"僧","僧":"僧","㒞":"㒞","⼉":"儿",兀:"兀","⺎":"兀","充":"充","免":"免","免":"免","兔":"兔","兤":"兤","⼊":"入","內":"內","全":"全",兩:"兩",ハ:"八","⼋":"八",六:"六","具":"具","𠔜":"𠔜","𠔥":"𠔥","冀":"冀","㒹":"㒹","⼌":"冂","再":"再","𠕋":"𠕋","冒":"冒","冕":"冕","㒻":"㒻","最":"最","⼍":"冖","冗":"冗","冤":"冤","⼎":"冫","冬":"冬","况":"况","况":"况",冷:"冷",凉:"凉",凌:"凌",凜:"凜",凞:"凞","⼏":"几","𠘺":"𠘺","凵":"凵","⼐":"凵","⼑":"刀","⺉":"刂","刃":"刃",切:"切","切":"切",列:"列",利:"利","㓟":"㓟",刺:"刺","刻":"刻","剆":"剆","割":"割","剷":"剷",劉:"劉","𠠄":"𠠄",カ:"力",力:"力","⼒":"力",劣:"劣","㔕":"㔕","劳":"劳","勇":"勇","勇":"勇","勉":"勉","勉":"勉",勒:"勒",勞:"勞","勤":"勤","勤":"勤",勵:"勵","⼓":"勹","勺":"勺","勺":"勺","包":"包","匆":"匆","𠣞":"𠣞","⼔":"匕",北:"北","北":"北","⼕":"匚","⼖":"匸",匿:"匿","⼗":"十","〸":"十","〺":"卅","卉":"卉","࿖":"卍","࿕":"卐","卑":"卑","卑":"卑","博":"博",ト:"卜","⼘":"卜","⼙":"卩","⺋":"㔾","即":"即",卵:"卵","卽":"卽","卿":"卿","卿":"卿","卿":"卿","⼚":"厂","𠨬":"𠨬","⼛":"厶",參:"參","⼜":"又","及":"及","叟":"叟","𠭣":"𠭣",ロ:"口","⼝":"口",囗:"口","⼞":"口",句:"句","叫":"叫","叱":"叱","吆":"吆",吏:"吏",吝:"吝","吸":"吸",呂:"呂","呈":"呈","周":"周","咞":"咞","咢":"咢",咽:"咽",䎛:"㖈","哶":"哶","唐":"唐","啓":"啓",啟:"啓","啕":"啕","啣":"啣","善":"善","善":"善",喇:"喇","喙":"喙","喙":"喙","喝":"喝","喝":"喝","喫":"喫","喳":"喳",嗀:"嗀","嗂":"嗂","嗢":"嗢","嘆":"嘆","嘆":"嘆","噑":"噑","噴":"噴","器":"器",囹:"囹","圖":"圖","圗":"圗","⼟":"土",士:"土","⼠":"土","型":"型","城":"城",㦳:"㘽","埴":"埴","堍":"堍","報":"報","堲":"堲","塀":"塀",塚:"塚","塚":"塚",塞:"塞",填:"塡",壿:"墫","墬":"墬","墳":"墳",壘:"壘",壟:"壟","𡓤":"𡓤","壮":"壮","売":"売","壷":"壷","⼡":"夂","夆":"夆","⼢":"夊",タ:"夕","⼣":"夕","多":"多","夢":"夢","⼤":"大","奄":"奄",奈:"奈",契:"契","奔":"奔","奢":"奢",女:"女","⼥":"女","𡚨":"𡚨","𡛪":"𡛪","姘":"姘","姬":"姬","娛":"娛","娧":"娧","婢":"婢","婦":"婦",嬀:"媯","㛮":"㛮","㛼":"㛼","媵":"媵","嬈":"嬈","嬨":"嬨","嬾":"嬾","嬾":"嬾","⼦":"子","⼧":"宀",宅:"宅","𡧈":"𡧈","寃":"寃","寘":"寘",寧:"寧",寧:"寧","寧":"寧",寮:"寮","寳":"寳","𡬘":"𡬘","⼨":"寸","寿":"寿","将":"将","⼩":"小","尢":"尢","⺐":"尢","⼪":"尢","⺏":"尣","㞁":"㞁","⼫":"尸",尿:"尿","屠":"屠",屢:"屢","層":"層",履:"履","屮":"屮","屮":"屮","⼬":"屮","𡴋":"𡴋","⼭":"山","峀":"峀","岍":"岍","𡷤":"𡷤","𡷦":"𡷦",崙:"崙","嵃":"嵃",嵐:"嵐","嵫":"嵫","嵮":"嵮","嵼":"嵼","嶲":"嶲",嶺:"嶺","⼮":"巛","巢":"巢",エ:"工","⼯":"工","⼰":"己","⺒":"巳","㠯":"㠯","巽":"巽","⼱":"巾",帲:"帡","帨":"帨","帽":"帽","幩":"幩","㡢":"㡢","𢆃":"𢆃","⼲":"干",年:"年","𢆟":"𢆟","⺓":"幺","⼳":"幺","⼴":"广",度:"度","㡼":"㡼","庰":"庰","庳":"庳","庶":"庶",廊:"廊","廊":"廊",廉:"廉","廒":"廒",廓:"廓","廙":"廙",廬:"廬","⼵":"廴","廾":"廾","⼶":"廾","𢌱":"𢌱","𢌱":"𢌱",弄:"弄","⼷":"弋","⼸":"弓","弢":"弢","弢":"弢","⼹":"彐","⺔":"彑","当":"当","㣇":"㣇","⼺":"彡","形":"形","彩":"彩","彫":"彫","⼻":"彳",律:"律","㣣":"㣣","徚":"徚",復:"復","徭":"徭","⼼":"心","⺖":"忄","⺗":"㣺","忍":"忍","志":"志",念:"念","忹":"忹",怒:"怒",怜:"怜","恵":"恵","㤜":"㤜","㤺":"㤺","悁":"悁","悔":"悔","悔":"悔","惇":"惇","惘":"惘",惡:"惡","𢛔":"𢛔","愈":"愈","慨":"慨",慄:"慄","慈":"慈","慌":"慌","慌":"慌","慎":"慎","慎":"慎","慠":"慠","慺":"慺","憎":"憎","憎":"憎","憎":"憎",憐:"憐","憤":"憤","憯":"憯","憲":"憲","𢡄":"𢡄","𢡊":"𢡊","懞":"懞","懲":"懲","懲":"懲","懲":"懲",懶:"懶","懶":"懶",戀:"戀","⼽":"戈","成":"成","戛":"戛",戮:"戮","戴":"戴","⼾":"戶",戸:"戶","⼿":"手","⺘":"扌","扝":"扝","抱":"抱",拉:"拉",拏:"拏",拓:"拓","拔":"拔","拼":"拼",拾:"拾","𢬌":"𢬌","挽":"挽","捐":"捐","捨":"捨",捻:"捻","掃":"掃",掠:"掠","掩":"掩","揄":"揄","揤":"揤","摒":"摒","𢯱":"𢯱","搜":"搜","搢":"搢","揅":"揅","摩":"摩","摷":"摷","摾":"摾","㨮":"㨮",搉:"㩁",撚:"撚","撝":"撝",擄:"擄","㩬":"㩬","⽀":"支","⽁":"攴","⺙":"攵","敏":"敏","敏":"敏","敖":"敖","敬":"敬",數:"數","𣀊":"𣀊","⽂":"文","⻫":"斉","⽃":"斗",料:"料","⽄":"斤","⽅":"方",旅:"旅","⽆":"无","⺛":"旡","既":"既","旣":"旣","⽇":"日",易:"易",曶:"㫚","㫤":"㫤","晉":"晉",晩:"晚",晴:"晴","晴":"晴","暑":"暑","暑":"暑",暈:"暈","㬈":"㬈","暜":"暜",暴:"暴",曆:"曆","㬙":"㬙","𣊸":"𣊸","⽈":"曰",更:"更","書":"書","⽉":"月","𣍟":"𣍟",肦:"朌",胐:"朏",胊:"朐",脁:"朓",胶:"㬵",朗:"朗","朗":"朗","朗":"朗",脧:"朘","望":"望","望":"望",幐:"㬺",䐠:"㬻","𣎓":"𣎓",膧:"朣","𣎜":"𣎜","⽊":"木",李:"李","杓":"杓","杖":"杖","杞":"杞","𣏃":"𣏃",柿:"杮",杻:"杻","枅":"枅",林:"林","㭉":"㭉","𣏕":"𣏕",柳:"柳","柺":"柺",栗:"栗","栟":"栟","桒":"桒","𣑭":"𣑭",梁:"梁","梅":"梅","梅":"梅","梎":"梎",梨:"梨","椔":"椔","楂":"楂","㮝":"㮝","㮝":"㮝",槩:"㮣",樧:"榝","榣":"榣","槪":"槪",樂:"樂",樂:"樂",樂:"樂",樓:"樓","𣚣":"𣚣","檨":"檨",櫓:"櫓","櫛":"櫛",欄:"欄","㰘":"㰘","⽋":"欠","次":"次","𣢧":"𣢧","歔":"歔","㱎":"㱎","⽌":"止","⻭":"歯","歲":"歲",歷:"歷","歹":"歹","⽍":"歹","⺞":"歺","殟":"殟",殮:"殮","⽎":"殳",殺:"殺","殺":"殺","殺":"殺","殻":"殻","𣪍":"𣪍","⽏":"毋","⺟":"母","𣫺":"𣫺","⽐":"比","⽑":"毛","⽒":"氏","⺠":"民","⽓":"气","⽔":"水","⺡":"氵","⺢":"氺","汎":"汎","汧":"汧",沈:"沈","沿":"沿",泌:"泌","泍":"泍",泥:"泥","𣲼":"𣲼",洛:"洛",洞:"洞","洴":"洴","派":"派",流:"流","流":"流","流":"流","洖":"洖","浩":"浩",浪:"浪","海":"海","海":"海","浸":"浸","涅":"涅","𣴞":"𣴞",淋:"淋",淚:"淚",淪:"淪","淹":"淹","渚":"渚","港":"港","湮":"湮",潙:"溈","滋":"滋","滋":"滋",溜:"溜",溺:"溺","滇":"滇",滑:"滑","滛":"滛","㴳":"㴳",漏:"漏","漢":"漢","漢":"漢",漣:"漣","𣻑":"𣻑","潮":"潮","𣽞":"𣽞","𣾎":"𣾎","濆":"濆",濫:"濫",濾:"濾","瀛":"瀛","瀞":"瀞","瀞":"瀞","瀹":"瀹","灊":"灊","㶖":"㶖","⽕":"火","⺣":"灬","灰":"灰","灷":"灷","災":"災",炙:"炙","炭":"炭",烈:"烈",烙:"烙","煮":"煮","煮":"煮","𤉣":"𤉣","煅":"煅",煉:"煉","𤋮":"𤋮","熜":"熜",燎:"燎",燐:"燐","𤎫":"𤎫",爐:"爐",爛:"爛","爨":"爨","⽖":"爪","爫":"爫","⺤":"爫","爵":"爵","爵":"爵","⽗":"父","⽘":"爻","⺦":"丬","⽙":"爿","⽚":"片","牐":"牐","⽛":"牙","𤘈":"𤘈","⽜":"牛",牢:"牢","犀":"犀","犕":"犕","⽝":"犬","⺨":"犭","犯":"犯",狀:"狀","𤜵":"𤜵",狼:"狼",猪:"猪","猪":"猪","𤠔":"𤠔",獵:"獵","獺":"獺","⽞":"玄",率:"率",率:"率","⽟":"玉","王":"王","㺬":"㺬","玥":"玥",玲:"玲","㺸":"㺸","㺸":"㺸",珞:"珞",琉:"琉",理:"理","琢":"琢","瑇":"瑇","瑜":"瑜",瑩:"瑩","瑱":"瑱","瑱":"瑱","璅":"璅",璉:"璉",璘:"璘","瓊":"瓊","⽠":"瓜","⽡":"瓦","㼛":"㼛","甆":"甆","⽢":"甘","⽣":"生","甤":"甤","⽤":"用","⽥":"田","画":"画","甾":"甾","𤰶":"𤰶",留:"留",略:"略",異:"異","異":"異","𤲒":"𤲒","⽦":"疋","⽧":"疒",痢:"痢","瘐":"瘐","瘟":"瘟","瘝":"瘝",療:"療",癩:"癩","⽨":"癶","⽩":"白","𤾡":"𤾡","𤾸":"𤾸","⽪":"皮","⽫":"皿","𥁄":"𥁄","㿼":"㿼",益:"益","益":"益","盛":"盛",盧:"盧","䀈":"䀈","⽬":"目","直":"直","直":"直","𥃲":"𥃲","𥃳":"𥃳",省:"省","䀘":"䀘","𥄙":"𥄙","眞":"眞","真":"真","真":"真","𥄳":"𥄳","着":"着","睊":"睊","睊":"睊","鿃":"䀹","䀹":"䀹","䀹":"䀹",晣:"䀿","䁆":"䁆","瞋":"瞋","𥉉":"𥉉","瞧":"瞧","⽭":"矛","⽮":"矢","⽯":"石","䂖":"䂖","𥐝":"𥐝",硏:"研","硎":"硎",硫:"硫",碌:"碌","碌":"碌","碑":"碑",磊:"磊","磌":"磌","磌":"磌",磻:"磻","䃣":"䃣",礪:"礪","⽰":"示","⺭":"礻",礼:"礼","社":"社","祈":"祈","祉":"祉","𥘦":"𥘦","祐":"祐","祖":"祖","祖":"祖","祝":"祝",神:"神",祥:"祥","視":"視","視":"視",祿:"祿","𥚚":"𥚚","禍":"禍","禎":"禎",福:"福","福":"福","𥛅":"𥛅",禮:"禮","⽱":"禸","⽲":"禾",秊:"秊","䄯":"䄯","秫":"秫",稜:"稜","穊":"穊","穀":"穀","穀":"穀","穏":"穏","⽳":"穴","突":"突","𥥼":"𥥼","窱":"窱",立:"立","⽴":"立","⻯":"竜","𥪧":"𥪧","𥪧":"𥪧","竮":"竮","⽵":"竹",笠:"笠","節":"節","節":"節","䈂":"䈂","𥮫":"𥮫","篆":"篆","䈧":"䈧","築":"築","𥲀":"𥲀","𥳐":"𥳐",簾:"簾",籠:"籠","⽶":"米","类":"类",粒:"粒",精:"精","糒":"糒",糖:"糖","糨":"糨","䊠":"䊠","糣":"糣",糧:"糧","⽷":"糸","⺯":"糹","𥾆":"𥾆","紀":"紀",紐:"紐",索:"索",累:"累",絶:"絕","絣":"絣","絛":"絛",綠:"綠",綾:"綾","緇":"緇",練:"練","練":"練","練":"練","縂":"縂","䌁":"䌁","縉":"縉",縷:"縷","繁":"繁","繅":"繅","𦇚":"𦇚","䌴":"䌴","⽸":"缶","𦈨":"𦈨","缾":"缾","𦉇":"𦉇","⽹":"网","⺫":"罒","⺲":"罒","⺱":"罓","䍙":"䍙","署":"署","𦋙":"𦋙",罹:"罹","罺":"罺",羅:"羅","𦌾":"𦌾","⽺":"羊","羕":"羕",羚:"羚",羽:"羽","⽻":"羽","翺":"翺",老:"老","⽼":"老","⺹":"耂","者":"者","者":"者","者":"者","⽽":"而","𦓚":"𦓚","⽾":"耒","𦔣":"𦔣","⽿":"耳",聆:"聆","聠":"聠","𦖨":"𦖨",聯:"聯","聰":"聰",聾:"聾","⾀":"聿","⺺":"肀","⾁":"肉",肋:"肋","肭":"肭","育":"育","䏕":"䏕","䏙":"䏙",腁:"胼","脃":"脃","脾":"脾","䐋":"䐋","朡":"朡","𦞧":"𦞧","𦞵":"𦞵",朦:"䑃",臘:"臘","⾂":"臣",臨:"臨","⾃":"自","臭":"臭","⾄":"至","⾅":"臼","舁":"舁","舁":"舁","舄":"舄","⾆":"舌","舘":"舘","⾇":"舛","⾈":"舟","䑫":"䑫","⾉":"艮",良:"良","⾊":"色","⾋":"艸","艹":"艹","艹":"艹","⺾":"艹","⺿":"艹","⻀":"艹","芋":"芋","芑":"芑","芝":"芝","花":"花","芳":"芳","芽":"芽",若:"若","若":"若","苦":"苦","𦬼":"𦬼",茶:"茶","荒":"荒","荣":"荣","茝":"茝","茣":"茣","莽":"莽","荓":"荓",菉:"菉","菊":"菊","菌":"菌","菜":"菜","菧":"菧","華":"華",菱:"菱","著":"著","著":"著","𦰶":"𦰶","莭":"莭",落:"落",葉:"葉",蔿:"蒍","𦳕":"𦳕","𦵫":"𦵫",蓮:"蓮","蓱":"蓱","蓳":"蓳",蓼:"蓼","蔖":"蔖","䔫":"䔫","蕤":"蕤","𦼬":"𦼬",藍:"藍","䕝":"䕝","𦾱":"𦾱","䕡":"䕡",藺:"藺",蘆:"蘆","䕫":"䕫",蘒:"蘒",蘭:"蘭","𧃒":"𧃒",虁:"蘷",蘿:"蘿","⾌":"虍","⻁":"虎","虐":"虐",虜:"虜","虜":"虜","虧":"虧","虩":"虩","⾍":"虫","蚩":"蚩","蚈":"蚈","蛢":"蛢","蜎":"蜎","蜨":"蜨","蝫":"蝫","蟡":"蟡","蝹":"蝹","蝹":"蝹","螆":"螆","䗗":"䗗","𧏊":"𧏊",螺:"螺","蠁":"蠁","䗹":"䗹",蠟:"蠟","⾎":"血",行:"行","⾏":"行","衠":"衠","衣":"衣","⾐":"衣","⻂":"衤",裂:"裂","𧙧":"𧙧",裏:"裏","裗":"裗","裞":"裞",裡:"裡",裸:"裸","裺":"裺","䘵":"䘵","褐":"褐","襁":"襁",襤:"襤","⾑":"襾","⻄":"西","⻃":"覀","覆":"覆",見:"見","⾒":"見","𧢮":"𧢮","⻅":"见","⾓":"角","⾔":"言","𧥦":"𧥦",詽:"訮",訞:"䚶","䚾":"䚾","䛇":"䛇","誠":"誠",說:"說",說:"說","調":"調","請":"請",諒:"諒",論:"論","諭":"諭","諭":"諭",諸:"諸","諸":"諸",諾:"諾","諾":"諾","謁":"謁","謁":"謁","謹":"謹","謹":"謹",識:"識",讀:"讀",讏:"讆","變":"變","變":"變","⻈":"讠","⾕":"谷","⾖":"豆",豈:"豈","豕":"豕","⾗":"豕",豣:"豜","⾘":"豸","𧲨":"𧲨","⾙":"貝","貫":"貫","賁":"賁",賂:"賂",賈:"賈","賓":"賓","贈":"贈","贈":"贈","贛":"贛","⻉":"贝","⾚":"赤","⾛":"走","起":"起",趆:"赿","𧻓":"𧻓","𧼯":"𧼯","⾜":"足","跋":"跋","趼":"趼",跺:"跥",路:"路","跰":"跰",躛:"躗","⾝":"身",車:"車","⾞":"車","軔":"軔",輧:"軿",輦:"輦",輪:"輪","輸":"輸","輸":"輸",輻:"輻",轢:"轢","⻋":"车","⾟":"辛","辞":"辞",辰:"辰","⾠":"辰","⾡":"辵","辶":"辶","⻌":"辶","⻍":"辶","巡":"巡",連:"連",逸:"逸","逸":"逸","遲":"遲",遼:"遼","𨗒":"𨗒","𨗭":"𨗭",邏:"邏","⾢":"邑","邔":"邔",郎:"郎",郞:"郎","郞":"郎","郱":"郱",都:"都","𨜮":"𨜮","鄑":"鄑","鄛":"鄛","⾣":"酉",酪:"酪","醙":"醙",醴:"醴","⾤":"釆",里:"里","⾥":"里",量:"量",金:"金","⾦":"金",鈴:"鈴","鈸":"鈸","鉶":"鉶","鋗":"鋗","鋘":"鋘","鉼":"鉼",錄:"錄",鍊:"鍊",鎮:"鎭","鏹":"鏹","鐕":"鐕","𨯺":"𨯺","⻐":"钅","⻑":"長","⾧":"長","⻒":"镸","⻓":"长","⾨":"門","開":"開","䦕":"䦕",閭:"閭","閷":"閷","𨵷":"𨵷","⻔":"门","⾩":"阜","⻏":"阝","⻖":"阝",阮:"阮",陋:"陋",降:"降",陵:"陵",陸:"陸","陼":"陼",隆:"隆",隣:"隣","䧦":"䧦","⾪":"隶","隷":"隷",隸:"隷",隸:"隷","⾫":"隹","雃":"雃",離:"離","難":"難","難":"難","⾬":"雨",零:"零",雷:"雷","霣":"霣","𩅅":"𩅅",露:"露",靈:"靈","⾭":"靑","⻘":"青",靖:"靖","靖":"靖","𩇟":"𩇟","⾮":"非","⾯":"面","𩈚":"𩈚","⾰":"革","䩮":"䩮","䩶":"䩶","⾱":"韋","韛":"韛","韠":"韠","⻙":"韦","⾲":"韭","𩐊":"𩐊","⾳":"音","響":"響","響":"響","⾴":"頁","䪲":"䪲","頋":"頋","頋":"頋","頋":"頋",領:"領","頩":"頩","𩒖":"𩒖","頻":"頻","頻":"頻",類:"類","⻚":"页","⾵":"風","𩖶":"𩖶","⻛":"风","⾶":"飛","⻜":"飞","⻝":"食","⾷":"食","⻟":"飠","飢":"飢",飯:"飯",飼:"飼","䬳":"䬳",館:"館","餩":"餩","⻠":"饣","⾸":"首","⾹":"香","馧":"馧","⾺":"馬","駂":"駂",駱:"駱","駾":"駾",驪:"驪","⻢":"马","⾻":"骨","䯎":"䯎","⾼":"高","⾽":"髟","𩬰":"𩬰","鬒":"鬒","鬒":"鬒","⾾":"鬥","⾿":"鬯","⿀":"鬲","⿁":"鬼","⻤":"鬼","⿂":"魚",魯:"魯","鱀":"鱀",鱗:"鱗","⻥":"鱼","⿃":"鳥","鳽":"鳽","䳎":"䳎","鵧":"鵧","䳭":"䳭","𪃎":"𪃎",鶴:"鶴","𪄅":"𪄅","䳸":"䳸",鷺:"鷺","𪈎":"𪈎",鸞:"鸞",鹃:"鹂","⿄":"鹵",鹿:"鹿","⿅":"鹿","𪊑":"𪊑",麗:"麗",麟:"麟","⿆":"麥","⻨":"麦","麻":"麻","⿇":"麻","𪎒":"𪎒","⿈":"黃","⻩":"黄","⿉":"黍",黎:"黎","䵖":"䵖","⿊":"黑",黒:"黑","墨":"墨","黹":"黹","⿋":"黹","⿌":"黽","鼅":"鼅","黾":"黾","⿍":"鼎","鼏":"鼏","⿎":"鼓","鼖":"鼖","⿏":"鼠","鼻":"鼻","⿐":"鼻","齃":"齃","⿑":"齊","⻬":"齐","⿒":"齒","𪘀":"𪘀","⻮":"齿",龍:"龍","⿓":"龍","龎":"龎","⻰":"龙",龜:"龜",龜:"龜","龜":"龜","⿔":"龜","⻳":"龟","⿕":"龠"};var ob,nD;function d1e(){if(nD)return ob;nD=1;var t=u1e;function e(s){return s.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}var n=RegExp(Object.keys(t).map(e).join("|"),"g");function r(s){return t[s]}function i(s){return s.replace(n,r)}return ob=i,ob}var h1e=d1e();const f1e=zo(h1e);var t3={exports:{}},lb={},cb,rD;function m1e(){if(rD)return cb;rD=1;function t(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return cb=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,i=0;i<this._errors.length;i++){var s=this._errors[i],a=s.message,o=(e[a]||0)+1;e[a]=o,o>=r&&(n=s,r=o)}return n},cb}var iD;function p1e(){return iD||(iD=1,function(t){var e=m1e();t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return n&&n.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,s=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var s in n)typeof n[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=n[o];n[o]=(function(d){var f=t.operation(r),p=Array.prototype.slice.call(arguments,1),g=p.pop();p.push(function(y){f.retry(y)||(y&&(arguments[0]=f.mainError()),g.apply(this,arguments))}),f.attempt(function(){d.apply(n,p)})}).bind(n,l),n[o].options=r}}}(lb)),lb}var ub,sD;function g1e(){return sD||(sD=1,ub=p1e()),ub}var aD;function v1e(){if(aD)return t3.exports;aD=1;const t=g1e(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(o){super(),o instanceof Error?(this.originalError=o,{message:o}=o):(this.originalError=new Error(o),this.originalError.stack=this.stack),this.name="AbortError",this.message=o}}const r=(a,o,l)=>{const c=l.retries-(o-1);return a.attemptNumber=o,a.retriesLeft=c,a},i=a=>e.includes(a),s=(a,o)=>new Promise((l,c)=>{o={onFailedAttempt:()=>{},retries:10,...o};const d=t.operation(o);d.attempt(async f=>{try{l(await a(f))}catch(p){if(!(p instanceof Error)){c(new TypeError(`Non-error was thrown: "${p}". You should only throw errors.`));return}if(p instanceof n)d.stop(),c(p.originalError);else if(p instanceof TypeError&&!i(p.message))d.stop(),c(p);else{r(p,f,o);try{await o.onFailedAttempt(p)}catch(g){c(g);return}d.retry(p)||c(d.mainError())}}})});return t3.exports=s,t3.exports.default=s,t3.exports.AbortError=n,t3.exports}var y1e=v1e();const LK=zo(y1e);let Gg=class{constructor(e,n){if(this.stable=e,this.unstable=n,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}get name(){return this.stable?this.stable:this.unstable}get altName(){return this.stable?this.unstable:null}get names(){var e=[this.name],n=this.altName;return n&&e.push(n),e}matches(e){return this.name===e||this.altName===e}findIn(e){var n=void 0;return this.name&&(n=e==null?void 0:e[this.name]),!n&&this.altName&&(n=e==null?void 0:e[this.altName]),n}includedIn(e){var n=!1;return this.name&&(n=e.includes(this.name)),!n&&this.altName&&(n=e.includes(this.altName)),n}};class g9 extends Gg{constructor(){super(...arguments),P(this,"preferUnstable",!1)}setPreferUnstable(e){this.preferUnstable=e}get name(){return this.stable&&!this.preferUnstable?this.stable:this.unstable}}class br extends Gg{constructor(e,n){if(super(e,n),!this.unstable)throw new Error("Unstable value must be supplied")}get name(){return this.unstable}get altName(){return this.stable}}var X2=function(t){return t.Self="m.self",t.Pin="m.pin",t}({}),Kg=new br("m.asset","org.matrix.msc3488.asset"),e1=new br("m.ts","org.matrix.msc3488.ts"),Zg=new br("m.location","org.matrix.msc3488.location"),Qi=function(t){return t.Read="m.read",t.FullyRead="m.fully_read",t.ReadPrivate="m.read.private",t}({}),zg="main";function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var db=new Map;function hb(t){return t instanceof String&&(t=t.toString()),db.has(t)||db.set(t,t),db.get(t)}function Iw(t,e){var n=e??new URLSearchParams,r=function(o){s!=null&&(Array.isArray(s)?s.forEach(l=>{n.append(o,String(l))}):n.append(o,String(s)))};for(var[i,s]of Object.entries(t))r(i);return n}function cD(t,e,n){var r=lD(lD({},n),{},{[e]:n[t]});return delete r[t],r}function Ie(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r!=null&&(t=t.replace(n,encodeURIComponent(r)))}return t}function T6(t,e,n){var r;if(n){for(r=t.length-1;r>=0;r--)if(e(t[r],r,t))return t.splice(r,1),!0}else for(r=0;r<t.length;r++)if(e(t[r],r,t))return t.splice(r,1),!0;return!1}function OK(t,e){for(var n of e)if(!t.hasOwnProperty(n))throw new Error("Missing required key: "+n)}function Wg(t){return JSON.parse(JSON.stringify(t))}function _h(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="number"&&isNaN(t)&&isNaN(e))return!0;if(t===null||e===null)return t===e;if(!(t instanceof Object)||t.constructor!==e.constructor||t.prototype!==e.prototype)return!1;if(t instanceof RegExp||t instanceof Date)return t.toString()===e.toString();if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!_h(t[n],e[n]))return!1}else{for(var r in e)if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;for(var i in t)if(e.hasOwnProperty(i)!==t.hasOwnProperty(i)||!_h(t[i],e[i]))return!1}return!0}function xw(t){if(typeof t!="object"||t==null||Array.isArray(t))return t;var e=[];for(var[n,r]of Object.entries(t))e.push([n,xw(r)]);return e.sort((i,s)=>g7(i[0],s[0])),e}function uD(t){return typeof t=="number"&&isFinite(t)}function Sd(t){return typeof t=="string"?f1e(t.normalize("NFD").replace(C1e,"")):""}function R6(t){return typeof t=="string"?t.replace(/[\u202d-\u202e]/g,""):""}function _1e(t){return Sd(t.toLowerCase()).replace(/[\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~\u2000-\u206f\u2e00-\u2e7f]/g,"").toLowerCase()}var C1e=/[\u2000-\u200F\u202A-\u202F\u0300-\u036F\uFEFF\u061C\u2800\u2062-\u2063\s]/g;function AK(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function NK(t){return AK(t).replace(/\\\*/g,".*").replace(/\?/g,".")}function fb(t){return t!=null&&t.endsWith("/")?t.slice(0,-1):t}function ru(t,e){return new Promise(n=>{setTimeout(n,t,e)})}function DXe(t,e,n){return Mw.apply(this,arguments)}function Mw(){return Mw=F(function*(t,e,n){var r=Date.now();try{return yield n()}finally{var i=Date.now();t.debug("[Perf]: ".concat(e," took ").concat(i-r,"ms"))}}),Mw.apply(this,arguments)}function b1e(t,e,n){var r=Date.now();try{return n()}finally{var i=Date.now();t.debug("[Perf]: ".concat(e," took ").concat(i-r,"ms"))}}function DK(t){return t==null}function E1e(){return Promise.withResolvers()}function s2(t,e){return Pw.apply(this,arguments)}function Pw(){return Pw=F(function*(t,e){for(var n of t)yield e(yield n)}),Pw.apply(this,arguments)}function kf(t){return Promise.resolve(t())}function S1e(t){return LK(e=>t(e),{forever:!0,factor:2,minTimeout:3e3,maxTimeout:15e3})}var Nd=(()=>{for(var t="",e=32;e<=126;e++)t+=String.fromCharCode(e);return t})();function dD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nd;return t.padEnd(e,n[0])}function K0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nd,n=BigInt(e.length);if(t<=n){var r;return(r=e[Number(t)-1])!==null&&r!==void 0?r:""}var i=t/n,s=Number(t%n)-1;return s<0&&(i-=BigInt(Math.abs(s)),s=Number(n)-1),K0(i,e)+e[s]}function I6(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nd,n=BigInt(e.length),r=BigInt(0),i=t.length-1,s=BigInt(0);i>=0;i--,s++){var a=t.charCodeAt(i)-e.charCodeAt(0);r+=BigInt(1+a)*n**s}return r}function w1e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nd,r=Math.max(t.length,e.length),i=I6(dD(t,r,n),n),s=I6(dD(e,r,n),n),a=(i+s)/BigInt(2);return a===i||a==s?K0(a,n)+n[0]:K0(a,n)}function n3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nd;return K0(I6(t,e)+BigInt(1),e)}function hD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nd;return K0(I6(t,e)-BigInt(1),e)}function g7(t,e){return t<e?-1:t>e?1:0}function UK(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var[r,i]of Object.entries(e)){if(t[r]instanceof Object&&i){UK(t[r],i);continue}if(i!=null||!n){x6(t,r,i);continue}}return t}function fD(t){var e;return(e=e1.findIn(t.getContent()))!==null&&e!==void 0?e:-1}function k1e(t,e){return fD(e)-fD(t)}function xI(t){return[Qi.Read,Qi.ReadPrivate].includes(t)}function mD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(a,o)=>a===o;if(t.size!==e.size)return!1;for(var[r,i]of t){var s=e.get(r);if(s===void 0||!n(i,s))return!1}return!0}function FK(t){return t instanceof Map?Q1(t):Array.isArray(t)?t.map(e=>FK(e)):t}function Q1(t){var e=new Map;for(var[n,r]of t)e.set(n,FK(r));return Object.fromEntries(e.entries())}function c0(t){return t==="__proto__"||t==="prototype"||t==="constructor"}function x6(t,e,n){if(c0(e))throw new Error("Trying to modify prototype or constructor");t[e]=n}function Po(t){return!(c0(t.room_id)||c0(t.sender)||c0(t.event_id))}class qc extends Map{constructor(e){super(),this.createDefault=e}getOrCreate(e){return this.has(e)||this.set(e,this.createDefault()),this.get(e)}}var Lw="migrationState",em=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.INITIAL_DATA_MIGRATED=1]="INITIAL_DATA_MIGRATED",t[t.OLM_SESSIONS_MIGRATED=2]="OLM_SESSIONS_MIGRATED",t[t.MEGOLM_SESSIONS_MIGRATED=3]="MEGOLM_SESSIONS_MIGRATED",t[t.ROOM_SETTINGS_MIGRATED=4]="ROOM_SETTINGS_MIGRATED",t[t.INITIAL_OWN_KEY_QUERY_DONE=5]="INITIAL_OWN_KEY_QUERY_DONE",t}({}),tm=50;function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z8(t,e){return encodeURIComponent(t)+"/"+encodeURIComponent(e)}function T1e(t){var e=t.split("/"),n=decodeURIComponent(e[0]),r=decodeURIComponent(e[1]);return{senderKey:n,sessionId:r}}class v9{constructor(){P(this,"migrationState",em.NOT_STARTED),P(this,"account",null),P(this,"crossSigningKeys",null),P(this,"privateKeys",{}),P(this,"sessions",{}),P(this,"inboundGroupSessions",{}),P(this,"inboundGroupSessionsWithheld",{}),P(this,"rooms",{}),P(this,"sessionsNeedingBackup",{})}containsData(){var e=this;return F(function*(){return e.account!==null})()}startup(){var e=this;return F(function*(){return e})()}deleteAllData(){return Promise.resolve()}getMigrationState(){var e=this;return F(function*(){return e.migrationState})()}setMigrationState(e){var n=this;return F(function*(){n.migrationState=e})()}getAccount(e,n){n(this.account)}storeAccount(e,n){this.account=n}getCrossSigningKeys(e,n){n(this.crossSigningKeys)}getSecretStorePrivateKey(e,n,r){var i=this.privateKeys[r];n(i||null)}storeSecretStorePrivateKey(e,n,r){this.privateKeys[n]=r}countEndToEndSessions(e,n){var r=0;for(var i of Object.values(this.sessions))r+=Object.keys(i).length;n(r)}getEndToEndSession(e,n,r,i){var s=this.sessions[e]||{};i(s[n]||null)}getEndToEndSessions(e,n,r){r(this.sessions[e]||{})}storeEndToEndSession(e,n,r,i){var s=this.sessions[e];s===void 0&&(s={},this.sessions[e]=s),x6(s,n,r)}getEndToEndSessionsBatch(){var e=this;return F(function*(){var n=[];for(var r of Object.values(e.sessions))for(var i of Object.values(r))if(n.push(i),n.length>=tm)return n;return n.length===0?null:n})()}deleteEndToEndSessionsBatch(e){var n=this;return F(function*(){for(var{deviceKey:r,sessionId:i}of e){var s=n.sessions[r]||{};delete s[i],Object.keys(s).length===0&&delete n.sessions[r]}})()}getEndToEndInboundGroupSession(e,n,r,i){var s=Z8(e,n);i(this.inboundGroupSessions[s]||null,this.inboundGroupSessionsWithheld[s]||null)}storeEndToEndInboundGroupSession(e,n,r,i){var s=Z8(e,n);this.inboundGroupSessions[s]=r}countEndToEndInboundGroupSessions(){var e=this;return F(function*(){return Object.keys(e.inboundGroupSessions).length})()}getEndToEndInboundGroupSessionsBatch(){var e=this;return F(function*(){var n=[];for(var[r,i]of Object.entries(e.inboundGroupSessions))if(n.push(gD(gD({},T1e(r)),{},{sessionData:i,needsBackup:r in e.sessionsNeedingBackup})),n.length>=tm)return n;return n.length===0?null:n})()}deleteEndToEndInboundGroupSessionsBatch(e){var n=this;return F(function*(){for(var{senderKey:r,sessionId:i}of e){var s=Z8(r,i);delete n.inboundGroupSessions[s]}})()}getEndToEndRooms(e,n){n(this.rooms)}markSessionsNeedingBackup(e){for(var n of e){var r=Z8(n.senderKey,n.sessionId);this.sessionsNeedingBackup[r]=!0}return Promise.resolve()}doTxn(e,n,r){return Promise.resolve(r(null))}}var R1e=/^(?:(?:\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|(?:\[[\dA-Fa-f:.]{2,45}])|(?:[A-Za-z\d\-.]{1,255}))(?::\d{1,5})?$/;function I1e(t){var e=R1e.exec(t);return(e==null?void 0:e[0])===t}var x1e=/^[\w-]+$/;function M1e(t){var e=x1e.exec(t);return(e==null?void 0:e[0])===t}function y9(t,e,n,r,i){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,a=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;if(typeof e!="string"||!e)return"";if(!e.startsWith("mxc://"))return s?e:"";var[l,c,...d]=e.slice(6).split("/");if(d.length>0||!I1e(l)||!M1e(c))return"";o&&(a=!0);var f,p=!!n||!!r||!!i,g=p?"thumbnail":"download";o?f="/_matrix/client/v1/media/".concat(g):f="/_matrix/media/v3/".concat(g);var y=new URL("".concat(f,"/").concat(l,"/").concat(c),t);return n&&y.searchParams.set("width",Math.round(n).toString()),r&&y.searchParams.set("height",Math.round(r).toString()),i&&y.searchParams.set("method",i),typeof a=="boolean"&&y.searchParams.set("allow_redirect",JSON.stringify(a)),y.href}var v7={exports:{}},P1e=v7.exports,vD;function L1e(){return vD||(vD=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(P1e,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function o(v,b){var C=v[b];if(typeof C.bind=="function")return C.bind(v);try{return Function.prototype.bind.call(C,v)}catch{return function(){return Function.prototype.apply.apply(C,[v,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(v){return v==="debug"&&(v="log"),typeof console===n?!1:v==="trace"&&r?l:console[v]!==void 0?o(console,v):console.log!==void 0?o(console,"log"):e}function d(){for(var v=this.getLevel(),b=0;b<i.length;b++){var C=i[b];this[C]=b<v?e:this.methodFactory(C,v,this.name)}if(this.log=this.debug,typeof console===n&&v<this.levels.SILENT)return"No console available for logging"}function f(v){return function(){typeof console!==n&&(d.call(this),this[v].apply(this,arguments))}}function p(v,b,C){return c(v)||f.apply(this,arguments)}function g(v,b){var C=this,S,R,w,I="loglevel";typeof v=="string"?I+=":"+v:typeof v=="symbol"&&(I=void 0);function k(U){var j=(i[U]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=j;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+j+";"}catch{}}}function x(){var U;if(!(typeof window===n||!I)){try{U=window.localStorage[I]}catch{}if(typeof U===n)try{var j=window.document.cookie,$=encodeURIComponent(I),Z=j.indexOf($+"=");Z!==-1&&(U=/^([^;]+)/.exec(j.slice(Z+$.length+1))[1])}catch{}return C.levels[U]===void 0&&(U=void 0),U}}function L(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(U){var j=U;if(typeof j=="string"&&C.levels[j.toUpperCase()]!==void 0&&(j=C.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=C.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+U)}C.name=v,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=b||p,C.getLevel=function(){return w??R??S},C.setLevel=function(U,j){return w=N(U),j!==!1&&k(w),d.call(C)},C.setDefaultLevel=function(U){R=N(U),x()||C.setLevel(U,!1)},C.resetLevel=function(){w=null,L(),d.call(C)},C.enableAll=function(U){C.setLevel(C.levels.TRACE,U)},C.disableAll=function(U){C.setLevel(C.levels.SILENT,U)},C.rebuild=function(){if(a!==C&&(S=N(a.getLevel())),d.call(C),a===C)for(var U in s)s[U].rebuild()},S=N(a?a.getLevel():"WARN");var D=x();D!=null&&(w=N(D)),d.call(C)}a=new g,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var C=s[b];return C||(C=s[b]=new g(b,a.methodFactory)),C};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})}(v7)),v7.exports}var O1e=L1e();const Ow=zo(O1e);var A1e="matrix";Ow.methodFactory=function(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.prefix&&i.unshift(this.prefix);var a=t==="error"||t==="warn"||t==="trace"||t==="info"||t==="debug";return a?console[t](...i):console.log(...i)}};function jK(t){var e=A1e+(t===void 0?"":"-".concat(t)),n=Ow.getLogger(e);return n.getChild===void 0&&(n.prefix=t,n.getChild=r=>{var i=jK((t??"")+r);return i.methodFactory=n.methodFactory,i.rebuild(),i},n.setLevel(Ow.levels.DEBUG,!1)),n}var A=jK();class UXe{constructor(e,n){this.parent=e,P(this,"name",void 0),this.name=n+":"}trace(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.parent.trace(this.name,...n)}debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.parent.debug(this.name,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.parent.info(this.name,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.parent.warn(this.name,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.parent.error(this.name,...n)}}var z8={exports:{}},yD;function N1e(){if(yD)return z8.exports;yD=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,k,x){return Function.prototype.apply.call(I,k,x)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function r(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(I){return I!==I};function s(){s.init.call(this)}z8.exports=s,z8.exports.once=C,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function l(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(I){for(var k=[],x=1;x<arguments.length;x++)k.push(arguments[x]);var L=I==="error",N=this._events;if(N!==void 0)L=L&&N.error===void 0;else if(!L)return!1;if(L){var D;if(k.length>0&&(D=k[0]),D instanceof Error)throw D;var U=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw U.context=D,U}var j=N[I];if(j===void 0)return!1;if(typeof j=="function")e(j,this,k);else for(var $=j.length,Z=y(j,$),x=0;x<$;++x)e(Z[x],this,k);return!0};function c(w,I,k,x){var L,N,D;if(o(k),N=w._events,N===void 0?(N=w._events=Object.create(null),w._eventsCount=0):(N.newListener!==void 0&&(w.emit("newListener",I,k.listener?k.listener:k),N=w._events),D=N[I]),D===void 0)D=N[I]=k,++w._eventsCount;else if(typeof D=="function"?D=N[I]=x?[k,D]:[D,k]:x?D.unshift(k):D.push(k),L=l(w),L>0&&D.length>L&&!D.warned){D.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=w,U.type=I,U.count=D.length,r(U)}return w}s.prototype.addListener=function(I,k){return c(this,I,k,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(I,k){return c(this,I,k,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(w,I,k){var x={fired:!1,wrapFn:void 0,target:w,type:I,listener:k},L=d.bind(x);return L.listener=k,x.wrapFn=L,L}s.prototype.once=function(I,k){return o(k),this.on(I,f(this,I,k)),this},s.prototype.prependOnceListener=function(I,k){return o(k),this.prependListener(I,f(this,I,k)),this},s.prototype.removeListener=function(I,k){var x,L,N,D,U;if(o(k),L=this._events,L===void 0)return this;if(x=L[I],x===void 0)return this;if(x===k||x.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete L[I],L.removeListener&&this.emit("removeListener",I,x.listener||k));else if(typeof x!="function"){for(N=-1,D=x.length-1;D>=0;D--)if(x[D]===k||x[D].listener===k){U=x[D].listener,N=D;break}if(N<0)return this;N===0?x.shift():v(x,N),x.length===1&&(L[I]=x[0]),L.removeListener!==void 0&&this.emit("removeListener",I,U||k)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(I){var k,x,L;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[I]),this;if(arguments.length===0){var N=Object.keys(x),D;for(L=0;L<N.length;++L)D=N[L],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=x[I],typeof k=="function")this.removeListener(I,k);else if(k!==void 0)for(L=k.length-1;L>=0;L--)this.removeListener(I,k[L]);return this};function p(w,I,k){var x=w._events;if(x===void 0)return[];var L=x[I];return L===void 0?[]:typeof L=="function"?k?[L.listener||L]:[L]:k?b(L):y(L,L.length)}s.prototype.listeners=function(I){return p(this,I,!0)},s.prototype.rawListeners=function(I){return p(this,I,!1)},s.listenerCount=function(w,I){return typeof w.listenerCount=="function"?w.listenerCount(I):g.call(w,I)},s.prototype.listenerCount=g;function g(w){var I=this._events;if(I!==void 0){var k=I[w];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(w,I){for(var k=new Array(I),x=0;x<I;++x)k[x]=w[x];return k}function v(w,I){for(;I+1<w.length;I++)w[I]=w[I+1];w.pop()}function b(w){for(var I=new Array(w.length),k=0;k<I.length;++k)I[k]=w[k].listener||w[k];return I}function C(w,I){return new Promise(function(k,x){function L(D){w.removeListener(I,N),x(D)}function N(){typeof w.removeListener=="function"&&w.removeListener("error",L),k([].slice.call(arguments))}R(w,I,N,{once:!0}),I!=="error"&&S(w,L,{once:!0})})}function S(w,I,k){typeof w.on=="function"&&R(w,"error",I,k)}function R(w,I,k,x){if(typeof w.on=="function")x.once?w.once(I,k):w.on(I,k);else if(typeof w.addEventListener=="function")w.addEventListener(I,function L(N){x.once&&w.removeEventListener(I,L),k(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return z8.exports}var _9=N1e();const MI=zo(_9);var HK=function(t){return t.NewListener="newListener",t.RemoveListener="removeListener",t.Error="error",t}({});class Un extends _9.EventEmitter{addListener(e,n){return super.addListener(e,n)}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return super.emit(e,...r)}emitPromised(e){var n=arguments,r=this;return F(function*(){for(var i=n.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=n[a];var o=r.listeners(e);return Promise.allSettled(o.map(l=>l(...s))).then(()=>o.length>0)})()}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}off(e,n){return super.off(e,n)}on(e,n){return super.on(e,n)}once(e,n){return super.once(e,n)}prependListener(e,n){return super.prependListener(e,n)}prependOnceListener(e,n){return super.prependOnceListener(e,n)}removeAllListeners(e){return e===void 0?super.removeAllListeners():super.removeAllListeners(e)}removeListener(e,n){return super.removeListener(e,n)}rawListeners(e){return super.rawListeners(e)}}var ee=function(t){return t.RoomCanonicalAlias="m.room.canonical_alias",t.RoomCreate="m.room.create",t.RoomJoinRules="m.room.join_rules",t.RoomMember="m.room.member",t.RoomThirdPartyInvite="m.room.third_party_invite",t.RoomPowerLevels="m.room.power_levels",t.RoomName="m.room.name",t.RoomTopic="m.room.topic",t.RoomAvatar="m.room.avatar",t.RoomPinnedEvents="m.room.pinned_events",t.RoomEncryption="m.room.encryption",t.RoomHistoryVisibility="m.room.history_visibility",t.RoomGuestAccess="m.room.guest_access",t.RoomServerAcl="m.room.server_acl",t.RoomTombstone="m.room.tombstone",t.RoomPredecessor="org.matrix.msc3946.room_predecessor",t.PolicyRuleUser="m.policy.rule.user",t.PolicyRuleRoom="m.policy.rule.room",t.PolicyRuleServer="m.policy.rule.server",t.SpaceChild="m.space.child",t.SpaceParent="m.space.parent",t.RoomRedaction="m.room.redaction",t.RoomMessage="m.room.message",t.RoomMessageEncrypted="m.room.encrypted",t.Sticker="m.sticker",t.CallInvite="m.call.invite",t.CallCandidates="m.call.candidates",t.CallAnswer="m.call.answer",t.CallHangup="m.call.hangup",t.CallReject="m.call.reject",t.CallSelectAnswer="m.call.select_answer",t.CallNegotiate="m.call.negotiate",t.CallSDPStreamMetadataChanged="m.call.sdp_stream_metadata_changed",t.CallSDPStreamMetadataChangedPrefix="org.matrix.call.sdp_stream_metadata_changed",t.CallReplaces="m.call.replaces",t.CallAssertedIdentity="m.call.asserted_identity",t.CallAssertedIdentityPrefix="org.matrix.call.asserted_identity",t.CallEncryptionKeysPrefix="io.element.call.encryption_keys",t.KeyVerificationRequest="m.key.verification.request",t.KeyVerificationStart="m.key.verification.start",t.KeyVerificationCancel="m.key.verification.cancel",t.KeyVerificationMac="m.key.verification.mac",t.KeyVerificationDone="m.key.verification.done",t.KeyVerificationKey="m.key.verification.key",t.KeyVerificationAccept="m.key.verification.accept",t.KeyVerificationReady="m.key.verification.ready",t.RoomMessageFeedback="m.room.message.feedback",t.Reaction="m.reaction",t.PollStart="org.matrix.msc3381.poll.start",t.Typing="m.typing",t.Receipt="m.receipt",t.Presence="m.presence",t.FullyRead="m.fully_read",t.Tag="m.tag",t.SpaceOrder="org.matrix.msc3230.space_order",t.PushRules="m.push_rules",t.Direct="m.direct",t.IgnoredUserList="m.ignored_user_list",t.RoomKey="m.room_key",t.RoomKeyRequest="m.room_key_request",t.ForwardedRoomKey="m.forwarded_room_key",t.Dummy="m.dummy",t.SecretRequest="m.secret.request",t.SecretSend="m.secret.send",t.GroupCallPrefix="org.matrix.msc3401.call",t.GroupCallMemberPrefix="org.matrix.msc3401.call.member",t.CallNotify="org.matrix.msc4075.call.notify",t}({}),Sn=function(t){return t.Annotation="m.annotation",t.Replace="m.replace",t.Reference="m.reference",t.Thread="m.thread",t}({}),Gl=function(t){return t.Text="m.text",t.Emote="m.emote",t.Notice="m.notice",t.Image="m.image",t.File="m.file",t.Audio="m.audio",t.Location="m.location",t.Video="m.video",t.KeyVerificationRequest="m.key.verification.request",t}({}),M6="type",_2=function(t){return t.Space="m.space",t.UnstableCall="org.matrix.msc3417.call",t.ElementVideo="io.element.video",t}({}),C9="org.matrix.msgid",Aw=new br("m.room.purpose","org.matrix.msc3088.purpose"),Nw=new br("m.enabled","org.matrix.msc3088.enabled"),Dw=new br("m.data_tree","org.matrix.msc3089.data_tree"),$K=new br("m.leaf","org.matrix.msc3089.leaf"),Pc=new br("m.branch","org.matrix.msc3089.branch"),VK=new br("m.room.marker","org.matrix.msc2716.marker"),Uw=new br("with_rel_types","org.matrix.msc3912.with_relations"),BK=new br("io.element.functional_members","io.element.functional_members"),X1=new br("m.visibility","org.matrix.msc3531.visibility"),Fw=new br("enabled","org.matrix.msc3881.enabled"),D1e=new br("device_id","org.matrix.msc3881.device_id"),qK=new br("m.local_notification_settings","org.matrix.msc3890.local_notification_settings"),P6=new br("thread_id","org.matrix.msc4023.thread_id"),GK=new Gg("membership","io.element.msc4115.membership"),Ke=function(t){return t.Ban="ban",t.Invite="invite",t.Join="join",t.Knock="knock",t.Leave="leave",t}({}),xs=function(t){return t.Membership="RoomMember.membership",t.Name="RoomMember.name",t.PowerLevel="RoomMember.powerLevel",t.Typing="RoomMember.typing",t}({});class Z0 extends Un{constructor(e,n){super(),this.roomId=e,this.userId=n,P(this,"_isOutOfBand",!1),P(this,"modified",-1),P(this,"requestedProfileInfo",!1),P(this,"typing",!1),P(this,"name",void 0),P(this,"rawDisplayName",void 0),P(this,"powerLevel",0),P(this,"powerLevelNorm",0),P(this,"user",void 0),P(this,"membership",void 0),P(this,"disambiguate",!1),P(this,"events",{}),this.name=n,this.rawDisplayName=n,this.updateModifiedTime()}markOutOfBand(){this._isOutOfBand=!0}isOutOfBand(){return this._isOutOfBand}setMembershipEvent(e,n){var r,i,s=(r=e.getDirectionalContent().displayname)!==null&&r!==void 0?r:"";if(e.getType()===ee.RoomMember){this._isOutOfBand=!1,this.events.member=e;var a=this.membership;this.membership=e.getDirectionalContent().membership,this.membership===void 0&&A.trace("membership event with membership undefined (forwardLooking: ".concat(e.forwardLooking,")!"),e.getContent(),"prevcontent is ",e.getPrevContent()),this.disambiguate=j1e(this.userId,s,n);var o=this.name;this.name=H1e(this.userId,s,this.disambiguate),this.rawDisplayName=R6((i=e.getDirectionalContent().displayname)!==null&&i!==void 0?i:""),(!this.rawDisplayName||!Sd(this.rawDisplayName))&&(this.rawDisplayName=this.userId),a!==this.membership&&(this.updateModifiedTime(),this.emit(xs.Membership,e,this,a)),o!==this.name&&(this.updateModifiedTime(),this.emit(xs.Name,e,this,o))}}setPowerLevelEvent(e){if(!(e.getType()!==ee.RoomPowerLevels||e.getStateKey()!=="")){var n=e.getDirectionalContent(),r=n.users_default||0,i=n.users||{};Object.values(i).forEach(o=>{r=Math.max(r,o)});var s=this.powerLevel,a=this.powerLevelNorm;i[this.userId]!==void 0&&Number.isInteger(i[this.userId])?this.powerLevel=i[this.userId]:n.users_default!==void 0?this.powerLevel=n.users_default:this.powerLevel=0,this.powerLevelNorm=0,r>0&&(this.powerLevelNorm=this.powerLevel*100/r),(s!==this.powerLevel||a!==this.powerLevelNorm)&&(this.updateModifiedTime(),this.emit(xs.PowerLevel,e,this))}}setTypingEvent(e){if(e.getType()==="m.typing"){var n=this.typing;this.typing=!1;var r=e.getContent().user_ids;Array.isArray(r)&&(r.indexOf(this.userId)!==-1&&(this.typing=!0),n!==this.typing&&(this.updateModifiedTime(),this.emit(xs.Typing,e,this)))}}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}isKicked(){return this.membership===Ke.Leave&&this.events.member!==void 0&&this.events.member.getSender()!==this.events.member.getStateKey()}getDMInviter(){if(this.events.member){var e=this.events.member,n=e.getContent(),r=e.getSender();if(n.membership===Ke.Join&&(n=e.getPrevContent(),r=e.getUnsigned().prev_sender),n.membership===Ke.Invite&&n.is_direct)return r}}getAvatarUrl(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=this.getMxcAvatarUrl();if(!l&&!s)return null;var c=y9(e,l,n,r,i,a,void 0,o);return c||null}getMxcAvatarUrl(){if(this.events.member)return this.events.member.getDirectionalContent().avatar_url;if(this.user)return this.user.avatarUrl}}var U1e=/@.+:.+/,F1e=/[\u200E\u200F\u202A-\u202F]/;function j1e(t,e,n){if(!e||e===t||!n)return!1;var r=Sd(e);if(!r)return!1;if(U1e.test(r)||F1e.test(e))return!0;var i=n.getUserIdsWithDisplayName(e);return!!i.some(s=>s!==t)}function H1e(t,e,n){return!e||e===t?t:n?R6(e)+" ("+t+")":Sd(e)?R6(e):t}var mb={},r3={},i3={},_D;function KK(){if(_D)return i3;_D=1,Object.defineProperty(i3,"__esModule",{value:!0}),i3.NamespacedMap=void 0;function t(l,c){var d=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!d){if(Array.isArray(l)||(d=e(l))||c){d&&(l=d);var f=0,p=function(){};return{s:p,n:function(){return f>=l.length?{done:!0}:{done:!1,value:l[f++]}},e:function(C){throw C},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,y=!1,v;return{s:function(){d=d.call(l)},n:function(){var C=d.next();return g=C.done,C},e:function(C){y=!0,v=C},f:function(){try{!g&&d.return!=null&&d.return()}finally{if(y)throw v}}}}function e(l,c){if(l){if(typeof l=="string")return n(l,c);var d=Object.prototype.toString.call(l).slice(8,-1);if(d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set")return Array.from(l);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return n(l,c)}}function n(l,c){(c==null||c>l.length)&&(c=l.length);for(var d=0,f=new Array(c);d<c;d++)f[d]=l[d];return f}function r(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function i(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}function s(l,c,d){return c&&i(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),l}function a(l,c,d){return c in l?Object.defineProperty(l,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[c]=d,l}var o=function(){function l(c){if(r(this,l),a(this,"internalMap",new Map),c){var d=t(c),f;try{for(d.s();!(f=d.n()).done;){var p=f.value;this.set(p[0],p[1])}}catch(g){d.e(g)}finally{d.f()}}}return s(l,[{key:"get",value:function(d){return d.name&&this.internalMap.has(d.name)?this.internalMap.get(d.name):d.altName&&this.internalMap.has(d.altName)?this.internalMap.get(d.altName):null}},{key:"set",value:function(d,f){d.name&&this.internalMap.set(d.name,f),d.altName&&this.internalMap.set(d.altName,f)}},{key:"has",value:function(d){return!!this.get(d)}},{key:"delete",value:function(d){d.name&&this.internalMap.delete(d.name),d.altName&&this.internalMap.delete(d.altName)}},{key:"hasNamespaced",value:function(d){return this.internalMap.has(d)}},{key:"getNamespaced",value:function(d){return this.internalMap.get(d)}}]),l}();return i3.NamespacedMap=o,i3}var s3={},CD;function Nm(){if(CD)return s3;CD=1;function t(y){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},t(y)}Object.defineProperty(s3,"__esModule",{value:!0}),s3.InvalidEventError=void 0;function e(y,v,b){return Object.defineProperty(y,"prototype",{writable:!1}),y}function n(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function r(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),v&&f(y,v)}function i(y){var v=c();return function(){var C=p(y),S;if(v){var R=p(this).constructor;S=Reflect.construct(C,arguments,R)}else S=C.apply(this,arguments);return s(this,S)}}function s(y,v){if(v&&(t(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(y)}function a(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function o(y){var v=typeof Map=="function"?new Map:void 0;return o=function(C){if(C===null||!d(C))return C;if(typeof C!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(C))return v.get(C);v.set(C,S)}function S(){return l(C,arguments,p(this).constructor)}return S.prototype=Object.create(C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),f(S,C)},o(y)}function l(y,v,b){return c()?l=Reflect.construct:l=function(S,R,w){var I=[null];I.push.apply(I,R);var k=Function.bind.apply(S,I),x=new k;return w&&f(x,w.prototype),x},l.apply(null,arguments)}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(y){return Function.toString.call(y).indexOf("[native code]")!==-1}function f(y,v){return f=Object.setPrototypeOf||function(C,S){return C.__proto__=S,C},f(y,v)}function p(y){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},p(y)}var g=function(y){r(b,y);var v=i(b);function b(C){return n(this,b),v.call(this,C)}return e(b)}(o(Error));return s3.InvalidEventError=g,s3}var Tf={},a3={},o3={},bD;function Yg(){if(bD)return o3;bD=1,Object.defineProperty(o3,"__esModule",{value:!0}),o3.ExtensibleEvent=void 0;function t(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function e(i,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function n(i,s,a){return s&&e(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),i}var r=function(){function i(s){t(this,i),this.wireFormat=s}return n(i,[{key:"wireContent",get:function(){return this.wireFormat.content}}]),i}();return o3.ExtensibleEvent=r,o3}var l3={},ED;function ZK(){if(ED)return l3;ED=1,Object.defineProperty(l3,"__esModule",{value:!0}),l3.isOptionalAString=t,l3.isProvided=e;function t(n){return e(n)&&typeof n=="string"}function e(n){return n!=null}return l3}var Zs={},M1={},SD;function Dm(){if(SD)return M1;SD=1;function t(g){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},t(g)}Object.defineProperty(M1,"__esModule",{value:!0}),M1.UnstableValue=M1.NamespacedValue=void 0;function e(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),y&&n(g,y)}function n(g,y){return n=Object.setPrototypeOf||function(b,C){return b.__proto__=C,b},n(g,y)}function r(g){var y=a();return function(){var b=o(g),C;if(y){var S=o(this).constructor;C=Reflect.construct(b,arguments,S)}else C=b.apply(this,arguments);return i(this,C)}}function i(g,y){if(y&&(t(y)==="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o(g){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},o(g)}function l(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function c(g,y){for(var v=0;v<y.length;v++){var b=y[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}function d(g,y,v){return y&&c(g.prototype,y),Object.defineProperty(g,"prototype",{writable:!1}),g}var f=function(){function g(y,v){if(l(this,g),this.stable=y,this.unstable=v,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}return d(g,[{key:"name",get:function(){return this.stable?this.stable:this.unstable}},{key:"altName",get:function(){return this.stable?this.unstable:null}},{key:"matches",value:function(v){return!!this.name&&this.name===v||!!this.altName&&this.altName===v}},{key:"findIn",value:function(v){var b;return this.name&&(b=v==null?void 0:v[this.name]),!b&&this.altName&&(b=v==null?void 0:v[this.altName]),b}},{key:"includedIn",value:function(v){var b=!1;return this.name&&(b=v.includes(this.name)),!b&&this.altName&&(b=v.includes(this.altName)),b}}]),g}();M1.NamespacedValue=f;var p=function(g){e(v,g);var y=r(v);function v(b,C){var S;if(l(this,v),S=y.call(this,b,C),!S.unstable)throw new Error("Unstable value must be supplied");return S}return d(v,[{key:"name",get:function(){return this.unstable}},{key:"altName",get:function(){return this.stable}}]),v}(f);return M1.UnstableValue=p,M1}var wD;function Kl(){if(wD)return Zs;wD=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.M_TEXT=Zs.M_NOTICE=Zs.M_MESSAGE=Zs.M_HTML=Zs.M_EMOTE=void 0;var t=Dm(),e=new t.UnstableValue("m.message","org.matrix.msc1767.message");Zs.M_MESSAGE=e;var n=new t.UnstableValue("m.text","org.matrix.msc1767.text");Zs.M_TEXT=n;var r=new t.UnstableValue("m.html","org.matrix.msc1767.html");Zs.M_HTML=r;var i=new t.UnstableValue("m.emote","org.matrix.msc1767.emote");Zs.M_EMOTE=i;var s=new t.UnstableValue("m.notice","org.matrix.msc1767.notice");return Zs.M_NOTICE=s,Zs}var W8={},kD;function Uh(){if(kD)return W8;kD=1,Object.defineProperty(W8,"__esModule",{value:!0}),W8.isEventTypeSame=t;function t(e,n){if(typeof e=="string")return typeof n=="string"?n===e:n.matches(e);if(typeof n=="string")return e.matches(n);var r=n,i=e;return r.matches(i.name)||r.matches(i.altName)}return W8}var TD;function Fh(){if(TD)return a3;TD=1;function t(w){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},t(w)}Object.defineProperty(a3,"__esModule",{value:!0}),a3.MessageEvent=void 0;var e=Yg(),n=ZK(),r=Nm(),i=Kl(),s=Uh();function a(w,I){var k=Object.keys(w);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(w);I&&(x=x.filter(function(L){return Object.getOwnPropertyDescriptor(w,L).enumerable})),k.push.apply(k,x)}return k}function o(w){for(var I=1;I<arguments.length;I++){var k=arguments[I]!=null?arguments[I]:{};I%2?a(Object(k),!0).forEach(function(x){S(w,x,k[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(x){Object.defineProperty(w,x,Object.getOwnPropertyDescriptor(k,x))})}return w}function l(w,I){if(!(w instanceof I))throw new TypeError("Cannot call a class as a function")}function c(w,I){for(var k=0;k<I.length;k++){var x=I[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}function d(w,I,k){return I&&c(w.prototype,I),k&&c(w,k),Object.defineProperty(w,"prototype",{writable:!1}),w}function f(w,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(I&&I.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),I&&p(w,I)}function p(w,I){return p=Object.setPrototypeOf||function(x,L){return x.__proto__=L,x},p(w,I)}function g(w){var I=b();return function(){var x=C(w),L;if(I){var N=C(this).constructor;L=Reflect.construct(x,arguments,N)}else L=x.apply(this,arguments);return y(this,L)}}function y(w,I){if(I&&(t(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(w)}function v(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(w){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},C(w)}function S(w,I,k){return I in w?Object.defineProperty(w,I,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[I]=k,w}var R=function(w){f(k,w);var I=g(k);function k(x){var L;l(this,k),L=I.call(this,x),S(v(L),"text",void 0),S(v(L),"html",void 0),S(v(L),"renderings",void 0);var N=i.M_MESSAGE.findIn(L.wireContent),D=i.M_TEXT.findIn(L.wireContent),U=i.M_HTML.findIn(L.wireContent);if((0,n.isProvided)(N)){if(!Array.isArray(N))throw new r.InvalidEventError("m.message contents must be an array");var j=N.find(function(Z){return!(0,n.isProvided)(Z.mimetype)||Z.mimetype==="text/plain"}),$=N.find(function(Z){return Z.mimetype==="text/html"});if(!j)throw new r.InvalidEventError("m.message is missing a plain text representation");L.text=j.body,L.html=$==null?void 0:$.body,L.renderings=N}else if((0,n.isOptionalAString)(D))L.text=D,L.html=U,L.renderings=[{body:D,mimetype:"text/plain"}],L.html&&L.renderings.push({body:L.html,mimetype:"text/html"});else throw new r.InvalidEventError("Missing textual representation for event");return L}return d(k,[{key:"isEmote",get:function(){return i.M_EMOTE.matches(this.wireFormat.type)||(0,n.isProvided)(i.M_EMOTE.findIn(this.wireFormat.content))}},{key:"isNotice",get:function(){return i.M_NOTICE.matches(this.wireFormat.type)||(0,n.isProvided)(i.M_NOTICE.findIn(this.wireFormat.content))}},{key:"isEquivalentTo",value:function(L){return(0,s.isEventTypeSame)(L,i.M_MESSAGE)}},{key:"serializeMMessageOnly",value:function(){var L=S({},i.M_MESSAGE.name,this.renderings);if(this.renderings.length===1){var N=this.renderings[0].mimetype;(N===void 0||N==="text/plain")&&(L=S({},i.M_TEXT.name,this.renderings[0].body))}return L}},{key:"serialize",value:function(){var L;return{type:"m.room.message",content:o(o({},this.serializeMMessageOnly()),{},{body:this.text,msgtype:"m.text",format:this.html?"org.matrix.custom.html":void 0,formatted_body:(L=this.html)!==null&&L!==void 0?L:void 0})}}}],[{key:"from",value:function(L,N){var D;return new k({type:i.M_MESSAGE.name,content:(D={},S(D,i.M_TEXT.name,L),S(D,i.M_HTML.name,N),D)})}}]),k}(e.ExtensibleEvent);return a3.MessageEvent=R,a3}var c3={},RD;function PI(){if(RD)return c3;RD=1;function t(S){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},t(S)}Object.defineProperty(c3,"__esModule",{value:!0}),c3.NoticeEvent=void 0;var e=Fh(),n=Kl(),r=Uh();function i(S,R,w){return R in S?Object.defineProperty(S,R,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[R]=w,S}function s(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}function a(S,R){for(var w=0;w<R.length;w++){var I=R[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}function o(S,R,w){return R&&a(S.prototype,R),w&&a(S,w),Object.defineProperty(S,"prototype",{writable:!1}),S}function l(){return typeof Reflect<"u"&&Reflect.get?l=Reflect.get:l=function(R,w,I){var k=c(R,w);if(k){var x=Object.getOwnPropertyDescriptor(k,w);return x.get?x.get.call(arguments.length<3?R:I):x.value}},l.apply(this,arguments)}function c(S,R){for(;!Object.prototype.hasOwnProperty.call(S,R)&&(S=b(S),S!==null););return S}function d(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),R&&f(S,R)}function f(S,R){return f=Object.setPrototypeOf||function(I,k){return I.__proto__=k,I},f(S,R)}function p(S){var R=v();return function(){var I=b(S),k;if(R){var x=b(this).constructor;k=Reflect.construct(I,arguments,x)}else k=I.apply(this,arguments);return g(this,k)}}function g(S,R){if(R&&(t(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(S)}function y(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(S){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},b(S)}var C=function(S){d(w,S);var R=p(w);function w(I){return s(this,w),R.call(this,I)}return o(w,[{key:"isNotice",get:function(){return!0}},{key:"isEquivalentTo",value:function(k){return(0,r.isEventTypeSame)(k,n.M_NOTICE)||l(b(w.prototype),"isEquivalentTo",this).call(this,k)}},{key:"serialize",value:function(){var k=l(b(w.prototype),"serialize",this).call(this);return k.content.msgtype="m.notice",k}}],[{key:"from",value:function(k,x){var L;return new w({type:n.M_NOTICE.name,content:(L={},i(L,n.M_TEXT.name,k),i(L,n.M_HTML.name,x),L)})}}]),w}(e.MessageEvent);return c3.NoticeEvent=C,c3}var u3={},ID;function LI(){if(ID)return u3;ID=1;function t(S){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},t(S)}Object.defineProperty(u3,"__esModule",{value:!0}),u3.EmoteEvent=void 0;var e=Fh(),n=Kl(),r=Uh();function i(S,R,w){return R in S?Object.defineProperty(S,R,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[R]=w,S}function s(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}function a(S,R){for(var w=0;w<R.length;w++){var I=R[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}function o(S,R,w){return R&&a(S.prototype,R),w&&a(S,w),Object.defineProperty(S,"prototype",{writable:!1}),S}function l(){return typeof Reflect<"u"&&Reflect.get?l=Reflect.get:l=function(R,w,I){var k=c(R,w);if(k){var x=Object.getOwnPropertyDescriptor(k,w);return x.get?x.get.call(arguments.length<3?R:I):x.value}},l.apply(this,arguments)}function c(S,R){for(;!Object.prototype.hasOwnProperty.call(S,R)&&(S=b(S),S!==null););return S}function d(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),R&&f(S,R)}function f(S,R){return f=Object.setPrototypeOf||function(I,k){return I.__proto__=k,I},f(S,R)}function p(S){var R=v();return function(){var I=b(S),k;if(R){var x=b(this).constructor;k=Reflect.construct(I,arguments,x)}else k=I.apply(this,arguments);return g(this,k)}}function g(S,R){if(R&&(t(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(S)}function y(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(S){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},b(S)}var C=function(S){d(w,S);var R=p(w);function w(I){return s(this,w),R.call(this,I)}return o(w,[{key:"isEmote",get:function(){return!0}},{key:"isEquivalentTo",value:function(k){return(0,r.isEventTypeSame)(k,n.M_EMOTE)||l(b(w.prototype),"isEquivalentTo",this).call(this,k)}},{key:"serialize",value:function(){var k=l(b(w.prototype),"serialize",this).call(this);return k.content.msgtype="m.emote",k}}],[{key:"from",value:function(k,x){var L;return new w({type:n.M_EMOTE.name,content:(L={},i(L,n.M_TEXT.name,k),i(L,n.M_HTML.name,x),L)})}}]),w}(e.MessageEvent);return u3.EmoteEvent=C,u3}var xD;function zK(){if(xD)return Tf;xD=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.LEGACY_M_ROOM_MESSAGE=void 0,Tf.parseMRoomMessage=c;var t=Fh(),e=PI(),n=LI(),r=Dm(),i=Kl();function s(d,f){var p=Object.keys(d);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(d);f&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(d,y).enumerable})),p.push.apply(p,g)}return p}function a(d){for(var f=1;f<arguments.length;f++){var p=arguments[f]!=null?arguments[f]:{};f%2?s(Object(p),!0).forEach(function(g){o(d,g,p[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(p)):s(Object(p)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(p,g))})}return d}function o(d,f,p){return f in d?Object.defineProperty(d,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[f]=p,d}var l=new r.NamespacedValue("m.room.message");Tf.LEGACY_M_ROOM_MESSAGE=l;function c(d){var f,p,g;if(i.M_MESSAGE.findIn(d.content)||i.M_TEXT.findIn(d.content))return new t.MessageEvent(d);var y=(f=d.content)===null||f===void 0?void 0:f.msgtype,v=(p=d.content)===null||p===void 0?void 0:p.body,b=((g=d.content)===null||g===void 0?void 0:g.format)==="org.matrix.custom.html"?d.content.formatted_body:null;if(y==="m.text"){var C;return new t.MessageEvent(a(a({},d),{},{content:a(a({},d.content),{},(C={},o(C,i.M_TEXT.name,v),o(C,i.M_HTML.name,b),C))}))}else if(y==="m.notice"){var S;return new e.NoticeEvent(a(a({},d),{},{content:a(a({},d.content),{},(S={},o(S,i.M_TEXT.name,v),o(S,i.M_HTML.name,b),S))}))}else if(y==="m.emote"){var R;return new n.EmoteEvent(a(a({},d),{},{content:a(a({},d.content),{},(R={},o(R,i.M_TEXT.name,v),o(R,i.M_HTML.name,b),R))}))}else return null}return Tf}var Y8={},MD;function WK(){if(MD)return Y8;MD=1,Object.defineProperty(Y8,"__esModule",{value:!0}),Y8.parseMMessage=i;var t=Fh(),e=Kl(),n=LI(),r=PI();function i(s){return e.M_EMOTE.matches(s.type)?new n.EmoteEvent(s):e.M_NOTICE.matches(s.type)?new r.NoticeEvent(s):new t.MessageEvent(s)}return Y8}var zs={},PD;function Um(){if(PD)return zs;PD=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.M_POLL_START=zs.M_POLL_RESPONSE=zs.M_POLL_KIND_UNDISCLOSED=zs.M_POLL_KIND_DISCLOSED=zs.M_POLL_END=void 0;var t=Dm(),e=new t.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed");zs.M_POLL_KIND_DISCLOSED=e;var n=new t.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed");zs.M_POLL_KIND_UNDISCLOSED=n;var r=new t.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start");zs.M_POLL_START=r;var i=new t.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response");zs.M_POLL_RESPONSE=i;var s=new t.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end");return zs.M_POLL_END=s,zs}var J8={},P1={},LD;function YK(){if(LD)return P1;LD=1;function t(V){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},t(V)}Object.defineProperty(P1,"__esModule",{value:!0}),P1.PollStartEvent=P1.PollAnswerSubevent=void 0;var e=Um(),n=Fh(),r=Kl(),i=Nm(),s=Dm(),a=Uh(),o=Yg();function l(V){return p(V)||f(V)||d(V)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(V,z){if(V){if(typeof V=="string")return g(V,z);var K=Object.prototype.toString.call(V).slice(8,-1);if(K==="Object"&&V.constructor&&(K=V.constructor.name),K==="Map"||K==="Set")return Array.from(V);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return g(V,z)}}function f(V){if(typeof Symbol<"u"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}function p(V){if(Array.isArray(V))return g(V)}function g(V,z){(z==null||z>V.length)&&(z=V.length);for(var K=0,q=new Array(z);K<z;K++)q[K]=V[K];return q}function y(V,z){var K=Object.keys(V);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(V);z&&(q=q.filter(function(G){return Object.getOwnPropertyDescriptor(V,G).enumerable})),K.push.apply(K,q)}return K}function v(V){for(var z=1;z<arguments.length;z++){var K=arguments[z]!=null?arguments[z]:{};z%2?y(Object(K),!0).forEach(function(q){D(V,q,K[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(K)):y(Object(K)).forEach(function(q){Object.defineProperty(V,q,Object.getOwnPropertyDescriptor(K,q))})}return V}function b(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")}function C(V,z){for(var K=0;K<z.length;K++){var q=z[K];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(V,q.key,q)}}function S(V,z,K){return z&&C(V.prototype,z),K&&C(V,K),Object.defineProperty(V,"prototype",{writable:!1}),V}function R(V,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(z&&z.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),z&&w(V,z)}function w(V,z){return w=Object.setPrototypeOf||function(q,G){return q.__proto__=G,q},w(V,z)}function I(V){var z=L();return function(){var q=N(V),G;if(z){var J=N(this).constructor;G=Reflect.construct(q,arguments,J)}else G=q.apply(this,arguments);return k(this,G)}}function k(V,z){if(z&&(t(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(V)}function x(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(V){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)},N(V)}function D(V,z,K){return z in V?Object.defineProperty(V,z,{value:K,enumerable:!0,configurable:!0,writable:!0}):V[z]=K,V}var U=function(V){R(K,V);var z=I(K);function K(q){var G;b(this,K),G=z.call(this,q),D(x(G),"id",void 0);var J=q.content.id;if(!J||typeof J!="string")throw new i.InvalidEventError("Answer ID must be a non-empty string");return G.id=J,G}return S(K,[{key:"serialize",value:function(){return{type:"org.matrix.sdk.poll.answer",content:v({id:this.id},this.serializeMMessageOnly())}}}],[{key:"from",value:function(G,J){return new K({type:"org.matrix.sdk.poll.answer",content:D({id:G},r.M_TEXT.name,J)})}}]),K}(n.MessageEvent);P1.PollAnswerSubevent=U;var j=function(V){R(K,V);var z=I(K);function K(q){var G;b(this,K),G=z.call(this,q),D(x(G),"question",void 0),D(x(G),"kind",void 0),D(x(G),"rawKind",void 0),D(x(G),"maxSelections",void 0),D(x(G),"answers",void 0);var J=e.M_POLL_START.findIn(G.wireContent);if(!J.question)throw new i.InvalidEventError("A question is required");if(G.question=new n.MessageEvent({type:"org.matrix.sdk.poll.question",content:J.question}),G.rawKind=J.kind,e.M_POLL_KIND_DISCLOSED.matches(G.rawKind)?G.kind=e.M_POLL_KIND_DISCLOSED:G.kind=e.M_POLL_KIND_UNDISCLOSED,G.maxSelections=Number.isFinite(J.max_selections)&&J.max_selections>0?J.max_selections:1,!Array.isArray(J.answers))throw new i.InvalidEventError("Poll answers must be an array");var B=J.answers.slice(0,20).map(function(Q){return new U({type:"org.matrix.sdk.poll.answer",content:Q})});if(B.length<=0)throw new i.InvalidEventError("No answers available");return G.answers=B,G}return S(K,[{key:"isEquivalentTo",value:function(G){return(0,a.isEventTypeSame)(G,e.M_POLL_START)}},{key:"serialize",value:function(){var G;return{type:e.M_POLL_START.name,content:(G={},D(G,e.M_POLL_START.name,{question:this.question.serialize().content,kind:this.rawKind,max_selections:this.maxSelections,answers:this.answers.map(function(J){return J.serialize().content})}),D(G,r.M_TEXT.name,"".concat(this.question.text,`
`).concat(this.answers.map(function(J,B){return"".concat(B+1,". ").concat(J.text)}).join(`
`))),G)}}}],[{key:"from",value:function(G,J,B){var Q,pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return new K({type:e.M_POLL_START.name,content:(Q={},D(Q,r.M_TEXT.name,G),D(Q,e.M_POLL_START.name,{question:D({},r.M_TEXT.name,G),kind:B instanceof s.NamespacedValue?B.name:B,max_selections:pe,answers:J.map(function(ve){return D({id:Z()},r.M_TEXT.name,ve)})}),Q)})}}]),K}(o.ExtensibleEvent);P1.PollStartEvent=j;var $="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function Z(){return l(Array(16)).map(function(){return $.charAt(Math.floor(Math.random()*$.length))}).join("")}return P1}var d3={},h3={},OD;function OI(){if(OD)return h3;OD=1,Object.defineProperty(h3,"__esModule",{value:!0}),h3.REFERENCE_RELATION=void 0;var t=Dm(),e=new t.NamespacedValue("m.reference");return h3.REFERENCE_RELATION=e,h3}var AD;function JK(){if(AD)return d3;AD=1;function t(S){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},t(S)}Object.defineProperty(d3,"__esModule",{value:!0}),d3.PollResponseEvent=void 0;var e=Yg(),n=Um(),r=Nm(),i=OI(),s=Uh();function a(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}function o(S,R){for(var w=0;w<R.length;w++){var I=R[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}function l(S,R,w){return R&&o(S.prototype,R),w&&o(S,w),Object.defineProperty(S,"prototype",{writable:!1}),S}function c(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),R&&d(S,R)}function d(S,R){return d=Object.setPrototypeOf||function(I,k){return I.__proto__=k,I},d(S,R)}function f(S){var R=y();return function(){var I=v(S),k;if(R){var x=v(this).constructor;k=Reflect.construct(I,arguments,x)}else k=I.apply(this,arguments);return p(this,k)}}function p(S,R){if(R&&(t(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(S)}function g(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(S){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},v(S)}function b(S,R,w){return R in S?Object.defineProperty(S,R,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[R]=w,S}var C=function(S){c(w,S);var R=f(w);function w(I){var k;a(this,w),k=R.call(this,I),b(g(k),"internalAnswerIds",void 0),b(g(k),"internalSpoiled",void 0),b(g(k),"pollEventId",void 0);var x=k.wireContent["m.relates_to"];if(!i.REFERENCE_RELATION.matches(x==null?void 0:x.rel_type)||typeof(x==null?void 0:x.event_id)!="string")throw new r.InvalidEventError("Relationship must be a reference to an event");return k.pollEventId=x.event_id,k.validateAgainst(null),k}return l(w,[{key:"answerIds",get:function(){return this.internalAnswerIds}},{key:"spoiled",get:function(){return this.internalSpoiled}},{key:"validateAgainst",value:function(k){var x=n.M_POLL_RESPONSE.findIn(this.wireContent);if(!Array.isArray(x==null?void 0:x.answers)){this.internalSpoiled=!0,this.internalAnswerIds=[];return}var L=x.answers;if(L.some(function(N){return typeof N!="string"})||L.length===0){this.internalSpoiled=!0,this.internalAnswerIds=[];return}if(k){if(L.some(function(N){return!k.answers.some(function(D){return D.id===N})})){this.internalSpoiled=!0,this.internalAnswerIds=[];return}L=L.slice(0,k.maxSelections)}this.internalAnswerIds=L,this.internalSpoiled=!1}},{key:"isEquivalentTo",value:function(k){return(0,s.isEventTypeSame)(k,n.M_POLL_RESPONSE)}},{key:"serialize",value:function(){return{type:n.M_POLL_RESPONSE.name,content:b({"m.relates_to":{rel_type:i.REFERENCE_RELATION.name,event_id:this.pollEventId}},n.M_POLL_RESPONSE.name,{answers:this.spoiled?void 0:this.answerIds})}}}],[{key:"from",value:function(k,x){return new w({type:n.M_POLL_RESPONSE.name,content:b({"m.relates_to":{rel_type:i.REFERENCE_RELATION.name,event_id:x}},n.M_POLL_RESPONSE.name,{answers:k})})}}]),w}(e.ExtensibleEvent);return d3.PollResponseEvent=C,d3}var f3={},ND;function QK(){if(ND)return f3;ND=1;function t(k){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},t(k)}Object.defineProperty(f3,"__esModule",{value:!0}),f3.PollEndEvent=void 0;var e=Um(),n=Nm(),r=OI(),i=Fh(),s=Kl(),a=Uh(),o=Yg();function l(k,x){var L=Object.keys(k);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(k);x&&(N=N.filter(function(D){return Object.getOwnPropertyDescriptor(k,D).enumerable})),L.push.apply(L,N)}return L}function c(k){for(var x=1;x<arguments.length;x++){var L=arguments[x]!=null?arguments[x]:{};x%2?l(Object(L),!0).forEach(function(N){w(k,N,L[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(L)):l(Object(L)).forEach(function(N){Object.defineProperty(k,N,Object.getOwnPropertyDescriptor(L,N))})}return k}function d(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function f(k,x){for(var L=0;L<x.length;L++){var N=x[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(k,N.key,N)}}function p(k,x,L){return x&&f(k.prototype,x),L&&f(k,L),Object.defineProperty(k,"prototype",{writable:!1}),k}function g(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),x&&y(k,x)}function y(k,x){return y=Object.setPrototypeOf||function(N,D){return N.__proto__=D,N},y(k,x)}function v(k){var x=S();return function(){var N=R(k),D;if(x){var U=R(this).constructor;D=Reflect.construct(N,arguments,U)}else D=N.apply(this,arguments);return b(this,D)}}function b(k,x){if(x&&(t(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(k)}function C(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(k){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},R(k)}function w(k,x,L){return x in k?Object.defineProperty(k,x,{value:L,enumerable:!0,configurable:!0,writable:!0}):k[x]=L,k}var I=function(k){g(L,k);var x=v(L);function L(N){var D;d(this,L),D=x.call(this,N),w(C(D),"pollEventId",void 0),w(C(D),"closingMessage",void 0);var U=D.wireContent["m.relates_to"];if(!r.REFERENCE_RELATION.matches(U==null?void 0:U.rel_type)||typeof(U==null?void 0:U.event_id)!="string")throw new n.InvalidEventError("Relationship must be a reference to an event");return D.pollEventId=U.event_id,D.closingMessage=new i.MessageEvent(D.wireFormat),D}return p(L,[{key:"isEquivalentTo",value:function(D){return(0,a.isEventTypeSame)(D,e.M_POLL_END)}},{key:"serialize",value:function(){return{type:e.M_POLL_END.name,content:c(w({"m.relates_to":{rel_type:r.REFERENCE_RELATION.name,event_id:this.pollEventId}},e.M_POLL_END.name,{}),this.closingMessage.serialize().content)}}}],[{key:"from",value:function(D,U){var j;return new L({type:e.M_POLL_END.name,content:(j={"m.relates_to":{rel_type:r.REFERENCE_RELATION.name,event_id:D}},w(j,e.M_POLL_END.name,{}),w(j,s.M_TEXT.name,U),j)})}}]),L}(o.ExtensibleEvent);return f3.PollEndEvent=I,f3}var DD;function XK(){if(DD)return J8;DD=1,Object.defineProperty(J8,"__esModule",{value:!0}),J8.parseMPoll=i;var t=Um(),e=YK(),n=JK(),r=QK();function i(s){return t.M_POLL_START.matches(s.type)?new e.PollStartEvent(s):t.M_POLL_RESPONSE.matches(s.type)?new n.PollResponseEvent(s):t.M_POLL_END.matches(s.type)?new r.PollEndEvent(s):null}return J8}var UD;function $1e(){if(UD)return r3;UD=1,Object.defineProperty(r3,"__esModule",{value:!0}),r3.ExtensibleEvents=void 0;var t=KK(),e=Nm(),n=zK(),r=WK(),i=Kl(),s=Um(),a=XK();function o(v,b){var C=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!C){if(Array.isArray(v)||(C=l(v))||b){C&&(v=C);var S=0,R=function(){};return{s:R,n:function(){return S>=v.length?{done:!0}:{done:!1,value:v[S++]}},e:function(L){throw L},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,I=!1,k;return{s:function(){C=C.call(v)},n:function(){var L=C.next();return w=L.done,L},e:function(L){I=!0,k=L},f:function(){try{!w&&C.return!=null&&C.return()}finally{if(I)throw k}}}}function l(v,b){if(v){if(typeof v=="string")return c(v,b);var C=Object.prototype.toString.call(v).slice(8,-1);if(C==="Object"&&v.constructor&&(C=v.constructor.name),C==="Map"||C==="Set")return Array.from(v);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return c(v,b)}}function c(v,b){(b==null||b>v.length)&&(b=v.length);for(var C=0,S=new Array(b);C<b;C++)S[C]=v[C];return S}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function f(v,b){for(var C=0;C<b.length;C++){var S=b[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function p(v,b,C){return b&&f(v.prototype,b),C&&f(v,C),Object.defineProperty(v,"prototype",{writable:!1}),v}function g(v,b,C){return b in v?Object.defineProperty(v,b,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[b]=C,v}var y=function(){function v(){d(this,v),g(this,"interpreters",new t.NamespacedMap([[n.LEGACY_M_ROOM_MESSAGE,n.parseMRoomMessage],[i.M_MESSAGE,r.parseMMessage],[i.M_EMOTE,r.parseMMessage],[i.M_NOTICE,r.parseMMessage],[s.M_POLL_START,a.parseMPoll],[s.M_POLL_RESPONSE,a.parseMPoll],[s.M_POLL_END,a.parseMPoll]])),g(this,"_unknownInterpretOrder",[i.M_MESSAGE])}return p(v,[{key:"unknownInterpretOrder",get:function(){var C;return(C=this._unknownInterpretOrder)!==null&&C!==void 0?C:[]},set:function(C){this._unknownInterpretOrder=C}},{key:"registerInterpreter",value:function(C,S){this.interpreters.set(C,S)}},{key:"parse",value:function(C){try{if(this.interpreters.hasNamespaced(C.type))return this.interpreters.getNamespaced(C.type)(C);var S=o(this.unknownInterpretOrder),R;try{for(S.s();!(R=S.n()).done;){var w=R.value;if(this.interpreters.has(w)){var I=this.interpreters.get(w)(C);if(I)return I}}}catch(k){S.e(k)}finally{S.f()}return null}catch(k){if(k instanceof e.InvalidEventError)return null;throw k}}}],[{key:"defaultInstance",get:function(){return v._defaultInstance}},{key:"unknownInterpretOrder",get:function(){return v.defaultInstance.unknownInterpretOrder},set:function(C){v.defaultInstance.unknownInterpretOrder=C}},{key:"registerInterpreter",value:function(C,S){v.defaultInstance.registerInterpreter(C,S)}},{key:"parse",value:function(C){return v.defaultInstance.parse(C)}}]),v}();return r3.ExtensibleEvents=y,g(y,"_defaultInstance",new y),r3}var pb={},FD;function V1e(){return FD||(FD=1,Object.defineProperty(pb,"__esModule",{value:!0})),pb}var L1={},jD;function B1e(){if(jD)return L1;jD=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.LegacyMsgType=void 0,L1.isEventLike=n;var t=Kl(),e;L1.LegacyMsgType=e,function(r){r.Text="m.text",r.Notice="m.notice",r.Emote="m.emote"}(e||(L1.LegacyMsgType=e={}));function n(r,i){var s=r.content;return i===e.Text?t.M_MESSAGE.matches(r.type)||r.type==="m.room.message"&&(s==null?void 0:s.msgtype)==="m.text":i===e.Emote?t.M_EMOTE.matches(r.type)||r.type==="m.room.message"&&(s==null?void 0:s.msgtype)==="m.emote":i===e.Notice?t.M_NOTICE.matches(r.type)||r.type==="m.room.message"&&(s==null?void 0:s.msgtype)==="m.notice":!1}return L1}var HD;function q1e(){return HD||(HD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=$1e();Object.keys(e).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===e[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return e[k]}})});var n=V1e();Object.keys(n).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===n[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return n[k]}})});var r=Nm();Object.keys(r).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===r[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return r[k]}})});var i=Dm();Object.keys(i).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===i[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return i[k]}})});var s=KK();Object.keys(s).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===s[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return s[k]}})});var a=ZK();Object.keys(a).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===a[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return a[k]}})});var o=B1e();Object.keys(o).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===o[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return o[k]}})});var l=Uh();Object.keys(l).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===l[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return l[k]}})});var c=zK();Object.keys(c).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===c[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return c[k]}})});var d=WK();Object.keys(d).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===d[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return d[k]}})});var f=XK();Object.keys(f).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===f[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return f[k]}})});var p=OI();Object.keys(p).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===p[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return p[k]}})});var g=Yg();Object.keys(g).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===g[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return g[k]}})});var y=Kl();Object.keys(y).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===y[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return y[k]}})});var v=Fh();Object.keys(v).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===v[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return v[k]}})});var b=LI();Object.keys(b).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===b[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return b[k]}})});var C=PI();Object.keys(C).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===C[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return C[k]}})});var S=Um();Object.keys(S).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===S[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return S[k]}})});var R=YK();Object.keys(R).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===R[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return R[k]}})});var w=JK();Object.keys(w).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===w[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return w[k]}})});var I=QK();Object.keys(I).forEach(function(k){k==="default"||k==="__esModule"||k in t&&t[k]===I[k]||Object.defineProperty(t,k,{enumerable:!0,get:function(){return I[k]}})})}(mb)),mb}var $s=q1e();const G1e="modulepreload",K1e=function(t){return"/"+t},$D={},z0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(n.map(c=>{if(c=K1e(c),c in $D)return;$D[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":G1e,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Z1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function z1e(t,e){if(t==null)return{};var n,r,i=Z1e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Ei=function(t){return t.DisplayName="User.displayName",t.AvatarUrl="User.avatarUrl",t.Presence="User.presence",t.CurrentlyActive="User.currentlyActive",t.LastPresenceTs="User.lastPresenceTs",t}({});class Gc extends Un{constructor(e){super(),this.userId=e,P(this,"modified",-1),P(this,"displayName",void 0),P(this,"rawDisplayName",void 0),P(this,"avatarUrl",void 0),P(this,"presenceStatusMsg",void 0),P(this,"presence","offline"),P(this,"lastActiveAgo",0),P(this,"lastPresenceTs",0),P(this,"currentlyActive",!1),P(this,"events",{}),this.displayName=e,this.rawDisplayName=e,this.updateModifiedTime()}static createUser(e,n){var r=new Gc(e);return n.reEmitter.reEmit(r,[Ei.AvatarUrl,Ei.DisplayName,Ei.Presence,Ei.CurrentlyActive,Ei.LastPresenceTs]),r}setPresenceEvent(e){if(e.getType()==="m.presence"){var n=this.events.presence===null;this.events.presence=e;var r=[];(e.getContent().presence!==this.presence||n)&&r.push(Ei.Presence),e.getContent().avatar_url&&e.getContent().avatar_url!==this.avatarUrl&&r.push(Ei.AvatarUrl),e.getContent().displayname&&e.getContent().displayname!==this.displayName&&r.push(Ei.DisplayName),e.getContent().currently_active!==void 0&&e.getContent().currently_active!==this.currentlyActive&&r.push(Ei.CurrentlyActive),this.presence=e.getContent().presence,r.push(Ei.LastPresenceTs),e.getContent().status_msg&&(this.presenceStatusMsg=e.getContent().status_msg),e.getContent().displayname&&(this.displayName=e.getContent().displayname),e.getContent().avatar_url&&(this.avatarUrl=e.getContent().avatar_url),this.lastActiveAgo=e.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=e.getContent().currently_active,this.updateModifiedTime();for(var i of r)this.emit(i,e,this)}}setDisplayName(e){var n=this.displayName;this.displayName=e,e!==n&&this.updateModifiedTime()}setRawDisplayName(e){this.rawDisplayName=e}setAvatarUrl(e){var n=this.avatarUrl;this.avatarUrl=e,e!==n&&this.updateModifiedTime()}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getLastActiveTs(){return this.lastPresenceTs-this.lastActiveAgo}}var Ct=function(t){return t.Backward="b",t.Forward="f",t}({});class Me{static setEventMetadata(e,n,r){e.setMetadata(n,r)}constructor(e){var n,r;this.eventTimelineSet=e,P(this,"roomId",void 0),P(this,"name",void 0),P(this,"events",[]),P(this,"baseIndex",0),P(this,"startState",void 0),P(this,"endState",void 0),P(this,"startToken",null),P(this,"endToken",null),P(this,"prevTimeline",null),P(this,"nextTimeline",null),P(this,"paginationRequests",{[Ct.Backward]:null,[Ct.Forward]:null}),this.roomId=(n=(r=e.room)===null||r===void 0?void 0:r.roomId)!==null&&n!==void 0?n:null,this.roomId&&(this.startState=new tg(this.roomId),this.endState=new tg(this.roomId)),this.paginationRequests={b:null,f:null},this.name=this.roomId+":"+new Date().toISOString()}initialiseState(e){var n,r,{timelineWasEmpty:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.events.length>0)throw new Error("Cannot initialise state after events are added");(n=this.startState)===null||n===void 0||n.setStateEvents(e,{timelineWasEmpty:i}),(r=this.endState)===null||r===void 0||r.setStateEvents(e,{timelineWasEmpty:i})}forkLive(e){var n=this.getState(e),r=new Me(this.eventTimelineSet);return r.startState=n==null?void 0:n.clone(),r.endState=n,this.endState=n==null?void 0:n.clone(),r}fork(e){var n=this.getState(e),r=new Me(this.eventTimelineSet);return r.startState=n==null?void 0:n.clone(),r.endState=n==null?void 0:n.clone(),r}getRoomId(){return this.roomId}getFilter(){return this.eventTimelineSet.getFilter()}getTimelineSet(){return this.eventTimelineSet}getBaseIndex(){return this.baseIndex}getEvents(){return this.events}getState(e){if(e==Me.BACKWARDS)return this.startState;if(e==Me.FORWARDS)return this.endState;throw new Error("Invalid direction '"+e+"'")}getPaginationToken(e){return this.roomId?this.getState(e).paginationToken:e===Ct.Backward?this.startToken:this.endToken}setPaginationToken(e,n){this.roomId?this.getState(n).paginationToken=e:n===Ct.Backward?this.startToken=e:this.endToken=e}getNeighbouringTimeline(e){if(e==Me.BACKWARDS)return this.prevTimeline;if(e==Me.FORWARDS)return this.nextTimeline;throw new Error("Invalid direction '"+e+"'")}setNeighbouringTimeline(e,n){if(this.getNeighbouringTimeline(n))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+n+")");if(n==Me.BACKWARDS)this.prevTimeline=e;else if(n==Me.FORWARDS)this.nextTimeline=e;else throw new Error("Invalid direction '"+n+"'");this.setPaginationToken(null,n)}addEvent(e,n){var{toStartOfTimeline:r,roomState:i,timelineWasEmpty:s,addToState:a}=n;i||(i=r?this.startState:this.endState);var o=this.getTimelineSet();if(o.room&&(Me.setEventMetadata(e,i,r),a&&e.isState()&&o.room.getUnfilteredTimelineSet()===o)){var l;(l=i)===null||l===void 0||l.setStateEvents([e],{timelineWasEmpty:s}),(!e.sender||e.getType()===ee.RoomMember&&!r)&&Me.setEventMetadata(e,i,r)}var c;r?c=0:c=this.events.length,this.events.splice(c,0,e),r&&this.baseIndex++}insertEvent(e,n,r,i){var s=this.getTimelineSet();s.room&&(Me.setEventMetadata(e,r,!1),i&&e.isState()&&s.room.getUnfilteredTimelineSet()===s&&(r.setStateEvents([e],{}),(!e.sender||e.getType()===ee.RoomMember)&&Me.setEventMetadata(e,r,!1))),this.events.splice(n,0,e)}removeEvent(e){for(var n=this.events.length-1;n>=0;n--){var r=this.events[n];if(r.getId()==e)return this.events.splice(n,1),n<this.baseIndex&&this.baseIndex--,r}return null}toString(){return this.name}}P(Me,"BACKWARDS",Ct.Backward);P(Me,"FORWARDS",Ct.Forward);var y7=function(t){return t.Add="Relations.add",t.Remove="Relations.remove",t.Redaction="Relations.redaction",t}({}),W1e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return[n,...r].includes(e)};class AI extends Un{constructor(e,n,r,i){var s;super(),s=this,this.relationType=e,this.eventType=n,this.altEventTypes=i,P(this,"relationEventIds",new Set),P(this,"relations",new Set),P(this,"annotationsByKey",{}),P(this,"annotationsBySender",{}),P(this,"sortedAnnotationsByKey",[]),P(this,"targetEvent",null),P(this,"creationEmitted",!1),P(this,"client",void 0),P(this,"onEventStatus",(a,o)=>{if(!a.isSending()){a.removeListener($t.Status,this.onEventStatus);return}o===lt.CANCELLED&&(a.removeListener($t.Status,this.onEventStatus),this.removeEvent(a))}),P(this,"onBeforeRedaction",function(){var a=F(function*(o){if(s.relations.has(o)){if(s.relations.delete(o),s.relationType===Sn.Annotation)s.removeAnnotationFromAggregation(o);else if(s.relationType===Sn.Replace&&s.targetEvent&&!s.targetEvent.isState()){var l=yield s.getLastReplacement();s.targetEvent.makeReplaced(l)}o.removeListener($t.BeforeRedaction,s.onBeforeRedaction),s.emit(y7.Redaction,o)}});return function(o){return a.apply(this,arguments)}}()),this.client=r instanceof E9?r.client:r}addEvent(e){var n=this;return F(function*(){if(!n.relationEventIds.has(e.getId())){var r=e.getRelation();if(!r){A.error("Event must have relation info");return}var i=r.rel_type,s=e.getType();if(n.relationType!==i||!W1e(s,n.eventType,n.altEventTypes)){A.error("Event relation info doesn't match this container");return}if(e.isSending()&&e.on($t.Status,n.onEventStatus),n.relations.add(e),n.relationEventIds.add(e.getId()),n.relationType===Sn.Annotation)n.addAnnotationToAggregation(e);else if(n.relationType===Sn.Replace&&n.targetEvent&&!n.targetEvent.isState()){var a=yield n.getLastReplacement();n.targetEvent.makeReplaced(a)}e.on($t.BeforeRedaction,n.onBeforeRedaction),n.emit(y7.Add,e),n.maybeEmitCreated()}})()}removeEvent(e){var n=this;return F(function*(){if(n.relations.has(e)){if(n.relations.delete(e),n.relationType===Sn.Annotation)n.removeAnnotationFromAggregation(e);else if(n.relationType===Sn.Replace&&n.targetEvent&&!n.targetEvent.isState()){var r=yield n.getLastReplacement();n.targetEvent.makeReplaced(r)}n.emit(y7.Remove,e)}})()}getRelations(){return[...this.relations]}addAnnotationToAggregation(e){var n,{key:r}=(n=e.getRelation())!==null&&n!==void 0?n:{};if(r){var i=this.annotationsByKey[r];i||(i=this.annotationsByKey[r]=new Set,this.sortedAnnotationsByKey.push([r,i])),i.add(e),this.sortedAnnotationsByKey.sort((o,l)=>{var c=o[1],d=l[1];return d.size-c.size});var s=e.getSender(),a=this.annotationsBySender[s];a||(a=this.annotationsBySender[s]=new Set),a.add(e)}}removeAnnotationFromAggregation(e){var n,{key:r}=(n=e.getRelation())!==null&&n!==void 0?n:{};if(r){var i=this.annotationsByKey[r];i&&(i.delete(e),this.sortedAnnotationsByKey.sort((o,l)=>{var c=o[1],d=l[1];return d.size-c.size}));var s=e.getSender(),a=this.annotationsBySender[s];a&&a.delete(e)}}getSortedAnnotationsByKey(){return this.relationType!==Sn.Annotation?null:this.sortedAnnotationsByKey}getAnnotationsBySender(){return this.relationType!==Sn.Annotation?null:this.annotationsBySender}getLastReplacement(){var e=this;return F(function*(){if(e.relationType!==Sn.Replace||!e.targetEvent)return null;var n=e.targetEvent.getServerAggregatedRelation(Sn.Replace),r=n==null?void 0:n.origin_server_ts,i=e.getRelations().reduce((s,a)=>a.getSender()!==e.targetEvent.getSender()||r&&r>a.getTs()||s&&s.getTs()>a.getTs()?s:a,null);return i!=null&&i.shouldAttemptDecryption()&&e.client.getCrypto()?yield i.attemptDecryption(e.client.getCrypto()):i!=null&&i.isBeingDecrypted()&&(yield i.getDecryptionPromise()),i})()}setTargetEvent(e){var n=this;return F(function*(){if(!n.targetEvent){if(n.targetEvent=e,n.relationType===Sn.Replace&&!n.targetEvent.isState()){var r=yield n.getLastReplacement();r&&n.targetEvent.makeReplaced(r)}n.maybeEmitCreated()}})()}maybeEmitCreated(){this.creationEmitted||!this.targetEvent||!this.relations.size||(this.creationEmitted=!0,this.targetEvent.emit($t.RelationsCreated,this.relationType,this.eventType))}}class eZ{constructor(e,n){this.client=e,this.room=n,P(this,"relations",new Map)}getChildEventsForEvent(e,n,r){var i;return(i=this.relations.get(e))===null||i===void 0||(i=i.get(n))===null||i===void 0?void 0:i.get(r)}getAllChildEventsForEvent(e){var n,r=(n=this.relations.get(e))!==null&&n!==void 0?n:new Map,i=[];for(var s of r.values())for(var a of s.values())i.push(...a.getRelations());return i}aggregateParentEvent(e){var n=this.relations.get(e.getId());if(n)for(var r of n.values())for(var i of r.values())i.setTargetEvent(e)}aggregateChildEvent(e,n){if(!(e.isRedacted()||e.status===lt.CANCELLED)){var r=e.getRelation();if(r){var i=()=>{if(e.isDecryptionFailure()){e.once($t.Decrypted,i);return}this.aggregateChildEvent(e,n)};if(e.isBeingDecrypted()||e.shouldAttemptDecryption()){e.once($t.Decrypted,i);return}var{event_id:s,rel_type:a}=r,o=e.getType(),l=this.relations.get(s);l||(l=new Map,this.relations.set(s,l));var c=l.get(a);c||(c=new Map,l.set(a,c));var d=c.get(o);if(!d){var f,p,g;d=new AI(a,o,this.client),c.set(o,d);var y=(f=this.room)!==null&&f!==void 0?f:n==null?void 0:n.room,v=(p=(g=n==null?void 0:n.findEventById(s))!==null&&g!==void 0?g:y==null?void 0:y.findEventById(s))!==null&&p!==void 0?p:y==null?void 0:y.getPendingEvent(s);v&&d.setTargetEvent(v)}d.addEvent(e)}}}}var Qf;Qf=A.log.bind(A);var u0=function(t){return t.Ignore="ignore",t.Replace="replace",t}({});class a2 extends Un{constructor(e){var n,r,i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;super(),this.room=e,this.thread=o,this.threadListType=l,P(this,"relations",void 0),P(this,"timelineSupport",void 0),P(this,"displayPendingEvents",void 0),P(this,"liveTimeline",void 0),P(this,"timelines",void 0),P(this,"_eventIdToTimeline",new Map),P(this,"filter",void 0),this.timelineSupport=!!s.timelineSupport,this.liveTimeline=new Me(this),this.displayPendingEvents=s.pendingEvents!==!1,this.timelines=[this.liveTimeline],this._eventIdToTimeline=new Map,this.filter=s.filter,this.relations=(n=(r=this.room)===null||r===void 0?void 0:r.relations)!==null&&n!==void 0?n:new eZ((i=e==null?void 0:e.client)!==null&&i!==void 0?i:a)}getTimelines(){return this.timelines}getFilter(){return this.filter}setFilter(e){this.filter=e}getPendingEvents(){return!this.room||!this.displayPendingEvents?[]:this.room.getPendingEvents()}getLiveTimeline(){return this.liveTimeline}setLiveTimeline(e){this.liveTimeline=e}eventIdToTimeline(e){return this._eventIdToTimeline.get(e)}replaceEventId(e,n){var r=this._eventIdToTimeline.get(e);r&&(this._eventIdToTimeline.delete(e),this._eventIdToTimeline.set(n,r))}resetLiveTimeline(e,n){var r=!this.timelineSupport||!n,i=this.liveTimeline,s=r?i.forkLive(Me.FORWARDS):i.fork(Me.FORWARDS);r?(this.timelines=[s],this._eventIdToTimeline=new Map):this.timelines.push(s),n&&i.setPaginationToken(n,Me.FORWARDS),s.setPaginationToken(e??null,Me.BACKWARDS),this.liveTimeline=s,this.emit(xe.TimelineReset,this.room,this,r)}getTimelineForEvent(e){if(e==null)return null;var n=this._eventIdToTimeline.get(e);return n===void 0?null:n}findEventById(e){var n=this.getTimelineForEvent(e);if(n)return n.getEvents().find(function(r){return r.getId()==e})}addTimeline(){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");var e=new Me(this);return this.timelines.push(e),e}addEventsToTimeline(e,n,r,i,s){if(!i)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!n&&i==this.liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(!(this.filter&&(e=this.filter.filterRoomTimeline(e),!e.length))){var a=n?Me.BACKWARDS:Me.FORWARDS,o=n?Me.FORWARDS:Me.BACKWARDS,l=!1,c=!1;for(var d of e){var f=d.getId(),p=this._eventIdToTimeline.get(f);if(!p){this.addEventToTimeline(d,i,{toStartOfTimeline:n,addToState:r}),c=!0,l=!0;continue}if(c=!1,p==i){Qf("Event "+f+" already in timeline "+i);continue}var g=i.getNeighbouringTimeline(a);if(g){p==g?Qf("Event "+f+" in neighbouring timeline - switching to "+p):Qf("Event "+f+" already in a different timeline "+p),i=p;continue}A.info("Already have timeline for "+f+" - joining timeline "+i+" to "+p);var y=p===this.liveTimeline,v=i===this.liveTimeline,b=a===Me.BACKWARDS&&y,C=a===Me.FORWARDS&&v;if(b||C){b&&A.warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+p+")"),C&&A.warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+i+")");continue}i.setNeighbouringTimeline(p,a),p.setNeighbouringTimeline(i,o),i=p,l=!0}if(c||!l){if(a===Me.FORWARDS&&i===this.liveTimeline){A.warn({lastEventWasNew:c,didUpdate:l}),A.warn("Refusing to set forwards pagination token of live timeline "+"".concat(i," to ").concat(s));return}i.setPaginationToken(s??null,a)}}}addLiveEvent(e,n){var{duplicateStrategy:r,fromCache:i,roomState:s,timelineWasEmpty:a,addToState:o}=n;if(this.filter){var l=this.filter.filterRoomTimeline([e]);if(!l.length)return}var c=this._eventIdToTimeline.get(e.getId());if(c){if(r===u0.Replace){Qf("EventTimelineSet.addLiveEvent: replacing duplicate event "+e.getId());for(var d=c.getEvents(),f=0;f<d.length;f++)if(d[f].getId()===e.getId()){s||(s=c.getState(Me.FORWARDS)),Me.setEventMetadata(e,s,!1),d[f]=e;break}}else Qf("EventTimelineSet.addLiveEvent: ignoring duplicate event "+e.getId());return}this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1,fromCache:i,roomState:s,timelineWasEmpty:a,addToState:o})}addEventToTimeline(e,n,r){var{toStartOfTimeline:i,fromCache:s=!1,roomState:a,timelineWasEmpty:o,addToState:l}=r;if(n.getTimelineSet()!==this){var c;throw new Error("EventTimelineSet.addEventToTimeline: Timeline=".concat(n.toString(),` does not belong " +
                "in timelineSet(threadId=`).concat((c=this.thread)===null||c===void 0?void 0:c.id,")"))}var d=e.getId();if(this.relations.aggregateParentEvent(e),this.relations.aggregateChildEvent(e,this),this.room&&!this.canContain(e)){var f,p="event=".concat(d);e.threadRootId&&(p+="(belongs to thread=".concat(e.threadRootId,")")),A.warn("EventTimelineSet.addEventToTimeline: Ignoring ".concat(p," that does not belong ")+"in timeline=".concat(n.toString()," timelineSet(threadId=").concat((f=this.thread)===null||f===void 0?void 0:f.id,")"));return}n.addEvent(e,{toStartOfTimeline:i,roomState:a,timelineWasEmpty:o,addToState:l}),this._eventIdToTimeline.set(d,n);var g={timeline:n,liveEvent:!i&&n==this.liveTimeline&&!s};this.emit(xe.Timeline,e,this.room,!!i,!1,g)}insertEventIntoTimeline(e,n,r,i){if(n.getTimelineSet()!==this){var s;throw new Error("EventTimelineSet.insertEventIntoTimeline: Timeline=".concat(n.toString(),` does not belong " +
                "in timelineSet(threadId=`).concat((s=this.thread)===null||s===void 0?void 0:s.id,")"))}var a=e.getId();if(this.relations.aggregateParentEvent(e),this.relations.aggregateChildEvent(e,this),this.room&&!this.canContain(e)){var o,l="event=".concat(a);e.threadRootId&&(l+="(belongs to thread=".concat(e.threadRootId,")")),A.warn("EventTimelineSet.insertEventIntoTimeline: Ignoring ".concat(l," that does not belong ")+"in timeline=".concat(n.toString()," timelineSet(threadId=").concat((o=this.thread)===null||o===void 0?void 0:o.id,")"));return}var c=e.relationEventId;if(!c){this.addEventToTimeline(e,n,{toStartOfTimeline:!1,fromCache:!1,timelineWasEmpty:!1,roomState:r,addToState:i});return}for(var d=this.findEventById(c),f=n.getEvents(),p=d!==void 0?f.indexOf(d):0,g=p;g<f.length;g++){var y=f[g];if(y.getTs()>e.getTs())break}n.insertEvent(e,g,r,i),this._eventIdToTimeline.set(a,n);var v={timeline:n,liveEvent:!1};this.emit(xe.Timeline,e,this.room,!1,!1,v)}handleRemoteEcho(e,n,r){var i=this._eventIdToTimeline.get(n);i?(this._eventIdToTimeline.delete(n),this._eventIdToTimeline.set(r,i)):(!this.filter||this.filter.filterRoomTimeline([e]).length)&&this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1,addToState:!1})}removeEvent(e){var n=this._eventIdToTimeline.get(e);if(!n)return null;var r=n.removeEvent(e);if(r){this._eventIdToTimeline.delete(e);var i={timeline:n};this.emit(xe.Timeline,r,this.room,void 0,!0,i)}return r}compareEventOrdering(e,n){if(e==n)return 0;var r=this._eventIdToTimeline.get(e),i=this._eventIdToTimeline.get(n);if(r===void 0||i===void 0)return null;if(r===i){for(var s=void 0,a=void 0,o=r.getEvents(),l=0;l<o.length&&(s===void 0||a===void 0);l++){var c=o[l].getId();c==e&&(s=l),c==n&&(a=l)}var d=s-a;return d<0?-1:d>0?1:0}for(var f=r;f;){if(f===i)return-1;f=f.getNeighbouringTimeline(Me.FORWARDS)}for(f=r;f;){if(f===i)return 1;f=f.getNeighbouringTimeline(Me.BACKWARDS)}return null}canContain(e){if(!this.room)throw new Error("Cannot call `EventTimelineSet::canContain without a `room` set. Set the room when creating the EventTimelineSet to call this method.");var{threadId:n,shouldLiveInRoom:r,shouldLiveInThread:i}=this.room.eventShouldLiveIn(e);if(this.thread)return this.thread.id===n;if(!r&&!i){var s;A.warn("EventTimelineSet:canContain event encountered which cannot be added to any timeline roomId=".concat((s=this.room)===null||s===void 0?void 0:s.roomId," eventId=").concat(e.getId()," threadId=").concat(e.threadRootId))}return r}}var lt=function(t){return t.NOT_SENT="not_sent",t.ENCRYPTING="encrypting",t.SENDING="sending",t.QUEUED="queued",t.SENT="sent",t.CANCELLED="cancelled",t}({});class tZ{constructor(e,n){this.roomId=e}}class nZ{constructor(e){this.target=e,P(this,"reEmitters",new WeakMap)}reEmit(e,n){var r=this,i=this.reEmitters.get(e);i||(i=new Map,this.reEmitters.set(e,i));var s=function(l){if(i.has(l))return 1;var c=function(){if(!(l==="error"&&r.target.listenerCount("error")===0)){for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];r.target.emit(l,...p,e)}};e.on(l,c),i.set(l,c)};for(var a of n)s(a)}stopReEmitting(e,n){var r=this.reEmitters.get(e);if(r){for(var i of n)e.off(i,r.get(i)),r.delete(i);r.size===0&&this.reEmitters.delete(e)}}}class Fm extends nZ{constructor(e){super(e)}reEmit(e,n){super.reEmit(e,n)}stopReEmitting(e,n){super.stopReEmitting(e,n)}}var W0=new g9("unread_thread_notifications","org.matrix.msc3773.unread_thread_notifications");function Y1e(t,e){if(e.endsWith("*")){var n=e.slice(0,-1);return t.slice(0,n.length)===n}else return t===e}class VD{constructor(e,n){this.filterJson=e,this.userId=n}check(e){var n,r,i=((n=e.getUnsigned())===null||n===void 0?void 0:n["m.relations"])||{},s=Object.keys(i),a=[];return this.userId&&i!==null&&i!==void 0&&(r=i[un.name])!==null&&r!==void 0&&r.current_user_participated&&a.push(this.userId),this.checkFields(e.getRoomId(),e.getSender(),e.getType(),e.getContent()?e.getContent().url!==void 0:!1,s,a)}toJSON(){return{types:this.filterJson.types||null,not_types:this.filterJson.not_types||[],rooms:this.filterJson.rooms||null,not_rooms:this.filterJson.not_rooms||[],senders:this.filterJson.senders||null,not_senders:this.filterJson.not_senders||[],contains_url:this.filterJson.contains_url||null,[k2.name]:this.filterJson[k2.name]||[],[T2.name]:this.filterJson[T2.name]||[]}}checkFields(e,n,r,i,s,a){var o={rooms:function(C){return e===C},senders:function(C){return n===C},types:function(C){return Y1e(r,C)}};for(var l in o){var c=o[l],d="not_"+l,f=this.filterJson[d];if(f!=null&&f.some(c))return!1;var p=this.filterJson[l];if(p&&!p.some(c))return!1}var g=this.filterJson.contains_url;if(g!==void 0&&g!==i)return!1;var y=this.filterJson[T2.name];if(y!==void 0&&!this.arrayMatchesFilter(y,s))return!1;var v=this.filterJson[k2.name];return!(v!==void 0&&!this.arrayMatchesFilter(v,a))}arrayMatchesFilter(e,n){return n.length>0&&e.every(r=>n.includes(r))}filter(e){return e.filter(this.check,this)}limit(){return this.filterJson.limit!==void 0?this.filterJson.limit:10}}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gb(t,e,n){for(var r=e.split("."),i=t,s=0;s<r.length-1;s++)i[r[s]]||(i[r[s]]={}),i=i[r[s]];i[r[r.length-1]]=n}class ws{static fromJson(e,n,r){var i=new ws(e,n);return i.setDefinition(r),i}constructor(e,n){this.userId=e,this.filterId=n,P(this,"definition",{}),P(this,"roomFilter",void 0),P(this,"roomTimelineFilter",void 0)}getFilterId(){return this.filterId}getDefinition(){return this.definition}setDefinition(e){this.definition=e;var n=e.room,r={};n&&(n.rooms&&(r.rooms=n.rooms),n.rooms&&(r.not_rooms=n.not_rooms)),this.roomFilter=new VD(r,this.userId),this.roomTimelineFilter=new VD((n==null?void 0:n.timeline)||{},this.userId)}getRoomTimelineFilterComponent(){return this.roomTimelineFilter}filterRoomTimeline(e){return this.roomFilter&&(e=this.roomFilter.filter(e)),this.roomTimelineFilter&&(e=this.roomTimelineFilter.filter(e)),e}setTimelineLimit(e){gb(this.definition,"room.timeline.limit",e)}setUnreadThreadNotifications(e){var n,r;this.definition=Rf(Rf({},this.definition),{},{room:Rf(Rf({},(n=this.definition)===null||n===void 0?void 0:n.room),{},{timeline:Rf(Rf({},(r=this.definition)===null||r===void 0||(r=r.room)===null||r===void 0?void 0:r.timeline),{},{[W0.name]:e})})})}setLazyLoadMembers(e){gb(this.definition,"room.state.lazy_load_members",e)}setIncludeLeaveRooms(e){gb(this.definition,"room.include_leave",e)}}P(ws,"LAZY_LOADING_MESSAGES_FILTER",{lazy_load_members:!0});function L6(t){return t!=null}var J1e=new $s.UnstableValue("m.message","org.matrix.msc1767.message"),NI=new $s.UnstableValue("m.text","org.matrix.msc1767.text"),Q1e=new $s.UnstableValue("m.html","org.matrix.msc1767.html"),rZ=new $s.NamespacedValue("m.reference");function X1e(t,e){if(typeof t=="string")return typeof e=="string"?e===t:e.matches(t);if(typeof e=="string")return t.matches(e);var n=e,r=t;return n.matches(r.name)||L6(r.altName)&&n.matches(r.altName)}var DI=new Gg("m.topic");function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ehe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iZ(t,e){return{msgtype:Gl.Text,format:"org.matrix.custom.html",body:t,formatted_body:e}}function sZ(t,e){return{msgtype:Gl.Notice,format:"org.matrix.custom.html",body:t,formatted_body:e}}function aZ(t,e){return{msgtype:Gl.Emote,format:"org.matrix.custom.html",body:t,formatted_body:e}}function oZ(t){return{msgtype:Gl.Text,body:t}}function lZ(t){return{msgtype:Gl.Notice,body:t}}function cZ(t){return{msgtype:Gl.Emote,body:t}}var uZ=(t,e,n,r)=>{var i="at ".concat(new Date(n).toISOString()),s=e===X2.Self?"User":void 0,a=r?'"'.concat(r,'"'):void 0;return[s,"Location",a,t,i].filter(Boolean).join(" ")},dZ=(t,e,n,r,i)=>{var s=t??uZ(e,i||X2.Self,n,r),a=n?{[e1.name]:n}:{};return ehe({msgtype:Gl.Location,body:s,geo_uri:e,[Zg.name]:{description:r,uri:e},[Kg.name]:{type:i||X2.Self},[NI.name]:s},a)},the=t=>{var e,n,r=Zg.findIn(t),i=Kg.findIn(t),s=e1.findIn(t),a=NI.findIn(t),o=(e=r==null?void 0:r.uri)!==null&&e!==void 0?e:t==null?void 0:t.geo_uri,l=r==null?void 0:r.description,c=(n=i==null?void 0:i.type)!==null&&n!==void 0?n:X2.Self,d=a??t.body;return dZ(d,o,s??void 0,l,c)},hZ=(t,e)=>{var n=[];return L6(e)&&n.push({body:e,mimetype:"text/html"}),L6(t)&&n.push({body:t,mimetype:"text/plain"}),{topic:t,[DI.name]:n}},nhe=t=>{var e,n,r,i,s=DI.findIn(t);if(!Array.isArray(s)){var a;return{text:(a=t.topic)!==null&&a!==void 0?a:void 0}}var o=(e=(n=s==null||(r=s.find(c=>!L6(c.mimetype)||c.mimetype==="text/plain"))===null||r===void 0?void 0:r.body)!==null&&n!==void 0?n:t.topic)!==null&&e!==void 0?e:void 0,l=s==null||(i=s.find(c=>c.mimetype==="text/html"))===null||i===void 0?void 0:i.body;return{text:o,html:l}},rhe=(t,e,n,r,i)=>({description:n,timeout:t,live:e,[e1.name]:i||Date.now(),[Kg.name]:{type:r??X2.Self}}),fZ=t=>{var e,{description:n,timeout:r,live:i}=t,s=(e=e1.findIn(t))!==null&&e!==void 0?e:void 0,a=Kg.findIn(t);return{description:n,timeout:r,live:i,assetType:a==null?void 0:a.type,timestamp:s}},ihe=(t,e,n,r)=>({[Zg.name]:{description:r,uri:t},[e1.name]:e,"m.relates_to":{rel_type:rZ.name,event_id:n}}),jw=t=>{var e,n=Zg.findIn(t),r=(e=e1.findIn(t))!==null&&e!==void 0?e:void 0;return{description:n==null?void 0:n.description,uri:n==null?void 0:n.uri,timestamp:r}};const she=Object.freeze(Object.defineProperty({__proto__:null,getTextForLocationEvent:uZ,makeBeaconContent:ihe,makeBeaconInfoContent:rhe,makeEmoteMessage:cZ,makeHtmlEmote:aZ,makeHtmlMessage:iZ,makeHtmlNotice:sZ,makeLocationContent:dZ,makeNotice:lZ,makeTextMessage:oZ,makeTopicContent:hZ,parseBeaconContent:jw,parseBeaconInfoContent:fZ,parseLocationEvent:the,parseTopicContent:nhe},Symbol.toStringTag,{value:"Module"}));var Ln=function(t){return t.New="Beacon.new",t.Update="Beacon.update",t.LivenessChange="Beacon.LivenessChange",t.Destroy="Beacon.Destroy",t.LocationUpdate="Beacon.LocationUpdate",t}({}),Hw=(t,e,n)=>n>=t&&t+e>=n,O6=t=>"".concat(t.getRoomId(),"_").concat(t.getStateKey());class mZ extends Un{constructor(e){super(),this.rootEvent=e,P(this,"roomId",void 0),P(this,"_beaconInfo",void 0),P(this,"_isLive",void 0),P(this,"livenessWatchTimeout",void 0),P(this,"_latestLocationEvent",void 0),P(this,"clearLatestLocation",()=>{this._latestLocationEvent=void 0,this.emit(Ln.LocationUpdate,this.latestLocationState)}),this.roomId=this.rootEvent.getRoomId(),this.setBeaconInfo(this.rootEvent)}get isLive(){return!!this._isLive}get identifier(){return O6(this.rootEvent)}get beaconInfoId(){return this.rootEvent.getId()}get beaconInfoOwner(){return this.rootEvent.getStateKey()}get beaconInfoEventType(){return this.rootEvent.getType()}get beaconInfo(){return this._beaconInfo}get latestLocationState(){return this._latestLocationEvent&&jw(this._latestLocationEvent.getContent())}get latestLocationEvent(){return this._latestLocationEvent}update(e){if(O6(e)!==this.identifier)throw new Error("Invalid updating event");e.getTs()<this.rootEvent.getTs()||(this.rootEvent=e,this.setBeaconInfo(this.rootEvent),this.emit(Ln.Update,e,this),this.clearLatestLocation())}destroy(){this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this._isLive=!1,this.emit(Ln.Destroy,this.identifier)}monitorLiveness(){if(this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this.checkLiveness(),!!this.beaconInfo)if(this.isLive){var e=this.beaconInfo.timestamp+this.beaconInfo.timeout-Date.now();e>1&&(this.livenessWatchTimeout=setTimeout(()=>{this.monitorLiveness()},e))}else this.beaconInfo.timestamp>Date.now()&&(this.livenessWatchTimeout=setTimeout(()=>{this.monitorLiveness()},this.beaconInfo.timestamp-Date.now()))}addLocations(e){var n;if(this.isLive){var r=e.filter(s=>{var a=s.getContent(),o=jw(a);if(!o.uri||!o.timestamp)return!1;var{timestamp:l}=o;return this._beaconInfo.timestamp&&Hw(this._beaconInfo.timestamp,this._beaconInfo.timeout,l)&&(!this.latestLocationState||l>this.latestLocationState.timestamp)}),i=(n=r.sort(k1e))===null||n===void 0?void 0:n[0];i&&(this._latestLocationEvent=i,this.emit(Ln.LocationUpdate,this.latestLocationState))}}setBeaconInfo(e){this._beaconInfo=fZ(e.getContent()),this.checkLiveness()}checkLiveness(){var e=this.isLive;if(this.beaconInfo){var n=this.beaconInfo.timestamp>Date.now()?this.beaconInfo.timestamp-36e4:this.beaconInfo.timestamp;this._isLive=!!this._beaconInfo.live&&!!n&&Hw(n,this._beaconInfo.timeout,Date.now()),e!==this.isLive&&this.emit(Ln.LivenessChange,this.isLive,this)}}}function GD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ahe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pZ(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return new $i({content:{[e.getId()]:{[n]:{[t]:ahe({ts:e.getTs()},!r&&{thread_id:sm(e)})}}},type:ee.Receipt,room_id:e.getRoomId()})}var If=0,xf=1;class gZ extends Un{constructor(){super(...arguments),P(this,"receipts",new qc(()=>new Map)),P(this,"receiptCacheByEventId",new Map)}getReadReceiptForUserId(e){var n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qi.Read,[a,o]=(n=(r=this.receipts.get(s))===null||r===void 0?void 0:r.get(e))!==null&&n!==void 0?n:[null,null];return i?a:o??a}compareReceipts(e,n){var r;return(r=this.getUnfilteredTimelineSet().compareEventOrdering(e.eventId,n.eventId))!==null&&r!==void 0?r:e.data.ts-n.data.ts}getEventReadUpTo(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.getLatestReceipt(e,n);return r&&this.receiptPointsAtConsistentEvent(r)?r.eventId:null}receiptPointsAtConsistentEvent(e){var n,r=this.findEventById(e.eventId);if(!r)return!1;if(!((n=e.data)!==null&&n!==void 0&&n.thread_id))return!0;if(e.data.thread_id===zg){var i=eg(r);if(i)return!0}else if(r.threadRootId===e.data.thread_id)return!0;return A.warn("Ignoring receipt because its thread_id (".concat(e.data.thread_id,") disagrees ")+"with the thread root (".concat(r.threadRootId,") of the referenced event ")+"(event ID = ".concat(e.eventId,")")),!1}getLatestReceipt(e,n){var r,i,s=this.getReadReceiptForUserId(e,n,Qi.Read),a=this.getReadReceiptForUserId(e,n,Qi.ReadPrivate),o;return s!=null&&s.eventId&&a!==null&&a!==void 0&&a.eventId&&(o=this.compareReceipts(s,a)),o?(i=o<0?a:s)!==null&&i!==void 0?i:null:(r=a??s)!==null&&r!==void 0?r:null}addReceiptToStructure(e,n,r,i,s){var a,o,l=this.receipts.getOrCreate(n),c=l.get(r);c||(c=[null,null],l.set(r,c));var d=c[If];if(s){var f;d=(f=c[xf])!==null&&f!==void 0?f:c[If]}var p={eventId:e,data:i};if(d){var g=this.compareReceipts(d,p);if(g>=0)return}var y=s?c[If]:p,v=s?p:c[xf],b=null;y&&v&&(b=this.getUnfilteredTimelineSet().compareEventOrdering(y.eventId,v.eventId));var C=b===null||b<0,S=(a=c[xf])!==null&&a!==void 0?a:c[If];s&&C?c[xf]=p:s||(c[If]=p,C||(c[xf]=null));var R=(o=c[xf])!==null&&o!==void 0?o:c[If];if(S!==R){if(S&&this.receiptCacheByEventId.get(S.eventId)){var w=S.eventId;this.receiptCacheByEventId.set(w,this.receiptCacheByEventId.get(w).filter(I=>I.type!==n||I.userId!==r)),this.receiptCacheByEventId.get(w).length<1&&this.receiptCacheByEventId.delete(w)}this.receiptCacheByEventId.get(e)||this.receiptCacheByEventId.set(e,[]),this.receiptCacheByEventId.get(e).push({userId:r,type:n,data:i})}}getReceiptsForEvent(e){return this.receiptCacheByEventId.get(e.getId())||[]}fixupNotifications(e){var n=this.getReadReceiptForUserId(e,!1),r=this.timeline[this.timeline.length-1];r&&(n==null?void 0:n.eventId)===r.getId()&&e===r.getSender()&&(this.setUnread(Zt.Total,0),this.setUnread(Zt.Highlight,0))}addLocalEchoReceipt(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this.addReceipt(pZ(e,n,r,i),!0)}getUsersReadUpTo(e){return this.getReceiptsForEvent(e).filter(function(n){return xI(n.type)}).map(function(n){return n.userId})}}var ohe=new $s.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed"),lhe=new $s.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed"),che=new $s.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start"),Y0=new $s.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response"),A6=new $s.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end"),sd=function(t){return t.New="Poll.new",t.End="Poll.end",t.Update="Poll.update",t.Responses="Poll.Responses",t.Destroy="Poll.Destroy",t.UndecryptableRelations="Poll.UndecryptableRelations",t}({}),KD=(t,e)=>{var n=t.filter(r=>{if(!r.isDecryptionFailure())return Y0.matches(r.getType())&&r.getTs()<=e});return{responseEvents:n}};class vZ extends Un{constructor(e,n,r){if(super(),this.rootEvent=e,this.matrixClient=n,this.room=r,P(this,"roomId",void 0),P(this,"pollEvent",void 0),P(this,"_isFetchingResponses",!1),P(this,"relationsNextBatch",void 0),P(this,"responses",null),P(this,"endEvent",void 0),P(this,"undecryptableRelationEventIds",new Set),P(this,"countUndecryptableEvents",i=>{var s=i.filter(o=>o.isDecryptionFailure()).map(o=>o.getId()),a=this.undecryptableRelationsCount;this.undecryptableRelationEventIds=new Set([...this.undecryptableRelationEventIds,...s]),this.undecryptableRelationsCount!==a&&this.emit(sd.UndecryptableRelations,this.undecryptableRelationsCount)}),!this.rootEvent.getRoomId()||!this.rootEvent.getId())throw new Error("Invalid poll start event.");this.roomId=this.rootEvent.getRoomId(),this.pollEvent=this.rootEvent.unstableExtensibleEvent}get pollId(){return this.rootEvent.getId()}get endEventId(){var e;return(e=this.endEvent)===null||e===void 0?void 0:e.getId()}get isEnded(){return!!this.endEvent}get isFetchingResponses(){return this._isFetchingResponses}get undecryptableRelationsCount(){return this.undecryptableRelationEventIds.size}getResponses(){var e=this;return F(function*(){return e.responses||e.isFetchingResponses||(yield e.fetchResponses()),e.responses})()}onNewRelation(e){var n;if(A6.matches(e.getType())&&this.validateEndEvent(e)&&(this.endEvent=e,this.refilterResponsesOnEnd(),this.emit(sd.End)),!!this.responses){var r=((n=this.endEvent)===null||n===void 0?void 0:n.getTs())||Number.MAX_SAFE_INTEGER,{responseEvents:i}=KD([e],r);this.countUndecryptableEvents([e]),i.length&&(i.forEach(s=>{this.responses.addEvent(s)}),this.emit(sd.Responses,this.responses))}}fetchResponses(){var e=this;return F(function*(){var n,r;e._isFetchingResponses=!0;var i=yield e.matrixClient.relations(e.roomId,e.rootEvent.getId(),"m.reference",void 0,{from:e.relationsNextBatch||void 0});yield Promise.all(i.events.map(c=>e.matrixClient.decryptEventIfNeeded(c)));var s=e.responses||new AI("m.reference",Y0.name,e.matrixClient,[Y0.altName]),a=i.events.find(c=>A6.matches(c.getType()));e.validateEndEvent(a)&&(e.endEvent=a,e.refilterResponsesOnEnd(),e.emit(sd.End));var o=((n=e.endEvent)===null||n===void 0?void 0:n.getTs())||Number.MAX_SAFE_INTEGER,{responseEvents:l}=KD(i.events,o);l.forEach(c=>{s.addEvent(c)}),e.relationsNextBatch=(r=i.nextBatch)!==null&&r!==void 0?r:void 0,e.responses=s,e.countUndecryptableEvents(i.events),e.relationsNextBatch?e.fetchResponses():e._isFetchingResponses=!1,e.emit(sd.Responses,e.responses)})()}refilterResponsesOnEnd(){var e;if(this.responses){var n=((e=this.endEvent)===null||e===void 0?void 0:e.getTs())||Number.MAX_SAFE_INTEGER;this.responses.getRelations().forEach(r=>{if(r.getTs()>n){var i;(i=this.responses)===null||i===void 0||i.removeEvent(r)}}),this.emit(sd.Responses,this.responses)}}validateEndEvent(e){if(!e||this.endEvent&&this.endEvent.getTs()<e.getTs())return!1;var n=this.room.currentState,r=e.getSender();return!!r&&(r===this.rootEvent.getSender()||n.maySendRedactionForEvent(this.rootEvent,r))}}var yZ=t=>{var e=t.getType();return $s.M_POLL_START.matches(e)||Y0.matches(e)||A6.matches(e)};class uhe{constructor(e){P(this,"room",void 0),P(this,"threadedReceipts",void 0),P(this,"unthreadedReceipts",void 0),P(this,"danglingReceipts",void 0),P(this,"onTimelineEvent",n=>{var r=n.getId();if(r){var i=this.danglingReceipts.remove(r);i==null||i.forEach(s=>{s.receipt.thread_id?this.threadedReceipts.set(s.receipt.thread_id,s.eventId,s.receiptType,s.userId,s.receipt.ts,s.synthetic):this.unthreadedReceipts.set(r,s.receiptType,s.userId,s.receipt.ts,s.synthetic)})}}),this.room=e,this.threadedReceipts=new mhe(e),this.unthreadedReceipts=new _Z(e),this.danglingReceipts=new phe,e.on(xe.Timeline,this.onTimelineEvent)}add(e,n){for(var[r,i]of Object.entries(e))for(var[s,a]of Object.entries(i))for(var[o,l]of Object.entries(a)){var c=this.room.findEventById(r);c?l.thread_id?this.threadedReceipts.set(l.thread_id,r,s,o,l.ts,n):this.unthreadedReceipts.set(r,s,o,l.ts,n):this.danglingReceipts.add(new hhe(r,s,o,l,n))}}hasUserReadEvent(e,n){var r=this.unthreadedReceipts.get(e);if(r&&$w(r.eventId,n,this.room))return!0;var i=this.room.findEventById(n);if(!i)return A.warn("hasUserReadEvent event ID ".concat(n," not found in room ").concat(this.room.roomId,": this shouldn't happen!")),!1;var s=sm(i),a=this.threadedReceipts.get(s,e);return!!(a&&$w(a.eventId,n,this.room)||this.userSentLatestEventInThread(s,e))}userSentLatestEventInThread(e,n){var r,i=e===zg?this.room.getLiveTimeline().getEvents():(r=this.room.getThread(e))===null||r===void 0?void 0:r.timeline;return!!(i&&i.length>0&&i[i.length-1].getSender()===n)}}class dhe{constructor(e,n,r){this.eventId=e,this.receiptType=n,this.ts=r}}class hhe{constructor(e,n,r,i,s){this.eventId=e,this.receiptType=n,this.userId=r,this.receipt=i,this.synthetic=s}}class fhe{constructor(e){P(this,"room",void 0),P(this,"real",void 0),P(this,"synthetic",void 0),this.room=e,this.real=void 0,this.synthetic=void 0}set(e,n){e?this.synthetic=n:this.real=n,this.synthetic&&this.real&&$w(this.real.eventId,this.synthetic.eventId,this.room)&&(this.synthetic=void 0)}get(){var e;return(e=this.synthetic)!==null&&e!==void 0?e:this.real}getByType(e){return e?this.synthetic:this.real}}class _Z{constructor(e){P(this,"room",void 0),P(this,"data",void 0),this.room=e,this.data=new Map}set(e,n,r,i,s){var a=UI(this.data,r,()=>new fhe(this.room)),o=a.getByType(s);o&&ghe(o.eventId,e,this.room)||a.set(s,new dhe(e,n,i))}get(e){var n;return(n=this.data.get(e))===null||n===void 0?void 0:n.get()}}class mhe{constructor(e){P(this,"room",void 0),P(this,"data",void 0),this.room=e,this.data=new Map}set(e,n,r,i,s,a){var o=UI(this.data,e,()=>new _Z(this.room));o.set(n,r,i,s,a)}get(e,n){var r;return(r=this.data.get(e))===null||r===void 0?void 0:r.get(n)}}class phe{constructor(){P(this,"data",new Map)}add(e){var n=UI(this.data,e.eventId,()=>[]);n.push(e)}remove(e){var n=this.data.get(e);return this.data.delete(e),n}}function UI(t,e,n){var r=t.get(e);if(r)return r;var i=n();return t.set(e,i),i}function $w(t,e,n){var r=n.compareEventOrdering(t,e);return r!==null&&r>=0}function ghe(t,e,n){var r=n.compareEventOrdering(t,e);return r!==null&&r>0}function vhe(t,e,n){var r=t.findEventById(e),i=t.findEventById(n);if(!r||!i)return null;var s=eg(r),a=eg(i);return s&&a?yhe(t,e,n,r,i):_he(e,n,r,i)}function yhe(t,e,n,r,i){var s=t.getUnfilteredTimelineSet(),a=s.compareEventOrdering(e,n);if(a!==null)return a;var o=s.getTimelineForEvent(e);if(o===s.getLiveTimeline())return 1;var l=s.getTimelineForEvent(n);return l===s.getLiveTimeline()?-1:CZ(r,i)}function _he(t,e,n,r){var i=sm(n),s=sm(r),a=n.getThread();return a&&i===s?a.timelineSet.compareEventOrdering(t,e):CZ(n,r)}function CZ(t,e){var n=t.getTs(),r=e.getTs();return n<r?-1:n>r?1:0}var oe=function(t){return t.Get="GET",t.Put="PUT",t.Post="POST",t.Delete="DELETE",t.Options="OPTIONS",t.Head="HEAD",t.Patch="PATCH",t}({});function ZD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Che(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class Dd extends Error{constructor(e,n,r){super(e),this.httpStatus=n,this.httpHeaders=r}isRateLimitError(){return this.httpStatus===429}getRetryAfterMs(){var e,n=(e=this.httpHeaders)===null||e===void 0?void 0:e.get("Retry-After");if(n!=null){if(/^\d+$/.test(n)){var r=Number.parseInt(n)*1e3;if(!Number.isFinite(r))throw new Error("Retry-After header integer value is too large");return r}var i=new Date(n);if(i.toUTCString()!==n)throw new Error("Retry-After header value is not a valid HTTP-date or non-negative decimal integer");return i.getTime()-Date.now()}return null}}class On extends Dd{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=e.error||"Unknown message";n&&(a="[".concat(n,"] ").concat(a)),r&&(a="".concat(a," (").concat(r,")")),super("MatrixError: ".concat(a),n,s),this.url=r,this.event=i,P(this,"errcode",void 0),P(this,"data",void 0),this.errcode=e.errcode,this.name=e.errcode||"Unknown error code",this.data=e}isRateLimitError(){return this.errcode==="M_LIMIT_EXCEEDED"||(this.errcode==="M_UNKNOWN"||this.errcode===void 0)&&super.isRateLimitError()}getRetryAfterMs(){var e=super.getRetryAfterMs();if(e!==null)return e;if(this.errcode==="M_LIMIT_EXCEEDED"&&"retry_after_ms"in this.data){if(!Number.isInteger(this.data.retry_after_ms))throw new Error("retry_after_ms is not an integer");return this.data.retry_after_ms}return null}asWidgetApiErrorData(){var e,n,r,i,s={};if(this.httpHeaders)for(var[a,o]of this.httpHeaders)s[a]=o;return{http_status:(e=this.httpStatus)!==null&&e!==void 0?e:400,http_headers:s,url:(n=this.url)!==null&&n!==void 0?n:"",response:Che({errcode:(r=this.errcode)!==null&&r!==void 0?r:"M_UNKNOWN",error:(i=this.data.error)!==null&&i!==void 0?i:"Unknown message"},this.data)}}static fromWidgetApiErrorData(e){return new On(e.response,e.http_status,e.url,void 0,new Headers(e.http_headers))}}function FI(t,e){if(!(t instanceof Dd)||!t.isRateLimitError())return e;try{var n;return(n=t.getRetryAfterMs())!==null&&n!==void 0?n:e}catch{return e}}let jh=class extends Error{constructor(e,n){super(e+(n?": ".concat(n.message):""))}get name(){return"ConnectionError"}};class bZ extends Error{constructor(e){var n;super((n=e==null?void 0:e.message)!==null&&n!==void 0?n:"")}get name(){return"TokenRefreshError"}}class jI extends Error{constructor(e){var n;super((n=e==null?void 0:e.message)!==null&&n!==void 0?n:"")}get name(){return"TokenRefreshLogoutError"}}var Vw=function(t){return t.SessionLoggedOut="Session.logged_out",t.NoConsent="no_consent",t}({}),Q8={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var zD;function bhe(){if(zD)return Q8;zD=1;var t=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Q8.format=a,Q8.parse=o;function a(f){if(!f||typeof f!="object")throw new TypeError("argument obj is required");var p=f.parameters,g=f.type;if(!g||!s.test(g))throw new TypeError("invalid type");var y=g;if(p&&typeof p=="object")for(var v,b=Object.keys(p).sort(),C=0;C<b.length;C++){if(v=b[C],!n.test(v))throw new TypeError("invalid parameter name");y+="; "+v+"="+c(p[v])}return y}function o(f){if(!f)throw new TypeError("argument string is required");var p=typeof f=="object"?l(f):f;if(typeof p!="string")throw new TypeError("argument string is required to be a string");var g=p.indexOf(";"),y=g!==-1?p.slice(0,g).trim():p.trim();if(!s.test(y))throw new TypeError("invalid media type");var v=new d(y.toLowerCase());if(g!==-1){var b,C,S;for(t.lastIndex=g;C=t.exec(p);){if(C.index!==g)throw new TypeError("invalid parameter format");g+=C[0].length,b=C[1].toLowerCase(),S=C[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(r,"$1"))),v.parameters[b]=S}if(g!==p.length)throw new TypeError("invalid parameter format")}return v}function l(f){var p;if(typeof f.getHeader=="function"?p=f.getHeader("content-type"):typeof f.headers=="object"&&(p=f.headers&&f.headers["content-type"]),typeof p!="string")throw new TypeError("content-type header is missing from object");return p}function c(f){var p=String(f);if(n.test(p))return p;if(p.length>0&&!e.test(p))throw new TypeError("invalid parameter value");return'"'+p.replace(i,"\\$1")+'"'}function d(f){this.parameters=Object.create(null),this.type=f}return Q8}var Ehe=bhe();function b9(t){var e=new AbortController;return setTimeout(()=>{e.abort()},t),e.signal}function EZ(t){var e=new AbortController;function n(){for(var s of t)s.removeEventListener("abort",r)}function r(){e.abort(),n()}for(var i of t){if(i.aborted){r();break}i.addEventListener("abort",r)}return{signal:e.signal,cleanup:n}}function HI(t,e){var n,r,i=WD(t)?new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{var o=a.indexOf(":");return[a.substring(0,o),a.substring(o+1)]})):t.headers,s;try{s=She(i)}catch(a){return a}return((n=s)===null||n===void 0?void 0:n.type)==="application/json"&&e?new On(JSON.parse(e),t.status,WD(t)?t.responseURL:t.url,void 0,i):((r=s)===null||r===void 0?void 0:r.type)==="text/plain"?new Dd("Server returned ".concat(t.status," error: ").concat(e),t.status,i):new Dd("Server returned ".concat(t.status," error"),t.status,i)}function WD(t){return"getResponseHeader"in t}function She(t){var e=t.get("Content-Type");if(e===null)return null;try{return Ehe.parse(e)}catch(n){throw new Error("Error parsing Content-Type '".concat(e,"': ").concat(n))}}function Bw(t,e){return qw.apply(this,arguments)}function qw(){return qw=F(function*(t,e){for(var n=0,r=null;n<t;)try{if(n>0){var i=1e3*Math.pow(2,n);A.log("network operation failed ".concat(n," times, retrying in ").concat(i,"ms...")),yield ru(i)}return yield e()}catch(s){if(s instanceof jh)n+=1,r=s;else throw s}throw r}),qw.apply(this,arguments)}function $I(t,e,n){return e>4||t instanceof jh&&!n||t.httpStatus&&Math.floor(t.httpStatus/100)===4&&t.httpStatus!==429||t.name==="AbortError"||t.name==="M_TOO_LARGE"?-1:FI(t,1e3*Math.pow(2,e))}var ad=function(t){return t.Success="success",t.Failure="failure",t.Logout="logout",t}({}),whe=500,khe=60*1e3;class The{constructor(e){this.opts=e,P(this,"tokenRefreshPromise",void 0),P(this,"latestTokenRefreshExpiry",void 0)}prepareForRequest(){var e=this;return F(function*(){return yield e.refreshIfNeeded(),{accessToken:e.opts.accessToken,refreshToken:e.opts.refreshToken,expiry:e.latestTokenRefreshExpiry}})()}refreshIfNeeded(){var e=this;return F(function*(){if(e.tokenRefreshPromise)return e.tokenRefreshPromise;if(e.latestTokenRefreshExpiry){var n=e.latestTokenRefreshExpiry.getTime()-Date.now();n<=whe&&(yield e._handleUnknownToken())}})()}handleUnknownToken(e,n){var r=this;return F(function*(){return r._handleUnknownToken(e,n)})()}_handleUnknownToken(e,n){var r=this;return F(function*(){if(e!=null&&e.expiry){var i=e.expiry.getTime()-Date.now();if(i>=khe)return ad.Logout}if(!e||(e==null?void 0:e.accessToken)===r.opts.accessToken){var s;(s=r.tokenRefreshPromise)!==null&&s!==void 0||(r.tokenRefreshPromise=r.doTokenRefresh(n));try{return yield r.tokenRefreshPromise}finally{r.tokenRefreshPromise=void 0}}return ad.Success})()}doTokenRefresh(e){var n=this;return F(function*(){if(!n.opts.refreshToken||!n.opts.tokenRefreshFunction){var r;return(r=n.opts.logger)===null||r===void 0||r.error("Unable to refresh token - no refresh token or refresh function"),ad.Logout}e&&e>1&&(yield ru(1e3*Math.min(32,2**e)));try{var i,s;(i=n.opts.logger)===null||i===void 0||i.debug("Attempting to refresh token");var{accessToken:a,refreshToken:o,expiry:l}=yield n.opts.tokenRefreshFunction(n.opts.refreshToken);return n.opts.accessToken=a,n.opts.refreshToken=o,n.latestTokenRefreshExpiry=l,(s=n.opts.logger)===null||s===void 0||s.debug("... token refresh complete, new token expiry:",l),ad.Success}catch(f){var c;if(f instanceof jI||f instanceof On){var d;return(d=n.opts.logger)===null||d===void 0||d.error("Failed to refresh token",f),ad.Logout}return(c=n.opts.logger)===null||c===void 0||c.warn("Failed to refresh token",f),ad.Failure}})()}}class Rhe{constructor(e,n){var r;this.eventEmitter=e,this.opts=n,P(this,"abortController",new AbortController),P(this,"tokenRefresher",void 0),OK(n,["baseUrl","prefix"]),n.onlyData=!!n.onlyData,n.useAuthorizationHeader=(r=n.useAuthorizationHeader)!==null&&r!==void 0?r:!0,this.tokenRefresher=new The(n)}abort(){this.abortController.abort(),this.abortController=new AbortController}fetch(e,n){return this.opts.fetchFn?this.opts.fetchFn(e,n):globalThis.fetch(e,n)}setIdBaseUrl(e){this.opts.idBaseUrl=e}idServerRequest(e,n,r,i,s){if(!this.opts.idBaseUrl)throw new Error("No identity server base URL set");var a=void 0,o=void 0;e===oe.Get?a=r:o=r;var l=this.getUrl(n,a,i,this.opts.idBaseUrl),c={json:!0,headers:{}};return s&&(c.headers.Authorization="Bearer ".concat(s)),this.requestOtherUrl(e,l,o,c)}authedRequest(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return this.doAuthedRequest(1,e,n,r,i,s)}doAuthedRequest(e,n,r,i,s){var a=arguments,o=this;return F(function*(){var l=a.length>5&&a[5]!==void 0?a[5]:{},c=Wg(l);c.abortSignal=l.abortSignal;var d=yield o.tokenRefresher.prepareForRequest();d.accessToken&&(o.opts.useAuthorizationHeader?(c.headers||(c.headers={}),c.headers.Authorization||(c.headers.Authorization="Bearer ".concat(d.accessToken)),i.access_token&&delete i.access_token):i.access_token||(i.access_token=d.accessToken));try{var f=yield o.request(n,r,i,s,c);return f}catch(g){if(!(g instanceof On))throw g;if(g.errcode==="M_UNKNOWN_TOKEN"){var p=yield o.tokenRefresher.handleUnknownToken(d,e);if(p===ad.Success)return o.doAuthedRequest(e+1,n,r,i,s,l);if(p===ad.Failure)throw new bZ(g);c!=null&&c.inhibitLogoutEmit||o.eventEmitter.emit(Vw.SessionLoggedOut,g)}else g.errcode=="M_CONSENT_NOT_GIVEN"&&o.eventEmitter.emit(Vw.NoConsent,g.message,g.data.consent_uri);throw g}})()}request(e,n,r,i,s){var a=this.getUrl(n,r,s==null?void 0:s.prefix,s==null?void 0:s.baseUrl);return this.requestOtherUrl(e,a,i,s)}requestOtherUrl(e,n,r){var i=arguments,s=this;return F(function*(){var a,o,l,c,d,f=i.length>3&&i[3]!==void 0?i[3]:{},p=s.sanitizeUrlForLogs(n);(a=s.opts.logger)===null||a===void 0||a.debug("FetchHttpApi: --> ".concat(e," ").concat(p));var g=Object.assign({},f.headers||{}),y=(o=f.json)!==null&&o!==void 0?o:!0,v=y&&(r==null||(l=r.constructor)===null||l===void 0?void 0:l.name)===Object.name;y&&(v&&!g["Content-Type"]&&(g["Content-Type"]="application/json"),g.Accept||(g.Accept="application/json"));var b=(c=f.localTimeoutMs)!==null&&c!==void 0?c:s.opts.localTimeoutMs,C=(d=f.keepAlive)!==null&&d!==void 0?d:!1,S=[s.abortController.signal];b!==void 0&&S.push(b9(b)),f.abortSignal&&S.push(f.abortSignal);var R;v?R=JSON.stringify(r):R=r;var{signal:w,cleanup:I}=EZ(S),k,x=Date.now();try{var L;k=yield s.fetch(n,{signal:w,method:e,body:R,headers:g,mode:"cors",redirect:"follow",referrer:"",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"omit",keepalive:C,priority:f.priority}),(L=s.opts.logger)===null||L===void 0||L.debug("FetchHttpApi: <-- ".concat(e," ").concat(p," [").concat(Date.now()-x,"ms ").concat(k.status,"]"))}catch(D){var N;throw(N=s.opts.logger)===null||N===void 0||N.debug("FetchHttpApi: <-- ".concat(e," ").concat(p," [").concat(Date.now()-x,"ms ").concat(D,"]")),D.name==="AbortError"?D:new jh("fetch failed",D)}finally{I()}if(!k.ok)throw HI(k,yield k.text());return s.opts.onlyData?y?k.json():k.text():k})()}sanitizeUrlForLogs(e){try{var n;typeof e=="string"?n=new URL(e):n=e;var r=new URLSearchParams;for(var i of n.searchParams.keys())r.append(i,"xxx");var s=r.toString(),a=s?"?".concat(s):"";return n.origin+n.pathname+a}catch{return"??"}}getUrl(e,n,r,i){var s=i??this.opts.baseUrl,a=s.endsWith("/")?s.slice(0,-1):s,o=new URL(a+(r??this.opts.prefix)+e);return n&&Iw(n,o.searchParams),o}}var Ur=function(t){return t.V1="/_matrix/client/v1",t.V3="/_matrix/client/v3",t.Unstable="/_matrix/client/unstable",t}({}),pc=function(t){return t.V2="/_matrix/identity/v2",t}({}),C2=function(t){return t.V1="/_matrix/media/v1",t.V3="/_matrix/media/v3",t}({}),Ihe=1e3,xhe=0,vb,jc=[],Mhe=function(){};function YD(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e=e||0,e<0&&(e=0);var s=Date.now()+e,a=xhe++,o={runAt:s,func:t,params:r,key:a},l=Lhe(jc,function(c){return c.runAt-s});return jc.splice(l,0,o),VI(),a}function JD(t){if(jc.length!==0){var e;for(e=0;e<jc.length;e++){var n=jc[e];if(n.key==t){jc.splice(e,1);break}}e===0&&VI()}}function VI(){vb&&globalThis.clearTimeout(vb);var t=jc[0];if(t){var e=Date.now(),n=Math.min(t.runAt-e,Ihe);vb=globalThis.setTimeout(Phe,n)}}function Phe(){for(var t=Date.now(),e=[];;){var n=jc[0];if(!n||n.runAt>t)break;var r=jc.shift();Mhe("runCallbacks: popping",r.key),e.push(r)}VI();for(var i of e)try{i.func.apply(globalThis,i.params)}catch(s){A.error("Uncaught exception in callback function",s)}}function Lhe(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>1,s=e(t[i]);s>0?r=i:n=i+1}return n}class SZ extends Rhe{constructor(){super(...arguments),P(this,"uploads",[])}uploadContent(e){var n,r,i,s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(n=a.includeFilename)!==null&&n!==void 0?n:!0,l=(r=a.abortController)!==null&&r!==void 0?r:new AbortController,c=((i=a.type)!==null&&i!==void 0?i:e.type)||"application/octet-stream",d=(s=a.name)!==null&&s!==void 0?s:e.name,f={loaded:0,total:0,abortController:l},p=Promise.withResolvers();if(globalThis.XMLHttpRequest){var g=new globalThis.XMLHttpRequest,y=function(){g.abort(),p.reject(new Error("Timeout"))},v=YD(y,3e4);g.onreadystatechange=function(){switch(g.readyState){case globalThis.XMLHttpRequest.DONE:JD(v);try{if(g.status===0)throw new DOMException(g.statusText,"AbortError");if(!g.responseText)throw new Error("No response body.");g.status>=400?p.reject(HI(g,g.responseText)):p.resolve(JSON.parse(g.responseText))}catch(R){if(R.name==="AbortError"){p.reject(R);return}p.reject(new jh("request failed",R))}break}},g.upload.onprogress=R=>{var w;JD(v),f.loaded=R.loaded,f.total=R.total,v=YD(y,3e4),(w=a.progressHandler)===null||w===void 0||w.call(a,{loaded:R.loaded,total:R.total})};var b=this.getUrl("/upload",void 0,C2.V3);o&&d&&b.searchParams.set("filename",encodeURIComponent(d)),!this.opts.useAuthorizationHeader&&this.opts.accessToken&&b.searchParams.set("access_token",encodeURIComponent(this.opts.accessToken)),g.open(oe.Post,b.href),this.opts.useAuthorizationHeader&&this.opts.accessToken&&g.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),g.setRequestHeader("Content-Type",c),g.send(e),l.signal.addEventListener("abort",()=>{g.abort()})}else{var C={};o&&d&&(C.filename=d);var S={"Content-Type":c};this.authedRequest(oe.Post,"/upload",C,e,{prefix:C2.V3,headers:S,abortSignal:l.signal}).then(R=>this.opts.onlyData?R:R.json()).then(p.resolve,p.reject)}return f.promise=p.promise.finally(()=>{T6(this.uploads,R=>R===f)}),l.signal.addEventListener("abort",()=>{T6(this.uploads,R=>R===f),p.reject(new DOMException("Aborted","AbortError"))}),this.uploads.push(f),f.promise}cancelUpload(e){var n=this.uploads.find(r=>r.promise===e);return n?(n.abortController.abort(),!0):!1}getCurrentUploads(){return this.uploads}getContentUri(){return{base:this.opts.baseUrl,path:C2.V3+"/upload",params:{access_token:this.opts.accessToken}}}}var Ohe=6*60*60*1e3,Ahe=30*1e3,wZ=function(t){return t.Stable="stable",t.Unstable="unstable",t}({});class kZ{constructor(e){var n=this;this.http=e,P(this,"capabilities",void 0),P(this,"retryTimeout",void 0),P(this,"refreshTimeout",void 0),P(this,"fetchCapabilities",F(function*(){var r=yield n.http.authedRequest(oe.Get,"/capabilities");return n.capabilities=r.capabilities,n.capabilities})),P(this,"poll",F(function*(){try{yield n.fetchCapabilities(),n.clearTimeouts(),n.refreshTimeout=setTimeout(n.poll,Ohe),A.debug("Fetched new server capabilities")}catch(i){n.clearTimeouts();var r=Math.floor(Ahe+Math.random()*5e3);n.retryTimeout=setTimeout(n.poll,r),A.warn("Failed to refresh capabilities: retrying in ".concat(r,"ms"),i)}}))}start(){this.poll().then()}stop(){this.clearTimeouts()}getCachedCapabilities(){return this.capabilities}clearTimeouts(){this.refreshTimeout&&(clearInterval(this.refreshTimeout),this.refreshTimeout=void 0),this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=void 0)}}function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var TZ="10",Nhe=["1","2","3","4","5","6","7","8","9","10"],Dhe=30,Zt=function(t){return t.Highlight="highlight",t.Total="total",t}({}),xe=function(t){return t.MyMembership="Room.myMembership",t.Tags="Room.tags",t.AccountData="Room.accountData",t.Receipt="Room.receipt",t.Name="Room.name",t.Redaction="Room.redaction",t.RedactionCancelled="Room.redactionCancelled",t.LocalEchoUpdated="Room.localEchoUpdated",t.Timeline="Room.timeline",t.TimelineReset="Room.timelineReset",t.TimelineRefresh="Room.TimelineRefresh",t.OldStateUpdated="Room.OldStateUpdated",t.CurrentStateUpdated="Room.CurrentStateUpdated",t.HistoryImportedWithinTimeline="Room.historyImportedWithinTimeline",t.UnreadNotifications="Room.UnreadNotifications",t.Summary="Room.Summary",t}({});let E9=class extends gZ{constructor(e,n,r){var i,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),i=this,this.roomId=e,this.client=n,this.myUserId=r,this.opts=s,P(this,"reEmitter",void 0),P(this,"txnToEvent",new Map),P(this,"notificationCounts",{}),P(this,"bumpStamp",void 0),P(this,"threadNotifications",new Map),P(this,"cachedThreadReadReceipts",new Map),P(this,"oldestThreadedReceiptTs",1/0),P(this,"unthreadedReceipts",new Map),P(this,"timelineSets",void 0),P(this,"polls",new Map),P(this,"threadsTimelineSets",[]),P(this,"filteredTimelineSets",{}),P(this,"timelineNeedsRefresh",!1),P(this,"pendingEventList",void 0),P(this,"blacklistUnverifiedDevices",void 0),P(this,"selfMembership",void 0),P(this,"heroes",null),P(this,"getTypeWarning",!1),P(this,"getVersionWarning",!1),P(this,"membersPromise",void 0),P(this,"name",void 0),P(this,"normalizedName",void 0),P(this,"tags",{}),P(this,"accountData",new Map),P(this,"summary",null),P(this,"oldState",void 0),P(this,"currentState",void 0),P(this,"relations",void 0),P(this,"threads",new Map),P(this,"visibilityEvents",new Map),P(this,"roomReceipts",new uhe(this)),P(this,"threadTimelineSetsPromise",null),P(this,"threadsReady",!1),P(this,"updateThreadRootEvents",(a,o,l)=>{if(a.length){var c;if(this.updateThreadRootEvent((c=this.threadsTimelineSets)===null||c===void 0?void 0:c[0],a,o,l),a.hasCurrentUserParticipated){var d;this.updateThreadRootEvent((d=this.threadsTimelineSets)===null||d===void 0?void 0:d[1],a,o,l)}}}),P(this,"updateThreadRootEvent",(a,o,l,c)=>{a&&o.rootEvent&&(c&&a.removeEvent(o.id),wn.hasServerSideSupport?a.addLiveEvent(o.rootEvent,{duplicateStrategy:u0.Replace,fromCache:!1,roomState:this.currentState,addToState:!1}):a.addEventToTimeline(o.rootEvent,a.getLiveTimeline(),{toStartOfTimeline:l,addToState:!1}))}),P(this,"applyRedaction",a=>{if(a.isRedaction()){var o=a.event.redacts,l=o?this.findEventById(o):void 0;if(l){var c=l.threadRootId;if(l.makeRedacted(a,this),l.isState()){var d=this.currentState.getStateEvents(l.getType(),l.getStateKey());(d==null?void 0:d.getId())===l.getId()&&this.currentState.setStateEvents([l])}this.emit(xe.Redaction,a,this,c),this.visibilityEvents.delete(o),l.isVisibilityEvent()&&this.redactVisibilityChangeEvent(a)}}}),this.setMaxListeners(100),this.reEmitter=new Fm(this),s.pendingEventOrdering=s.pendingEventOrdering||im.Chronological,this.name=e,this.normalizedName=e,this.relations=new eZ(this.client,this),this.on(xe.Receipt,this.onReceipt),this.timelineSets=[new a2(this,s)],this.reEmitter.reEmit(this.getUnfilteredTimelineSet(),[xe.Timeline,xe.TimelineReset]),this.fixUpLegacyTimelineFields(),this.opts.pendingEventOrdering===im.Detached&&(this.pendingEventList=[],this.client.store.getPendingEvents(this.roomId).then(a=>{var o=this.client.getEventMapper({toDevice:!1,decrypt:!1});a.forEach(function(){var l=F(function*(c){var d=o(c);yield n.decryptEventIfNeeded(d),d.setStatus(lt.NOT_SENT),i.addPendingEvent(d,d.getTxnId())});return function(c){return l.apply(this,arguments)}}())})),this.opts.lazyLoadMembers?this.membersPromise=void 0:this.membersPromise=Promise.resolve(!1)}createThreadsTimelineSets(){var e=this;return F(function*(){var n;if(e.threadTimelineSetsPromise)return e.threadTimelineSetsPromise;if((n=e.client)!==null&&n!==void 0&&n.supportsThreads())try{e.threadTimelineSetsPromise=Promise.all([e.createThreadTimelineSet(),e.createThreadTimelineSet(Ro.My)]);var r=yield e.threadTimelineSetsPromise;return e.threadsTimelineSets[0]=r[0],e.threadsTimelineSets[1]=r[1],r}catch{return e.threadTimelineSetsPromise=null,null}return null})()}decryptCriticalEvents(){var e=this;return F(function*(){if(e.client.getCrypto()){var n=e.getEventReadUpTo(e.client.getUserId(),!0),r=e.getLiveTimeline().getEvents(),i=r.findIndex(a=>a.event.event_id===n),s=r.slice(i).reverse().map(a=>e.client.decryptEventIfNeeded(a));yield Promise.allSettled(s)}})()}decryptAllEvents(){var e=this;return F(function*(){if(e.client.getCrypto()){var n=e.getUnfilteredTimelineSet().getLiveTimeline().getEvents().slice(0).reverse().map(r=>e.client.decryptEventIfNeeded(r));yield Promise.allSettled(n)}})()}getCreator(){var e,n=this.currentState.getStateEvents(ee.RoomCreate,"");return(e=n==null?void 0:n.getSender())!==null&&e!==void 0?e:null}getVersion(){var e,n=this.currentState.getStateEvents(ee.RoomCreate,"");return n?(e=n.getContent().room_version)!==null&&e!==void 0?e:"1":(this.getVersionWarning||(A.warn("[getVersion] Room "+this.roomId+" does not have an m.room.create event"),this.getVersionWarning=!0),"1")}getRecommendedVersion(){var e=this;return F(function*(){var n={};try{n=yield e.client.getCapabilities()}catch{}var r=n["m.room_versions"];if(!r){r={default:TZ,available:{}};for(var i of Nhe)r.available[i]=wZ.Stable}var s=e.checkVersionAgainstCapability(r);if(s.urgent&&s.needsUpgrade){A.warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about.");try{n=yield e.client.fetchCapabilities()}catch(a){A.warn("Failed to refresh room version capabilities",a)}if(r=n["m.room_versions"],r)s=e.checkVersionAgainstCapability(r);else return A.warn("No room version capability - assuming upgrade required."),s}return s})()}checkVersionAgainstCapability(e){var n=this.getVersion();A.log("[".concat(this.roomId,"] Current version: ").concat(n)),A.log("[".concat(this.roomId,"] Version capability: "),e);var r={version:n,needsUpgrade:!1,urgent:!1};if(n===e.default)return r;var i=Object.keys(e.available).filter(s=>e.available[s]==="stable");return i.includes(n)||(r.version=e.default,r.needsUpgrade=!0,r.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),r.urgent?A.warn("URGENT upgrade required on ".concat(this.roomId)):A.warn("Non-urgent upgrade required on ".concat(this.roomId))),r}userMayUpgradeRoom(e){return this.currentState.maySendStateEvent(ee.RoomTombstone,e)}getPendingEvents(){if(!this.pendingEventList)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this.opts.pendingEventOrdering);return this.pendingEventList}removePendingEvent(e){if(!this.pendingEventList)throw new Error("Cannot call removePendingEvent with pendingEventOrdering == "+this.opts.pendingEventOrdering);var n=T6(this.pendingEventList,function(r){return r.getId()==e},!1);return this.savePendingEvents(),n}hasPendingEvent(e){var n,r;return(n=(r=this.pendingEventList)===null||r===void 0?void 0:r.some(i=>i.getId()===e))!==null&&n!==void 0?n:!1}getPendingEvent(e){var n,r;return(n=(r=this.pendingEventList)===null||r===void 0?void 0:r.find(i=>i.getId()===e))!==null&&n!==void 0?n:null}getLiveTimeline(){return this.getUnfilteredTimelineSet().getLiveTimeline()}get timeline(){return this.getLiveTimeline().getEvents()}getLastActiveTimestamp(){var e=this.getLiveTimeline(),n=e.getEvents();if(n.length){var r=n[n.length-1];return r.getTs()}else return Number.MIN_SAFE_INTEGER}getLastLiveEvent(){var e,n,r=this.getLiveTimeline().getEvents(),i=r[r.length-1],s=this.getLastThread();if(!s)return i;var a=s.events[s.events.length-1];return((e=i==null?void 0:i.getTs())!==null&&e!==void 0?e:0)>((n=a==null?void 0:a.getTs())!==null&&n!==void 0?n:0)?i:a}getLastThread(){return this.getThreads().reduce((e,n)=>{var r,i;if(!e)return n;var s=n.events[n.events.length-1],a=e.events[e.events.length-1];return((r=s==null?void 0:s.getTs())!==null&&r!==void 0?r:0)>=((i=a==null?void 0:a.getTs())!==null&&i!==void 0?i:0)?n:e},void 0)}getMyMembership(){var e;return(e=this.selfMembership)!==null&&e!==void 0?e:Ke.Leave}getDMInviter(){var e=this.getMember(this.myUserId);if(e)return e.getDMInviter();if(this.selfMembership===Ke.Invite){var n=this.getInvitedAndJoinedMemberCount();if(n===2){var r;return(r=this.heroes)===null||r===void 0||(r=r[0])===null||r===void 0?void 0:r.userId}}}guessDMUserId(){var e=this.getMember(this.myUserId);if(e){var n=e.getDMInviter();if(n)return n}if(Array.isArray(this.heroes)&&this.heroes.length)return this.heroes[0].userId;var r=this.currentState.getMembers(),i=r.find(s=>s.userId!==this.myUserId);return i?i.userId:this.myUserId}getFunctionalMembers(){var e=this.currentState.getStateEvents(BK.name,"");return Array.isArray(e==null?void 0:e.getContent().service_members)?e.getContent().service_members:[]}getAvatarFallbackMember(){var e,n=this.getFunctionalMembers(),r=0;if(this.getMembers().forEach(v=>{v.membership!=="join"&&v.membership!=="invite"||n.includes(v.userId)||r++}),!(r>2)){var i=(e=this.heroes)===null||e===void 0?void 0:e.filter(v=>!n.includes(v.userId)),s=Array.isArray(i)&&i.length;if(s){for(var a of i)if(a.fromMSC4186){var l=new Z0(this.roomId,a.userId);return l.setMembershipEvent(new $i({event_id:"$"+this.roomId+a.userId+new Date().getTime(),type:ee.RoomMember,state_key:a.userId,content:{displayname:a.displayName,avatar_url:a.avatarUrl}})),l}else{var o=this.getMember(a.userId);if(o)return o}var c=i.map(v=>this.getMember(v.userId)).find(v=>!!v);if(c)return c}var d=this.getMembers(),f=d==null?void 0:d.filter(v=>!n.includes(v.userId));if(f.length<=2){var p=f.find(v=>v.userId!==this.myUserId);if(p)return p}if(s){var g=i.map(v=>this.client.getUser(v.userId)).find(v=>!!v);if(g){var y=new Z0(this.roomId,g.userId);return y.user=g,y}}}}updateMyMembership(e){var n=this.selfMembership;this.selfMembership=e,n!==e&&(e===Ke.Leave&&this.cleanupAfterLeaving(),this.emit(xe.MyMembership,this,e,n))}loadMembersFromServer(){var e=this;return F(function*(){var n=e.client.store.getSyncToken(),r=yield e.client.members(e.roomId,void 0,Ke.Leave,n??void 0);return r.chunk})()}loadMembers(){var e=this;return F(function*(){var n=!1,r=yield e.client.store.getOutOfBandMembers(e.roomId);(r===null||e.hasEncryptionStateEvent())&&(n=!0,r=yield e.loadMembersFromServer(),A.log("LL: got ".concat(r.length," ")+"members from server for room ".concat(e.roomId)));var i=r.filter(Po).map(e.client.getEventMapper());return{memberEvents:i,fromServer:n}})()}membersLoaded(){return this.opts.lazyLoadMembers?this.currentState.outOfBandMembersReady():!0}loadMembersIfNeeded(){if(this.membersPromise)return this.membersPromise;this.currentState.markOutOfBandMembersStarted();var e=this.loadMembers().then(n=>(this.currentState.setOutOfBandMembers(n.memberEvents),n.fromServer)).catch(n=>{throw this.membersPromise=void 0,this.currentState.markOutOfBandMembersFailed(),n});return e.then(n=>{if(n){var r=this.currentState.getMembers().filter(s=>s.isOutOfBand()).map(s=>{var a;return(a=s.events.member)===null||a===void 0?void 0:a.event});A.log("LL: telling store to write ".concat(r.length)+" members for room ".concat(this.roomId));var i=this.client.store;return i.setOutOfBandMembers(this.roomId,r).catch(s=>{A.log("LL: storing OOB room members failed, oh well",s)})}}).catch(n=>{A.error(n)}),this.membersPromise=e,this.membersPromise}clearLoadedMembersIfNeeded(){var e=this;return F(function*(){e.opts.lazyLoadMembers&&e.membersPromise&&(yield e.loadMembersIfNeeded(),yield e.client.store.clearOutOfBandMembers(e.roomId),e.currentState.clearOutOfBandMembers(),e.membersPromise=void 0)})()}cleanupAfterLeaving(){this.clearLoadedMembersIfNeeded().catch(e=>{A.error("error after clearing loaded members from "+"room ".concat(this.roomId," after leaving")),A.log(e)})}refreshLiveTimeline(){var e=this;return F(function*(){var n=e.getLiveTimeline(),r=n.getPaginationToken(Me.FORWARDS),i=n.getPaginationToken(Me.BACKWARDS),s=n.getEvents(),a=s[s.length-1];A.log("[refreshLiveTimeline for ".concat(e.roomId,"] at ")+"mostRecentEventInTimeline=".concat(a&&a.getId()," ")+"liveTimelineBefore=".concat(n.toString()," ")+"forwardPaginationToken=".concat(r," ")+"backwardPaginationToken=".concat(i));var o=e.getUnfilteredTimelineSet(),l;a?(e.resetLiveTimeline(null,null),e.emit(xe.TimelineRefresh,e,o),l=yield e.client.getEventTimeline(o,a.getId())):l=yield e.client.getLatestTimeline(o);var c=o.getLiveTimeline();!c||c.getPaginationToken(Ct.Forward)===null&&c.getPaginationToken(Ct.Backward)===null&&c.getEvents().length===0?(A.log("[refreshLiveTimeline for ".concat(e.roomId,"] using our new live timeline")),l.setPaginationToken(r,Me.FORWARDS),o.setLiveTimeline(l),e.fixUpLegacyTimelineFields()):A.log("[refreshLiveTimeline for ".concat(e.roomId,"] `/sync` or some other request beat us to creating a new ")+"live timeline after we reset it. We'll use that instead since any events in the scrollback from this timeline will include the history."),e.setTimelineNeedsRefresh(!1),e.emit(xe.TimelineRefresh,e,o)})()}resetLiveTimeline(e,n){for(var r of this.timelineSets)r.resetLiveTimeline(e??void 0,n??void 0);for(var i of this.threads.values())i.resetLiveTimeline(e,n);this.fixUpLegacyTimelineFields()}fixUpLegacyTimelineFields(){var e=this.oldState,n=this.currentState;this.oldState=this.getLiveTimeline().getState(Me.BACKWARDS),this.currentState=this.getLiveTimeline().getState(Me.FORWARDS),e!==this.oldState&&this.emit(xe.OldStateUpdated,this,e,this.oldState),n!==this.currentState&&(this.emit(xe.CurrentStateUpdated,this,n,this.currentState),this.reEmitter.stopReEmitting(n,[vt.Events,vt.Members,vt.NewMember,vt.Update,vt.Marker,Ln.New,Ln.Update,Ln.Destroy,Ln.LivenessChange]),this.reEmitter.reEmit(this.currentState,[vt.Events,vt.Members,vt.NewMember,vt.Update,vt.Marker,Ln.New,Ln.Update,Ln.Destroy,Ln.LivenessChange]))}onReceipt(e){this.hasEncryptionStateEvent()&&this.clearNotificationsOnReceipt(e)}clearNotificationsOnReceipt(e){var n=[],r=!1,i=e.getContent();for(var s of Object.values(i))for(var[a,o]of Object.entries(s))if(xI(a)&&o){for(var[l,c]of Object.entries(o))if(!(!c||typeof c!="object")){var d=c;l===this.client.getUserId()&&(d.thread_id===void 0?r=!0:typeof d.thread_id=="string"&&n.push(d.thread_id))}}r&&(n=this.getThreads().filter(I=>this.getThreadUnreadNotificationCount(I.id,Zt.Total)>0||this.getThreadUnreadNotificationCount(I.id,Zt.Highlight)>0).map(I=>I.id),n.push("main"));for(var f of n){var p,g=20,y=f==="main"?this.getLiveTimeline():(p=this.getThread(f))===null||p===void 0?void 0:p.liveTimeline;if(!y){A.warn("Couldn't find timeline for thread ID ".concat(f," in room ").concat(this.roomId));continue}for(var v=y.getEvents(),b=0,C=v.length-1;C>=0;C--){var S;if(C===v.length-g)return;var R=v[C];if(this.hasUserReadEvent(this.client.getUserId(),R.getId()))break;var w=this.client.getPushActionsForEvent(R);b+=w!=null&&(S=w.tweaks)!==null&&S!==void 0&&S.highlight?1:0}f==="main"?this.setUnreadNotificationCount(Zt.Highlight,b):this.setThreadUnreadNotificationCount(f,Zt.Highlight,b)}}getTimelineSets(){return this.timelineSets}getUnfilteredTimelineSet(){return this.timelineSets[0]}getTimelineForEvent(e){var n=this.findEventById(e),r=this.findThreadForEvent(n);return r?r.timelineSet.getTimelineForEvent(e):this.getUnfilteredTimelineSet().getTimelineForEvent(e)}addTimeline(){return this.getUnfilteredTimelineSet().addTimeline()}setTimelineNeedsRefresh(e){this.timelineNeedsRefresh=e}getTimelineNeedsRefresh(){return this.timelineNeedsRefresh}findEventById(e){var n=this.getUnfilteredTimelineSet().findEventById(e);if(!n)for(var r=this.getThreads(),i=0;i<r.length;i++){var s=r[i];if(n=s.findEventById(e),n)return n}return n}getUnreadNotificationCount(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zt.Total,n=this.getRoomUnreadNotificationCount(e);for(var r of this.threadNotifications.values()){var i;n+=(i=r[e])!==null&&i!==void 0?i:0}return n}getUnreadCountForEventContext(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zt.Total,r=arguments.length>1?arguments[1]:void 0,i=!!r.threadRootId&&!r.isThreadRoot;return(e=i?this.getThreadUnreadNotificationCount(r.threadRootId,n):this.getRoomUnreadNotificationCount(n))!==null&&e!==void 0?e:0}getRoomUnreadNotificationCount(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zt.Total;return(e=this.notificationCounts[n])!==null&&e!==void 0?e:0}getThreadUnreadNotificationCount(e){var n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zt.Total;return(n=(r=this.threadNotifications.get(e))===null||r===void 0?void 0:r[i])!==null&&n!==void 0?n:0}hasThreadUnreadNotification(){for(var e of this.threadNotifications.values()){var n,r;if(((n=e.highlight)!==null&&n!==void 0?n:0)>0||((r=e.total)!==null&&r!==void 0?r:0)>0)return!0}return!1}setThreadUnreadNotificationCount(e,n,r){var i,s,a=m3({highlight:(i=this.threadNotifications.get(e))===null||i===void 0?void 0:i.highlight,total:(s=this.threadNotifications.get(e))===null||s===void 0?void 0:s.total},{[n]:r});this.threadNotifications.set(e,a),this.emit(xe.UnreadNotifications,a,e)}get threadsAggregateNotificationType(){var e=null;for(var n of this.threadNotifications.values()){var r,i;if(((r=n.highlight)!==null&&r!==void 0?r:0)>0)return Zt.Highlight;((i=n.total)!==null&&i!==void 0?i:0)>0&&!e&&(e=Zt.Total)}return e}resetThreadUnreadNotificationCountFromSync(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=this.hasEncryptionStateEvent();for(var[r,i]of this.threadNotifications)e.includes(r)||(i.total=0,n||(i.highlight=0));this.emit(xe.UnreadNotifications)}setBumpStamp(e){this.bumpStamp=e}getBumpStamp(){return this.bumpStamp}setUnreadNotificationCount(e,n){this.notificationCounts[e]=n,this.emit(xe.UnreadNotifications,this.notificationCounts)}setUnread(e,n){return this.setUnreadNotificationCount(e,n)}setSummary(e){var n,r=(n=e["m.heroes"])===null||n===void 0?void 0:n.map(a=>({userId:a,fromMSC4186:!1})),i=e["m.joined_member_count"],s=e["m.invited_member_count"];Number.isInteger(i)&&this.currentState.setJoinedMemberCount(i),Number.isInteger(s)&&this.currentState.setInvitedMemberCount(s),Array.isArray(r)&&(this.heroes=r.filter(a=>a.userId!=this.myUserId)),this.emit(xe.Summary,e)}setMSC4186SummaryData(e,n,r){e&&(this.heroes=e.filter(i=>i.user_id!==this.myUserId).map(i=>({userId:i.user_id,displayName:i.displayname,avatarUrl:i.avatar_url,fromMSC4186:!0}))),n!==void 0&&Number.isInteger(n)&&this.currentState.setJoinedMemberCount(n),r!==void 0&&Number.isInteger(r)&&this.currentState.setInvitedMemberCount(r),this.emit(xe.Summary,{"m.heroes":this.heroes?this.heroes.map(i=>i.userId):[],"m.joined_member_count":n,"m.invited_member_count":r})}setBlacklistUnverifiedDevices(e){this.blacklistUnverifiedDevices=e}getBlacklistUnverifiedDevices(){return this.blacklistUnverifiedDevices===void 0?null:this.blacklistUnverifiedDevices}getAvatarUrl(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,o=this.currentState.getStateEvents(ee.RoomAvatar,"");if(!o&&!s)return null;var l=o?o.getContent().url:null;return l?y9(e,l,n,r,i,void 0,void 0,a):null}getMxcAvatarUrl(){var e;return((e=this.currentState.getStateEvents(ee.RoomAvatar,""))===null||e===void 0||(e=e.getContent())===null||e===void 0?void 0:e.url)||null}getCanonicalAlias(){var e=this.currentState.getStateEvents(ee.RoomCanonicalAlias,"");return e&&e.getContent().alias||null}getAltAliases(){var e=this.currentState.getStateEvents(ee.RoomCanonicalAlias,"");return e?e.getContent().alt_aliases||[]:[]}addEventsToTimeline(e,n,r,i,s){i.getTimelineSet().addEventsToTimeline(e,n,r,i,s)}getThread(e){var n;return(n=this.threads.get(e))!==null&&n!==void 0?n:null}getThreads(){return Array.from(this.threads.values())}getMember(e){return this.currentState.getMember(e)}getMembers(){return this.currentState.getMembers()}getJoinedMembers(){return this.getMembersWithMembership(Ke.Join)}getJoinedMemberCount(){return this.currentState.getJoinedMemberCount()}getInvitedMemberCount(){return this.currentState.getInvitedMemberCount()}getInvitedAndJoinedMemberCount(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()}getMembersWithMembership(e){return this.currentState.getMembers().filter(function(n){return n.membership===e})}getEncryptionTargetMembers(){var e=this;return F(function*(){yield e.loadMembersIfNeeded();var n=e.getMembersWithMembership(Ke.Join);return e.shouldEncryptForInvitedMembers()&&(n=n.concat(e.getMembersWithMembership(Ke.Invite))),n})()}shouldEncryptForInvitedMembers(){var e,n=this.currentState.getStateEvents(ee.RoomHistoryVisibility,"");return(n==null||(e=n.getContent())===null||e===void 0?void 0:e.history_visibility)!=="joined"}getDefaultRoomName(e){return this.calculateRoomName(e,!0)}hasMembershipState(e,n){var r=this.getMember(e);return r?r.membership===n:!1}getOrCreateFilteredTimelineSet(e){var{prepopulateTimeline:n=!0,useSyncEvents:r=!0,pendingEvents:i=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.filteredTimelineSets[e.filterId])return this.filteredTimelineSets[e.filterId];var s=Object.assign({filter:e,pendingEvents:i},this.opts),a=new a2(this,s);this.reEmitter.reEmit(a,[xe.Timeline,xe.TimelineReset]),r&&(this.filteredTimelineSets[e.filterId]=a,this.timelineSets.push(a));var o=this.getLiveTimeline();if(n){o.getEvents().forEach(function(d){a.addLiveEvent(d,{addToState:!1})});for(var l=o;l.getNeighbouringTimeline(Me.BACKWARDS);)l=l.getNeighbouringTimeline(Me.BACKWARDS);a.getLiveTimeline().setPaginationToken(l.getPaginationToken(Me.BACKWARDS),Me.BACKWARDS)}else if(r){var c=o.getPaginationToken(Ct.Forward);a.getLiveTimeline().setPaginationToken(c,Ct.Backward)}return a}getThreadListFilter(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:Ro.All,i=n.client.getUserId(),s=new ws(i),a={room:{timeline:{[T2.name]:[un.name]}}};r===Ro.My&&(a.room.timeline[k2.name]=[i]),s.setDefinition(a);var o=yield n.client.getOrCreateFilter("THREAD_PANEL_".concat(n.roomId,"_").concat(r),s);return s.filterId=o,s})()}createThreadTimelineSet(e){var n=this;return F(function*(){var r;if(wn.hasServerSideListSupport)r=new a2(n,m3(m3({},n.opts),{},{pendingEvents:!1}),void 0,void 0,e??Ro.All),n.reEmitter.reEmit(r,[xe.Timeline,xe.TimelineReset]);else if(wn.hasServerSideSupport){var i=yield n.getThreadListFilter(e);r=n.getOrCreateFilteredTimelineSet(i,{prepopulateTimeline:!1,useSyncEvents:!1,pendingEvents:!1})}else r=new a2(n,{pendingEvents:!1}),Array.from(n.threads).forEach(s=>{var[,a]=s;if(a.length!==0){var o=a.timeline.some(l=>l.getSender()===n.client.getUserId());(e!==Ro.My||o)&&r.getLiveTimeline().addEvent(a.rootEvent,{toStartOfTimeline:!1,addToState:!1})}});return r})()}processThreadRoots(e,n){if(this.client.supportsThreads())for(var r of e)Me.setEventMetadata(r,this.currentState,n),this.getThread(r.getId())||this.createThread(r.getId(),r,[],n)}fetchRoomThreads(){var e=this;return F(function*(){if(!(e.threadsReady||!e.client.supportsThreads())){if(wn.hasServerSideListSupport)yield Promise.all([e.fetchRoomThreadList(Ro.All),e.fetchRoomThreadList(Ro.My)]);else{var n=yield e.getThreadListFilter(),{chunk:r}=yield e.client.createMessagesRequest(e.roomId,"",Number.MAX_SAFE_INTEGER,Ct.Backward,n);if(!r.length)return;var i=r.map(e.client.getEventMapper()).sort((p,g)=>{var y=p.getServerAggregatedRelation(un.name),v=g.getServerAggregatedRelation(un.name);return y.latest_event.origin_server_ts-v.latest_event.origin_server_ts}),s,a=e.getLiveTimeline().getState(Me.FORWARDS);for(var o of i){var l,c={duplicateStrategy:u0.Ignore,fromCache:!1,addToState:!1,roomState:a};(l=e.threadsTimelineSets[0])===null||l===void 0||l.addLiveEvent(o,c);var d=o.getServerAggregatedRelation(un.name);if(d!=null&&d.current_user_participated){var f;(f=e.threadsTimelineSets[1])===null||f===void 0||f.addLiveEvent(o,c),s=o}}e.processThreadRoots(i,!0),e.client.decryptEventIfNeeded(i[i.length-1]),s&&e.client.decryptEventIfNeeded(s)}e.on(Xi.NewReply,e.onThreadReply),e.on(Xi.Update,e.onThreadUpdate),e.on(Xi.Delete,e.onThreadDelete),e.threadsReady=!0}})()}processPollEvents(e){var n=this;return F(function*(){for(var r of e)try{if(!r.isEncrypted()&&!yZ(r))continue;yield n.client.decryptEventIfNeeded(r),n.processPollEvent(r)}catch(i){A.warn("Error processing poll event",r.getId(),i)}})()}processPollEvent(e){var n=this;return F(function*(){if(e.isDecryptionFailure()){e.once($t.Decrypted,a=>{n.processPollEvent(a)});return}if($s.M_POLL_START.matches(e.getType())){try{var r=new vZ(e,n.client,n);n.polls.set(e.getId(),r),n.emit(sd.New,r),e.once($t.BeforeRedaction,a=>{n.polls.delete(a.getId())})}catch{}return}var i=e.relationEventId;if(i&&n.polls.has(i)){var s=n.polls.get(i);s==null||s.onNewRelation(e)}})()}fetchRoomThreadList(e){var n=this;return F(function*(){if(n.client.supportsThreads()&&n.threadsTimelineSets.length!==0){var r=e===Ro.My?n.threadsTimelineSets[1]:n.threadsTimelineSets[0],{chunk:i,end:s}=yield n.client.createThreadListMessagesRequest(n.roomId,null,void 0,Ct.Backward,r.threadListType,r.getFilter());if(r.getLiveTimeline().setPaginationToken(s??null,Ct.Backward),!!i.length){var a=i.map(n.client.getEventMapper());n.processThreadRoots(a,!0);var o=n.getLiveTimeline().getState(Me.FORWARDS);for(var l of a)r.addLiveEvent(l,{duplicateStrategy:u0.Replace,fromCache:!1,roomState:o,addToState:!1})}}})()}onThreadUpdate(e){this.updateThreadRootEvents(e,!1,!1)}onThreadReply(e){this.updateThreadRootEvents(e,!1,!0)}onThreadDelete(e){var n;this.threads.delete(e.id);var r=this.getTimelineForEvent(e.id),i=r==null||(n=r.getEvents())===null||n===void 0?void 0:n.find(a=>a.getId()===e.id);i?e.clearEventMetadata(i):A.debug("onThreadDelete: Could not find root event in room timeline");for(var s of this.threadsTimelineSets)s.removeEvent(e.id)}removeFilteredTimelineSet(e){var n=this.filteredTimelineSets[e.filterId];delete this.filteredTimelineSets[e.filterId];var r=this.timelineSets.indexOf(n);r>-1&&this.timelineSets.splice(r,1)}eventShouldLiveIn(e,n,r){var i;if(!((i=this.client)!==null&&i!==void 0&&i.supportsThreads()))return{shouldLiveInRoom:!0,shouldLiveInThread:!1};if(e.isThreadRoot||r!=null&&r.has(e.getId()))return{shouldLiveInRoom:!0,shouldLiveInThread:!0,threadId:e.getId()};var s=e.isRelation(un.name),a=e.getAssociatedId(),o=e.threadRootId;if(a&&!s&&(o===a||r!=null&&r.has(a)))return{shouldLiveInRoom:!0,shouldLiveInThread:!1};var l;if(a){var c;l=(c=this.findEventById(a))!==null&&c!==void 0?c:n==null?void 0:n.find(d=>d.getId()===a)}return l&&!s?this.eventShouldLiveIn(l,n,r):o!=null?{shouldLiveInRoom:!1,shouldLiveInThread:!0,threadId:o}:!a||e.replyEventId?{shouldLiveInRoom:!0,shouldLiveInThread:!1}:{shouldLiveInRoom:!1,shouldLiveInThread:!1}}findThreadForEvent(e){if(!e)return null;var{threadId:n}=this.eventShouldLiveIn(e);return n?this.getThread(n):null}addThreadedEvents(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.getThread(e);if(i)i.addEvents(n,r);else{var s,a=(s=this.findEventById(e))!==null&&s!==void 0?s:n.find(o=>o.getId()===e);this.createThread(e,a,n,r)}}processThreadedEvents(e,n){e.forEach(this.applyRedaction);var r={};for(var i of e){var s,{threadId:a,shouldLiveInThread:o}=this.eventShouldLiveIn(i);o&&!r[a]&&(r[a]=[]),(s=r[a])===null||s===void 0||s.push(i)}Object.entries(r).map(l=>{var[c,d]=l;return this.addThreadedEvents(c,d,n)})}createThread(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;if(this.threads.has(e))return this.threads.get(e);if(n){var a=this.relations.getAllChildEventsForEvent(n.getId());a!=null&&a.length&&(i=i.concat(a.filter(l=>!l.isRelation(Sn.Replace))))}var o=new wn(e,n,{room:this,client:this.client,pendingEventOrdering:this.opts.pendingEventOrdering,receipts:(r=this.cachedThreadReadReceipts.get(e))!==null&&r!==void 0?r:[]});return this.reEmitter.reEmit(o,[Xi.Delete,Xi.Update,Xi.NewReply,xe.Timeline,xe.TimelineReset]),this.cachedThreadReadReceipts.delete(e),this.threads.set(o.id,o),o.addEvents(i,!1),this.threadsReady&&o.initialEventsFetched&&this.updateThreadRootEvents(o,s,!1),this.emit(Xi.New,o,s),o}processLiveEvent(e){this.applyRedaction(e),e.isVisibilityEvent()&&this.applyNewVisibilityEvent(e),this.applyPendingVisibilityEvents(e);var n=e.getUnsigned().transaction_id;if(!n&&e.getSender()===this.myUserId){for(var[r,i]of this.txnToEvent)if(i.getId()===e.getId()){A.debug("processLiveEvent: found sent event without txn ID: ",r,e.getId());var s=e.getUnsigned();s.transaction_id=r,e.setUnsigned(s);break}}}addLiveEvent(e,n){var{duplicateStrategy:r,timelineWasEmpty:i,fromCache:s,addToState:a}=n;for(var o of this.timelineSets)o.addLiveEvent(e,{duplicateStrategy:r,fromCache:s,timelineWasEmpty:i,addToState:a});e.sender&&e.getType()!==ee.RoomRedaction&&this.addReceipt(pZ(e.sender.userId,e,Qi.Read),!0)}addPendingEvent(e,n){if(e.status!==lt.SENDING&&e.status!==lt.NOT_SENT)throw new Error("addPendingEvent called on an event with status "+e.status);if(this.txnToEvent.get(n))throw new Error("addPendingEvent called on an event with known txnId "+n);if(Me.setEventMetadata(e,this.getLiveTimeline().getState(Me.FORWARDS),!1),this.txnToEvent.set(n,e),this.pendingEventList){if(this.pendingEventList.some(a=>a.status===lt.NOT_SENT)&&(A.warn("Setting event as NOT_SENT due to messages in the same state"),e.setStatus(lt.NOT_SENT)),this.pendingEventList.push(e),this.savePendingEvents(),e.isRelation()&&this.aggregateNonLiveRelation(e),e.isRedaction()){var r=e.event.redacts,i=this.pendingEventList.find(a=>a.getId()===r);!i&&r&&(i=this.findEventById(r)),i&&(i.markLocallyRedacted(e),this.emit(xe.Redaction,e,this,i.threadRootId))}}else for(var s of this.timelineSets)s.getFilter()?s.getFilter().filterRoomTimeline([e]).length&&s.addEventToTimeline(e,s.getLiveTimeline(),{toStartOfTimeline:!1,addToState:!1}):s.addEventToTimeline(e,s.getLiveTimeline(),{toStartOfTimeline:!1,addToState:!1});this.emit(xe.LocalEchoUpdated,e,this)}savePendingEvents(){if(this.pendingEventList){var e=this.pendingEventList.map(n=>m3(m3({},n.event),{},{txn_id:n.getTxnId()})).filter(n=>{var r=n.type===ee.RoomMessageEncrypted,i=this.hasEncryptionStateEvent();return r||!i});this.client.store.setPendingEvents(this.roomId,e)}}aggregateNonLiveRelation(e){this.relations.aggregateChildEvent(e)}getEventForTxnId(e){return this.txnToEvent.get(e)}handleRemoteEcho(e,n){var r=n.getId(),i=e.getId(),s=n.status;A.debug("Got remote echo for event ".concat(r," -> ").concat(i," old status ").concat(s)),this.txnToEvent.delete(e.getUnsigned().transaction_id),this.pendingEventList&&this.removePendingEvent(r),n.handleRemoteEcho(e.event);var{shouldLiveInRoom:a,threadId:o}=this.eventShouldLiveIn(e),l=o?this.getThread(o):null;if(l==null||l.setEventMetadata(n),l==null||l.timelineSet.handleRemoteEcho(n,r,i),a)for(var c of this.timelineSets)c.handleRemoteEcho(n,r,i);this.emit(xe.LocalEchoUpdated,n,this,r,s)}updatePendingEvent(e,n,r){if(A.log("setting pendingEvent status to ".concat(n," in ").concat(e.getRoomId()," ")+"event ID ".concat(e.getId()," -> ").concat(r)),n==lt.SENT&&!r)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(n==lt.SENT){var i=this.getTimelineForEvent(r);if(i){var s=this.findEventById(r),a=s==null?void 0:s.getUnsigned().transaction_id;if(!a&&s){var o=s.getUnsigned();o.transaction_id=e.getTxnId(),s.setUnsigned(o),this.removeEvent(s.getId()),this.handleRemoteEcho(s,e)}return}}var l=e.status,c=e.getId();if(!l)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");var d=Uhe[l];if(!(d!=null&&d.includes(n)))throw new Error("Invalid EventStatus transition ".concat(l,"->").concat(n));if(e.setStatus(n),n==lt.SENT){e.replaceLocalEventId(r);var{shouldLiveInRoom:f,threadId:p}=this.eventShouldLiveIn(e),g=p?this.getThread(p):void 0;if(g==null||g.setEventMetadata(e),g==null||g.timelineSet.replaceEventId(c,r),f)for(var y of this.timelineSets)y.replaceEventId(c,r)}else if(n==lt.CANCELLED){if(this.pendingEventList){var v=this.getPendingEvent(c);this.removePendingEvent(c),v!=null&&v.isRedaction()&&this.revertRedactionLocalEcho(v)}this.removeEvent(c)}this.savePendingEvents(),this.emit(xe.LocalEchoUpdated,e,this,c,l)}revertRedactionLocalEcho(e){var n=e.event.redacts;if(n){var r=this.getUnfilteredTimelineSet().findEventById(n);r&&(r.unmarkLocallyRedacted(),this.emit(xe.RedactionCancelled,e,this),r.isRelation()&&this.aggregateNonLiveRelation(r))}}assertTimelineSetsAreLive(){for(var e=0;e<this.timelineSets.length;e++){var n=this.timelineSets[e].getLiveTimeline();if(n.getPaginationToken(Me.FORWARDS))throw new Error("live timeline "+e+" is no longer live - it has a pagination token ("+n.getPaginationToken(Me.FORWARDS)+")");if(n.getNeighbouringTimeline(Me.FORWARDS))throw new Error("live timeline ".concat(e," is no longer live - it has a neighbouring timeline"))}}addLiveEvents(e,n){var r=this;return F(function*(){var{duplicateStrategy:i,fromCache:s,timelineWasEmpty:a=!1,addToState:o}=n;if(i&&["replace","ignore"].indexOf(i)===-1)throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");r.assertTimelineSetsAreLive();var l=r.findThreadRoots(e),c={},d={duplicateStrategy:i,fromCache:s,timelineWasEmpty:a,addToState:o},f=[...e];for(var p of e){var g;if(r.processLiveEvent(p),p.getUnsigned().transaction_id){var y=r.txnToEvent.get(p.getUnsigned().transaction_id);if(y){r.handleRemoteEcho(p,y);continue}}var{shouldLiveInRoom:v,shouldLiveInThread:b,threadId:C=""}=r.eventShouldLiveIn(p,f,l);if(!b&&!v&&p.isRelation())try{var S=new $i(yield r.client.fetchRoomEvent(r.roomId,p.relationEventId));if(f.push(S),S.threadRootId){l.add(S.threadRootId);var R=p.getUnsigned();R[P6.name]=S.threadRootId,p.setUnsigned(R)}({shouldLiveInRoom:v,shouldLiveInThread:b,threadId:C=""}=r.eventShouldLiveIn(p,f,l))}catch(w){A.error("Failed to load parent event of unhandled relation",w)}b&&!c[C]&&(c[C]=[]),(g=c[C])===null||g===void 0||g.push(p),v?r.addLiveEvent(p,d):!b&&p.isRelation()&&r.relations.aggregateChildEvent(p)}Object.entries(c).forEach(w=>{var[I,k]=w;r.addThreadedEvents(I,k,!1)})})()}partitionThreadedEvents(e){var n=0,r=1,i=2;if(this.client.supportsThreads()){var s=this.findThreadRoots(e);return e.reduce((a,o)=>{var{shouldLiveInRoom:l,shouldLiveInThread:c,threadId:d}=this.eventShouldLiveIn(o,e,s);return l&&a[n].push(o),c&&(o.setThreadId(d??""),a[r].push(o)),!c&&!l&&a[i].push(o),a},[[],[],[]])}else return[e,[],[]]}findThreadRoots(e){var n=new Set;for(var r of e){var i=r.threadRootId;i!=null&&n.add(i)}return n}addReceipt(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.getContent();this.roomReceipts.add(r,n),Object.keys(r).forEach(i=>{Object.keys(r[i]).forEach(s=>{Object.keys(r[i][s]).forEach(a=>{var o,l,c,d=r[i][s][a],f=!d.thread_id||d.thread_id===zg,p=f?this:this.threads.get((o=d.thread_id)!==null&&o!==void 0?o:"");if(p){if(p.addReceiptToStructure(i,s,a,d,n),!n&&this.client.isInitialSyncComplete()&&a===this.client.getUserId()){var g=p.timeline[p.timeline.length-1];g&&i===g.getId()&&a===g.getSender()&&(p.setUnread(Zt.Total,0),p.setUnread(Zt.Highlight,0))}}else{var y;this.cachedThreadReadReceipts.set(d.thread_id,[...(y=this.cachedThreadReadReceipts.get(d.thread_id))!==null&&y!==void 0?y:[],{eventId:i,receiptType:s,userId:a,receipt:d,synthetic:n}])}var v=this.client.getUserId();a===v&&!f&&d.ts<this.oldestThreadedReceiptTs&&(this.oldestThreadedReceiptTs=d.ts),!d.thread_id&&d.ts>((l=(c=this.unthreadedReceipts.get(a))===null||c===void 0?void 0:c.ts)!==null&&l!==void 0?l:0)&&this.unthreadedReceipts.set(a,d)})})}),this.emit(xe.Receipt,e,this)}addEphemeralEvents(e){for(var n of e)n.getType()===ee.Typing?this.currentState.setTypingEvent(n):n.getType()===ee.Receipt&&this.addReceipt(n)}removeEvents(e){for(var n of e)this.removeEvent(n)}removeEvent(e){var n=!1;for(var r of this.timelineSets){var i=r.removeEvent(e);i&&(i.isRedaction()&&this.revertRedactionLocalEcho(i),n=!0)}return n}recalculate(){var e=this.currentState.getStateEvents(ee.RoomMember,this.myUserId);if(e){var n=e.getContent().membership;if(this.updateMyMembership(n),n===Ke.Invite){var r=e.getUnsigned().invite_room_state||[];r.forEach(s=>{var a=this.currentState.getStateEvents(s.type,s.state_key);a||this.currentState.setStateEvents([new $i({type:s.type,state_key:s.state_key,content:s.content,event_id:"$fake"+Date.now(),room_id:this.roomId,sender:this.myUserId})])})}}var i=this.name;this.name=this.calculateRoomName(this.myUserId),this.normalizedName=_1e(this.name),this.summary=new tZ(this.roomId,{title:this.name}),i!==this.name&&this.emit(xe.Name,this)}addTags(e){this.tags=e.getContent().tags||{},this.emit(xe.Tags,e,this)}addAccountData(e){for(var n of e){n.getType()==="m.tag"&&this.addTags(n);var r=n.getType(),i=this.accountData.get(r);this.accountData.set(r,n),this.emit(xe.AccountData,n,this,i)}}getAccountData(e){return this.accountData.get(e)}maySendMessage(){return this.getMyMembership()===Ke.Join&&(this.hasEncryptionStateEvent()?this.currentState.maySendEvent(ee.RoomMessageEncrypted,this.myUserId):this.currentState.maySendEvent(ee.RoomMessage,this.myUserId))}canInvite(e){var n=this.getMyMembership()===Ke.Join,r=this.currentState.getStateEvents(ee.RoomPowerLevels,""),i=r&&r.getContent(),s=this.getMember(e);return i&&s&&i.invite>s.powerLevel&&(n=!1),n}getJoinRule(){return this.currentState.getJoinRule()}getHistoryVisibility(){return this.currentState.getHistoryVisibility()}getGuestAccess(){return this.currentState.getGuestAccess()}getType(){var e=this.currentState.getStateEvents(ee.RoomCreate,"");if(!e){this.getTypeWarning||(A.warn("[getType] Room "+this.roomId+" does not have an m.room.create event"),this.getTypeWarning=!0);return}return e.getContent()[M6]}isSpaceRoom(){return this.getType()===_2.Space}isCallRoom(){return this.getType()===_2.UnstableCall}isElementVideoRoom(){return this.getType()===_2.ElementVideo}findPredecessor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.getLiveTimeline().getState(Me.FORWARDS);return n?n.findPredecessor(e):null}roomNameGenerator(e){if(this.client.roomNameGenerator){var n=this.client.roomNameGenerator(this.roomId,e);if(n!==null)return n}switch(e.type){case gl.Actual:return e.name;case gl.Generated:switch(e.subtype){case"Inviting":return"Inviting ".concat(XD(e.names,e.count));default:return XD(e.names,e.count)}case gl.EmptyRoom:return e.oldName?"Empty room (was ".concat(e.oldName,")"):"Empty room"}}calculateRoomName(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n){var r=this.currentState.getStateEvents(ee.RoomName,"");if(r!=null&&r.getContent().name)return this.roomNameGenerator({type:gl.Actual,name:r.getContent().name})}var i=this.getCanonicalAlias();if(i)return this.roomNameGenerator({type:gl.Actual,name:i});var s=this.currentState.getJoinedMemberCount(),a=this.currentState.getInvitedMemberCount(),o=s+a-1,l=this.getFunctionalMembers(),c=[];if(this.heroes)this.heroes.forEach(C=>{if(l.includes(C.userId)){o--;return}if(C.displayName)c.push(C.displayName);else{var S=this.getMember(C.userId);c.push(S?S.name:C.userId)}});else{var d=this.currentState.getMembers().filter(C=>C.userId!==e&&(C.membership===Ke.Invite||C.membership===Ke.Join));d=d.filter(C=>{var{userId:S}=C;return l.includes(S)?(o--,!1):!0});var f=new Intl.Collator;d.sort((C,S)=>f.compare(C.userId,S.userId)),d=d.slice(0,5),c=d.map(C=>C.name)}if(o)return this.roomNameGenerator({type:gl.Generated,names:c,count:o});var p=this.getMyMembership();if(p==Ke.Join){var g=this.currentState.getStateEvents(ee.RoomThirdPartyInvite);if(g!=null&&g.length){var y=g.map(C=>C.getContent().display_name);return this.roomNameGenerator({type:gl.Generated,subtype:"Inviting",names:y,count:y.length+1})}}var v=c;v.length||(v=this.currentState.getMembers().filter(C=>C.userId!==e&&C.membership!==Ke.Invite&&C.membership!==Ke.Join).map(C=>C.name));var b;return v.length&&(b=this.roomNameGenerator({type:gl.Generated,names:v,count:v.length+1})),this.roomNameGenerator({type:gl.EmptyRoom,oldName:b})}applyNewVisibilityEvent(e){var n=e.asVisibilityChange();if(n){var r=e.getSender();if(r){var i=X1.name&&this.currentState.maySendStateEvent(X1.name,r)||X1.altName&&this.currentState.maySendStateEvent(X1.altName,r);if(i){var s=this.visibilityEvents.get(n.eventId);if(s){for(var a=s.length-1,o=Math.max(0,s.length-Dhe);a>=o;--a){var l=s[a];if(l.getTs()<e.getTs())break}a===-1?s.unshift(e):s.splice(a+1,0,e)}else this.visibilityEvents.set(n.eventId,[e]);var c=this.findEventById(n.eventId);c&&c.applyVisibilityEvent(n)}}}}redactVisibilityChangeEvent(e){if(!e.isVisibilityEvent)throw new Error("expected a visibility change event");var n=e.getRelation(),r=n==null?void 0:n.event_id,i=this.visibilityEvents.get(r);if(i){var s=i.findIndex(c=>c.getId()===e.getId());if(s!==-1&&(i.splice(s,1),s===i.length)){var a=this.findEventById(r);if(!a)return;if(s===0)this.visibilityEvents.delete(r),a.applyVisibilityEvent();else{var o=i[i.length-1],l=o.asVisibilityChange();if(!l)throw new Error("at this stage, visibility changes should be well-formed");a.applyVisibilityEvent(l)}}}}applyPendingVisibilityEvents(e){var n=this.visibilityEvents.get(e.getId());if(!(!n||n.length==0)){var r=n[n.length-1],i=r.asVisibilityChange();i&&(i.visible,!(r.getTs()<e.getTs())&&e.applyVisibilityEvent(i))}}getOldestThreadedReceiptTs(){return this.oldestThreadedReceiptTs}hasUserReadEvent(e,n){return this.roomReceipts.hasUserReadEvent(e,n)}getLastUnthreadedReceiptFor(e){return this.unthreadedReceipts.get(e)}fixupNotifications(e){super.fixupNotifications(e);var n=this.getThreads().filter(i=>this.getThreadUnreadNotificationCount(i.id,Zt.Total)>0);for(var r of n)r.fixupNotifications(e)}compareEventOrdering(e,n){return vhe(this,e,n)}hasEncryptionStateEvent(){var e;return!!(!((e=this.getLiveTimeline().getState(Me.FORWARDS))===null||e===void 0)&&e.getStateEvents(ee.RoomEncryption,""))}};var Uhe={[lt.ENCRYPTING]:[lt.SENDING,lt.NOT_SENT,lt.CANCELLED],[lt.SENDING]:[lt.ENCRYPTING,lt.QUEUED,lt.NOT_SENT,lt.SENT],[lt.QUEUED]:[lt.SENDING,lt.NOT_SENT,lt.CANCELLED],[lt.SENT]:[],[lt.NOT_SENT]:[lt.SENDING,lt.QUEUED,lt.CANCELLED],[lt.CANCELLED]:[]},gl=function(t){return t[t.EmptyRoom=0]="EmptyRoom",t[t.Generated=1]="Generated",t[t.Actual=2]="Actual",t}({});function XD(t,e){var n=e-1;if(t.length){if(t.length===1&&n<=1)return t[0];if(t.length===2&&n<=2)return"".concat(t[0]," and ").concat(t[1]);var r=n>1;return r?"".concat(t[0]," and ").concat(n," others"):"".concat(t[0]," and 1 other")}else return"Empty room"}var Hr=function(t){return t[t.Stable=0]="Stable",t[t.Unstable=1]="Unstable",t[t.Unsupported=2]="Unsupported",t}({}),$r=function(t){return t.Thread="Thread",t.ThreadUnreadNotifications="ThreadUnreadNotifications",t.LoginTokenRequest="LoginTokenRequest",t.RelationBasedRedactions="RelationBasedRedactions",t.AccountDataDeletion="AccountDataDeletion",t.RelationsRecursion="RelationsRecursion",t.IntentionalMentions="IntentionalMentions",t}({}),Fhe={[$r.Thread]:{unstablePrefixes:["org.matrix.msc3440"],matrixVersion:"v1.3"},[$r.ThreadUnreadNotifications]:{unstablePrefixes:["org.matrix.msc3771","org.matrix.msc3773"],matrixVersion:"v1.4"},[$r.LoginTokenRequest]:{unstablePrefixes:["org.matrix.msc3882"]},[$r.RelationBasedRedactions]:{unstablePrefixes:["org.matrix.msc3912"]},[$r.AccountDataDeletion]:{unstablePrefixes:["org.matrix.msc3391"]},[$r.RelationsRecursion]:{unstablePrefixes:["org.matrix.msc3981"],matrixVersion:"v1.10"},[$r.IntentionalMentions]:{unstablePrefixes:["org.matrix.msc3952_intentional_mentions"],matrixVersion:"v1.7"}};function jhe(t){return Gw.apply(this,arguments)}function Gw(){return Gw=F(function*(t){var e=new Map;for(var[n,r]of Object.entries(Fhe)){var i,s,a,o,l=(i=(s=t.versions)===null||s===void 0?void 0:s.includes(r.matrixVersion||""))!==null&&i!==void 0?i:!1,c=(a=(o=r.unstablePrefixes)===null||o===void 0?void 0:o.every(d=>{var f;return((f=t.unstable_features)===null||f===void 0?void 0:f[d])===!0}))!==null&&a!==void 0?a:!1;l?e.set(n,Hr.Stable):c?e.set(n,Hr.Unstable):e.set(n,Hr.Unsupported)}return e}),Gw.apply(this,arguments)}function eU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tU=80*1e3,Hhe=3,Kt=function(t){return t.Error="ERROR",t.Prepared="PREPARED",t.Stopped="STOPPED",t.Syncing="SYNCING",t.Catchup="CATCHUP",t.Reconnecting="RECONNECTING",t}({}),$he=["org.matrix.msc2716v3"];function nU(t,e){return"FILTER_SYNC_".concat(t)+(e?"_"+e:"")}function Hn(){A.log(...arguments)}var RZ=function(t){return t.Offline="offline",t.Online="online",t.Unavailable="unavailable",t}({});function IZ(t){return N6({initialSyncLimit:8,resolveInvitesToProfiles:!1,pollTimeout:30*1e3,pendingEventOrdering:im.Chronological,threadSupport:!1},t)}function xZ(t){return N6({canResetEntireTimeline:e=>!1},t)}class fd{constructor(e,n,r){var i=this;this.client=e,P(this,"opts",void 0),P(this,"syncOpts",void 0),P(this,"_peekRoom",null),P(this,"currentSyncRequest",void 0),P(this,"abortController",void 0),P(this,"syncState",null),P(this,"syncStateData",void 0),P(this,"catchingUp",!1),P(this,"running",!1),P(this,"keepAliveTimer",void 0),P(this,"connectionReturnedResolvers",void 0),P(this,"notifEvents",[]),P(this,"failedSyncCount",0),P(this,"storeIsInvalid",!1),P(this,"presence",void 0),P(this,"getPushRules",F(function*(){try{Hn("Getting push rules...");var s=yield i.client.getPushRules();Hn("Got push rules"),i.client.pushRules=s}catch(a){return A.error("Getting push rules failed",a),i.shouldAbortSync(a)?void 0:(Hn("Waiting for saved sync before retrying push rules..."),yield i.recoverFromSyncStartupError(i.savedSyncPromise,a),i.getPushRules())}})),P(this,"buildDefaultFilter",()=>{var s=new ws(this.client.credentials.userId);return this.client.canSupport.get($r.ThreadUnreadNotifications)!==Hr.Unsupported&&s.setUnreadThreadNotifications(!0),s}),P(this,"prepareLazyLoadingForSync",F(function*(){Hn("Prepare lazy loading for sync..."),i.client.isGuest()&&(i.opts.lazyLoadMembers=!1),i.opts.lazyLoadMembers&&(Hn("Enabling lazy load on sync filter..."),i.opts.filter||(i.opts.filter=i.buildDefaultFilter()),i.opts.filter.setLazyLoadMembers(!0))})),P(this,"storeClientOptions",F(function*(){try{Hn("Storing client options..."),yield i.client.storeClientOptions(),Hn("Stored client options")}catch(s){throw A.error("Storing client options failed",s),s}})),P(this,"getFilter",F(function*(){Hn("Getting filter...");var s;i.opts.filter?s=i.opts.filter:s=i.buildDefaultFilter();var a;try{a=yield i.client.getOrCreateFilter(nU(i.client.credentials.userId),s)}catch(o){return A.error("Getting filter failed",o),i.shouldAbortSync(o)?{}:(Hn("Waiting for saved sync before retrying filter..."),yield i.recoverFromSyncStartupError(i.savedSyncPromise,o),i.getFilter())}return{filter:s,filterId:a}})),P(this,"savedSyncPromise",void 0),P(this,"onOnline",()=>{Hn("Browser thinks we are back online"),this.startKeepAlives(0)}),this.opts=IZ(n),this.syncOpts=xZ(r),e.getNotifTimelineSet()&&e.reEmitter.reEmit(e.getNotifTimelineSet(),[xe.Timeline,xe.TimelineReset])}createRoom(e){var n=MZ(this.client,e,this.opts);return n.on(vt.Marker,(r,i)=>{this.onMarkerStateEvent(n,r,i)}),n}onMarkerStateEvent(e,n){var{timelineWasEmpty:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r){A.debug("MarkerState: Ignoring markerEventId=".concat(n.getId()," in roomId=").concat(e.roomId," ")+"because the timeline was empty before the marker arrived which means there is nothing to refresh.");return}var i=$he.includes(e.getVersion())||n.getSender()===e.getCreator();i?(A.debug("MarkerState: Timeline needs to be refreshed because "+"a new markerEventId=".concat(n.getId()," was sent in roomId=").concat(e.roomId)),e.setTimelineNeedsRefresh(!0),e.emit(xe.HistoryImportedWithinTimeline,n,e)):A.debug("MarkerState: Ignoring markerEventId=".concat(n.getId()," in roomId=").concat(e.roomId," because ")+"MSC2716 is not supported in the room version or for any room version, the marker wasn't sent by the room creator.")}syncLeftRooms(){var e=this;return F(function*(){var n,r=e.client,i=new ws(e.client.credentials.userId);i.setTimelineLimit(1),i.setIncludeLeaveRooms(!0);var s=e.opts.pollTimeout+tU,a=yield r.getOrCreateFilter(nU(r.credentials.userId,"LEFT_ROOMS"),i),o={timeout:0,filter:a,"org.matrix.msc4222.use_state_after":!0},l=yield r.http.authedRequest(oe.Get,"/sync",o,void 0,{localTimeoutMs:s}),c=[];(n=l.rooms)!==null&&n!==void 0&&n.leave&&(c=e.mapSyncResponseToRoomArray(l.rooms.leave));var d=yield Promise.all(c.map(function(){var f=F(function*(p){var g=p.room;if(p.isBrandNewRoom){p.timeline=p.timeline||{prev_batch:null,events:[]},g.getLiveTimeline().setPaginationToken(p.timeline.prev_batch,Me.BACKWARDS);var{timelineEvents:y}=yield e.mapAndInjectRoomEvents(p);return g.recalculate(),r.store.storeRoom(g),r.emit(Le.Room,g),e.processEventsForNotifs(g,y),g}});return function(p){return f.apply(this,arguments)}}()));return d.filter(Boolean)})()}peek(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20;if(((n=this._peekRoom)===null||n===void 0?void 0:n.roomId)===e)return Promise.resolve(this._peekRoom);var i=this.client;return this._peekRoom=this.createRoom(e),this.client.roomInitialSync(e,r).then(s=>{var a;if(((a=this._peekRoom)===null||a===void 0?void 0:a.roomId)!==e)throw new Error("Peeking aborted");s.messages=s.messages||{chunk:[]},s.messages.chunk=s.messages.chunk||[],s.state=s.state||[];var o=Wg(s.state).map(i.getEventMapper()),l=s.state.map(i.getEventMapper()),c=s.messages.chunk.map(i.getEventMapper());return Array.isArray(s.presence)&&s.presence.map(i.getEventMapper()).forEach(function(d){var f=i.store.getUser(d.getContent().user_id);f?f.setPresenceEvent(d):(f=Gc.createUser(d.getContent().user_id,i),f.setPresenceEvent(d),i.store.storeUser(f)),i.emit(Le.Event,d)}),s.messages.start&&(this._peekRoom.oldState.paginationToken=s.messages.start),this._peekRoom.oldState.setStateEvents(o),this._peekRoom.currentState.setStateEvents(l),this.resolveInvites(this._peekRoom),this._peekRoom.recalculate(),this._peekRoom.addEventsToTimeline(c.reverse(),!0,!0,this._peekRoom.getLiveTimeline(),s.messages.start),i.store.storeRoom(this._peekRoom),i.emit(Le.Room,this._peekRoom),this.peekPoll(this._peekRoom),this._peekRoom})}stopPeeking(){this._peekRoom=null}peekPoll(e,n){var r,i=this;if(this._peekRoom!==e){Hn("Stopped peeking in room %s",e.roomId);return}this.client.http.authedRequest(oe.Get,"/events",{room_id:e.roomId,timeout:String(30*1e3),from:n},void 0,{localTimeoutMs:50*1e3,abortSignal:(r=this.abortController)===null||r===void 0?void 0:r.signal}).then(function(){var s=F(function*(a){if(i._peekRoom!==e){Hn("Stopped peeking in room %s",e.roomId);return}a.chunk.filter(function(l){return l.type==="m.presence"}).map(i.client.getEventMapper()).forEach(l=>{var c=i.client.store.getUser(l.getContent().user_id);c?c.setPresenceEvent(l):(c=Gc.createUser(l.getContent().user_id,i.client),c.setPresenceEvent(l),i.client.store.storeUser(c)),i.client.emit(Le.Event,l)});var o=a.chunk.filter(function(l){return l.room_id===e.roomId&&l.event_id}).map(i.client.getEventMapper());yield e.addLiveEvents(o,{addToState:!0}),i.peekPoll(e,a.end)});return function(a){return s.apply(this,arguments)}}(),s=>{A.error("[%s] Peek poll failed: %s",e.roomId,s),setTimeout(()=>{this.peekPoll(e,n)},30*1e3)})}getSyncState(){return this.syncState}getSyncStateData(){var e;return(e=this.syncStateData)!==null&&e!==void 0?e:null}recoverFromSyncStartupError(e,n){var r=this;return F(function*(){yield e;var i=r.startKeepAlives();r.updateSyncState(Kt.Error,{error:n}),yield i})()}shouldAbortSync(e){return e.errcode==="M_UNKNOWN_TOKEN"?(A.warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(Kt.Error,{error:e}),!0):!1}sync(){var e=this;return F(function*(){var n,r;if(e.running=!0,e.abortController=new AbortController,(n=globalThis.window)===null||n===void 0||(r=n.addEventListener)===null||r===void 0||r.call(n,"online",e.onOnline,!1),e.client.isGuest())return e.doSync({});Hn("Getting saved sync token...");var i=e.client.store.getSavedSyncToken().then(d=>(Hn("Got saved sync token"),d));e.savedSyncPromise=e.client.store.getSavedSync().then(d=>{if(Hn("Got reply from saved sync, exists? ".concat(!!d)),d)return e.syncFromCache(d)}).catch(d=>{A.error("Getting saved sync failed",d)}),yield e.getPushRules(),yield e.prepareLazyLoadingForSync(),yield e.storeClientOptions();var{filterId:s,filter:a}=yield e.getFilter();if(a){if(e.client.resetNotifTimelineSet(),!e.currentSyncRequest){var o=s,l=yield i;if(l)Hn("Sending first sync request...");else{Hn("Sending initial sync request...");var c=e.buildDefaultFilter();c.setDefinition(a.getDefinition()),c.setTimelineLimit(e.opts.initialSyncLimit),o=JSON.stringify(c.getDefinition())}e.currentSyncRequest=e.doSyncRequest({filter:o},l)}return Hn("Waiting for saved sync before starting sync processing..."),yield e.savedSyncPromise,e.doSync({filter:s})}})()}stop(){var e,n,r;Hn("SyncApi.stop"),(e=globalThis.window)===null||e===void 0||(n=e.removeEventListener)===null||n===void 0||n.call(e,"online",this.onOnline,!1),this.running=!1,(r=this.abortController)===null||r===void 0||r.abort(),this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),this.keepAliveTimer=void 0)}retryImmediately(){return this.connectionReturnedResolvers?(this.startKeepAlives(0),!0):!1}syncFromCache(e){var n=this;return F(function*(){Hn("sync(): not doing HTTP hit, instead returning stored /sync data");var r=e.nextBatch;n.client.store.setSyncToken(r);var i={nextSyncToken:r,catchingUp:!1,fromCache:!0},s={next_batch:r,rooms:e.roomsData,account_data:{events:e.accountData}};try{yield n.processSyncResponse(i,s)}catch(a){A.error("Error processing cached sync",a)}n.storeIsInvalid||n.updateSyncState(Kt.Prepared,i)})()}doSync(e){var n=this;return F(function*(){for(;n.running;){var r=n.client.store.getSyncToken(),i=void 0;try{n.currentSyncRequest||(n.currentSyncRequest=n.doSyncRequest(e,r)),i=yield n.currentSyncRequest}catch(o){var s=yield n.onSyncError(o);if(s)return;continue}finally{n.currentSyncRequest=void 0}n.client.store.setSyncToken(i.next_batch),n.failedSyncCount=0;var a={oldSyncToken:r??void 0,nextSyncToken:i.next_batch,catchingUp:n.catchingUp};try{yield n.processSyncResponse(a,i)}catch(o){A.error("Caught /sync error",o),n.client.emit(Le.SyncUnexpectedError,o)}yield n.client.store.setSyncData(i),a.catchingUp=n.catchingUp,e.hasSyncedBefore||(n.updateSyncState(Kt.Prepared,a),e.hasSyncedBefore=!0),n.syncOpts.cryptoCallbacks&&(yield n.syncOpts.cryptoCallbacks.onSyncCompleted(a)),n.updateSyncState(Kt.Syncing,a),n.client.store.wantsSave()&&(yield n.client.store.save())}n.running||(Hn("Sync no longer running: exiting."),n.connectionReturnedResolvers&&(n.connectionReturnedResolvers.reject(),n.connectionReturnedResolvers=void 0),n.updateSyncState(Kt.Stopped))})()}doSyncRequest(e,n){var r,i=this.getSyncParams(e,n);return this.client.http.authedRequest(oe.Get,"/sync",i,void 0,{localTimeoutMs:i.timeout+tU,abortSignal:(r=this.abortController)===null||r===void 0?void 0:r.signal})}getSyncParams(e,n){var r=this.opts.pollTimeout;(this.getSyncState()!==Kt.Syncing||this.catchingUp)&&(this.catchingUp=!0,r=0);var i=e.filter;this.client.isGuest()&&!i&&(i=this.getGuestFilter());var s={filter:i,timeout:r,"org.matrix.msc4222.use_state_after":!0};return this.opts.disablePresence?s.set_presence=RZ.Offline:this.presence!==void 0&&(s.set_presence=this.presence),n?s.since=n:s._cacheBuster=Date.now(),[Kt.Reconnecting,Kt.Error].includes(this.getSyncState())&&(s.timeout=0),s}setPresence(e){this.presence=e}onSyncError(e){var n=this;return F(function*(){if(!n.running)return Hn("Sync no longer running: exiting"),n.connectionReturnedResolvers&&(n.connectionReturnedResolvers.reject(),n.connectionReturnedResolvers=void 0),n.updateSyncState(Kt.Stopped),!0;if(A.error("/sync error %s",e),n.shouldAbortSync(e))return!0;n.failedSyncCount++,A.log("Number of consecutive failed sync requests:",n.failedSyncCount),Hn("Starting keep-alive");var r=n.startKeepAlives();n.currentSyncRequest=void 0,n.updateSyncState(n.failedSyncCount>=Hhe?Kt.Error:Kt.Reconnecting,{error:e});var i=yield r;return i&&n.getSyncState()===Kt.Error&&n.updateSyncState(Kt.Catchup,{catchingUp:!0}),!1})()}processSyncResponse(e,n){var r=this;return F(function*(){var i,s,a,o,l=r.client;if(Array.isArray((i=n.presence)===null||i===void 0?void 0:i.events)&&n.presence.events.filter(Po).map(l.getEventMapper()).forEach(function(C){var S=l.store.getUser(C.getSender());S?S.setPresenceEvent(C):(S=Gc.createUser(C.getSender(),l),S.setPresenceEvent(C),l.store.storeUser(S)),l.emit(Le.Event,C)}),Array.isArray((s=n.account_data)===null||s===void 0?void 0:s.events)){var c=n.account_data.events.filter(Po).map(l.getEventMapper()),d=c.reduce((C,S)=>(C[S.getType()]=l.store.getAccountData(S.getType()),C),{});l.store.storeAccountDataEvents(c),c.forEach(function(C){if(C.getType()===ee.PushRules){var S=C.getContent();l.setPushRules(S)}var R=d[C.getType()];return l.emit(Le.AccountData,C,R),C})}if(n.to_device&&Array.isArray(n.to_device.events)&&n.to_device.events.length>0){var f=n.to_device.events.filter(Po);r.syncOpts.cryptoCallbacks&&(f=yield r.syncOpts.cryptoCallbacks.preprocessToDeviceMessages(f));var p=[];f.map(PZ).map(C=>{if(C.getType()==="m.key.verification.cancel"){var S=C.getContent().transaction_id;S&&p.push(S)}return C}).forEach(function(C){var S=C.getContent();if(C.getType()=="m.room.message"&&S.msgtype=="m.bad.encrypted"){A.log("Ignoring undecryptable to-device event from "+C.getSender());return}if(C.getType()==="m.key.verification.start"||C.getType()==="m.key.verification.request"){var R=S.transaction_id;p.includes(R)&&C.flagCancelled()}l.emit(Le.ToDeviceEvent,C)})}else r.catchingUp=!1;var g=[],y=[],v=[],b=[];n.rooms&&(n.rooms.invite&&(g=r.mapSyncResponseToRoomArray(n.rooms.invite)),n.rooms.join&&(y=r.mapSyncResponseToRoomArray(n.rooms.join)),n.rooms.leave&&(v=r.mapSyncResponseToRoomArray(n.rooms.leave)),n.rooms.knock&&(b=r.mapSyncResponseToRoomArray(n.rooms.knock))),r.notifEvents=[],yield s2(g,function(){var C=F(function*(S){var R=S.room,w=r.mapSyncEventsFormat(S.invite_state,R);yield r.injectRoomEvents(R,w,void 0),S.isBrandNewRoom?(R.recalculate(),l.store.storeRoom(R),l.emit(Le.Room,R)):R.recalculate(),w.forEach(function(I){l.emit(Le.Event,I)})});return function(S){return C.apply(this,arguments)}}()),yield s2(y,function(){var C=F(function*(S){var R,w=S.room,I=r.mapSyncEventsFormat(S.state,w),k=r.mapSyncEventsFormat(S["org.matrix.msc4222.state_after"],w),x=r.mapSyncEventsFormat(S.timeline,w,!1),L=r.mapSyncEventsFormat(S.ephemeral),N=r.mapSyncEventsFormat(S.account_data),D=S["org.matrix.msc4222.state_after"]?k:I.concat(x),U=r.isRoomEncrypted(w,D);if(S.unread_notifications){if(!U||S.unread_notifications.notification_count===0){var j;w.setUnreadNotificationCount(Zt.Total,(j=S.unread_notifications.notification_count)!==null&&j!==void 0?j:0)}if(!U||w.getUnreadNotificationCount(Zt.Highlight)<=0){var $;w.setUnreadNotificationCount(Zt.Highlight,($=S.unread_notifications.highlight_count)!==null&&$!==void 0?$:0)}}var Z=(R=S[W0.name])!==null&&R!==void 0?R:S[W0.altName];if(Z){w.resetThreadUnreadNotificationCountFromSync(Object.keys(Z));for(var[V,z]of Object.entries(Z)){if(!U||z.notification_count===0){var K;w.setThreadUnreadNotificationCount(V,Zt.Total,(K=z.notification_count)!==null&&K!==void 0?K:0)}var q=w.getThreadUnreadNotificationCount(V,Zt.Highlight)<=0;if(!U||U&&q){var G;w.setThreadUnreadNotificationCount(V,Zt.Highlight,(G=z.highlight_count)!==null&&G!==void 0?G:0)}}}else w.resetThreadUnreadNotificationCountFromSync();if(S.timeline=S.timeline||{},S.isBrandNewRoom)S.timeline.prev_batch!==null&&w.getLiveTimeline().setPaginationToken(S.timeline.prev_batch,Me.BACKWARDS);else if(S.timeline.limited){for(var J=!0,B=x.length-1;B>=0;B--){var Q=x[B].getId();if(w.getTimelineForEvent(Q)){Hn("Already have event ".concat(Q," in limited sync - not resetting")),J=!1,x.splice(0,B);break}}if(J){var pe;w.resetLiveTimeline(S.timeline.prev_batch,r.syncOpts.canResetEntireTimeline(w.roomId)?null:(pe=e.oldSyncToken)!==null&&pe!==void 0?pe:null),l.resetNotifTimelineSet()}}if(r.syncOpts.cryptoCallbacks)for(var ve of D)ve.isState()&&ve.getType()===ee.RoomEncryption&&ve.getStateKey()===""&&(yield r.syncOpts.cryptoCallbacks.onCryptoEvent(w,ve));try{"org.matrix.msc4222.state_after"in S?yield r.injectRoomEvents(w,void 0,k,x,e.fromCache):yield r.injectRoomEvents(w,I,void 0,x,e.fromCache)}catch(Te){A.error("Failed to process events on room ".concat(w.roomId,":"),Te)}S.summary&&w.setSummary(S.summary),w.addEphemeralEvents(L),w.addAccountData(N),w.recalculate(),S.isBrandNewRoom&&(l.store.storeRoom(w),l.emit(Le.Room,w)),r.processEventsForNotifs(w,x);var Re=Te=>l.emit(Le.Event,Te);I.forEach(Re),x.forEach(Re),L.forEach(Re),N.forEach(Re),w.decryptCriticalEvents()});return function(S){return C.apply(this,arguments)}}()),yield s2(v,function(){var C=F(function*(S){var R=S.room,{timelineEvents:w,stateEvents:I,stateAfterEvents:k}=yield r.mapAndInjectRoomEvents(S),x=r.mapSyncEventsFormat(S.account_data);R.addAccountData(x),R.recalculate(),S.isBrandNewRoom&&(l.store.storeRoom(R),l.emit(Le.Room,R)),r.processEventsForNotifs(R,w),I==null||I.forEach(function(L){l.emit(Le.Event,L)}),k==null||k.forEach(function(L){l.emit(Le.Event,L)}),w.forEach(function(L){l.emit(Le.Event,L)}),x.forEach(function(L){l.emit(Le.Event,L)})});return function(S){return C.apply(this,arguments)}}()),yield s2(b,function(){var C=F(function*(S){var R=S.room,w=r.mapSyncEventsFormat(S.knock_state,R);yield r.injectRoomEvents(R,w,void 0),S.isBrandNewRoom?(R.recalculate(),l.store.storeRoom(R),l.emit(Le.Room,R)):R.recalculate(),w.forEach(function(I){l.emit(Le.Event,I)})});return function(S){return C.apply(this,arguments)}}()),e.oldSyncToken&&r.notifEvents.length&&(r.notifEvents.sort(function(C,S){return C.getTs()-S.getTs()}),r.notifEvents.forEach(function(C){var S;(S=l.getNotifTimelineSet())===null||S===void 0||S.addLiveEvent(C,{addToState:!0})})),n.device_lists&&r.syncOpts.cryptoCallbacks&&(yield r.syncOpts.cryptoCallbacks.processDeviceLists(n.device_lists)),yield(a=r.syncOpts.cryptoCallbacks)===null||a===void 0?void 0:a.processKeyCounts(n.device_one_time_keys_count,(o=n.device_unused_fallback_key_types)!==null&&o!==void 0?o:n["org.matrix.msc2732.device_unused_fallback_key_types"])})()}startKeepAlives(e){return e===void 0&&(e=2e3+Math.floor(Math.random()*5e3)),this.keepAliveTimer!==null&&clearTimeout(this.keepAliveTimer),e>0?this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this),e):this.pokeKeepAlive(),this.connectionReturnedResolvers||(this.connectionReturnedResolvers=Promise.withResolvers()),this.connectionReturnedResolvers.promise}pokeKeepAlive(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.running){clearTimeout(this.keepAliveTimer),this.connectionReturnedResolvers&&(this.connectionReturnedResolvers.reject("SyncApi.stop() was called"),this.connectionReturnedResolvers=void 0);return}var r=()=>{clearTimeout(this.keepAliveTimer),this.connectionReturnedResolvers&&(this.connectionReturnedResolvers.resolve(n),this.connectionReturnedResolvers=void 0)};this.client.http.request(oe.Get,"/_matrix/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15*1e3,abortSignal:(e=this.abortController)===null||e===void 0?void 0:e.signal}).then(()=>{r()},i=>{i.httpStatus==400||i.httpStatus==404?this.keepAliveTimer=setTimeout(r,2e3):(n=!0,this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this,n),5e3+Math.floor(Math.random()*5e3)),this.updateSyncState(Kt.Error,{error:i}))})}mapSyncResponseToRoomArray(e){var n=this.client;return Object.keys(e).filter(r=>!c0(r)).map(r=>{var i=n.store.getRoom(r),s=!1;return i||(i=this.createRoom(r),s=!0),N6(N6({},e[r]),{},{room:i,isBrandNewRoom:s})})}mapSyncEventsFormat(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!Array.isArray(e.events))return[];var i=this.client.getEventMapper({decrypt:r});return e.events.filter(Po).map(function(s){return n&&(s.room_id=n.roomId),i(s)})}resolveInvites(e){if(!(!e||!this.opts.resolveInvitesToProfiles)){var n=this.client;e.getMembersWithMembership(Ke.Invite).forEach(function(r){if(!r.requestedProfileInfo){r.requestedProfileInfo=!0;var i=n.getUser(r.userId),s;i?s=Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):s=n.getProfileInfo(r.userId),s.then(function(a){var o=r.events.member;(o==null?void 0:o.getContent().membership)===Ke.Invite&&(o.getContent().avatar_url=a.avatar_url,o.getContent().displayname=a.displayname,r.setMembershipEvent(o,e.currentState))},function(a){})}})}}findEncryptionEvent(e){return e==null?void 0:e.find(n=>n.getType()===ee.RoomEncryption&&n.getStateKey()==="")}isRoomEncrypted(e,n){return e.hasEncryptionStateEvent()||!!this.findEncryptionEvent(n)}mapAndInjectRoomEvents(e){var n=this;return F(function*(){var r=n.mapSyncEventsFormat(e.state,e.room),i=n.mapSyncEventsFormat(e["org.matrix.msc4222.state_after"],e.room),s=n.mapSyncEventsFormat(e.timeline,e.room);return"org.matrix.msc4222.state_after"in e?yield n.injectRoomEvents(e.room,void 0,i,s):yield n.injectRoomEvents(e.room,r,void 0,s),{timelineEvents:s,stateEvents:r,stateAfterEvents:i}})()}injectRoomEvents(e,n,r,i){var s=arguments,a=this;return F(function*(){var o=s.length>4&&s[4]!==void 0?s[4]:!1,l=r??n,c=e.getLiveTimeline(),d=c.getEvents().length==0;if(d){for(var f of l)a.client.getPushActionsForEvent(f);c.initialiseState(l,{timelineWasEmpty:d})}a.resolveInvites(e),e.recalculate(),d||(e.oldState.setStateEvents(l),e.currentState.setStateEvents(l)),yield e.addLiveEvents(i||[],{fromCache:o,timelineWasEmpty:d,addToState:r===void 0}),a.client.processBeaconEvents(e,i)})()}processEventsForNotifs(e,n){if(this.client.getNotifTimelineSet())for(var r of n){var i,s=this.client.getPushActionsForEvent(r);s!=null&&s.notify&&(i=s.tweaks)!==null&&i!==void 0&&i.highlight&&this.notifEvents.push(r)}}getGuestFilter(){return"{}"}updateSyncState(e,n){var r=this.syncState;this.syncState=e,this.syncStateData=n,this.client.emit(Le.Sync,this.syncState,r,n)}}function MZ(t,e,n){var{timelineSupport:r}=t,i=new E9(e,t,t.getUserId(),{lazyLoadMembers:n.lazyLoadMembers,pendingEventOrdering:n.pendingEventOrdering,timelineSupport:r});return t.reEmitter.reEmit(i,[xe.Name,xe.Redaction,xe.RedactionCancelled,xe.Receipt,xe.Tags,xe.LocalEchoUpdated,xe.AccountData,xe.MyMembership,xe.Timeline,xe.TimelineReset,vt.Events,vt.Members,vt.NewMember,vt.Update,Ln.New,Ln.Update,Ln.Destroy,Ln.LivenessChange]),i.on(vt.NewMember,(s,a,o)=>{var l;o.user=(l=t.getUser(o.userId))!==null&&l!==void 0?l:void 0,t.reEmitter.reEmit(o,[xs.Name,xs.Typing,xs.PowerLevel,xs.Membership])}),i}function PZ(t){return delete t.room_id,new $i(t)}class Vhe{constructor(){P(this,"accountData",new Map),P(this,"fromToken",null)}isNewlyCreated(){return Promise.resolve(!0)}getSyncToken(){return this.fromToken}setSyncToken(e){this.fromToken=e}storeRoom(e){}getRoom(e){return null}getRooms(){return[]}removeRoom(e){}getRoomSummaries(){return[]}storeUser(e){}getUser(e){return null}getUsers(){return[]}scrollback(e,n){return[]}setUserCreator(e){}storeEvents(e,n,r,i){}storeFilter(e){}getFilter(e,n){return null}getFilterIdByName(e){return null}setFilterIdByName(e,n){}storeAccountDataEvents(e){}getAccountData(e){}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(){return Promise.resolve()}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return Promise.resolve()}getOutOfBandMembers(){return Promise.resolve(null)}setOutOfBandMembers(e,n){return Promise.resolve()}clearOutOfBandMembers(){return Promise.resolve()}getClientOptions(){return Promise.resolve(void 0)}storeClientOptions(e){return Promise.resolve()}getPendingEvents(e){return F(function*(){return[]})()}setPendingEvents(e,n){return Promise.resolve()}saveToDeviceBatches(e){return F(function*(){return Promise.resolve()})()}getOldestToDeviceBatch(){return Promise.resolve(null)}removeToDeviceBatch(e){return F(function*(){return Promise.resolve()})()}destroy(){return F(function*(){})()}}const Ci=[];for(let t=0;t<256;++t)Ci.push((t+256).toString(16).slice(1));function Bhe(t,e=0){return(Ci[t[e+0]]+Ci[t[e+1]]+Ci[t[e+2]]+Ci[t[e+3]]+"-"+Ci[t[e+4]]+Ci[t[e+5]]+"-"+Ci[t[e+6]]+Ci[t[e+7]]+"-"+Ci[t[e+8]]+Ci[t[e+9]]+"-"+Ci[t[e+10]]+Ci[t[e+11]]+Ci[t[e+12]]+Ci[t[e+13]]+Ci[t[e+14]]+Ci[t[e+15]]).toLowerCase()}let yb;const qhe=new Uint8Array(16);function Ghe(){if(!yb){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yb=crypto.getRandomValues.bind(crypto)}return yb(qhe)}const Khe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rU={randomUUID:Khe};function Zhe(t,e,n){var i;if(rU.randomUUID&&!t)return rU.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Ghe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bhe(r)}var bo={},_b={},Cb={exports:{}},iU;function BI(){if(iU)return Cb.exports;iU=1;var t=Cb.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Cb.exports}var sU;function zhe(){return sU||(sU=1,function(t){var e=function(o){return String(Number(o))===o?Number(o):o},n=function(o,l,c,d){if(d&&!c)l[d]=e(o[1]);else for(var f=0;f<c.length;f+=1)o[f+1]!=null&&(l[c[f]]=e(o[f+1]))},r=function(o,l,c){var d=o.name&&o.names;o.push&&!l[o.push]?l[o.push]=[]:d&&!l[o.name]&&(l[o.name]={});var f=o.push?{}:d?l[o.name]:l;n(c.match(o.reg),f,o.names,o.name),o.push&&l[o.push].push(f)},i=BI(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var l={},c=[],d=l;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(f){var p=f[0],g=f.slice(2);p==="m"&&(c.push({rtp:[],fmtp:[]}),d=c[c.length-1]);for(var y=0;y<(i[p]||[]).length;y+=1){var v=i[p][y];if(v.reg.test(g))return r(v,d,g)}}),l.media=c,l};var a=function(o,l){var c=l.split(/=(.+)/,2);return c.length===2?o[c[0]]=e(c[1]):c.length===1&&l.length>1&&(o[c[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var l=[],c=o.split(" ").map(e),d=0;d<c.length;d+=3)l.push({component:c[d],ip:c[d+1],port:c[d+2]});return l},t.parseImageAttributes=function(o){return o.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(l){return l.split(",").map(function(c){var d,f=!1;return c[0]!=="~"?d=e(c):(d=e(c.substring(1,c.length)),f=!0),{scid:d,paused:f}})})}}(_b)),_b}var bb,aU;function Whe(){if(aU)return bb;aU=1;var t=BI(),e=/%[sdv%]/g,n=function(a){var o=1,l=arguments,c=l.length;return a.replace(e,function(d){if(o>=c)return d;var f=l[o];switch(o+=1,d){case"%%":return"%";case"%s":return String(f);case"%d":return Number(f);case"%v":return""}})},r=function(a,o,l){var c=o.format instanceof Function?o.format(o.push?l:l[o.name]):o.format,d=[a+"="+c];if(o.names)for(var f=0;f<o.names.length;f+=1){var p=o.names[f];o.name?d.push(l[o.name][p]):d.push(l[o.names[f]])}else d.push(l[o.name]);return n.apply(null,d)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return bb=function(a,o){o=o||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(f){f.payloads==null&&(f.payloads="")});var l=o.outerOrder||i,c=o.innerOrder||s,d=[];return l.forEach(function(f){t[f].forEach(function(p){p.name in a&&a[p.name]!=null?d.push(r(f,p,a)):p.push in a&&a[p.push]!=null&&a[p.push].forEach(function(g){d.push(r(f,p,g))})})}),a.media.forEach(function(f){d.push(r("m",t.m[0],f)),c.forEach(function(p){t[p].forEach(function(g){g.name in f&&f[g.name]!=null?d.push(r(p,g,f)):g.push in f&&f[g.push]!=null&&f[g.push].forEach(function(y){d.push(r(p,g,y))})})})}),d.join(`\r
`)+`\r
`},bb}var oU;function Yhe(){if(oU)return bo;oU=1;var t=zhe(),e=Whe(),n=BI();return bo.grammar=n,bo.write=e,bo.parse=t.parse,bo.parseParams=t.parseParams,bo.parseFmtpConfig=t.parseFmtpConfig,bo.parsePayloads=t.parsePayloads,bo.parseRemoteCandidates=t.parseRemoteCandidates,bo.parseImageAttributes=t.parseImageAttributes,bo.parseSimulcastStreamList=t.parseSimulcastStreamList,bo}var Kw=Yhe();function qI(t,e){if(typeof t.toBase64=="function")return t.toBase64(e);var n=btoa(t.reduce((r,i)=>r+String.fromCharCode(i),""));return e.omitPadding&&(n=n.replace(/={1,2}$/,"")),e.alphabet==="base64url"&&(n=n.replace(/\+/g,"-").replace(/\//g,"_")),n}function _7(t){return qI(t,{alphabet:"base64",omitPadding:!1})}function LZ(t){return qI(t,{alphabet:"base64",omitPadding:!0})}function S9(t){return qI(t,{alphabet:"base64url",omitPadding:!0})}function Jhe(t,e){return typeof Uint8Array.fromBase64=="function"?Uint8Array.fromBase64(t,e):Uint8Array.from(atob(t),n=>n.charCodeAt(0))}function b2(t){return Jhe(t.replace(/-/g,"+").replace(/_/g,"/"),{alphabet:"base64",lastChunkHandling:"loose"})}var Qhe="abcdefghijklmnopqrstuvwxyz",Xhe="ABCDEFGHIJKLMNOPQRSTUVWXYZ",efe="0123456789";function OZ(t){var e=new Uint8Array(t);return globalThis.crypto.getRandomValues(e),S9(e)}function Ba(t){return tfe(t,Xhe+Qhe+efe)}function tfe(t,e){if(e.length<2||e.length>256)throw new Error("Character set must be between 2 and 256 characters long");if(t<1||t>32768)throw new Error("Requested random string length must be between 1 and 32768");for(var n=256-256%e.length,r=new Uint8Array(Math.floor(t*1.3)),i=r.length,s=[];s.length<t;){i===r.length&&(globalThis.crypto.getRandomValues(r),i=0);var a=r[i++];a<n&&s.push(e[a%e.length])}return s.join("")}var Gu="org.matrix.msc3077.sdp_stream_metadata",pn=function(t){return t.Usermedia="m.usermedia",t.Screenshare="m.screenshare",t}({}),d0=null,Zw=0,nfe=()=>(d0===null&&(d0=new AudioContext),Zw++,d0),rfe=()=>{if(Zw--,Zw===0){var t;(t=d0)===null||t===void 0||t.close(),d0=null}},ife=200,zw=-60,sfe=8,vl=function(t){return t.NewStream="new_stream",t.MuteStateChanged="mute_state_changed",t.LocalVolumeChanged="local_volume_changed",t.VolumeChanged="volume_changed",t.ConnectedChanged="connected_changed",t.Speaking="speaking",t.Disposed="disposed",t}({});class Lc extends Un{constructor(e){super(),P(this,"stream",void 0),P(this,"sdpMetadataStreamId",void 0),P(this,"userId",void 0),P(this,"deviceId",void 0),P(this,"purpose",void 0),P(this,"speakingVolumeSamples",void 0),P(this,"client",void 0),P(this,"call",void 0),P(this,"roomId",void 0),P(this,"audioMuted",void 0),P(this,"videoMuted",void 0),P(this,"localVolume",1),P(this,"measuringVolumeActivity",!1),P(this,"audioContext",void 0),P(this,"analyser",void 0),P(this,"frequencyBinCount",void 0),P(this,"speakingThreshold",zw),P(this,"speaking",!1),P(this,"volumeLooperTimeout",void 0),P(this,"_disposed",!1),P(this,"_connected",!1),P(this,"onAddTrack",()=>{this.emit(vl.NewStream,this.stream)}),P(this,"onCallState",n=>{n===ut.Connected?this.connected=!0:n===ut.Connecting&&(this.connected=!1)}),P(this,"volumeLooper",()=>{if(this.analyser&&this.measuringVolumeActivity){this.analyser.getFloatFrequencyData(this.frequencyBinCount);var n=-1/0;for(var r of this.frequencyBinCount)r>n&&(n=r);this.speakingVolumeSamples.shift(),this.speakingVolumeSamples.push(n),this.emit(vl.VolumeChanged,n);var i=!1;for(var s of this.speakingVolumeSamples)if(s>this.speakingThreshold){i=!0;break}this.speaking!==i&&(this.speaking=i,this.emit(vl.Speaking,this.speaking)),this.volumeLooperTimeout=setTimeout(this.volumeLooper,ife)}}),this.client=e.client,this.call=e.call,this.roomId=e.roomId,this.userId=e.userId,this.deviceId=e.deviceId,this.purpose=e.purpose,this.audioMuted=e.audioMuted,this.videoMuted=e.videoMuted,this.speakingVolumeSamples=new Array(sfe).fill(-1/0),this.sdpMetadataStreamId=e.stream.id,this.updateStream(null,e.stream),this.stream=e.stream,this.hasAudioTrack&&this.initVolumeMeasuring(),e.call&&(e.call.addListener(_t.State,this.onCallState),this.onCallState(e.call.state))}get connected(){return this.isLocal()||this._connected}set connected(e){this._connected=e,this.emit(vl.ConnectedChanged,this.connected)}get hasAudioTrack(){return this.stream.getAudioTracks().length>0}updateStream(e,n){if(n!==e){var r=this.measuringVolumeActivity;e&&(e.removeEventListener("addtrack",this.onAddTrack),this.measureVolumeActivity(!1)),this.stream=n,n.addEventListener("addtrack",this.onAddTrack),this.hasAudioTrack?(this.initVolumeMeasuring(),r&&this.measureVolumeActivity(!0)):this.measureVolumeActivity(!1),this.emit(vl.NewStream,this.stream)}}initVolumeMeasuring(){if(this.hasAudioTrack){this.audioContext||(this.audioContext=nfe()),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.1;var e=this.audioContext.createMediaStreamSource(this.stream);e.connect(this.analyser),this.frequencyBinCount=new Float32Array(this.analyser.frequencyBinCount)}}getMember(){var e,n=this.client.getRoom(this.roomId);return(e=n==null?void 0:n.getMember(this.userId))!==null&&e!==void 0?e:null}isLocal(){return this.userId===this.client.getUserId()&&(this.deviceId===void 0||this.deviceId===this.client.getDeviceId())}isAudioMuted(){return this.stream.getAudioTracks().length===0||this.audioMuted}isVideoMuted(){return this.stream.getVideoTracks().length===0||this.videoMuted}isSpeaking(){return this.speaking}setNewStream(e){this.updateStream(this.stream,e)}setAudioVideoMuted(e,n){e!==null&&(this.audioMuted!==e&&this.speakingVolumeSamples.fill(-1/0),this.audioMuted=e),n!==null&&(this.videoMuted=n),this.emit(vl.MuteStateChanged,this.audioMuted,this.videoMuted)}measureVolumeActivity(e){if(e){if(!this.analyser||!this.frequencyBinCount||!this.hasAudioTrack)return;this.measuringVolumeActivity=!0,this.volumeLooper()}else this.measuringVolumeActivity=!1,this.speakingVolumeSamples.fill(-1/0),this.emit(vl.VolumeChanged,-1/0)}setSpeakingThreshold(e){this.speakingThreshold=e}clone(){var e=this.client.getMediaHandler(),n=this.stream.clone();return A.log("CallFeed clone() cloning stream (originalStreamId=".concat(this.stream.id,", newStreamId").concat(n.id,")")),this.purpose===pn.Usermedia?e.userMediaStreams.push(n):e.screensharingStreams.push(n),new Lc({client:this.client,roomId:this.roomId,userId:this.userId,deviceId:this.deviceId,stream:n,purpose:this.purpose,audioMuted:this.audioMuted,videoMuted:this.videoMuted})}dispose(){var e,n;clearTimeout(this.volumeLooperTimeout),(e=this.stream)===null||e===void 0||e.removeEventListener("addtrack",this.onAddTrack),(n=this.call)===null||n===void 0||n.removeListener(_t.State,this.onCallState),this.audioContext&&(this.audioContext=void 0,this.analyser=void 0,rfe()),this._disposed=!0,this.emit(vl.Disposed)}get disposed(){return this._disposed}set disposed(e){this._disposed=e}getLocalVolume(){return this.localVolume}setLocalVolume(e){this.localVolume=e,this.emit(vl.LocalVolumeChanged,e)}}var afe=3e3,Ww=function(t){return t.Incoming="Call.incoming",t}({});class ofe{constructor(e){P(this,"calls",void 0),P(this,"callEventBuffer",void 0),P(this,"nextSeqByCall",new Map),P(this,"toDeviceEventBuffers",new Map),P(this,"client",void 0),P(this,"candidateEventsByCall",void 0),P(this,"eventBufferPromiseChain",void 0),P(this,"onSync",()=>{var n=this.callEventBuffer;this.callEventBuffer=[],this.eventBufferPromiseChain?this.eventBufferPromiseChain=this.eventBufferPromiseChain.then(()=>this.evaluateEventBuffer(n)):this.eventBufferPromiseChain=this.evaluateEventBuffer(n)}),P(this,"onRoomTimeline",n=>{this.callEventBuffer.push(n)}),P(this,"onToDeviceEvent",n=>{var r=n.getContent();if(!r.call_id){this.callEventBuffer.push(n);return}if(this.nextSeqByCall.has(r.call_id)||this.nextSeqByCall.set(r.call_id,0),r.seq===void 0){this.callEventBuffer.push(n);return}var i=this.nextSeqByCall.get(r.call_id)||0;if(r.seq!==i){this.toDeviceEventBuffers.has(r.call_id)||this.toDeviceEventBuffers.set(r.call_id,[]);var s=this.toDeviceEventBuffers.get(r.call_id),a=s.findIndex(d=>d.getContent().seq>r.seq);a===-1?s.push(n):s.splice(a,0,n)}else{var o=r.call_id;this.callEventBuffer.push(n),this.nextSeqByCall.set(o,r.seq+1);for(var l=this.toDeviceEventBuffers.get(o),c=l&&l.shift();c&&c.getContent().seq===this.nextSeqByCall.get(o);)this.callEventBuffer.push(c),this.nextSeqByCall.set(o,c.getContent().seq+1),c=l.shift()}}),this.client=e,this.calls=new Map,this.callEventBuffer=[],this.candidateEventsByCall=new Map}start(){this.client.on(Le.Sync,this.onSync),this.client.on(xe.Timeline,this.onRoomTimeline),this.client.on(Le.ToDeviceEvent,this.onToDeviceEvent)}stop(){this.client.removeListener(Le.Sync,this.onSync),this.client.removeListener(xe.Timeline,this.onRoomTimeline),this.client.removeListener(Le.ToDeviceEvent,this.onToDeviceEvent)}evaluateEventBuffer(e){var n=this;return F(function*(){yield Promise.all(e.map(d=>n.client.decryptEventIfNeeded(d)));var r=e.filter(d=>{var f=d.getType();return f.startsWith("m.call.")||f.startsWith("org.matrix.call.")}),i=new Set;for(var s of r){var a=s.getType();(a===ee.CallAnswer||a===ee.CallHangup)&&i.add(s.getContent().call_id)}for(var o of r){var l=o.getType(),c=o.getContent().call_id;if(!(l===ee.CallInvite&&i.has(c)))try{yield n.handleCallEvent(o)}catch(d){A.error("CallEventHandler evaluateEventBuffer() caught exception handling call event",d)}}})()}handleCallEvent(e){var n=this;return F(function*(){var r;n.client.emit(Le.ReceivedVoipEvent,e);var i=e.getContent(),s=e.getRoomId()||((r=n.client.groupCallEventHandler.getGroupCallById(i.conf_id))===null||r===void 0||(r=r.room)===null||r===void 0?void 0:r.roomId),a=i.conf_id,o=e.getType(),l=e.getSender(),c=i.call_id?n.calls.get(i.call_id):void 0,d,f;if(a){if(f=n.client.groupCallEventHandler.getGroupCallById(a),!f){A.warn("CallEventHandler handleCallEvent() could not find a group call - ignoring event (groupCallId=".concat(a,", type=").concat(o,")"));return}if(d=i.device_id,!d){A.warn("CallEventHandler handleCallEvent() could not find a device id - ignoring event (senderId=".concat(l,")")),f.emit(mn.Error,new DZ(l));return}if(i.dest_session_id!==n.client.getSessionId()){A.warn("CallEventHandler handleCallEvent() call event does not match current session id - ignoring");return}}var p=l===n.client.credentials.userId&&(d===void 0||d===n.client.getDeviceId());if(s){if(o===ee.CallInvite){var g,y,v;if(p||e.getLocalAge()>i.lifetime-afe||c&&c.state===ut.Ended||(c&&A.warn("CallEventHandler handleCallEvent() already has a call but got an invite - clobbering (callId=".concat(i.call_id,")")),i.invitee&&i.invitee!==n.client.getUserId()))return;var b=((g=n.client.getTurnServersExpiry())!==null&&g!==void 0?g:0)-Date.now();if(A.info("CallEventHandler handleCallEvent() current turn creds expire in "+b+" ms"),c=(y=J0(n.client,s,{forceTURN:n.client.forceTURN,opponentDeviceId:d,groupCallId:a,opponentSessionId:i.sender_session_id}))!==null&&y!==void 0?y:void 0,!c){A.log("CallEventHandler handleCallEvent() this client does not support WebRTC (callId=".concat(i.call_id,")"));return}c.callId=i.call_id;var C=(v=f)===null||v===void 0?void 0:v.getGroupCallStats();C&&c.initStats(C);try{yield c.initWithInvite(e)}catch(N){if(N instanceof Cc)if(N.code===f0.UnknownDevice){var S;(S=f)===null||S===void 0||S.emit(mn.Error,N)}else A.error(N)}if(n.calls.set(c.callId,c),n.candidateEventsByCall.get(c.callId))for(var R of n.candidateEventsByCall.get(c.callId))c.onRemoteIceCandidatesReceived(R);var w;for(var I of n.calls.values()){var k,x=[ut.WaitLocalMedia,ut.CreateOffer,ut.InviteSent].includes(I.state);if(c.roomId===I.roomId&&I.direction===ed.Outbound&&((k=c.getOpponentMember())===null||k===void 0?void 0:k.userId)===I.invitee&&x){w=I;break}}w?w.callId>c.callId?(A.log("CallEventHandler handleCallEvent() detected glare - answering incoming call and canceling outgoing call (incomingId=".concat(c.callId,", outgoingId=").concat(w.callId,")")),w.replacedBy(c)):(A.log("CallEventHandler handleCallEvent() detected glare - hanging up incoming call (incomingId=".concat(c.callId,", outgoingId=").concat(w.callId,")")),c.hangup(gt.Replaced,!0)):n.client.emit(Ww.Incoming,c);return}else if(o===ee.CallCandidates){if(p)return;c?c.onRemoteIceCandidatesReceived(e):(n.candidateEventsByCall.has(i.call_id)||n.candidateEventsByCall.set(i.call_id,[]),n.candidateEventsByCall.get(i.call_id).push(e));return}else if([ee.CallHangup,ee.CallReject].includes(o)){if(c)c.state!==ut.Ended&&(o===ee.CallHangup?c.onHangupReceived(i):c.onRejectReceived(i),c.state===ut.Ended&&n.calls.delete(i.call_id));else{var L;c=(L=J0(n.client,s,{opponentDeviceId:d,opponentSessionId:i.sender_session_id}))!==null&&L!==void 0?L:void 0,c&&(c.callId=i.call_id,c.initWithHangup(e),n.calls.set(i.call_id,c))}return}if(!c||!c.hasPeerConnection){A.info("CallEventHandler handleCallEvent() discarding possible call event as we don't have a call (type=".concat(o,")"));return}if(e.getContent().party_id!==c.ourPartyId)switch(o){case ee.CallAnswer:p?c.state===ut.Ringing&&c.onAnsweredElsewhere(i):c.onAnswerReceived(e);break;case ee.CallSelectAnswer:c.onSelectAnswerReceived(e);break;case ee.CallNegotiate:c.onNegotiateReceived(e);break;case ee.CallAssertedIdentity:case ee.CallAssertedIdentityPrefix:c.onAssertedIdentityReceived(e);break;case ee.CallSDPStreamMetadataChanged:case ee.CallSDPStreamMetadataChangedPrefix:c.onSDPStreamMetadataChangedReceived(e);break}}})()}}var Yw=function(t){return t.Incoming="GroupCall.incoming",t.Outgoing="GroupCall.outgoing",t.Ended="GroupCall.ended",t.Participants="GroupCall.participants",t}({});class lfe{constructor(e){this.client=e,P(this,"groupCalls",new Map),P(this,"roomDeferreds",new Map),P(this,"onRoomsChanged",n=>{this.createGroupCallForRoom(n)}),P(this,"onRoomStateChanged",(n,r)=>{var i=n.getType();if(i===ee.GroupCallPrefix){var s=n.getStateKey(),a=n.getContent(),o=this.groupCalls.get(r.roomId);!o&&!a["m.terminated"]&&!n.isRedacted()?this.createGroupCallFromRoomStateEvent(n):o&&o.groupCallId===s?a["m.terminated"]||n.isRedacted()?o.terminate(!1):a["m.type"]!==o.type&&A.warn("GroupCallEventHandler onRoomStateChanged() currently does not support changing type (roomId=".concat(r.roomId,")")):o&&o.groupCallId!==s&&A.warn("GroupCallEventHandler onRoomStateChanged() currently does not support multiple calls (roomId=".concat(r.roomId,")"))}})}start(){var e=this;return F(function*(){e.client.getSyncState()!==Kt.Syncing&&(A.debug("GroupCallEventHandler start() waiting for client to start syncing"),yield new Promise(i=>{var s=()=>{if(e.client.getSyncState()===Kt.Syncing)return e.client.off(Le.Sync,s),i()};e.client.on(Le.Sync,s)}));var n=e.client.getRooms();for(var r of n)e.createGroupCallForRoom(r);e.client.on(Le.Room,e.onRoomsChanged),e.client.on(vt.Events,e.onRoomStateChanged)})()}stop(){this.client.removeListener(Le.Room,this.onRoomsChanged),this.client.removeListener(vt.Events,this.onRoomStateChanged)}getRoomDeferred(e){var n=this.roomDeferreds.get(e);if(n===void 0){var r;n={prom:new Promise(i=>{r=i})},n.resolve=r,this.roomDeferreds.set(e,n)}return n}waitUntilRoomReadyForGroupCalls(e){return this.getRoomDeferred(e).prom}getGroupCallById(e){return[...this.groupCalls.values()].find(n=>n.groupCallId===e)}createGroupCallForRoom(e){var n=e.currentState.getStateEvents(ee.GroupCallPrefix),r=n.sort((a,o)=>o.getTs()-a.getTs());for(var i of r){var s=i.getContent();if(!(s["m.terminated"]||i.isRedacted())){A.debug("GroupCallEventHandler createGroupCallForRoom() choosing group call from possible calls (stateKey=".concat(i.getStateKey(),", ts=").concat(i.getTs(),", roomId=").concat(e.roomId,", numOfPossibleCalls=").concat(n.length,")")),this.createGroupCallFromRoomStateEvent(i);break}}this.getRoomDeferred(e.roomId).resolve()}createGroupCallFromRoomStateEvent(e){var n=e.getRoomId(),r=e.getContent(),i=this.client.getRoom(n);if(!i){A.warn("GroupCallEventHandler createGroupCallFromRoomStateEvent() couldn't find room for call (roomId=".concat(n,")"));return}var s=e.getStateKey(),a=r["m.type"];if(!Object.values(w9).includes(a)){A.warn("GroupCallEventHandler createGroupCallFromRoomStateEvent() received invalid call type (type=".concat(a,", roomId=").concat(n,")"));return}var o=r["m.intent"];if(!Object.values(NZ).includes(o)){A.warn("Received invalid group call intent (type=".concat(a,", roomId=").concat(n,")"));return}var l=!!r["io.element.ptt"],c;if(r!=null&&r.dataChannelsEnabled&&r!==null&&r!==void 0&&r.dataChannelOptions){var{ordered:d,maxPacketLifeTime:f,maxRetransmits:p,protocol:g}=r.dataChannelOptions;c={ordered:d,maxPacketLifeTime:f,maxRetransmits:p,protocol:g}}var y=new GI(this.client,i,a,l,o,s,(r==null?void 0:r.dataChannelsEnabled)||this.client.isVoipWithNoMediaAllowed,c,this.client.isVoipWithNoMediaAllowed,this.client.useLivekitForGroupCalls,r["io.element.livekit_service_url"]);return this.groupCalls.set(i.roomId,y),this.client.emit(Yw.Incoming,y),y}}class cfe{constructor(){P(this,"bandwidth",{}),P(this,"bitrate",{}),P(this,"packetLoss",{}),P(this,"transport",[])}}class ufe{static buildBandwidthReport(e){var n=e.availableIncomingBitrate,r=e.availableOutgoingBitrate;return{download:n?Math.round(n/1e3):0,upload:r?Math.round(r/1e3):0}}}class dfe{static buildReport(e,n,r,i){var s=e==null?void 0:e.get(n.localCandidateId),a=e==null?void 0:e.get(n.remoteCandidateId);if(a&&s){var o=a.ip!==void 0?a.ip:a.address,l=a.port,c="".concat(o,":").concat(l),d=s.ip!==void 0?s.ip:s.address,f=s.port,p="".concat(d,":").concat(f),g=a.protocol;r.some(y=>y.ip===c&&y.type===g&&y.localIp===p)||r.push({ip:c,type:g,localIp:p,isFocus:i,localCandidateType:s.candidateType,remoteCandidateType:a.candidateType,networkType:s.networkType,rtt:n.currentRoundTripTime?n.currentRoundTripTime*1e3:NaN})}return r}}class hfe{constructor(){P(this,"ssrcToMid",{local:new Map,remote:new Map})}findMidBySsrc(e,n){var r;return this.ssrcToMid[n].forEach((i,s)=>{if(i.find(a=>a==e)){r=s;return}}),r}parse(e,n){var r=Kw.parse(e),i=new Map;r.media.forEach(s=>{if(s.mid&&s.type==="video"||s.type==="audio"){var a,o=[];(a=s.ssrcs)===null||a===void 0||a.forEach(l=>{l.attribute==="cname"&&o.push("".concat(l.id))}),i.set("".concat(s.mid),o)}}),this.ssrcToMid[n]=i}getSsrcToMidMap(e){return this.ssrcToMid[e]}}class ffe{constructor(e){this.pc=e}getLocalTracks(e){var n=r=>r!==null&&r.kind===e;return this.pc.getTransceivers().filter(r=>r.currentDirection==="sendonly"||r.currentDirection==="sendrecv").filter(r=>r.sender!==null).map(r=>r.sender).map(r=>r.track).filter(n)}getTackById(e){return this.pc.getTransceivers().map(n=>{if((n==null?void 0:n.sender.track)!==null&&n.sender.track.id===e)return n.sender.track;if((n==null?void 0:n.receiver.track)!==null&&n.receiver.track.id===e)return n.receiver.track}).find(n=>n!==void 0)}getLocalTrackIdByMid(e){var n,r=this.pc.getTransceivers().find(i=>i.mid===e);return r==null||(n=r.sender)===null||n===void 0||(n=n.track)===null||n===void 0?void 0:n.id}getRemoteTrackIdByMid(e){var n,r=this.pc.getTransceivers().find(i=>i.mid===e);return r==null||(n=r.receiver)===null||n===void 0||(n=n.track)===null||n===void 0?void 0:n.id}getActiveSimulcastStreams(){return 3}getTransceiverByTrackId(e){return this.pc.getTransceivers().find(n=>n.receiver.track.id===e||n.sender.track!==null&&n.sender.track.id===e)}}class mfe{constructor(e,n,r){this.trackId=e,this.type=n,this.kind=r,P(this,"loss",{packetsTotal:0,packetsLost:0,isDownloadStream:!1}),P(this,"bitrate",{download:0,upload:0}),P(this,"resolution",{width:-1,height:-1}),P(this,"audioConcealment",{concealedAudio:0,totalAudioDuration:0}),P(this,"framerate",0),P(this,"jitter",0),P(this,"codec",""),P(this,"isAlive",!0),P(this,"isMuted",!1),P(this,"isEnabled",!0)}getType(){return this.type}setLoss(e){this.loss=e}getLoss(){return this.loss}setResolution(e){this.resolution=e}getResolution(){return this.resolution}setFramerate(e){this.framerate=e}getFramerate(){return this.framerate}setBitrate(e){this.bitrate=e}getBitrate(){return this.bitrate}setCodec(e){return this.codec=e,!0}getCodec(){return this.codec}resetBitrate(){this.bitrate={download:0,upload:0}}set alive(e){this.isAlive=e}get alive(){return this.isAlive}set muted(e){this.isMuted=e}get muted(){return this.isMuted}set enabled(e){this.isEnabled=e}get enabled(){return this.isEnabled}setJitter(e){this.jitter=e}getJitter(){return this.jitter}setAudioConcealment(e,n){this.audioConcealment.concealedAudio=e,this.audioConcealment.totalAudioDuration=n}getAudioConcealment(){return this.audioConcealment}}class pfe{constructor(e,n){this.mediaSsrcHandler=e,this.mediaTrackHandler=n,P(this,"track2stats",new Map)}findTrack2Stats(e,n){var r;if(e.trackIdentifier)r=e.trackIdentifier;else if(e.mid)r=n==="remote"?this.mediaTrackHandler.getRemoteTrackIdByMid(e.mid):this.mediaTrackHandler.getLocalTrackIdByMid(e.mid);else if(e.ssrc){var i=this.mediaSsrcHandler.findMidBySsrc(e.ssrc,n);if(!i)return;r=n==="remote"?this.mediaTrackHandler.getRemoteTrackIdByMid(e.mid):this.mediaTrackHandler.getLocalTrackIdByMid(e.mid)}if(r){var s=this.track2stats.get(r);if(!s){var a=this.mediaTrackHandler.getTackById(r);if(a!==void 0){var o=a.kind==="audio"?a.kind:"video";s=new mfe(r,n,o),this.track2stats.set(r,s)}else return}return s}}findLocalVideoTrackStats(e){var n=this.mediaTrackHandler.getLocalTracks("video");if(n.length!==0)return this.findTrack2Stats(e,"local")}getTrack2stats(){return this.track2stats}findTransceiverByTrackId(e){return this.mediaTrackHandler.getTransceiverByTrackId(e)}}class B1{static getNonNegativeValue(e){var n=e;return typeof n!="number"&&(n=Number(n)),isNaN(n)?0:Math.max(0,n)}}class ea{static buildFramerateResolution(e,n){var r={height:n.frameHeight,width:n.frameWidth},i=n.framesPerSecond;r.height&&r.width&&e.setResolution(r),e.setFramerate(Math.round(i||0))}static calculateSimulcastFramerate(e,n,r,i){var s=e.getFramerate();if(!s){if(r){var a=n.timestamp-r.timestamp;if(a>0&&n.framesSent){var o=n.framesSent-r.framesSent;s=o/a*1e3}}if(!s)return}s=i?Math.round(s/i):0,e.setFramerate(s)}static buildCodec(e,n,r){var i=e==null?void 0:e.get(r.codecId);if(i){var s=i.mimeType.split("/")[1];s&&n.setCodec(s)}}static buildBitrateReceived(e,n,r){e.setBitrate({download:ea.calculateBitrate(n.bytesReceived,r.bytesReceived,n.timestamp,r.timestamp),upload:0})}static buildBitrateSend(e,n,r){e.setBitrate({download:0,upload:this.calculateBitrate(n.bytesSent,r.bytesSent,n.timestamp,r.timestamp)})}static buildPacketsLost(e,n,r){var i=n.type==="outbound-rtp"?"packetsSent":"packetsReceived",s=n[i];(!s||s<0)&&(s=0);var a=B1.getNonNegativeValue(r[i]),o=Math.max(0,s-a),l=B1.getNonNegativeValue(n.packetsLost),c=B1.getNonNegativeValue(r.packetsLost),d=Math.max(0,l-c);e.setLoss({packetsTotal:o+d,packetsLost:d,isDownloadStream:n.type!=="outbound-rtp"})}static calculateBitrate(e,n,r,i){var s=B1.getNonNegativeValue(e),a=B1.getNonNegativeValue(n),o=Math.max(0,s-a),l=r-i,c=0;return l>0&&(c=Math.round(o*8/l)),c}static setTrackStatsState(e,n){var r;if(n===void 0){e.alive=!1;return}var i=e.getType()==="remote"?n.receiver.track:n==null||(r=n.sender)===null||r===void 0?void 0:r.track;if(i==null){e.alive=!1;return}if(i.readyState==="ended"){e.alive=!1;return}e.muted=i.muted,e.enabled=i.enabled,e.alive=!0}static buildTrackSummary(e){var n={count:0,muted:0,maxJitter:0,maxPacketLoss:0,concealedAudio:0,totalAudio:0},r={count:0,muted:0,maxJitter:0,maxPacketLoss:0,concealedAudio:0,totalAudio:0},i=e.filter(a=>a.getType()==="remote"),s=i.filter(a=>a.kind==="audio");return i.forEach(a=>{var o=a.kind==="video"?n:r;if(o.count++,a.alive&&a.muted&&o.muted++,o.maxJitter<a.getJitter()&&(o.maxJitter=a.getJitter()),o.maxPacketLoss<a.getLoss().packetsLost&&(o.maxPacketLoss=a.getLoss().packetsLost),s.length>0){var l,c;o.concealedAudio+=(l=a.getAudioConcealment())===null||l===void 0?void 0:l.concealedAudio,o.totalAudio+=(c=a.getAudioConcealment())===null||c===void 0?void 0:c.totalAudioDuration}}),{audioTrackSummary:r,videoTrackSummary:n}}static buildJitter(e,n){if(n.type==="inbound-rtp"){var r=n==null?void 0:n.jitter;if(r!==void 0){var i=B1.getNonNegativeValue(r);e.setJitter(Math.round(i*1e3))}else e.setJitter(-1)}}static buildAudioConcealment(e,n){if(n.type==="inbound-rtp"){var r=1e3*(n==null?void 0:n.totalSamplesDuration)/(n==null?void 0:n.totalSamplesReceived),i=r*(n==null?void 0:n.concealedSamples),s=1e3*(n==null?void 0:n.totalSamplesDuration);e.setAudioConcealment(i,s)}}}class h0{static build(e){var n={},r={download:0,upload:0},i={download:0,upload:0},s=0,a=0,o={local:new Map,remote:new Map},l={local:new Map,remote:new Map},c={local:new Map,remote:new Map},d=new Map,f=new Map,p=0,g=0,y=0,v=0,b=0,C=0;for(var[S,R]of e){var w=R.getLoss(),I=w.isDownloadStream?"download":"upload";if(r[I]+=w.packetsTotal,i[I]+=w.packetsLost,s+=R.getBitrate().download,a+=R.getBitrate().upload,R.kind==="audio"){var k=R.getAudioConcealment();b+=k.concealedAudio,C+=k.totalAudioDuration,p+=R.getBitrate().download,g+=R.getBitrate().upload}else y+=R.getBitrate().download,v+=R.getBitrate().upload;o[R.getType()].set(S,R.getResolution()),l[R.getType()].set(S,R.getFramerate()),c[R.getType()].set(S,R.getCodec()),R.getType()==="remote"&&(d.set(S,R.getJitter()),R.kind==="audio"&&f.set(S,R.getAudioConcealment())),R.resetBitrate()}return n.bitrate={upload:a,download:s},n.bitrate.audio={upload:g,download:p},n.bitrate.video={upload:v,download:y},n.packetLoss={total:h0.calculatePacketLoss(i.download+i.upload,r.download+r.upload),download:h0.calculatePacketLoss(i.download,r.download),upload:h0.calculatePacketLoss(i.upload,r.upload)},n.audioConcealment=f,n.totalAudioConcealment={concealedAudio:b,totalAudioDuration:C},n.framerate=l,n.resolution=o,n.codec=c,n.jitter=d,n}static calculatePacketLoss(e,n){return!n||n<=0||!e||e<=0?0:Math.round(e/n*100)}}class md{static buildCallFeedReport(e,n,r){var i=r.getTransceivers(),s=[],a=[];return i.forEach(o=>{var l,c=(l=o.sender)!==null&&l!==void 0&&l.track?md.buildTrackStats(o.sender.track,"sender"):null,d=md.buildTrackStats(o.receiver.track,"receiver");s.push({mid:o.mid==null?"null":o.mid,direction:o.direction,currentDirection:o.currentDirection==null?"null":o.currentDirection,sender:c,receiver:d})}),{callId:e,opponentMemberId:n,transceiver:s,callFeeds:a}}static buildTrackStats(e){var n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"--",s=(n=e.getSettings())===null||n===void 0?void 0:n.deviceId,a=(r=e.getConstraints())===null||r===void 0?void 0:r.deviceId;return{id:e.id,kind:e.kind,settingDeviceId:s??"unknown",constrainDeviceId:a??"unknown",muted:e.muted,enabled:e.enabled,readyState:e.readyState,label:i}}static expandCallFeedReport(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unknown";return n.forEach(i=>{var s=i.stream.getAudioTracks(),a=i.stream.getVideoTracks(),o=s.length>0?md.buildTrackStats(i.stream.getAudioTracks()[0],i.purpose):null,l=a.length>0?md.buildTrackStats(i.stream.getVideoTracks()[0],i.purpose):null,c={stream:i.stream.id,type:i.isLocal()?"local":"remote",audio:o,video:l,purpose:i.purpose,prefix:r,isVideoMuted:i.isVideoMuted(),isAudioMuted:i.isAudioMuted()};e.callFeeds.push(c)}),e}}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class gfe{constructor(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;this.callId=e,this.opponentMemberId=n,this.pc=r,this.emitter=i,this.isFocus=s,P(this,"isActive",!0),P(this,"previousStatsReport",void 0),P(this,"currentStatsReport",void 0),P(this,"connectionStats",new cfe),P(this,"trackStats",void 0),r.addEventListener("signalingstatechange",this.onSignalStateChange.bind(this)),this.trackStats=new pfe(new hfe,new ffe(r))}processStats(e,n){var r=this;return F(function*(){var i={isFirstCollection:r.previousStatsReport===void 0,receivedMedia:0,receivedAudioMedia:0,receivedVideoMedia:0,audioTrackSummary:{count:0,muted:0,maxPacketLoss:0,maxJitter:0,concealedAudio:0,totalAudio:0},videoTrackSummary:{count:0,muted:0,maxPacketLoss:0,maxJitter:0,concealedAudio:0,totalAudio:0}};if(r.isActive){var s=r.pc.getStats();if(typeof(s==null?void 0:s.then)=="function")return s.then(a=>{var o,l;r.currentStatsReport=typeof(a==null?void 0:a.result)=="function"?a.result():a;try{r.processStatsReport(e,n)}catch(d){return r.handleError(d),i}r.previousStatsReport=r.currentStatsReport,i.receivedMedia=r.connectionStats.bitrate.download,i.receivedAudioMedia=((o=r.connectionStats.bitrate.audio)===null||o===void 0?void 0:o.download)||0,i.receivedVideoMedia=((l=r.connectionStats.bitrate.video)===null||l===void 0?void 0:l.download)||0;var c=ea.buildTrackSummary(Array.from(r.trackStats.getTrack2stats().values()));return X8(X8({},i),{},{audioTrackSummary:c.audioTrackSummary,videoTrackSummary:c.videoTrackSummary})}).catch(a=>(r.handleError(a),i));r.isActive=!1}return Promise.resolve(i)})()}processStatsReport(e,n){var r,i=new Map;i.callId=this.callId,i.opponentMemberId=this.opponentMemberId,(r=this.currentStatsReport)===null||r===void 0||r.forEach(s=>{var a=this.previousStatsReport?this.previousStatsReport.get(s.id):null;if(s.type==="candidate-pair"&&s.nominated&&s.state==="succeeded")this.connectionStats.bandwidth=ufe.buildBandwidthReport(s),this.connectionStats.transport=dfe.buildReport(this.currentStatsReport,s,this.connectionStats.transport,this.isFocus);else if(s.type==="inbound-rtp"||s.type==="outbound-rtp"){var o=this.trackStats.findTrack2Stats(s,s.type==="inbound-rtp"?"remote":"local");if(!o)return;if(a&&ea.buildPacketsLost(o,s,a),s.type==="inbound-rtp"){ea.buildFramerateResolution(o,s),a&&ea.buildBitrateReceived(o,s,a);var l=this.trackStats.findTransceiverByTrackId(o.trackId);ea.setTrackStatsState(o,l),ea.buildJitter(o,s),ea.buildAudioConcealment(o,s)}else a&&(i.set(o.trackId,B1.getNonNegativeValue(s.bytesSent)),ea.buildBitrateSend(o,s,a));ea.buildCodec(this.currentStatsReport,o,s)}else if(s.type==="track"&&s.kind==="video"&&!s.remoteSource){var c=this.trackStats.findLocalVideoTrackStats(s);if(!c)return;ea.buildFramerateResolution(c,s),ea.calculateSimulcastFramerate(c,s,a,this.trackStats.mediaTrackHandler.getActiveSimulcastStreams())}}),this.emitter.emitByteSendReport(i),this.emitter.emitCallFeedReport(md.buildCallFeedReport(this.callId,this.opponentMemberId,this.pc)),this.processAndEmitConnectionStatsReport()}setActive(e){this.isActive=e}getActive(){return this.isActive}handleError(e){this.isActive=!1,A.warn("CallStatsReportGatherer ".concat(this.callId," processStatsReport fails and set to inactive ").concat(e))}processAndEmitConnectionStatsReport(){var e=h0.build(this.trackStats.getTrack2stats());e.callId=this.callId,e.opponentMemberId=this.opponentMemberId,this.connectionStats.bandwidth=e.bandwidth,this.connectionStats.bitrate=e.bitrate,this.connectionStats.packetLoss=e.packetLoss,this.emitter.emitConnectionStatsReport(X8(X8({},e),{},{transport:this.connectionStats.transport})),this.connectionStats.transport=[]}stopProcessingStats(){}onSignalStateChange(){this.pc.signalingState==="stable"&&(this.pc.currentRemoteDescription&&this.trackStats.mediaSsrcHandler.parse(this.pc.currentRemoteDescription.sdp,"remote"),this.pc.currentLocalDescription&&this.trackStats.mediaSsrcHandler.parse(this.pc.currentLocalDescription.sdp,"local"))}setOpponentMemberId(e){this.opponentMemberId=e}}var Hc=function(t){return t.CONNECTION_STATS="StatsReport.connection_stats",t.CALL_FEED_REPORT="StatsReport.call_feed_report",t.BYTE_SENT_STATS="StatsReport.byte_sent_stats",t.SUMMARY_STATS="StatsReport.summary_stats",t}({});class vfe extends Un{emitByteSendReport(e){this.emit(Hc.BYTE_SENT_STATS,e)}emitConnectionStatsReport(e){this.emit(Hc.CONNECTION_STATS,e)}emitCallFeedReport(e){this.emit(Hc.CALL_FEED_REPORT,e)}emitSummaryStatsReport(e){this.emit(Hc.SUMMARY_STATS,e)}}class AZ{constructor(e){this.emitter=e}build(e){var n=e.filter(d=>!d.isFirstCollection),r=n.length,i=e.length;if(r!==0){var s={receivedAudio:0,receivedVideo:0,receivedMedia:0,concealedAudio:0,totalAudio:0},a=0,o=0;n.forEach(d=>{this.countTrackListReceivedMedia(s,d),this.countConcealedAudio(s,d),a=this.buildMaxJitter(a,d),o=this.buildMaxPacketLoss(o,d)});var l=5,c={percentageReceivedMedia:Number((s.receivedMedia/r).toFixed(l)),percentageReceivedVideoMedia:Number((s.receivedVideo/r).toFixed(l)),percentageReceivedAudioMedia:Number((s.receivedAudio/r).toFixed(l)),maxJitter:a,maxPacketLoss:o,percentageConcealedAudio:Number(s.totalAudio>0?(s.concealedAudio/s.totalAudio).toFixed(l):0),peerConnections:i};this.emitter.emitSummaryStatsReport(c)}}static extendSummaryReport(e,n){var r=[],i=[];for(var s of n){i.push(s);for(var a of s[1])r.push(a)}e.opponentDevicesInCall=Math.max(0,r.length-1),e.opponentUsersInCall=Math.max(0,i.length-1),e.diffDevicesToPeerConnections=Math.max(0,r.length-1)-e.peerConnections,e.ratioPeerConnectionToDevices=Math.max(0,r.length-1)==0?0:e.peerConnections/(r.length-1)}countTrackListReceivedMedia(e,n){var r=!1,i=!1;(n.receivedAudioMedia>0||n.audioTrackSummary.count===0)&&(e.receivedAudio++,r=!0),(n.receivedVideoMedia>0||n.videoTrackSummary.count===0||n.videoTrackSummary.muted>0&&n.videoTrackSummary.muted===n.videoTrackSummary.count)&&(e.receivedVideo++,i=!0),i&&r&&e.receivedMedia++}buildMaxJitter(e,n){return e<n.videoTrackSummary.maxJitter&&(e=n.videoTrackSummary.maxJitter),e<n.audioTrackSummary.maxJitter&&(e=n.audioTrackSummary.maxJitter),e}buildMaxPacketLoss(e,n){return e<n.videoTrackSummary.maxPacketLoss&&(e=n.videoTrackSummary.maxPacketLoss),e<n.audioTrackSummary.maxPacketLoss&&(e=n.audioTrackSummary.maxPacketLoss),e}countConcealedAudio(e,n){e.concealedAudio+=n.audioTrackSummary.concealedAudio,e.totalAudio+=n.audioTrackSummary.totalAudio}}class yfe{constructor(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4;this.groupCallId=e,this.userId=n,this.interval=r,P(this,"timer",void 0),P(this,"gatherers",new Map),P(this,"reports",new vfe),P(this,"summaryStatsReportGatherer",new AZ(this.reports))}start(){this.timer===void 0&&this.interval>0&&(this.timer=setInterval(()=>{this.processStats()},this.interval))}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.gatherers.forEach(e=>e.stopProcessingStats()))}hasStatsReportGatherer(e){return this.gatherers.has(e)}addStatsReportGatherer(e,n,r){return this.hasStatsReportGatherer(e)?!1:(this.gatherers.set(e,new gfe(e,n,r,this.reports)),!0)}removeStatsReportGatherer(e){return this.gatherers.delete(e)}getStatsReportGatherer(e){return this.hasStatsReportGatherer(e)?this.gatherers.get(e):void 0}updateOpponentMember(e,n){var r;(r=this.getStatsReportGatherer(e))===null||r===void 0||r.setOpponentMemberId(n)}processStats(){var e=[];this.gatherers.forEach(n=>{e.push(n.processStats(this.groupCallId,this.userId))}),Promise.all(e).then(n=>this.summaryStatsReportGatherer.build(n)).catch(n=>{A.error("Could not build summary stats report",n)})}setInterval(e){this.interval=e}}function cU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ev(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var NZ=function(t){return t.Ring="m.ring",t.Prompt="m.prompt",t.Room="m.room",t}({}),w9=function(t){return t.Video="m.video",t.Voice="m.voice",t}({}),_fe=function(t){return t.CallEnded="call_ended",t}({}),mn=function(t){return t.GroupCallStateChanged="group_call_state_changed",t.ActiveSpeakerChanged="active_speaker_changed",t.CallsChanged="calls_changed",t.UserMediaFeedsChanged="user_media_feeds_changed",t.ScreenshareFeedsChanged="screenshare_feeds_changed",t.LocalScreenshareStateChanged="local_screenshare_state_changed",t.LocalMuteStateChanged="local_mute_state_changed",t.ParticipantsChanged="participants_changed",t.Error="group_call_error",t}({}),W3=function(t){return t.ConnectionStats="GroupCall.connection_stats",t.ByteSentStats="GroupCall.byte_sent_stats",t.SummaryStats="GroupCall.summary_stats",t.CallFeedStats="GroupCall.call_feed_stats",t}({}),f0=function(t){return t.NoUserMedia="no_user_media",t.UnknownDevice="unknown_device",t.PlaceCallFailed="place_call_failed",t}({});class Jw extends Error{constructor(e,n,r){r?(super(n+": "+r),P(this,"code",void 0)):(super(n),P(this,"code",void 0)),this.code=e}}class DZ extends Jw{constructor(e){super(f0.UnknownDevice,"No device found for "+e),this.userId=e}}var Yn=function(t){return t.LocalCallFeedUninitialized="local_call_feed_uninitialized",t.InitializingLocalCallFeed="initializing_local_call_feed",t.LocalCallFeedInitialized="local_call_feed_initialized",t.Entered="entered",t.Ended="ended",t}({}),uU=1e3*60*60;function tv(t){var e;return((e=t.getOpponentMember())===null||e===void 0?void 0:e.userId)||t.invitee||null}class GI extends Un{constructor(e,n,r,i,s,a,o,l,c){var d,f,p=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,g=arguments.length>10?arguments[10]:void 0;super(),this.client=e,this.room=n,this.type=r,this.isPtt=i,this.intent=s,this.dataChannelsEnabled=o,this.dataChannelOptions=l,this.useLivekit=p,P(this,"activeSpeakerInterval",1e3),P(this,"retryCallInterval",5e3),P(this,"participantTimeout",1e3*15),P(this,"pttMaxTransmitTime",1e3*20),P(this,"activeSpeaker",void 0),P(this,"localCallFeed",void 0),P(this,"localScreenshareFeed",void 0),P(this,"localDesktopCapturerSourceId",void 0),P(this,"userMediaFeeds",[]),P(this,"screenshareFeeds",[]),P(this,"groupCallId",void 0),P(this,"allowCallWithoutVideoAndAudio",void 0),P(this,"calls",new Map),P(this,"callHandlers",new Map),P(this,"activeSpeakerLoopInterval",void 0),P(this,"retryCallLoopInterval",void 0),P(this,"retryCallCounts",new Map),P(this,"reEmitter",void 0),P(this,"transmitTimer",null),P(this,"participantsExpirationTimer",null),P(this,"resendMemberStateTimer",null),P(this,"initWithAudioMuted",!1),P(this,"initWithVideoMuted",!1),P(this,"initCallFeedPromise",void 0),P(this,"_livekitServiceURL",void 0),P(this,"stats",void 0),P(this,"statsCollectIntervalTime",0),P(this,"onConnectionStats",y=>{this.emit(W3.ConnectionStats,{report:y})}),P(this,"onByteSentStats",y=>{this.emit(W3.ByteSentStats,{report:y})}),P(this,"onSummaryStats",y=>{AZ.extendSummaryReport(y,this.participants),this.emit(W3.SummaryStats,{report:y})}),P(this,"onCallFeedReport",y=>{this.localCallFeed&&(y=md.expandCallFeedReport(y,[this.localCallFeed],"from-local-feed"));var v=[];this.forEachCall(b=>{b.callId===y.callId&&b.getFeeds().forEach(C=>v.push(C))}),y=md.expandCallFeedReport(y,v,"from-call-feed"),this.emit(W3.CallFeedStats,{report:y})}),P(this,"_state",Yn.LocalCallFeedUninitialized),P(this,"_participants",new Map),P(this,"_creationTs",null),P(this,"_enteredViaAnotherSession",!1),P(this,"onIncomingCall",y=>{var v,b;if(y.roomId===this.room.roomId){if(y.state!==ut.Ringing){A.warn("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call no longer in ringing state - ignoring"));return}if(!y.groupCallId||y.groupCallId!==this.groupCallId){A.log("GroupCall ".concat(this.groupCallId," onIncomingCall() ignored because it doesn't match the current group call")),y.reject();return}var C=(v=y.getOpponentMember())===null||v===void 0?void 0:v.userId;if(C===void 0){A.warn("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call with no member - ignoring"));return}if(this.useLivekit){A.info("Received incoming call whilst in signaling-only mode! Ignoring.");return}var S=(b=this.calls.get(C))!==null&&b!==void 0?b:new Map,R=S.get(y.getOpponentDeviceId());if((R==null?void 0:R.callId)!==y.callId){A.log("GroupCall ".concat(this.groupCallId," onIncomingCall() incoming call (userId=").concat(C,", callId=").concat(y.callId,")")),R&&R.hangup(gt.Replaced,!1),S.set(y.getOpponentDeviceId(),y),this.calls.set(C,S),this.initCall(y);var w=this.getLocalFeeds().map(k=>k.clone());if(!this.callExpected(y))for(var I of w)kr(I.stream.getAudioTracks(),!1),kr(I.stream.getVideoTracks(),!1);y.answerWithCallFeeds(w),this.emit(mn.CallsChanged,this.calls)}}}),P(this,"onRetryCallLoop",()=>{var y=!1;for(var[{userId:v},b]of this.participants){var C=this.calls.get(v),S=this.retryCallCounts.get(v);for(var[R,w]of b){var I,k,x=C==null?void 0:C.get(R),L=(I=(k=S)===null||k===void 0?void 0:k.get(R))!==null&&I!==void 0?I:0;(x==null?void 0:x.getOpponentSessionId())!==w.sessionId&&this.wantsOutgoingCall(v,R)&&L<3&&(S===void 0&&(S=new Map,this.retryCallCounts.set(v,S)),S.set(R,L+1),y=!0)}}y&&this.placeOutgoingCalls()}),P(this,"onCallFeedsChanged",y=>{var v=tv(y),b=y.getOpponentDeviceId();if(!v)throw new Error("Cannot change call feeds without user id");var C=this.getUserMediaFeed(v,b),S=y.remoteUsermediaFeed,R=S!==C,w=this.calls.get(v),I=w==null?void 0:w.get(b);if((I==null?void 0:I.callId)===y.callId){R&&(!C&&S?this.addUserMediaFeed(S):C&&S?this.replaceUserMediaFeed(C,S):C&&!S&&this.removeUserMediaFeed(C));var k=this.getScreenshareFeed(v,b),x=y.remoteScreensharingFeed,L=x!==k;L&&(!k&&x?this.addScreenshareFeed(x):k&&x?this.replaceScreenshareFeed(k,x):k&&!x&&this.removeScreenshareFeed(k))}}),P(this,"onCallStateChanged",(y,v,b)=>{var C;if(v!==ut.Ended){var S=this.localCallFeed.isAudioMuted();y.localUsermediaStream&&y.isMicrophoneMuted()!==S&&y.setMicrophoneMuted(S);var R=this.localCallFeed.isVideoMuted();y.localUsermediaStream&&y.isLocalVideoMuted()!==R&&y.setLocalVideoMuted(R);var w=(C=y.getOpponentMember())===null||C===void 0?void 0:C.userId;if(v===ut.Connected&&w){var I=this.retryCallCounts.get(w);I==null||I.delete(y.getOpponentDeviceId()),(I==null?void 0:I.size)===0&&this.retryCallCounts.delete(w)}}}),P(this,"onCallHangup",y=>{var v,b;if(y.hangupReason!==gt.Replaced){var C=(v=(b=y.getOpponentMember())===null||b===void 0?void 0:b.userId)!==null&&v!==void 0?v:this.room.getMember(y.invitee).userId,S=this.calls.get(C);(S==null?void 0:S.get(y.getOpponentDeviceId()))===y&&(this.disposeCall(y,y.hangupReason),S.delete(y.getOpponentDeviceId()),S.size===0&&this.calls.delete(C),this.emit(mn.CallsChanged,this.calls))}}),P(this,"onCallReplaced",(y,v)=>{var b=y.getOpponentMember().userId,C=this.calls.get(b);C===void 0&&(C=new Map,this.calls.set(b,C)),y.hangup(gt.Replaced,!1),this.initCall(v),C.set(y.getOpponentDeviceId(),v),this.emit(mn.CallsChanged,this.calls)}),P(this,"onActiveSpeakerLoop",()=>{var y=void 0,v=void 0;for(var b of this.userMediaFeeds)if(!(b.isLocal()&&this.userMediaFeeds.length>1)){var C=b.speakingVolumeSamples.reduce((R,w)=>R+Math.max(w,zw)),S=C/b.speakingVolumeSamples.length;(!y||S>y)&&(y=S,v=b)}v&&this.activeSpeaker!==v&&y&&y>zw&&(this.activeSpeaker=v,this.emit(mn.ActiveSpeakerChanged,this.activeSpeaker))}),P(this,"onRoomState",()=>this.updateParticipants()),P(this,"onParticipantsChanged",()=>{this.forEachCall(y=>{var v=this.callExpected(y);for(var b of y.getLocalFeeds())kr(b.stream.getAudioTracks(),!b.isAudioMuted()&&v),kr(b.stream.getVideoTracks(),!b.isVideoMuted()&&v)}),this.state===Yn.Entered&&!this.useLivekit&&this.placeOutgoingCalls()}),P(this,"onStateChanged",(y,v)=>{(y===Yn.Entered||v===Yn.Entered||y===Yn.Ended)&&(this.updateParticipants(),this.updateMemberState().catch(b=>A.error("GroupCall ".concat(this.groupCallId,' onStateChanged() failed to update member state devices"'),b)))}),P(this,"onLocalFeedsChanged",()=>{this.state===Yn.Entered&&this.updateMemberState().catch(y=>A.error("GroupCall ".concat(this.groupCallId," onLocalFeedsChanged() failed to update member state feeds"),y))}),this.reEmitter=new nZ(this),this.groupCallId=a??q1(),this._livekitServiceURL=g,this.creationTs=(d=(f=n.currentState.getStateEvents(ee.GroupCallPrefix,this.groupCallId))===null||f===void 0?void 0:f.getTs())!==null&&d!==void 0?d:null,this.updateParticipants(),n.on(vt.Update,this.onRoomState),this.on(mn.ParticipantsChanged,this.onParticipantsChanged),this.on(mn.GroupCallStateChanged,this.onStateChanged),this.on(mn.LocalScreenshareStateChanged,this.onLocalFeedsChanged),this.allowCallWithoutVideoAndAudio=!!c}create(){var e=this;return F(function*(){return e.creationTs=Date.now(),e.client.groupCallEventHandler.groupCalls.set(e.room.roomId,e),e.client.emit(Yw.Outgoing,e),yield e.sendCallStateEvent(),e})()}sendCallStateEvent(){var e=this;return F(function*(){var n={"m.intent":e.intent,"m.type":e.type,"io.element.ptt":e.isPtt,dataChannelsEnabled:e.dataChannelsEnabled,dataChannelOptions:e.dataChannelsEnabled?e.dataChannelOptions:void 0};e.livekitServiceURL&&(n["io.element.livekit_service_url"]=e.livekitServiceURL),yield e.client.sendStateEvent(e.room.roomId,ee.GroupCallPrefix,n,e.groupCallId)})()}get livekitServiceURL(){return this._livekitServiceURL}updateLivekitServiceURL(e){return this._livekitServiceURL=e,this.sendCallStateEvent()}get state(){return this._state}set state(e){var n=this._state;e!==n&&(this._state=e,this.emit(mn.GroupCallStateChanged,e,n))}get participants(){return this._participants}set participants(e){var n=this._participants,r=(s,a)=>s.sessionId===a.sessionId&&s.screensharing===a.screensharing,i=(s,a)=>mD(s,a,r);mD(e,n,i)||(this._participants=e,this.emit(mn.ParticipantsChanged,e))}get creationTs(){return this._creationTs}set creationTs(e){this._creationTs=e}get enteredViaAnotherSession(){return this._enteredViaAnotherSession}set enteredViaAnotherSession(e){this._enteredViaAnotherSession=e,this.updateParticipants()}forEachCall(e){for(var n of this.calls.values())for(var r of n.values())e(r)}getLocalFeeds(){var e=[];return this.localCallFeed&&e.push(this.localCallFeed),this.localScreenshareFeed&&e.push(this.localScreenshareFeed),e}hasLocalParticipant(){var e,n;return(e=(n=this.participants.get(this.room.getMember(this.client.getUserId())))===null||n===void 0?void 0:n.has(this.client.getDeviceId()))!==null&&e!==void 0?e:!1}callExpected(e){var n,r=tv(e),i=r===null?null:this.room.getMember(r),s=e.getOpponentDeviceId();return i!==null&&s!==void 0&&((n=this.participants.get(i))===null||n===void 0?void 0:n.get(s))!==void 0}initLocalCallFeed(){var e=this;return F(function*(){if(e.useLivekit){A.info("Livekit group call: not starting local call feed.");return}if(e.state!==Yn.LocalCallFeedUninitialized)throw new Error('Cannot initialize local call feed in the "'.concat(e.state,'" state.'));if(e.state=Yn.InitializingLocalCallFeed,e.initCallFeedPromise)return e.initCallFeedPromise;try{e.initCallFeedPromise=e.initLocalCallFeedInternal(),yield e.initCallFeedPromise}finally{e.initCallFeedPromise=void 0}})()}initLocalCallFeedInternal(){var e=this;return F(function*(){A.log("GroupCall ".concat(e.groupCallId," initLocalCallFeedInternal() running"));var n;try{n=yield e.client.getMediaHandler().getUserMediaStream(!0,e.type===w9.Video)}catch(i){if(e.allowCallWithoutVideoAndAudio)n=new MediaStream;else throw e.state=Yn.LocalCallFeedUninitialized,i}if(e._state!==Yn.InitializingLocalCallFeed)throw e.client.getMediaHandler().stopUserMediaStream(n),new Error("Group call disposed while gathering media stream");var r=new Lc({client:e.client,roomId:e.room.roomId,userId:e.client.getUserId(),deviceId:e.client.getDeviceId(),stream:n,purpose:pn.Usermedia,audioMuted:e.initWithAudioMuted||n.getAudioTracks().length===0||e.isPtt,videoMuted:e.initWithVideoMuted||n.getVideoTracks().length===0});kr(n.getAudioTracks(),!r.isAudioMuted()),kr(n.getVideoTracks(),!r.isVideoMuted()),e.localCallFeed=r,e.addUserMediaFeed(r),e.state=Yn.LocalCallFeedInitialized})()}updateLocalUsermediaStream(e){var n=this;return F(function*(){if(n.localCallFeed){var r=n.localCallFeed.stream;n.localCallFeed.setNewStream(e);var i=n.localCallFeed.isAudioMuted(),s=n.localCallFeed.isVideoMuted();A.log("GroupCall ".concat(n.groupCallId," updateLocalUsermediaStream() (oldStreamId=").concat(r.id,", newStreamId=").concat(e.id,", micShouldBeMuted=").concat(i,", vidShouldBeMuted=").concat(s,")")),kr(e.getAudioTracks(),!i),kr(e.getVideoTracks(),!s),n.client.getMediaHandler().stopUserMediaStream(r)}})()}enter(){var e=this;return F(function*(){if(e.state===Yn.LocalCallFeedUninitialized)yield e.initLocalCallFeed();else if(e.state!==Yn.LocalCallFeedInitialized)throw new Error('Cannot enter call in the "'.concat(e.state,'" state'));A.log("GroupCall ".concat(e.groupCallId," enter() running")),e.state=Yn.Entered,e.client.on(Ww.Incoming,e.onIncomingCall);for(var n of e.client.callEventHandler.calls.values())e.onIncomingCall(n);e.useLivekit||(e.retryCallLoopInterval=setInterval(e.onRetryCallLoop,e.retryCallInterval),e.activeSpeaker=void 0,e.onActiveSpeakerLoop(),e.activeSpeakerLoopInterval=setInterval(e.onActiveSpeakerLoop,e.activeSpeakerInterval))})()}dispose(){var e;this.localCallFeed&&(this.removeUserMediaFeed(this.localCallFeed),this.localCallFeed=void 0),this.localScreenshareFeed&&(this.client.getMediaHandler().stopScreensharingStream(this.localScreenshareFeed.stream),this.removeScreenshareFeed(this.localScreenshareFeed),this.localScreenshareFeed=void 0,this.localDesktopCapturerSourceId=void 0),this.client.getMediaHandler().stopAllStreams(),this.transmitTimer!==null&&(clearTimeout(this.transmitTimer),this.transmitTimer=null),this.retryCallLoopInterval!==void 0&&(clearInterval(this.retryCallLoopInterval),this.retryCallLoopInterval=void 0),this.participantsExpirationTimer!==null&&(clearTimeout(this.participantsExpirationTimer),this.participantsExpirationTimer=null),this.state===Yn.Entered&&(this.forEachCall(n=>n.hangup(gt.UserHangup,!1)),this.activeSpeaker=void 0,clearInterval(this.activeSpeakerLoopInterval),this.retryCallCounts.clear(),clearInterval(this.retryCallLoopInterval),this.client.removeListener(Ww.Incoming,this.onIncomingCall),(e=this.stats)===null||e===void 0||e.stop())}leave(){this.dispose(),this.state=Yn.LocalCallFeedUninitialized}terminate(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:!0;if(n.dispose(),n.room.off(vt.Update,n.onRoomState),n.client.groupCallEventHandler.groupCalls.delete(n.room.roomId),n.client.emit(Yw.Ended,n),n.state=Yn.Ended,r){var i=n.room.currentState.getStateEvents(ee.GroupCallPrefix,n.groupCallId);yield n.client.sendStateEvent(n.room.roomId,ee.GroupCallPrefix,ev(ev({},i.getContent()),{},{"m.terminated":_fe.CallEnded}),n.groupCallId)}})()}isLocalVideoMuted(){return this.localCallFeed?this.localCallFeed.isVideoMuted():!0}isMicrophoneMuted(){return this.localCallFeed?this.localCallFeed.isAudioMuted():!0}setMicrophoneMuted(e){var n=this;return F(function*(){if(!e&&!(yield n.client.getMediaHandler().hasAudioDevice()))return!1;var r=!e&&n.isPtt;n.isPtt&&(!e&&n.isMicrophoneMuted()?n.transmitTimer=setTimeout(()=>{n.setMicrophoneMuted(!0)},n.pttMaxTransmitTime):e&&!n.isMicrophoneMuted()&&(n.transmitTimer!==null&&clearTimeout(n.transmitTimer),n.transmitTimer=null)),n.forEachCall(a=>{var o;return(o=a.localUsermediaFeed)===null||o===void 0?void 0:o.setAudioVideoMuted(e,null)});var i=function(){var a=F(function*(){var o=[];n.forEachCall(l=>o.push(l.sendMetadataUpdate())),yield Promise.all(o).catch(l=>A.info("GroupCall ".concat(n.groupCallId," setMicrophoneMuted() failed to send some metadata updates"),l))});return function(){return a.apply(this,arguments)}}();if(r&&(yield i()),n.localCallFeed){A.log("GroupCall ".concat(n.groupCallId," setMicrophoneMuted() (streamId=").concat(n.localCallFeed.stream.id,", muted=").concat(e,")"));var s=yield n.checkAudioPermissionIfNecessary(e);if(!s)return!1;n.localCallFeed.setAudioVideoMuted(e,null),kr(n.localCallFeed.stream.getAudioTracks(),!e)}else A.log("GroupCall ".concat(n.groupCallId," setMicrophoneMuted() no stream muted (muted=").concat(e,")")),n.initWithAudioMuted=e;return n.forEachCall(a=>kr(a.localUsermediaFeed.stream.getAudioTracks(),!e&&n.callExpected(a))),n.emit(mn.LocalMuteStateChanged,e,n.isLocalVideoMuted()),r||(yield i()),!0})()}checkAudioPermissionIfNecessary(e){var n=this;return F(function*(){try{if(!e&&n.localCallFeed&&!n.localCallFeed.hasAudioTrack){var r=yield n.client.getMediaHandler().getUserMediaStream(!0,!n.localCallFeed.isVideoMuted());if((r==null?void 0:r.getTracks().length)===0)return A.log("GroupCall ".concat(n.groupCallId," setMicrophoneMuted() no device to receive local stream, muted=").concat(e)),!1}}catch{return A.log("GroupCall ".concat(n.groupCallId," setMicrophoneMuted() no device or permission to receive local stream, muted=").concat(e)),!1}return!0})()}setLocalVideoMuted(e){var n=this;return F(function*(){if(!e&&!(yield n.client.getMediaHandler().hasVideoDevice()))return!1;if(n.localCallFeed){A.log("GroupCall ".concat(n.groupCallId," setLocalVideoMuted() (stream=").concat(n.localCallFeed.stream.id,", muted=").concat(e,")"));try{var r=yield n.client.getMediaHandler().getUserMediaStream(!0,!e);yield n.updateLocalUsermediaStream(r),n.localCallFeed.setAudioVideoMuted(null,e),kr(n.localCallFeed.stream.getVideoTracks(),!e)}catch{return A.log("GroupCall ".concat(n.groupCallId," setLocalVideoMuted() no device or permission to receive local stream, muted=").concat(e)),!1}}else A.log("GroupCall ".concat(n.groupCallId," setLocalVideoMuted() no stream muted (muted=").concat(e,")")),n.initWithVideoMuted=e;var i=[];return n.forEachCall(s=>i.push(s.setLocalVideoMuted(e))),yield Promise.all(i),n.forEachCall(s=>kr(s.localUsermediaFeed.stream.getVideoTracks(),!e&&n.callExpected(s))),n.emit(mn.LocalMuteStateChanged,n.isMicrophoneMuted(),e),!0})()}setScreensharingEnabled(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:{};if(e===r.isScreensharing())return e;if(e)try{A.log("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() is asking for screensharing permissions"));var s=yield r.client.getMediaHandler().getScreensharingStream(i),a=function*(c){var d=()=>{r.setScreensharingEnabled(!1),c.removeEventListener("ended",d)};c.addEventListener("ended",d)};for(var o of s.getTracks())yield*a(o);return A.log("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() granted screensharing permissions. Setting screensharing enabled on all calls")),r.localDesktopCapturerSourceId=i.desktopCapturerSourceId,r.localScreenshareFeed=new Lc({client:r.client,roomId:r.room.roomId,userId:r.client.getUserId(),deviceId:r.client.getDeviceId(),stream:s,purpose:pn.Screenshare,audioMuted:!1,videoMuted:!1}),r.addScreenshareFeed(r.localScreenshareFeed),r.emit(mn.LocalScreenshareStateChanged,!0,r.localScreenshareFeed,r.localDesktopCapturerSourceId),r.forEachCall(l=>l.pushLocalFeed(r.localScreenshareFeed.clone())),!0}catch(l){if(i.throwOnFail)throw l;return A.error("GroupCall ".concat(r.groupCallId," setScreensharingEnabled() enabling screensharing error"),l),r.emit(mn.Error,new Jw(f0.NoUserMedia,"Failed to get screen-sharing stream: ",l)),!1}else return r.forEachCall(l=>{l.localScreensharingFeed&&l.removeLocalFeed(l.localScreensharingFeed)}),r.client.getMediaHandler().stopScreensharingStream(r.localScreenshareFeed.stream),r.removeScreenshareFeed(r.localScreenshareFeed),r.localScreenshareFeed=void 0,r.localDesktopCapturerSourceId=void 0,r.emit(mn.LocalScreenshareStateChanged,!1,void 0,void 0),!1})()}isScreensharing(){return!!this.localScreenshareFeed}wantsOutgoingCall(e,n){var r=this.client.getUserId(),i=this.client.getDeviceId();return e>=r&&(e!==r||n>i)}placeOutgoingCalls(){var e=this,n=!1,r=function(o){var l,c=(l=e.calls.get(o))!==null&&l!==void 0?l:new Map,d=function(y){var v=c.get(y);if((v==null?void 0:v.getOpponentSessionId())!==p.sessionId&&e.wantsOutgoingCall(o,y)){n=!0,v!==void 0&&(A.debug("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() replacing call (userId=").concat(o,", deviceId=").concat(y,", callId=").concat(v.callId,")")),v.hangup(gt.NewSession,!1));var b=J0(e.client,e.room.roomId,{invitee:o,opponentDeviceId:y,opponentSessionId:p.sessionId,groupCallId:e.groupCallId});b===null?(A.error("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() failed to create call (userId=").concat(o,", device=").concat(y,")")),c.delete(y)):(e.initCall(b),c.set(y,b),A.debug("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() placing call (userId=").concat(o,", deviceId=").concat(y,", sessionId=").concat(p.sessionId,")")),b.placeCallWithCallFeeds(e.getLocalFeeds().map(C=>C.clone()),p.screensharing).then(()=>{e.dataChannelsEnabled&&b.createDataChannel("datachannel",e.dataChannelOptions)}).catch(C=>{A.warn("GroupCall ".concat(e.groupCallId," placeOutgoingCalls() failed to place call (userId=").concat(o,")"),C),C instanceof Cc&&C.code===f0.UnknownDevice?e.emit(mn.Error,C):e.emit(mn.Error,new Jw(f0.PlaceCallFailed,"Failed to place call to ".concat(o))),b.hangup(gt.SignallingFailed,!1),c.get(y)===b&&c.delete(y)}))}};for(var[f,p]of s)d(f);c.size>0?e.calls.set(o,c):e.calls.delete(o)};for(var[{userId:i},s]of this.participants)r(i);n&&this.emit(mn.CallsChanged,this.calls)}getMemberStateEvents(e){return e===void 0?this.room.currentState.getStateEvents(ee.GroupCallMemberPrefix):this.room.currentState.getStateEvents(ee.GroupCallMemberPrefix,e)}initCall(e){var n=tv(e);if(!n)throw new Error("Cannot init call without user id");var r=()=>this.onCallFeedsChanged(e),i=(l,c)=>this.onCallStateChanged(e,l,c),s=this.onCallHangup,a=l=>this.onCallReplaced(e,l),o=this.callHandlers.get(n);o===void 0&&(o=new Map,this.callHandlers.set(n,o)),o.set(e.getOpponentDeviceId(),{onCallFeedsChanged:r,onCallStateChanged:i,onCallHangup:s,onCallReplaced:a}),e.on(_t.FeedsChanged,r),e.on(_t.State,i),e.on(_t.Hangup,s),e.on(_t.Replaced,a),e.isPtt=this.isPtt,this.reEmitter.reEmit(e,Object.values(_t)),e.initStats(this.getGroupCallStats()),r()}disposeCall(e,n){var r=tv(e),i=e.getOpponentDeviceId();if(!r)throw new Error("Cannot dispose call without user id");var s=this.callHandlers.get(r),{onCallFeedsChanged:a,onCallStateChanged:o,onCallHangup:l,onCallReplaced:c}=s.get(i);if(e.removeListener(_t.FeedsChanged,a),e.removeListener(_t.State,o),e.removeListener(_t.Hangup,l),e.removeListener(_t.Replaced,c),s.delete(r),s.size===0&&this.callHandlers.delete(r),e.hangupReason!==gt.Replaced){var d=this.getUserMediaFeed(r,i);d&&this.removeUserMediaFeed(d);var f=this.getScreenshareFeed(r,i);f&&this.removeScreenshareFeed(f)}}getUserMediaFeed(e,n){return this.userMediaFeeds.find(r=>r.userId===e&&r.deviceId===n)}addUserMediaFeed(e){this.userMediaFeeds.push(e),e.measureVolumeActivity(!0),this.emit(mn.UserMediaFeedsChanged,this.userMediaFeeds)}replaceUserMediaFeed(e,n){var r=this.userMediaFeeds.findIndex(i=>i.userId===e.userId&&i.deviceId===e.deviceId);if(r===-1)throw new Error("Couldn't find user media feed to replace");this.userMediaFeeds.splice(r,1,n),e.dispose(),n.measureVolumeActivity(!0),this.emit(mn.UserMediaFeedsChanged,this.userMediaFeeds)}removeUserMediaFeed(e){var n=this.userMediaFeeds.findIndex(r=>r.userId===e.userId&&r.deviceId===e.deviceId);if(n===-1)throw new Error("Couldn't find user media feed to remove");this.userMediaFeeds.splice(n,1),e.dispose(),this.emit(mn.UserMediaFeedsChanged,this.userMediaFeeds),this.activeSpeaker===e&&(this.activeSpeaker=this.userMediaFeeds[0],this.emit(mn.ActiveSpeakerChanged,this.activeSpeaker))}getScreenshareFeed(e,n){return this.screenshareFeeds.find(r=>r.userId===e&&r.deviceId===n)}addScreenshareFeed(e){this.screenshareFeeds.push(e),this.emit(mn.ScreenshareFeedsChanged,this.screenshareFeeds)}replaceScreenshareFeed(e,n){var r=this.screenshareFeeds.findIndex(i=>i.userId===e.userId&&i.deviceId===e.deviceId);if(r===-1)throw new Error("Couldn't find screenshare feed to replace");this.screenshareFeeds.splice(r,1,n),e.dispose(),this.emit(mn.ScreenshareFeedsChanged,this.screenshareFeeds)}removeScreenshareFeed(e){var n=this.screenshareFeeds.findIndex(r=>r.userId===e.userId&&r.deviceId===e.deviceId);if(n===-1)throw new Error("Couldn't find screenshare feed to remove");this.screenshareFeeds.splice(n,1),e.dispose(),this.emit(mn.ScreenshareFeedsChanged,this.screenshareFeeds)}updateParticipants(){var e=this.room.getMember(this.client.getSafeUserId());if(!e){A.warn("GroupCall ".concat(this.groupCallId," updateParticipants() tried to update participants before local room member is available"));return}if(this.participantsExpirationTimer!==null&&(clearTimeout(this.participantsExpirationTimer),this.participantsExpirationTimer=null),this.state===Yn.Ended){this.participants=new Map;return}var n=new Map,r=Date.now(),i=this.state===Yn.Entered||this.enteredViaAnotherSession,s=1/0;for(var a of this.getMemberStateEvents()){var o=this.room.getMember(a.getStateKey()),l=a.getContent(),c=Array.isArray(l["m.calls"])?l["m.calls"]:[],d=c.find(b=>b["m.call_id"]===this.groupCallId),f=Array.isArray(d==null?void 0:d["m.devices"])?d["m.devices"]:[],p=f.filter(b=>typeof b.device_id=="string"&&typeof b.session_id=="string"&&typeof b.expires_ts=="number"&&b.expires_ts>r&&Array.isArray(b.feeds));if(!i&&(o==null?void 0:o.userId)===this.client.getUserId()&&(p=p.filter(b=>b.device_id!==this.client.getDeviceId())),p.length>0&&(o==null?void 0:o.membership)===Ke.Join){var g=new Map;n.set(o,g);for(var y of p)g.set(y.device_id,{sessionId:y.session_id,screensharing:y.feeds.some(b=>b.purpose===pn.Screenshare)}),y.expires_ts<s&&(s=y.expires_ts)}}if(i){var v=n.get(e);v===void 0&&(v=new Map,n.set(e,v)),v.has(this.client.getDeviceId())||v.set(this.client.getDeviceId(),{sessionId:this.client.getSessionId(),screensharing:this.getLocalFeeds().some(b=>b.purpose===pn.Screenshare)})}this.participants=n,s<1/0&&(this.participantsExpirationTimer=setTimeout(()=>this.updateParticipants(),s-r))}updateDevices(e){var n=arguments,r=this;return F(function*(){var i,s=n.length>1&&n[1]!==void 0?n[1]:!1,a=Date.now(),o=r.client.getUserId(),l=r.getMemberStateEvents(o),c=(i=l==null?void 0:l.getContent())!==null&&i!==void 0?i:{},d=Array.isArray(c["m.calls"])?c["m.calls"]:[],f=null,p=[];for(var g of d)g["m.call_id"]===r.groupCallId?f=g:p.push(g);f===null&&(f={});var y=Array.isArray(f["m.devices"])?f["m.devices"]:[],v=y.filter(R=>typeof R.device_id=="string"&&typeof R.session_id=="string"&&typeof R.expires_ts=="number"&&R.expires_ts>a&&Array.isArray(R.feeds)),b=e(v);if(b!==null){var C=[...p];b.length>0&&C.push(ev(ev({},f),{},{"m.call_id":r.groupCallId,"m.devices":b}));var S={"m.calls":C};yield r.client.sendStateEvent(r.room.roomId,ee.GroupCallMemberPrefix,S,o,{keepAlive:s})}})()}addDeviceToMemberState(){var e=this;return F(function*(){yield e.updateDevices(n=>[...n.filter(r=>r.device_id!==e.client.getDeviceId()),{device_id:e.client.getDeviceId(),session_id:e.client.getSessionId(),expires_ts:Date.now()+uU,feeds:e.getLocalFeeds().map(r=>({purpose:r.purpose}))}])})()}updateMemberState(){var e=this;return F(function*(){e.resendMemberStateTimer!==null&&(clearInterval(e.resendMemberStateTimer),e.resendMemberStateTimer=null),e.state===Yn.Entered?(yield e.addDeviceToMemberState(),e.resendMemberStateTimer=setInterval(F(function*(){A.log("GroupCall ".concat(e.groupCallId,' updateMemberState() resending call member state"'));try{yield e.addDeviceToMemberState()}catch(n){A.error("GroupCall ".concat(e.groupCallId," updateMemberState() failed to resend call member state"),n)}}),uU*3/4)):yield e.updateDevices(n=>n.filter(r=>r.device_id!==e.client.getDeviceId()),!0)})()}cleanMemberState(){var e=this;return F(function*(){var{devices:n}=yield e.client.getDevices(),r=new Map(n.map(i=>[i.device_id,i]));yield e.updateDevices(i=>{var s=i.filter(a=>{var o=r.get(a.device_id);return(o==null?void 0:o.last_seen_ts)!==void 0&&!(a.device_id===e.client.getDeviceId()&&e.state!==Yn.Entered&&!e.enteredViaAnotherSession)});return s.length===i.length?null:s})})()}getGroupCallStats(){if(this.stats===void 0){var e=this.client.getUserId()||"unknown";this.stats=new yfe(this.groupCallId,e,this.statsCollectIntervalTime),this.stats.reports.on(Hc.CONNECTION_STATS,this.onConnectionStats),this.stats.reports.on(Hc.BYTE_SENT_STATS,this.onByteSentStats),this.stats.reports.on(Hc.SUMMARY_STATS,this.onSummaryStats),this.stats.reports.on(Hc.CALL_FEED_REPORT,this.onCallFeedReport)}return this.stats}setGroupCallStatsInterval(e){this.statsCollectIntervalTime=e,this.stats!==void 0&&(this.stats.stop(),this.stats.setInterval(e),e>0&&this.stats.start())}}function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ut=function(t){return t.Fledgling="fledgling",t.InviteSent="invite_sent",t.WaitLocalMedia="wait_local_media",t.CreateOffer="create_offer",t.CreateAnswer="create_answer",t.Connecting="connecting",t.Connected="connected",t.Ringing="ringing",t.Ended="ended",t}({}),hU=function(t){return t.Voice="voice",t.Video="video",t}({}),ed=function(t){return t.Inbound="inbound",t.Outbound="outbound",t}({}),rr=function(t){return t.Local="local",t.Remote="remote",t}({}),_t=function(t){return t.Hangup="hangup",t.State="state",t.Error="error",t.Replaced="replaced",t.LocalHoldUnhold="local_hold_unhold",t.RemoteHoldUnhold="remote_hold_unhold",t.HoldUnhold="hold_unhold",t.FeedsChanged="feeds_changed",t.AssertedIdentityChanged="asserted_identity_changed",t.LengthChanged="length_changed",t.DataChannel="datachannel",t.SendVoipEvent="send_voip_event",t.PeerConnectionCreated="peer_connection_created",t}({}),gt=function(t){return t.UserHangup="user_hangup",t.LocalOfferFailed="local_offer_failed",t.NoUserMedia="no_user_media",t.UnknownDevices="unknown_devices",t.SendInvite="send_invite",t.CreateAnswer="create_answer",t.CreateOffer="create_offer",t.SendAnswer="send_answer",t.SetRemoteDescription="set_remote_description",t.SetLocalDescription="set_local_description",t.AnsweredElsewhere="answered_elsewhere",t.IceFailed="ice_failed",t.InviteTimeout="invite_timeout",t.Replaced="replaced",t.SignallingFailed="signalling_timeout",t.UserBusy="user_busy",t.Transferred="transferred",t.NewSession="new_session",t}({}),Cfe="1",bfe="stun:turn.matrix.org",Eb=60*1e3,Efe=1e3,Sfe=30*1e3,wfe=2*1e3;class Cc extends Error{constructor(e,n,r){super(n+": "+r),P(this,"code",void 0),this.code=e}}function q1(){return Date.now().toString()+Ba(16)}function fU(t){var e=[{mediaType:"audio",codec:"opus",enableDtx:!0,maxAverageBitrate:t?12e3:void 0}];return e}function Eo(t,e){return t+":"+e}class kfe extends Un{constructor(e){var n,r;if(super(),n=this,P(this,"roomId",void 0),P(this,"callId",void 0),P(this,"invitee",void 0),P(this,"hangupParty",void 0),P(this,"hangupReason",void 0),P(this,"direction",void 0),P(this,"ourPartyId",void 0),P(this,"peerConn",void 0),P(this,"toDeviceSeq",0),P(this,"isPtt",!1),P(this,"_state",ut.Fledgling),P(this,"client",void 0),P(this,"forceTURN",void 0),P(this,"turnServers",void 0),P(this,"candidateSendQueue",[]),P(this,"candidateSendTries",0),P(this,"candidatesEnded",!1),P(this,"feeds",[]),P(this,"transceivers",new Map),P(this,"inviteOrAnswerSent",!1),P(this,"waitForLocalAVStream",!1),P(this,"successor",void 0),P(this,"opponentMember",void 0),P(this,"opponentVersion",void 0),P(this,"opponentPartyId",void 0),P(this,"opponentCaps",void 0),P(this,"iceDisconnectedTimeout",void 0),P(this,"iceReconnectionTimeOut",void 0),P(this,"inviteTimeout",void 0),P(this,"removeTrackListeners",new Map),P(this,"remoteOnHold",!1),P(this,"callStatsAtEnd",void 0),P(this,"makingOffer",!1),P(this,"ignoreOffer",!1),P(this,"isSettingRemoteAnswerPending",!1),P(this,"responsePromiseChain",void 0),P(this,"remoteCandidateBuffer",new Map),P(this,"remoteAssertedIdentity",void 0),P(this,"remoteSDPStreamMetadata",void 0),P(this,"callLengthInterval",void 0),P(this,"callStartTime",void 0),P(this,"opponentDeviceId",void 0),P(this,"hasOpponentDeviceInfo",void 0),P(this,"opponentSessionId",void 0),P(this,"groupCallId",void 0),P(this,"stopVideoTrackTimer",void 0),P(this,"isOnlyDataChannelAllowed",void 0),P(this,"stats",void 0),P(this,"gotLocalIceCandidate",s=>{if(s.candidate){if(this.candidatesEnded&&A.warn("Call ".concat(this.callId," gotLocalIceCandidate() got candidate after candidates have ended!")),A.debug("Call ".concat(this.callId," got local ICE ").concat(s.candidate.sdpMid," ").concat(s.candidate.candidate)),this.callHasEnded())return;s.candidate.candidate===""?this.queueCandidate(null):this.queueCandidate(s.candidate)}}),P(this,"onIceGatheringStateChange",s=>{var a;A.debug("Call ".concat(this.callId," onIceGatheringStateChange() ice gathering state changed to ").concat(this.peerConn.iceGatheringState)),((a=this.peerConn)===null||a===void 0?void 0:a.iceGatheringState)==="complete"&&(this.queueCandidate(null),A.debug("Call ".concat(this.callId," onIceGatheringStateChange() ice gathering state complete, set candidates have ended")))}),P(this,"getLocalOfferFailed",s=>{A.error("Call ".concat(this.callId," getLocalOfferFailed() running"),s),this.emit(_t.Error,new Cc(gt.LocalOfferFailed,"Failed to get local offer!",s),this),this.terminate(rr.Local,gt.LocalOfferFailed,!1)}),P(this,"getUserMediaFailed",s=>{if(this.successor){this.successor.getUserMediaFailed(s);return}A.warn("Call ".concat(this.callId," getUserMediaFailed() failed to get user media - ending call"),s),this.emit(_t.Error,new Cc(gt.NoUserMedia,"Couldn't start capturing media! Is your microphone set up and does this app have permission?",s),this),this.terminate(rr.Local,gt.NoUserMedia,!1)}),P(this,"placeCallFailed",s=>{if(this.successor){this.successor.placeCallFailed(s);return}A.warn("Call ".concat(this.callId," placeCallWithCallFeeds() failed - ending call"),s),this.emit(_t.Error,new Cc(gt.IceFailed,"Couldn't start call! Invalid ICE server configuration.",s),this),this.terminate(rr.Local,gt.IceFailed,!1)}),P(this,"onIceConnectionStateChanged",()=>{var s,a,o,l,c,d;if(!this.callHasEnded()){if(A.debug("Call ".concat(this.callId," onIceConnectionStateChanged() running (state=").concat((s=this.peerConn)===null||s===void 0?void 0:s.iceConnectionState,", conn=").concat((a=this.peerConn)===null||a===void 0?void 0:a.connectionState,")")),["connected","completed"].includes((o=(l=this.peerConn)===null||l===void 0?void 0:l.iceConnectionState)!==null&&o!==void 0?o:""))clearTimeout(this.iceDisconnectedTimeout),this.iceDisconnectedTimeout=void 0,this.iceReconnectionTimeOut&&clearTimeout(this.iceReconnectionTimeOut),this.state=ut.Connected,!this.callLengthInterval&&!this.callStartTime&&(this.callStartTime=Date.now(),this.callLengthInterval=setInterval(()=>{this.emit(_t.LengthChanged,Math.round((Date.now()-this.callStartTime)/1e3),this)},Efe));else if(((c=this.peerConn)===null||c===void 0?void 0:c.iceConnectionState)=="failed"){var f;if(this.candidatesEnded=!1,(f=this.peerConn)!==null&&f!==void 0&&f.restartIce){var p;this.candidatesEnded=!1,A.debug("Call ".concat(this.callId," onIceConnectionStateChanged() ice restart (state=").concat((p=this.peerConn)===null||p===void 0?void 0:p.iceConnectionState,")")),this.peerConn.restartIce()}else A.info("Call ".concat(this.callId," onIceConnectionStateChanged() hanging up call (ICE failed and no ICE restart method)")),this.hangup(gt.IceFailed,!1)}else((d=this.peerConn)===null||d===void 0?void 0:d.iceConnectionState)=="disconnected"&&(this.candidatesEnded=!1,this.iceReconnectionTimeOut=setTimeout(()=>{var y,v,b;A.info("Call ".concat(this.callId," onIceConnectionStateChanged() ICE restarting because of ICE disconnected, (state=").concat((y=this.peerConn)===null||y===void 0?void 0:y.iceConnectionState,", conn=").concat((v=this.peerConn)===null||v===void 0?void 0:v.connectionState,")")),(b=this.peerConn)!==null&&b!==void 0&&b.restartIce&&(this.candidatesEnded=!1,this.peerConn.restartIce()),this.iceReconnectionTimeOut=void 0},wfe),this.iceDisconnectedTimeout=setTimeout(()=>{A.info("Call ".concat(this.callId," onIceConnectionStateChanged() hanging up call (ICE disconnected for too long)")),this.hangup(gt.IceFailed,!1)},Sfe),this.state=ut.Connecting);if(this.isPtt&&["failed","disconnected"].includes(this.peerConn.iceConnectionState))for(var g of this.getRemoteFeeds())g.setAudioVideoMuted(!0,!0)}}),P(this,"onSignallingStateChanged",()=>{var s;A.debug("Call ".concat(this.callId," onSignallingStateChanged() running (state=").concat((s=this.peerConn)===null||s===void 0?void 0:s.signalingState,")"))}),P(this,"onTrack",s=>{if(s.streams.length===0){A.warn("Call ".concat(this.callId," onTrack() called with streamless track streamless (kind=").concat(s.track.kind,")"));return}var a=s.streams[0];if(this.pushRemoteFeed(a),!this.removeTrackListeners.has(a)){var o=()=>{a.getTracks().length===0&&(A.info("Call ".concat(this.callId," onTrack() removing track (streamId=").concat(a.id,")")),this.deleteFeedByStream(a),a.removeEventListener("removetrack",o),this.removeTrackListeners.delete(a))};a.addEventListener("removetrack",o),this.removeTrackListeners.set(a,o)}}),P(this,"onDataChannel",s=>{this.emit(_t.DataChannel,s.channel,this)}),P(this,"onNegotiationNeeded",F(function*(){if(A.info("Call ".concat(n.callId," onNegotiationNeeded() negotiation is needed!")),n.state!==ut.CreateOffer&&n.opponentVersion===0){A.info("Call ".concat(n.callId," onNegotiationNeeded() opponent does not support renegotiation: ignoring negotiationneeded event"));return}n.queueGotLocalOffer()})),P(this,"onHangupReceived",s=>{A.debug("Call ".concat(this.callId," onHangupReceived() running")),this.partyIdMatches(s)||this.state===ut.Ringing?this.terminate(rr.Remote,s.reason||gt.UserHangup,!0):A.info("Call ".concat(this.callId," onHangupReceived() ignoring message from party ID ").concat(s.party_id,": our partner is ").concat(this.opponentPartyId))}),P(this,"onRejectReceived",s=>{A.debug("Call ".concat(this.callId," onRejectReceived() running"));var a=[ut.InviteSent,ut.Ringing].includes(this.state)||this.state===ut.Fledgling&&this.direction===ed.Inbound;a?this.terminate(rr.Remote,s.reason||gt.UserHangup,!0):A.debug("Call ".concat(this.callId," onRejectReceived() called in wrong state (state=").concat(this.state,")"))}),P(this,"onAnsweredElsewhere",s=>{A.debug("Call ".concat(this.callId," onAnsweredElsewhere() running")),this.terminate(rr.Remote,gt.AnsweredElsewhere,!0)}),this.roomId=e.roomId,this.invitee=e.invitee,this.client=e.client,!this.client.deviceId)throw new Error("Client must have a device ID to start calls");this.forceTURN=(r=e.forceTURN)!==null&&r!==void 0?r:!1,this.ourPartyId=this.client.deviceId,this.opponentDeviceId=e.opponentDeviceId,this.opponentSessionId=e.opponentSessionId,this.groupCallId=e.groupCallId,this.turnServers=e.turnServers||[],this.turnServers.length===0&&this.client.isFallbackICEServerAllowed()&&this.turnServers.push({urls:[bfe]});for(var i of this.turnServers)OK(i,["urls"]);this.callId=q1(),this.isOnlyDataChannelAllowed=this.client.isVoipWithNoMediaAllowed}placeVoiceCall(){var e=this;return F(function*(){yield e.placeCall(!0,!1)})()}placeVideoCall(){var e=this;return F(function*(){yield e.placeCall(!0,!0)})()}createDataChannel(e,n){var r=this.peerConn.createDataChannel(e,n);return this.emit(_t.DataChannel,r,this),r}getOpponentMember(){return this.opponentMember}getOpponentDeviceId(){return this.opponentDeviceId}getOpponentSessionId(){return this.opponentSessionId}opponentCanBeTransferred(){return!!(this.opponentCaps&&this.opponentCaps["m.call.transferee"])}opponentSupportsDTMF(){return!!(this.opponentCaps&&this.opponentCaps["m.call.dtmf"])}getRemoteAssertedIdentity(){return this.remoteAssertedIdentity}get state(){return this._state}set state(e){var n=this._state;this._state=e,this.emit(_t.State,e,n,this)}get type(){return this.hasUserMediaVideoSender||this.hasRemoteUserMediaVideoTrack?hU.Video:hU.Voice}get hasLocalUserMediaVideoTrack(){var e;return!!((e=this.localUsermediaStream)!==null&&e!==void 0&&e.getVideoTracks().length)}get hasRemoteUserMediaVideoTrack(){return this.getRemoteFeeds().some(e=>{var n;return e.purpose===pn.Usermedia&&((n=e.stream)===null||n===void 0?void 0:n.getVideoTracks().length)})}get hasLocalUserMediaAudioTrack(){var e;return!!((e=this.localUsermediaStream)!==null&&e!==void 0&&e.getAudioTracks().length)}get hasRemoteUserMediaAudioTrack(){return this.getRemoteFeeds().some(e=>{var n;return e.purpose===pn.Usermedia&&!!((n=e.stream)!==null&&n!==void 0&&n.getAudioTracks().length)})}get hasUserMediaAudioSender(){var e;return!!(!((e=this.transceivers.get(Eo(pn.Usermedia,"audio")))===null||e===void 0)&&e.sender)}get hasUserMediaVideoSender(){var e;return!!(!((e=this.transceivers.get(Eo(pn.Usermedia,"video")))===null||e===void 0)&&e.sender)}get localUsermediaFeed(){return this.getLocalFeeds().find(e=>e.purpose===pn.Usermedia)}get localScreensharingFeed(){return this.getLocalFeeds().find(e=>e.purpose===pn.Screenshare)}get localUsermediaStream(){var e;return(e=this.localUsermediaFeed)===null||e===void 0?void 0:e.stream}get localScreensharingStream(){var e;return(e=this.localScreensharingFeed)===null||e===void 0?void 0:e.stream}get remoteUsermediaFeed(){return this.getRemoteFeeds().find(e=>e.purpose===pn.Usermedia)}get remoteScreensharingFeed(){return this.getRemoteFeeds().find(e=>e.purpose===pn.Screenshare)}get remoteUsermediaStream(){var e;return(e=this.remoteUsermediaFeed)===null||e===void 0?void 0:e.stream}get remoteScreensharingStream(){var e;return(e=this.remoteScreensharingFeed)===null||e===void 0?void 0:e.stream}getFeedByStreamId(e){return this.getFeeds().find(n=>n.stream.id===e)}getFeeds(){return this.feeds}getLocalFeeds(){return this.feeds.filter(e=>e.isLocal())}getRemoteFeeds(){return this.feeds.filter(e=>!e.isLocal())}initOpponentCrypto(){var e=this;return F(function*(){var n;if(e.opponentDeviceId&&e.client.getUseE2eForGroupCall()){if(!e.client.getCrypto()){e.hasOpponentDeviceInfo=!0;return}var r=e.invitee||((n=e.getOpponentMember())===null||n===void 0?void 0:n.userId);throw r?(e.hasOpponentDeviceInfo=!1,new DZ(r)):new Error("Couldn't find opponent user ID to init crypto")}})()}getLocalSDPStreamMetadata(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n={};for(var r of this.getLocalFeeds())e&&(r.sdpMetadataStreamId=r.stream.id),n[r.sdpMetadataStreamId]={purpose:r.purpose,audio_muted:r.isAudioMuted(),video_muted:r.isVideoMuted()};return n}noIncomingFeeds(){return!this.feeds.some(e=>!e.isLocal())}pushRemoteFeed(e){if(!this.opponentSupportsSDPStreamMetadata()){this.pushRemoteFeedWithoutMetadata(e);return}var n=this.getOpponentMember().userId,r=this.remoteSDPStreamMetadata[e.id].purpose,i=this.remoteSDPStreamMetadata[e.id].audio_muted,s=this.remoteSDPStreamMetadata[e.id].video_muted;if(!r){A.warn("Call ".concat(this.callId," pushRemoteFeed() ignoring stream because we didn't get any metadata about it (streamId=").concat(e.id,")"));return}if(this.getFeedByStreamId(e.id)){A.warn("Call ".concat(this.callId," pushRemoteFeed() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")"));return}this.feeds.push(new Lc({client:this.client,call:this,roomId:this.roomId,userId:n,deviceId:this.getOpponentDeviceId(),stream:e,purpose:r,audioMuted:i,videoMuted:s})),this.emit(_t.FeedsChanged,this.feeds,this),A.info("Call ".concat(this.callId," pushRemoteFeed() pushed stream (streamId=").concat(e.id,", active=").concat(e.active,", purpose=").concat(r,")"))}pushRemoteFeedWithoutMetadata(e){var n,r=this.getOpponentMember().userId,i=pn.Usermedia,s=(n=this.feeds.find(a=>!a.isLocal()))===null||n===void 0?void 0:n.stream;if(s&&e.id!==s.id){A.warn("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() ignoring new stream because we already have stream (streamId=").concat(e.id,")"));return}if(this.getFeedByStreamId(e.id)){A.warn("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")"));return}this.feeds.push(new Lc({client:this.client,call:this,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:r,deviceId:this.getOpponentDeviceId(),stream:e,purpose:i})),this.emit(_t.FeedsChanged,this.feeds,this),A.info("Call ".concat(this.callId," pushRemoteFeedWithoutMetadata() pushed stream (streamId=").concat(e.id,", active=").concat(e.active,")"))}pushNewLocalFeed(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=this.client.getUserId();if(kr(e.getAudioTracks(),!0),kr(e.getVideoTracks(),!0),this.getFeedByStreamId(e.id)){A.warn("Call ".concat(this.callId," pushNewLocalFeed() ignoring stream because we already have a feed for it (streamId=").concat(e.id,")"));return}this.pushLocalFeed(new Lc({client:this.client,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:i,deviceId:this.getOpponentDeviceId(),stream:e,purpose:n}),r)}pushLocalFeed(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.feeds.some(a=>e.stream.id===a.stream.id)){A.info("Call ".concat(this.callId," pushLocalFeed() ignoring duplicate local stream (streamId=").concat(e.stream.id,")"));return}if(this.feeds.push(e),r){var i=function(){A.info("Call ".concat(n.callId," pushLocalFeed() adding track to peer connection (id=").concat(s.id,", kind=").concat(s.kind,", streamId=").concat(e.stream.id,", streamPurpose=").concat(e.purpose,", enabled=").concat(s.enabled,")"));var o=Eo(e.purpose,s.kind);if(n.transceivers.has(o)){var l=n.transceivers.get(o);l.sender.replaceTrack(s),l.direction=l.direction==="inactive"?"sendonly":"sendrecv"}else{var c=n.peerConn.addTrack(s,e.stream),d=n.peerConn.getTransceivers().find(f=>f.sender===c);d?n.transceivers.set(o,d):A.warn("Call ".concat(n.callId," pushLocalFeed() didn't find a matching transceiver after adding track!"))}};for(var s of e.stream.getTracks())i()}A.info("Call ".concat(this.callId," pushLocalFeed() pushed stream (id=").concat(e.stream.id,", active=").concat(e.stream.active,", purpose=").concat(e.purpose,")")),this.emit(_t.FeedsChanged,this.feeds,this)}removeLocalFeed(e){var n=Eo(e.purpose,"audio"),r=Eo(e.purpose,"video");for(var i of[n,r])if(this.transceivers.has(i)){var s=this.transceivers.get(i);s.sender&&this.peerConn.removeTrack(s.sender)}e.purpose===pn.Screenshare&&this.client.getMediaHandler().stopScreensharingStream(e.stream),this.deleteFeed(e)}deleteAllFeeds(){for(var e of this.feeds)(!e.isLocal()||!this.groupCallId)&&e.dispose();this.feeds=[],this.emit(_t.FeedsChanged,this.feeds,this)}deleteFeedByStream(e){var n=this.getFeedByStreamId(e.id);if(!n){A.warn("Call ".concat(this.callId," deleteFeedByStream() didn't find the feed to delete (streamId=").concat(e.id,")"));return}this.deleteFeed(n)}deleteFeed(e){e.dispose(),this.feeds.splice(this.feeds.indexOf(e),1),this.emit(_t.FeedsChanged,this.feeds,this)}getCurrentCallStats(){var e=this;return F(function*(){return e.callHasEnded()?e.callStatsAtEnd:e.collectCallStats()})()}collectCallStats(){var e=this;return F(function*(){if(e.peerConn){var n=yield e.peerConn.getStats(),r=[];return n.forEach(i=>{r.push(i)}),r}})()}initWithInvite(e){var n=this;return F(function*(){var r,i=e.getContent();n.direction=ed.Inbound;var s=yield n.client.checkTurnServers();s||A.warn("Call ".concat(n.callId," initWithInvite() failed to get TURN credentials! Proceeding with call anyway..."));var a=i[Gu];a?n.updateRemoteSDPStreamMetadata(a):A.debug("Call ".concat(n.callId," initWithInvite() did not get any SDPStreamMetadata! Can not send/receive multiple streams")),n.peerConn=n.createPeerConnection(),n.emit(_t.PeerConnectionCreated,n.peerConn,n),n.chooseOpponent(e),yield n.initOpponentCrypto();try{yield n.peerConn.setRemoteDescription(i.offer),A.debug("Call ".concat(n.callId," initWithInvite() set remote description: ").concat(i.offer.type)),yield n.addBufferedIceCandidates()}catch(d){A.debug("Call ".concat(n.callId," initWithInvite() failed to set remote description"),d),n.terminate(rr.Local,gt.SetRemoteDescription,!1);return}var o=(r=n.feeds.find(d=>!d.isLocal()))===null||r===void 0?void 0:r.stream;if(!n.isOnlyDataChannelAllowed&&(!o||o.getTracks().length===0)){A.error("Call ".concat(n.callId," initWithInvite() no remote stream or no tracks after setting remote description!")),n.terminate(rr.Local,gt.SetRemoteDescription,!1);return}if(n.state=ut.Ringing,e.getLocalAge()){var l=setTimeout(()=>{if(n.state==ut.Ringing){var d;A.debug("Call ".concat(n.callId," initWithInvite() invite has expired. Hanging up.")),n.hangupParty=rr.Remote,n.state=ut.Ended,n.stopAllMedia(),n.peerConn.signalingState!="closed"&&n.peerConn.close(),(d=n.stats)===null||d===void 0||d.removeStatsReportGatherer(n.callId),n.emit(_t.Hangup,n)}},i.lifetime-e.getLocalAge()),c=d=>{d!==ut.Ringing&&(clearTimeout(l),n.off(_t.State,c))};n.on(_t.State,c)}})()}initWithHangup(e){this.state=ut.Ended}shouldAnswerWithMediaType(e,n,r){return e&&!n?(A.warn("Call ".concat(this.callId," shouldAnswerWithMediaType() unable to answer with ").concat(r," because the other side isn't sending it either.")),!1):!DK(e)&&e!==n&&!this.opponentSupportsSDPStreamMetadata()?(A.warn("Call ".concat(this.callId," shouldAnswerWithMediaType() unable to answer with ").concat(r,"=").concat(e," because the other side doesn't support it. Answering with ").concat(r,"=").concat(n,".")),n):e??n}answer(e,n){var r=this;return F(function*(){if(!r.inviteOrAnswerSent){if(e===!1&&n===!1)throw new Error("You CANNOT answer a call without media");if(!r.localUsermediaStream&&!r.waitForLocalAVStream){var i=r.state,s=r.shouldAnswerWithMediaType(e,r.hasRemoteUserMediaAudioTrack,"audio"),a=r.shouldAnswerWithMediaType(n,r.hasRemoteUserMediaVideoTrack,"video");r.state=ut.WaitLocalMedia,r.waitForLocalAVStream=!0;try{var o,l=yield r.client.getMediaHandler().getUserMediaStream(s,a);r.waitForLocalAVStream=!1;var c=new Lc({client:r.client,roomId:r.roomId,userId:r.client.getUserId(),deviceId:(o=r.client.getDeviceId())!==null&&o!==void 0?o:void 0,stream:l,purpose:pn.Usermedia,audioMuted:!1,videoMuted:!1}),d=[c];r.localScreensharingFeed&&d.push(r.localScreensharingFeed),r.answerWithCallFeeds(d)}catch(f){if(a)A.warn("Call ".concat(r.callId," answer() failed to getUserMedia(), trying to getUserMedia() without video")),r.state=i,r.waitForLocalAVStream=!1,yield r.answer(s,!1);else{r.getUserMediaFailed(f);return}}}else r.waitForLocalAVStream&&(r.state=ut.WaitLocalMedia)}})()}answerWithCallFeeds(e){this.inviteOrAnswerSent||this.queueGotCallFeedsForAnswer(e)}replacedBy(e){A.debug("Call ".concat(this.callId," replacedBy() running (newCallId=").concat(e.callId,")")),this.state===ut.WaitLocalMedia?(A.debug("Call ".concat(this.callId," replacedBy() telling new call to wait for local media (newCallId=").concat(e.callId,")")),e.waitForLocalAVStream=!0):[ut.CreateOffer,ut.InviteSent].includes(this.state)&&(e.direction===ed.Outbound?e.queueGotCallFeedsForAnswer([]):(A.debug("Call ".concat(this.callId," replacedBy() handing local stream to new call(newCallId=").concat(e.callId,")")),e.queueGotCallFeedsForAnswer(this.getLocalFeeds().map(n=>n.clone())))),this.successor=e,this.emit(_t.Replaced,e,this),this.hangup(gt.Replaced,!0)}hangup(e,n){if(!this.callHasEnded()&&(A.debug("Call ".concat(this.callId," hangup() ending call (reason=").concat(e,")")),this.terminate(rr.Local,e,!n),![ut.Fledgling,ut.WaitLocalMedia].includes(this.state))){var r={};(this.opponentVersion&&this.opponentVersion!==0||e!==gt.UserHangup)&&(r.reason=e),this.sendVoipEvent(ee.CallHangup,r)}}reject(){if(this.state!==ut.Ringing)throw Error("Call must be in 'ringing' state to reject!");if(this.opponentVersion===0){A.info("Call ".concat(this.callId," reject() opponent version is less than 1: sending hangup instead of reject (opponentVersion=").concat(this.opponentVersion,")")),this.hangup(gt.UserHangup,!0);return}A.debug("Rejecting call: "+this.callId),this.terminate(rr.Local,gt.UserHangup,!0),this.sendVoipEvent(ee.CallReject,{})}upgradeCall(e,n){var r=this;return F(function*(){if(!(!e&&!n)&&r.opponentSupportsSDPStreamMetadata())try{A.debug("Call ".concat(r.callId," upgradeCall() upgrading call (audio=").concat(e,", video=").concat(n,")"));var i=e||r.hasLocalUserMediaAudioTrack,s=n||r.hasLocalUserMediaVideoTrack,a=yield r.client.getMediaHandler().getUserMediaStream(i,s,!1);yield r.updateLocalUsermediaStream(a,e,n)}catch(o){A.error("Call ".concat(r.callId," upgradeCall() failed to upgrade the call"),o),r.emit(_t.Error,new Cc(gt.NoUserMedia,"Failed to get camera access: ",o),r)}})()}opponentSupportsSDPStreamMetadata(){return!!this.remoteSDPStreamMetadata}isScreensharing(){return!!this.localScreensharingStream}setScreensharingEnabled(e,n){var r=this;return F(function*(){if(e&&r.isScreensharing())return A.warn("Call ".concat(r.callId," setScreensharingEnabled() there is already a screensharing stream - there is nothing to do!")),!0;if(!e&&!r.isScreensharing())return A.warn("Call ".concat(r.callId," setScreensharingEnabled() there already isn't a screensharing stream - there is nothing to do!")),!1;if(!r.opponentSupportsSDPStreamMetadata())return r.setScreensharingEnabledWithoutMetadataSupport(e,n);if(A.debug("Call ".concat(r.callId," setScreensharingEnabled() running (enabled=").concat(e,")")),e)try{var i=yield r.client.getMediaHandler().getScreensharingStream(n);return i?(r.pushNewLocalFeed(i,pn.Screenshare),!0):!1}catch(l){return A.error("Call ".concat(r.callId," setScreensharingEnabled() failed to get screen-sharing stream:"),l),!1}else{var s=r.transceivers.get(Eo(pn.Screenshare,"audio")),a=r.transceivers.get(Eo(pn.Screenshare,"video"));for(var o of[s,a])o&&o.sender&&r.peerConn.removeTrack(o.sender);return r.client.getMediaHandler().stopScreensharingStream(r.localScreensharingStream),r.deleteFeedByStream(r.localScreensharingStream),!1}})()}setScreensharingEnabledWithoutMetadataSupport(e,n){var r=this;return F(function*(){if(A.debug("Call ".concat(r.callId," setScreensharingEnabledWithoutMetadataSupport() running (enabled=").concat(e,")")),e)try{var i,s=yield r.client.getMediaHandler().getScreensharingStream(n);if(!s)return!1;var a=s.getTracks().find(p=>p.kind==="video"),o=(i=r.transceivers.get(Eo(pn.Usermedia,"video")))===null||i===void 0?void 0:i.sender;return o==null||o.replaceTrack(a??null),r.pushNewLocalFeed(s,pn.Screenshare,!1),!0}catch(p){return A.error("Call ".concat(r.callId," setScreensharingEnabledWithoutMetadataSupport() failed to get screen-sharing stream:"),p),!1}else{var l,c,d=(l=r.localUsermediaStream)===null||l===void 0?void 0:l.getTracks().find(p=>p.kind==="video"),f=(c=r.transceivers.get(Eo(pn.Usermedia,"video")))===null||c===void 0?void 0:c.sender;return f==null||f.replaceTrack(d??null),r.client.getMediaHandler().stopScreensharingStream(r.localScreensharingStream),r.deleteFeedByStream(r.localScreensharingStream),!1}})()}updateLocalUsermediaStream(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!1,s=n.length>2&&n[2]!==void 0?n[2]:!1,a=r.localUsermediaFeed,o=i||!a.isAudioMuted()&&!r.remoteOnHold,l=s||!a.isVideoMuted()&&!r.remoteOnHold;A.log("Call ".concat(r.callId," updateLocalUsermediaStream() running (streamId=").concat(e.id,", audio=").concat(o,", video=").concat(l,")")),kr(e.getAudioTracks(),o),kr(e.getVideoTracks(),l);for(var c of r.localUsermediaStream.getTracks())r.localUsermediaStream.removeTrack(c),c.stop();for(var d of e.getTracks())r.localUsermediaStream.addTrack(d);var f=function*(){var y=Eo(pn.Usermedia,p.kind),v=r.transceivers.get(y),b=v==null?void 0:v.sender,C=!1;if(b)try{A.info("Call ".concat(r.callId," updateLocalUsermediaStream() replacing track (id=").concat(p.id,", kind=").concat(p.kind,", streamId=").concat(e.id,", streamPurpose=").concat(a.purpose,")")),yield b.replaceTrack(p),v.direction=v.direction==="inactive"?"sendonly":"sendrecv",C=!0}catch(w){A.warn("Call ".concat(r.callId," updateLocalUsermediaStream() replaceTrack failed: adding new transceiver instead"),w)}if(!C){A.info("Call ".concat(r.callId," updateLocalUsermediaStream() adding track to peer connection (id=").concat(p.id,", kind=").concat(p.kind,", streamId=").concat(e.id,", streamPurpose=").concat(a.purpose,")"));var S=r.peerConn.addTrack(p,r.localUsermediaStream),R=r.peerConn.getTransceivers().find(w=>w.sender===S);R?r.transceivers.set(y,R):A.warn("Call ".concat(r.callId," updateLocalUsermediaStream() couldn't find matching transceiver for newly added track!"))}};for(var p of e.getTracks())yield*f()})()}setLocalVideoMuted(e){var n=this;return F(function*(){var r;if(A.log("Call ".concat(n.callId," setLocalVideoMuted() running ").concat(e)),!e&&n.stopVideoTrackTimer!==void 0&&(clearTimeout(n.stopVideoTrackTimer),n.stopVideoTrackTimer=void 0),!(yield n.client.getMediaHandler().hasVideoDevice()))return n.isLocalVideoMuted();if(!n.hasUserMediaVideoSender&&!e){var i;return(i=n.localUsermediaFeed)===null||i===void 0||i.setAudioVideoMuted(null,e),yield n.upgradeCall(!1,!0),n.isLocalVideoMuted()}if(!e&&n.localUsermediaStream.getVideoTracks().length===0){var s=yield n.client.getMediaHandler().getUserMediaStream(!0,!0);yield n.updateLocalUsermediaStream(s)}return(r=n.localUsermediaFeed)===null||r===void 0||r.setAudioVideoMuted(null,e),n.updateMuteStatus(),yield n.sendMetadataUpdate(),e&&(n.stopVideoTrackTimer=setTimeout(()=>{for(var a of n.localUsermediaStream.getVideoTracks())a.stop(),n.localUsermediaStream.removeTrack(a)},120)),n.isLocalVideoMuted()})()}isLocalVideoMuted(){var e,n;return(e=(n=this.localUsermediaFeed)===null||n===void 0?void 0:n.isVideoMuted())!==null&&e!==void 0?e:!1}setMicrophoneMuted(e){var n=this;return F(function*(){var r;return A.log("Call ".concat(n.callId," setMicrophoneMuted() running ").concat(e)),(yield n.client.getMediaHandler().hasAudioDevice())?!e&&(!n.hasUserMediaAudioSender||!n.hasLocalUserMediaAudioTrack)?(yield n.upgradeCall(!0,!1),n.isMicrophoneMuted()):((r=n.localUsermediaFeed)===null||r===void 0||r.setAudioVideoMuted(e,null),n.updateMuteStatus(),yield n.sendMetadataUpdate(),n.isMicrophoneMuted()):n.isMicrophoneMuted()})()}isMicrophoneMuted(){var e,n;return(e=(n=this.localUsermediaFeed)===null||n===void 0?void 0:n.isAudioMuted())!==null&&e!==void 0?e:!1}isRemoteOnHold(){return this.remoteOnHold}setRemoteOnHold(e){if(this.isRemoteOnHold()!==e){this.remoteOnHold=e;for(var n of this.peerConn.getTransceivers())n.direction=e?"sendonly":"sendrecv";this.updateMuteStatus(),this.sendMetadataUpdate(),this.emit(_t.RemoteHoldUnhold,this.remoteOnHold,this)}}isLocalOnHold(){if(this.state!==ut.Connected)return!1;var e=!0;for(var n of this.peerConn.getTransceivers()){var r=["inactive","recvonly"].includes(n.currentDirection);r||(e=!1)}return e}sendDtmfDigit(e){for(var n of this.peerConn.getSenders()){var r;if(((r=n.track)===null||r===void 0?void 0:r.kind)==="audio"&&n.dtmf){n.dtmf.insertDTMF(e);return}}throw new Error("Unable to find a track to send DTMF on")}updateMuteStatus(){var e=this.isMicrophoneMuted()||this.remoteOnHold,n=this.isLocalVideoMuted()||this.remoteOnHold;A.log("Call ".concat(this.callId," updateMuteStatus stream ").concat(this.localUsermediaStream.id," micShouldBeMuted ").concat(e," vidShouldBeMuted ").concat(n)),kr(this.localUsermediaStream.getAudioTracks(),!e),kr(this.localUsermediaStream.getVideoTracks(),!n)}sendMetadataUpdate(){var e=this;return F(function*(){yield e.sendVoipEvent(ee.CallSDPStreamMetadataChangedPrefix,{[Gu]:e.getLocalSDPStreamMetadata()})})()}gotCallFeedsForInvite(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.successor){this.successor.queueGotCallFeedsForAnswer(e);return}if(this.callHasEnded()){this.stopAllMedia();return}for(var r of e)this.pushLocalFeed(r);n&&this.peerConn.addTransceiver("video",{direction:"recvonly"}),this.state=ut.CreateOffer,A.debug("Call ".concat(this.callId," gotUserMediaForInvite() run"))}sendAnswer(){var e=this;return F(function*(){var n={answer:{sdp:e.peerConn.localDescription.sdp,type:e.peerConn.localDescription.type},[Gu]:e.getLocalSDPStreamMetadata(!0)};n.capabilities={"m.call.transferee":e.client.supportsCallTransfer,"m.call.dtmf":!1};var r=e.discardDuplicateCandidates();A.info("Call ".concat(e.callId," sendAnswer() discarding ").concat(r," candidates that will be sent in answer"));try{yield e.sendVoipEvent(ee.CallAnswer,n),e.inviteOrAnswerSent=!0}catch(a){e.state=ut.Ringing,a instanceof On&&a.event&&e.client.cancelPendingEvent(a.event);var i=gt.SendAnswer,s="Failed to send answer";throw a.name=="UnknownDeviceError"&&(i=gt.UnknownDevices,s="Unknown devices present in the room"),e.emit(_t.Error,new Cc(i,s,a),e),a}e.sendCandidateQueue()})()}queueGotCallFeedsForAnswer(e){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then(()=>this.gotCallFeedsForAnswer(e)):this.responsePromiseChain=this.gotCallFeedsForAnswer(e)}mungeSdp(e,n){var r=Kw.parse(e.sdp);r.media.forEach(i=>{var s=new Map,a=new Map;for(var o of i.rtp)s.set(o.payload,o.codec),a.set(o.codec,o.payload);for(var l of n)if(l.mediaType===i.type){if(!a.has(l.codec)){A.info("Call ".concat(this.callId," mungeSdp() ignoring SDP modifications for ").concat(l.codec," as it's not present."));continue}var c=[];l.enableDtx!==void 0&&c.push("usedtx=".concat(l.enableDtx?"1":"0")),l.maxAverageBitrate!==void 0&&c.push("maxaveragebitrate=".concat(l.maxAverageBitrate));var d=!1;for(var f of i.fmtp)s.get(f.payload)===l.codec&&(d=!0,f.config+=";"+c.join(";"));d||i.fmtp.push({payload:a.get(l.codec),config:c.join(";")})}}),e.sdp=Kw.write(r)}createOffer(){var e=this;return F(function*(){var n=yield e.peerConn.createOffer();return e.mungeSdp(n,fU(e.isPtt)),n})()}createAnswer(){var e=this;return F(function*(){var n=yield e.peerConn.createAnswer();return e.mungeSdp(n,fU(e.isPtt)),n})()}gotCallFeedsForAnswer(e){var n=this;return F(function*(){if(!n.callHasEnded()){n.waitForLocalAVStream=!1;for(var r of e)n.pushLocalFeed(r);n.state=ut.CreateAnswer;var i;try{n.getRidOfRTXCodecs(),i=yield n.createAnswer()}catch(s){A.debug("Call ".concat(n.callId," gotCallFeedsForAnswer() failed to create answer: "),s),n.terminate(rr.Local,gt.CreateAnswer,!0);return}try{if(yield n.peerConn.setLocalDescription(i),n.callHasEnded()||(n.state=ut.Connecting,yield new Promise(s=>{setTimeout(s,200)}),n.callHasEnded()))return;n.sendAnswer()}catch(s){A.debug("Call ".concat(n.callId," gotCallFeedsForAnswer() error setting local description!"),s),n.terminate(rr.Local,gt.SetLocalDescription,!0);return}}})()}onRemoteIceCandidatesReceived(e){var n=this;return F(function*(){if(!n.callHasEnded()){var r=e.getContent(),i=r.candidates;if(!i){A.info("Call ".concat(n.callId," onRemoteIceCandidatesReceived() ignoring candidates event with no candidates!"));return}var s=r.version===0?null:r.party_id||null;if(n.opponentPartyId===void 0){if(s){A.info("Call ".concat(n.callId," onRemoteIceCandidatesReceived() buffering ").concat(i.length," candidates until we pick an opponent"));var a=n.remoteCandidateBuffer.get(s)||[];a.push(...i),n.remoteCandidateBuffer.set(s,a)}return}if(!n.partyIdMatches(r)){A.info("Call ".concat(n.callId," onRemoteIceCandidatesReceived() ignoring candidates from party ID ").concat(r.party_id,": we have chosen party ID ").concat(n.opponentPartyId));return}yield n.addIceCandidates(i)}})()}onAnswerReceived(e){var n=this;return F(function*(){var r=e.getContent();if(A.debug("Call ".concat(n.callId," onAnswerReceived() running (hangupParty=").concat(r.party_id,")")),n.callHasEnded()){A.debug("Call ".concat(n.callId," onAnswerReceived() ignoring answer because call has ended"));return}if(n.opponentPartyId!==void 0){A.info("Call ".concat(n.callId," onAnswerReceived() ignoring answer from party ID ").concat(r.party_id,": we already have an answer/reject from ").concat(n.opponentPartyId));return}n.chooseOpponent(e),yield n.addBufferedIceCandidates(),n.state=ut.Connecting;var i=r[Gu];i?n.updateRemoteSDPStreamMetadata(i):A.warn("Call ".concat(n.callId," onAnswerReceived() did not get any SDPStreamMetadata! Can not send/receive multiple streams"));try{n.isSettingRemoteAnswerPending=!0,yield n.peerConn.setRemoteDescription(r.answer),n.isSettingRemoteAnswerPending=!1,A.debug("Call ".concat(n.callId," onAnswerReceived() set remote description: ").concat(r.answer.type))}catch(s){n.isSettingRemoteAnswerPending=!1,A.debug("Call ".concat(n.callId," onAnswerReceived() failed to set remote description"),s),n.terminate(rr.Local,gt.SetRemoteDescription,!1);return}if(n.opponentPartyId!==null)try{yield n.sendVoipEvent(ee.CallSelectAnswer,{selected_party_id:n.opponentPartyId})}catch(s){A.warn("Call ".concat(n.callId," onAnswerReceived() failed to send select_answer event"),s)}})()}onSelectAnswerReceived(e){var n=this;return F(function*(){if(n.direction!==ed.Inbound){A.warn("Call ".concat(n.callId," onSelectAnswerReceived() got select_answer for an outbound call: ignoring"));return}var r=e.getContent().selected_party_id;if(r==null){A.warn("Call ".concat(n.callId," onSelectAnswerReceived() got nonsensical select_answer with null/undefined selected_party_id: ignoring"));return}r!==n.ourPartyId&&(A.info("Call ".concat(n.callId," onSelectAnswerReceived() got select_answer for party ID ").concat(r,": we are party ID ").concat(n.ourPartyId,".")),yield n.terminate(rr.Remote,gt.AnsweredElsewhere,!0))})()}onNegotiateReceived(e){var n=this;return F(function*(){var r=e.getContent(),i=r.description;if(!i||!i.sdp||!i.type){A.info("Call ".concat(n.callId," onNegotiateReceived() ignoring invalid m.call.negotiate event"));return}var s=n.direction===ed.Inbound,a=!n.makingOffer&&(n.peerConn.signalingState==="stable"||n.isSettingRemoteAnswerPending),o=i.type==="offer"&&!a;if(n.ignoreOffer=!s&&o,n.ignoreOffer){A.info("Call ".concat(n.callId," onNegotiateReceived() ignoring colliding negotiate event because we're impolite"));return}var l=n.isLocalOnHold(),c=r[Gu];c?n.updateRemoteSDPStreamMetadata(c):A.warn("Call ".concat(n.callId," onNegotiateReceived() received negotiation event without SDPStreamMetadata!"));try{if(n.isSettingRemoteAnswerPending=i.type=="answer",yield n.peerConn.setRemoteDescription(i),n.isSettingRemoteAnswerPending=!1,A.debug("Call ".concat(n.callId," onNegotiateReceived() set remote description: ").concat(i.type)),i.type==="offer"){var d,f;try{n.getRidOfRTXCodecs(),f=yield n.createAnswer()}catch(g){A.debug("Call ".concat(n.callId," onNegotiateReceived() failed to create answer: "),g),n.terminate(rr.Local,gt.CreateAnswer,!0);return}yield n.peerConn.setLocalDescription(f),A.debug("Call ".concat(n.callId," onNegotiateReceived() create an answer")),n.sendVoipEvent(ee.CallNegotiate,{lifetime:Eb,description:(d=n.peerConn.localDescription)===null||d===void 0?void 0:d.toJSON(),[Gu]:n.getLocalSDPStreamMetadata(!0)})}}catch(g){n.isSettingRemoteAnswerPending=!1,A.warn("Call ".concat(n.callId," onNegotiateReceived() failed to complete negotiation"),g)}var p=n.isLocalOnHold();l!==p&&(n.emit(_t.LocalHoldUnhold,p,n),n.emit(_t.HoldUnhold,p))})()}updateRemoteSDPStreamMetadata(e){this.remoteSDPStreamMetadata=UK(this.remoteSDPStreamMetadata||{},e,!0);for(var n of this.getRemoteFeeds()){var r,i=n.stream.id,s=this.remoteSDPStreamMetadata[i];n.setAudioVideoMuted(s==null?void 0:s.audio_muted,s==null?void 0:s.video_muted),n.purpose=(r=this.remoteSDPStreamMetadata[i])===null||r===void 0?void 0:r.purpose}}onSDPStreamMetadataChangedReceived(e){var n=e.getContent(),r=n[Gu];this.updateRemoteSDPStreamMetadata(r)}onAssertedIdentityReceived(e){var n=this;return F(function*(){var r=e.getContent();r.asserted_identity&&(n.remoteAssertedIdentity={id:r.asserted_identity.id,displayName:r.asserted_identity.display_name},n.emit(_t.AssertedIdentityChanged,n))})()}callHasEnded(){return this.state===ut.Ended}queueGotLocalOffer(){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then(()=>this.wrappedGotLocalOffer()):this.responsePromiseChain=this.wrappedGotLocalOffer()}wrappedGotLocalOffer(){var e=this;return F(function*(){e.makingOffer=!0;try{yield e.gotLocalOffer()}catch(n){e.getLocalOfferFailed(n);return}finally{e.makingOffer=!1}})()}gotLocalOffer(){var e=this;return F(function*(){if(A.debug("Call ".concat(e.callId," gotLocalOffer() running")),e.callHasEnded()){A.debug("Call ".concat(e.callId,' gotLocalOffer() ignoring newly created offer because the call has ended"'));return}var n;try{e.getRidOfRTXCodecs(),n=yield e.createOffer()}catch(d){A.debug("Call ".concat(e.callId," gotLocalOffer() failed to create offer: "),d),e.terminate(rr.Local,gt.CreateOffer,!0);return}try{yield e.peerConn.setLocalDescription(n)}catch(d){A.debug("Call ".concat(e.callId," gotLocalOffer() error setting local description!"),d),e.terminate(rr.Local,gt.SetLocalDescription,!0);return}if(e.peerConn.iceGatheringState==="gathering"&&(yield new Promise(d=>{setTimeout(d,200)})),!e.callHasEnded()){var r=e.state===ut.CreateOffer?ee.CallInvite:ee.CallNegotiate,i={lifetime:Eb};if(r===ee.CallInvite&&e.invitee&&(i.invitee=e.invitee),e.state===ut.CreateOffer){var s;i.offer=(s=e.peerConn.localDescription)===null||s===void 0?void 0:s.toJSON()}else{var a;i.description=(a=e.peerConn.localDescription)===null||a===void 0?void 0:a.toJSON()}i.capabilities={"m.call.transferee":e.client.supportsCallTransfer,"m.call.dtmf":!1},i[Gu]=e.getLocalSDPStreamMetadata(!0);var o=e.discardDuplicateCandidates();A.info("Call ".concat(e.callId," gotLocalOffer() discarding ").concat(o," candidates that will be sent in offer"));try{yield e.sendVoipEvent(r,i)}catch(d){A.error("Call ".concat(e.callId," gotLocalOffer() failed to send invite"),d),d instanceof On&&d.event&&e.client.cancelPendingEvent(d.event);var l=gt.SignallingFailed,c="Signalling failed";e.state===ut.CreateOffer&&(l=gt.SendInvite,c="Failed to send invite"),d.name=="UnknownDeviceError"&&(l=gt.UnknownDevices,c="Unknown devices present in the room"),e.emit(_t.Error,new Cc(l,c,d),e),e.terminate(rr.Local,l,!1);return}e.sendCandidateQueue(),e.state===ut.CreateOffer&&(e.inviteOrAnswerSent=!0,e.state=ut.InviteSent,e.inviteTimeout=setTimeout(()=>{e.inviteTimeout=void 0,e.state===ut.InviteSent&&e.hangup(gt.InviteTimeout,!1)},Eb))}})()}getRidOfRTXCodecs(){if(!(!RTCRtpReceiver.getCapabilities||!RTCRtpSender.getCapabilities)){var e=this.transceivers.get(Eo(pn.Screenshare,"video"));if(!(!e||!e.setCodecPreferences)){var n=RTCRtpReceiver.getCapabilities("video").codecs,r=RTCRtpSender.getCapabilities("video").codecs,i=[];for(var s of[...n,...r])if(s.mimeType!=="video/rtx"){i.push(s);try{e.setCodecPreferences(i)}catch(a){A.info("Working around buggy WebRTC impl: claimed to support codec but threw when setting codec preferences",s,a),i.pop()}}}}}sendVoipEvent(e,n){var r=this;return F(function*(){var i=nv(nv({},n),{},{version:Cfe,call_id:r.callId,party_id:r.ourPartyId,conf_id:r.groupCallId});if(r.opponentDeviceId){var s,a=r.toDeviceSeq++,o=nv(nv({},i),{},{device_id:r.client.deviceId,sender_session_id:r.client.getSessionId(),dest_session_id:r.opponentSessionId,seq:a,[C9]:Zhe()});r.emit(_t.SendVoipEvent,{type:"toDevice",eventType:e,userId:r.invitee||((s=r.getOpponentMember())===null||s===void 0?void 0:s.userId),opponentDeviceId:r.opponentDeviceId,content:o},r);var l=r.invitee||r.getOpponentMember().userId;if(r.client.getUseE2eForGroupCall()){if(!r.hasOpponentDeviceInfo){A.warn("Call ".concat(r.callId," sendVoipEvent() failed: we do not have opponentDeviceInfo"));return}throw new Error("Unimplemented")}else yield r.client.sendToDevice(e,new Map([[l,new Map([[r.opponentDeviceId,o]])]]))}else{var c;r.emit(_t.SendVoipEvent,{type:"sendEvent",eventType:e,roomId:r.roomId,content:i,userId:r.invitee||((c=r.getOpponentMember())===null||c===void 0?void 0:c.userId)},r),yield r.client.sendEvent(r.roomId,e,i)}})()}queueCandidate(e){if(e?this.candidateSendQueue.push(e):this.candidatesEnded=!0,!(this.state===ut.Ringing||!this.inviteOrAnswerSent)){var n=this.direction===ed.Inbound?500:2e3;this.candidateSendTries===0&&setTimeout(()=>{this.sendCandidateQueue()},n)}}discardDuplicateCandidates(){for(var e=0,n=[],r=0;r<this.candidateSendQueue.length;r++){var i=this.candidateSendQueue[r];i.candidate===""?n.push(i):e++}return this.candidateSendQueue=n,e}transfer(e){var n=this;return F(function*(){var r=yield n.client.getProfileInfo(e),i=q1(),s={replacement_id:q1(),target_user:{id:e,display_name:r.displayname,avatar_url:r.avatar_url},create_call:i};yield n.sendVoipEvent(ee.CallReplaces,s),yield n.terminate(rr.Local,gt.Transferred,!0)})()}transferToCall(e){var n=this;return F(function*(){var r,i,s=(r=e.getOpponentMember())===null||r===void 0?void 0:r.userId,a=s?yield n.client.getProfileInfo(s):void 0,o=(i=n.getOpponentMember())===null||i===void 0?void 0:i.userId,l=o?yield n.client.getProfileInfo(o):void 0,c=q1(),d={replacement_id:q1(),target_user:{id:o,display_name:l==null?void 0:l.displayname,avatar_url:l==null?void 0:l.avatar_url},await_call:c};yield e.sendVoipEvent(ee.CallReplaces,d);var f={replacement_id:q1(),target_user:{id:s,display_name:a==null?void 0:a.displayname,avatar_url:a==null?void 0:a.avatar_url},create_call:c};yield n.sendVoipEvent(ee.CallReplaces,f),yield n.terminate(rr.Local,gt.Transferred,!0),yield e.terminate(rr.Local,gt.Transferred,!0)})()}terminate(e,n,r){var i=this;return F(function*(){var s;if(!i.callHasEnded()){i.hangupParty=e,i.hangupReason=n,i.state=ut.Ended,i.inviteTimeout&&(clearTimeout(i.inviteTimeout),i.inviteTimeout=void 0),i.iceDisconnectedTimeout!==void 0&&(clearTimeout(i.iceDisconnectedTimeout),i.iceDisconnectedTimeout=void 0),i.callLengthInterval&&(clearInterval(i.callLengthInterval),i.callLengthInterval=void 0),i.stopVideoTrackTimer!==void 0&&(clearTimeout(i.stopVideoTrackTimer),i.stopVideoTrackTimer=void 0);for(var[a,o]of i.removeTrackListeners)a.removeEventListener("removetrack",o);i.removeTrackListeners.clear(),i.callStatsAtEnd=yield i.collectCallStats(),i.stopAllMedia(),i.deleteAllFeeds(),i.peerConn&&i.peerConn.signalingState!=="closed"&&i.peerConn.close(),(s=i.stats)===null||s===void 0||s.removeStatsReportGatherer(i.callId),r&&i.emit(_t.Hangup,i),i.client.callEventHandler.calls.delete(i.callId)}})()}stopAllMedia(){A.debug("Call ".concat(this.callId," stopAllMedia() running"));for(var e of this.feeds)if(e.isLocal()&&e.purpose===pn.Usermedia)this.client.getMediaHandler().stopUserMediaStream(e.stream);else if(e.isLocal()&&e.purpose===pn.Screenshare)this.client.getMediaHandler().stopScreensharingStream(e.stream);else if(!e.isLocal()){A.debug("Call ".concat(this.callId," stopAllMedia() stopping stream (streamId=").concat(e.stream.id,")"));for(var n of e.stream.getTracks())n.stop()}}checkForErrorListener(){if(this.listeners(HK.Error).length===0)throw new Error("You MUST attach an error listener using call.on('error', function() {})")}sendCandidateQueue(){var e=this;return F(function*(){if(!(e.candidateSendQueue.length===0||e.callHasEnded())){var n=e.candidateSendQueue;e.candidateSendQueue=[],++e.candidateSendTries;var r={candidates:n.map(o=>o.toJSON())};e.candidatesEnded&&r.candidates.push({candidate:""}),A.debug("Call ".concat(e.callId," sendCandidateQueue() attempting to send ").concat(n.length," candidates"));try{yield e.sendVoipEvent(ee.CallCandidates,r),e.candidateSendTries=0,e.sendCandidateQueue()}catch(o){if(o instanceof On&&o.event&&e.client.cancelPendingEvent(o.event),e.candidateSendQueue.push(...n),e.candidateSendTries>5){A.debug("Call ".concat(e.callId," sendCandidateQueue() failed to send candidates on attempt ").concat(e.candidateSendTries,". Giving up on this call."),o);var i=gt.SignallingFailed,s="Signalling failed";e.emit(_t.Error,new Cc(i,s,o),e),e.hangup(i,!1);return}var a=500*Math.pow(2,e.candidateSendTries);++e.candidateSendTries,A.debug("Call ".concat(e.callId," sendCandidateQueue() failed to send candidates. Retrying in ").concat(a,"ms"),o),setTimeout(()=>{e.sendCandidateQueue()},a)}}})()}placeCall(e,n){var r=this;return F(function*(){if(!e)throw new Error("You CANNOT start a call without audio");r.state=ut.WaitLocalMedia;var i;try{var s,a=yield r.client.getMediaHandler().getUserMediaStream(e,n);kr(a.getAudioTracks(),!0),kr(a.getVideoTracks(),!0),i=new Lc({client:r.client,roomId:r.roomId,userId:r.client.getUserId(),deviceId:(s=r.client.getDeviceId())!==null&&s!==void 0?s:void 0,stream:a,purpose:pn.Usermedia,audioMuted:!1,videoMuted:!1})}catch(o){r.getUserMediaFailed(o);return}try{yield r.placeCallWithCallFeeds([i])}catch(o){r.placeCallFailed(o);return}})()}placeCallWithCallFeeds(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!1;r.checkForErrorListener(),r.direction=ed.Outbound,yield r.initOpponentCrypto(),r.client.callEventHandler.calls.set(r.callId,r);var s=yield r.client.checkTurnServers();s||A.warn("Call ".concat(r.callId," placeCallWithCallFeeds() failed to get TURN credentials! Proceeding with call anyway...")),r.peerConn=r.createPeerConnection(),r.emit(_t.PeerConnectionCreated,r.peerConn,r),r.gotCallFeedsForInvite(e,i)})()}createPeerConnection(){var e,n=new window.RTCPeerConnection({iceTransportPolicy:this.forceTURN?"relay":void 0,iceServers:this.turnServers.length?this.turnServers:void 0,iceCandidatePoolSize:this.client.iceCandidatePoolSize,bundlePolicy:"max-bundle"});n.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChanged),n.addEventListener("signalingstatechange",this.onSignallingStateChanged),n.addEventListener("icecandidate",this.gotLocalIceCandidate),n.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),n.addEventListener("track",this.onTrack),n.addEventListener("negotiationneeded",this.onNegotiationNeeded),n.addEventListener("datachannel",this.onDataChannel);var r=this.getOpponentMember(),i=r?r.userId:"unknown";return(e=this.stats)===null||e===void 0||e.addStatsReportGatherer(this.callId,i,n),n}partyIdMatches(e){var n=e.version===0?null:e.party_id||null;return n===this.opponentPartyId}chooseOpponent(e){var n,r=e.getContent();if(A.debug("Call ".concat(this.callId," chooseOpponent() running (partyId=").concat(r.party_id,")")),this.opponentVersion=r.version,this.opponentVersion===0?this.opponentPartyId=null:this.opponentPartyId=r.party_id||null,this.opponentCaps=r.capabilities||{},this.opponentMember=(n=this.client.getRoom(this.roomId).getMember(e.getSender()))!==null&&n!==void 0?n:void 0,this.opponentMember){var i;(i=this.stats)===null||i===void 0||i.updateOpponentMember(this.callId,this.opponentMember.userId)}}addBufferedIceCandidates(){var e=this;return F(function*(){var n=e.remoteCandidateBuffer.get(e.opponentPartyId);n&&(A.info("Call ".concat(e.callId," addBufferedIceCandidates() adding ").concat(n.length," buffered candidates for opponent ").concat(e.opponentPartyId)),yield e.addIceCandidates(n)),e.remoteCandidateBuffer.clear()})()}addIceCandidates(e){var n=this;return F(function*(){for(var r of e){(r.sdpMid===null||r.sdpMid===void 0)&&(r.sdpMLineIndex===null||r.sdpMLineIndex===void 0)?A.debug("Call ".concat(n.callId," addIceCandidates() got remote ICE end-of-candidates")):A.debug("Call ".concat(n.callId," addIceCandidates() got remote ICE candidate (sdpMid=").concat(r.sdpMid,", candidate=").concat(r.candidate,")"));try{yield n.peerConn.addIceCandidate(r)}catch(i){n.ignoreOffer?A.debug("Call ".concat(n.callId," addIceCandidates() failed to add remote ICE candidate because ignoring offer"),i):A.info("Call ".concat(n.callId," addIceCandidates() failed to add remote ICE candidate"),i)}}})()}get hasPeerConnection(){return!!this.peerConn}initStats(e){this.stats=e,this.stats.start()}}function kr(t,e){for(var n of t)n.enabled=e}function Qw(){if(typeof window>"u"||typeof document>"u")return!1;try{var t,e,n,r=!!((t=(e=(n=window.RTCPeerConnection)!==null&&n!==void 0?n:window.RTCSessionDescription)!==null&&e!==void 0?e:window.RTCIceCandidate)!==null&&t!==void 0?t:navigator.mediaDevices);if(!r)return A.error("WebRTC is not supported in this browser / environment"),!1}catch(i){return A.error("Exception thrown when trying to access WebRTC",i),!1}return!0}function J0(t,e,n){if(!Qw())return null;var r=n?n.forceTURN:!1,i={client:t,roomId:e,invitee:n==null?void 0:n.invitee,turnServers:t.getTurnServers(),forceTURN:t.forceTURN||r,opponentDeviceId:n==null?void 0:n.opponentDeviceId,opponentSessionId:n==null?void 0:n.opponentSessionId,groupCallId:n==null?void 0:n.groupCallId},s=new kfe(i);return t.reEmitter.reEmit(s,Object.values(_t)),s}var wd=function(t){return t.DontNotify="dont_notify",t.Notify="notify",t.Coalesce="coalesce",t}({}),KI=function(t){return t.Highlight="highlight",t.Sound="sound",t}({}),Tfe=function(t){return t.ExactEquals="==",t.LessThan="<",t.GreaterThan=">",t.GreaterThanOrEqual=">=",t.LessThanOrEqual="<=",t}({}),Rfe="2";function Ife(t){return t==="==2"||t==="2"}var Tr=function(t){return t.EventMatch="event_match",t.EventPropertyIs="event_property_is",t.EventPropertyContains="event_property_contains",t.ContainsDisplayName="contains_display_name",t.RoomMemberCount="room_member_count",t.SenderNotificationPermission="sender_notification_permission",t.CallStarted="call_started",t.CallStartedPrefix="org.matrix.msc3914.call_started",t}({}),ai=function(t){return t.Override="override",t.ContentSpecific="content",t.RoomSpecific="room",t.SenderSpecific="sender",t.Underride="underride",t}({}),si=function(t){return t.Master=".m.rule.master",t.IsUserMention=".m.rule.is_user_mention",t.IsRoomMention=".m.rule.is_room_mention",t.ContainsDisplayName=".m.rule.contains_display_name",t.ContainsUserName=".m.rule.contains_user_name",t.AtRoomNotification=".m.rule.roomnotif",t.DM=".m.rule.room_one_to_one",t.EncryptedDM=".m.rule.encrypted_room_one_to_one",t.Message=".m.rule.message",t.EncryptedMessage=".m.rule.encrypted",t.InviteToSelf=".m.rule.invite_for_me",t.MemberEvent=".m.rule.member_event",t.IncomingCall=".m.rule.call",t.SuppressNotices=".m.rule.suppress_notices",t.Tombstone=".m.rule.tombstone",t.PollStart=".m.rule.poll_start",t.PollStartUnstable=".org.matrix.msc3930.rule.poll_start",t.PollEnd=".m.rule.poll_end",t.PollEndUnstable=".org.matrix.msc3930.rule.poll_end",t.PollStartOneToOne=".m.rule.poll_start_one_to_one",t.PollStartOneToOneUnstable=".org.matrix.msc3930.rule.poll_start_one_to_one",t.PollEndOneToOne=".m.rule.poll_end_one_to_one",t.PollEndOneToOneUnstable=".org.matrix.msc3930.rule.poll_end_one_to_one",t}({});function mU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var gU=[ai.Override,ai.ContentSpecific,ai.RoomSpecific,ai.SenderSpecific,ai.Underride],xfe={".m.rule.is_room_mention":{rule_id:".m.rule.is_room_mention",default:!0,enabled:!0,conditions:[{kind:Tr.EventPropertyIs,key:"content.m\\.mentions.room",value:!0},{kind:Tr.SenderNotificationPermission,key:"room"}],actions:[wd.Notify,{set_tweak:KI.Highlight}]},".m.rule.reaction":{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:Tr.EventMatch,key:"type",pattern:"m.reaction"}],actions:[wd.DontNotify]},".org.matrix.msc3786.rule.room.server_acl":{rule_id:".org.matrix.msc3786.rule.room.server_acl",default:!0,enabled:!0,conditions:[{kind:Tr.EventMatch,key:"type",pattern:ee.RoomServerAcl},{kind:Tr.EventMatch,key:"state_key",pattern:""}],actions:[]}},ZI=Symbol("UserDefinedRules"),Mfe=[si.Master,ZI,si.SuppressNotices,si.InviteToSelf,si.MemberEvent,si.IsUserMention,si.ContainsDisplayName,si.IsRoomMention,si.AtRoomNotification,si.Tombstone,".m.rule.reaction",".m.rule.room.server_acl",".org.matrix.msc3786.rule.room.server_acl",".m.rule.suppress_edits"],Pfe={".org.matrix.msc3914.rule.room.call":{rule_id:".org.matrix.msc3914.rule.room.call",default:!0,enabled:!0,conditions:[{kind:Tr.EventMatch,key:"type",pattern:"org.matrix.msc3401.call"},{kind:Tr.CallStarted}],actions:[wd.Notify,{set_tweak:KI.Sound,value:"default"}]}},Lfe=[ZI,si.IncomingCall,".org.matrix.msc3914.rule.room.call",si.EncryptedDM,si.DM,si.Message,si.EncryptedMessage];function vU(t,e,n,r){var i=e.filter(g=>g.default),s=e.filter(g=>!g.default);function a(g){g===ZI?l.push(...s):g in n?(A.warn("Adding default global ".concat(t," push rule ").concat(g)),l.push(n[g])):A.warn("Missing default global ".concat(t," push rule ").concat(g))}var o=0,l=[];for(var c of i){var d=r.indexOf(c.rule_id);if(d===-1){l.push(c);continue}for(;d>o;){var f=r[o];a(f),o+=1}l.push(c),o+=1}for(var p of r.slice(o))a(p);return l}class xo{constructor(e){this.client=e,P(this,"parsedKeys",new Map)}static actionListToActionsObject(e){var n={notify:!1,tweaks:{}};for(var r of e)r===wd.Notify?n.notify=!0:typeof r=="object"&&(r.value===void 0&&(r.value=!0),n.tweaks[r.set_tweak]=r.value);return n}static rewriteDefaultRules(e){var n=JSON.parse(JSON.stringify(e));return n||(n={}),n.global||(n.global={}),n.global.override||(n.global.override=[]),n.global.underride||(n.global.underride=[]),n.global.override=vU(ai.Override,n.global.override,xfe,Mfe),n.global.underride=vU(ai.Underride,n.global.underride,Pfe,Lfe),n}static getPushRuleGlobRegex(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"i",[i,s]=n?["(?<=^|\\W)","(?=\\W|$)"]:["^","$"],a="".concat(n,"-").concat(r,"-").concat(e);return xo.cachedGlobToRegex[a]||(xo.cachedGlobToRegex[a]=new RegExp(i+"("+NK(e)+")"+s,r)),xo.cachedGlobToRegex[a]}updateCachedPushRuleKeys(e){e||(e={}),e.global||(e.global={}),e.global.override||(e.global.override=[]),e.global.room||(e.global.room=[]),e.global.sender||(e.global.sender=[]),e.global.underride||(e.global.underride=[]);var n=new Set(this.parsedKeys.keys());for(var r of[e.global.override,e.global.room,e.global.sender,e.global.underride])for(var i of r)if(i.conditions)for(var s of i.conditions)s.kind===Tr.EventMatch&&(n.delete(s.key),this.parsedKeys.set(s.key,xo.partsForDottedKey(s.key)));n.forEach(a=>this.parsedKeys.delete(a))}matchingRuleFromKindSet(e,n){for(var r of gU){var i=n[r];if(i){for(var s of i)if(s.enabled){var a=this.templateRuleToRaw(r,s);if(a&&this.ruleMatchesEvent(a,e))return pU(pU({},s),{},{kind:r})}}}return null}templateRuleToRaw(e,n){var r={rule_id:n.rule_id,actions:n.actions,conditions:[]};switch(e){case ai.Underride:case ai.Override:r.conditions=n.conditions;break;case ai.RoomSpecific:if(!n.rule_id)return null;r.conditions.push({kind:Tr.EventMatch,key:"room_id",value:n.rule_id});break;case ai.SenderSpecific:if(!n.rule_id)return null;r.conditions.push({kind:Tr.EventMatch,key:"user_id",value:n.rule_id});break;case ai.ContentSpecific:if(!n.pattern)return null;r.conditions.push({kind:Tr.EventMatch,key:"content.body",pattern:n.pattern});break}return r}eventFulfillsCondition(e,n){switch(e.kind){case Tr.EventMatch:return this.eventFulfillsEventMatchCondition(e,n);case Tr.EventPropertyIs:return this.eventFulfillsEventPropertyIsCondition(e,n);case Tr.EventPropertyContains:return this.eventFulfillsEventPropertyContains(e,n);case Tr.ContainsDisplayName:return this.eventFulfillsDisplayNameCondition(e,n);case Tr.RoomMemberCount:return this.eventFulfillsRoomMemberCountCondition(e,n);case Tr.SenderNotificationPermission:return this.eventFulfillsSenderNotifPermCondition(e,n);case Tr.CallStarted:case Tr.CallStartedPrefix:return this.eventFulfillsCallStartedCondition(e,n)}return!1}eventFulfillsSenderNotifPermCondition(e,n){var r=e.key;if(!r)return!1;var i=this.client.getRoom(n.getRoomId());return i!=null&&i.currentState?i.currentState.mayTriggerNotifOfType(r,n.getSender()):!1}eventFulfillsRoomMemberCountCondition(e,n){if(!e.is)return!1;var r=this.client.getRoom(n.getRoomId());if(!r||!r.currentState||!r.currentState.members)return!1;var i=r.currentState.getJoinedMemberCount(),s=e.is.match(/^([=<>]*)(\d*)$/);if(!s)return!1;var a=s[1],o=parseInt(s[2]);if(isNaN(o))return!1;switch(a){case"":case"==":return i==o;case"<":return i<o;case">":return i>o;case"<=":return i<=o;case">=":return i>=o;default:return!1}}eventFulfillsDisplayNameCondition(e,n){var r,i=n.getContent();if(n.isEncrypted()&&n.getClearContent()&&(i=n.getClearContent()),!i||!i.body||typeof i.body!="string")return!1;var s=this.client.getRoom(n.getRoomId()),a=s==null||(r=s.currentState)===null||r===void 0?void 0:r.getMember(this.client.credentials.userId);if(!a)return!1;var o=a.name,l=new RegExp("(^|\\W)"+AK(o)+"(\\W|$)","i");return i.body.search(l)>-1}eventFulfillsEventMatchCondition(e,n){if(!e.key)return!1;var r=this.valueForDottedKey(e.key,n);if(typeof r!="string")return!1;if(e.value)return e.value===r;if(typeof e.pattern!="string")return!1;var i=xo.getPushRuleGlobRegex(e.pattern,e.key==="content.body");return!!r.match(i)}eventFulfillsEventPropertyIsCondition(e,n){return!e.key||e.value===void 0?!1:e.value===this.valueForDottedKey(e.key,n)}eventFulfillsEventPropertyContains(e,n){if(!e.key||e.value===void 0)return!1;var r=this.valueForDottedKey(e.key,n);return Array.isArray(r)?r.includes(e.value):!1}eventFulfillsCallStartedCondition(e,n){return["m.ring","m.prompt"].includes(n.getContent()["m.intent"])&&!("m.terminated"in n.getContent())&&(n.getPrevContent()["m.terminated"]!==n.getContent()["m.terminated"]||_h(n.getPrevContent(),{}))}static partsForDottedKey(e){var n=[],r="",i=!1;for(var s of e){if(i){s==="\\"||s==="."?r+=s:r+="\\"+s,i=!1;continue}s=="."?(n.push(r),r=""):s=="\\"?i=!0:r+=s}return i&&(r+="\\"),n.push(r),n}valueForDottedKey(e,n){var r=this.parsedKeys.get(e);r===void 0&&(r=xo.partsForDottedKey(e),this.parsedKeys.set(e,r));var i,s=r[0],a=0;for(s==="content"?(i=n.getContent(),++a):s==="type"?(i=n.getType(),++a):i=n.event;a<r.length;++a){if(DK(i))return;var o=r[a];i=i[o]}return i}matchingRuleForEventWithRulesets(e,n){return!n||e.getSender()===this.client.getSafeUserId()?null:this.matchingRuleFromKindSet(e,n.global)}pushActionsForEventAndRulesets(e,n){var r=this.matchingRuleForEventWithRulesets(e,n);if(!r)return{};var i=xo.actionListToActionsObject(r.actions);return i.tweaks.highlight===void 0&&(i.tweaks.highlight=r.kind==ai.ContentSpecific),{actions:i,rule:r}}ruleMatchesEvent(e,n){var r;return this.client.supportsIntentionalMentions()&&n.getContent()["m.mentions"]!==void 0&&(e.rule_id===si.ContainsUserName||e.rule_id===si.ContainsDisplayName||e.rule_id===si.AtRoomNotification)?!1:!((r=e.conditions)!==null&&r!==void 0&&r.some(i=>!this.eventFulfillsCondition(i,n)))}actionsForEvent(e){var{actions:n}=this.pushActionsForEventAndRulesets(e,this.client.pushRules);return n||{}}actionsAndRuleForEvent(e){return this.pushActionsForEventAndRulesets(e,this.client.pushRules)}getPushRuleById(e){var n,r=this.getPushRuleAndKindById(e);return(n=r==null?void 0:r.rule)!==null&&n!==void 0?n:null}getPushRuleAndKindById(e){for(var n of["global"]){var r;if(((r=this.client.pushRules)===null||r===void 0?void 0:r[n])!==void 0){for(var i of gU)if(this.client.pushRules[n][i]!==void 0){for(var s of this.client.pushRules[n][i])if(s.rule_id===e)return{rule:s,kind:i}}}}return null}}P(xo,"cachedGlobToRegex",{});var Q0=["v1.1","v1.2","v1.3","v1.4","v1.5","v1.6","v1.7","v1.8","v1.9"],Ofe=Q0[0],Afe=Q0[Q0.length-1],ia=function(t){return t.SUCCESS="SUCCESS",t.IGNORE="IGNORE",t.PROMPT="PROMPT",t.FAIL_PROMPT="FAIL_PROMPT",t.FAIL_ERROR="FAIL_ERROR",t}({}),io=function(t){return t.Invalid="Invalid homeserver discovery response",t.GenericFailure="Failed to get autodiscovery configuration from server",t.InvalidHsBaseUrl="Invalid base_url for m.homeserver",t.InvalidHomeserver="Homeserver URL does not appear to be a valid Matrix homeserver",t.InvalidIsBaseUrl="Invalid base_url for m.identity_server",t.InvalidIdentityServer="Identity server URL does not appear to be a valid identity server",t.InvalidIs="Invalid identity server discovery response",t.MissingWellknown="No .well-known JSON file found",t.InvalidJson="Invalid JSON",t.UnsupportedHomeserverSpecVersion="The homeserver does not meet the version requirements",t}({});class dt{static fromDiscoveryConfig(e){var n=this;return F(function*(){var r,i={"m.homeserver":{state:dt.FAIL_ERROR,error:dt.ERROR_INVALID,base_url:null},"m.identity_server":{state:dt.PROMPT,error:null,base_url:null}};if(!(e!=null&&e["m.homeserver"]))return A.error("No m.homeserver key in config"),i["m.homeserver"].state=dt.FAIL_PROMPT,i["m.homeserver"].error=dt.ERROR_INVALID,Promise.resolve(i);if(!e["m.homeserver"].base_url)return A.error("No m.homeserver base_url in config"),i["m.homeserver"].state=dt.FAIL_PROMPT,i["m.homeserver"].error=dt.ERROR_INVALID_HS_BASE_URL,Promise.resolve(i);var s=n.sanitizeWellKnownUrl(e["m.homeserver"].base_url);if(!s)return A.error("Invalid base_url for m.homeserver"),i["m.homeserver"].error=dt.ERROR_INVALID_HS_BASE_URL,Promise.resolve(i);var a=yield n.fetchWellKnownObject("".concat(s,"/_matrix/client/versions"));if(!a||!Array.isArray((r=a.raw)===null||r===void 0?void 0:r.versions))return A.error("Invalid /versions response"),i["m.homeserver"].error=dt.ERROR_INVALID_HOMESERVER,i["m.homeserver"].base_url=s,Promise.resolve(i);var o=new Set(a.raw.versions),l=!1;for(var c of Q0)if(o.has(c)){l=!0;break}if(!l)return A.error("Homeserver does not meet version requirements"),i["m.homeserver"].error=dt.ERROR_UNSUPPORTED_HOMESERVER_SPEC_VERSION,i["m.homeserver"].base_url=s,Promise.resolve(i);i["m.homeserver"]={state:dt.SUCCESS,error:null,base_url:s};var d="";if(e["m.identity_server"]){var f={"m.homeserver":i["m.homeserver"],"m.identity_server":{state:dt.FAIL_PROMPT,error:dt.ERROR_INVALID_IS,base_url:null}};if(d=n.sanitizeWellKnownUrl(e["m.identity_server"].base_url),!d)return A.error("Invalid base_url for m.identity_server"),f["m.identity_server"].error=dt.ERROR_INVALID_IS_BASE_URL,Promise.resolve(f);var p=yield n.fetchWellKnownObject("".concat(d,"/_matrix/identity/v2"));if(!(p!=null&&p.raw)||p.action!==ia.SUCCESS)return A.error("Invalid /v2 response"),f["m.identity_server"].error=dt.ERROR_INVALID_IDENTITY_SERVER,f["m.identity_server"].base_url=d,Promise.resolve(f)}return d&&d.toString().length>0&&(i["m.identity_server"]={state:dt.SUCCESS,error:null,base_url:d}),Object.keys(e).forEach(g=>{if(g==="m.homeserver"||g==="m.identity_server"){var y=["error","state","base_url"];for(var v of Object.keys(e[g]))y.includes(v)||(i[g][v]=e[g][v])}else i[g]=e[g]}),Promise.resolve(i)})()}static findClientConfig(e){var n=this;return F(function*(){if(!e||typeof e!="string"||e.length===0)throw new Error("'domain' must be a string of non-zero length");var r={"m.homeserver":{state:dt.FAIL_ERROR,error:dt.ERROR_INVALID,base_url:null},"m.identity_server":{state:dt.PROMPT,error:null,base_url:null}},i=e.includes("://")?e:"https://".concat(e),s=yield n.fetchWellKnownObject("".concat(i,"/.well-known/matrix/client"));return!s||s.action!==ia.SUCCESS?(A.error("No response or error when parsing .well-known"),s.reason&&A.error(s.reason),s.action===ia.IGNORE?r["m.homeserver"]={state:dt.PROMPT,error:null,base_url:null}:(r["m.homeserver"].state=dt.FAIL_PROMPT,r["m.homeserver"].error=dt.ERROR_INVALID),Promise.resolve(r)):dt.fromDiscoveryConfig(s.raw)})()}static getRawClientConfig(e){var n=this;return F(function*(){var r;if(!e||typeof e!="string"||e.length===0)throw new Error("'domain' must be a string of non-zero length");var i=yield n.fetchWellKnownObject("https://".concat(e,"/.well-known/matrix/client"));return i?(r=i.raw)!==null&&r!==void 0?r:{}:{}})()}static sanitizeWellKnownUrl(e){if(!e)return!1;try{var n,r;try{r=new URL(e)}catch(o){A.error("Could not parse url",o)}if(!((n=r)!==null&&n!==void 0&&n.hostname)||r.protocol!=="http:"&&r.protocol!=="https:")return!1;var i=r.port?":".concat(r.port):"",s=r.pathname?r.pathname:"",a="".concat(r.protocol,"//").concat(r.hostname).concat(i).concat(s);return a.endsWith("/")&&(a=a.substring(0,a.length-1)),a}catch(o){return A.error(o),!1}}static fetch(e,n){return this.fetchFn?this.fetchFn(e,n):globalThis.fetch(e,n)}static setFetchFn(e){dt.fetchFn=e}static fetchWellKnownObject(e){return F(function*(){var n;try{if(n=yield dt.fetch(e,{method:oe.Get,signal:b9(5e3)}),n.status===404)return{raw:{},action:ia.IGNORE,reason:dt.ERROR_MISSING_WELLKNOWN};if(n.status!==200)return{raw:{},action:ia.FAIL_PROMPT,reason:"General failure"}}catch(a){var r=a,i="";return typeof r=="object"&&(i=r==null?void 0:r.message),{error:r,raw:{},action:ia.FAIL_PROMPT,reason:i||"General failure"}}try{return{raw:yield n.json(),action:ia.SUCCESS}}catch(a){var s=a;return{error:s,raw:{},action:ia.FAIL_PROMPT,reason:(s==null?void 0:s.name)==="SyntaxError"?dt.ERROR_INVALID_JSON:dt.ERROR_INVALID}}})()}}P(dt,"ERROR_INVALID",io.Invalid);P(dt,"ERROR_GENERIC_FAILURE",io.GenericFailure);P(dt,"ERROR_INVALID_HS_BASE_URL",io.InvalidHsBaseUrl);P(dt,"ERROR_INVALID_HOMESERVER",io.InvalidHomeserver);P(dt,"ERROR_INVALID_IS_BASE_URL",io.InvalidIsBaseUrl);P(dt,"ERROR_INVALID_IDENTITY_SERVER",io.InvalidIdentityServer);P(dt,"ERROR_INVALID_IS",io.InvalidIs);P(dt,"ERROR_MISSING_WELLKNOWN",io.MissingWellknown);P(dt,"ERROR_INVALID_JSON",io.InvalidJson);P(dt,"ERROR_UNSUPPORTED_HOMESERVER_SPEC_VERSION",io.UnsupportedHomeserverSpecVersion);P(dt,"ALL_ERRORS",Object.keys(io));P(dt,"FAIL_ERROR",ia.FAIL_ERROR);P(dt,"FAIL_PROMPT",ia.FAIL_PROMPT);P(dt,"PROMPT",ia.PROMPT);P(dt,"SUCCESS",ia.SUCCESS);P(dt,"fetchFn",void 0);var Xw=function(t){return t.IS="SERVICE_TYPE_IS",t.IM="SERVICE_TYPE_IM",t}({});class Nfe{constructor(e){this.ourEvent=e,P(this,"timeline",void 0),P(this,"ourEventIndex",0),P(this,"paginateTokens",{[Ct.Backward]:null,[Ct.Forward]:null}),this.timeline=[e]}getEvent(){return this.timeline[this.ourEventIndex]}getTimeline(){return this.timeline}getOurEventIndex(){return this.ourEventIndex}getPaginateToken(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.paginateTokens[e?Ct.Backward:Ct.Forward]}setPaginateToken(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.paginateTokens[n?Ct.Backward:Ct.Forward]=e??null}addEvents(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n?(this.timeline=e.concat(this.timeline),this.ourEventIndex+=e.length):this.timeline=this.timeline.concat(e)}}class k9{static fromJson(e,n){var r=e.context||{},i=(r.events_before||[]).map(n),s=(r.events_after||[]).map(n),a=new Nfe(n(e.result)),o=a.ourEvent.threadRootId;return i=i.filter(l=>l.threadRootId===o),s=s.filter(l=>l.threadRootId===o),a.setPaginateToken(r.start,!0),a.addEvents(i,!0),a.addEvents(s,!1),a.setPaginateToken(r.end,!1),new k9(e.rank,a)}constructor(e,n){this.rank=e,this.context=n}}var UZ=function(t){return t.Public="public",t.Private="private",t}({}),T9=function(t){return t.PrivateChat="private_chat",t.TrustedPrivateChat="trusted_private_chat",t.PublicChat="public_chat",t}({}),kd=function(t){return t.Public="public",t.Invite="invite",t.Private="private",t.Knock="knock",t.Restricted="restricted",t}({}),Dfe=function(t){return t.RoomMembership="m.room_membership",t}({}),D6=function(t){return t.CanJoin="can_join",t.Forbidden="forbidden",t}({}),zI=function(t){return t.Invited="invited",t.Joined="joined",t.Shared="shared",t.WorldReadable="world_readable",t}({});function yU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ufe(t,e){var n=!!e.preventReEmit,r=e.decrypt!==!1;function i(s){var a=t.getRoom(s.room_id),o;a&&s.state_key===void 0&&(o=a.findEventById(s.event_id)),!o||o.status?o=new $i(s):(o.setUnsigned(_U(_U({},o.getUnsigned()),s.unsigned)),n=!0);var l=o.getServerAggregatedRelation(Sn.Replace);if(l!=null&&l.content){var c=i(l);o.makeReplaced(c)}var d=a==null?void 0:a.findThreadForEvent(o);return d&&o.setThread(d),o.isEncrypted()&&(n||t.reEmitter.reEmit(o,[$t.Decrypted]),r&&t.decryptEventIfNeeded(o)),n||(t.reEmitter.reEmit(o,[$t.Replaced,$t.VisibilityChange]),a==null||a.reEmitter.reEmit(o,[$t.BeforeRedaction])),o}return i}function CU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class bU{constructor(e,n,r){this.client=e,this.indexEvent=n,this.directory=r}get id(){var e=this.indexEvent.getStateKey();if(!e)throw new Error("State key not found for branch");return e}get isActive(){return this.indexEvent.getContent().active===!0}get version(){var e;return(e=this.indexEvent.getContent().version)!==null&&e!==void 0?e:1}get roomId(){return this.indexEvent.getRoomId()}delete(){var e=this;return F(function*(){yield e.client.sendStateEvent(e.roomId,Pc.name,{},e.id),yield e.client.redactEvent(e.roomId,e.id);var n=(yield e.getVersionHistory())[1];n&&(yield n.delete())})()}getName(){return this.indexEvent.getContent().name||"Unnamed File"}setName(e){var n=this;return F(function*(){yield n.client.sendStateEvent(n.roomId,Pc.name,Ku(Ku({},n.indexEvent.getContent()),{},{name:e}),n.id)})()}isLocked(){return this.indexEvent.getContent().locked||!1}setLocked(e){var n=this;return F(function*(){yield n.client.sendStateEvent(n.roomId,Pc.name,Ku(Ku({},n.indexEvent.getContent()),{},{locked:e}),n.id)})()}getFileInfo(){var e=this;return F(function*(){var n=yield e.getFileEvent(),r=n.getOriginalContent().file,i=e.client.mxcUrlToHttp(r.url);if(!i)throw new Error("No HTTP URL available for ".concat(r.url));return{info:r,httpUrl:i}})()}getFileEvent(){var e=this;return F(function*(){var n=e.client.getRoom(e.roomId);if(!n)throw new Error("Unknown room");for(var r=n.getUnfilteredTimelineSet().findEventById(e.id);!r&&n.getLiveTimeline().getState(Me.BACKWARDS).paginationToken;)yield e.client.scrollback(n,100),r=n.getUnfilteredTimelineSet().findEventById(e.id);if(!r)throw new Error("Failed to find event");return yield e.client.decryptEventIfNeeded(r),r})()}createNewVersion(e,n,r,i){var s=this;return F(function*(){var a=yield s.directory.createFile(e,n,r,Ku(Ku({},i??{}),{},{"m.new_content":!0,"m.relates_to":{rel_type:Sn.Replace,event_id:s.id}}));return yield s.client.sendStateEvent(s.roomId,Pc.name,{active:!0,name:e,version:s.version+1},a.event_id),yield s.client.sendStateEvent(s.roomId,Pc.name,Ku(Ku({},s.indexEvent.getContent()),{},{active:!1}),s.id),a})()}getVersionHistory(){var e=this;return F(function*(){var n=[];n.push(e);var r=e.client.getRoom(e.roomId);if(!r)throw new Error("Invalid or unknown room");var i=[...r.getLiveTimeline().getEvents()].reverse(),s,a=yield e.getFileEvent();do if(s=i.find(l=>l.replacingEventId()===a.getId()),s){var o=e.directory.getFile(s.getId());if(o)n.push(o),a=s;else break}while(s);return n})()}}function EU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ffe={invite:100,kick:100,ban:100,redact:50,state_default:50,events_default:50,users_default:0,events:{[ee.RoomPowerLevels]:100,[ee.RoomHistoryVisibility]:100,[ee.RoomTombstone]:100,[ee.RoomEncryption]:100,[ee.RoomName]:50,[ee.RoomMessage]:50,[ee.RoomMessageEncrypted]:50,[ee.Sticker]:50},users:{}},Mf=function(t){return t.Viewer="viewer",t.Editor="editor",t.Owner="owner",t}({});class SU{constructor(e,n){if(this.client=e,this.roomId=n,P(this,"room",void 0),this.room=this.client.getRoom(this.roomId),!this.room)throw new Error("Unknown room")}get id(){return this.roomId}get isTopLevel(){var e=this.room.currentState.getStateEvents(ee.SpaceParent);return e!=null&&e.length?e.every(n=>{var r;return!((r=n.getContent())!==null&&r!==void 0&&r.via)}):!0}setName(e){var n=this;return F(function*(){yield n.client.sendStateEvent(n.roomId,ee.RoomName,{name:e},"")})()}invite(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!0,s=[r.retryInvite(e)];i&&s.push(...r.getDirectories().map(a=>a.invite(e,i))),yield Promise.all(s)})()}retryInvite(e){var n=this;return S1e(F(function*(){yield n.client.invite(n.roomId,e).catch(r=>{throw(r==null?void 0:r.errcode)==="M_FORBIDDEN"?new LK.AbortError(r):r})}))}setPermissions(e,n){var r=this;return F(function*(){var i,s=r.room.currentState.getStateEvents(ee.RoomPowerLevels,"");if(Array.isArray(s))throw new Error("Unexpected return type for power levels");var a=(s==null?void 0:s.getContent())||{},o=a.users_default||0,l=a.events_default||50,c=((i=a.events)===null||i===void 0?void 0:i[ee.RoomPowerLevels])||100,d=a.users||{};switch(n){case Mf.Viewer:d[e]=o;break;case Mf.Editor:d[e]=l;break;case Mf.Owner:d[e]=c;break;default:throw new Error("Invalid role: "+n)}a.users=d,yield r.client.sendStateEvent(r.roomId,ee.RoomPowerLevels,a,"")})()}getPermissions(e){var n,r,i=this.room.currentState.getStateEvents(ee.RoomPowerLevels,"");if(Array.isArray(i))throw new Error("Unexpected return type for power levels");var s=(i==null?void 0:i.getContent())||{},a=s.users_default||0,o=s.events_default||50,l=((n=s.events)===null||n===void 0?void 0:n[ee.RoomPowerLevels])||100,c=((r=s.users)===null||r===void 0?void 0:r[e])||a;return c>=l?Mf.Owner:c>=o?Mf.Editor:Mf.Viewer}createDirectory(e){var n=this;return F(function*(){var r=yield n.client.unstableCreateFileTree(e);return yield n.client.sendStateEvent(n.roomId,ee.SpaceChild,{via:[n.client.getDomain()]},r.roomId),yield n.client.sendStateEvent(r.roomId,ee.SpaceParent,{via:[n.client.getDomain()]},n.roomId),r})()}getDirectories(){var e=[],n=this.room.currentState.getStateEvents(ee.SpaceChild);for(var r of n)try{var i=r.getStateKey();if(i){var s=this.client.unstableGetFileTreeSpace(i);s&&e.push(s)}}catch(a){A.warn("Unable to create tree space instance for listing. Are we joined?",a)}return e}getDirectory(e){return this.getDirectories().find(n=>n.roomId===e)}delete(){var e=this;return F(function*(){var n=e.getDirectories();for(var r of n)yield r.delete();var i=[Ke.Invite,Ke.Knock,Ke.Join],s=e.room.currentState.getStateEvents(ee.RoomMember);for(var a of s){var o=a.getStateKey()!==e.client.getUserId();if(o&&i.includes(a.getContent().membership)){var l=a.getStateKey();if(!l)throw new Error("State key not found for branch");yield e.client.kick(e.roomId,l,"Room deleted")}}yield e.client.leave(e.roomId)})()}getOrderedChildren(e){var n=e.map(r=>({roomId:r.getStateKey(),order:r.getContent().order})).filter(r=>r.roomId);return n.sort((r,i)=>{if(r.order&&!i.order)return-1;if(!r.order&&i.order)return 1;if(!r.order&&!i.order){var s,a,o,l,c=this.client.getRoom(r.roomId),d=this.client.getRoom(i.roomId);if(!c||!d)return g7(r.roomId,i.roomId);var f=(s=(a=c.currentState.getStateEvents(ee.RoomCreate,""))===null||a===void 0?void 0:a.getTs())!==null&&s!==void 0?s:0,p=(o=(l=d.currentState.getStateEvents(ee.RoomCreate,""))===null||l===void 0?void 0:l.getTs())!==null&&o!==void 0?o:0;return f===p?g7(r.roomId,i.roomId):f-p}else return g7(r.order,i.order)}),n}getParentRoom(){var e=this.room.currentState.getStateEvents(ee.SpaceParent),n=e[0];if(!n)throw new Error("Expected to have a parent in a non-top level space");var r=n.getStateKey();if(!r)throw new Error("No state key found for parent");var i=this.client.getRoom(r);if(!i)throw new Error("Unable to locate room for parent");return i}getOrder(){if(this.isTopLevel)return-1;var e=this.getParentRoom(),n=e.currentState.getStateEvents(ee.SpaceChild),r=this.getOrderedChildren(n);return r.findIndex(i=>i.roomId===this.roomId)}setOrder(e){var n=this;return F(function*(){var r;if(n.isTopLevel)throw new Error("Cannot set order of top level spaces currently");var i=n.getParentRoom(),s=i.currentState.getStateEvents(ee.SpaceChild),a=n.getOrderedChildren(s);e=Math.max(Math.min(e,a.length-1),0);var o=n.getOrder(),l=o<e;l&&e===a.length-1?e--:!l&&e===0&&e++;var c=a[l?e:e-1],d=a[l?e+1:e],f=Nd[0],p=!1;if(!c)d!=null&&d.order&&(f=hD(d.order));else if(e===a.length-1)d!=null&&d.order&&(f=n3(d.order));else{var g=c==null?void 0:c.order,y=d==null?void 0:d.order;g&&y?g===y?f=n3(g):f=w1e(g,y):g?f=n3(g):y?f=hD(y):p=!0}if(p){for(var v,b=0;b<=e;b++){var C=a[b];if(b===0&&(v=C.order),C.order)v=C.order;else{var S;v=v?n3(v):Nd[0];var R=i.currentState.getStateEvents(ee.SpaceChild,C.roomId),w=(S=R==null?void 0:R.getContent())!==null&&S!==void 0?S:{via:[n.client.getDomain()]};yield n.client.sendStateEvent(i.roomId,ee.SpaceChild,O1(O1({},w),{},{order:v}),C.roomId)}}v&&(f=n3(v))}var I=i.currentState.getStateEvents(ee.SpaceChild,n.roomId),k=(r=I==null?void 0:I.getContent())!==null&&r!==void 0?r:{via:[n.client.getDomain()]};yield n.client.sendStateEvent(i.roomId,ee.SpaceChild,O1(O1({},k),{},{order:f}),n.roomId)})()}createFile(e,n,r,i){var s=this;return F(function*(){var{content_uri:a}=yield s.client.uploadContent(n,{includeFilename:!1});r.url=a;var o={msgtype:Gl.File,body:e,url:a,file:r};i=i??{},i["m.new_content"]&&(i["m.new_content"]=o);var l=yield s.client.sendMessage(s.roomId,O1(O1(O1({},i),o),{},{[$K.name]:{}}));return yield s.client.sendStateEvent(s.roomId,Pc.name,{active:!0,name:e},l.event_id),l})()}getFile(e){var n=this.room.currentState.getStateEvents(Pc.name,e);return n?new bU(this.client,n,this):null}listFiles(){return this.listAllFiles().filter(e=>e.isActive)}listAllFiles(){var e,n=(e=this.room.currentState.getStateEvents(Pc.name))!==null&&e!==void 0?e:[];return n.map(r=>new bU(this.client,r,this))}}var FZ=function(t){return t.Recent="recent",t.Rank="rank",t}({}),G1=function(t){return t.LocalStreamsChanged="local_streams_changed",t}({});class jfe extends Un{constructor(e){super(),this.client=e,P(this,"audioInput",void 0),P(this,"audioSettings",void 0),P(this,"videoInput",void 0),P(this,"localUserMediaStream",void 0),P(this,"userMediaStreams",[]),P(this,"screensharingStreams",[]),P(this,"getMediaStreamPromise",void 0)}restoreMediaSettings(e,n){this.audioInput=e,this.videoInput=n}setAudioInput(e){var n=this;return F(function*(){A.info("MediaHandler setAudioInput() running (deviceId=".concat(e,")")),n.audioInput!==e&&(n.audioInput=e,yield n.updateLocalUsermediaStreams())})()}setAudioSettings(e){var n=this;return F(function*(){A.info("MediaHandler setAudioSettings() running (opts=".concat(JSON.stringify(e),")")),n.audioSettings=Object.assign({},e),yield n.updateLocalUsermediaStreams()})()}setVideoInput(e){var n=this;return F(function*(){A.info("MediaHandler setVideoInput() running (deviceId=".concat(e,")")),n.videoInput!==e&&(n.videoInput=e,yield n.updateLocalUsermediaStreams())})()}setMediaInputs(e,n){var r=this;return F(function*(){A.log("MediaHandler setMediaInputs() running (audioInput: ".concat(e," videoInput: ").concat(n,")")),r.audioInput=e,r.videoInput=n,yield r.updateLocalUsermediaStreams()})()}updateLocalUsermediaStreams(){var e=this;return F(function*(){if(e.userMediaStreams.length!==0){var n=new Map;for(var r of e.client.callEventHandler.calls.values())n.set(r.callId,{audio:r.hasLocalUserMediaAudioTrack,video:r.hasLocalUserMediaVideoTrack});for(var i of e.userMediaStreams){A.log("MediaHandler updateLocalUsermediaStreams() stopping all tracks (streamId=".concat(i.id,")"));for(var s of i.getTracks())s.stop()}e.userMediaStreams=[],e.localUserMediaStream=void 0;for(var a of e.client.callEventHandler.calls.values())if(!(a.callHasEnded()||!n.has(a.callId))){var{audio:o,video:l}=n.get(a.callId);A.log("MediaHandler updateLocalUsermediaStreams() calling getUserMediaStream() (callId=".concat(a.callId,")"));var c=yield e.getUserMediaStream(o,l);a.callHasEnded()||(yield a.updateLocalUsermediaStream(c))}for(var d of e.client.groupCallEventHandler.groupCalls.values())if(d.localCallFeed){A.log("MediaHandler updateLocalUsermediaStreams() calling getUserMediaStream() (groupCallId=".concat(d.groupCallId,")"));var f=yield e.getUserMediaStream(!0,d.type===w9.Video);d.state!==Yn.Ended&&(yield d.updateLocalUsermediaStream(f))}e.emit(G1.LocalStreamsChanged)}})()}hasAudioDevice(){return F(function*(){try{var e=yield navigator.mediaDevices.enumerateDevices();return e.filter(n=>n.kind==="audioinput").length>0}catch(n){return A.log("MediaHandler hasAudioDevice() calling navigator.mediaDevices.enumerateDevices with error",n),!1}})()}hasVideoDevice(){return F(function*(){try{var e=yield navigator.mediaDevices.enumerateDevices();return e.filter(n=>n.kind==="videoinput").length>0}catch(n){return A.log("MediaHandler hasVideoDevice() calling navigator.mediaDevices.enumerateDevices with error",n),!1}})()}getUserMediaStream(e,n){var r=arguments,i=this;return F(function*(){var s=r.length>2&&r[2]!==void 0?r[2]:!0;return i.getMediaStreamPromise?i.getMediaStreamPromise=i.getMediaStreamPromise.then(()=>i.getUserMediaStreamInternal(e,n,s)):i.getMediaStreamPromise=i.getUserMediaStreamInternal(e,n,s),i.getMediaStreamPromise})()}getUserMediaStreamInternal(e,n,r){var i=this;return F(function*(){var s=e&&(yield i.hasAudioDevice()),a=n&&(yield i.hasVideoDevice()),o,l=!0;if(i.localUserMediaStream){var c,d;s!==i.localUserMediaStream.getAudioTracks().length>0&&(l=!1),a!==i.localUserMediaStream.getVideoTracks().length>0&&(l=!1),s&&((c=i.localUserMediaStream.getAudioTracks()[0])===null||c===void 0||(c=c.getSettings())===null||c===void 0?void 0:c.deviceId)!==i.audioInput&&(l=!1),a&&((d=i.localUserMediaStream.getVideoTracks()[0])===null||d===void 0||(d=d.getSettings())===null||d===void 0?void 0:d.deviceId)!==i.videoInput&&(l=!1)}else l=!1;if(l){var y;if(o=i.localUserMediaStream.clone(),A.log("MediaHandler getUserMediaStreamInternal() cloning (oldStreamId=".concat((y=i.localUserMediaStream)===null||y===void 0?void 0:y.id," newStreamId=").concat(o.id," shouldRequestAudio=").concat(s," shouldRequestVideo=").concat(a,")")),!s)for(var v of o.getAudioTracks())o.removeTrack(v);if(!a)for(var b of o.getVideoTracks())o.removeTrack(b)}else{var f=i.getUserMediaContraints(s,a);o=yield navigator.mediaDevices.getUserMedia(f),A.log("MediaHandler getUserMediaStreamInternal() calling getUserMediaStream (streamId=".concat(o.id,", shouldRequestAudio=").concat(s,", shouldRequestVideo=").concat(a,", constraints=").concat(JSON.stringify(f),")"));for(var p of o.getTracks()){var g=p.getSettings();p.kind==="audio"?i.audioInput=g.deviceId:p.kind==="video"&&(i.videoInput=g.deviceId)}r&&(i.localUserMediaStream=o)}return r&&i.userMediaStreams.push(o),i.emit(G1.LocalStreamsChanged),o})()}stopUserMediaStream(e){A.log("MediaHandler stopUserMediaStream() stopping (streamId=".concat(e.id,")"));for(var n of e.getTracks())n.stop();var r=this.userMediaStreams.indexOf(e);if(r!==-1&&(A.debug("MediaHandler stopUserMediaStream() splicing usermedia stream out stream array (streamId=".concat(e.id,")"),e.id),this.userMediaStreams.splice(r,1)),this.emit(G1.LocalStreamsChanged),this.localUserMediaStream===e)this.localUserMediaStream=void 0;else for(var i of e.getTracks()){var s;if((s=this.localUserMediaStream)!==null&&s!==void 0&&s.getTrackById(i.id)){this.stopUserMediaStream(this.localUserMediaStream);break}}}getScreensharingStream(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:{},i=e.length>1&&e[1]!==void 0?e[1]:!0,s;if(n.screensharingStreams.length===0){var a=n.getScreenshareContraints(r);r.desktopCapturerSourceId?(A.debug("MediaHandler getScreensharingStream() calling getUserMedia() (opts=".concat(JSON.stringify(r),")")),s=yield navigator.mediaDevices.getUserMedia(a)):(A.debug("MediaHandler getScreensharingStream() calling getDisplayMedia() (opts=".concat(JSON.stringify(r),")")),s=yield navigator.mediaDevices.getDisplayMedia(a))}else{var o=n.screensharingStreams[n.screensharingStreams.length-1];A.log("MediaHandler getScreensharingStream() cloning (streamId=".concat(o.id,")")),s=o.clone()}return i&&n.screensharingStreams.push(s),n.emit(G1.LocalStreamsChanged),s})()}stopScreensharingStream(e){A.debug("MediaHandler stopScreensharingStream() stopping stream (streamId=".concat(e.id,")"));for(var n of e.getTracks())n.stop();var r=this.screensharingStreams.indexOf(e);r!==-1&&(A.debug("MediaHandler stopScreensharingStream() splicing stream out (streamId=".concat(e.id,")")),this.screensharingStreams.splice(r,1)),this.emit(G1.LocalStreamsChanged)}stopAllStreams(){for(var e of this.userMediaStreams){A.log("MediaHandler stopAllStreams() stopping (streamId=".concat(e.id,")"));for(var n of e.getTracks())n.stop()}for(var r of this.screensharingStreams)for(var i of r.getTracks())i.stop();this.userMediaStreams=[],this.screensharingStreams=[],this.localUserMediaStream=void 0,this.emit(G1.LocalStreamsChanged)}getUserMediaContraints(e,n){var r=!!navigator.webkitGetUserMedia;return{audio:e?{deviceId:this.audioInput?{ideal:this.audioInput}:void 0,autoGainControl:this.audioSettings?{ideal:this.audioSettings.autoGainControl}:void 0,echoCancellation:this.audioSettings?{ideal:this.audioSettings.echoCancellation}:void 0,noiseSuppression:this.audioSettings?{ideal:this.audioSettings.noiseSuppression}:void 0}:!1,video:n?{deviceId:this.videoInput?{ideal:this.videoInput}:void 0,width:r?{exact:640}:{ideal:640},height:r?{exact:360}:{ideal:360}}:!1}}getScreenshareContraints(e){var{desktopCapturerSourceId:n,audio:r}=e;return n?{audio:r??!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n}}}:{audio:r??!1,video:!0}}}var wU=function(t){return t.RequestFinished="FINISHED",t.Complete="COMPLETE",t}({}),Jg=function(t){return t.PreProcess="ExtState.PreProcess",t.PostProcess="ExtState.PostProcess",t}({}),ek=function(t){return t.RoomData="SlidingSync.RoomData",t.Lifecycle="SlidingSync.Lifecycle",t}({}),Hfe=3;class $fe{constructor(e){this.crypto=e}name(){return"e2ee"}when(){return Jg.PreProcess}onRequest(e){var n=this;return F(function*(){return e&&(A.log("ExtensionE2EE: invalidating all device lists due to missing 'pos'"),yield n.crypto.markAllTrackedUsersAsDirty()),{enabled:!0}})()}onResponse(e){var n=this;return F(function*(){e.device_lists&&(yield n.crypto.processDeviceLists(e.device_lists)),yield n.crypto.processKeyCounts(e.device_one_time_keys_count,e.device_unused_fallback_key_types||e["org.matrix.msc2732.device_unused_fallback_key_types"]),n.crypto.onSyncCompleted({})})()}}class Vfe{constructor(e,n){this.client=e,this.cryptoCallbacks=n,P(this,"nextBatch",null)}name(){return"to_device"}when(){return Jg.PreProcess}onRequest(e){var n=this;return F(function*(){return{since:n.nextBatch!==null?n.nextBatch:void 0,limit:100,enabled:!0}})()}onResponse(e){var n=this;return F(function*(){var r=[],i=e.events||[];i.length>0&&n.cryptoCallbacks&&(i=yield n.cryptoCallbacks.preprocessToDeviceMessages(i)),i.map(PZ).map(s=>{if(s.getType()==="m.key.verification.cancel"){var a=s.getContent().transaction_id;a&&r.push(a)}return s}).forEach(s=>{var a=s.getContent();if(s.getType()=="m.room.message"&&a.msgtype=="m.bad.encrypted"){A.log("Ignoring undecryptable to-device event from "+s.getSender());return}if(s.getType()==="m.key.verification.start"||s.getType()==="m.key.verification.request"){var o=a.transaction_id;r.includes(o)&&s.flagCancelled()}n.client.emit(Le.ToDeviceEvent,s)}),n.nextBatch=e.next_batch})()}}class Bfe{constructor(e){this.client=e}name(){return"account_data"}when(){return Jg.PostProcess}onRequest(e){return F(function*(){return{enabled:!0}})()}onResponse(e){var n=this;return F(function*(){e.global&&e.global.length>0&&n.processGlobalAccountData(e.global);for(var r in e.rooms){var i=E2(n.client,r,e.rooms[r]),s=n.client.getRoom(r);if(!s){A.warn("got account data for room but room doesn't exist on client:",r);continue}s.addAccountData(i),i.forEach(a=>{n.client.emit(Le.Event,a)})}})()}processGlobalAccountData(e){var n=E2(this.client,void 0,e),r=n.reduce((i,s)=>(i[s.getType()]=this.client.store.getAccountData(s.getType()),i),{});this.client.store.storeAccountDataEvents(n),n.forEach(i=>{if(i.getType()===ee.PushRules){var s=i.getContent();this.client.setPushRules(s)}var a=r[i.getType()];return this.client.emit(Le.AccountData,i,a),i})}}class qfe{constructor(e){this.client=e}name(){return"typing"}when(){return Jg.PostProcess}onRequest(e){return F(function*(){return{enabled:!0}})()}onResponse(e){var n=this;return F(function*(){if(e!=null&&e.rooms)for(var r in e.rooms)HZ(n.client,r,[e.rooms[r]])})()}}class Gfe{constructor(e){this.client=e}name(){return"receipts"}when(){return Jg.PostProcess}onRequest(e){return F(function*(){return{enabled:!0}})()}onResponse(e){var n=this;return F(function*(){if(e!=null&&e.rooms)for(var r in e.rooms)HZ(n.client,r,[e.rooms[r]])})()}}class jZ{constructor(e,n,r,i){this.slidingSync=e,this.client=n,P(this,"opts",void 0),P(this,"syncOpts",void 0),P(this,"syncState",null),P(this,"syncStateData",void 0),P(this,"lastPos",null),P(this,"failCount",0),P(this,"notifEvents",[]),this.opts=IZ(r),this.syncOpts=xZ(i),n.getNotifTimelineSet()&&n.reEmitter.reEmit(n.getNotifTimelineSet(),[xe.Timeline,xe.TimelineReset]),this.slidingSync.on(ek.Lifecycle,this.onLifecycle.bind(this)),this.slidingSync.on(ek.RoomData,this.onRoomData.bind(this));var s=[new Vfe(this.client,this.syncOpts.cryptoCallbacks),new Bfe(this.client),new qfe(this.client),new Gfe(this.client)];this.syncOpts.cryptoCallbacks&&s.push(new $fe(this.syncOpts.cryptoCallbacks)),s.forEach(a=>{this.slidingSync.registerExtension(a)})}onRoomData(e,n){var r=this;return F(function*(){var i=r.client.store.getRoom(e);if(!i){if(!n.initial){A.debug("initial flag not set but no stored room exists for room ",e,n);return}i=MZ(r.client,e,r.opts)}yield r.processRoomData(r.client,i,n)})()}onLifecycle(e,n,r){switch(r&&A.debug("onLifecycle",e,r),e){case wU.Complete:if(this.purgeNotifications(),!n)break;this.lastPos||this.updateSyncState(Kt.Prepared,{oldSyncToken:void 0,nextSyncToken:n.pos,catchingUp:!1,fromCache:!1}),this.updateSyncState(Kt.Syncing,{oldSyncToken:this.lastPos,nextSyncToken:n.pos,catchingUp:!1,fromCache:!1}),this.lastPos=n.pos;break;case wU.RequestFinished:if(r){if(this.failCount+=1,this.updateSyncState(this.failCount>Hfe?Kt.Error:Kt.Reconnecting,{error:new On(r)}),this.shouldAbortSync(new On(r)))return}else this.failCount=0,A.log("SlidingSyncState.RequestFinished with ".concat(Object.keys((n==null?void 0:n.rooms)||[]).length," rooms"));break}}syncLeftRooms(){return F(function*(){return[]})()}peek(e){return F(function*(){return null})()}stopPeeking(){}setPresence(e){}getSyncState(){return this.syncState}getSyncStateData(){var e;return(e=this.syncStateData)!==null&&e!==void 0?e:null}createRoom(e){var{timelineSupport:n}=this.client,r=new E9(e,this.client,this.client.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:n});return this.client.reEmitter.reEmit(r,[xe.Name,xe.Redaction,xe.RedactionCancelled,xe.Receipt,xe.Tags,xe.LocalEchoUpdated,xe.AccountData,xe.MyMembership,xe.Timeline,xe.TimelineReset]),this.registerStateListeners(r),r}registerStateListeners(e){this.client.reEmitter.reEmit(e.currentState,[vt.Events,vt.Members,vt.NewMember,vt.Update]),e.currentState.on(vt.NewMember,(n,r,i)=>{var s;i.user=(s=this.client.getUser(i.userId))!==null&&s!==void 0?s:void 0,this.client.reEmitter.reEmit(i,[xs.Name,xs.Typing,xs.PowerLevel,xs.Membership])})}shouldAbortSync(e){return e.errcode==="M_UNKNOWN_TOKEN"?(A.warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(Kt.Error,{error:e}),!0):!1}processRoomData(e,n,r){var i=this;return F(function*(){r=Kfe(e,n.roomId,r);var s=E2(i.client,n.roomId,r.required_state),a=E2(i.client,n.roomId,r.timeline,!1),o=[];if(r.limited||r.initial){var l=new Set;n.getLiveTimeline().getEvents().forEach(S=>{l.add(S.getId())});for(var c=[],d=[],f=!1,p=a.length-1;p>=0;p--){var g=a[p];if(l.has(g.getId())){f=!0;continue}f?c.push(g):d.unshift(g)}a=d,c.length>0&&n.addEventsToTimeline(c,!0,!1,n.getLiveTimeline(),r.prev_batch)}var y=n.hasEncryptionStateEvent();if(r.notification_count!=null&&n.setUnreadNotificationCount(Zt.Total,r.notification_count),r.highlight_count!=null&&(!y||y&&n.getUnreadNotificationCount(Zt.Highlight)<=0)&&n.setUnreadNotificationCount(Zt.Highlight,r.highlight_count),r.bump_stamp&&n.setBumpStamp(r.bump_stamp),Number.isInteger(r.invited_count)&&n.currentState.setInvitedMemberCount(r.invited_count),Number.isInteger(r.joined_count)&&n.currentState.setJoinedMemberCount(r.joined_count),r.invite_state){var v=E2(i.client,n.roomId,r.invite_state);yield i.injectRoomEvents(n,v),r.initial&&(n.recalculate(),i.client.store.storeRoom(n),i.client.emit(Le.Room,n)),v.forEach(S=>{i.client.emit(Le.Event,S)});return}if(r.limited){var b;n.getLiveTimeline().setPaginationToken((b=r.prev_batch)!==null&&b!==void 0?b:null,Me.BACKWARDS)}yield i.injectRoomEvents(n,s,a,r.num_live),n.addEphemeralEvents(o),n.updateMyMembership(Ke.Join),n.setMSC4186SummaryData(r.heroes,r.joined_count,r.invited_count),n.recalculate(),r.initial&&(e.store.storeRoom(n),e.emit(Le.Room,n)),i.addNotifications(a);var C=function(){var S=F(function*(R){e.emit(Le.Event,R),R.isState()&&R.getType()==ee.RoomEncryption&&i.syncOpts.cryptoCallbacks&&(yield i.syncOpts.cryptoCallbacks.onCryptoEvent(n,R))});return function(w){return S.apply(this,arguments)}}();yield s2(s,C),yield s2(a,C),o.forEach(function(S){e.emit(Le.Event,S)}),n.decryptCriticalEvents()})()}injectRoomEvents(e,n){var r=arguments,i=this;return F(function*(){var s=r.length>2&&r[2]!==void 0?r[2]:[],a=r.length>3&&r[3]!==void 0?r[3]:0,o=e.getLiveTimeline(),l=o.getEvents().length==0;if(l){for(var c of n)i.client.getPushActionsForEvent(c);o.initialiseState(n)}l||(e.oldState.setStateEvents(n),e.currentState.setStateEvents(n));var d=[];a>0&&(d=s.slice(-1*a),s=s.slice(0,-1*d.length)),yield e.addLiveEvents(s,{fromCache:!0,addToState:!1}),d.length>0&&(yield e.addLiveEvents(d,{fromCache:!1,addToState:!1})),e.recalculate(),i.resolveInvites(e)})()}resolveInvites(e){if(!(!e||!this.opts.resolveInvitesToProfiles)){var n=this.client;e.getMembersWithMembership(Ke.Invite).forEach(function(r){if(!r.requestedProfileInfo){r.requestedProfileInfo=!0;var i=n.getUser(r.userId),s;i?s=Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):s=n.getProfileInfo(r.userId),s.then(function(a){var o=r.events.member;o.getContent().membership===Ke.Invite&&(o.getContent().avatar_url=a.avatar_url,o.getContent().displayname=a.displayname,r.setMembershipEvent(o,e.currentState))},function(a){})}})}}retryImmediately(){return!0}sync(){var e=this;return F(function*(){for(A.debug("Sliding sync init loop");!e.client.isGuest();)try{A.debug("Getting push rules...");var n=yield e.client.getPushRules();A.debug("Got push rules"),e.client.pushRules=n;break}catch(r){if(A.error("Getting push rules failed",r),e.shouldAbortSync(r))return}yield e.slidingSync.start()})()}stop(){A.debug("SyncApi.stop"),this.slidingSync.stop()}updateSyncState(e,n){var r=this.syncState;this.syncState=e,this.syncStateData=n,this.client.emit(Le.Sync,this.syncState,r,n)}addNotifications(e){if(this.client.getNotifTimelineSet())for(var n of e){var r=this.client.getPushActionsForEvent(n);r&&r.notify&&r.tweaks&&r.tweaks.highlight&&this.notifEvents.push(n)}}purgeNotifications(){this.notifEvents.sort(function(e,n){return e.getTs()-n.getTs()}),this.notifEvents.forEach(e=>{var n;(n=this.client.getNotifTimelineSet())===null||n===void 0||n.addLiveEvent(e,{addToState:!1})}),this.notifEvents=[]}}function Kfe(t,e,n){if(!n.name)return n;for(var r of n.required_state)if(r.type===ee.RoomName&&r.state_key==="")return r.content={name:n.name},n;return n.required_state.push({event_id:"$fake-sliding-sync-name-event-"+e,state_key:"",type:ee.RoomName,content:{name:n.name},sender:t.getUserId(),origin_server_ts:new Date().getTime()}),n}function E2(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=t.getEventMapper({decrypt:r});return n.map(function(s){return s.room_id=e,i(s)})}function HZ(t,e,n){var r=E2(t,e,n),i=t.getRoom(e);if(!i){A.warn("got ephemeral events for room but room doesn't exist on client:",e);return}i.addEphemeralEvents(r),r.forEach(s=>{t.emit(Le.Event,s)})}var WI=new br("m.beacon_info","org.matrix.msc3672.beacon_info"),tk=new br("m.beacon","org.matrix.msc3672.beacon");class nm{static RETRY_BACKOFF_RATELIMIT(e,n,r){return $I(r,n,!1)}static QUEUE_MESSAGES(e){return e.getType()===ee.RoomMessage||e.hasAssociation()?"message":null}constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nm.RETRY_BACKOFF_RATELIMIT,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nm.QUEUE_MESSAGES;this.retryAlgorithm=e,this.queueAlgorithm=n,P(this,"queues",{}),P(this,"activeQueues",[]),P(this,"procFn",null),P(this,"processQueue",r=>{var i=this.peekNextEvent(r);if(!i){this.disableQueue(r);return}this.queues[r].length,Promise.resolve().then(()=>this.procFn(i.event)).then(s=>{this.removeNextEvent(r),i.event.getId(),i.resolvers.resolve(s),this.processQueue(r)},s=>{i.attempts+=1;var a=this.retryAlgorithm(i.event,i.attempts,s);i.attempts,i.event.getId(),a===-1?(A.info("Queue '%s' giving up on event %s",r,i.event.getId()),this.clearQueue(r,s)):setTimeout(this.processQueue,a,r)})})}getQueueForEvent(e){var n=this.queueAlgorithm(e);return!n||!this.queues[n]?null:this.queues[n].map(function(r){return r.event})}removeEventFromQueue(e){var n=this.queueAlgorithm(e);if(!n||!this.queues[n])return!1;var r=!1;return T6(this.queues[n],i=>i.event.getId()===e.getId()?(r=!0,!0):!1),r}setProcessFunction(e){this.procFn=e,this.startProcessingQueues()}queueEvent(e){var n=this.queueAlgorithm(e);if(!n)return null;this.queues[n]||(this.queues[n]=[]);var r=Promise.withResolvers();return this.queues[n].push({event:e,resolvers:r,attempts:0}),e.getId(),this.startProcessingQueues(),r.promise}startProcessingQueues(){this.procFn&&Object.keys(this.queues).filter(e=>this.activeQueues.indexOf(e)===-1&&this.queues[e].length>0).forEach(e=>{this.activeQueues.push(e),this.processQueue(e)})}disableQueue(e){var n=this.activeQueues.indexOf(e);n>=0&&this.activeQueues.splice(n,1),A.info("Stopping queue '%s' as it is now empty",e)}clearQueue(e,n){A.info("clearing queue '%s'",e);for(var r;r=this.removeNextEvent(e);)r.resolvers.reject(n);this.disableQueue(e)}peekNextEvent(e){var n=this.queues[e];if(Array.isArray(n))return n[0]}removeNextEvent(e){var n=this.queues[e];if(Array.isArray(n))return n.shift()}}var kU=20;class Zfe{constructor(e){var n=this;this.client=e,P(this,"sending",!1),P(this,"running",!0),P(this,"retryTimeout",null),P(this,"retryAttempts",0),P(this,"sendQueue",F(function*(){if(n.retryTimeout!==null&&clearTimeout(n.retryTimeout),n.retryTimeout=null,!(n.sending||!n.running)){A.debug("Attempting to send queued to-device messages"),n.sending=!0;var r;try{for(;n.running&&(r=yield n.client.store.getOldestToDeviceBatch(),r!==null);)yield n.sendBatch(r),yield n.client.store.removeToDeviceBatch(r.id),n.retryAttempts=0;if(!n.running)return;A.debug("All queued to-device messages sent")}catch(s){++n.retryAttempts;var i=nm.RETRY_BACKOFF_RATELIMIT(null,n.retryAttempts,s);if(i===-1){Math.floor(s.httpStatus/100)===4?(A.error("Fatal error when sending to-device message - dropping to-device batch!",s),yield n.client.store.removeToDeviceBatch(r.id)):A.info("Automatic retry limit reached for to-device messages.");return}A.info("Failed to send batch of to-device messages. Will retry in ".concat(i,"ms"),s),n.retryTimeout=setTimeout(n.sendQueue,i)}finally{n.sending=!1}}})),P(this,"onResumedSync",(r,i)=>{r===Kt.Syncing&&i!==Kt.Syncing&&(A.info("Resuming queue after resumed sync"),this.sendQueue())})}start(){this.running=!0,this.sendQueue(),this.client.on(Le.Sync,this.onResumedSync)}stop(){this.running=!1,this.retryTimeout!==null&&clearTimeout(this.retryTimeout),this.retryTimeout=null,this.client.removeListener(Le.Sync,this.onResumedSync)}queueBatch(e){var n=this;return F(function*(){for(var r=[],i=0;i<e.batch.length;i+=kU){var s={eventType:e.eventType,batch:e.batch.slice(i,i+kU),txnId:n.client.makeTxnId()};r.push(s);var a=s.batch.map(o=>"".concat(o.userId,"/").concat(o.deviceId," (msgid ").concat(o.payload[C9],")"));A.info("Enqueuing batch of to-device messages. type=".concat(e.eventType," txnid=").concat(s.txnId),a)}yield n.client.store.saveToDeviceBatches(r),n.sendQueue()})()}sendBatch(e){var n=this;return F(function*(){var r=new qc(()=>new Map);for(var i of e.batch)r.getOrCreate(i.userId).set(i.deviceId,i.payload);A.info("Sending batch of ".concat(e.batch.length," to-device messages with ID ").concat(e.id," and txnId ").concat(e.txnId)),yield n.client.sendToDevice(e.eventType,r,e.txnId)})()}}var Sb=new $s.UnstableValue("m.policies","org.matrix.msc3847.policies"),rv=new $s.UnstableValue("m.ignore.invites","org.matrix.msc3847.ignore.invites"),TU=function(t){return t.Ban="m.ban",t}({}),S2=function(t){return t.User="m.policy.user",t.Room="m.policy.room",t.Server="m.policy.server",t}({}),RU={[S2.User]:ee.PolicyRuleUser,[S2.Room]:ee.PolicyRuleRoom,[S2.Server]:ee.PolicyRuleServer};class zfe{constructor(e){this.client=e}addRule(e,n,r){var i=this;return F(function*(){var s=yield i.getOrCreateTargetRoom(),a=yield i.client.sendStateEvent(s.roomId,RU[e],{entity:n,reason:r,recommendation:TU.Ban});return a.event_id})()}removeRule(e){var n=this;return F(function*(){yield n.client.redactEvent(e.getRoomId(),e.getId())})()}addSource(e){var n=this;return F(function*(){yield n.client.joinRoom(e);var r=(yield n.getOrCreateSourceRooms()).map(i=>i.roomId);return r.includes(e)?!1:(r.push(e),yield n.withIgnoreInvitesPolicies(i=>{i.sources=r}),!0)})()}getRuleForInvite(e){var n=this;return F(function*(){var{sender:r,roomId:i}=e,s=yield n.getOrCreateSourceRooms(),a=r.split(":")[1],o=i.split(":")[1];for(var l of s){var c=l.getUnfilteredTimelineSet().getLiveTimeline().getState(Me.FORWARDS);for(var{scope:d,entities:f}of[{scope:S2.Room,entities:[i]},{scope:S2.User,entities:[r]},{scope:S2.Server,entities:[a,o]}]){var p=c.getStateEvents(RU[d]);for(var g of p){var y=g.getContent();if((y==null?void 0:y.recommendation)==TU.Ban){var v=y==null?void 0:y.entity;if(v){var b=void 0;try{b=new RegExp(NK(v))}catch{continue}for(var C of f)if(C&&b.test(C))return g}}}}}return null})()}getOrCreateTargetRoom(){var e=this;return F(function*(){var n=e.getIgnoreInvitesPolicies(),r=n.target;if(typeof r!="string"&&(r=null),r){var i=e.client.getRoom(r);if(i)return i;r=null}return r=(yield e.client.createRoom({name:"Individual Policy Room",preset:T9.PrivateChat})).room_id,yield e.withIgnoreInvitesPolicies(s=>{s.target=r}),e.client.getRoom(r)})()}getOrCreateSourceRooms(){var e=this;return F(function*(){var n=e.getIgnoreInvitesPolicies(),r=n.sources,i=!1;Array.isArray(r)||(i=!0,r=[]);var s=r.filter(o=>typeof o=="string").map(o=>e.client.getRoom(o)).filter(o=>!!o);if(s.length!=r.length&&(i=!0),s.length==0){var a=yield e.getOrCreateTargetRoom();i=!0,s=[a]}return i&&(yield e.withIgnoreInvitesPolicies(o=>{o.sources=r})),s})()}getIgnoreInvitesPolicies(){return this.getPoliciesAndIgnoreInvitesPolicies().ignoreInvitesPolicies}withIgnoreInvitesPolicies(e){var n=this;return F(function*(){var{policies:r,ignoreInvitesPolicies:i}=n.getPoliciesAndIgnoreInvitesPolicies();e(i),r[rv.name]=i,yield n.client.setAccountData(Sb.name,r)})()}getPoliciesAndIgnoreInvitesPolicies(){var e={};for(var n of[Sb.name,Sb.altName]){var r;if(n){var i=(r=this.client.getAccountData(n))===null||r===void 0?void 0:r.getContent();if(i){e=i;break}}}var s={},a=!1;for(var o of[rv.name,rv.altName])if(o){var l=e[o];if(l&&typeof l=="object"){s=l,a=!0;break}}return a||(e[rv.name]=s),{policies:e,ignoreInvitesPolicies:s}}}var wb="matrix-js-sdk";function Wfe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const d=t.charAt(c),f=d.charCodeAt(0);if(e[f]!==255)throw new TypeError(d+" is ambiguous");e[f]=c}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function a(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,f=0,p=0;const g=c.length;for(;p!==g&&c[p]===0;)p++,d++;const y=(g-p)*s+1>>>0,v=new Uint8Array(y);for(;p!==g;){let S=c[p],R=0;for(let w=y-1;(S!==0||R<f)&&w!==-1;w--,R++)S+=256*v[w]>>>0,v[w]=S%n>>>0,S=S/n>>>0;if(S!==0)throw new Error("Non-zero carry");f=R,p++}let b=y-f;for(;b!==y&&v[b]===0;)b++;let C=r.repeat(d);for(;b<y;++b)C+=t.charAt(v[b]);return C}function o(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,f=0,p=0;for(;c[d]===r;)f++,d++;const g=(c.length-d)*i+1>>>0,y=new Uint8Array(g);for(;c[d];){let S=e[c.charCodeAt(d)];if(S===255)return;let R=0;for(let w=g-1;(S!==0||R<p)&&w!==-1;w--,R++)S+=n*y[w]>>>0,y[w]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");p=R,d++}let v=g-p;for(;v!==g&&y[v]===0;)v++;const b=new Uint8Array(f+(g-v));let C=f;for(;v!==g;)b[C++]=y[v++];return b}function l(c){const d=o(c);if(d)return d;throw new Error("Non-base"+n+" character")}return{encode:a,decodeUnsafe:o,decode:l}}var Yfe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const HXe=Wfe(Yfe);var Xr=function(t){return t.UserTrustStatusChanged="userTrustStatusChanged",t.KeyBackupStatus="crypto.keyBackupStatus",t.KeyBackupFailed="crypto.keyBackupFailed",t.KeyBackupSessionsRemaining="crypto.keyBackupSessionsRemaining",t.KeyBackupDecryptionKeyCached="crypto.keyBackupDecryptionKeyCached",t.VerificationRequestReceived="crypto.verificationRequestReceived",t.WillUpdateDevices="crypto.willUpdateDevices",t.DevicesUpdated="crypto.devicesUpdated",t.KeysChanged="crossSigning.keysChanged",t.LegacyCryptoStoreMigrationProgress="crypto.legacyCryptoStoreMigrationProgress",t.DehydratedDeviceCreated="dehydration.DehydratedDeviceCreated",t.DehydratedDeviceUploaded="dehydration.DehydratedDeviceUploaded",t.RehydrationStarted="dehydration.RehydrationStarted",t.RehydrationProgress="dehydration.RehydrationProgress",t.RehydrationCompleted="dehydration.RehydrationCompleted",t.RehydrationError="dehydration.RehydrationError",t.DehydrationKeyCached="dehydration.DehydrationKeyCached",t.DehydratedDeviceRotationError="dehydration.DehydratedDeviceRotationError",t}({}),IU=function(t){return t.MEGOLM_UNKNOWN_INBOUND_SESSION_ID="MEGOLM_UNKNOWN_INBOUND_SESSION_ID",t.MEGOLM_KEY_WITHHELD="MEGOLM_KEY_WITHHELD",t.MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE="MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE",t.OLM_UNKNOWN_MESSAGE_INDEX="OLM_UNKNOWN_MESSAGE_INDEX",t.HISTORICAL_MESSAGE_NO_KEY_BACKUP="HISTORICAL_MESSAGE_NO_KEY_BACKUP",t.HISTORICAL_MESSAGE_BACKUP_UNCONFIGURED="HISTORICAL_MESSAGE_BACKUP_UNCONFIGURED",t.HISTORICAL_MESSAGE_WORKING_BACKUP="HISTORICAL_MESSAGE_WORKING_BACKUP",t.HISTORICAL_MESSAGE_USER_NOT_JOINED="HISTORICAL_MESSAGE_USER_NOT_JOINED",t.SENDER_IDENTITY_PREVIOUSLY_VERIFIED="SENDER_IDENTITY_PREVIOUSLY_VERIFIED",t.UNSIGNED_SENDER_DEVICE="UNSIGNED_SENDER_DEVICE",t.UNKNOWN_SENDER_DEVICE="UNKNOWN_SENDER_DEVICE",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.MEGOLM_BAD_ROOM="MEGOLM_BAD_ROOM",t.MEGOLM_MISSING_FIELDS="MEGOLM_MISSING_FIELDS",t.OLM_DECRYPT_GROUP_MESSAGE_ERROR="OLM_DECRYPT_GROUP_MESSAGE_ERROR",t.OLM_BAD_ENCRYPTED_MESSAGE="OLM_BAD_ENCRYPTED_MESSAGE",t.OLM_BAD_RECIPIENT="OLM_BAD_RECIPIENT",t.OLM_BAD_RECIPIENT_KEY="OLM_BAD_RECIPIENT_KEY",t.OLM_BAD_ROOM="OLM_BAD_ROOM",t.OLM_BAD_SENDER_CHECK_FAILED="OLM_BAD_SENDER_CHECK_FAILED",t.OLM_BAD_SENDER="OLM_BAD_SENDER",t.OLM_FORWARDED_MESSAGE="OLM_FORWARDED_MESSAGE",t.OLM_MISSING_CIPHERTEXT="OLM_MISSING_CIPHERTEXT",t.OLM_NOT_INCLUDED_IN_RECIPIENTS="OLM_NOT_INCLUDED_IN_RECIPIENTS",t.UNKNOWN_ENCRYPTION_ALGORITHM="UNKNOWN_ENCRYPTION_ALGORITHM",t}({}),Jfe=function(t){return t[t.AllDevicesIsolationMode=0]="AllDevicesIsolationMode",t[t.OnlySignedDevicesIsolationMode=1]="OnlySignedDevicesIsolationMode",t}({});class $Xe{constructor(e){this.errorOnVerifiedUserProblems=e,P(this,"kind",Jfe.AllDevicesIsolationMode)}}class VXe{constructor(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this.crossSigningVerified=e,this.crossSigningVerifiedBefore=n,this.tofu=r,P(this,"needsUserApproval",void 0),this.needsUserApproval=i}isVerified(){return this.isCrossSigningVerified()}isCrossSigningVerified(){return this.crossSigningVerified}wasCrossSigningVerified(){return this.crossSigningVerifiedBefore}isTofu(){return this.tofu}}class BXe{constructor(e){var n,r,i,s,a;P(this,"signedByOwner",void 0),P(this,"crossSigningVerified",void 0),P(this,"tofu",void 0),P(this,"localVerified",void 0),P(this,"trustCrossSignedDevices",void 0),this.signedByOwner=(n=e.signedByOwner)!==null&&n!==void 0?n:!1,this.crossSigningVerified=(r=e.crossSigningVerified)!==null&&r!==void 0?r:!1,this.tofu=(i=e.tofu)!==null&&i!==void 0?i:!1,this.localVerified=(s=e.localVerified)!==null&&s!==void 0?s:!1,this.trustCrossSignedDevices=(a=e.trustCrossSignedDevices)!==null&&a!==void 0?a:!1}isVerified(){return this.localVerified||this.trustCrossSignedDevices&&this.crossSigningVerified}}var qXe=function(t){return t.Fetch="fetch",t.LoadKeys="load_keys",t}({}),GXe=function(t){return t.Master="master",t.SelfSigning="self_signing",t.UserSigning="user_signing",t}({}),KXe=function(t){return t[t.NONE=0]="NONE",t[t.GREY=1]="GREY",t[t.RED=2]="RED",t}({}),ZXe=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.UNVERIFIED_IDENTITY=1]="UNVERIFIED_IDENTITY",t[t.UNSIGNED_DEVICE=2]="UNSIGNED_DEVICE",t[t.UNKNOWN_DEVICE=3]="UNKNOWN_DEVICE",t[t.AUTHENTICITY_NOT_GUARANTEED=4]="AUTHENTICITY_NOT_GUARANTEED",t[t.MISMATCHED_SENDER_KEY=5]="MISMATCHED_SENDER_KEY",t[t.SENT_IN_CLEAR=6]="SENT_IN_CLEAR",t[t.VERIFICATION_VIOLATION=7]="VERIFICATION_VIOLATION",t}({}),Qfe=new Uint8Array(8);function $Z(t,e){return nk.apply(this,arguments)}function nk(){return nk=F(function*(t,e){var n=yield globalThis.crypto.subtle.importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]),r=yield globalThis.crypto.subtle.deriveBits({name:"HKDF",salt:Qfe,info:new TextEncoder().encode(e),hash:"SHA-256"},n,512),i=r.slice(0,32),s=r.slice(32),a=globalThis.crypto.subtle.importKey("raw",i,{name:"AES-CTR"},!1,["encrypt","decrypt"]),o=globalThis.crypto.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]);return Promise.all([a,o])}),nk.apply(this,arguments)}function VZ(t,e,n,r){return rk.apply(this,arguments)}function rk(){return rk=F(function*(t,e,n,r){var i;r?i=b2(r):(i=new Uint8Array(16),globalThis.crypto.getRandomValues(i),i[8]&=127);var[s,a]=yield $Z(e,n),o=new TextEncoder().encode(t),l=yield globalThis.crypto.subtle.encrypt({name:"AES-CTR",counter:i,length:64},s,o),c=yield globalThis.crypto.subtle.sign({name:"HMAC"},a,l);return{iv:_7(i),ciphertext:_7(new Uint8Array(l)),mac:_7(new Uint8Array(c))}}),rk.apply(this,arguments)}function Xfe(t,e,n){return ik.apply(this,arguments)}function ik(){return ik=F(function*(t,e,n){var[r,i]=yield $Z(e,n),s=b2(t.ciphertext);if(!(yield globalThis.crypto.subtle.verify({name:"HMAC"},i,b2(t.mac),s)))throw new Error("Error decrypting secret ".concat(n,": bad MAC"));var a=yield globalThis.crypto.subtle.decrypt({name:"AES-CTR",counter:b2(t.iv),length:64},r,s);return new TextDecoder().decode(new Uint8Array(a))}),ik.apply(this,arguments)}var K1="m.secret_storage.v1.aes-hmac-sha2";class BZ{constructor(e,n){this.accountDataAdapter=e,this.callbacks=n}getDefaultKeyId(){var e=this;return F(function*(){var n,r=yield e.accountDataAdapter.getAccountDataFromServer("m.secret_storage.default_key");return r&&(n=r.key)!==null&&n!==void 0?n:null})()}setDefaultKeyId(e){return new Promise((n,r)=>{var i=a=>{if(a.getType()==="m.secret_storage.default_key"){var o=a.getContent(),l=e===null?Object.keys(o).length===0:o.key===e;l&&(this.accountDataAdapter.removeListener(Le.AccountData,i),n())}};this.accountDataAdapter.on(Le.AccountData,i);var s=e===null?{}:{key:e};this.accountDataAdapter.setAccountData("m.secret_storage.default_key",s).catch(a=>{this.accountDataAdapter.removeListener(Le.AccountData,i),r(a)})})}addKey(e,n,r){var i=this;return F(function*(){if(e!==K1)throw new Error("Unknown key algorithm ".concat(e));var s={algorithm:e};n.name&&(s.name=n.name),n.passphrase&&(s.passphrase=n.passphrase);var{iv:a,mac:o}=yield ak(n.key);if(s.iv=a,s.mac=o,!r)do r=Ba(32);while(yield i.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(r)));return yield i.accountDataAdapter.setAccountData("m.secret_storage.key.".concat(r),s),{keyId:r,keyInfo:s}})()}getKey(e){var n=this;return F(function*(){if(e||(e=yield n.getDefaultKeyId()),!e)return null;var r=yield n.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(e));return r?[e,r]:null})()}hasKey(e){var n=this;return F(function*(){var r=yield n.getKey(e);return!!r})()}checkKey(e,n){return F(function*(){if(n.algorithm===K1)if(n.mac){var{mac:r}=yield ak(e,n.iv);return sk(n.mac)===sk(r)}else return!0;else throw new Error("Unknown algorithm")})()}store(e,n,r){var i=this;return F(function*(){if(n===null){yield i.accountDataAdapter.setAccountData(e,{});return}var s={};if(!r){var a=yield i.getDefaultKeyId();if(!a)throw new Error("No keys specified and no default key present");r=[a]}if(r.length===0)throw new Error("Zero keys given to encrypt with!");for(var o of r){var l=yield i.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(o));if(!l)throw new Error("Unknown key: "+o);if(l.algorithm===K1){var c={[o]:l},[,d]=yield i.getSecretStorageKey(c,e);s[o]=yield d.encrypt(n)}else A.warn("unknown algorithm for secret storage key "+o+": "+l.algorithm)}yield i.accountDataAdapter.setAccountData(e,{encrypted:s})})()}get(e){var n=this;return F(function*(){var r=yield n.accountDataAdapter.getAccountDataFromServer(e);if(r){if(!r.encrypted)throw new Error("Content is not encrypted!");var i={};for(var s of Object.keys(r.encrypted)){var a=yield n.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(s)),o=r.encrypted[s];(a==null?void 0:a.algorithm)===K1&&o.iv&&o.ciphertext&&o.mac&&(i[s]=a)}if(Object.keys(i).length===0)throw new Error("Could not decrypt ".concat(e," because none of ")+"the keys it is encrypted with are for a supported algorithm");var[l,c]=yield n.getSecretStorageKey(i,e),d=r.encrypted[l];return c.decrypt(d)}})()}isStored(e){var n=this;return F(function*(){var r=yield n.accountDataAdapter.getAccountDataFromServer(e);if(!(r!=null&&r.encrypted))return null;var i={};for(var s of Object.keys(r.encrypted)){var a=yield n.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(s));if(a){var o=r.encrypted[s];a.algorithm===K1&&o.iv&&o.ciphertext&&o.mac&&(i[s]=a)}}return Object.keys(i).length?i:null})()}getSecretStorageKey(e,n){var r=this;return F(function*(){if(!r.callbacks.getSecretStorageKey)throw new Error("No getSecretStorageKey callback supplied");var i=yield r.callbacks.getSecretStorageKey({keys:e},n);if(!i)throw new Error("getSecretStorageKey callback returned falsey");if(i.length<2)throw new Error("getSecretStorageKey callback returned invalid data");var[s,a]=i;if(!e[s])throw new Error("App returned unknown key from getSecretStorageKey!");if(e[s].algorithm===K1){var o={encrypt:function(c){return VZ(c,a,n)},decrypt:function(c){return Xfe(c,a,n)}};return[s,o]}else throw new Error("Unknown key type: "+e[s].algorithm)})()}}function sk(t){for(var e=t.length;e>=1&&t.charCodeAt(e-1)==61;)e--;return e<t.length?t.substring(0,e):t}var e2e="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";function ak(t,e){return VZ(e2e,t,"",e)}const t2e=Object.freeze(Object.defineProperty({__proto__:null,SECRET_STORAGE_ALGORITHM_V1_AES:K1,ServerSideSecretStorageImpl:BZ,calculateKeyCheck:ak,trimTrailingEquals:sk},Symbol.toStringTag,{value:"Module"}));var qZ=t=>t.type==="livekit"&&"livekit_service_url"in t,ok=t=>qZ(t)&&"livekit_alias"in t,YI=t=>t.type==="livekit"&&"focus_selection"in t,JI=1e3*60*60*4,n2e=(t,e)=>{var n,r="Malformed session membership event: ";return typeof t.device_id!="string"&&e.push(r+"device_id must be string"),typeof t.call_id!="string"&&e.push(r+"call_id must be string"),typeof t.application!="string"&&e.push(r+"application must be a string"),typeof((n=t.focus_active)===null||n===void 0?void 0:n.type)!="string"&&e.push(r+"focus_active.type must be a string"),Array.isArray(t.foci_preferred)||e.push(r+"foci_preferred must be an array"),t.created_ts&&typeof t.created_ts!="number"&&e.push(r+"created_ts must be number"),t.scope&&typeof t.scope!="string"&&e.push(r+"scope must be string"),e.length===0};class xU{static equal(e,n){return _h(e.membershipData,n.membershipData)}constructor(e,n){this.parentEvent=e,P(this,"membershipData",void 0);var r=[];if(n2e(n,r))this.membershipData=n;else throw Error("unknown CallMembership data. Does not match MSC4143 call.member (".concat(r.join(" & "),") events this could be a legacy membership event: (").concat(n,")"))}get sender(){return this.parentEvent.getSender()}get eventId(){return this.parentEvent.getId()}get callId(){return this.membershipData.call_id}get deviceId(){return this.membershipData.device_id}get application(){return this.membershipData.application}get scope(){return this.membershipData.scope}get membershipID(){return this.createdTs().toString()}createdTs(){var e;return(e=this.membershipData.created_ts)!==null&&e!==void 0?e:this.parentEvent.getTs()}getAbsoluteExpiry(){var e;return this.createdTs()+((e=this.membershipData.expires)!==null&&e!==void 0?e:JI)}getMsUntilExpiry(){return this.getAbsoluteExpiry()-Date.now()}isExpired(){return this.getMsUntilExpiry()<=0}getPreferredFoci(){return this.membershipData.foci_preferred}getFocusSelection(){var e=this.membershipData.focus_active;if(YI(e))return e.focus_selection}}var ah=function(t){return t.Cancel="cancel",t.Restart="restart",t.Send="send",t}({}),QI=function(t){return t.TooNew="TOO_NEW",t}({});class XI extends Error{constructor(e){var n="Crypto store is invalid because ".concat(e,", ")+"please stop the client, delete all data and start the client again";super(n),this.reason=e,this.name="InvalidCryptoStoreError"}}P(XI,"TOO_NEW",QI.TooNew);class r2e extends Error{constructor(e,n){super(e),this.value=n}}class i2e extends Error{constructor(){super("MatrixClient has been stopped")}}class pd extends Error{constructor(e,n){super(e),this.clientEndpoint=n,this.name="UnsupportedDelayedEventsEndpointError"}}var td=function(t){return t.Disconnected="Disconnected",t.Connecting="Connecting",t.ConnectingFailed="ConnectingFailed",t.Connected="Connected",t.Reconnecting="Reconnecting",t.Disconnecting="Disconnecting",t.Stuck="Stuck",t.Unknown="Unknown",t}({}),C7=(t,e,n)=>t.sender===e&&t.deviceId===n;class s2e{constructor(e,n){this.membershipLoopHandler=e,P(this,"logger",void 0),P(this,"running",!1),P(this,"wakeup",r=>{this.logger.error("Cannot call wakeup before calling `startWithJoin()`")}),P(this,"_actions",[]),this.logger=(n??A).getChild("[NewMembershipActionScheduler]")}get actions(){return this._actions}startWithJoin(){var e=this;return F(function*(){if(e.running){e.logger.error("Cannot call startWithJoin() on NewMembershipActionScheduler while already running");return}e.running=!0,e._actions=[{ts:Date.now(),type:ft.SendDelayedEvent}];try{for(var n=function*(){e._actions.sort((c,d)=>c.ts-d.ts);var i=e._actions[0],s=void 0,a=new Promise(c=>{e.wakeup=d=>{s=d,c()}});i.ts>Date.now()&&(yield Promise.race([a,ru(i.ts-Date.now())]));var o={};if(!s){e.logger.debug("Current MembershipManager processing: ".concat(i.type,`
Queue:`),e._actions,`
Date.now: "`.concat(Date.now()));try{o=yield e.membershipLoopHandler(i.type)}catch(c){throw Error("The MembershipManager shut down because of the end condition: ".concat(c))}}e._actions.splice(0,1);var l=s??o;"replace"in l?e._actions=l.replace:"insert"in l&&e._actions.push(...l.insert)};e._actions.length>0;)yield*n()}finally{e.running=!1}e.logger.debug("Leave MembershipManager ActionScheduler loop (no more actions)")})()}initiateJoin(){var e;(e=this.wakeup)===null||e===void 0||e.call(this,{replace:[{ts:Date.now(),type:ft.SendDelayedEvent}]})}initiateLeave(){var e;(e=this.wakeup)===null||e===void 0||e.call(this,{replace:[{ts:Date.now(),type:ft.SendScheduledDelayedLeaveEvent}]})}}var MU=function(t){return t.StatusChanged="StatusChanged",t}({}),ft=function(t){return t.SendDelayedEvent="SendDelayedEvent",t.SendJoinEvent="SendJoinEvent",t.RestartDelayedEvent="RestartDelayedEvent",t.UpdateExpiry="UpdateExpiry",t.SendScheduledDelayedLeaveEvent="SendScheduledDelayedLeaveEvent",t.SendLeaveEvent="SendLeaveEvent",t}({});class U6 extends Un{isActivated(){return this.activated}isJoined(){return this.isActivated()}join(e,n,r){if(this.scheduler.running){this.logger.error("MembershipManager is already running. Ignoring join request.");return}this.fociPreferred=e,this.focusActive=n,this.leavePromiseResolvers=void 0,this.activated=!0,this.oldStatus=this.status,this.state=U6.defaultState,this.scheduler.startWithJoin().catch(i=>{this.logger.error("MembershipManager stopped because: ",i),r==null||r(i)}).finally(()=>{if(this.activated=!1,this.oldStatus&&this.oldStatus!==this.status&&this.emit(MU.StatusChanged,this.oldStatus,this.status),!this.scheduler.running){var i;(i=this.leavePromiseResolvers)===null||i===void 0||i.resolve(!0),this.leavePromiseResolvers=void 0}})}leave(e){return this.scheduler.running?(this.leavePromiseResolvers||(this.leavePromiseResolvers=E1e(),this.activated=!1,this.scheduler.initiateLeave(),e&&setTimeout(()=>{var n;return(n=this.leavePromiseResolvers)===null||n===void 0?void 0:n.resolve(!1)},e)),this.leavePromiseResolvers.promise):(this.logger.warn("Called MembershipManager.leave() even though the MembershipManager is not running"),Promise.resolve(!0))}onRTCSessionMemberUpdate(e){var n=this;return F(function*(){var r=n.client.getUserId(),i=n.client.getDeviceId();if(r&&i&&n.isJoined()&&!e.some(a=>C7(a,r,i))){var s=[ft.SendDelayedEvent,ft.SendJoinEvent];n.logger.warn("Missing own membership: force re-join"),n.scheduler.actions.find(a=>s.includes(a.type))?n.logger.error("NewMembershipManger tried adding another `SendFirstDelayedEvent` actions even though we already have one in the Queue\nActionQueueOnMemberUpdate:",n.scheduler.actions):(n.state.hasMemberStateEvent=!1,n.scheduler.initiateJoin())}return Promise.resolve()})()}getActiveFocus(){if(this.focusActive)if(YI(this.focusActive)){if(this.focusActive.focus_selection==="oldest_membership"){var e=this.getOldestMembership();return e==null?void 0:e.getPreferredFoci()[0]}}else this.logger.warn("Unknown own ActiveFocus type. This makes it impossible to connect to an SFU.");else{var n=this.getOldestMembership();return n==null?void 0:n.getPreferredFoci()[0]}}constructor(e,n,r,i,s){super(),this.joinConfig=e,this.room=n,this.client=r,this.getOldestMembership=i,P(this,"activated",!1),P(this,"logger",void 0),P(this,"leavePromiseResolvers",void 0),P(this,"oldStatus",void 0),P(this,"scheduler",void 0),P(this,"state",void 0),P(this,"deviceId",void 0),P(this,"stateKey",void 0),P(this,"fociPreferred",void 0),P(this,"focusActive",void 0),P(this,"delayedLeaveEventDelayMsOverride",void 0),this.logger=(s??A).getChild("[NewMembershipManager]");var[a,o]=[this.client.getUserId(),this.client.getDeviceId()];if(a===null)throw Error("Missing userId in client");if(o===null)throw Error("Missing deviceId in client");this.deviceId=o,this.stateKey=this.makeMembershipStateKey(a,o),this.state=U6.defaultState,this.scheduler=new s2e(l=>(this.oldStatus&&(this.logger.debug("MembershipManager applied action changes. Status: ".concat(this.oldStatus," -> ").concat(this.status)),this.oldStatus!==this.status&&this.emit(MU.StatusChanged,this.oldStatus,this.status)),this.oldStatus=this.status,this.logger.debug("MembershipManager before processing action. status=".concat(this.oldStatus)),this.membershipLoopHandler(l)),this.logger)}static get defaultState(){return{hasMemberStateEvent:!1,delayId:void 0,startTime:0,rateLimitRetries:new Map,networkErrorRetries:new Map,expireUpdateIterations:1}}get networkErrorRetryMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.networkErrorRetryMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.callMemberEventRetryDelayMinimum)!==null&&e!==void 0?e:3e3}get membershipEventExpiryMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.membershipEventExpiryMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.membershipExpiryTimeout)!==null&&e!==void 0?e:JI}get membershipEventExpiryHeadroomMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.membershipEventExpiryHeadroomMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.membershipExpiryTimeoutHeadroom)!==null&&e!==void 0?e:5e3}computeNextExpiryActionTs(e){return this.state.startTime+this.membershipEventExpiryMs*e-this.membershipEventExpiryHeadroomMs}get delayedLeaveEventDelayMs(){var e,n,r,i,s;return(e=(n=(r=this.delayedLeaveEventDelayMsOverride)!==null&&r!==void 0?r:(i=this.joinConfig)===null||i===void 0?void 0:i.delayedLeaveEventDelayMs)!==null&&n!==void 0?n:(s=this.joinConfig)===null||s===void 0?void 0:s.membershipServerSideExpiryTimeout)!==null&&e!==void 0?e:8e3}get delayedLeaveEventRestartMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.delayedLeaveEventRestartMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.membershipKeepAlivePeriod)!==null&&e!==void 0?e:5e3}get maximumRateLimitRetryCount(){var e,n;return(e=(n=this.joinConfig)===null||n===void 0?void 0:n.maximumRateLimitRetryCount)!==null&&e!==void 0?e:10}get maximumNetworkErrorRetryCount(){var e,n;return(e=(n=this.joinConfig)===null||n===void 0?void 0:n.maximumNetworkErrorRetryCount)!==null&&e!==void 0?e:10}membershipLoopHandler(e){var n=this;return F(function*(){switch(e){case ft.SendDelayedEvent:return n.state.delayId?n.cancelKnownDelayIdBeforeSendFirstDelayedEvent(n.state.delayId):n.sendOrResendDelayedLeaveEvent();case ft.RestartDelayedEvent:return n.state.delayId?n.restartDelayedEvent(n.state.delayId):wa(ft.SendDelayedEvent);case ft.SendScheduledDelayedLeaveEvent:return n.state.hasMemberStateEvent?n.state.delayId?n.sendScheduledDelayedLeaveEventOrFallbackToSendLeaveEvent(n.state.delayId):wa(ft.SendLeaveEvent):{replace:[]};case ft.SendJoinEvent:return n.sendJoinEvent();case ft.UpdateExpiry:return n.updateExpiryOnJoinedEvent();case ft.SendLeaveEvent:return n.state.hasMemberStateEvent?n.sendFallbackLeaveEvent():{replace:[]}}})()}sendOrResendDelayedLeaveEvent(){var e=this;return F(function*(){return yield e.client._unstable_sendDelayedStateEvent(e.room.roomId,{delay:e.delayedLeaveEventDelayMs},ee.GroupCallMemberPrefix,{},e.stateKey).then(n=>(e.resetRateLimitCounter(ft.SendDelayedEvent),e.state.delayId=n.delay_id,e.state.hasMemberStateEvent?wa(ft.RestartDelayedEvent,e.delayedLeaveEventRestartMs):wa(ft.SendJoinEvent))).catch(n=>{var r=ft.SendDelayedEvent;if(e.manageMaxDelayExceededSituation(n))return wa(r);var i=e.actionUpdateFromErrors(n,r,"sendDelayedStateEvent");if(i)return i;if(e.state.hasMemberStateEvent){if(e.isUnsupportedDelayedEndpoint(n))return{};throw Error("Could not send delayed event, even though delayed events are supported. "+n)}else return e.isUnsupportedDelayedEndpoint(n)?e.logger.info("Not using delayed event because the endpoint is not supported"):e.logger.info("Not using delayed event because: "+n),wa(ft.SendJoinEvent)})})()}cancelKnownDelayIdBeforeSendFirstDelayedEvent(e){var n=this;return F(function*(){return yield n.client._unstable_updateDelayedEvent(e,ah.Cancel).then(()=>(n.state.delayId=void 0,n.resetRateLimitCounter(ft.SendDelayedEvent),kb(ft.SendDelayedEvent))).catch(r=>{var i=ft.SendDelayedEvent,s=n.actionUpdateFromErrors(r,i,"updateDelayedEvent");if(s)return s;if(n.isNotFoundError(r))return n.state.delayId=void 0,kb(i);if(n.isUnsupportedDelayedEndpoint(r))return kb(ft.SendJoinEvent);throw Error("We failed to cancel a delayed event where we already had a delay id with an error we cannot automatically handle")})})()}restartDelayedEvent(e){var n=this;return F(function*(){return yield n.client._unstable_updateDelayedEvent(e,ah.Restart).then(()=>(n.resetRateLimitCounter(ft.RestartDelayedEvent),wa(ft.RestartDelayedEvent,n.delayedLeaveEventRestartMs))).catch(r=>{var i=ft.RestartDelayedEvent;if(n.isNotFoundError(r))return n.state.delayId=void 0,wa(ft.SendDelayedEvent);if(n.isUnsupportedDelayedEndpoint(r))return{};var s=n.actionUpdateFromErrors(r,i,"updateDelayedEvent");if(s)return s;throw Error("Could not restart delayed event, even though delayed events are supported. "+r)})})()}sendScheduledDelayedLeaveEventOrFallbackToSendLeaveEvent(e){var n=this;return F(function*(){return yield n.client._unstable_updateDelayedEvent(e,ah.Send).then(()=>(n.state.hasMemberStateEvent=!1,n.resetRateLimitCounter(ft.SendScheduledDelayedLeaveEvent),{replace:[]})).catch(r=>{var i=ft.SendLeaveEvent;if(n.isUnsupportedDelayedEndpoint(r))return{};if(n.isNotFoundError(r))return n.state.delayId=void 0,wa(i);var s=n.actionUpdateFromErrors(r,i,"updateDelayedEvent");return s||(n.logger.warn("Encountered unexpected error during SendScheduledDelayedLeaveEvent. Falling back to SendLeaveEvent",r),wa(i))})})()}sendJoinEvent(){var e=this;return F(function*(){return yield e.client.sendStateEvent(e.room.roomId,ee.GroupCallMemberPrefix,e.makeMyMembership(e.membershipEventExpiryMs),e.stateKey).then(()=>(e.state.startTime=Date.now(),e.state.expireUpdateIterations=1,e.state.hasMemberStateEvent=!0,e.resetRateLimitCounter(ft.SendJoinEvent),{insert:[{ts:Date.now(),type:ft.RestartDelayedEvent},{ts:e.computeNextExpiryActionTs(e.state.expireUpdateIterations),type:ft.UpdateExpiry}]})).catch(n=>{var r=e.actionUpdateFromErrors(n,ft.SendJoinEvent,"sendStateEvent");if(r)return r;throw n})})()}updateExpiryOnJoinedEvent(){var e=this;return F(function*(){var n=e.state.expireUpdateIterations+1;return yield e.client.sendStateEvent(e.room.roomId,ee.GroupCallMemberPrefix,e.makeMyMembership(e.membershipEventExpiryMs*n),e.stateKey).then(()=>(e.resetRateLimitCounter(ft.UpdateExpiry),e.state.expireUpdateIterations=n,{insert:[{ts:e.computeNextExpiryActionTs(n),type:ft.UpdateExpiry}]})).catch(r=>{var i=e.actionUpdateFromErrors(r,ft.UpdateExpiry,"sendStateEvent");if(i)return i;throw r})})()}sendFallbackLeaveEvent(){var e=this;return F(function*(){return yield e.client.sendStateEvent(e.room.roomId,ee.GroupCallMemberPrefix,{},e.stateKey).then(()=>(e.resetRateLimitCounter(ft.SendLeaveEvent),e.state.hasMemberStateEvent=!1,{replace:[]})).catch(n=>{var r=e.actionUpdateFromErrors(n,ft.SendLeaveEvent,"sendStateEvent");if(r)return r;throw n})})()}makeMembershipStateKey(e,n){var r="".concat(e,"_").concat(n);return/^org\.matrix\.msc(3757|3779)\b/.exec(this.room.getVersion())?r:"_".concat(r)}makeMyMembership(e){var n;return{call_id:"",scope:"m.room",application:"m.call",device_id:this.deviceId,expires:e,focus_active:{type:"livekit",focus_selection:"oldest_membership"},foci_preferred:(n=this.fociPreferred)!==null&&n!==void 0?n:[]}}isNotFoundError(e){return e instanceof On&&e.errcode==="M_NOT_FOUND"}manageMaxDelayExceededSituation(e){if(e instanceof On&&e.errcode==="M_UNKNOWN"&&e.data["org.matrix.msc4140.errcode"]==="M_MAX_DELAY_EXCEEDED"){var n=e.data["org.matrix.msc4140.max_delay"];return typeof n=="number"&&this.delayedLeaveEventDelayMs>n&&(this.delayedLeaveEventDelayMsOverride=n),this.logger.warn("Retry sending delayed disconnection event due to server timeout limitations:",e),!0}return!1}actionUpdateFromErrors(e,n,r){var i=this.actionUpdateFromRateLimitError(e,r,n);if(i)return i;var s=this.actionUpdateFromNetworkErrorRetry(e,n);if(s)return s}actionUpdateFromRateLimitError(e,n,r){var i;if((e instanceof Dd||e instanceof On)&&e.isRateLimitError()){var s=(i=this.state.rateLimitRetries.get(r))!==null&&i!==void 0?i:0;if(s<this.maximumRateLimitRetryCount){var a,o=5e3;try{var l;a=(l=e.getRetryAfterMs())!==null&&l!==void 0?l:o,this.logger.info("Rate limited by server, retrying in ".concat(a,"ms"))}catch(c){this.logger.warn("Error while retrieving a rate-limit retry delay, retrying after default delay of ".concat(o),c),a=o}return this.state.rateLimitRetries.set(r,s+1),wa(r,a)}throw Error("Exceeded maximum retries for "+r+" attempts (client."+n+"): "+e)}}actionUpdateFromNetworkErrorRetry(e,n){var r,i=(r=this.state.networkErrorRetries.get(n))!==null&&r!==void 0?r:0,s=this.networkErrorRetryMs/1e3+"s",a="("+i+"/"+this.maximumNetworkErrorRetryCount+")";if(e instanceof Error&&e.name==="AbortError")this.logger.warn("Network local timeout error while sending event, retrying in "+s+" "+a,e);else if(e instanceof Error&&e.message.includes("updating delayed event"))this.logger.warn("delayed event update timeout error, retrying in "+s+" "+a,e);else if(e instanceof jh)this.logger.warn("Network connection error while sending event, retrying in "+s+" "+a,e);else if((e instanceof Dd||e instanceof On)&&typeof e.httpStatus=="number"&&e.httpStatus>=500&&e.httpStatus<600)this.logger.warn("Server error while sending event, retrying in "+s+" "+a,e);else return;if(i<this.maximumNetworkErrorRetryCount)return this.state.networkErrorRetries.set(n,i+1),wa(n,this.networkErrorRetryMs);throw Error("Reached maximum ("+this.maximumNetworkErrorRetryCount+") retries cause by: "+e)}isUnsupportedDelayedEndpoint(e){return e instanceof pd}resetRateLimitCounter(e){this.state.rateLimitRetries.set(e,0),this.state.networkErrorRetries.set(e,0)}get status(){var e=this.scheduler.actions;if(e.length===1){var{type:n}=e[0];switch(n){case ft.SendDelayedEvent:case ft.SendJoinEvent:return td.Connecting;case ft.UpdateExpiry:return td.Connected;case ft.SendScheduledDelayedLeaveEvent:case ft.SendLeaveEvent:return td.Disconnecting}}else if(e.length===2){var r=e.map(s=>s.type);if((r.includes(ft.RestartDelayedEvent)||r.includes(ft.SendDelayedEvent)&&this.state.hasMemberStateEvent)&&r.includes(ft.UpdateExpiry))return td.Connected}else if(e.length===3){var i=e.map(s=>s.type);if(i.filter(s=>s===ft.RestartDelayedEvent).length===2&&i.includes(ft.UpdateExpiry))return td.Connected}return this.scheduler.running?(this.logger.error("MembershipManager has an unknown state. Actions: ",e),td.Unknown):td.Disconnected}}function wa(t,e){return{insert:[{ts:Date.now()+(e??0),type:t}]}}function kb(t,e){return{replace:[{ts:Date.now()+0,type:t}]}}var gd=function(t){return t.ReceivedKeys="received_keys",t.NotSupportedError="not_supported_error",t}({});class GZ extends Error{constructor(e){super(e)}get name(){return"NotSupportedError"}}class a2e extends Un{setParentLogger(e){this.logger=e.getChild("[ToDeviceKeyTransport]")}constructor(e,n,r,i,s,a){super(),this.userId=e,this.deviceId=n,this.roomId=r,this.client=i,this.statistics=s,P(this,"logger",A),P(this,"onToDeviceEvent",o=>{if(o.getType()===ee.CallEncryptionKeysPrefix){var l=this.getValidEventContent(o);l&&o.getSender()&&this.receiveCallKeyEvent(o.getSender(),l)}}),this.setParentLogger(a??A)}start(){this.client.on(Le.ToDeviceEvent,this.onToDeviceEvent)}stop(){this.client.off(Le.ToDeviceEvent,this.onToDeviceEvent)}sendKey(e,n,r){var i=this;return F(function*(){var s={keys:{index:n,key:e},room_id:i.roomId,member:{claimed_device_id:i.deviceId},session:{call_id:"",application:"m.call",scope:"m.room"}},a=r.filter(o=>o.sender==null||o.deviceId==null?(i.logger.warn("Malformed call member: ".concat(o.sender,"|").concat(o.deviceId)),!1):!(o.sender==i.userId&&o.deviceId==i.deviceId)).map(o=>({userId:o.sender,deviceId:o.deviceId}));a.length>0?(yield i.client.encryptAndSendToDevice(ee.CallEncryptionKeysPrefix,a,s).catch(o=>{var l=o.message;if(l.includes("unknown variant")&&l.includes("send_to_device")||l.includes("not supported"))throw new GZ("The widget driver does not support to-device encryption")}),i.statistics.counters.roomEventEncryptionKeysSent+=1):i.logger.warn("No targets found for sending key")})()}receiveCallKeyEvent(e,n){this.statistics.counters.roomEventEncryptionKeysReceived+=1;var r=Date.now(),i=r-(typeof n.sent_ts=="number"?n.sent_ts:r);this.statistics.totals.roomEventEncryptionKeysReceivedTotalAge+=i,this.emit(gd.ReceivedKeys,e,n.member.claimed_device_id,n.keys.key,n.keys.index,r)}getValidEventContent(e){var n=e.getContent(),r=n.room_id;if(!r){this.logger.warn("Malformed Event: invalid call encryption keys event, no roomId");return}if(r!==this.roomId){this.logger.warn("Malformed Event: Mismatch roomId");return}if(!n.keys||!n.keys.key||typeof n.keys.index!="number"){this.logger.warn("Malformed Event: Missing keys field");return}if(!n.member||!n.member.claimed_device_id){this.logger.warn("Malformed Event: Missing claimed_device_id");return}return n}}var R9=function(t){return t.EnabledTransportsChanged="enabled_transports_changed",t}({});class KZ extends Un{constructor(e,n,r){var i;super(),i=this,this.toDeviceTransport=e,this.roomKeyTransport=n,P(this,"logger",void 0),P(this,"_enabled",{toDevice:!0,room:!1}),this.logger=(r??A).getChild("[RoomAndToDeviceTransport]"),this.toDeviceTransport.setParentLogger(this.logger),this.roomKeyTransport.setParentLogger(this.logger),this.roomKeyTransport.on(gd.ReceivedKeys,function(){i._enabled.room||(i.logger.debug("Received room key, enabling room key transport, disabling toDevice transport"),i.setEnabled({toDevice:!1,room:!0}));for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.emit(gd.ReceivedKeys,...a)}),this.toDeviceTransport.on(gd.ReceivedKeys,function(){if(i._enabled.toDevice){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.emit(gd.ReceivedKeys,...a)}else i.logger.debug("To Device transport is disabled, ignoring received keys")})}setEnabled(e){(this.enabled.toDevice!==e.toDevice||this.enabled.room!==e.room)&&(this._enabled=e,this.emit(R9.EnabledTransportsChanged,e))}get enabled(){return this._enabled}start(){this.roomKeyTransport.start(),this.toDeviceTransport.start()}stop(){this.roomKeyTransport.stop(),this.toDeviceTransport.stop()}sendKey(e,n,r){var i=this;return F(function*(){if(i.logger.debug("Sending key with index ".concat(n," to call members (count=").concat(r.length,") via:")+(i._enabled.room?"room transport":"")+(i._enabled.room&&i._enabled.toDevice?"and":"")+(i._enabled.toDevice?"to device transport":"")),i._enabled.room&&(yield i.roomKeyTransport.sendKey(e,n,r)),i._enabled.toDevice)try{yield i.toDeviceTransport.sendKey(e,n,r)}catch(s){s instanceof GZ&&!i._enabled.room&&(i.logger.warn("To device is not supported enabling room key transport, disabling toDevice transport"),i.setEnabled({toDevice:!1,room:!0}),yield i.sendKey(e,n,r))}})()}}class o2e{get updateEncryptionKeyThrottle(){var e,n;return(e=(n=this.joinConfig)===null||n===void 0?void 0:n.updateEncryptionKeyThrottle)!==null&&e!==void 0?e:3e3}get makeKeyDelay(){var e,n;return(e=(n=this.joinConfig)===null||n===void 0?void 0:n.makeKeyDelay)!==null&&e!==void 0?e:3e3}get useKeyDelay(){var e,n;return(e=(n=this.joinConfig)===null||n===void 0?void 0:n.useKeyDelay)!==null&&e!==void 0?e:5e3}constructor(e,n,r,i,s,a,o){var l=this;this.userId=e,this.deviceId=n,this.getMemberships=r,this.transport=i,this.statistics=s,this.onEncryptionKeysChanged=a,P(this,"manageMediaKeys",!1),P(this,"keysEventUpdateTimeout",void 0),P(this,"makeNewKeyTimeout",void 0),P(this,"setNewKeyTimeouts",new Set),P(this,"encryptionKeys",new Map),P(this,"lastEncryptionKeyUpdateRequest",void 0),P(this,"lastMembershipFingerprints",void 0),P(this,"latestGeneratedKeyIndex",-1),P(this,"joinConfig",void 0),P(this,"logger",void 0),P(this,"joined",!1),P(this,"sendEncryptionKeysEvent",function(){var c=F(function*(d){if(l.keysEventUpdateTimeout!==void 0&&(clearTimeout(l.keysEventUpdateTimeout),l.keysEventUpdateTimeout=void 0),l.lastEncryptionKeyUpdateRequest=Date.now(),!!l.joined){var f=l.getKeysForParticipant(l.userId,l.deviceId);if(!f){l.logger.warn("Tried to send encryption keys event but no keys found!");return}if(typeof d!="number"&&l.latestGeneratedKeyIndex===-1){l.logger.warn("Tried to send encryption keys event but no current key index found!");return}var p=d??l.latestGeneratedKeyIndex;l.logger.info("Try sending encryption keys event. keyIndexToSend=".concat(p," (method parameter: ").concat(d,")"));var g=f[p];try{l.statistics.counters.roomEventEncryptionKeysSent+=1,yield l.transport.sendKey(LZ(g),p,l.getMemberships()),l.logger.debug("sendEncryptionKeysEvent participantId=".concat(l.userId,":").concat(l.deviceId," numKeys=").concat(f.length," currentKeyIndex=").concat(l.latestGeneratedKeyIndex," keyIndexToSend=").concat(p),l.encryptionKeys)}catch(v){if(l.keysEventUpdateTimeout===void 0){var y=FI(v,5e3);l.logger.warn("Failed to send m.call.encryption_key, retrying in ".concat(y),v),l.keysEventUpdateTimeout=setTimeout(()=>void l.sendEncryptionKeysEvent(),y)}else l.logger.info("Not scheduling key resend as another re-send is already pending")}}});return function(d){return c.apply(this,arguments)}}()),P(this,"onTransportChanged",()=>{this.requestSendCurrentKey()}),P(this,"onNewKeyReceived",(c,d,f,p,g)=>{this.logger.debug("Received key over key transport ".concat(c,":").concat(d," at index ").concat(p)),this.setEncryptionKey(c,d,p,f,g)}),P(this,"onRotateKeyTimeout",()=>{if(this.manageMediaKeys){this.makeNewKeyTimeout=void 0,this.logger.info("Making new sender key for key rotation");var c=this.makeNewSenderKey(!0);this.sendEncryptionKeysEvent(c)}}),this.logger=(o??A).getChild("[EncryptionManager]")}getEncryptionKeys(){return this.encryptionKeys}join(e){var n,r,i;this.joinConfig=e,this.joined=!0,this.manageMediaKeys=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.manageMediaKeys)!==null&&n!==void 0?n:this.manageMediaKeys,this.transport.on(gd.ReceivedKeys,this.onNewKeyReceived),this.transport instanceof KZ&&this.transport.on(R9.EnabledTransportsChanged,this.onTransportChanged),this.transport.start(),(i=this.joinConfig)!==null&&i!==void 0&&i.manageMediaKeys&&(this.makeNewSenderKey(),this.requestSendCurrentKey())}leave(){this.encryptionKeys.set(b7(this.userId,this.deviceId),[]),this.transport.off(gd.ReceivedKeys,this.onNewKeyReceived),this.transport.stop(),this.makeNewKeyTimeout!==void 0&&(clearTimeout(this.makeNewKeyTimeout),this.makeNewKeyTimeout=void 0);for(var e of this.setNewKeyTimeouts)clearTimeout(e);this.setNewKeyTimeouts.clear(),this.manageMediaKeys=!1,this.joined=!1}onMembershipsUpdate(e){if(this.manageMediaKeys&&this.joined){var n=new Set(e.filter(c=>!C7(c,this.userId,this.deviceId)).map(Tb)),r=new Set(this.getMemberships().filter(c=>!C7(c,this.userId,this.deviceId)).map(Tb)),i=Array.from(n).some(c=>!r.has(c)),s=Array.from(r).some(c=>!n.has(c)),a=this.lastMembershipFingerprints;if(this.storeLastMembershipFingerprints(),i)this.makeNewKeyTimeout||(this.logger.debug("Member(s) have left: queueing sender key rotation"),this.makeNewKeyTimeout=setTimeout(this.onRotateKeyTimeout,this.makeKeyDelay));else if(s)this.logger.debug("New member(s) have joined: re-sending keys"),this.requestSendCurrentKey();else if(a){var o=this.lastMembershipFingerprints,l=Array.from(a).some(c=>!o.has(c))||Array.from(o).some(c=>!a.has(c));l&&(this.logger.debug("Member(s) have updated/reconnected: re-sending keys to everyone"),this.requestSendCurrentKey())}}}makeNewSenderKey(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=OZ(16),r=this.getNewEncryptionKeyIndex();return this.logger.info("Generated new key at index "+r),this.setEncryptionKey(this.userId,this.deviceId,r,n,Date.now(),e),r}requestSendCurrentKey(){if(this.manageMediaKeys){if(this.lastEncryptionKeyUpdateRequest&&this.lastEncryptionKeyUpdateRequest+this.updateEncryptionKeyThrottle>Date.now()){this.logger.info("Last encryption key event sent too recently: postponing"),this.keysEventUpdateTimeout===void 0&&(this.keysEventUpdateTimeout=setTimeout(()=>void this.sendEncryptionKeysEvent(),this.updateEncryptionKeyThrottle));return}this.sendEncryptionKeysEvent()}}getKeysForParticipant(e,n){var r;return(r=this.encryptionKeys.get(b7(e,n)))===null||r===void 0?void 0:r.map(i=>i.key)}storeLastMembershipFingerprints(){this.lastMembershipFingerprints=new Set(this.getMemberships().filter(e=>!C7(e,this.userId,this.deviceId)).map(e=>"".concat(Tb(e),":").concat(e.createdTs())))}getNewEncryptionKeyIndex(){return this.latestGeneratedKeyIndex===-1?0:(this.latestGeneratedKeyIndex+1)%256}setEncryptionKey(e,n,r,i,s){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;this.logger.debug("Setting encryption key for ".concat(e,":").concat(n," at index ").concat(r));var o=b2(i),l=b7(e,n);this.encryptionKeys.has(l)||this.encryptionKeys.set(l,[]);var c=this.encryptionKeys.get(l),d=c[r];if(d){if(d.timestamp>s){this.logger.info("Ignoring new key at index ".concat(r," for ").concat(l," as it is older than existing known key"));return}if(l2e(d.key,o)){d.timestamp=s;return}}if(e===this.userId&&n===this.deviceId&&(this.latestGeneratedKeyIndex=r),c[r]={key:o,timestamp:s},a){var f=setTimeout(()=>{this.setNewKeyTimeouts.delete(f),this.logger.info("Delayed-emitting key changed event for ".concat(l," index ").concat(r)),this.onEncryptionKeysChanged(o,r,l)},this.useKeyDelay);this.setNewKeyTimeouts.add(f)}else this.onEncryptionKeysChanged(o,r,l)}}var b7=(t,e)=>"".concat(t,":").concat(e);function l2e(t,e){return t===e?!0:!!t&&!!e&&t.length===e.length&&t.every((n,r)=>n===e[r])}var Tb=t=>b7(t.sender,t.deviceId);class c2e{get networkErrorRetryMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.networkErrorRetryMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.callMemberEventRetryDelayMinimum)!==null&&e!==void 0?e:3e3}get membershipEventExpiryMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.membershipEventExpiryMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.membershipExpiryTimeout)!==null&&e!==void 0?e:JI}get delayedLeaveEventDelayMs(){var e,n,r,i,s;return(e=(n=(r=this.delayedLeaveEventDelayMsOverride)!==null&&r!==void 0?r:(i=this.joinConfig)===null||i===void 0?void 0:i.delayedLeaveEventDelayMs)!==null&&n!==void 0?n:(s=this.joinConfig)===null||s===void 0?void 0:s.membershipServerSideExpiryTimeout)!==null&&e!==void 0?e:8e3}get delayedLeaveEventRestartMs(){var e,n,r,i;return(e=(n=(r=this.joinConfig)===null||r===void 0?void 0:r.delayedLeaveEventRestartMs)!==null&&n!==void 0?n:(i=this.joinConfig)===null||i===void 0?void 0:i.membershipKeepAlivePeriod)!==null&&e!==void 0?e:5e3}constructor(e,n,r,i){var s=this;this.joinConfig=e,this.room=n,this.client=r,this.getOldestMembership=i,P(this,"relativeExpiry",void 0),P(this,"memberEventTimeout",void 0),P(this,"ownFociPreferred",void 0),P(this,"ownFocusActive",void 0),P(this,"updateCallMembershipRunning",!1),P(this,"needCallMembershipUpdate",!1),P(this,"delayedLeaveEventDelayMsOverride",void 0),P(this,"disconnectDelayId",void 0),P(this,"triggerCallMembershipEventUpdate",F(function*(){if(s.updateCallMembershipRunning){s.needCallMembershipUpdate=!0;return}s.updateCallMembershipRunning=!0;try{do s.needCallMembershipUpdate=!1,yield s.updateCallMembershipEvent();while(s.needCallMembershipUpdate)}finally{s.updateCallMembershipRunning=!1}})),P(this,"delayDisconnection",F(function*(){try{var a=s.disconnectDelayId;yield Pf(()=>s.client._unstable_updateDelayedEvent(a,ah.Restart)),s.scheduleDelayDisconnection()}catch(o){A.error("Failed to delay our disconnection event:",o)}}))}off(e,n){return A.error("off is not implemented on LegacyMembershipManager"),this}on(e,n){return A.error("on is not implemented on LegacyMembershipManager"),this}isJoined(){return this.relativeExpiry!==void 0}isActivated(){return this.isJoined()}get status(){return td.Unknown}join(e,n){this.ownFocusActive=n,this.ownFociPreferred=e,this.relativeExpiry=this.membershipEventExpiryMs,this.triggerCallMembershipEventUpdate()}leave(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:void 0;if(n.relativeExpiry=void 0,n.ownFocusActive=void 0,n.memberEventTimeout&&(clearTimeout(n.memberEventTimeout),n.memberEventTimeout=void 0),r){var i=yield Promise.race([n.triggerCallMembershipEventUpdate(),ru(r,"timeout")]);return i!=="timeout"}else return yield n.triggerCallMembershipEventUpdate(),!0})()}onRTCSessionMemberUpdate(e){var n=this;return F(function*(){var r=i=>i.sender===n.client.getUserId()&&i.deviceId===n.client.getDeviceId();if(n.isJoined()&&!e.some(r))return A.warn("Missing own membership: force re-join"),n.triggerCallMembershipEventUpdate()})()}getActiveFocus(){if(this.ownFocusActive)if(YI(this.ownFocusActive)){if(this.ownFocusActive.focus_selection==="oldest_membership"){var e=this.getOldestMembership();return e==null?void 0:e.getPreferredFoci()[0]}}else A.warn("Unknown own ActiveFocus type. This makes it impossible to connect to an SFU.");else{var n=this.getOldestMembership();return n==null?void 0:n.getPreferredFoci()[0]}}makeNewMembership(e){return this.isJoined()?this.makeMyMembership(e):{}}makeMyMembership(e){var n;return{call_id:"",scope:"m.room",application:"m.call",device_id:e,expires:this.relativeExpiry,focus_active:{type:"livekit",focus_selection:"oldest_membership"},foci_preferred:(n=this.ownFociPreferred)!==null&&n!==void 0?n:[]}}updateCallMembershipEvent(){var e=this;return F(function*(){e.memberEventTimeout&&(clearTimeout(e.memberEventTimeout),e.memberEventTimeout=void 0);var n=e.room.getLiveTimeline().getState(Me.FORWARDS);if(!n)throw new Error("Couldn't get room state for room "+e.room.roomId);var r=e.client.getUserId(),i=e.client.getDeviceId();if(!r||!i)throw new Error("User ID or device ID was null!");var s={};s=e.makeNewMembership(i);try{if(e.isJoined()){var a=e.makeMembershipStateKey(r,i),o=function(){var p=F(function*(){try{var g=yield Pf(()=>e.client._unstable_sendDelayedStateEvent(e.room.roomId,{delay:e.delayedLeaveEventDelayMs},ee.GroupCallMemberPrefix,{},a));e.disconnectDelayId=g.delay_id}catch(v){if(v instanceof On&&v.errcode==="M_UNKNOWN"&&v.data["org.matrix.msc4140.errcode"]==="M_MAX_DELAY_EXCEEDED"){var y=v.data["org.matrix.msc4140.max_delay"];if(typeof y=="number"&&e.delayedLeaveEventDelayMs>y)return e.delayedLeaveEventDelayMsOverride=y,o()}A.error("Failed to prepare delayed disconnection event:",v)}});return function(){return p.apply(this,arguments)}}();if(yield o(),yield Pf(()=>e.client.sendStateEvent(e.room.roomId,ee.GroupCallMemberPrefix,s,a)),e.disconnectDelayId!==void 0)try{var l=e.disconnectDelayId;yield Pf(()=>e.client._unstable_updateDelayedEvent(l,ah.Restart))}catch(p){p instanceof On&&p.errcode==="M_NOT_FOUND"&&(A.warn("Failed to update delayed disconnection event, prepare it again:",p),e.disconnectDelayId=void 0,yield o())}e.disconnectDelayId!==void 0&&e.scheduleDelayDisconnection()}else{var c=!1;if(e.disconnectDelayId!==void 0){try{var d=e.disconnectDelayId;yield Pf(()=>e.client._unstable_updateDelayedEvent(d,ah.Send)),c=!0}catch(p){A.error("Failed to send our delayed disconnection event:",p)}e.disconnectDelayId=void 0}c||(yield Pf(()=>e.client.sendStateEvent(e.room.roomId,ee.GroupCallMemberPrefix,{},e.makeMembershipStateKey(r,i))))}A.info("Sent updated call member event.")}catch(p){var f=e.networkErrorRetryMs;A.warn("Failed to send call member event (retrying in ".concat(f,"): ").concat(p)),yield ru(f),yield e.triggerCallMembershipEventUpdate()}})()}scheduleDelayDisconnection(){this.memberEventTimeout=setTimeout(()=>void this.delayDisconnection(),this.delayedLeaveEventRestartMs)}makeMembershipStateKey(e,n){var r="".concat(e,"_").concat(n);return/^org\.matrix\.msc(3757|3779)\b/.exec(this.room.getVersion())?r:"_".concat(r)}}function Pf(t){return lk.apply(this,arguments)}function lk(){return lk=F(function*(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;;)try{return yield t()}catch(s){if(e>0&&s instanceof Dd&&s.isRateLimitError()){e--;var n=void 0,r=5e3;try{var i;n=(i=s.getRetryAfterMs())!==null&&i!==void 0?i:r,A.info("Rate limited by server, retrying in ".concat(n,"ms"))}catch(a){A.warn("Error while retrieving a rate-limit retry delay, retrying after default delay of ".concat(r),a),n=r}yield ru(n)}else throw s}}),lk.apply(this,arguments)}class PU extends Un{setParentLogger(e){this.logger=e.getChild("[RoomKeyTransport]")}constructor(e,n,r,i){super(),this.room=e,this.client=n,this.statistics=r,P(this,"logger",A),this.setParentLogger(i??A)}start(){this.room.on(xe.Timeline,e=>void this.consumeCallEncryptionEvent(e))}stop(){this.room.off(xe.Timeline,e=>void this.consumeCallEncryptionEvent(e))}consumeCallEncryptionEvent(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!1;if(yield r.client.decryptEventIfNeeded(e),e.isDecryptionFailure()){i?r.logger.warn("Decryption failed for event ".concat(e.getId(),": ").concat(e.decryptionFailureReason)):(r.logger.warn("Decryption failed for event ".concat(e.getId(),": ").concat(e.decryptionFailureReason," will retry once only")),setTimeout(()=>void r.consumeCallEncryptionEvent(e,!0),1e3));return}else i&&r.logger.info("Decryption succeeded for event ".concat(e.getId()," after retry"));if(e.getType()!==ee.CallEncryptionKeysPrefix)return Promise.resolve();if(!r.room)return r.logger.error("Got room state event for unknown room ".concat(e.getRoomId(),"!")),Promise.resolve();r.onEncryptionEvent(e)})()}sendKey(e,n,r){var i=this;return F(function*(){var s={keys:[{index:n,key:e}],device_id:i.client.getDeviceId(),call_id:"",sent_ts:Date.now()};try{yield i.client.sendEvent(i.room.roomId,ee.CallEncryptionKeysPrefix,s)}catch(o){i.logger.error("Failed to send call encryption keys",o);var a=o;throw a.event&&i.client.cancelPendingEvent(a.event),o}})()}onEncryptionEvent(e){var n=e.getSender(),r=e.getContent(),i=r.device_id,s=r.call_id;if(!n){this.logger.warn("Received m.call.encryption_keys with no userId: callId=".concat(s));return}if(s!==""){this.logger.warn("Received m.call.encryption_keys with unsupported callId: userId=".concat(n,", deviceId=").concat(i,", callId=").concat(s));return}if(!Array.isArray(r.keys)){this.logger.warn("Received m.call.encryption_keys where keys wasn't an array: callId=".concat(s));return}if(n===this.client.getUserId()&&i===this.client.getDeviceId()){this.logger.info("Ignoring our own keys event");return}this.statistics.counters.roomEventEncryptionKeysReceived+=1;var a=Date.now()-(typeof r.sent_ts=="number"?r.sent_ts:e.getTs());this.statistics.totals.roomEventEncryptionKeysReceivedTotalAge+=a;for(var o of r.keys){if(!o){this.logger.info("Ignoring false-y key in keys event");continue}var l=o.key,c=o.index;!l||c===void 0||c===null||s===void 0||s===null||typeof i!="string"||typeof s!="string"||typeof l!="string"||typeof c!="number"?this.logger.warn("Malformed call encryption_key: userId=".concat(n,", deviceId=").concat(i,", encryptionKeyIndex=").concat(c," callId=").concat(s)):(this.logger.debug("onCallEncryption userId=".concat(n,":").concat(i," encryptionKeyIndex=").concat(c," age=").concat(a,"ms")),this.emit(gd.ReceivedKeys,n,i,l,c,e.getTs()))}}}var xr=function(t){return t.MembershipsChanged="memberships_changed",t.JoinStateChanged="join_state_changed",t.EncryptionKeyChanged="encryption_key_changed",t.MembershipManagerError="membership_manager_error",t}({});class w2 extends Un{get callId(){return this._callId}static callMembershipsForRoom(e){var n=A.getChild("[MatrixRTCSession ".concat(e.roomId,"]")),r=e.getLiveTimeline().getState(Me.FORWARDS);if(!r)throw n.warn("Couldn't get state for room "+e.roomId),new Error("Could't get state for room "+e.roomId);var i=r.getStateEvents(ee.GroupCallMemberPrefix),s=[];for(var a of i){var o=a.getContent(),l=Object.keys(o).length;if(l!==0){var c=[];if(l>1&&"focus_active"in o?c.push(o):l===1&&"memberships"in o&&n.warn("Legacy event found. Those are ignored, they do not contribute to the MatrixRTC session"),c.length!==0)for(var d of c)try{var f,p=new xU(a,d);if(p.callId!==""||p.scope!=="m.room"){n.info("Ignoring user-scoped call");continue}if(p.isExpired()){n.info("Ignoring expired device membership ".concat(p.sender,"/").concat(p.deviceId));continue}if(!e.hasMembershipState((f=p.sender)!==null&&f!==void 0?f:"",Ke.Join)){n.info("Ignoring membership of user ".concat(p.sender," who is not in the room."));continue}s.push(p)}catch(g){n.warn("Couldn't construct call membership: ",g)}}}return s.sort((g,y)=>g.createdTs()-y.createdTs()),s.length>1&&n.debug("Call memberships in room ".concat(e.roomId,", in order: "),s.map(g=>[g.createdTs(),g.sender])),s}static roomSessionForRoom(e,n){var r=w2.callMembershipsForRoom(n);return new w2(e,n,r)}get room(){return this.roomSubset}constructor(e,n,r){var i;super(),this.client=e,this.roomSubset=n,this.memberships=r,P(this,"membershipManager",void 0),P(this,"encryptionManager",void 0),P(this,"_callId",void 0),P(this,"logger",void 0),P(this,"expiryTimeout",void 0),P(this,"statistics",{counters:{roomEventEncryptionKeysSent:0,roomEventEncryptionKeysReceived:0},totals:{roomEventEncryptionKeysReceivedTotalAge:0}}),P(this,"reEmitter",new Fm(this)),P(this,"onRoomMemberUpdate",()=>{this.recalculateSessionMembers()}),P(this,"onRTCSessionMemberUpdate",()=>{this.recalculateSessionMembers()}),P(this,"recalculateSessionMembers",()=>{var a,o,l,c=this.memberships;this.memberships=w2.callMembershipsForRoom(this.room),this._callId=(a=this._callId)!==null&&a!==void 0?a:(o=this.memberships[0])===null||o===void 0?void 0:o.callId;var d=c.length!=this.memberships.length||c.some((p,g)=>!xU.equal(p,this.memberships[g]));if(d){var f;this.logger.info("Memberships for call in room ".concat(this.roomSubset.roomId," have changed: emitting")),b1e(this.logger,"emit MatrixRTCSessionEvent.MembershipsChanged",()=>{this.emit(xr.MembershipsChanged,c,this.memberships)}),(f=this.membershipManager)===null||f===void 0||f.onRTCSessionMemberUpdate(this.memberships)}(l=this.encryptionManager)===null||l===void 0||l.onMembershipsUpdate(c),this.setExpiryTimer()}),this.logger=A.getChild("[MatrixRTCSession ".concat(n.roomId,"]")),this._callId=(i=r[0])===null||i===void 0?void 0:i.callId;var s=this.roomSubset.getLiveTimeline().getState(Me.FORWARDS);s==null||s.on(vt.Members,this.onRoomMemberUpdate),this.setExpiryTimer()}isJoined(){var e,n;return(e=(n=this.membershipManager)===null||n===void 0?void 0:n.isJoined())!==null&&e!==void 0?e:!1}stop(){var e=this;return F(function*(){var n;yield(n=e.membershipManager)===null||n===void 0?void 0:n.leave(1e3),e.expiryTimeout&&(clearTimeout(e.expiryTimeout),e.expiryTimeout=void 0);var r=e.roomSubset.getLiveTimeline().getState(Me.FORWARDS);r==null||r.off(vt.Members,e.onRoomMemberUpdate)})()}joinRoomSession(e,n,r){if(this.isJoined()){this.logger.info("Already joined to session in room ".concat(this.roomSubset.roomId,": ignoring join call"));return}else{var i;(i=r==null?void 0:r.useNewMembershipManager)!==null&&i!==void 0&&i?this.membershipManager=new U6(r,this.roomSubset,this.client,()=>this.getOldestMembership(),this.logger):this.membershipManager=new c2e(r,this.roomSubset,this.client,()=>this.getOldestMembership());var s;if(r!=null&&r.useExperimentalToDeviceTransport){this.logger.info("Using to-device with room fallback transport for encryption keys");var[a,o]=[this.client.getUserId(),this.client.getDeviceId()],[l,c,d]=[this.roomSubset,this.client,this.statistics],f=new PU(l,c,d),p=new a2e(a,o,l.roomId,c,d);s=new KZ(p,f,this.logger),this.reEmitter.reEmit(s,[R9.EnabledTransportsChanged])}else s=new PU(this.roomSubset,this.client,this.statistics);this.encryptionManager=new o2e(this.client.getUserId(),this.client.getDeviceId(),()=>this.memberships,s,this.statistics,(g,y,v)=>{this.emit(xr.EncryptionKeyChanged,g,y,v)},this.logger)}this.membershipManager.join(e,n,g=>{this.logger.error("MembershipManager encountered an unrecoverable error: ",g),this.emit(xr.MembershipManagerError,g),this.emit(xr.JoinStateChanged,this.isJoined())}),this.encryptionManager.join(r),this.emit(xr.JoinStateChanged,!0)}leaveRoomSession(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:void 0;if(!n.isJoined())return n.logger.info("Not joined to session in room ".concat(n.roomSubset.roomId,": ignoring leave call")),!1;n.logger.info("Leaving call session in room ".concat(n.roomSubset.roomId)),n.encryptionManager.leave();var i=n.membershipManager.leave(r);return n.emit(xr.JoinStateChanged,!1),yield i})()}getActiveFocus(){var e;return(e=this.membershipManager)===null||e===void 0?void 0:e.getActiveFocus()}getOldestMembership(){return this.memberships[0]}getFocusInUse(){var e=this.getOldestMembership();if((e==null?void 0:e.getFocusSelection())==="oldest_membership")return e.getPreferredFoci()[0]}reemitEncryptionKeys(){var e;(e=this.encryptionManager)===null||e===void 0||e.getEncryptionKeys().forEach((n,r)=>{n.forEach((i,s)=>{this.emit(xr.EncryptionKeyChanged,i.key,s,r)})})}getEncryptionKeys(){var e,n,r=(e=(n=this.encryptionManager)===null||n===void 0?void 0:n.getEncryptionKeys())!==null&&e!==void 0?e:new Map;return Array.from(r.entries()).map(i=>{var[s,a]=i;return[s,a.map(o=>o.key)]}).values()}setExpiryTimer(){this.expiryTimeout&&(clearTimeout(this.expiryTimeout),this.expiryTimeout=void 0);var e;for(var n of this.memberships){var r=n.getMsUntilExpiry();r!==void 0&&(e===void 0||r<e)&&(e=r)}e!=null&&(this.expiryTimeout=setTimeout(this.onRTCSessionMemberUpdate,e))}}var F6=function(t){return t.SessionStarted="session_started",t.SessionEnded="session_ended",t}({});class u2e extends Un{constructor(e){super(),this.client=e,P(this,"roomSessions",new Map),P(this,"logger",void 0),P(this,"onRoom",n=>{this.refreshRoom(n)}),P(this,"onRoomState",(n,r)=>{var i=this.client.getRoom(n.getRoomId());if(!i){this.logger.error("Got room state event for unknown room ".concat(n.getRoomId(),"!"));return}n.getType()==ee.GroupCallMemberPrefix&&this.refreshRoom(i)}),this.logger=A.getChild("[MatrixRTCSessionManager]")}start(){for(var e of(n=this.client.getRooms())!==null&&n!==void 0?n:[]){var n,r=w2.roomSessionForRoom(this.client,e);r.memberships.length>0&&this.roomSessions.set(e.roomId,r)}this.client.on(Le.Room,this.onRoom),this.client.on(vt.Events,this.onRoomState)}stop(){for(var e of this.roomSessions.values())e.stop();this.roomSessions.clear(),this.client.off(Le.Room,this.onRoom),this.client.off(vt.Events,this.onRoomState)}getActiveRoomSession(e){return this.roomSessions.get(e.roomId)}getRoomSession(e){return this.roomSessions.has(e.roomId)||this.roomSessions.set(e.roomId,w2.roomSessionForRoom(this.client,e)),this.roomSessions.get(e.roomId)}refreshRoom(e){var n=!this.roomSessions.has(e.roomId),r=this.getRoomSession(e),i=r.memberships.length>0&&!n;r.onRTCSessionMemberUpdate();var s=r.memberships.length>0;i&&!s?(this.logger.trace("Session ended for ".concat(e.roomId," (").concat(r.memberships.length," members)")),this.emit(F6.SessionEnded,e.roomId,this.roomSessions.get(e.roomId))):!i&&s&&(this.logger.trace("Session started for ".concat(e.roomId," (").concat(r.memberships.length," members)")),this.emit(F6.SessionStarted,e.roomId,this.roomSessions.get(e.roomId)))}}function Rb(t){return e=>{var n,r;return((n=e.content)===null||n===void 0||(n=n["m.relates_to"])===null||n===void 0?void 0:n.event_id)!==t||((r=e.content)===null||r===void 0||(r=r["m.relates_to"])===null||r===void 0?void 0:r.rel_type)===un.name}}function ZZ(t){return ck.apply(this,arguments)}function ck(){return ck=F(function*(t){if(!globalThis.crypto.subtle)throw new Error("Crypto.subtle is not available: insecure context?");var e=new TextEncoder().encode(t),n=yield globalThis.crypto.subtle.digest("SHA-256",e);return new Uint8Array(n)}),ck.apply(this,arguments)}class Y3 extends Error{}Y3.prototype.name="InvalidTokenError";function d2e(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function h2e(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return d2e(e)}catch{return atob(e)}}function zZ(t,e){if(typeof t!="string")throw new Y3("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new Y3(`Invalid token specified: missing part #${n+1}`);let i;try{i=h2e(r)}catch(s){throw new Y3(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new Y3(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}var f2e={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},El,Sl,X0=(t=>(t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG",t))(X0||{});(t=>{function e(){El=3,Sl=f2e}t.reset=e;function n(i){if(!(0<=i&&i<=4))throw new Error("Invalid log level");El=i}t.setLevel=n;function r(i){Sl=i}t.setLogger=r})(X0||(X0={}));var yr=class yl{constructor(e){this._name=e}debug(...e){El>=4&&Sl.debug(yl._format(this._name,this._method),...e)}info(...e){El>=3&&Sl.info(yl._format(this._name,this._method),...e)}warn(...e){El>=2&&Sl.warn(yl._format(this._name,this._method),...e)}error(...e){El>=1&&Sl.error(yl._format(this._name,this._method),...e)}throw(e){throw this.error(e),e}create(e){const n=Object.create(this);return n._method=e,n.debug("begin"),n}static createStatic(e,n){const r=new yl(`${e}.${n}`);return r.debug("begin"),r}static _format(e,n){const r=`[${e}]`;return n?`${r} ${n}:`:r}static debug(e,...n){El>=4&&Sl.debug(yl._format(e),...n)}static info(e,...n){El>=3&&Sl.info(yl._format(e),...n)}static warn(e,...n){El>=2&&Sl.warn(yl._format(e),...n)}static error(e,...n){El>=1&&Sl.error(yl._format(e),...n)}};X0.reset();var j6=class{static decode(t){try{return zZ(t)}catch(e){throw yr.error("JwtUtils.decode",e),e}}static async generateSignedJwt(t,e,n){const r=$o.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t))),i=$o.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e))),s=`${r}.${i}`,a=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},n,new TextEncoder().encode(s)),o=$o.encodeBase64Url(new Uint8Array(a));return`${s}.${o}`}},m2e="10000000-1000-4000-8000-100000000000",uk=t=>btoa([...new Uint8Array(t)].map(e=>String.fromCharCode(e)).join("")),WZ=class _l{static _randomWord(){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}static generateUUIDv4(){return m2e.replace(/[018]/g,n=>(+n^_l._randomWord()&15>>+n/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return _l.generateUUIDv4()+_l.generateUUIDv4()+_l.generateUUIDv4()}static async generateCodeChallenge(e){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r);return uk(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(n){throw yr.error("CryptoUtils.generateCodeChallenge",n),n}}static generateBasicAuth(e,n){const i=new TextEncoder().encode([e,n].join(":"));return uk(i)}static async hash(e,n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest(e,r);return new Uint8Array(i)}static async customCalculateJwkThumbprint(e){let n;switch(e.kty){case"RSA":n={e:e.e,kty:e.kty,n:e.n};break;case"EC":n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":n={crv:e.crv,kty:e.kty,x:e.x};break;case"oct":n={crv:e.k,kty:e.kty};break;default:throw new Error("Unknown jwk type")}const r=await _l.hash("SHA-256",JSON.stringify(n));return _l.encodeBase64Url(r)}static async generateDPoPProof({url:e,accessToken:n,httpMethod:r,keyPair:i,nonce:s}){let a,o;const l={jti:window.crypto.randomUUID(),htm:r??"GET",htu:e,iat:Math.floor(Date.now()/1e3)};n&&(a=await _l.hash("SHA-256",n),o=_l.encodeBase64Url(a),l.ath=o),s&&(l.nonce=s);try{const c=await crypto.subtle.exportKey("jwk",i.publicKey),d={alg:"ES256",typ:"dpop+jwt",jwk:{crv:c.crv,kty:c.kty,x:c.x,y:c.y}};return await j6.generateSignedJwt(d,l,i.privateKey)}catch(c){throw c instanceof TypeError?new Error(`Error exporting dpop public key: ${c.message}`):c}}static async generateDPoPJkt(e){try{const n=await crypto.subtle.exportKey("jwk",e.publicKey);return await _l.customCalculateJwkThumbprint(n)}catch(n){throw n instanceof TypeError?new Error(`Could not retrieve dpop keys from storage: ${n.message}`):n}}static async generateDPoPKeys(){return await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"])}};WZ.encodeBase64Url=t=>uk(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var $o=WZ,p2e=class{constructor(e){this._name=e,this._callbacks=[],this._logger=new yr(`Event('${this._name}')`)}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){const n=this._callbacks.lastIndexOf(e);n>=0&&this._callbacks.splice(n,1)}async raise(...e){this._logger.debug("raise:",...e);for(const n of this._callbacks)await n(...e)}},H6=class E7 extends p2e{constructor(){super(...arguments),this._logger=new yr(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const e=this._expiration-E7.getEpochTime();this._logger.debug("timer completes in",e),this._expiration<=E7.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(e){const n=this._logger.create("init");e=Math.max(Math.floor(e),1);const r=E7.getEpochTime()+e;if(this.expiration===r&&this._timerHandle){n.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),n.debug("using duration",e),this._expiration=r;const i=Math.min(e,5);this._timerHandle=setInterval(this._callback,i*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},LU=class{static readParams(t,e="query"){if(!t)throw new TypeError("Invalid URL");const r=new URL(t,"http://127.0.0.1")[e==="fragment"?"hash":"search"];return new URLSearchParams(r.slice(1))}},dk=";",rm=class extends Error{constructor(t,e){var n,r,i;if(super(t.error_description||t.error||""),this.form=e,this.name="ErrorResponse",!t.error)throw yr.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=t.error,this.error_description=(n=t.error_description)!=null?n:null,this.error_uri=(r=t.error_uri)!=null?r:null,this.state=t.userState,this.session_state=(i=t.session_state)!=null?i:null,this.url_state=t.url_state}},g2e=class extends Error{constructor(t){super(t),this.name="ErrorTimeout"}},v2e=class{constructor(){this._logger=new yr("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(t){return this._logger.create(`getItem('${t}')`),this._data[t]}setItem(t,e){this._logger.create(`setItem('${t}')`),this._data[t]=e}removeItem(t){this._logger.create(`removeItem('${t}')`),delete this._data[t]}get length(){return Object.getOwnPropertyNames(this._data).length}key(t){return Object.getOwnPropertyNames(this._data)[t]}},hk=class extends Error{constructor(t,e){super(e),this.name="ErrorDPoPNonce",this.nonce=t}},ex=class{constructor(t=[],e=null,n={}){this._jwtHandler=e,this._extraHeaders=n,this._logger=new yr("JsonService"),this._contentTypes=[],this._contentTypes.push(...t,"application/json"),e&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(t,e={}){const{timeoutInSeconds:n,...r}=e;if(!n)return await fetch(t,r);const i=new AbortController,s=setTimeout(()=>i.abort(),n*1e3);try{return await fetch(t,{...e,signal:i.signal})}catch(a){throw a instanceof DOMException&&a.name==="AbortError"?new g2e("Network timed out"):a}finally{clearTimeout(s)}}async getJson(t,{token:e,credentials:n,timeoutInSeconds:r}={}){const i=this._logger.create("getJson"),s={Accept:this._contentTypes.join(", ")};e&&(i.debug("token passed, setting Authorization header"),s.Authorization="Bearer "+e),this.appendExtraHeaders(s);let a;try{i.debug("url:",t),a=await this.fetchWithTimeout(t,{method:"GET",headers:s,timeoutInSeconds:r,credentials:n})}catch(c){throw i.error("Network Error"),c}i.debug("HTTP response received, status",a.status);const o=a.headers.get("Content-Type");if(o&&!this._contentTypes.find(c=>o.startsWith(c))&&i.throw(new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${t}`)),a.ok&&this._jwtHandler&&(o!=null&&o.startsWith("application/jwt")))return await this._jwtHandler(await a.text());let l;try{l=await a.json()}catch(c){throw i.error("Error parsing JSON response",c),a.ok?c:new Error(`${a.statusText} (${a.status})`)}if(!a.ok)throw i.error("Error from server:",l),l.error?new rm(l):new Error(`${a.statusText} (${a.status}): ${JSON.stringify(l)}`);return l}async postForm(t,{body:e,basicAuth:n,timeoutInSeconds:r,initCredentials:i,extraHeaders:s}){const a=this._logger.create("postForm"),o={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded",...s};n!==void 0&&(o.Authorization="Basic "+n),this.appendExtraHeaders(o);let l;try{a.debug("url:",t),l=await this.fetchWithTimeout(t,{method:"POST",headers:o,body:e,timeoutInSeconds:r,credentials:i})}catch(p){throw a.error("Network error"),p}a.debug("HTTP response received, status",l.status);const c=l.headers.get("Content-Type");if(c&&!this._contentTypes.find(p=>c.startsWith(p)))throw new Error(`Invalid response Content-Type: ${c??"undefined"}, from URL: ${t}`);const d=await l.text();let f={};if(d)try{f=JSON.parse(d)}catch(p){throw a.error("Error parsing JSON response",p),l.ok?p:new Error(`${l.statusText} (${l.status})`)}if(!l.ok){if(a.error("Error from server:",f),l.headers.has("dpop-nonce")){const p=l.headers.get("dpop-nonce");throw new hk(p,`${JSON.stringify(f)}`)}throw f.error?new rm(f,e):new Error(`${l.statusText} (${l.status}): ${JSON.stringify(f)}`)}return f}appendExtraHeaders(t){const e=this._logger.create("appendExtraHeaders"),n=Object.keys(this._extraHeaders),r=["authorization","accept","content-type"];n.length!==0&&n.forEach(i=>{if(r.includes(i.toLocaleLowerCase())){e.warn("Protected header could not be overridden",i,r);return}const s=typeof this._extraHeaders[i]=="function"?this._extraHeaders[i]():this._extraHeaders[i];s&&s!==""&&(t[i]=s)})}},YZ=class{constructor(t){this._settings=t,this._logger=new yr("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new ex(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const t=this._logger.create("getMetadata");if(this._metadata)return t.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw t.throw(new Error("No authority or metadataUrl configured on settings")),null;t.debug("getting metadata from",this._metadataUrl);const e=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return t.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,e),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(t=!0){return this._getMetadataProperty("token_endpoint",t)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(t=!0){return this._getMetadataProperty("revocation_endpoint",t)}getKeysEndpoint(t=!0){return this._getMetadataProperty("jwks_uri",t)}async _getMetadataProperty(t,e=!1){const n=this._logger.create(`_getMetadataProperty('${t}')`),r=await this.getMetadata();if(n.debug("resolved"),r[t]===void 0){if(e===!0){n.warn("Metadata does not contain optional property");return}n.throw(new Error("Metadata does not contain property "+t))}return r[t]}async getSigningKeys(){const t=this._logger.create("getSigningKeys");if(this._signingKeys)return t.debug("returning signingKeys from cache"),this._signingKeys;const e=await this.getKeysEndpoint(!1);t.debug("got jwks_uri",e);const n=await this._jsonService.getJson(e,{timeoutInSeconds:this._settings.requestTimeoutInSeconds});if(t.debug("got key set",n),!Array.isArray(n.keys))throw t.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=n.keys,this._signingKeys}},I9=class{constructor({prefix:t="oidc.",store:e=localStorage}={}){this._logger=new yr("WebStorageStateStore"),this._store=e,this._prefix=t}async set(t,e){this._logger.create(`set('${t}')`),t=this._prefix+t,await this._store.setItem(t,e)}async get(t){return this._logger.create(`get('${t}')`),t=this._prefix+t,await this._store.getItem(t)}async remove(t){this._logger.create(`remove('${t}')`),t=this._prefix+t;const e=await this._store.getItem(t);return await this._store.removeItem(t),e}async getAllKeys(){this._logger.create("getAllKeys");const t=await this._store.length,e=[];for(let n=0;n<t;n++){const r=await this._store.key(n);r&&r.indexOf(this._prefix)===0&&e.push(r.substr(this._prefix.length))}return e}},y2e="code",_2e="openid",C2e="client_secret_post",b2e=60*15,fk=class{constructor({authority:t,metadataUrl:e,metadata:n,signingKeys:r,metadataSeed:i,client_id:s,client_secret:a,response_type:o=y2e,scope:l=_2e,redirect_uri:c,post_logout_redirect_uri:d,client_authentication:f=C2e,prompt:p,display:g,max_age:y,ui_locales:v,acr_values:b,resource:C,response_mode:S,filterProtocolClaims:R=!0,loadUserInfo:w=!1,requestTimeoutInSeconds:I,staleStateAgeInSeconds:k=b2e,mergeClaimsStrategy:x={array:"replace"},disablePKCE:L=!1,stateStore:N,revokeTokenAdditionalContentTypes:D,fetchRequestCredentials:U,refreshTokenAllowedScope:j,extraQueryParams:$={},extraTokenParams:Z={},extraHeaders:V={},dpop:z,omitScopeWhenRequesting:K=!1}){var q;if(this.authority=t,e?this.metadataUrl=e:(this.metadataUrl=t,t&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=n,this.metadataSeed=i,this.signingKeys=r,this.client_id=s,this.client_secret=a,this.response_type=o,this.scope=l,this.redirect_uri=c,this.post_logout_redirect_uri=d,this.client_authentication=f,this.prompt=p,this.display=g,this.max_age=y,this.ui_locales=v,this.acr_values=b,this.resource=C,this.response_mode=S,this.filterProtocolClaims=R??!0,this.loadUserInfo=!!w,this.staleStateAgeInSeconds=k,this.mergeClaimsStrategy=x,this.omitScopeWhenRequesting=K,this.disablePKCE=!!L,this.revokeTokenAdditionalContentTypes=D,this.fetchRequestCredentials=U||"same-origin",this.requestTimeoutInSeconds=I,N)this.stateStore=N;else{const G=typeof window<"u"?window.localStorage:new v2e;this.stateStore=new I9({store:G})}if(this.refreshTokenAllowedScope=j,this.extraQueryParams=$,this.extraTokenParams=Z,this.extraHeaders=V,this.dpop=z,this.dpop&&!((q=this.dpop)!=null&&q.store))throw new Error("A DPoPStore is required when dpop is enabled")}},E2e=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new yr("UserInfoService"),this._getClaimsFromJwt=async n=>{const r=this._logger.create("_getClaimsFromJwt");try{const i=j6.decode(n);return r.debug("JWT decoding successful"),i}catch(i){throw r.error("Error parsing JWT response"),i}},this._jsonService=new ex(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(t){const e=this._logger.create("getClaims");t||this._logger.throw(new Error("No token passed"));const n=await this._metadataService.getUserInfoEndpoint();e.debug("got userinfo url",n);const r=await this._jsonService.getJson(n,{token:t,credentials:this._settings.fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return e.debug("got claims",r),r}},JZ=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new yr("TokenClient"),this._jsonService=new ex(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:t="authorization_code",redirect_uri:e=this._settings.redirect_uri,client_id:n=this._settings.client_id,client_secret:r=this._settings.client_secret,extraHeaders:i,...s}){const a=this._logger.create("exchangeCode");n||a.throw(new Error("A client_id is required")),e||a.throw(new Error("A redirect_uri is required")),s.code||a.throw(new Error("A code is required"));const o=new URLSearchParams({grant_type:t,redirect_uri:e});for(const[f,p]of Object.entries(s))p!=null&&o.set(f,p);let l;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw a.throw(new Error("A client_secret is required")),null;l=$o.generateBasicAuth(n,r);break;case"client_secret_post":o.append("client_id",n),r&&o.append("client_secret",r);break}const c=await this._metadataService.getTokenEndpoint(!1);a.debug("got token endpoint");const d=await this._jsonService.postForm(c,{body:o,basicAuth:l,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:i});return a.debug("got response"),d}async exchangeCredentials({grant_type:t="password",client_id:e=this._settings.client_id,client_secret:n=this._settings.client_secret,scope:r=this._settings.scope,...i}){const s=this._logger.create("exchangeCredentials");e||s.throw(new Error("A client_id is required"));const a=new URLSearchParams({grant_type:t});this._settings.omitScopeWhenRequesting||a.set("scope",r);for(const[d,f]of Object.entries(i))f!=null&&a.set(d,f);let o;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw s.throw(new Error("A client_secret is required")),null;o=$o.generateBasicAuth(e,n);break;case"client_secret_post":a.append("client_id",e),n&&a.append("client_secret",n);break}const l=await this._metadataService.getTokenEndpoint(!1);s.debug("got token endpoint");const c=await this._jsonService.postForm(l,{body:a,basicAuth:o,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials});return s.debug("got response"),c}async exchangeRefreshToken({grant_type:t="refresh_token",client_id:e=this._settings.client_id,client_secret:n=this._settings.client_secret,timeoutInSeconds:r,extraHeaders:i,...s}){const a=this._logger.create("exchangeRefreshToken");e||a.throw(new Error("A client_id is required")),s.refresh_token||a.throw(new Error("A refresh_token is required"));const o=new URLSearchParams({grant_type:t});for(const[f,p]of Object.entries(s))Array.isArray(p)?p.forEach(g=>o.append(f,g)):p!=null&&o.set(f,p);let l;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw a.throw(new Error("A client_secret is required")),null;l=$o.generateBasicAuth(e,n);break;case"client_secret_post":o.append("client_id",e),n&&o.append("client_secret",n);break}const c=await this._metadataService.getTokenEndpoint(!1);a.debug("got token endpoint");const d=await this._jsonService.postForm(c,{body:o,basicAuth:l,timeoutInSeconds:r,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:i});return a.debug("got response"),d}async revoke(t){var e;const n=this._logger.create("revoke");t.token||n.throw(new Error("A token is required"));const r=await this._metadataService.getRevocationEndpoint(!1);n.debug(`got revocation endpoint, revoking ${(e=t.token_type_hint)!=null?e:"default token type"}`);const i=new URLSearchParams;for(const[s,a]of Object.entries(t))a!=null&&i.set(s,a);i.set("client_id",this._settings.client_id),this._settings.client_secret&&i.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(r,{body:i,timeoutInSeconds:this._settings.requestTimeoutInSeconds}),n.debug("got response")}},S2e=class{constructor(t,e,n){this._settings=t,this._metadataService=e,this._claimsService=n,this._logger=new yr("ResponseValidator"),this._userInfoService=new E2e(this._settings,this._metadataService),this._tokenClient=new JZ(this._settings,this._metadataService)}async validateSigninResponse(t,e,n){const r=this._logger.create("validateSigninResponse");this._processSigninState(t,e),r.debug("state processed"),await this._processCode(t,e,n),r.debug("code processed"),t.isOpenId&&this._validateIdTokenAttributes(t),r.debug("tokens validated"),await this._processClaims(t,e==null?void 0:e.skipUserInfo,t.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(t,e){const n=this._logger.create("validateCredentialsResponse");t.isOpenId&&t.id_token&&this._validateIdTokenAttributes(t),n.debug("tokens validated"),await this._processClaims(t,e,t.isOpenId),n.debug("claims processed")}async validateRefreshResponse(t,e){var n,r;const i=this._logger.create("validateRefreshResponse");t.userState=e.data,(n=t.session_state)!=null||(t.session_state=e.session_state),(r=t.scope)!=null||(t.scope=e.scope),t.isOpenId&&t.id_token&&(this._validateIdTokenAttributes(t,e.id_token),i.debug("ID Token validated")),t.id_token||(t.id_token=e.id_token,t.profile=e.profile);const s=t.isOpenId&&!!t.id_token;await this._processClaims(t,!1,s),i.debug("claims processed")}validateSignoutResponse(t,e){const n=this._logger.create("validateSignoutResponse");if(e.id!==t.state&&n.throw(new Error("State does not match")),n.debug("state validated"),t.userState=e.data,t.error)throw n.warn("Response was error",t.error),new rm(t)}_processSigninState(t,e){var n;const r=this._logger.create("_processSigninState");if(e.id!==t.state&&r.throw(new Error("State does not match")),e.client_id||r.throw(new Error("No client_id on state")),e.authority||r.throw(new Error("No authority on state")),this._settings.authority!==e.authority&&r.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==e.client_id&&r.throw(new Error("client_id mismatch on settings vs. signin state")),r.debug("state validated"),t.userState=e.data,t.url_state=e.url_state,(n=t.scope)!=null||(t.scope=e.scope),t.error)throw r.warn("Response was error",t.error),new rm(t);e.code_verifier&&!t.code&&r.throw(new Error("Expected code in response"))}async _processClaims(t,e=!1,n=!0){const r=this._logger.create("_processClaims");if(t.profile=this._claimsService.filterProtocolClaims(t.profile),e||!this._settings.loadUserInfo||!t.access_token){r.debug("not loading user info");return}r.debug("loading user info");const i=await this._userInfoService.getClaims(t.access_token);r.debug("user info claims received from user info endpoint"),n&&i.sub!==t.profile.sub&&r.throw(new Error("subject from UserInfo response does not match subject in ID Token")),t.profile=this._claimsService.mergeClaims(t.profile,this._claimsService.filterProtocolClaims(i)),r.debug("user info claims received, updated profile:",t.profile)}async _processCode(t,e,n){const r=this._logger.create("_processCode");if(t.code){r.debug("Validating code");const i=await this._tokenClient.exchangeCode({client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier,extraHeaders:n,...e.extraTokenParams});Object.assign(t,i)}else r.debug("No code to process")}_validateIdTokenAttributes(t,e){var n;const r=this._logger.create("_validateIdTokenAttributes");r.debug("decoding ID Token JWT");const i=j6.decode((n=t.id_token)!=null?n:"");if(i.sub||r.throw(new Error("ID Token is missing a subject claim")),e){const s=j6.decode(e);i.sub!==s.sub&&r.throw(new Error("sub in id_token does not match current sub")),i.auth_time&&i.auth_time!==s.auth_time&&r.throw(new Error("auth_time in id_token does not match original auth_time")),i.azp&&i.azp!==s.azp&&r.throw(new Error("azp in id_token does not match original azp")),!i.azp&&s.azp&&r.throw(new Error("azp not in id_token, but present in original id_token"))}t.profile=i}},$6=class mk{constructor(e){this.id=e.id||$o.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=H6.getEpochTime(),this.request_type=e.request_type,this.url_state=e.url_state}toStorageString(){return new yr("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(e){return yr.createStatic("State","fromStorageString"),Promise.resolve(new mk(JSON.parse(e)))}static async clearStaleState(e,n){const r=yr.createStatic("State","clearStaleState"),i=H6.getEpochTime()-n,s=await e.getAllKeys();r.debug("got keys",s);for(let a=0;a<s.length;a++){const o=s[a],l=await e.get(o);let c=!1;if(l)try{const d=await mk.fromStorageString(l);r.debug("got item from key:",o,d.created),d.created<=i&&(c=!0)}catch(d){r.error("Error parsing state for key:",o,d),c=!0}else r.debug("no item in storage for key:",o),c=!0;c&&(r.debug("removed item for key:",o),e.remove(o))}}},tx=class pk extends $6{constructor(e){super(e),this.code_verifier=e.code_verifier,this.code_challenge=e.code_challenge,this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}static async create(e){const n=e.code_verifier===!0?$o.generateCodeVerifier():e.code_verifier||void 0,r=n?await $o.generateCodeChallenge(n):void 0;return new pk({...e,code_verifier:n,code_challenge:r})}toStorageString(){return new yr("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(e){yr.createStatic("SigninState","fromStorageString");const n=JSON.parse(e);return pk.create(n)}},QZ=class XZ{constructor(e){this.url=e.url,this.state=e.state}static async create({url:e,authority:n,client_id:r,redirect_uri:i,response_type:s,scope:a,state_data:o,response_mode:l,request_type:c,client_secret:d,nonce:f,url_state:p,resource:g,skipUserInfo:y,extraQueryParams:v,extraTokenParams:b,disablePKCE:C,dpopJkt:S,omitScopeWhenRequesting:R,...w}){if(!e)throw this._logger.error("create: No url passed"),new Error("url");if(!r)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!i)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!s)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!a)throw this._logger.error("create: No scope passed"),new Error("scope");if(!n)throw this._logger.error("create: No authority passed"),new Error("authority");const I=await tx.create({data:o,request_type:c,url_state:p,code_verifier:!C,client_id:r,authority:n,redirect_uri:i,response_mode:l,client_secret:d,scope:a,extraTokenParams:b,skipUserInfo:y}),k=new URL(e);k.searchParams.append("client_id",r),k.searchParams.append("redirect_uri",i),k.searchParams.append("response_type",s),R||k.searchParams.append("scope",a),f&&k.searchParams.append("nonce",f),S&&k.searchParams.append("dpop_jkt",S);let x=I.id;p&&(x=`${x}${dk}${p}`),k.searchParams.append("state",x),I.code_challenge&&(k.searchParams.append("code_challenge",I.code_challenge),k.searchParams.append("code_challenge_method","S256")),g&&(Array.isArray(g)?g:[g]).forEach(N=>k.searchParams.append("resource",N));for(const[L,N]of Object.entries({response_mode:l,...w,...v}))N!=null&&k.searchParams.append(L,N.toString());return new XZ({url:k.href,state:I})}};QZ._logger=new yr("SigninRequest");var w2e=QZ,k2e="openid",S7=class{constructor(t){if(this.access_token="",this.token_type="",this.profile={},this.state=t.get("state"),this.session_state=t.get("session_state"),this.state){const e=decodeURIComponent(this.state).split(dk);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(dk))}this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri"),this.code=t.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-H6.getEpochTime()}set expires_in(t){typeof t=="string"&&(t=Number(t)),t!==void 0&&t>=0&&(this.expires_at=Math.floor(t)+H6.getEpochTime())}get isOpenId(){var t;return((t=this.scope)==null?void 0:t.split(" ").includes(k2e))||!!this.id_token}},T2e=class{constructor({url:t,state_data:e,id_token_hint:n,post_logout_redirect_uri:r,extraQueryParams:i,request_type:s,client_id:a}){if(this._logger=new yr("SignoutRequest"),!t)throw this._logger.error("ctor: No url passed"),new Error("url");const o=new URL(t);n&&o.searchParams.append("id_token_hint",n),a&&o.searchParams.append("client_id",a),r&&(o.searchParams.append("post_logout_redirect_uri",r),e&&(this.state=new $6({data:e,request_type:s}),o.searchParams.append("state",this.state.id)));for(const[l,c]of Object.entries({...i}))c!=null&&o.searchParams.append(l,c.toString());this.url=o.href}},R2e=class{constructor(t){this.state=t.get("state"),this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri")}},I2e=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],x2e=["sub","iss","aud","exp","iat"],M2e=class{constructor(t){this._settings=t,this._logger=new yr("ClaimsService")}filterProtocolClaims(t){const e={...t};if(this._settings.filterProtocolClaims){let n;Array.isArray(this._settings.filterProtocolClaims)?n=this._settings.filterProtocolClaims:n=I2e;for(const r of n)x2e.includes(r)||delete e[r]}return e}mergeClaims(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]!==i)if(Array.isArray(n[r])||Array.isArray(i))if(this._settings.mergeClaimsStrategy.array=="replace")n[r]=i;else{const s=Array.isArray(n[r])?n[r]:[n[r]];for(const a of Array.isArray(i)?i:[i])s.includes(a)||s.push(a);n[r]=s}else typeof n[r]=="object"&&typeof i=="object"?n[r]=this.mergeClaims(n[r],i):n[r]=i;return n}},P2e=class{constructor(t,e){this.keys=t,this.nonce=e}},nx=class{constructor(t,e){this._logger=new yr("OidcClient"),this.settings=t instanceof fk?t:new fk(t),this.metadataService=e??new YZ(this.settings),this._claimsService=new M2e(this.settings),this._validator=new S2e(this.settings,this.metadataService,this._claimsService),this._tokenClient=new JZ(this.settings,this.metadataService)}async createSigninRequest({state:t,request:e,request_uri:n,request_type:r,id_token_hint:i,login_hint:s,skipUserInfo:a,nonce:o,url_state:l,response_type:c=this.settings.response_type,scope:d=this.settings.scope,redirect_uri:f=this.settings.redirect_uri,prompt:p=this.settings.prompt,display:g=this.settings.display,max_age:y=this.settings.max_age,ui_locales:v=this.settings.ui_locales,acr_values:b=this.settings.acr_values,resource:C=this.settings.resource,response_mode:S=this.settings.response_mode,extraQueryParams:R=this.settings.extraQueryParams,extraTokenParams:w=this.settings.extraTokenParams,dpopJkt:I,omitScopeWhenRequesting:k=this.settings.omitScopeWhenRequesting}){const x=this._logger.create("createSigninRequest");if(c!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");const L=await this.metadataService.getAuthorizationEndpoint();x.debug("Received authorization endpoint",L);const N=await w2e.create({url:L,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:f,response_type:c,scope:d,state_data:t,url_state:l,prompt:p,display:g,max_age:y,ui_locales:v,id_token_hint:i,login_hint:s,acr_values:b,dpopJkt:I,resource:C,request:e,request_uri:n,extraQueryParams:R,extraTokenParams:w,request_type:r,response_mode:S,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:o,disablePKCE:this.settings.disablePKCE,omitScopeWhenRequesting:k});await this.clearStaleState();const D=N.state;return await this.settings.stateStore.set(D.id,D.toStorageString()),N}async readSigninResponseState(t,e=!1){const n=this._logger.create("readSigninResponseState"),r=new S7(LU.readParams(t,this.settings.response_mode));if(!r.state)throw n.throw(new Error("No state in response")),null;const i=await this.settings.stateStore[e?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:await tx.fromStorageString(i),response:r}}async processSigninResponse(t,e){const n=this._logger.create("processSigninResponse"),{state:r,response:i}=await this.readSigninResponseState(t,!0);if(n.debug("received state from storage; validating response"),this.settings.dpop&&this.settings.dpop.store){const s=await this.getDpopProof(this.settings.dpop.store);e={...e,DPoP:s}}try{await this._validator.validateSigninResponse(i,r,e)}catch(s){if(s instanceof hk&&this.settings.dpop){const a=await this.getDpopProof(this.settings.dpop.store,s.nonce);e.DPoP=a,await this._validator.validateSigninResponse(i,r,e)}else throw s}return i}async getDpopProof(t,e){let n,r;return(await t.getAllKeys()).includes(this.settings.client_id)?(r=await t.get(this.settings.client_id),r.nonce!==e&&e&&(r.nonce=e,await t.set(this.settings.client_id,r))):(n=await $o.generateDPoPKeys(),r=new P2e(n,e),await t.set(this.settings.client_id,r)),await $o.generateDPoPProof({url:await this.metadataService.getTokenEndpoint(!1),httpMethod:"POST",keyPair:r.keys,nonce:r.nonce})}async processResourceOwnerPasswordCredentials({username:t,password:e,skipUserInfo:n=!1,extraTokenParams:r={}}){const i=await this._tokenClient.exchangeCredentials({username:t,password:e,...r}),s=new S7(new URLSearchParams);return Object.assign(s,i),await this._validator.validateCredentialsResponse(s,n),s}async useRefreshToken({state:t,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,extraTokenParams:s}){var a;const o=this._logger.create("useRefreshToken");let l;if(this.settings.refreshTokenAllowedScope===void 0)l=t.scope;else{const f=this.settings.refreshTokenAllowedScope.split(" ");l=(((a=t.scope)==null?void 0:a.split(" "))||[]).filter(g=>f.includes(g)).join(" ")}if(this.settings.dpop&&this.settings.dpop.store){const f=await this.getDpopProof(this.settings.dpop.store);i={...i,DPoP:f}}let c;try{c=await this._tokenClient.exchangeRefreshToken({refresh_token:t.refresh_token,scope:l,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,...s})}catch(f){if(f instanceof hk&&this.settings.dpop)i.DPoP=await this.getDpopProof(this.settings.dpop.store,f.nonce),c=await this._tokenClient.exchangeRefreshToken({refresh_token:t.refresh_token,scope:l,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,...s});else throw f}const d=new S7(new URLSearchParams);return Object.assign(d,c),o.debug("validating response",d),await this._validator.validateRefreshResponse(d,{...t,scope:l}),d}async createSignoutRequest({state:t,id_token_hint:e,client_id:n,request_type:r,post_logout_redirect_uri:i=this.settings.post_logout_redirect_uri,extraQueryParams:s=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),o=await this.metadataService.getEndSessionEndpoint();if(!o)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",o),!n&&i&&!e&&(n=this.settings.client_id);const l=new T2e({url:o,id_token_hint:e,client_id:n,post_logout_redirect_uri:i,state_data:t,extraQueryParams:s,request_type:r});await this.clearStaleState();const c=l.state;return c&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(c.id,c.toStorageString())),l}async readSignoutResponseState(t,e=!1){const n=this._logger.create("readSignoutResponseState"),r=new R2e(LU.readParams(t,this.settings.response_mode));if(!r.state){if(n.debug("No state in response"),r.error)throw n.warn("Response was error:",r.error),new rm(r);return{state:void 0,response:r}}const i=await this.settings.stateStore[e?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:await $6.fromStorageString(i),response:r}}async processSignoutResponse(t){const e=this._logger.create("processSignoutResponse"),{state:n,response:r}=await this.readSignoutResponseState(t,!0);return n?(e.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(r,n)):e.debug("No state from storage; skipping response validation"),r}clearStaleState(){return this._logger.create("clearStaleState"),$6.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(t,e){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:t,token_type_hint:e})}},Hi=function(t){return t.NotSupported="OIDC authentication not supported",t.Misconfigured="OIDC is misconfigured",t.General="Something went wrong with OIDC discovery",t.OpSupport="Configured OIDC OP does not support required functions",t.DynamicRegistrationNotSupported="Dynamic registration not supported",t.DynamicRegistrationFailed="Dynamic registration failed",t.DynamicRegistrationInvalid="Dynamic registration invalid response",t.CodeExchangeFailed="Failed to exchange code for token",t.InvalidBearerTokenResponse="Invalid bearer token response",t.InvalidIdToken="Invalid ID token",t.MissingOrInvalidStoredState="State required to finish logging in is not found in storage.",t}({}),rx=t=>!!t&&typeof t=="object"&&!Array.isArray(t),$c=(t,e)=>!t[e]||!m0(t,e)?(A.error("Missing or invalid property: ".concat(e)),!1):!0,m0=(t,e)=>t[e]&&typeof t[e]!="string"?(A.error("Invalid property: ".concat(e)),!1):!0,OU=(t,e)=>t[e]&&(!Array.isArray(t[e])||!t[e].every(n=>typeof n=="string"))?(A.error("Invalid property: ".concat(e)),!1):!0,Ib=(t,e,n)=>{var r=t[e];return!r||!Array.isArray(r)||!r.includes(n)?(A.error("Invalid property: ".concat(e,". ").concat(n," is required.")),!1):!0},ez=t=>{if(!rx(t))throw A.error("Issuer configuration not found or malformed"),new Error(Hi.OpSupport);var e=[$c(t,"issuer"),$c(t,"authorization_endpoint"),$c(t,"token_endpoint"),$c(t,"revocation_endpoint"),m0(t,"registration_endpoint"),m0(t,"account_management_uri"),m0(t,"device_authorization_endpoint"),OU(t,"account_management_actions_supported"),Ib(t,"response_types_supported","code"),Ib(t,"grant_types_supported","authorization_code"),Ib(t,"code_challenge_methods_supported","S256"),OU(t,"prompt_values_supported")].some(n=>!n);if(!e)return t;throw A.error("Issuer configuration not valid"),new Error(Hi.OpSupport)},tz=t=>{try{return zZ(t)}catch(e){throw A.error("Could not decode id_token",e),e}},nz=(t,e,n,r)=>{try{if(!t)throw new Error("No ID token");var i=tz(t);if(i.iss!==e)throw new Error("Invalid issuer");var s=typeof i.aud=="string"?[i.aud]:i.aud;if(!s.includes(n))throw new Error("Invalid audience");if(r!==void 0&&i.nonce!==r)throw new Error("Invalid nonce");if(!i.exp||Date.now()>i.exp*1e3)throw new Error("Invalid expiry")}catch(a){throw A.error("Invalid ID token",a),new Error(Hi.InvalidIdToken)}};function rz(t){if(!rx(t))throw A.error("Stored user state not found"),new Error(Hi.MissingOrInvalidStoredState);var e=[$c(t,"homeserverUrl"),$c(t,"nonce"),m0(t,"identityServerUrl")].some(n=>!n);if(e)throw new Error(Hi.MissingOrInvalidStoredState)}var L2e=t=>rx(t)&&$c(t,"token_type")&&t.token_type.toLowerCase()==="bearer"&&$c(t,"access_token")&&$c(t,"refresh_token")&&(!("expires_in"in t)||typeof t.expires_in=="number");function iz(t){if(!L2e(t))throw new Error(Hi.InvalidBearerTokenResponse)}function AU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var x9=t=>{var e=t??Ba(10);return"openid urn:matrix:org.matrix.msc2967.client:api:* urn:matrix:org.matrix.msc2967.client:device:".concat(e)},O2e=function(){var t=F(function*(e){if(!globalThis.crypto.subtle)return A.warn("A secure context is required to generate code challenge. Using plain text code challenge"),e;var n=yield ZZ(e);return S9(n)});return function(n){return t.apply(this,arguments)}}(),A2e=t=>{var{redirectUri:e}=t;return{scope:x9(),redirectUri:e,state:Ba(8),nonce:Ba(8),codeVerifier:Ba(64)}},N2e=function(){var t=F(function*(e,n,r){var{scope:i,redirectUri:s,state:a,nonce:o,codeVerifier:l}=r,c=new URL(e);return c.searchParams.append("response_mode","query"),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",s),c.searchParams.append("client_id",n),c.searchParams.append("state",a),c.searchParams.append("scope",i),c.searchParams.append("nonce",o),c.searchParams.append("code_challenge_method","S256"),c.searchParams.append("code_challenge",yield O2e(l)),c.toString()});return function(n,r,i){return t.apply(this,arguments)}}(),D2e=function(){var t=F(function*(e){var{metadata:n,redirectUri:r,clientId:i,homeserverUrl:s,identityServerUrl:a,nonce:o,prompt:l,urlState:c}=e,d=x9(),f=new nx(V6(V6({},n),{},{client_id:i,redirect_uri:r,authority:n.issuer,response_mode:"query",response_type:"code",scope:d,stateStore:new I9({prefix:"mx_oidc_",store:window.sessionStorage})})),p={homeserverUrl:s,nonce:o,identityServerUrl:a},g=yield f.createSigninRequest({state:p,nonce:o,prompt:l,url_state:c});return g.url});return function(n){return t.apply(this,arguments)}}(),U2e=t=>({id_token:t.id_token,scope:t.scope,expires_at:t.expires_at,refresh_token:t.refresh_token,access_token:t.access_token,token_type:"Bearer"}),F2e=function(){var t=F(function*(e,n){var r=new URL(window.location.origin);r.searchParams.append("code",e),r.searchParams.append("state",n),X0.setLogger(A);try{var i=new S7(r.searchParams),s=new I9({prefix:"mx_oidc_",store:window.sessionStorage}),a=yield s.get(i.state);if(!a)throw new Error(Hi.MissingOrInvalidStoredState);var o=yield tx.fromStorageString(a),l=new nx(V6(V6({},o),{},{stateStore:s})),c=yield l.processSigninResponse(r.href),d=c.userState;rz(d),iz(c),nz(c.id_token,l.settings.authority,l.settings.client_id,d.nonce);var f=U2e(c);return{oidcClientSettings:{clientId:l.settings.client_id,issuer:l.settings.authority},tokenResponse:f,homeserverUrl:d.homeserverUrl,identityServerUrl:d.identityServerUrl,idTokenClaims:c.profile}}catch(g){A.error("Oidc login failed",g);var p=g.message;throw Object.values(Hi).includes(p)?g:new Error(Hi.CodeExchangeFailed)}});return function(n,r){return t.apply(this,arguments)}}();function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ix=function(){var t=F(function*(e){var n=new URL(".well-known/openid-configuration",e),r=yield fetch(n,{method:oe.Get,signal:b9(5e3)}),i=yield r.json();return sx(i)});return function(n){return t.apply(this,arguments)}}(),sx=function(){var t=F(function*(e){var n=ez(e),r=new fk({authority:n.issuer,metadata:n,redirect_uri:"",client_id:""}),i=new YZ(r);return DU(DU({},n),{},{signingKeys:yield i.getSigningKeys()})});return function(n){return t.apply(this,arguments)}}(),j2e="urn:ietf:params:oauth:grant-type:device_code",xb=(t,e)=>{if(!e)return!1;var n=new URL(e);return!(n.protocol!==t.protocol||n.hostname!==t.hostname&&!n.hostname.endsWith(".".concat(t.hostname)))},H2e=function(){var t=F(function*(e,n){if(!e.registration_endpoint)throw new Error(Hi.DynamicRegistrationNotSupported);var r=["authorization_code","refresh_token"];if(r.some(d=>!e.grant_types_supported.includes(d)))throw new Error(Hi.DynamicRegistrationNotSupported);var i=new URL(n.clientUri),s={client_name:n.clientName,client_uri:n.clientUri,response_types:["code"],grant_types:r,redirect_uris:n.redirectUris,id_token_signed_response_alg:"RS256",token_endpoint_auth_method:"none",application_type:n.applicationType,contacts:n.contacts,logo_uri:xb(i,n.logoUri)?n.logoUri:void 0,policy_uri:xb(i,n.policyUri)?n.policyUri:void 0,tos_uri:xb(i,n.tosUri)?n.tosUri:void 0},a={Accept:"application/json","Content-Type":"application/json"};try{var o=yield fetch(e.registration_endpoint,{method:oe.Post,headers:a,body:JSON.stringify(s)});if(o.status>=400)throw new Error(Hi.DynamicRegistrationFailed);var l=yield o.json(),c=l.client_id;if(!c||typeof c!="string")throw new Error(Hi.DynamicRegistrationInvalid);return c}catch(d){throw Object.values(Hi).includes(d.message)?d:(A.error("Dynamic registration request failed",d),new Error(Hi.DynamicRegistrationFailed))}});return function(n,r){return t.apply(this,arguments)}}();class $2e{constructor(e,n,r,i,s){this.idTokenClaims=s,P(this,"oidcClientReady",void 0),P(this,"oidcClient",void 0),P(this,"inflightRefreshRequest",void 0),this.oidcClientReady=this.initialiseOidcClient(e,n,i,r)}initialiseOidcClient(e,n,r,i){var s=this;return F(function*(){try{var a,o=yield ix(e),l=x9(r);s.oidcClient=new nx({metadata:o,signingKeys:(a=o.signingKeys)!==null&&a!==void 0?a:void 0,client_id:n,scope:l,redirect_uri:i,authority:o.issuer,stateStore:new I9({prefix:"mx_oidc_",store:window.sessionStorage})})}catch(c){throw A.error("Failed to initialise OIDC client.",c),new Error("Failed to initialise OIDC client.")}})()}doRefreshAccessToken(e){var n=this;return F(function*(){n.inflightRefreshRequest||(n.inflightRefreshRequest=n.getNewTokens(e));try{var r=yield n.inflightRefreshRequest;return r}catch(i){throw i instanceof rm?new jI(i):i}finally{n.inflightRefreshRequest=void 0}})()}persistTokens(e){return F(function*(){})()}getNewTokens(e){var n=this;return F(function*(){if(!n.oidcClient)throw new Error("Cannot get new token before OIDC client is initialised.");var r={refresh_token:e,session_state:"test",data:void 0,profile:n.idTokenClaims},i=Date.now(),s=yield n.oidcClient.useRefreshToken({state:r,timeoutInSeconds:300}),a={accessToken:s.access_token,refreshToken:s.refresh_token,expiry:s.expires_in?new Date(i+s.expires_in*1e3):void 0};return yield n.persistTokens(a),a})()}}var V2e=["server","limit","since"];function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var B2e=3e3,FU=10*60*1e3,q2e=new br("last_seen_user_agent","org.matrix.msc3852.last_seen_user_agent"),im=function(t){return t.Chronological="chronological",t.Detached="detached",t}({}),G2e=new Gg("m.get_login_token","org.matrix.msc3882.get_login_token"),sz="uk.half-shot.msc2666",az="uk.half-shot.msc2666.mutual_rooms",oz="uk.half-shot.msc2666.query_mutual_rooms",Il="org.matrix.msc4140",lz="uk.tcpip.msc4133",cl="$",Le=function(t){return t.Sync="sync",t.Event="event",t.ToDeviceEvent="toDeviceEvent",t.AccountData="accountData",t.Room="Room",t.DeleteRoom="deleteRoom",t.SyncUnexpectedError="sync.unexpectedError",t.ClientWellKnown="WellKnown.client",t.ReceivedVoipEvent="received_voip_event",t.UndecryptableToDeviceEvent="toDeviceEvent.undecryptable",t.TurnServers="turnServers",t.TurnServersError="turnServers.error",t}({}),K2e=new br("action","org.matrix.msc3824.action");class M9 extends Un{constructor(e){var n,r,i,s;super(),i=this,P(this,"logger",void 0),P(this,"reEmitter",new Fm(this)),P(this,"olmVersion",null),P(this,"usingExternalCrypto",!1),P(this,"_store",void 0),P(this,"deviceId",void 0),P(this,"credentials",void 0),P(this,"legacyPickleKey",void 0),P(this,"scheduler",void 0),P(this,"clientRunning",!1),P(this,"timelineSupport",!1),P(this,"urlPreviewCache",{}),P(this,"identityServer",void 0),P(this,"http",void 0),P(this,"cryptoBackend",void 0),P(this,"cryptoCallbacks",void 0),P(this,"callEventHandler",void 0),P(this,"groupCallEventHandler",void 0),P(this,"supportsCallTransfer",!1),P(this,"forceTURN",!1),P(this,"iceCandidatePoolSize",0),P(this,"idBaseUrl",void 0),P(this,"baseUrl",void 0),P(this,"isVoipWithNoMediaAllowed",void 0),P(this,"useLivekitForGroupCalls",void 0),P(this,"canSupportVoip",!1),P(this,"peekSync",null),P(this,"isGuestAccount",!1),P(this,"ongoingScrollbacks",{}),P(this,"notifTimelineSet",null),P(this,"legacyCryptoStore",void 0),P(this,"verificationMethods",void 0),P(this,"fallbackICEServerAllowed",!1),P(this,"syncApi",void 0),P(this,"roomNameGenerator",void 0),P(this,"pushRules",void 0),P(this,"syncLeftRoomsPromise",void 0),P(this,"syncedLeftRooms",!1),P(this,"clientOpts",void 0),P(this,"clientWellKnownIntervalID",void 0),P(this,"canResetTimelineCallback",void 0),P(this,"canSupport",new Map),P(this,"pushProcessor",new xo(this)),P(this,"serverVersionsPromise",void 0),P(this,"clientWellKnown",void 0),P(this,"clientWellKnownPromise",void 0),P(this,"turnServers",[]),P(this,"turnServersExpiry",0),P(this,"checkTurnServersIntervalID",void 0),P(this,"txnCtr",0),P(this,"mediaHandler",new jfe(this)),P(this,"sessionId",void 0),P(this,"eventsBeingEncrypted",new Set),P(this,"useE2eForGroupCall",!0),P(this,"toDeviceMessageQueue",void 0),P(this,"livekitServiceURL",void 0),P(this,"_secretStorage",void 0),P(this,"ignoredInvites",void 0),P(this,"matrixRTC",void 0),P(this,"serverCapabilitiesService",void 0),P(this,"startCallEventHandler",()=>{this.isInitialSyncComplete()&&(Qw()&&(this.callEventHandler.start(),this.groupCallEventHandler.start()),this.off(Le.Sync,this.startCallEventHandler))}),P(this,"startMatrixRTC",()=>{this.isInitialSyncComplete()&&(this.matrixRTC.start(),this.off(Le.Sync,this.startMatrixRTC))}),P(this,"fixupRoomNotifications",()=>{if(this.isInitialSyncComplete()){var o,l=((o=this.getRooms())!==null&&o!==void 0?o:[]).filter(f=>f.getUnreadNotificationCount(Zt.Total)>0);for(var c of l){var d=this.getSafeUserId();c.fixupNotifications(d)}this.off(Le.Sync,this.fixupRoomNotifications)}}),this.logger=(n=e.logger)!==null&&n!==void 0?n:A,e.baseUrl=fb(e.baseUrl),e.idBaseUrl=fb(e.idBaseUrl),this.baseUrl=e.baseUrl,this.idBaseUrl=e.idBaseUrl,this.identityServer=e.identityServer,this.usingExternalCrypto=(r=e.usingExternalCrypto)!==null&&r!==void 0?r:!1,this.store=e.store||new Vhe,this.deviceId=e.deviceId||null,this.sessionId=Ba(10);var a=e.userId||null;this.credentials={userId:a},this.http=new SZ(this,{fetchFn:e.fetchFn,baseUrl:e.baseUrl,idBaseUrl:e.idBaseUrl,accessToken:e.accessToken,refreshToken:e.refreshToken,tokenRefreshFunction:e.tokenRefreshFunction,prefix:Ur.V3,onlyData:!0,extraParams:e.queryParams,localTimeoutMs:e.localTimeoutMs,useAuthorizationHeader:e.useAuthorizationHeader,logger:this.logger}),e.pickleKey&&(this.legacyPickleKey=e.pickleKey),this.useLivekitForGroupCalls=!!e.useLivekitForGroupCalls,this.scheduler=e.scheduler,this.scheduler&&this.scheduler.setProcessFunction(function(){var o=F(function*(l){var c=i.getRoom(l.getRoomId());l.status!==lt.SENDING&&i.updatePendingEventStatus(c,l,lt.SENDING);var d=yield i.sendEventHttpRequest(l);return c&&c.updatePendingEvent(l,lt.SENT,d.event_id),d});return function(l){return o.apply(this,arguments)}}()),Qw()&&(this.callEventHandler=new ofe(this),this.groupCallEventHandler=new lfe(this),this.canSupportVoip=!0,this.on(Le.Sync,this.startCallEventHandler)),this.matrixRTC=new u2e(this),this.serverCapabilitiesService=new kZ(this.http),this.on(Le.Sync,this.fixupRoomNotifications),this.timelineSupport=!!e.timelineSupport,this.legacyCryptoStore=e.cryptoStore,this.verificationMethods=e.verificationMethods,this.cryptoCallbacks=e.cryptoCallbacks||{},this.forceTURN=e.forceTURN||!1,this.iceCandidatePoolSize=e.iceCandidatePoolSize===void 0?0:e.iceCandidatePoolSize,this.supportsCallTransfer=e.supportsCallTransfer||!1,this.fallbackICEServerAllowed=e.fallbackICEServerAllowed||!1,this.isVoipWithNoMediaAllowed=e.isVoipWithNoMediaAllowed||!1,e.useE2eForGroupCall!==void 0&&(this.useE2eForGroupCall=e.useE2eForGroupCall),this.livekitServiceURL=e.livekitServiceURL,this.roomNameGenerator=e.roomNameGenerator,this.toDeviceMessageQueue=new Zfe(this),this.on($t.Decrypted,o=>{cz(this,o)}),this.ignoredInvites=new zfe(this),this._secretStorage=new BZ(this,(s=e.cryptoCallbacks)!==null&&s!==void 0?s:{}),this.setMaxListeners(0)}set store(e){this._store=e,this._store.setUserCreator(n=>Gc.createUser(n,this))}get store(){return this._store}startClient(e){var n=this;return F(function*(){if(!n.clientRunning){n.clientRunning=!0,n.on(Le.Sync,n.startMatrixRTC);var r=n.getUserId();r&&n.store.storeUser(new Gc(r)),n.canSupportVoip&&(n.checkTurnServersIntervalID=setInterval(()=>{n.checkTurnServers()},FU),n.checkTurnServers()),n.syncApi&&(n.logger.error("Still have sync object whilst not running: stopping old one"),n.syncApi.stop());try{yield n.getVersions();var{threads:i,list:s,fwdPagination:a}=yield n.doesServerSupportThread();wn.setServerSideSupport(i),wn.setServerSideListSupport(s),wn.setServerSideFwdPaginationSupport(a)}catch(o){n.logger.error("Can't fetch server versions, continuing to initialise sync, this will be retried later",o)}n.clientOpts=e??{},n.clientOpts.slidingSync?n.syncApi=new jZ(n.clientOpts.slidingSync,n,n.clientOpts,n.buildSyncApiOptions()):n.syncApi=new fd(n,n.clientOpts,n.buildSyncApiOptions()),n.syncApi.sync().catch(o=>n.logger.info("Sync startup aborted with an error:",o)),n.clientOpts.clientWellKnownPollPeriod!==void 0&&(n.clientWellKnownIntervalID=setInterval(()=>{n.fetchClientWellKnown()},1e3*n.clientOpts.clientWellKnownPollPeriod),n.fetchClientWellKnown()),n.toDeviceMessageQueue.start(),n.serverCapabilitiesService.start()}})()}buildSyncApiOptions(){return{cryptoCallbacks:this.cryptoBackend,canResetEntireTimeline:e=>this.canResetTimelineCallback?this.canResetTimelineCallback(e):!1}}stopClient(){var e,n,r,i,s;(e=this.cryptoBackend)===null||e===void 0||e.stop(),this.off(Le.Sync,this.startMatrixRTC),this.clientRunning&&(this.logger.debug("stopping MatrixClient"),this.clientRunning=!1,(n=this.syncApi)===null||n===void 0||n.stop(),this.syncApi=void 0,(r=this.peekSync)===null||r===void 0||r.stopPeeking(),(i=this.callEventHandler)===null||i===void 0||i.stop(),(s=this.groupCallEventHandler)===null||s===void 0||s.stop(),this.callEventHandler=void 0,this.groupCallEventHandler=void 0,globalThis.clearInterval(this.checkTurnServersIntervalID),this.checkTurnServersIntervalID=void 0,this.clientWellKnownIntervalID!==void 0&&globalThis.clearInterval(this.clientWellKnownIntervalID),this.toDeviceMessageQueue.stop(),this.matrixRTC.stop(),this.serverCapabilitiesService.stop())}clearStores(){var e=this;if(this.clientRunning)throw new Error("Cannot clear stores while client is running");var n=[];n.push(this.store.deleteAllData()),this.legacyCryptoStore&&n.push(this.legacyCryptoStore.deleteAllData());var r=function(){var i=F(function*(){var s;try{if(s=globalThis.indexedDB,!s)return}catch{return}var a=function*(c){var d=new Promise((f,p)=>{e.logger.info("Removing IndexedDB instance ".concat(c));var g=s.deleteDatabase(c);g.onsuccess=y=>{e.logger.info("Removed IndexedDB instance ".concat(c)),f(0)},g.onerror=y=>{e.logger.warn("Failed to remove IndexedDB instance ".concat(c,":"),y),f(0)},g.onblocked=y=>{e.logger.info("cannot yet remove IndexedDB instance ".concat(c))}});yield d};for(var o of["".concat(wb,"::matrix-sdk-crypto"),"".concat(wb,"::matrix-sdk-crypto-meta")])yield*a(o)});return function(){return i.apply(this,arguments)}}();return n.push(r()),Promise.all(n).then()}getUserId(){var e,n;return(e=(n=this.credentials)===null||n===void 0?void 0:n.userId)!==null&&e!==void 0?e:null}getSafeUserId(){var e=this.getUserId();if(!e)throw new Error("Expected logged in user but found none.");return e}getDomain(){var e;return(e=this.credentials)!==null&&e!==void 0&&e.userId?this.credentials.userId.replace(/^.*?:/,""):null}getUserIdLocalpart(){var e,n;return(e=(n=this.credentials)===null||n===void 0||(n=n.userId)===null||n===void 0?void 0:n.split(":")[0].substring(1))!==null&&e!==void 0?e:null}getDeviceId(){return this.deviceId}getSessionId(){return this.sessionId}supportsVoip(){return this.canSupportVoip}getMediaHandler(){return this.mediaHandler}setForceTURN(e){this.forceTURN=e}setSupportsCallTransfer(e){this.supportsCallTransfer=e}getUseE2eForGroupCall(){return this.useE2eForGroupCall}createCall(e){return J0(this,e)}createGroupCall(e,n,r,i,s,a){var o=this;return F(function*(){if(o.getGroupCallForRoom(e))throw new Error("".concat(e," already has an existing group call"));var l=o.getRoom(e);if(!l)throw new Error("Cannot find room ".concat(e));return new GI(o,l,n,r,i,void 0,s||o.isVoipWithNoMediaAllowed,a,o.isVoipWithNoMediaAllowed,o.useLivekitForGroupCalls,o.livekitServiceURL).create()})()}getLivekitServiceURL(){return this.livekitServiceURL}setLivekitServiceURL(e){this.livekitServiceURL=e}waitUntilRoomReadyForGroupCalls(e){return this.groupCallEventHandler.waitUntilRoomReadyForGroupCalls(e)}getGroupCallForRoom(e){return this.groupCallEventHandler.groupCalls.get(e)||null}getSyncState(){var e,n;return(e=(n=this.syncApi)===null||n===void 0?void 0:n.getSyncState())!==null&&e!==void 0?e:null}getSyncStateData(){return this.syncApi?this.syncApi.getSyncStateData():null}isInitialSyncComplete(){var e=this.getSyncState();return e?e===Kt.Prepared||e===Kt.Syncing:!1}isGuest(){return this.isGuestAccount}setGuest(e){this.isGuestAccount=e}getScheduler(){return this.scheduler}retryImmediately(){var e,n;return this.toDeviceMessageQueue.sendQueue(),(e=(n=this.syncApi)===null||n===void 0?void 0:n.retryImmediately())!==null&&e!==void 0?e:!1}getNotifTimelineSet(){return this.notifTimelineSet}setNotifTimelineSet(e){this.notifTimelineSet=e}getCapabilities(){var e=this;return F(function*(){var n=e.serverCapabilitiesService.getCachedCapabilities();return n||e.serverCapabilitiesService.fetchCapabilities()})()}getCachedCapabilities(){return this.serverCapabilitiesService.getCachedCapabilities()}fetchCapabilities(){return this.serverCapabilitiesService.fetchCapabilities()}initRustCrypto(){var e=arguments,n=this;return F(function*(){var r,i=e.length>0&&e[0]!==void 0?e[0]:{};if(n.cryptoBackend){n.logger.warn("Attempt to re-initialise e2e encryption on MatrixClient");return}var s=n.getUserId();if(s===null)throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");var a=n.getDeviceId();if(a===null)throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");n.logger.debug("Downloading Rust crypto library");var o=yield z0(()=>import("./index-BVu4liiy.js"),__vite__mapDeps([0,1])),l=yield o.initRustCrypto({logger:n.logger,http:n.http,userId:s,deviceId:a,secretStorage:n.secretStorage,cryptoCallbacks:n.cryptoCallbacks,storePrefix:i.useIndexedDB===!1?null:wb,storeKey:i.storageKey,storePassphrase:i.storagePassword,legacyCryptoStore:n.legacyCryptoStore,legacyPickleKey:(r=n.legacyPickleKey)!==null&&r!==void 0?r:"DEFAULT_KEY",legacyMigrationProgressListener:(c,d)=>{n.emit(Xr.LegacyCryptoStoreMigrationProgress,c,d)}});l.setSupportedVerificationMethods(n.verificationMethods),n.cryptoBackend=l,n.on(xs.Membership,l.onRoomMembership.bind(l)),n.on(Le.Event,c=>{l.onLiveEventFromSync(c)}),n.reEmitter.reEmit(l,[Xr.VerificationRequestReceived,Xr.UserTrustStatusChanged,Xr.KeyBackupStatus,Xr.KeyBackupSessionsRemaining,Xr.KeyBackupFailed,Xr.KeyBackupDecryptionKeyCached,Xr.KeysChanged,Xr.DevicesUpdated,Xr.WillUpdateDevices,Xr.DehydratedDeviceCreated,Xr.DehydratedDeviceUploaded,Xr.RehydrationStarted,Xr.RehydrationProgress,Xr.RehydrationCompleted,Xr.RehydrationError,Xr.DehydrationKeyCached,Xr.DehydratedDeviceRotationError])})()}get secretStorage(){return this._secretStorage}getCrypto(){return this.cryptoBackend}isRoomEncrypted(e){var n=this.getRoom(e);return n?n.hasEncryptionStateEvent():!1}isKeyBackupKeyStored(){return Promise.resolve(this.secretStorage.isStored("m.megolm_backup.v1"))}makeKeyBackupPath(e,n,r){var i;n!==void 0?i=Ie("/room_keys/keys/$roomId/$sessionId",{$roomId:e,$sessionId:n}):e!==void 0?i=Ie("/room_keys/keys/$roomId",{$roomId:e}):i="/room_keys/keys";var s=r===void 0?void 0:{version:r};return{path:i,queryData:s}}deleteKeysFromBackup(e,n,r){var i=this;return F(function*(){var s=i.makeKeyBackupPath(e,n,r);yield i.http.authedRequest(oe.Delete,s.path,s.queryData,void 0,{prefix:Ur.V3})})()}getMediaConfig(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=e?"/media/config":"/config";return this.http.authedRequest(oe.Get,n,void 0,void 0,{prefix:e?Ur.V1:C2.V3})}getRoom(e){return e?this.store.getRoom(e):null}getRooms(){return this.store.getRooms()}getVisibleRooms(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.store.getRooms(),r=new Set;for(var i of n){var s,a=(s=i.findPredecessor(e))===null||s===void 0?void 0:s.roomId;a&&r.add(a)}return n.filter(o=>{var l=o.currentState.getStateEvents(ee.RoomTombstone,"");return!(l&&r.has(o.roomId))})}getUser(e){return this.store.getUser(e)}getUsers(){return this.store.getUsers()}setAccountData(e,n){var r=this;return F(function*(){if(!r.clientRunning)return A.warn("Calling `setAccountData` before the client is started: `getAccountData` may return inconsistent results."),yield Bw(5,()=>r.setAccountDataRaw(e,n));var i=r.store.getAccountData(e);if(i&&_h(i.event.content,n))return{};var s=Promise.withResolvers();function a(l){l.getType()===e&&s.resolve()}r.addListener(Le.AccountData,a);try{var o=yield Bw(5,()=>r.setAccountDataRaw(e,n));return yield s.promise,o}finally{r.removeListener(Le.AccountData,a)}})()}setAccountDataRaw(e,n){var r=Ie("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e});return this.http.authedRequest(oe.Put,r,void 0,n)}getAccountData(e){return this.store.getAccountData(e)}getAccountDataFromServer(e){var n=this;return F(function*(){if(n.isInitialSyncComplete()){var r=n.store.getAccountData(e);return r?r.getContent():null}var i=Ie("/user/$userId/account_data/$type",{$userId:n.credentials.userId,$type:e});try{return yield n.http.authedRequest(oe.Get,i)}catch(a){var s;if(((s=a.data)===null||s===void 0?void 0:s.errcode)==="M_NOT_FOUND")return null;throw a}})()}deleteAccountData(e){var n=this;return F(function*(){var r=n.canSupport.get($r.AccountDataDeletion);if(r===Hr.Unsupported){yield n.setAccountData(e,{});return}var i=Ie("/user/$userId/account_data/$type",{$userId:n.getSafeUserId(),$type:e}),s=r===Hr.Unstable?{prefix:"/_matrix/client/unstable/org.matrix.msc3391"}:void 0;return yield n.http.authedRequest(oe.Delete,i,void 0,void 0,s)})()}getIgnoredUsers(){var e=this.getAccountData(ee.IgnoredUserList);return e!=null&&e.getContent().ignored_users?Object.keys(e.getContent().ignored_users):[]}setIgnoredUsers(e){var n={ignored_users:{}};return e.forEach(r=>{n.ignored_users[r]={}}),this.setAccountData(ee.IgnoredUserList,n)}isUserIgnored(e){return this.getIgnoredUsers().includes(e)}joinRoom(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:{};i.syncRoom===void 0&&(i.syncRoom=!0);var s=r.getRoom(e);if(s!=null&&s.hasMembershipState(r.credentials.userId,Ke.Join))return s;var a=Promise.resolve();if(i.inviteSignUrl){var o=new URL(i.inviteSignUrl);o.searchParams.set("mxid",r.credentials.userId),a=r.http.requestOtherUrl(oe.Post,o)}var l={};i.viaServers&&(l.server_name=i.viaServers,l.via=i.viaServers);var c={},d=yield a;d&&(c.third_party_signed=d);var f=Ie("/join/$roomid",{$roomid:e}),p=yield r.http.authedRequest(oe.Post,f,l,c),g=p.room_id,y=r.getRoom(g);if(y!=null&&y.hasMembershipState(r.credentials.userId,Ke.Join))return y;var v=new fd(r,r.clientOpts,r.buildSyncApiOptions()),b=v.createRoom(g);return i.syncRoom,b})()}knockRoom(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRoom(e);if(r!=null&&r.hasMembershipState(this.credentials.userId,Ke.Knock))return Promise.resolve({room_id:r.roomId});var i=Ie("/knock/$roomIdOrAlias",{$roomIdOrAlias:e}),s={};n.viaServers&&(s.server_name=n.viaServers,s.via=n.viaServers);var a={};return n.reason&&(a.reason=n.reason),this.http.authedRequest(oe.Post,i,s,a)}resendEvent(e,n){return this.toDeviceMessageQueue.sendQueue(),this.updatePendingEventStatus(n,e,lt.SENDING),this.encryptAndSendEvent(n,e)}cancelPendingEvent(e){if(![lt.QUEUED,lt.NOT_SENT,lt.ENCRYPTING].includes(e.status))throw new Error("cannot cancel an event with status "+e.status);e.status===lt.ENCRYPTING?this.eventsBeingEncrypted.delete(e.getId()):this.scheduler&&e.status===lt.QUEUED&&this.scheduler.removeEventFromQueue(e);var n=this.getRoom(e.getRoomId());this.updatePendingEventStatus(n,e,lt.CANCELLED)}setRoomName(e,n){return this.sendStateEvent(e,ee.RoomName,{name:n})}setRoomTopic(e,n,r){var i=hZ(n,r);return this.sendStateEvent(e,ee.RoomTopic,i)}getRoomTags(e){var n=Ie("/user/$userId/rooms/$roomId/tags",{$userId:this.credentials.userId,$roomId:e});return this.http.authedRequest(oe.Get,n)}setRoomTag(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Ie("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:n});return this.http.authedRequest(oe.Put,i,void 0,r)}deleteRoomTag(e,n){var r=Ie("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:n});return this.http.authedRequest(oe.Delete,r)}setRoomAccountData(e,n,r){var i=Ie("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:e,$type:n});return this.http.authedRequest(oe.Put,i,void 0,r)}setPowerLevel(e,n,r){var i=this;return F(function*(){var s,a;if(i.clientRunning&&i.isInitialSyncComplete()){var o;a=(o=i.getRoom(e))===null||o===void 0||(o=o.currentState)===null||o===void 0||(o=o.getStateEvents(ee.RoomPowerLevels,""))===null||o===void 0?void 0:o.getContent()}if(!a)try{a=yield i.getStateEvent(e,ee.RoomPowerLevels,"")}catch(d){if(d instanceof On&&d.errcode==="M_NOT_FOUND")a={};else throw d}a=Wg(a),(s=a)!==null&&s!==void 0&&s.users||(a.users={});var l=Array.isArray(n)?n:[n];for(var c of l)r==null?delete a.users[c]:a.users[c]=r;return i.sendStateEvent(e,ee.RoomPowerLevels,a,"")})()}unstable_createLiveBeacon(e,n){var r=this;return F(function*(){return r.unstable_setLiveBeacon(e,n)})()}unstable_setLiveBeacon(e,n){var r=this;return F(function*(){return r.sendStateEvent(e,WI.name,n,r.getUserId())})()}sendEvent(e,n,r,i,s){var a,o,l,c;return!(n!=null&&n.startsWith(cl))&&n!==null?(c=i,l=r,o=n,a=null):(c=s,l=i,o=r,a=n),this.addThreadRelationIfNeeded(l,a,e),this.sendCompleteEvent(e,a,{type:o,content:l},c)}addThreadRelationIfNeeded(e,n,r){var i;if(n&&!((i=e["m.relates_to"])!==null&&i!==void 0&&i.rel_type)){var s,a,o=!!((s=e["m.relates_to"])!==null&&s!==void 0&&s["m.in_reply_to"]);e["m.relates_to"]=Dr(Dr({},e["m.relates_to"]),{},{rel_type:un.name,event_id:n,is_falling_back:!o});var l=(a=this.getRoom(r))===null||a===void 0?void 0:a.getThread(n);if(l&&!o){var c,d;e["m.relates_to"]["m.in_reply_to"]={event_id:(c=(d=l.lastReply(f=>f.isRelation(un.name)&&!f.status))===null||d===void 0?void 0:d.getId())!==null&&c!==void 0?c:n}}}}sendCompleteEvent(e,n,r,i,s){var a,o;typeof i=="string"?o=i:(a=i,o=s),o||(o=this.makeTxnId());var l=new $i(Object.assign(r,{event_id:"~"+e+":"+o,user_id:this.credentials.userId,sender:this.credentials.userId,room_id:e,origin_server_ts:new Date().getTime()})),c=this.getRoom(e),d=n?c==null?void 0:c.getThread(n):void 0;d&&l.setThread(d),a||(this.reEmitter.reEmit(l,[$t.Replaced,$t.VisibilityChange]),c==null||c.reEmitter.reEmit(l,[$t.BeforeRedaction]));var f=l.getAssociatedId();if(f!=null&&f.startsWith("~")){var p=c==null?void 0:c.getPendingEvents().find(y=>y.getId()===f);p==null||p.once($t.LocalEventIdReplaced,()=>{l.updateAssociatedId(p.getId())})}var g=l.getType();return this.logger.debug("sendEvent of type ".concat(g," in ").concat(e," with txnId ").concat(o).concat(a?" (delayed event)":"")),l.setTxnId(o),l.setStatus(lt.SENDING),a?this.encryptAndSendEvent(c,l,a):(c==null||c.addPendingEvent(l,o),l.status===lt.NOT_SENT?Promise.reject(new Error("Event blocked by other events not yet sent")):this.encryptAndSendEvent(c,l))}encryptAndSendEvent(e,n,r){var i=this;return F(function*(){if(r)return i.sendEventHttpRequest(n,r);try{var s;i.eventsBeingEncrypted.add(n.getId());try{yield i.encryptEventIfNeeded(n,e??void 0)}finally{s=!i.eventsBeingEncrypted.delete(n.getId())}if(s)return{};n.status===lt.ENCRYPTING&&i.updatePendingEventStatus(e,n,lt.SENDING);var a=null;return i.scheduler&&(a=i.scheduler.queueEvent(n),a&&i.scheduler.getQueueForEvent(n).length>1&&i.updatePendingEventStatus(e,n,lt.QUEUED)),a||(a=i.sendEventHttpRequest(n),e&&(a=a.then(o=>(e.updatePendingEvent(n,lt.SENT,o.event_id),o)))),yield a}catch(o){i.logger.error("Error sending event",o);try{n.error=o,i.updatePendingEventStatus(e,n,lt.NOT_SENT)}catch(l){i.logger.error("Exception in error handler!",l)}throw o instanceof On&&(o.event=n),o}})()}encryptEventIfNeeded(e,n){var r=this;return F(function*(){if(n&&(yield r.shouldEncryptEventForRoom(e,n))&&!(!r.cryptoBackend&&r.usingExternalCrypto)){if(!r.cryptoBackend)throw new Error("This room is configured to use encryption, but your client does not support encryption.");r.updatePendingEventStatus(n,e,lt.ENCRYPTING),yield r.cryptoBackend.encryptEvent(e,n)}})()}shouldEncryptEventForRoom(e,n){var r=this;return F(function*(){var i;return e.isEncrypted()||e.getType()===ee.Reaction||e.isRedaction()?!1:!!(n.hasEncryptionStateEvent()||(yield(i=r.cryptoBackend)===null||i===void 0?void 0:i.isEncryptionEnabledInRoom(n.roomId)))})()}getEncryptedIfNeededEventType(e,n){var r;return n===ee.Reaction?n:(r=this.getRoom(e))!==null&&r!==void 0&&r.hasEncryptionStateEvent()?ee.RoomMessageEncrypted:n}updatePendingEventStatus(e,n,r){e?e.updatePendingEvent(n,r):n.setStatus(r)}sendEventHttpRequest(e,n){var r=e.getTxnId();r||(r=this.makeTxnId(),e.setTxnId(r));var i={$roomId:e.getRoomId(),$eventType:e.getWireType(),$stateKey:e.getStateKey(),$txnId:r},s;if(e.isState()){var a="/rooms/$roomId/state/$eventType";e.getStateKey()&&e.getStateKey().length>0&&(a="/rooms/$roomId/state/$eventType/$stateKey"),s=Ie(a,i)}else if(e.isRedaction()&&e.event.redacts){var o="/rooms/$roomId/redact/$redactsEventId/$txnId";s=Ie(o,Dr({$redactsEventId:e.event.redacts},i))}else s=Ie("/rooms/$roomId/send/$eventType/$txnId",i);var l=e.getWireContent();return n?this.http.authedRequest(oe.Put,s,jU(n),l):this.http.authedRequest(oe.Put,s,void 0,l).then(c=>(this.logger.debug("Event sent to ".concat(e.getRoomId()," with event id ").concat(c.event_id)),c))}redactEvent(e,n,r,i,s){var a,o,l;(a=r)!==null&&a!==void 0&&a.startsWith(cl)||(s=i,i=r,r=n,n=null);var c=(o=s)===null||o===void 0?void 0:o.reason,d={reason:c};if(((l=s)===null||l===void 0?void 0:l.with_rel_types)!==void 0){if(this.canSupport.get($r.RelationBasedRedactions)===Hr.Unsupported)throw new Error("Server does not support relation based redactions "+"roomId ".concat(e," eventId ").concat(r," txnId: ").concat(i," threadId ").concat(n));var f=this.canSupport.get($r.RelationBasedRedactions)===Hr.Stable?Uw.stable:Uw.unstable;d[f]=s.with_rel_types}return this.sendCompleteEvent(e,n,{type:ee.RoomRedaction,content:d,redacts:r},i)}sendMessage(e,n,r,i){typeof n!="string"&&n!==null&&(i=r,r=n,n=null);var s=ee.RoomMessage,a=r;return this.sendEvent(e,n,s,a,i)}sendTextMessage(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=oZ(r);return this.sendMessage(e,n,a,i)}sendNotice(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=lZ(r);return this.sendMessage(e,n,a,i)}sendEmoteMessage(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=cZ(r);return this.sendMessage(e,n,a,i)}sendImageMessage(e,n,r,i){var s,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Image";!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(a=i||"Image",i=r,r=n,n=null);var o={msgtype:Gl.Image,url:r,info:i,body:a};return this.sendMessage(e,n,o)}sendStickerMessage(e,n,r,i){var s,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Sticker";!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(a=i||"Sticker",i=r,r=n,n=null);var o={url:r,info:i,body:a};return this.sendEvent(e,n,ee.Sticker,o)}sendHtmlMessage(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=iZ(r,i);return this.sendMessage(e,n,a)}sendHtmlNotice(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=sZ(r,i);return this.sendMessage(e,n,a)}sendHtmlEmote(e,n,r,i){var s;!((s=n)!==null&&s!==void 0&&s.startsWith(cl))&&n!==null&&(i=r,r=n,n=null);var a=aZ(r,i);return this.sendMessage(e,n,a)}_unstable_sendDelayedEvent(e,n,r,i,s,a){var o=this;return F(function*(){if(!(yield o.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","sendDelayedEvent");return o.addThreadRelationIfNeeded(s,r,e),o.sendCompleteEvent(e,r,{type:i,content:s},n,a)})()}_unstable_sendDelayedStateEvent(e,n,r,i){var s=arguments,a=this;return F(function*(){var o=s.length>4&&s[4]!==void 0?s[4]:"",l=s.length>5&&s[5]!==void 0?s[5]:{};if(!(yield a.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","sendDelayedStateEvent");var c={$roomId:e,$eventType:r,$stateKey:o},d=Ie("/rooms/$roomId/state/$eventType",c);return o!==void 0&&(d=Ie(d+"/$stateKey",c)),a.http.authedRequest(oe.Put,d,jU(n),i,l)})()}_unstable_getDelayedEvents(e){var n=this;return F(function*(){if(!(yield n.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","getDelayedEvents");var r=e?{from:e}:void 0;return yield n.http.authedRequest(oe.Get,"/delayed_events",r,void 0,{prefix:"".concat(Ur.Unstable,"/").concat(Il)})})()}_unstable_updateDelayedEvent(e,n){var r=arguments,i=this;return F(function*(){var s=r.length>2&&r[2]!==void 0?r[2]:{};if(!(yield i.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","updateDelayedEvent");var a=Ie("/delayed_events/$delayId",{$delayId:e}),o={action:n};return yield i.http.authedRequest(oe.Post,a,void 0,o,Dr(Dr({},s),{},{prefix:"".concat(Ur.Unstable,"/").concat(Il)}))})()}sendReceipt(e,n,r){var i=arguments,s=this;return F(function*(){var a=i.length>3&&i[3]!==void 0?i[3]:!1;if(s.isGuest())return Promise.resolve({});var o=Ie("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:e.getRoomId(),$receiptType:n,$eventId:e.getId()}),l=!a&&s.supportsThreads(),c=l?Dr(Dr({},r),{},{thread_id:sm(e)}):r,d=s.http.authedRequest(oe.Post,o,void 0,c||{}),f=s.getRoom(e.getRoomId());return f&&s.credentials.userId&&f.addLocalEchoReceipt(s.credentials.userId,e,n,a),d})()}sendReadReceipt(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:Qi.Read,s=n.length>2&&n[2]!==void 0?n[2]:!1;if(e){var a=e.getId(),o=r.getRoom(e.getRoomId());if(o!=null&&o.hasPendingEvent(a))throw new Error("Cannot set read receipt to a pending event (".concat(a,")"));return r.sendReceipt(e,i,{},s)}})()}setRoomReadMarkers(e,n,r,i){var s=this;return F(function*(){var a=s.getRoom(e);if(a!=null&&a.hasPendingEvent(n))throw new Error("Cannot set read marker to a pending event (".concat(n,")"));var o;if(r){if(o=r.getId(),a!=null&&a.hasPendingEvent(o))throw new Error("Cannot set read receipt to a pending event (".concat(o,")"));a==null||a.addLocalEchoReceipt(s.credentials.userId,r,Qi.Read)}var l;if(i){if(l=i.getId(),a!=null&&a.hasPendingEvent(l))throw new Error("Cannot set read receipt to a pending event (".concat(l,")"));a==null||a.addLocalEchoReceipt(s.credentials.userId,i,Qi.ReadPrivate)}return yield s.setRoomReadMarkersHttpRequest(e,n,o,l)})()}getUrlPreview(e,n){n=Math.floor(n/6e4)*6e4;var r=new URL(e);r.hash="",e=r.toString();var i=n+"_"+e;if(i in this.urlPreviewCache)return this.urlPreviewCache[i];var s=this.http.authedRequest(oe.Get,"/preview_url",{url:e,ts:n.toString()},void 0,{prefix:C2.V3,priority:"low"});return this.urlPreviewCache[i]=s,s}sendTyping(e,n,r){if(this.isGuest())return Promise.resolve({});var i=Ie("/rooms/$roomId/typing/$userId",{$roomId:e,$userId:this.getUserId()}),s={typing:n};return n&&(s.timeout=r||2e4),this.http.authedRequest(oe.Put,i,void 0,s)}getRoomUpgradeHistory(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.getRoom(e);if(!i)return[];var s=this.findPredecessorRooms(i,n,r),a=this.findSuccessorRooms(i,n,r);return[...s,i,...a]}findPredecessorRooms(e,n,r){for(var i,s=[],a=new Set([e.roomId]),o=(i=e.findPredecessor(r))===null||i===void 0?void 0:i.roomId;o!==null;){var l;if(o){if(a.has(o))break;a.add(o)}var c=this.getRoom(o);if(c===null)break;if(n){var d=c.currentState.getStateEvents(ee.RoomTombstone,"");if(!d||d.getContent().replacement_room!==e.roomId)break}s.splice(0,0,c),e=c,o=(l=e.findPredecessor(r))===null||l===void 0?void 0:l.roomId}return s}findSuccessorRooms(e,n,r){for(var i=[],s=e.currentState.getStateEvents(ee.RoomTombstone,"");s;){var a=this.getRoom(s.getContent().replacement_room);if(!a||a.roomId===e.roomId)break;if(n){var o,l=(o=a.findPredecessor(r))===null||o===void 0?void 0:o.roomId;if(!l||l!==e.roomId)break}i.push(a);var c=new Set(i.map(d=>d.roomId));if(c.size<i.length)return i.slice(0,i.length-1);e=a,s=e.currentState.getStateEvents(ee.RoomTombstone,"")}return i}invite(e,n,r){return this.membershipChange(e,n,Ke.Invite,r)}inviteByEmail(e,n){return this.inviteByThreePid(e,"email",n)}inviteByThreePid(e,n,r){var i=this;return F(function*(){var s,a=Ie("/rooms/$roomId/invite",{$roomId:e}),o=i.getIdentityServerUrl(!0);if(!o)return Promise.reject(new On({error:"No supplied identity server URL",errcode:"ORG.MATRIX.JSSDK_MISSING_PARAM"}));var l={id_server:o,medium:n,address:r};if((s=i.identityServer)!==null&&s!==void 0&&s.getAccessToken){var c=yield i.identityServer.getAccessToken();c&&(l.id_access_token=c)}return i.http.authedRequest(oe.Post,a,void 0,l)})()}leave(e){return this.membershipChange(e,void 0,Ke.Leave)}leaveRoomChain(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.getRoomUpgradeHistory(e),i=r;if(!n){i=[];for(var s of r)if(i.push(s),s.roomId===e)break}var a={},o=[],l=d=>this.leave(d).then(()=>{delete a[d]}).catch(f=>{a[d]=f});for(var c of i)o.push(l(c.roomId));return Promise.all(o).then(()=>a)}ban(e,n,r){return this.membershipChange(e,n,Ke.Ban,r)}forget(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!0,s=Ie("/rooms/$room_id/forget",{$room_id:e}),a=yield r.http.authedRequest(oe.Post,s);return i&&(r.store.removeRoom(e),r.emit(Le.DeleteRoom,e)),a})()}unban(e,n){var r=Ie("/rooms/$roomId/unban",{$roomId:e}),i={user_id:n};return this.http.authedRequest(oe.Post,r,void 0,i)}kick(e,n,r){var i=Ie("/rooms/$roomId/kick",{$roomId:e}),s={user_id:n,reason:r};return this.http.authedRequest(oe.Post,i,void 0,s)}membershipChange(e,n,r,i){var s=Ie("/rooms/$room_id/$membership",{$room_id:e,$membership:r});return this.http.authedRequest(oe.Post,s,void 0,{user_id:n,reason:i})}getPushActionsForEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e.getPushActions()||n){var{actions:r,rule:i}=this.pushProcessor.actionsAndRuleForEvent(e);e.setPushDetails(r,i)}return e.getPushActions()}getPushDetailsForEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e.getPushDetails()||n){var{actions:r,rule:i}=this.pushProcessor.actionsAndRuleForEvent(e);e.setPushDetails(r,i)}return e.getPushDetails()}setProfileInfo(e,n){var r=Ie("/profile/$userId/$info",{$userId:this.credentials.userId,$info:e});return this.http.authedRequest(oe.Put,r,void 0,n)}setDisplayName(e){var n=this;return F(function*(){var r=yield n.setProfileInfo("displayname",{displayname:e}),i=n.getUser(n.getUserId());return i&&(i.displayName=e,i.emit(Ei.DisplayName,i.events.presence,i)),r})()}setAvatarUrl(e){var n=this;return F(function*(){var r=yield n.setProfileInfo("avatar_url",{avatar_url:e}),i=n.getUser(n.getUserId());return i&&(i.avatarUrl=e,i.emit(Ei.AvatarUrl,i.events.presence,i)),r})()}mxcUrlToHttp(e,n,r,i,s,a,o){return y9(this.baseUrl,e,n,r,i,s,a,o)}setSyncPresence(e){var n=this;return F(function*(){var r;(r=n.syncApi)===null||r===void 0||r.setPresence(e)})()}setPresence(e){var n=this;return F(function*(){var r=Ie("/presence/$userId/status",{$userId:n.credentials.userId}),i=["offline","online","unavailable"];if(i.indexOf(e.presence)===-1)throw new Error("Bad presence value: "+e.presence);yield n.http.authedRequest(oe.Put,r,void 0,e)})()}getPresence(e){var n=Ie("/presence/$userId/status",{$userId:e});return this.http.authedRequest(oe.Get,n)}scrollback(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,r=0,i=this.ongoingScrollbacks[e.roomId]||{};if(i.promise)return i.promise;if(i.errorTs){var s=Date.now()-i.errorTs;r=Math.max(B2e-s,0)}if(e.oldState.paginationToken===null)return Promise.resolve(e);var a=this.store.scrollback(e,n).length;if(a===n)return Promise.resolve(e);n=n-a;var o=new Promise((l,c)=>{ru(r).then(()=>this.createMessagesRequest(e.roomId,e.oldState.paginationToken,n,Ct.Backward)).then(d=>{var f,p,g=d.chunk.map(this.getEventMapper());if(d.state){var y=d.state.map(this.getEventMapper());e.currentState.setUnknownStateEvents(y)}var[v,b,C]=e.partitionThreadedEvents(g);this.processAggregatedTimelineEvents(e,v),e.addEventsToTimeline(v,!0,!0,e.getLiveTimeline()),this.processThreadEvents(e,b,!0),C.forEach(S=>e.relations.aggregateChildEvent(S)),e.oldState.paginationToken=(f=d.end)!==null&&f!==void 0?f:null,d.chunk.length===0&&(e.oldState.paginationToken=null),this.store.storeEvents(e,g,(p=d.end)!==null&&p!==void 0?p:null,!0),delete this.ongoingScrollbacks[e.roomId],l(e)}).catch(d=>{this.ongoingScrollbacks[e.roomId]={errorTs:Date.now()},c(d)})});return i={promise:o},this.ongoingScrollbacks[e.roomId]=i,o}getEventMapper(e){return Ufe(this,e||{})}getEventTimeline(e,n){var r=this;return F(function*(){var i,s,a,o;if(!r.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(!(e!=null&&e.room))throw new Error("getEventTimeline only supports room timelines");if(e.getTimelineForEvent(n))return e.getTimelineForEvent(n);if(e.thread&&r.supportsThreads())return r.getThreadTimeline(e,n);var l=Ie("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:n}),c=void 0;(i=r.clientOpts)!==null&&i!==void 0&&i.lazyLoadMembers&&(c={filter:JSON.stringify(ws.LAZY_LOADING_MESSAGES_FILTER)});var d=yield r.http.authedRequest(oe.Get,l,c);if(!d.event)throw new Error("'event' not in '/context' result - homeserver too old?");if(e.getTimelineForEvent(n))return e.getTimelineForEvent(n);var f=r.getEventMapper(),p=f(d.event);if(p.isRelation(un.name)){r.logger.warn("Tried loading a regular timeline at the position of a thread event");return}var g=[...d.events_after.reverse().map(f),p,...d.events_before.map(f)],y=e.getTimelineForEvent(g[0].getId());y?y.getState(Me.BACKWARDS).setUnknownStateEvents(d.state.map(f)):(y=e.addTimeline(),y.initialiseState(d.state.map(f)),y.getState(Me.FORWARDS).paginationToken=d.end);var[v,b,C]=e.room.partitionThreadedEvents(g);return e.addEventsToTimeline(v,!0,!1,y,d.start),r.processThreadEvents(e.room,b,!0),r.processAggregatedTimelineEvents(e.room,v),C.forEach(S=>e.relations.aggregateChildEvent(S)),(s=(a=e.getTimelineForEvent(n))!==null&&a!==void 0?a:(o=e.room.findThreadForEvent(p))===null||o===void 0?void 0:o.liveTimeline)!==null&&s!==void 0?s:y})()}getThreadTimeline(e,n){var r=this;return F(function*(){var i;if(!r.supportsThreads())throw new Error("could not get thread timeline: no client support");if(!e.room)throw new Error("could not get thread timeline: not a room timeline");if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");var s=Ie("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:n}),a={limit:"0"};(i=r.clientOpts)!==null&&i!==void 0&&i.lazyLoadMembers&&(a.filter=JSON.stringify(ws.LAZY_LOADING_MESSAGES_FILTER));var o=yield r.http.authedRequest(oe.Get,s,a),l=r.getEventMapper(),c=l(o.event);if(e.canContain(c)){var d=r.canSupport.get($r.RelationsRecursion)!==Hr.Unsupported;if(wn.hasServerSideSupport)if(wn.hasServerSideFwdPaginationSupport){var f,p,g;if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");var y=e.thread,v=yield r.fetchRelations(e.room.roomId,y.id,null,null,{dir:Ct.Backward,from:o.start,recurse:d||void 0}),b=yield r.fetchRelations(e.room.roomId,y.id,null,null,{dir:Ct.Forward,from:o.end,recurse:d||void 0}),C=[...b.chunk.reverse().filter(Rb(y.id)).map(l),c,...v.chunk.filter(Rb(y.id)).map(l)];for(var S of C){var R;yield(R=e.thread)===null||R===void 0?void 0:R.processEvent(S)}var w=e.getTimelineForEvent(c.getId());if(w?w.getState(Me.BACKWARDS).setUnknownStateEvents(o.state.map(l)):(w=e.addTimeline(),w.initialiseState(o.state.map(l))),e.addEventsToTimeline(C,!0,!1,w,b.next_batch),!v.next_batch){var I=yield r.fetchRoomEvent(e.room.roomId,y.id);e.addEventsToTimeline([l(I)],!0,!1,w,null)}return w.setPaginationToken((f=v.next_batch)!==null&&f!==void 0?f:null,Ct.Backward),w.setPaginationToken((p=b.next_batch)!==null&&p!==void 0?p:null,Ct.Forward),r.processAggregatedTimelineEvents(e.room,C),(g=e.getTimelineForEvent(n))!==null&&g!==void 0?g:w}else{for(var k,x=e.thread,L=yield r.fetchRelations(e.room.roomId,x.id,un.name,null,{dir:Ct.Backward,from:o.start,recurse:d||void 0}),N=[],D=o.end;D;){var U,j=yield r.fetchRelations(e.room.roomId,x.id,un.name,null,{dir:Ct.Forward,from:D,recurse:d||void 0});D=(U=j.next_batch)!==null&&U!==void 0?U:null,N.push(...j.chunk)}var $=[...N.reverse().map(l),c,...L.chunk.map(l)];for(var Z of $){var V;yield(V=e.thread)===null||V===void 0?void 0:V.processEvent(Z)}var z=e.getLiveTimeline();if(z.getState(Me.BACKWARDS).setUnknownStateEvents(o.state.map(l)),e.addEventsToTimeline($,!0,!1,z,null),!L.next_batch){var K=yield r.fetchRoomEvent(e.room.roomId,x.id);e.addEventsToTimeline([l(K)],!0,!1,z,null)}return z.setPaginationToken((k=L.next_batch)!==null&&k!==void 0?k:null,Ct.Backward),z.setPaginationToken(null,Ct.Forward),r.processAggregatedTimelineEvents(e.room,$),z}}})()}getLatestTimeline(e){var n=this;return F(function*(){if(!n.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(!e.room)throw new Error("getLatestTimeline only supports room timelines");var r;if(e.threadListType!==null){var i,s=yield n.createThreadListMessagesRequest(e.room.roomId,null,1,Ct.Backward,e.threadListType,e.getFilter());r=(i=s.chunk)===null||i===void 0?void 0:i[0]}else if(e.thread&&wn.hasServerSideSupport){var a,o=n.canSupport.get($r.RelationsRecursion)!==Hr.Unsupported,l=yield n.fetchRelations(e.room.roomId,e.thread.id,un.name,null,{dir:Ct.Backward,limit:1,recurse:o||void 0});r=(a=l.chunk)===null||a===void 0?void 0:a[0]}else{var c,d,f=Ie("/rooms/$roomId/messages",{$roomId:e.room.roomId}),p={dir:"b"};(c=n.clientOpts)!==null&&c!==void 0&&c.lazyLoadMembers&&(p.filter=JSON.stringify(ws.LAZY_LOADING_MESSAGES_FILTER));var g=yield n.http.authedRequest(oe.Get,f,p);r=(d=g.chunk)===null||d===void 0?void 0:d[0]}if(!r)throw new Error("No message returned when trying to construct getLatestTimeline");return n.getEventTimeline(e,r.event_id)})()}createMessagesRequest(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:30,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=Ie("/rooms/$roomId/messages",{$roomId:e}),l={limit:i.toString(),dir:s};n&&(l.from=n);var c=null;if((r=this.clientOpts)!==null&&r!==void 0&&r.lazyLoadMembers&&(c=Object.assign({},ws.LAZY_LOADING_MESSAGES_FILTER)),a){var d;c=c||{},Object.assign(c,(d=a.getRoomTimelineFilterComponent())===null||d===void 0?void 0:d.toJSON())}return c&&(l.filter=JSON.stringify(c)),this.http.authedRequest(oe.Get,o,l)}createThreadListMessagesRequest(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:30,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ct.Backward,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Ro.All,o=arguments.length>5?arguments[5]:void 0,l=Ie("/rooms/$roomId/threads",{$roomId:e}),c={limit:i.toString(),dir:s,include:uz(a)};n&&(c.from=n);var d={};if((r=this.clientOpts)!==null&&r!==void 0&&r.lazyLoadMembers&&(d=Dr({},ws.LAZY_LOADING_MESSAGES_FILTER)),o){var f;d=Dr(Dr({},d),(f=o.getRoomTimelineFilterComponent())===null||f===void 0?void 0:f.toJSON())}Object.keys(d).length&&(c.filter=JSON.stringify(d));var p={prefix:wn.hasServerSideListSupport===ji.Stable?Ur.V1:"/_matrix/client/unstable/org.matrix.msc3856"};return this.http.authedRequest(oe.Get,l,c,void 0,p).then(g=>{var y;return Dr(Dr({},g),{},{chunk:(y=g.chunk)===null||y===void 0?void 0:y.reverse(),start:g.prev_batch,end:g.next_batch})})}paginateEventTimeline(e,n){var r=this,i=e.getTimelineSet()===this.notifTimelineSet,s=this.getRoom(e.getRoomId()),a=e.getTimelineSet().threadListType,o=e.getTimelineSet().thread;n=n||{};var l=n.backwards||!1;if(i&&!l)throw new Error("paginateNotifTimeline can only paginate backwards");var c=l?Me.BACKWARDS:Me.FORWARDS,d=e.getPaginationToken(c),f=e.paginationRequests[c];if(f)return f;var p,g,y;if(i){var v;p="/notifications",g={limit:((v=n.limit)!==null&&v!==void 0?v:30).toString(),only:"highlight"},d&&d!=="end"&&(g.from=d),y=this.http.authedRequest(oe.Get,p,g).then(function(){var w=F(function*(I){var k=I.next_token,x=[];I.notifications=I.notifications.filter(Po);for(var L=0;L<I.notifications.length;L++){var N=I.notifications[L],D=r.getEventMapper()(N.event);r.getPushDetailsForEvent(D,!0),D.event.room_id=N.room_id,x[L]=D}var U=e.getTimelineSet();return U.addEventsToTimeline(x,l,!1,e,k),r.processAggregatedTimelineEvents(U.room,x),l&&!I.next_token&&e.setPaginationToken(null,c),!!I.next_token});return function(I){return w.apply(this,arguments)}}()).finally(()=>{e.paginationRequests[c]=null}),e.paginationRequests[c]=y}else if(a!==null){if(!s)throw new Error("Unknown room "+e.getRoomId());if(!wn.hasServerSideFwdPaginationSupport&&c===Ct.Forward)throw new Error("Cannot paginate threads forwards without server-side support for MSC 3715");y=this.createThreadListMessagesRequest(e.getRoomId(),d,n.limit,c,a,e.getFilter()).then(w=>{if(w.state){var I=e.getState(c),k=w.state.filter(Po).map(this.getEventMapper());I.setUnknownStateEvents(k)}var x=w.end,L=w.chunk.filter(Po).map(this.getEventMapper()),N=e.getTimelineSet();return N.addEventsToTimeline(L,l,!1,e,x),this.processAggregatedTimelineEvents(s,L),this.processThreadRoots(s,L,l),l&&w.end==w.start&&e.setPaginationToken(null,c),w.end!==w.start}).finally(()=>{e.paginationRequests[c]=null}),e.paginationRequests[c]=y}else if(o){var b,C,S=this.getRoom((b=e.getRoomId())!==null&&b!==void 0?b:void 0);if(!S)throw new Error("Unknown room "+e.getRoomId());var R=this.canSupport.get($r.RelationsRecursion)!==Hr.Unsupported;y=this.fetchRelations((C=e.getRoomId())!==null&&C!==void 0?C:"",o.id,null,null,{dir:c,limit:n.limit,from:d??void 0,recurse:R||void 0}).then(function(){var w=F(function*(I){var k=r.getEventMapper(),x=I.chunk.filter(Po).filter(Rb(o.id)).map(k);for(var L of x.slice().reverse()){yield o==null?void 0:o.processEvent(L);var N=L.getSender();(!l||(o==null?void 0:o.getEventReadUpTo(N))===null)&&S.addLocalEchoReceipt(N,L,Qi.Read)}var D=I.next_batch,U=e.getTimelineSet();if(U.addEventsToTimeline(x,l,!1,e,D??null),!D&&l){var j,$,Z=(j=o.rootEvent)!==null&&j!==void 0?j:k(yield r.fetchRoomEvent(($=e.getRoomId())!==null&&$!==void 0?$:"",o.id));U.addEventsToTimeline([Z],!0,!1,e,null)}return r.processAggregatedTimelineEvents(U.room,x),l&&!D&&e.setPaginationToken(null,c),!!D});return function(I){return w.apply(this,arguments)}}()).finally(()=>{e.paginationRequests[c]=null}),e.paginationRequests[c]=y}else{if(!s)throw new Error("Unknown room "+e.getRoomId());y=this.createMessagesRequest(e.getRoomId(),d,n.limit,c,e.getFilter()).then(w=>{if(w.state){var I=e.getState(c),k=w.state.filter(Po).map(this.getEventMapper());I.setUnknownStateEvents(k)}var x=w.end,L=w.chunk.filter(Po).map(this.getEventMapper()),N=e.getTimelineSet(),[D,,U]=s.partitionThreadedEvents(L);N.addEventsToTimeline(D,l,!1,e,x),this.processAggregatedTimelineEvents(s,D),this.processThreadRoots(s,D.filter($=>$.getServerAggregatedRelation(un.name)),!1),U.forEach($=>s.relations.aggregateChildEvent($));var j=w.end===void 0||w.end===w.start;return l&&j&&e.setPaginationToken(null,c),!j}).finally(()=>{e.paginationRequests[c]=null}),e.paginationRequests[c]=y}return y}resetNotifTimelineSet(){this.notifTimelineSet&&this.notifTimelineSet.resetLiveTimeline("end")}peekInRoom(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20;return(n=this.peekSync)===null||n===void 0||n.stopPeeking(),this.peekSync=new fd(this,this.clientOpts,this.buildSyncApiOptions()),this.peekSync.peek(e,r)}stopPeeking(){this.peekSync&&(this.peekSync.stopPeeking(),this.peekSync=null)}setGuestAccess(e,n){var r=this.sendStateEvent(e,ee.RoomGuestAccess,{guest_access:n.allowJoin?D6.CanJoin:D6.Forbidden},""),i=Promise.resolve();return n.allowRead&&(i=this.sendStateEvent(e,ee.RoomHistoryVisibility,{history_visibility:zI.WorldReadable},"")),Promise.all([i,r]).then()}requestRegisterEmailToken(e,n,r,i){return this.requestTokenFromEndpoint("/register/email/requestToken",{email:e,client_secret:n,send_attempt:r,next_link:i})}requestRegisterMsisdnToken(e,n,r,i,s){return this.requestTokenFromEndpoint("/register/msisdn/requestToken",{country:e,phone_number:n,client_secret:r,send_attempt:i,next_link:s})}requestAdd3pidEmailToken(e,n,r,i){return this.requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:e,client_secret:n,send_attempt:r,next_link:i})}requestAdd3pidMsisdnToken(e,n,r,i,s){return this.requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:e,phone_number:n,client_secret:r,send_attempt:i,next_link:s})}requestPasswordEmailToken(e,n,r,i){return this.requestTokenFromEndpoint("/account/password/email/requestToken",{email:e,client_secret:n,send_attempt:r,next_link:i})}requestPasswordMsisdnToken(e,n,r,i,s){return this.requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:e,phone_number:n,client_secret:r,send_attempt:i,next_link:s})}requestTokenFromEndpoint(e,n){var r=this;return F(function*(){var i=Object.assign({},n);return r.http.request(oe.Post,e,void 0,i)})()}getRoomPushRule(e,n){if(this.pushRules){var r;return(r=this.pushRules[e])===null||r===void 0||(r=r.room)===null||r===void 0?void 0:r.find(i=>i.rule_id===n)}else throw new Error("SyncApi.sync() must be done before accessing to push rules.")}setRoomMutePushRule(e,n,r){var i,s=!1,a=this.getRoomPushRule(e,n);if(a!=null&&a.actions.includes(wd.DontNotify)&&(s=!0),!r)s&&(i=this.deletePushRule(e,ai.RoomSpecific,a.rule_id));else if(!a)i=this.addPushRule(e,ai.RoomSpecific,n,{actions:[wd.DontNotify]});else if(!s){var o=Promise.withResolvers();this.deletePushRule(e,ai.RoomSpecific,a.rule_id).then(()=>{this.addPushRule(e,ai.RoomSpecific,n,{actions:[wd.DontNotify]}).then(()=>{o.resolve()}).catch(l=>{o.reject(l)})}).catch(l=>{o.reject(l)}),i=o.promise}if(i)return new Promise((l,c)=>{i.then(()=>{this.getPushRules().then(d=>{this.pushRules=d,l()}).catch(d=>{c(d)})}).catch(d=>{this.getPushRules().then(f=>{this.pushRules=f,c(d)}).catch(f=>{c(d)})})})}searchMessageText(e){var n={search_term:e.query};return"keys"in e&&(n.keys=e.keys),this.search({body:{search_categories:{room_events:n}}})}searchRoomEvents(e){var n={search_categories:{room_events:{search_term:e.term,filter:e.filter,order_by:FZ.Recent,event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},r={_query:n,results:[],highlights:[]};return this.search({body:n}).then(i=>this.processRoomEventsSearch(r,i))}backPaginateRoomEventsSearch(e){if(!e.next_batch)return Promise.reject(new Error("Cannot backpaginate event search any further"));if(e.pendingRequest)return e.pendingRequest;var n={body:e._query,next_batch:e.next_batch},r=this.search(n,e.abortSignal).then(i=>this.processRoomEventsSearch(e,i)).finally(()=>{e.pendingRequest=void 0});return e.pendingRequest=r,r}processRoomEventsSearch(e,n){var r,i,s=n.search_categories.room_events;e.count=s.count,e.next_batch=s.next_batch;var a=new Set(s.highlights);e.highlights.forEach(g=>{a.add(g)}),e.highlights=Array.from(a);for(var o=this.getEventMapper(),l=(r=(i=s.results)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,c=0;c<l;c++){var d=k9.fromJson(s.results[c],o),f=this.getRoom(d.context.getEvent().getRoomId());if(f)for(var p of d.context.getTimeline())p.setMetadata(f.currentState,!1);e.results.push(d)}return e}syncLeftRooms(){if(this.syncedLeftRooms)return Promise.resolve([]);if(this.syncLeftRoomsPromise)return this.syncLeftRoomsPromise;var e=new fd(this,this.clientOpts,this.buildSyncApiOptions());return this.syncLeftRoomsPromise=e.syncLeftRooms(),this.syncLeftRoomsPromise.then(()=>{this.logger.debug("Marking success of sync left room request"),this.syncedLeftRooms=!0}).finally(()=>{this.syncLeftRoomsPromise=void 0}),this.syncLeftRoomsPromise}createFilter(e){var n=Ie("/user/$userId/filter",{$userId:this.credentials.userId});return this.http.authedRequest(oe.Post,n,void 0,e).then(r=>{var i=ws.fromJson(this.credentials.userId,r.filter_id,e);return this.store.storeFilter(i),i})}getFilter(e,n,r){if(r){var i=this.store.getFilter(e,n);if(i)return Promise.resolve(i)}var s=Ie("/user/$userId/filter/$filterId",{$userId:e,$filterId:n});return this.http.authedRequest(oe.Get,s).then(a=>{var o=ws.fromJson(e,n,a);return this.store.storeFilter(o),o})}getOrCreateFilter(e,n){var r=this;return F(function*(){var i=r.store.getFilterIdByName(e),s;if(i){try{var a=yield r.getFilter(r.credentials.userId,i,!0);if(a){var o=a.getDefinition(),l=n.getDefinition();_h(o,l)&&(s=i)}}catch(d){if(d.errcode!=="M_UNKNOWN"&&d.errcode!=="M_NOT_FOUND")throw d}s||r.store.setFilterIdByName(e,void 0)}if(s)return s;var c=yield r.createFilter(n.getDefinition());return r.store.setFilterIdByName(e,c.filterId),c.filterId})()}getOpenIdToken(){var e=Ie("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this.http.authedRequest(oe.Post,e,void 0,{})}turnServer(){return this.http.authedRequest(oe.Get,"/voip/turnServer")}getTurnServers(){return this.turnServers||[]}getTurnServersExpiry(){return this.turnServersExpiry}get pollingTurnServers(){return this.checkTurnServersIntervalID!==void 0}checkTurnServers(){var e=this;return F(function*(){if(e.canSupportVoip){var n=!1,r=e.turnServersExpiry-Date.now();if(r>FU)e.logger.debug("TURN creds are valid for another "+r+" ms: not fetching new ones."),n=!0;else{e.logger.debug("Fetching new TURN credentials");try{var i=yield e.turnServer();if(i.uris){e.logger.debug("Got TURN URIs: "+i.uris+" refresh in "+i.ttl+" secs");var s={urls:i.uris,username:i.username,credential:i.password};e.turnServers=[s],e.turnServersExpiry=Date.now()+i.ttl*1e3,n=!0,e.emit(Le.TurnServers,e.turnServers)}}catch(a){e.logger.error("Failed to get TURN URIs",a),a.httpStatus===403?(e.logger.info("TURN access unavailable for this account: stopping credentials checks"),e.checkTurnServersIntervalID!==null&&globalThis.clearInterval(e.checkTurnServersIntervalID),e.checkTurnServersIntervalID=void 0,e.emit(Le.TurnServersError,a,!0)):e.emit(Le.TurnServersError,a,!1)}}return n}})()}setFallbackICEServerAllowed(e){this.fallbackICEServerAllowed=e}isFallbackICEServerAllowed(){return this.fallbackICEServerAllowed}isSynapseAdministrator(){var e=Ie("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this.http.authedRequest(oe.Get,e,void 0,void 0,{prefix:""}).then(n=>n.admin)}whoisSynapseUser(e){var n=Ie("/_synapse/admin/v1/whois/$userId",{$userId:e});return this.http.authedRequest(oe.Get,n,void 0,void 0,{prefix:""})}deactivateSynapseUser(e){var n=Ie("/_synapse/admin/v1/deactivate/$userId",{$userId:e});return this.http.authedRequest(oe.Post,n,void 0,void 0,{prefix:""})}fetchClientWellKnown(){var e=this;return F(function*(){var n;e.clientWellKnownPromise=dt.getRawClientConfig((n=e.getDomain())!==null&&n!==void 0?n:void 0),e.clientWellKnown=yield e.clientWellKnownPromise,e.emit(Le.ClientWellKnown,e.clientWellKnown)})()}getClientWellKnown(){return this.clientWellKnown}waitForClientWellKnown(){if(!this.clientRunning)throw new Error("Client is not running");return this.clientWellKnownPromise}storeClientOptions(){var e=["boolean","string","number"],n=Object.entries(this.clientOpts).filter(r=>{var[i,s]=r;return e.includes(typeof s)}).reduce((r,i)=>{var[s,a]=i;return r[s]=a,r},{});return this.store.storeClientOptions(n)}_unstable_getSharedRooms(e){var n=this;return F(function*(){var r=yield n.doesServerSupportUnstableFeature(sz),i=yield n.doesServerSupportUnstableFeature(az),s=yield n.doesServerSupportUnstableFeature(oz);if(!r&&!i&&!s)throw Error("Server does not support the Mutual Rooms API");var a,o;s?(a="/uk.half-shot.msc2666/user/mutual_rooms",o={user_id:e}):(a=Ie("/uk.half-shot.msc2666/user/".concat(i?"mutual_rooms":"shared_rooms","/$userId"),{$userId:e}),o={});var l=[],c=null;do{var d={};c!=null&&s&&(d.batch_token=c);var f=yield n.http.authedRequest(oe.Get,a,Dr(Dr({},o),d),void 0,{prefix:Ur.Unstable});l.push(...f.joined),f.next_batch_token!==void 0?c=f.next_batch_token:c=null}while(c!=null);return l})()}getVersions(){var e=this;return F(function*(){if(e.serverVersionsPromise)return e.serverVersionsPromise;e.serverVersionsPromise=e.http.authedRequest(oe.Get,"/_matrix/client/versions",void 0,void 0,{prefix:""}).catch(r=>{throw e.serverVersionsPromise=void 0,r});var n=yield e.serverVersionsPromise;return e.canSupport=yield jhe(n),e.serverVersionsPromise})()}isVersionSupported(e){var n=this;return F(function*(){var{versions:r}=yield n.getVersions();return r&&r.includes(e)})()}doesServerSupportUnstableFeature(e){var n=this;return F(function*(){var r=yield n.getVersions();if(!r)return!1;var i=r.unstable_features;return i&&!!i[e]})()}doesServerForceEncryptionForPreset(e){var n=this;return F(function*(){var r=yield n.getVersions();if(!r)return!1;var i=r.unstable_features,s=e.includes("_chat")?e.substring(0,e.indexOf("_chat")):e;return i&&!!i["io.element.e2ee_forced.".concat(s)]})()}doesServerSupportThread(){var e=this;return F(function*(){if(yield e.isVersionSupported("v1.4"))return{threads:ji.Stable,list:ji.Stable,fwdPagination:ji.Stable};try{var[n,r,i,s,a,o]=yield Promise.all([e.doesServerSupportUnstableFeature("org.matrix.msc3440"),e.doesServerSupportUnstableFeature("org.matrix.msc3440.stable"),e.doesServerSupportUnstableFeature("org.matrix.msc3856"),e.doesServerSupportUnstableFeature("org.matrix.msc3856.stable"),e.doesServerSupportUnstableFeature("org.matrix.msc3715"),e.doesServerSupportUnstableFeature("org.matrix.msc3715.stable")]);return{threads:w7(r,n),list:w7(s,i),fwdPagination:w7(o,a)}}catch{return{threads:ji.None,list:ji.None,fwdPagination:ji.None}}})()}hasLazyLoadMembersEnabled(){var e;return!!((e=this.clientOpts)!==null&&e!==void 0&&e.lazyLoadMembers)}setCanResetTimelineCallback(e){this.canResetTimelineCallback=e}getCanResetTimelineCallback(){return this.canResetTimelineCallback}relations(e,n,r,i){var s=arguments,a=this;return F(function*(){var o,l,c=s.length>4&&s[4]!==void 0?s[4]:{dir:Ct.Backward},d=i?a.getEncryptedIfNeededEventType(e,i):null,[f,p]=yield Promise.all([a.fetchRoomEvent(e,n),a.fetchRelations(e,n,r,d,c)]),g=a.getEventMapper(),y=f?g(f):void 0,v=p.chunk.map(g);if(d===ee.RoomMessageEncrypted){var b=y?v.concat(y):v;yield Promise.all(b.map(C=>a.decryptEventIfNeeded(C))),i!==null&&(v=v.filter(C=>C.getType()===i))}return y&&r===Sn.Replace&&(v=v.filter(C=>C.getSender()===y.getSender())),{originalEvent:y??null,events:v,nextBatch:(o=p.next_batch)!==null&&o!==void 0?o:null,prevBatch:(l=p.prev_batch)!==null&&l!==void 0?l:null}})()}generateClientSecret(){return Ba(32)}decryptEventIfNeeded(e,n){return e.shouldAttemptDecryption()&&this.getCrypto()&&e.attemptDecryption(this.cryptoBackend,n),e.isBeingDecrypted()?e.getDecryptionPromise():Promise.resolve()}termsUrlForService(e,n){switch(e){case Xw.IS:return this.http.getUrl("/terms",void 0,pc.V2,n);case Xw.IM:return this.http.getUrl("/terms",void 0,"/_matrix/integrations/v1",n);default:throw new Error("Unsupported service type")}}getHomeserverUrl(){return this.baseUrl}getIdentityServerUrl(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r&&((e=this.idBaseUrl)!==null&&e!==void 0&&e.startsWith("http://")||(n=this.idBaseUrl)!==null&&n!==void 0&&n.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl}setIdentityServerUrl(e){this.idBaseUrl=fb(e),this.http.setIdBaseUrl(this.idBaseUrl)}getAccessToken(){return this.http.opts.accessToken||null}getRefreshToken(){var e;return(e=this.http.opts.refreshToken)!==null&&e!==void 0?e:null}setAccessToken(e){this.http.opts.accessToken=e,this.serverVersionsPromise=void 0}isLoggedIn(){return this.http.opts.accessToken!==void 0}makeTxnId(){return"m"+new Date().getTime()+"."+this.txnCtr++}isUsernameAvailable(e){return this.http.authedRequest(oe.Get,"/register/available",{username:e}).then(n=>n.available).catch(n=>n.errcode==="M_USER_IN_USE"?!1:Promise.reject(n))}register(e,n,r,i,s,a,o){r&&(i.session=r);var l={auth:i,refresh_token:!0};return e!=null&&(l.username=e),n!=null&&(l.password=n),a!=null&&(l.guest_access_token=a),o!=null&&(l.inhibit_login=o),this.registerRequest(l)}registerGuest(){var{body:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.registerRequest(e||{},"guest")}registerRequest(e,n){var r={};return n&&(r.kind=n),this.http.request(oe.Post,"/register",r,e)}refreshToken(e){var n=r=>this.http.authedRequest(oe.Post,"/refresh",void 0,{refresh_token:e},{prefix:r,inhibitLogoutEmit:!0});return n(Ur.V3).catch(r=>{if(r.errcode==="M_UNRECOGNIZED")return n(Ur.V1);throw r})}loginFlows(){return this.http.request(oe.Get,"/login")}login(e,n){return this.loginRequest(Dr(Dr({},n),{},{type:e})).then(r=>(r.access_token&&r.user_id&&(this.http.opts.accessToken=r.access_token,this.credentials={userId:r.user_id}),r))}loginWithPassword(e,n){return this.login("m.login.password",{user:e,password:n})}getCasLoginUrl(e){return this.getSsoLoginUrl(e,"cas")}getSsoLoginUrl(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"sso",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s="/login/"+n+"/redirect";r&&(s+="/"+r);var a={redirectUrl:e,[K2e.unstable]:i};return this.http.getUrl(s,a).href}loginWithToken(e){return this.login("m.login.token",{token:e})}loginRequest(e){var n=this;return F(function*(){return yield n.http.authedRequest(oe.Post,"/login",void 0,e)})()}logout(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:!1;return r&&(n.stopClient(),n.http.abort()),n.http.authedRequest(oe.Post,"/logout")})()}deactivateAccount(e,n){var r={};return e&&(r.auth=e),n!==void 0&&(r.erase=n),this.http.authedRequest(oe.Post,"/account/deactivate",void 0,r)}requestLoginToken(e){var n=this;return F(function*(){var r={auth:e};return n.http.authedRequest(oe.Post,"/login/get_token",void 0,r,{prefix:Ur.V1})})()}getFallbackAuthUrl(e,n){var r=Ie("/auth/$loginType/fallback/web",{$loginType:e});return this.http.getUrl(r,{session:n}).href}createRoom(e){var n=this;return F(function*(){var r,i=(e.invite_3pid||[]).filter(o=>!o.id_access_token);if(i.length>0&&(r=n.identityServer)!==null&&r!==void 0&&r.getAccessToken){var s=yield n.identityServer.getAccessToken();if(s)for(var a of i)a.id_access_token=s}return n.http.authedRequest(oe.Post,"/createRoom",void 0,e)})()}fetchRelations(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{dir:Ct.Backward},a=s;wn.hasServerSideFwdPaginationSupport===ji.Experimental&&(a=cD("dir","org.matrix.msc3715.dir",a)),this.canSupport.get($r.RelationsRecursion)===Hr.Unstable&&(a=cD("recurse","org.matrix.msc3981.recurse",a));var o=Iw(a),l="/rooms/$roomId/relations/$eventId";r!==null?(l+="/$relationType",i!==null&&(l+="/$eventType")):i!==null&&(this.logger.warn("eventType: ".concat(i,` ignored when fetching
            relations as relationType is null`)),i=null);var c=Ie(l+"?"+o,{$roomId:e,$eventId:n,$relationType:r,$eventType:i});return this.http.authedRequest(oe.Get,c,void 0,void 0,{prefix:Ur.V1})}roomState(e){var n=Ie("/rooms/$roomId/state",{$roomId:e});return this.http.authedRequest(oe.Get,n)}fetchRoomEvent(e,n){var r=Ie("/rooms/$roomId/event/$eventId",{$roomId:e,$eventId:n});return this.http.authedRequest(oe.Get,r)}members(e,n,r,i){var s={};n&&(s.membership=n),r&&(s.not_membership=r),i&&(s.at=i);var a=Iw(s),o=Ie("/rooms/$roomId/members?"+a,{$roomId:e});return this.http.authedRequest(oe.Get,o)}upgradeRoom(e,n){var r=Ie("/rooms/$roomId/upgrade",{$roomId:e});return this.http.authedRequest(oe.Post,r,void 0,{new_version:n})}getStateEvent(e,n,r){var i={$roomId:e,$eventType:n,$stateKey:r},s=Ie("/rooms/$roomId/state/$eventType",i);return r!==void 0&&(s=Ie(s+"/$stateKey",i)),this.http.authedRequest(oe.Get,s)}sendStateEvent(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a={$roomId:e,$eventType:n,$stateKey:i},o=Ie("/rooms/$roomId/state/$eventType",a);return i!==void 0&&(o=Ie(o+"/$stateKey",a)),this.http.authedRequest(oe.Put,o,void 0,r,s)}roomInitialSync(e,n){var r,i=Ie("/rooms/$roomId/initialSync",{$roomId:e});return this.http.authedRequest(oe.Get,i,{limit:(r=n==null?void 0:n.toString())!==null&&r!==void 0?r:"30"})}setRoomReadMarkersHttpRequest(e,n,r,i){var s=this;return F(function*(){var a=Ie("/rooms/$roomId/read_markers",{$roomId:e}),o={[Qi.FullyRead]:n,[Qi.Read]:r};return((yield s.doesServerSupportUnstableFeature("org.matrix.msc2285.stable"))||(yield s.isVersionSupported("v1.4")))&&(o[Qi.ReadPrivate]=i),s.http.authedRequest(oe.Post,a,void 0,o)})()}getJoinedRooms(){var e=Ie("/joined_rooms",{});return this.http.authedRequest(oe.Get,e)}getJoinedRoomMembers(e){var n=Ie("/rooms/$roomId/joined_members",{$roomId:e});return this.http.authedRequest(oe.Get,n)}publicRooms(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{server:n,limit:r,since:i}=e,s=z1e(e,V2e);if(Object.keys(s).length===0){var a={server:n,limit:r,since:i};return this.http.authedRequest(oe.Get,"/publicRooms",a)}else{var o={server:n},l=Dr({limit:r,since:i},s);return this.http.authedRequest(oe.Post,"/publicRooms",o,l)}}createAlias(e,n){var r=Ie("/directory/room/$alias",{$alias:e}),i={room_id:n};return this.http.authedRequest(oe.Put,r,void 0,i)}deleteAlias(e){var n=Ie("/directory/room/$alias",{$alias:e});return this.http.authedRequest(oe.Delete,n)}getLocalAliases(e){var n=Ie("/rooms/$roomId/aliases",{$roomId:e}),r=Ur.V3;return this.http.authedRequest(oe.Get,n,void 0,void 0,{prefix:r})}getRoomIdForAlias(e){var n=Ie("/directory/room/$alias",{$alias:e});return this.http.authedRequest(oe.Get,n)}getRoomDirectoryVisibility(e){var n=Ie("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(oe.Get,n)}setRoomDirectoryVisibility(e,n){var r=Ie("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(oe.Put,r,void 0,{visibility:n})}searchUserDirectory(e){var{term:n,limit:r}=e,i={search_term:n};return r!==void 0&&(i.limit=r),this.http.authedRequest(oe.Post,"/user_directory/search",void 0,i)}uploadContent(e,n){return this.http.uploadContent(e,n)}cancelUpload(e){return this.http.cancelUpload(e)}getCurrentUploads(){return this.http.getCurrentUploads()}getProfileInfo(e,n){var r=n?Ie("/profile/$userId/$info",{$userId:e,$info:n}):Ie("/profile/$userId",{$userId:e});return this.http.authedRequest(oe.Get,r)}doesServerSupportExtendedProfiles(){var e=this;return F(function*(){return e.doesServerSupportUnstableFeature(lz)})()}getExtendedProfileRequestPrefix(){var e=this;return F(function*(){return(yield e.doesServerSupportUnstableFeature("uk.tcpip.msc4133.stable"))?Ur.V3:"/_matrix/client/unstable/uk.tcpip.msc4133"})()}getExtendedProfile(e){var n=this;return F(function*(){if(!(yield n.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");return n.http.authedRequest(oe.Get,Ie("/profile/$userId",{$userId:e}),void 0,void 0,{prefix:yield n.getExtendedProfileRequestPrefix()})})()}getExtendedProfileProperty(e,n){var r=this;return F(function*(){if(!(yield r.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");var i=yield r.http.authedRequest(oe.Get,Ie("/profile/$userId/$key",{$userId:e,$key:n}),void 0,void 0,{prefix:yield r.getExtendedProfileRequestPrefix()});return i[n]})()}setExtendedProfileProperty(e,n){var r=this;return F(function*(){if(!(yield r.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");var i=r.getUserId();yield r.http.authedRequest(oe.Put,Ie("/profile/$userId/$key",{$userId:i,$key:e}),void 0,{[e]:n},{prefix:yield r.getExtendedProfileRequestPrefix()})})()}deleteExtendedProfileProperty(e){var n=this;return F(function*(){if(!(yield n.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");var r=n.getUserId();yield n.http.authedRequest(oe.Delete,Ie("/profile/$userId/$key",{$userId:r,$key:e}),void 0,void 0,{prefix:yield n.getExtendedProfileRequestPrefix()})})()}patchExtendedProfile(e){var n=this;return F(function*(){if(!(yield n.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");var r=n.getUserId();return n.http.authedRequest(oe.Patch,Ie("/profile/$userId",{$userId:r}),{},e,{prefix:yield n.getExtendedProfileRequestPrefix()})})()}setExtendedProfile(e){var n=this;return F(function*(){if(!(yield n.doesServerSupportExtendedProfiles()))throw new Error("Server does not support extended profiles");var r=n.getUserId();yield n.http.authedRequest(oe.Put,Ie("/profile/$userId",{$userId:r}),{},e,{prefix:yield n.getExtendedProfileRequestPrefix()})})()}getThreePids(){return this.http.authedRequest(oe.Get,"/account/3pid")}addThreePidOnly(e){var n=this;return F(function*(){var r="/account/3pid/add";return n.http.authedRequest(oe.Post,r,void 0,e)})()}bindThreePid(e){var n=this;return F(function*(){var r="/account/3pid/bind";return n.http.authedRequest(oe.Post,r,void 0,e)})()}unbindThreePid(e,n){var r=this;return F(function*(){var i="/account/3pid/unbind",s={medium:e,address:n,id_server:r.getIdentityServerUrl(!0)};return r.http.authedRequest(oe.Post,i,void 0,s)})()}deleteThreePid(e,n){var r="/account/3pid/delete";return this.http.authedRequest(oe.Post,r,void 0,{medium:e,address:n})}setPassword(e,n,r){var i="/account/password",s={auth:e,new_password:n,logout_devices:r};return this.http.authedRequest(oe.Post,i,void 0,s)}getDevices(){return this.http.authedRequest(oe.Get,"/devices")}getDevice(e){var n=Ie("/devices/$device_id",{$device_id:e});return this.http.authedRequest(oe.Get,n)}setDeviceDetails(e,n){var r=Ie("/devices/$device_id",{$device_id:e});return this.http.authedRequest(oe.Put,r,void 0,n)}deleteDevice(e,n){var r=Ie("/devices/$device_id",{$device_id:e}),i={};return n&&(i.auth=n),this.http.authedRequest(oe.Delete,r,void 0,i)}deleteMultipleDevices(e,n){var r={devices:e};n&&(r.auth=n);var i="/delete_devices";return this.http.authedRequest(oe.Post,i,void 0,r)}getPushers(){var e=this;return F(function*(){var n=yield e.http.authedRequest(oe.Get,"/pushers");return(yield e.doesServerSupportUnstableFeature("org.matrix.msc3881"))||(n.pushers=n.pushers.map(r=>(r.hasOwnProperty(Fw.name)||(r[Fw.name]=!0),r))),n})()}setPusher(e){var n="/pushers/set";return this.http.authedRequest(oe.Post,n,void 0,e)}removePusher(e,n){var r="/pushers/set",i={pushkey:e,app_id:n,kind:null};return this.http.authedRequest(oe.Post,r,void 0,i)}setLocalNotificationSettings(e,n){var r="".concat(qK.name,".").concat(e);return this.setAccountData(r,n)}getPushRules(){return this.http.authedRequest(oe.Get,"/pushrules/").then(e=>(this.setPushRules(e),this.pushRules))}setPushRules(e){this.pushRules=xo.rewriteDefaultRules(e,this.getUserId()),this.pushProcessor.updateCachedPushRuleKeys(this.pushRules)}addPushRule(e,n,r,i){var s=Ie("/pushrules/"+e+"/$kind/$ruleId",{$kind:n,$ruleId:r});return this.http.authedRequest(oe.Put,s,void 0,i)}deletePushRule(e,n,r){var i=Ie("/pushrules/"+e+"/$kind/$ruleId",{$kind:n,$ruleId:r});return this.http.authedRequest(oe.Delete,i)}setPushRuleEnabled(e,n,r,i){var s=Ie("/pushrules/"+e+"/$kind/$ruleId/enabled",{$kind:n,$ruleId:r});return this.http.authedRequest(oe.Put,s,void 0,{enabled:i})}setPushRuleActions(e,n,r,i){var s=Ie("/pushrules/"+e+"/$kind/$ruleId/actions",{$kind:n,$ruleId:r});return this.http.authedRequest(oe.Put,s,void 0,{actions:i})}search(e,n){var{body:r,next_batch:i}=e,s={};return i&&(s.next_batch=i),this.http.authedRequest(oe.Post,"/search",s,r,{abortSignal:n})}uploadKeysRequest(e,n){return this.http.authedRequest(oe.Post,"/keys/upload",void 0,e)}uploadKeySignatures(e){return this.http.authedRequest(oe.Post,"/keys/signatures/upload",void 0,e)}downloadKeysForUsers(e){var{token:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={device_keys:{}};return n!==void 0&&(r.token=n),e.forEach(i=>{r.device_keys[i]=[]}),this.http.authedRequest(oe.Post,"/keys/query",void 0,r)}claimOneTimeKeys(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"signed_curve25519",r=arguments.length>2?arguments[2]:void 0,i={};n===void 0&&(n="signed_curve25519");for(var[s,a]of e){var o=i[s]||{};x6(i,s,o),x6(o,a,n)}var l={one_time_keys:i};r&&(l.timeout=r);var c="/keys/claim";return this.http.authedRequest(oe.Post,c,void 0,l)}getKeyChanges(e,n){var r={from:e,to:n};return this.http.authedRequest(oe.Get,"/keys/changes",r)}uploadDeviceSigningKeys(e,n){var r=Object.assign({},n);return e&&Object.assign(r,{auth:e}),this.http.authedRequest(oe.Post,"/keys/device_signing/upload",void 0,r,{prefix:Ur.Unstable})}registerWithIdentityServer(e){if(!this.idBaseUrl)throw new Error("No identity server base URL set");var n=this.http.getUrl("/account/register",void 0,pc.V2,this.idBaseUrl);return this.http.requestOtherUrl(oe.Post,n,e)}requestEmailToken(e,n,r,i,s){var a={client_secret:n,email:e,send_attempt:r==null?void 0:r.toString()};return i&&(a.next_link=i),this.http.idServerRequest(oe.Post,"/validate/email/requestToken",a,pc.V2,s)}requestMsisdnToken(e,n,r,i,s,a){var o={client_secret:r,country:e,phone_number:n,send_attempt:i==null?void 0:i.toString()};return s&&(o.next_link=s),this.http.idServerRequest(oe.Post,"/validate/msisdn/requestToken",o,pc.V2,a)}submitMsisdnToken(e,n,r,i){var s={sid:e,client_secret:n,token:r};return this.http.idServerRequest(oe.Post,"/validate/msisdn/submitToken",s,pc.V2,i??void 0)}submitMsisdnTokenOtherUrl(e,n,r,i){var s={sid:n,client_secret:r,token:i};return this.http.requestOtherUrl(oe.Post,e,s)}getIdentityHashDetails(e){return this.http.idServerRequest(oe.Get,"/hash_details",void 0,pc.V2,e)}identityHashedLookup(e,n){var r=this;return F(function*(){var i={},s=yield r.getIdentityHashDetails(n);if(!s||!s.lookup_pepper||!s.algorithms)throw new Error("Unsupported identity server: bad response");i.pepper=s.lookup_pepper;var a={};if(s.algorithms.includes("sha256"))i.addresses=yield Promise.all(e.map(function(){var p=F(function*(g){var y=g[0].toLowerCase(),v=g[1].toLowerCase(),b=yield ZZ("".concat(y," ").concat(v," ").concat(i.pepper)),C=S9(b);return a[C]=g[0],C});return function(g){return p.apply(this,arguments)}}())),i.algorithm="sha256";else if(s.algorithms.includes("none"))i.addresses=e.map(p=>{var g=p[0].toLowerCase(),y=p[1].toLowerCase(),v="".concat(g," ").concat(y);return a[v]=p[0],v}),i.algorithm="none";else throw new Error("Unsupported identity server: unknown hash algorithm");var o=yield r.http.idServerRequest(oe.Post,"/lookup",i,pc.V2,n);if(!(o!=null&&o.mappings))return[];var l=[];for(var c of Object.keys(o.mappings)){var d=o.mappings[c],f=a[c];if(!f)throw new Error("Identity server returned more results than expected");l.push({address:f,mxid:d})}return l})()}lookupThreePid(e,n,r){var i=this;return F(function*(){var s=yield i.identityHashedLookup([[n,e]],r),a=s.find(l=>l.address===n);if(!a)return{};var o={address:n,medium:e,mxid:a.mxid};return o})()}bulkLookupThreePids(e,n){var r=this;return F(function*(){var i=yield r.identityHashedLookup(e.map(l=>[l[1],l[0]]),n),s=[],a=function*(c){var d=e.find(f=>f[1]===c.address);if(!d)throw new Error("Identity sever returned unexpected results");s.push([d[0],c.address,c.mxid])};for(var o of i)yield*a(o);return{threepids:s}})()}getIdentityAccount(e){return this.http.idServerRequest(oe.Get,"/account",void 0,pc.V2,e)}sendToDevice(e,n,r){var i=Ie("/sendToDevice/$eventType/$txnId",{$eventType:e,$txnId:r||this.makeTxnId()}),s={messages:Q1(n)},a=new Map;for(var[o,l]of n)a.set(o,Array.from(l.keys()));return this.logger.debug("PUT ".concat(i),a),this.http.authedRequest(oe.Put,i,void 0,s)}encryptAndSendToDevice(e,n,r){var i=this;return F(function*(){if(!i.cryptoBackend)throw new Error("Cannot encrypt to device event, your client does not support encryption.");var s=yield i.cryptoBackend.encryptToDeviceMessages(e,n,r);yield i.queueToDevice(s)})()}queueToDevice(e){return this.toDeviceMessageQueue.queueBatch(e)}getThirdpartyProtocols(){return this.http.authedRequest(oe.Get,"/thirdparty/protocols").then(e=>{if(!e||typeof e!="object")throw new Error("/thirdparty/protocols did not return an object: ".concat(e));return e})}getThirdpartyLocation(e,n){var r=Ie("/thirdparty/location/$protocol",{$protocol:e});return this.http.authedRequest(oe.Get,r,n)}getThirdpartyUser(e,n){var r=Ie("/thirdparty/user/$protocol",{$protocol:e});return this.http.authedRequest(oe.Get,r,n)}getTerms(e,n){var r=this.termsUrlForService(e,n);return this.http.requestOtherUrl(oe.Get,r)}agreeToTerms(e,n,r,i){var s=this.termsUrlForService(e,n),a={Authorization:"Bearer "+r};return this.http.requestOtherUrl(oe.Post,s,{user_accepts:i},{headers:a})}reportEvent(e,n,r,i){var s=Ie("/rooms/$roomId/report/$eventId",{$roomId:e,$eventId:n});return this.http.authedRequest(oe.Post,s,void 0,{score:r,reason:i})}reportRoom(e,n){var r=Ie("/rooms/$roomId/report",{$roomId:e});return this.http.authedRequest(oe.Post,r,void 0,{reason:n})}getRoomHierarchy(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0,a=Ie("/rooms/$roomId/hierarchy",{$roomId:e}),o={suggested_only:String(i),max_depth:r==null?void 0:r.toString(),from:s,limit:n==null?void 0:n.toString()};return this.http.authedRequest(oe.Get,a,o,void 0,{prefix:Ur.V1}).catch(l=>{if(l.errcode==="M_UNRECOGNIZED")return this.http.authedRequest(oe.Get,a,o,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc2946"});throw l})}unstableCreateFileTree(e){var n=this;return F(function*(){var{room_id:r}=yield n.createRoom({name:e,preset:T9.PrivateChat,power_level_content_override:Dr(Dr({},Ffe),{},{users:{[n.getUserId()]:100}}),creation_content:{[M6]:_2.Space},initial_state:[{type:Aw.name,state_key:Dw.name,content:{[Nw.name]:!0}},{type:ee.RoomEncryption,state_key:"",content:{algorithm:"m.megolm.v1.aes-sha2"}}]});return new SU(n,r)})()}unstableGetFileTreeSpace(e){var n,r,i=this.getRoom(e);if((i==null?void 0:i.getMyMembership())!==Ke.Join)return null;var s=i.currentState.getStateEvents(ee.RoomCreate,""),a=i.currentState.getStateEvents(Aw.name,Dw.name);if(!s)throw new Error("Expected single room create event");return!(a!=null&&(n=a.getContent())!==null&&n!==void 0&&n[Nw.name])||((r=s.getContent())===null||r===void 0?void 0:r[M6])!==_2.Space?null:new SU(this,e)}slidingSync(e,n,r){var i={};e.pos&&(i.pos=e.pos,delete e.pos),e.timeout&&(i.timeout=e.timeout,delete e.timeout);var s=e.clientTimeout;return delete e.clientTimeout,this.http.authedRequest(oe.Post,"/sync",i,e,{prefix:"/_matrix/client/unstable/org.matrix.simplified_msc3575",baseUrl:n,localTimeoutMs:s,abortSignal:r})}supportsThreads(){var e;return((e=this.clientOpts)===null||e===void 0?void 0:e.threadSupport)||!1}supportsIntentionalMentions(){return this.canSupport.get($r.IntentionalMentions)!==Hr.Unsupported}getRoomSummary(e,n){var r=this;return F(function*(){var i={prefix:"/_matrix/client/unstable/im.nheko.summary"};try{var s=Ie("/summary/$roomid",{$roomid:e});return yield r.http.authedRequest(oe.Get,s,{via:n},void 0,i)}catch(o){if(o instanceof On&&o.errcode==="M_UNRECOGNIZED"){var a=Ie("/rooms/$roomid/summary",{$roomid:e});return yield r.http.authedRequest(oe.Get,a,{via:n},void 0,i)}else throw o}})()}processThreadEvents(e,n,r){e.processThreadedEvents(n,r)}processThreadRoots(e,n,r){this.supportsThreads()&&e.processThreadRoots(n,r)}processBeaconEvents(e,n){this.processAggregatedTimelineEvents(e,n)}processAggregatedTimelineEvents(e,n){n!=null&&n.length&&e&&(e.currentState.processBeaconEvents(n,this),e.processPollEvents(n))}whoami(){var e=this;return F(function*(){return e.http.authedRequest(oe.Get,"/account/whoami")})()}timestampToEvent(e,n,r){var i=this;return F(function*(){var s=Ie("/rooms/$roomId/timestamp_to_event",{$roomId:e}),a={ts:n.toString(),dir:r};try{return yield i.http.authedRequest(oe.Get,s,a,void 0,{prefix:Ur.V1})}catch(o){if(o.errcode==="M_UNRECOGNIZED"&&(o.httpStatus===400||o.httpStatus===404||o.httpStatus===405))return yield i.http.authedRequest(oe.Get,s,a,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc3030"});throw o}})()}getAuthIssuer(){var e=this;return F(function*(){return e.http.request(oe.Get,"/auth_issuer",void 0,void 0,{prefix:Ur.Unstable+"/org.matrix.msc2965"})})()}getAuthMetadata(){var e=this;return F(function*(){var n;try{n=yield e.http.request(oe.Get,"/auth_metadata",void 0,void 0,{prefix:Ur.Unstable+"/org.matrix.msc2965"})}catch(i){if(i instanceof On&&i.errcode==="M_UNRECOGNIZED"){var{issuer:r}=yield e.getAuthIssuer();return ix(r)}throw i}return sx(n)})()}}P(M9,"RESTORE_BACKUP_ERROR_BAD_KEY","RESTORE_BACKUP_ERROR_BAD_KEY");function jU(t){return Object.fromEntries(Object.entries(t).map(e=>{var[n,r]=e;return["".concat(Il,".").concat(n),r]}))}function cz(t,e){var n,r=t.getUserId(),i=e.getId(),s=t.getRoom(e.getRoomId());if(!(!s||!r||!i)){if(!s.findEventById(i)){A.info("Decrypted event ".concat(e.getId()," is not in room ").concat(s.roomId,": ignoring"));return}var a=!!e.threadRootId&&!e.isThreadRoot,o;if(a){var l=s.getThread(e.threadRootId);o=l?l.hasUserReadEvent(r,i):!0}else o=s.hasUserReadEvent(r,i);if(!o){var c=t.getPushActionsForEvent(e,!0),d=!!(c!=null&&(n=c.tweaks)!==null&&n!==void 0&&n.highlight);if(d){var f=s.getUnreadCountForEventContext(Zt.Highlight,e)+1;a?s.setThreadUnreadNotificationCount(e.threadRootId,Zt.Highlight,f):s.setUnreadNotificationCount(Zt.Highlight,f)}var p=!!(c!=null&&c.notify);if(p){var g=s.getUnreadCountForEventContext(Zt.Total,e)+1;a?s.setThreadUnreadNotificationCount(e.threadRootId,Zt.Total,g):s.setUnreadNotificationCount(Zt.Total,g)}}}}function sm(t){return eg(t)?zg:t.threadRootId}function eg(t){if(!t.threadRootId||t.isThreadRoot)return!0;if(!t.isRelation())return A.warn("Event is not a relation or a thread root, but still has a threadRootId! id=".concat(t.getId())),!0;if(t.isRelation(un.name))return!1;var e=t.relationEventId===t.threadRootId;return e}function HU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xi=function(t){return t.New="Thread.new",t.Update="Thread.update",t.NewReply="Thread.newReply",t.ViewThread="Thread.viewThread",t.Delete="Thread.delete",t}({}),ji=function(t){return t[t.None=0]="None",t[t.Experimental=1]="Experimental",t[t.Stable=2]="Stable",t}({});function w7(t,e){return t?ji.Stable:e?ji.Experimental:ji.None}class wn extends gZ{constructor(e,n,r){var i,s;if(super(),i=this,this.id=e,this.rootEvent=n,P(this,"timelineSet",void 0),P(this,"_currentUserParticipated",!1),P(this,"reEmitter",void 0),P(this,"lastEvent",void 0),P(this,"replyCount",0),P(this,"lastPendingEvent",void 0),P(this,"pendingReplyCount",0),P(this,"room",void 0),P(this,"client",void 0),P(this,"pendingEventOrdering",void 0),P(this,"processRootEventPromise",void 0),P(this,"initialEventsFetched",!wn.hasServerSideSupport),P(this,"initalEventFetchProm",void 0),P(this,"replayEvents",[]),P(this,"onTimelineReset",F(function*(){yield i.processRootEventPromise,i.processRootEventPromise=void 0})),P(this,"onBeforeRedaction",(a,o)=>{a!=null&&a.isRelation(un.name)&&this.room.eventShouldLiveIn(a).threadId===this.id&&a.getId()!==this.id&&!o.status&&(this.replyCount--,this.updatePendingReplyCount(),this.emit(Xi.Update,this))}),P(this,"onRedaction",function(){var a=F(function*(o,l,c){if(c===i.id)if(i.replyCount<=0){for(var d of i.timeline)i.clearEventMetadata(d);i.lastEvent=i.rootEvent,i._currentUserParticipated=!1,i.emit(Xi.Delete,i)}else{var f;((f=i.lastEvent)===null||f===void 0?void 0:f.getId())===o.getAssociatedId()&&(yield i.processRootEventPromise,i.processRootEventPromise=void 0),yield i.updateThreadMetadata()}});return function(o,l,c){return a.apply(this,arguments)}}()),P(this,"onTimelineEvent",(a,o,l)=>{if(!l){var c=a.getSender();c&&o&&this.shouldSendLocalEchoReceipt(c,a)&&o.addLocalEchoReceipt(c,a,Qi.Read),a.getId()!==this.id&&a.isRelation(un.name)&&this.replyCount++}this.onEcho(a,l??!1)}),P(this,"onLocalEcho",a=>{this.onEcho(a,!1)}),P(this,"onEcho",function(){var a=F(function*(o,l){o.threadRootId===i.id&&i.lastEvent!==o&&(yield i.updateThreadMetadata(),o.isRelation(un.name)&&(l||(i.lastEvent=void 0,i.emit(Xi.NewReply,i,o))))});return function(o,l){return a.apply(this,arguments)}}()),this.setMaxListeners(1e3),!(r!=null&&r.room))throw new Error("element-web#22141: A thread requires a room in order to function");this.room=r.room,this.client=r.client,this.pendingEventOrdering=(s=r.pendingEventOrdering)!==null&&s!==void 0?s:im.Chronological,this.timelineSet=new a2(this.room,{timelineSupport:!0,pendingEvents:!0},this.client,this),this.reEmitter=new Fm(this),this.reEmitter.reEmit(this.timelineSet,[xe.Timeline,xe.TimelineReset]),this.room.on($t.BeforeRedaction,this.onBeforeRedaction),this.room.on(xe.Redaction,this.onRedaction),this.room.on(xe.LocalEchoUpdated,this.onLocalEcho),this.room.on(xe.TimelineReset,this.onTimelineReset),this.timelineSet.on(xe.Timeline,this.onTimelineEvent),this.processReceipts(r.receipts),this.updateThreadMetadata(),this.setEventMetadata(this.rootEvent)}fetchRootEvent(){var e=this;return F(function*(){try{var n=yield e.client.fetchRoomEvent(e.roomId,e.id),r=e.client.getEventMapper();e.rootEvent=r(n)}catch(i){A.error("Failed to fetch thread root to construct thread with",i)}yield e.processEvent(e.rootEvent)})()}static setServerSideSupport(e){wn.hasServerSideSupport=e,e!==ji.Stable&&(k2.setPreferUnstable(!0),T2.setPreferUnstable(!0),un.setPreferUnstable(!0))}static setServerSideListSupport(e){wn.hasServerSideListSupport=e}static setServerSideFwdPaginationSupport(e){wn.hasServerSideFwdPaginationSupport=e}shouldSendLocalEchoReceipt(e,n){var r,i=(r=this.client.canSupport.get($r.RelationsRecursion))!==null&&r!==void 0?r:Hr.Unsupported;if(i===Hr.Unsupported){var s,a=(s=this.getReadReceiptForUserId(e))===null||s===void 0?void 0:s.eventId;if(a){var o=this.findEventById(a);if(o&&o.getTs()>n.getTs())return!1}}return!0}get roomState(){return this.room.getLiveTimeline().getState(Me.FORWARDS)}addEventToTimeline(e,n){this.findEventById(e.getId())||this.timelineSet.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:n,fromCache:!1,roomState:this.roomState,addToState:!1})}insertEventIntoTimeline(e){var n=e.getId();n&&(this.findEventById(n)||this.timelineSet.insertEventIntoTimeline(e,this.liveTimeline,this.roomState,!1))}addEvents(e,n){e.forEach(r=>this.addEvent(r,n,!1)),this.updateThreadMetadata()}addEvent(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setEventMetadata(e);var i=this.lastReply(),s=!i||e.localTimestamp>=i.localTimestamp;if(!wn.hasServerSideSupport)this.addEventToTimeline(e,n),this.client.decryptEventIfNeeded(e);else if(e.isRelation(Sn.Annotation)||e.isRelation(Sn.Replace)){this.addRelatedThreadEvent(e,n);return}else!n&&s?(this.addEventToTimeline(e,!1),this.fetchEditsWhereNeeded(e)):n?this.addEventToTimeline(e,n):this.insertEventIntoTimeline(e);e.getId()!==this.id&&e.isRelation(un.name)&&!n&&s&&(this.lastEvent=void 0),r&&(this.emit(Xi.NewReply,this,e),this.updateThreadMetadata())}addRelatedThreadEvent(e,n){var r,i;if(this.initialEventsFetched){var a,o=(a=this.client.canSupport.get($r.RelationsRecursion))!==null&&a!==void 0?a:Hr.Unsupported;o===Hr.Unsupported?this.insertEventIntoTimeline(e):this.addEventToTimeline(e,n)}else{var s;(s=this.replayEvents)===null||s===void 0||s.push(e)}(r=this.timelineSet.relations)===null||r===void 0||r.aggregateParentEvent(e),(i=this.timelineSet.relations)===null||i===void 0||i.aggregateChildEvent(e,this.timelineSet)}processEvent(e){var n=this;return F(function*(){e&&(n.setEventMetadata(e),yield n.fetchEditsWhereNeeded(e))})()}processReceipts(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];for(var{eventId:n,receiptType:r,userId:i,receipt:s,synthetic:a}of e)this.addReceiptToStructure(n,r,i,s,a)}getRootEventBundledRelationship(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.rootEvent;return e==null?void 0:e.getServerAggregatedRelation(un.name)}processRootEvent(){var e=this;return F(function*(){var n=e.getRootEventBundledRelationship();if(wn.hasServerSideSupport&&n){e.replyCount=n.count,e._currentUserParticipated=!!n.current_user_participated;var r=e.client.getEventMapper();e.lastEvent=r($U($U({},n.latest_event),{},{room_id:e.roomId})),e.updatePendingReplyCount(),yield e.processEvent(e.lastEvent)}})()}updatePendingReplyCount(){var e=this.pendingEventOrdering===im.Detached?this.room.getPendingEvents():this.events,n=e.filter(r=>{var i;return r.threadRootId===this.id&&r.isRelation(un.name)&&r.status!==null&&r.getId()!==((i=this.lastEvent)===null||i===void 0?void 0:i.getId())});this.lastPendingEvent=n.length?n[n.length-1]:void 0,this.pendingReplyCount=n.length}resetLiveTimeline(e,n){var r=this;return F(function*(){var i=r.liveTimeline;r.timelineSet.resetLiveTimeline(e??void 0,n??void 0);var s=r.liveTimeline,a,o;if(e){var l=yield r.client.createMessagesRequest(r.roomId,e,1,Ct.Forward);a=l.end}if(n){var c=yield r.client.createMessagesRequest(r.roomId,n,1,Ct.Backward);o=c.start}n&&i.getPaginationToken(Ct.Forward)===n&&i.setPaginationToken(o??null,Ct.Forward),e&&s.getPaginationToken(Ct.Backward)===e&&s.setPaginationToken(a??null,Ct.Backward)})()}updateThreadFromRootEvent(){var e=this;return F(function*(){wn.hasServerSideSupport&&(!e.initialEventsFetched&&!e.lastEvent&&(yield e.processRootEvent()),yield e.fetchRootEvent()),yield e.processRootEvent()})()}updateThreadMetadata(){var e=this;return F(function*(){if(e.updatePendingReplyCount(),e.processRootEventPromise||(e.processRootEventPromise=e.updateThreadFromRootEvent()),yield e.processRootEventPromise,!e.initialEventsFetched)if(e.initalEventFetchProm)yield e.initalEventFetchProm;else try{e.timelineSet.resetLiveTimeline(),e.replyCount===0&&e.rootEvent?(e.timelineSet.addEventsToTimeline([e.rootEvent],!0,!1,e.liveTimeline,null),e.liveTimeline.setPaginationToken(null,Ct.Backward)):(e.initalEventFetchProm=e.client.paginateEventTimeline(e.liveTimeline,{backwards:!0}),yield e.initalEventFetchProm),e.initialEventsFetched=!0;for(var n of e.replayEvents)e.addEvent(n,!1);e.replayEvents=null,e.emit(xe.TimelineReset,e.room,e.timelineSet,!0)}catch(r){A.error("Failed to load start of newly created thread: ",r),e.initialEventsFetched=!1}e.emit(Xi.Update,e)})()}fetchEditsWhereNeeded(){var e=arguments,n=this;return F(function*(){var r,i=(r=n.client.canSupport.get($r.RelationsRecursion))!==null&&r!==void 0?r:Hr.Unsupported;if(i===Hr.Unsupported){for(var s=e.length,a=new Array(s),o=0;o<s;o++)a[o]=e[o];return Promise.all(a.filter(Z2e).map(function(){var l=F(function*(c){try{var d=yield n.client.relations(n.roomId,c.getId(),Sn.Replace,c.getType(),{limit:1});if(d.events.length){var f=d.events[0];c.makeReplaced(f),n.insertEventIntoTimeline(f)}}catch(p){A.error("Failed to load edits for encrypted thread event",p)}});return function(c){return l.apply(this,arguments)}}()))}})()}setEventMetadata(e){e&&(Me.setEventMetadata(e,this.roomState,!1),e.setThread(this))}clearEventMetadata(e){if(e){var n;e.setThread(void 0),(n=e.event)===null||n===void 0||(n=n.unsigned)===null||n===void 0||(n=n["m.relations"])===null||n===void 0||delete n[un.name]}}findEventById(e){return this.timelineSet.findEventById(e)}lastReply(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i=>i.isRelation(un.name),n=this.timeline.length-1;n>=0;n--){var r=this.timeline[n];if(e(r))return r}return null}get roomId(){return this.room.roomId}get length(){return this.replyCount+this.pendingReplyCount}get replyToEvent(){var e,n;return(e=(n=this.lastPendingEvent)!==null&&n!==void 0?n:this.lastEvent)!==null&&e!==void 0?e:this.lastReply()}get timeline(){return this.events}get events(){return this.liveTimeline.getEvents()}has(e){return this.timelineSet.findEventById(e)instanceof $i}get hasCurrentUserParticipated(){return this._currentUserParticipated}get liveTimeline(){return this.timelineSet.getLiveTimeline()}getUnfilteredTimelineSet(){return this.timelineSet}addReceipt(e,n){throw new Error("Unsupported function on the thread model")}getEventReadUpTo(e,n){var r=e===this.client.getUserId(),i=this.timeline[this.timeline.length-1];if(r&&i){var s=i.getTs()<this.room.getOldestThreadedReceiptTs(),a=i.getId();if(s&&a)return a}var o=super.getEventReadUpTo(e,n);if(i){var l=this.room.getLastUnthreadedReceiptFor(e);if(!l)return o;for(var c=((d=this.timeline)===null||d===void 0?void 0:d.length)-1;c>=0;--c){var d,f,p=this.timeline[c];if(p.getId()===o)return o;if(p.getTs()<l.ts)return(f=p.getId())!==null&&f!==void 0?f:o}}return o}hasUserReadEvent(e,n){if(e===this.client.getUserId()){var r,i,s,a,o,l,c=((r=(i=this.lastReply())===null||i===void 0?void 0:i.getTs())!==null&&r!==void 0?r:0)<this.room.getOldestThreadedReceiptTs(),d=(s=(a=this.room.getLastUnthreadedReceiptFor(e))===null||a===void 0?void 0:a.ts)!==null&&s!==void 0?s:0,f=((o=this===null||this===void 0||(l=this.lastReply())===null||l===void 0?void 0:l.getTs())!==null&&o!==void 0?o:0)<d;if(c||f)return!0}return this.room.hasUserReadEvent(e,n)}setUnread(e,n){return this.room.setThreadUnreadNotificationCount(this.id,e,n)}getLastUnthreadedReceiptFor(e){return this.room.getLastUnthreadedReceiptFor(e)}}P(wn,"hasServerSideSupport",ji.None);P(wn,"hasServerSideListSupport",ji.None);P(wn,"hasServerSideFwdPaginationSupport",ji.None);function Z2e(t){return t.isEncrypted()&&(t.isRelation(un.name)||t.isThreadRoot)}var k2=new g9("related_by_senders","io.element.relation_senders"),T2=new g9("related_by_rel_types","io.element.relation_types"),un=new g9("m.thread","io.element.thread"),Ro=function(t){return t[t.My=0]="My",t[t.All=1]="All",t}({});function uz(t){switch(t){case Ro.My:return"participated";default:return"all"}}class VU extends Error{constructor(e,n,r){super(n),this.code=e,P(this,"detailedString",void 0),this.name="DecryptionError",this.detailedString=z2e(this,r)}}function z2e(t,e){var n=t.name+"[msg: "+t.message;return e&&(n+=", "+Object.keys(e).map(r=>r+": "+e[r]).join(", ")),n+="]",n}var BU=Object.freeze({visible:!0}),$t=function(t){return t.Decrypted="Event.decrypted",t.BeforeRedaction="Event.beforeRedaction",t.VisibilityChange="Event.visibilityChange",t.LocalEventIdReplaced="Event.localEventIdReplaced",t.Status="Event.status",t.Replaced="Event.replaced",t.RelationsCreated="Event.relationsCreated",t.SentinelUpdated="Event.sentinelUpdated",t}({});class $i extends Un{setMetadata(e,n){var r,i,s=this.isState()&&this.getType()===ee.RoomMember&&this.getSender()===this.getStateKey(),a=!1;if(s||!((r=this.sender)!==null&&r!==void 0&&(r=r.events)!==null&&r!==void 0&&r.member)){var o=e.getSentinelMember(this.getSender());o!==this.sender&&(a=!0),this.sender=o}if(s||!((i=this.target)!==null&&i!==void 0&&(i=i.events)!==null&&i!==void 0&&i.member)&&this.getType()===ee.RoomMember){var l=e.getSentinelMember(this.getStateKey());l!==this.target&&(a=!0),this.target=l}this.isState()&&n&&(this.forwardLooking=!1),a&&this.emit($t.SentinelUpdated)}constructor(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.event=n,P(this,"pushDetails",{}),P(this,"_replacingEvent",null),P(this,"_localRedactionEvent",null),P(this,"_isCancelled",!1),P(this,"clearEvent",void 0),P(this,"visibility",BU),P(this,"_hasCachedExtEv",!1),P(this,"_cachedExtEv",void 0),P(this,"_decryptionFailureReason",null),P(this,"senderCurve25519Key",null),P(this,"claimedEd25519Key",null),P(this,"forwardingCurve25519KeyChain",[]),P(this,"untrusted",null),P(this,"decryptionPromise",null),P(this,"retryDecryption",!1),P(this,"txnId",void 0),P(this,"thread",void 0),P(this,"threadId",void 0),P(this,"localTimestamp",void 0),P(this,"sender",null),P(this,"target",null),P(this,"status",null),P(this,"error",null),P(this,"forwardLooking",!0),P(this,"reEmitter",void 0),["state_key","type","sender","room_id","membership"].forEach(i=>{typeof n[i]=="string"&&(n[i]=hb(n[i]))}),["membership","avatar_url","displayname"].forEach(i=>{var s;typeof((s=n.content)===null||s===void 0?void 0:s[i])=="string"&&(n.content[i]=hb(n.content[i]))}),["rel_type"].forEach(i=>{var s;typeof((s=n.content)===null||s===void 0||(s=s["m.relates_to"])===null||s===void 0?void 0:s[i])=="string"&&(n.content["m.relates_to"][i]=hb(n.content["m.relates_to"][i]))}),this.txnId=n.txn_id;var r=this.getAge();this.localTimestamp=r!==void 0?Date.now()-r:(e=this.getTs())!==null&&e!==void 0?e:Date.now(),this.reEmitter=new Fm(this)}get unstableExtensibleEvent(){return this._hasCachedExtEv||(this._cachedExtEv=$s.ExtensibleEvents.parse(this.getEffectiveEvent())),this._cachedExtEv}invalidateExtensibleEvent(){this._hasCachedExtEv=!1}getEffectiveEvent(){var e=Object.assign({},this.getContent());if(this.getWireType()===ee.RoomMessageEncrypted)for(var[n,r]of Object.entries(this.getWireContent()))["algorithm","ciphertext","device_id","sender_key","session_id"].includes(n)||e[n]===void 0&&(e[n]=r);return Object.assign({},this.event,this.clearEvent,{content:e})}getId(){return this.event.event_id}getSender(){return this.event.sender}getType(){return this.clearEvent?this.clearEvent.type:this.event.type}getWireType(){return this.event.type}getRoomId(){return this.event.room_id}getTs(){return this.event.origin_server_ts}getDate(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null}getDetails(){var e=this.getRoomId();if(e){var n;return"id=".concat(this.getId()," type=").concat(this.getWireType()," sender=").concat(this.getSender()," room=").concat(e," ts=").concat((n=this.getDate())===null||n===void 0?void 0:n.toISOString())}else{var r=this.getContent()[C9];return"msgid=".concat(r," type=").concat(this.getWireType()," sender=").concat(this.getSender())}}getOriginalContent(){var e;if(this._localRedactionEvent)return{};if(this.clearEvent){var n;return(n=this.clearEvent.content)!==null&&n!==void 0?n:{}}return(e=this.event.content)!==null&&e!==void 0?e:{}}getContent(){if(this._localRedactionEvent)return{};if(this._replacingEvent){var e;return(e=this._replacingEvent.getContent()["m.new_content"])!==null&&e!==void 0?e:{}}else return this.getOriginalContent()}getWireContent(){return this.event.content||{}}get threadRootId(){var e;if(!this.isState()){var n=(e=this.getWireContent())===null||e===void 0?void 0:e["m.relates_to"];if((n==null?void 0:n.rel_type)===un.name)return n.event_id;if(this.thread)return this.thread.id;if(this.threadId!==void 0)return this.threadId;var r=this.getUnsigned();if(typeof r[P6.name]=="string")return r[P6.name]}}get isThreadRoot(){if(this.isState())return!1;var e=this.getServerAggregatedRelation(un.name);return!!e||this.threadRootId===this.getId()}get replyEventId(){var e;return(e=this.getWireContent()["m.relates_to"])===null||e===void 0||(e=e["m.in_reply_to"])===null||e===void 0?void 0:e.event_id}get relationEventId(){var e;return(e=this.getWireContent())===null||e===void 0||(e=e["m.relates_to"])===null||e===void 0?void 0:e.event_id}getPrevContent(){return this.getUnsigned().prev_content||{}}getDirectionalContent(){return this.forwardLooking?this.getContent():this.getPrevContent()}getAge(){return this.getUnsigned().age}getLocalAge(){return Date.now()-this.localTimestamp}getStateKey(){return this.event.state_key}isState(){return this.event.state_key!==void 0}getMembershipAtEvent(){var e=this.getUnsigned();return GK.findIn(e)}makeEncrypted(e,n,r,i){this.clearEvent={type:this.event.type,content:this.event.content},this.event.type=e,this.event.content=n,this.senderCurve25519Key=r,this.claimedEd25519Key=i}isBeingDecrypted(){return this.decryptionPromise!=null}getDecryptionPromise(){return this.decryptionPromise}isDecryptionFailure(){return this._decryptionFailureReason!==null}get decryptionFailureReason(){return this._decryptionFailureReason}get isEncryptedDisabledForUnverifiedDevices(){return this.decryptionFailureReason===IU.MEGOLM_KEY_WITHHELD_FOR_UNVERIFIED_DEVICE}shouldAttemptDecryption(){return!(this.isRedacted()||this.isBeingDecrypted()||this.clearEvent||!this.isEncrypted())}attemptDecryption(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:{};if(!r.isEncrypted())throw new Error("Attempt to decrypt event which isn't encrypted");var s=r.clearEvent&&!r.isDecryptionFailure(),a=i.forceRedecryptIfUntrusted&&r.isKeySourceUntrusted();if(s&&!a)throw new Error("Attempt to decrypt event which has already been decrypted");return r.decryptionPromise?(A.log("Event ".concat(r.getId()," already being decrypted; queueing a retry")),r.retryDecryption=!0,r.decryptionPromise):(r.decryptionPromise=r.decryptionLoop(e,i),r.decryptionPromise)})()}getKeyRequestRecipients(e){var n=[{userId:e,deviceId:"*"}];return n}decryptionLoop(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:{};for(yield Promise.resolve();;){r.retryDecryption=!1;var s=void 0;try{var a=yield e.decryptEvent(r);i.isRetry===!0&&A.info("Decrypted event on retry (".concat(r.getDetails(),")")),r.setClearData(a),r._decryptionFailureReason=null}catch(l){var o=l instanceof VU?l.detailedString:String(l);if(s=l,r.retryDecryption){A.log("Error decrypting event (".concat(r.getDetails(),"), but retrying: ").concat(o));continue}A.warn("Error decrypting event (".concat(r.getDetails(),"): ").concat(o)),r.setClearDataForDecryptionFailure(String(l)),r._decryptionFailureReason=l instanceof VU?l.code:IU.UNKNOWN_ERROR}r.decryptionPromise=null,r.retryDecryption=!1,r.setPushDetails(),i.emit!==!1&&r.emit($t.Decrypted,r,s);return}})()}setClearData(e){var n,r;this.clearEvent=e.clearEvent,this.senderCurve25519Key=(n=e.senderCurve25519Key)!==null&&n!==void 0?n:null,this.claimedEd25519Key=(r=e.claimedEd25519Key)!==null&&r!==void 0?r:null,this.forwardingCurve25519KeyChain=e.forwardingCurve25519KeyChain||[],this.untrusted=e.untrusted||!1,this.invalidateExtensibleEvent()}setClearDataForDecryptionFailure(e){this.clearEvent={type:ee.RoomMessage,content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: ".concat(e," **")}},this.senderCurve25519Key=null,this.claimedEd25519Key=null,this.forwardingCurve25519KeyChain=[],this.untrusted=!1,this.invalidateExtensibleEvent()}getClearContent(){return this.clearEvent?this.clearEvent.content:null}isEncrypted(){return!this.isState()&&this.event.type===ee.RoomMessageEncrypted}getSenderKey(){return this.senderCurve25519Key}getKeysClaimed(){return this.claimedEd25519Key?{ed25519:this.claimedEd25519Key}:{}}getClaimedEd25519Key(){return this.claimedEd25519Key}getForwardingCurve25519KeyChain(){return this.forwardingCurve25519KeyChain}isKeySourceUntrusted(){return!!this.untrusted}getUnsigned(){return this.event.unsigned||{}}setUnsigned(e){this.event.unsigned=e}unmarkLocallyRedacted(){var e=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=void 0),!!e}markLocallyRedacted(e){this._localRedactionEvent||(this.emit($t.BeforeRedaction,this,e),this._localRedactionEvent=e,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event)}applyVisibilityEvent(e){var n,r,i=(n=e==null?void 0:e.visible)!==null&&n!==void 0?n:!0,s=(r=e==null?void 0:e.reason)!==null&&r!==void 0?r:null,a=!1;(this.visibility.visible!==i||!this.visibility.visible&&this.visibility.reason!==s)&&(a=!0),a&&(i?this.visibility=BU:this.visibility=Object.freeze({visible:!1,reason:s}),this.emit($t.VisibilityChange,this,i))}messageVisibility(){return this.visibility}makeRedacted(e,n){if(!e.event)throw new Error("invalid redactionEvent in makeRedacted");this._localRedactionEvent=null,this.emit($t.BeforeRedaction,this,e),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event;for(var r in this.event)this.event.hasOwnProperty(r)&&!W2e.has(r)&&delete this.event[r];this.isEncrypted()&&(this.clearEvent=void 0);var i=this.getType()in qU?qU[this.getType()]:{},s=this.getContent();for(var a in s)s.hasOwnProperty(a)&&!i[a]&&delete s[a];!this.isThreadRoot&&this.threadRootId&&this.threadRootId!==this.getId()&&(this.moveAllRelatedToMainTimeline(n),e.moveToMainTimeline(n)),this.invalidateExtensibleEvent()}moveAllRelatedToMainTimeline(e){var n=this.thread;if(this.moveToMainTimeline(e),n)for(var r of n.events){var i;((i=r.getRelation())===null||i===void 0?void 0:i.event_id)===this.getId()&&r.moveAllRelatedToMainTimeline(e)}}moveToMainTimeline(e){var n;(n=this.thread)===null||n===void 0||n.timelineSet.removeEvent(this.getId()),this.setThread(void 0);var r=e.getLiveTimeline();r.getTimelineSet().insertEventIntoTimeline(this,r,r.getState(Me.FORWARDS),!1)}isRedacted(){return!!this.getUnsigned().redacted_because}isRedaction(){return this.getType()===ee.RoomRedaction}asVisibilityChange(){if(!X1.matches(this.getType()))return null;var e=this.getRelation();if(!e||e.rel_type!="m.reference")return null;var n=e.event_id;if(!n)return null;var r=this.getWireContent(),i=!!r.visible,s=r.reason;return s&&typeof s!="string"?null:{visible:i,reason:s,eventId:n}}isVisibilityEvent(){return X1.matches(this.getType())}getRedactionEvent(){var e,n;if(!this.isRedacted())return null;if((e=this.clearEvent)!==null&&e!==void 0&&e.unsigned){var r,i;return(r=(i=this.clearEvent)===null||i===void 0?void 0:i.unsigned.redacted_because)!==null&&r!==void 0?r:null}else return(n=this.event.unsigned)!==null&&n!==void 0&&n.redacted_because?this.event.unsigned.redacted_because:{}}getPushActions(){return this.pushDetails.actions||null}getPushDetails(){return this.pushDetails}setPushDetails(e,n){this.pushDetails={actions:e,rule:n}}handleRemoteEcho(e){var n,r=this.getUnsigned(),i=this.getId();this.event=e,r.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=r.redacted_because),this.setStatus(null),this.getId()!==i&&this.emit($t.LocalEventIdReplaced,this),this.localTimestamp=Date.now()-((n=this.getAge())!==null&&n!==void 0?n:0)}isSending(){return!!this.status}setStatus(e){this.status=e,this.emit($t.Status,this,e)}replaceLocalEventId(e){this.event.event_id=e,this.emit($t.LocalEventIdReplaced,this)}isRelation(e){var n,r=(n=this.getWireContent())===null||n===void 0?void 0:n["m.relates_to"];return this.isState()&&(r!=null&&r.rel_type)&&[Sn.Replace,Sn.Thread].includes(r.rel_type)?!1:!!(r!=null&&r.rel_type&&r.event_id&&(!e||r.rel_type===e))}getRelation(){var e;return this.isRelation()&&(e=this.getWireContent()["m.relates_to"])!==null&&e!==void 0?e:null}makeReplaced(e){this.isRedacted()&&e||this.isState()||this._replacingEvent!==e&&(this._replacingEvent=e??null,this.emit($t.Replaced,this),this.invalidateExtensibleEvent())}getAssociatedStatus(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status}getServerAggregatedRelation(e){var n;return(n=this.getUnsigned()["m.relations"])===null||n===void 0?void 0:n[e]}replacingEventId(){var e=this.getServerAggregatedRelation(Sn.Replace);if(e)return e.event_id;if(this._replacingEvent)return this._replacingEvent.getId()}replacingEvent(){return this._replacingEvent}replacingEventDate(){var e=this.getServerAggregatedRelation(Sn.Replace);if(e){var n=e.origin_server_ts;if(Number.isFinite(n))return new Date(n)}else if(this._replacingEvent){var r;return(r=this._replacingEvent.getDate())!==null&&r!==void 0?r:void 0}}localRedactionEvent(){return this._localRedactionEvent}getAssociatedId(){var e=this.getRelation();if(this.replyEventId)return this.replyEventId;if(e)return e.event_id;if(this.isRedaction())return this.event.redacts}hasAssociation(){return!!this.getAssociatedId()}updateAssociatedId(e){var n=this.getRelation();n?n.event_id=e:this.isRedaction()&&(this.event.redacts=e)}flagCancelled(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isCancelled=e}isCancelled(){return this._isCancelled}toSnapshot(){var e=new $i(JSON.parse(JSON.stringify(this.event)));for(var[n,r]of Object.entries(this))n!=="event"&&(e[n]=r);return e}isEquivalentTo(e){if(!e)return!1;if(e===this)return!0;var n=xw(this.event),r=xw(e.event);return JSON.stringify(n)===JSON.stringify(r)}toJSON(){var e=this.getEffectiveEvent();return this.isEncrypted()?{decrypted:e,encrypted:this.event}:e}setTxnId(e){this.txnId=e}getTxnId(){return this.txnId}setThread(e){this.isState()||(this.thread&&this.reEmitter.stopReEmitting(this.thread,[Xi.Update]),this.thread=e,this.setThreadId(e==null?void 0:e.id),e&&this.reEmitter.reEmit(e,[Xi.Update]))}getThread(){return this.thread}setThreadId(e){this.threadId=e}}var W2e=new Set(["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"]),qU={[ee.RoomMember]:{membership:1},[ee.RoomJoinRules]:{join_rule:1},[ee.RoomPowerLevels]:{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1}},Xs=function(t){return t[t.NotStarted=0]="NotStarted",t[t.InProgress=1]="InProgress",t[t.Finished=2]="Finished",t}(Xs||{}),vt=function(t){return t.Events="RoomState.events",t.Members="RoomState.members",t.NewMember="RoomState.newMember",t.Update="RoomState.update",t.BeaconLiveness="RoomState.BeaconLiveness",t.Marker="RoomState.Marker",t}({});class tg extends Un{constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{status:Xs.NotStarted};super(),this.roomId=e,this.oobMemberFlags=n,P(this,"reEmitter",new Fm(this)),P(this,"sentinels",{}),P(this,"displayNameToUserIds",new Map),P(this,"userIdsToDisplayNames",{}),P(this,"tokenToInvite",{}),P(this,"joinedMemberCount",null),P(this,"summaryJoinedMemberCount",null),P(this,"invitedMemberCount",null),P(this,"summaryInvitedMemberCount",null),P(this,"modified",-1),P(this,"members",{}),P(this,"events",new Map),P(this,"paginationToken",null),P(this,"beacons",new Map),P(this,"_liveBeaconIds",[]),this.updateModifiedTime()}getJoinedMemberCount(){return this.summaryJoinedMemberCount!==null?this.summaryJoinedMemberCount:(this.joinedMemberCount===null&&(this.joinedMemberCount=this.getMembers().reduce((e,n)=>n.membership===Ke.Join?e+1:e,0)),this.joinedMemberCount)}setJoinedMemberCount(e){this.summaryJoinedMemberCount=e}getInvitedMemberCount(){return this.summaryInvitedMemberCount!==null?this.summaryInvitedMemberCount:(this.invitedMemberCount===null&&(this.invitedMemberCount=this.getMembers().reduce((e,n)=>n.membership===Ke.Invite?e+1:e,0)),this.invitedMemberCount)}setInvitedMemberCount(e){this.summaryInvitedMemberCount=e}getMembers(){return Object.values(this.members)}getMembersExcept(e){return this.getMembers().filter(n=>!e.includes(n.userId))}getMember(e){return this.members[e]||null}getSentinelMember(e){if(!e)return null;var n=this.sentinels[e];if(n===void 0){n=new Z0(this.roomId,e);var r=this.members[e];r!=null&&r.events.member&&n.setMembershipEvent(r.events.member,this),this.sentinels[e]=n}return n}getStateEvents(e,n){if(!this.events.has(e))return n===void 0?[]:null;if(n===void 0)return Array.from(this.events.get(e).values());var r=this.events.get(e).get(n);return r||null}get hasLiveBeacons(){var e;return!!((e=this.liveBeaconIds)!==null&&e!==void 0&&e.length)}get liveBeaconIds(){return this._liveBeaconIds}clone(){var e=new tg(this.roomId,this.oobMemberFlags),n=this.oobMemberFlags.status;return this.oobMemberFlags.status=Xs.NotStarted,Array.from(this.events.values()).forEach(r=>{e.setStateEvents(Array.from(r.values()))}),this.oobMemberFlags.status=n,this.summaryInvitedMemberCount!==null&&e.setInvitedMemberCount(this.getInvitedMemberCount()),this.summaryJoinedMemberCount!==null&&e.setJoinedMemberCount(this.getJoinedMemberCount()),this.oobMemberFlags.status==Xs.Finished&&this.getMembers().forEach(r=>{if(r.isOutOfBand()){var i;(i=e.getMember(r.userId))===null||i===void 0||i.markOutOfBand()}}),e}setUnknownStateEvents(e){var n=e.filter(r=>!this.events.has(r.getType())||!this.events.get(r.getType()).has(r.getStateKey()));this.setStateEvents(n)}setStateEvents(e,n){this.updateModifiedTime(),e.forEach(r=>{if(!(r.getRoomId()!==this.roomId||!r.isState())){WI.matches(r.getType())&&this.setBeacon(r);var i=this.getStateEventMatching(r);if(this.setStateEvent(r),r.getType()===ee.RoomMember){var s;this.updateDisplayNameCache(r.getStateKey(),(s=r.getContent().displayname)!==null&&s!==void 0?s:""),this.updateThirdPartyTokenCache(r)}this.emit(vt.Events,r,this,i)}}),this.onBeaconLivenessChange(),e.forEach(r=>{if(!(r.getRoomId()!==this.roomId||!r.isState()))if(r.getType()===ee.RoomMember){var i=r.getStateKey();(r.getContent().membership===Ke.Leave||r.getContent().membership===Ke.Ban)&&(r.getContent().avatar_url=r.getContent().avatar_url||r.getPrevContent().avatar_url,r.getContent().displayname=r.getContent().displayname||r.getPrevContent().displayname);var s=this.getOrCreateMember(i,r);s.setMembershipEvent(r,this),this.updateMember(s),this.emit(vt.Members,r,this,s)}else if(r.getType()===ee.RoomPowerLevels){if(r.getStateKey()!=="")return;var a=Object.values(this.members);a.forEach(o=>{var l=o.getLastModifiedTime();o.setPowerLevelEvent(r),l!==o.getLastModifiedTime()&&this.emit(vt.Members,r,this,o)}),this.sentinels={}}else VK.matches(r.getType())&&this.emit(vt.Marker,r,n)}),this.emit(vt.Update,this)}processBeaconEvents(e,n){var r=this;return F(function*(){if(!(!e.length||!r.beacons.size)){var i=[...r.beacons.values()].reduce((c,d)=>(c[d.beaconInfoId]=d,c),{}),s=(c,d)=>{if(tk.matches(d.getType())){var f=i[c];f&&f.addLocations([d])}},a=function*(d){var f,p=(f=d.getRelation())===null||f===void 0?void 0:f.event_id;if(!p||!i[p])return{v:void 0};if(!tk.matches(d.getType())&&!d.isEncrypted())return{v:void 0};try{yield n.decryptEventIfNeeded(d),s(p,d)}catch{d.isDecryptionFailure()&&d.once($t.Decrypted,F(function*(){s(p,d)}))}},o;for(var l of e)if(o=yield*a(l),o)return o.v}})()}getOrCreateMember(e,n){var r=this.members[e];return r||(r=new Z0(this.roomId,e),this.members[e]=r,this.emit(vt.NewMember,n,this,r)),r}setStateEvent(e){this.events.has(e.getType())||this.events.set(e.getType(),new Map),this.events.get(e.getType()).set(e.getStateKey(),e)}setBeacon(e){var n=O6(e);if(this.beacons.has(n)){var r=this.beacons.get(n);if(e.isRedacted()){var i;r.beaconInfoId===((i=e.getRedactionEvent())===null||i===void 0?void 0:i.redacts)&&(r.destroy(),this.beacons.delete(n));return}return r.update(e)}if(!e.isRedacted()){var s=new mZ(e);this.reEmitter.reEmit(s,[Ln.New,Ln.Update,Ln.Destroy,Ln.LivenessChange]),this.emit(Ln.New,e,s),s.on(Ln.LivenessChange,this.onBeaconLivenessChange.bind(this)),s.on(Ln.Destroy,this.onBeaconLivenessChange.bind(this)),this.beacons.set(s.identifier,s)}}onBeaconLivenessChange(){this._liveBeaconIds=Array.from(this.beacons.values()).filter(e=>e.isLive).map(e=>e.identifier),this.emit(vt.BeaconLiveness,this,this.hasLiveBeacons)}getStateEventMatching(e){var n,r;return(n=(r=this.events.get(e.getType()))===null||r===void 0?void 0:r.get(e.getStateKey()))!==null&&n!==void 0?n:null}updateMember(e){var n=this.getStateEvents(ee.RoomPowerLevels,"");n&&e.setPowerLevelEvent(n),delete this.sentinels[e.userId],this.members[e.userId]=e,this.joinedMemberCount=null,this.invitedMemberCount=null}needsOutOfBandMembers(){return this.oobMemberFlags.status===Xs.NotStarted}outOfBandMembersReady(){return this.oobMemberFlags.status===Xs.Finished}markOutOfBandMembersStarted(){this.oobMemberFlags.status===Xs.NotStarted&&(this.oobMemberFlags.status=Xs.InProgress)}markOutOfBandMembersFailed(){this.oobMemberFlags.status===Xs.InProgress&&(this.oobMemberFlags.status=Xs.NotStarted)}clearOutOfBandMembers(){var e=0;Object.keys(this.members).forEach(n=>{var r=this.members[n];r.isOutOfBand()&&(++e,delete this.members[n])}),A.log("LL: RoomState removed ".concat(e," members...")),this.oobMemberFlags.status=Xs.NotStarted}setOutOfBandMembers(e){A.log("LL: RoomState about to set ".concat(e.length," OOB members ...")),this.oobMemberFlags.status===Xs.InProgress&&(A.log("LL: RoomState put in finished state ..."),this.oobMemberFlags.status=Xs.Finished,e.forEach(n=>this.setOutOfBandMember(n)),this.emit(vt.Update,this))}setOutOfBandMember(e){if(e.getType()===ee.RoomMember){var n=e.getStateKey(),r=this.getMember(n);if(!(r&&!r.isOutOfBand())){var i=this.getOrCreateMember(n,e);i.setMembershipEvent(e,this),i.markOutOfBand(),this.updateDisplayNameCache(i.userId,i.name),this.setStateEvent(e),this.updateMember(i),this.emit(vt.Members,e,this,i)}}}setTypingEvent(e){Object.values(this.members).forEach(function(n){n.setTypingEvent(e)})}getInviteForThreePidToken(e){return this.tokenToInvite[e]||null}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getUserIdsWithDisplayName(e){var n;return(n=this.displayNameToUserIds.get(Sd(e)))!==null&&n!==void 0?n:[]}maySendRedactionForEvent(e,n){var r=this.getMember(n);if(!r||r.membership===Ke.Leave||e.status||e.isRedacted())return!1;var i=this.maySendEvent(ee.RoomRedaction,n);return i?e.getSender()===n?!0:this.hasSufficientPowerLevelFor("redact",r.powerLevel):!1}hasSufficientPowerLevelFor(e,n){var r=this.getStateEvents(ee.RoomPowerLevels,""),i={};r&&(i=r.getContent());var s=50;return uD(i[e])&&(s=i[e]),n>=s}maySendMessage(e){return this.maySendEventOfType(ee.RoomMessage,e,!1)}maySendEvent(e,n){return this.maySendEventOfType(e,n,!1)}mayClientSendStateEvent(e,n){return n.isGuest()||!n.credentials.userId?!1:this.maySendStateEvent(e,n.credentials.userId)}maySendStateEvent(e,n){return this.maySendEventOfType(e,n,!0)}maySendEventOfType(e,n,r){var i=this.getStateEvents(ee.RoomPowerLevels,""),s,a={},o=0,l=0,c=0;if(i){s=i.getContent(),a=s.events||{},Number.isSafeInteger(s.state_default)?o=s.state_default:o=50;var d=s.users&&s.users[n];Number.isSafeInteger(d)?c=d:Number.isSafeInteger(s.users_default)&&(c=s.users_default),Number.isSafeInteger(s.events_default)&&(l=s.events_default)}var f=r?o:l;return Number.isSafeInteger(a[e])&&(f=a[e]),c>=f}mayTriggerNotifOfType(e,n){var r=this.getMember(n);if(!r)return!1;var i=this.getStateEvents(ee.RoomPowerLevels,""),s=50;return i&&i.getContent()&&i.getContent().notifications&&uD(i.getContent().notifications[e])&&(s=i.getContent().notifications[e]),r.powerLevel>=s}getJoinRule(){var e,n=this.getStateEvents(ee.RoomJoinRules,""),r=(e=n==null?void 0:n.getContent())!==null&&e!==void 0?e:{};return r.join_rule||kd.Invite}getHistoryVisibility(){var e,n=this.getStateEvents(ee.RoomHistoryVisibility,""),r=(e=n==null?void 0:n.getContent())!==null&&e!==void 0?e:{};return r.history_visibility||zI.Shared}getGuestAccess(){var e,n=this.getStateEvents(ee.RoomGuestAccess,""),r=(e=n==null?void 0:n.getContent())!==null&&e!==void 0?e:{};return r.guest_access||D6.Forbidden}findPredecessor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(e){var n=this.getStateEvents(ee.RoomPredecessor,"");if(n){var r=n.getContent(),i=r.predecessor_room_id,s=r.last_known_event_id;typeof s!="string"&&(s=void 0);var a=r.via_servers;if(Array.isArray(a)||(a=void 0),typeof i=="string")return{roomId:i,eventId:s,viaServers:a}}}var o=this.getStateEvents(ee.RoomCreate,"");if(o){var l=o.getContent().predecessor;if(l){var c=l.room_id;if(typeof c=="string"){var d=l.event_id;return(typeof d!="string"||d==="")&&(d=void 0),{roomId:c,eventId:d}}}}return null}updateThirdPartyTokenCache(e){if(e.getContent().third_party_invite){var n=(e.getContent().third_party_invite.signed||{}).token;if(n){var r=this.getStateEvents(ee.RoomThirdPartyInvite,n);r&&(this.tokenToInvite[n]=e)}}}updateDisplayNameCache(e,n){var r=this.userIdsToDisplayNames[e];if(delete this.userIdsToDisplayNames[e],r){var i=Sd(r),s=this.displayNameToUserIds.get(i);if(s){var a=s.filter(d=>d!==e);this.displayNameToUserIds.set(i,a)}}this.userIdsToDisplayNames[e]=n;var o=n&&Sd(n);if(o){var l,c=(l=this.displayNameToUserIds.get(o))!==null&&l!==void 0?l:[];c.push(e),this.displayNameToUserIds.set(o,c)}}}function GU(t){var e=typeof t=="string"&&!!t&&t!=="undefined"&&t!=="null";return e||typeof t=="number"}class ng{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P(this,"rooms",{}),P(this,"users",{}),P(this,"syncToken",null),P(this,"filters",new qc(()=>new Map)),P(this,"accountData",new Map),P(this,"localStorage",void 0),P(this,"oobMembers",new Map),P(this,"pendingEvents",{}),P(this,"clientOptions",void 0),P(this,"pendingToDeviceBatches",[]),P(this,"nextToDeviceBatchId",0),P(this,"createUser",void 0),P(this,"onRoomMember",(n,r,i)=>{var s;if(i.membership!==Ke.Invite){var a=this.users[i.userId]||((s=this.createUser)===null||s===void 0?void 0:s.call(this,i.userId));i.name&&(a.setDisplayName(i.name),i.events.member&&a.setRawDisplayName(i.events.member.getDirectionalContent().displayname)),i.events.member&&i.events.member.getContent().avatar_url&&a.setAvatarUrl(i.events.member.getContent().avatar_url),this.users[a.userId]=a}}),this.localStorage=e.localStorage}getSyncToken(){return this.syncToken}isNewlyCreated(){return Promise.resolve(!0)}setSyncToken(e){this.syncToken=e}storeRoom(e){this.rooms[e.roomId]=e,e.currentState.on(vt.Members,this.onRoomMember),e.currentState.getMembers().forEach(n=>{this.onRoomMember(null,e.currentState,n)})}setUserCreator(e){this.createUser=e}getRoom(e){return this.rooms[e]||null}getRooms(){return Object.values(this.rooms)}removeRoom(e){this.rooms[e]&&this.rooms[e].currentState.removeListener(vt.Members,this.onRoomMember),delete this.rooms[e]}getRoomSummaries(){return Object.values(this.rooms).map(function(e){return e.summary})}storeUser(e){this.users[e.userId]=e}getUser(e){return this.users[e]||null}getUsers(){return Object.values(this.users)}scrollback(e,n){return[]}storeEvents(e,n,r,i){}storeFilter(e){!(e!=null&&e.userId)||!(e!=null&&e.filterId)||this.filters.getOrCreate(e.userId).set(e.filterId,e)}getFilter(e,n){var r;return((r=this.filters.get(e))===null||r===void 0?void 0:r.get(n))||null}getFilterIdByName(e){if(!this.localStorage)return null;var n="mxjssdk_memory_filter_"+e;try{var r=this.localStorage.getItem(n);if(GU(r))return r}catch{}return null}setFilterIdByName(e,n){if(this.localStorage){var r="mxjssdk_memory_filter_"+e;try{GU(n)?this.localStorage.setItem(r,n):this.localStorage.removeItem(r)}catch{}}}storeAccountDataEvents(e){e.forEach(n=>{var r=!Object.keys(n.getContent()).length;r?this.accountData.delete(n.getType()):this.accountData.set(n.getType(),n)})}getAccountData(e){return this.accountData.get(e)}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(e){return Promise.resolve()}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return this.rooms={},this.users={},this.syncToken=null,this.filters=new qc(()=>new Map),this.accountData=new Map,Promise.resolve()}getOutOfBandMembers(e){return Promise.resolve(this.oobMembers.get(e)||null)}setOutOfBandMembers(e,n){return this.oobMembers.set(e,n),Promise.resolve()}clearOutOfBandMembers(e){return this.oobMembers.delete(e),Promise.resolve()}getClientOptions(){return Promise.resolve(this.clientOptions)}storeClientOptions(e){return this.clientOptions=Object.assign({},e),Promise.resolve()}getPendingEvents(e){var n=this;return F(function*(){var r;return(r=n.pendingEvents[e])!==null&&r!==void 0?r:[]})()}setPendingEvents(e,n){var r=this;return F(function*(){r.pendingEvents[e]=n})()}saveToDeviceBatches(e){for(var n of e)this.pendingToDeviceBatches.push({id:this.nextToDeviceBatchId++,eventType:n.eventType,txnId:n.txnId,batch:n.batch});return Promise.resolve()}getOldestToDeviceBatch(){var e=this;return F(function*(){return e.pendingToDeviceBatches.length===0?null:e.pendingToDeviceBatches[0]})()}removeToDeviceBatch(e){return this.pendingToDeviceBatches=this.pendingToDeviceBatches.filter(n=>n.id!==e),Promise.resolve()}destroy(){return F(function*(){})()}}var dz=(t=>(t.ToWidget="toWidget",t.FromWidget="fromWidget",t))(dz||{});function Y2e(t){if(t==="toWidget")return"fromWidget";if(t==="fromWidget")return"toWidget";throw new Error("Invalid direction")}var bc=(t=>(t.MSC2762="org.matrix.msc2762",t.MSC2762_UPDATE_STATE="org.matrix.msc2762_update_state",t.MSC2871="org.matrix.msc2871",t.MSC2873="org.matrix.msc2873",t.MSC2931="org.matrix.msc2931",t.MSC2974="org.matrix.msc2974",t.MSC2876="org.matrix.msc2876",t.MSC3819="org.matrix.msc3819",t.MSC3846="town.robin.msc3846",t.MSC3869="org.matrix.msc3869",t.MSC3973="org.matrix.msc3973",t.MSC4039="org.matrix.msc4039",t))(bc||{});const J2e=["0.0.1","0.0.2","org.matrix.msc2762","org.matrix.msc2762_update_state","org.matrix.msc2871","org.matrix.msc2873","org.matrix.msc2931","org.matrix.msc2974","org.matrix.msc2876","org.matrix.msc3819","town.robin.msc3846","org.matrix.msc3869","org.matrix.msc3973","org.matrix.msc4039"];class Q2e extends _9.EventEmitter{constructor(e,n,r,i){super(),this.sendDirection=e,this.initialWidgetId=n,this.transportWindow=r,this.inboundWindow=i,this.strictOriginCheck=!1,this.targetOrigin="*",this.timeoutSeconds=10,this._ready=!1,this._widgetId=null,this.outboundRequests=new Map,this.stopController=new AbortController,this._widgetId=n}get ready(){return this._ready}get widgetId(){return this._widgetId||null}get nextRequestId(){const e=`widgetapi-${Date.now()}`;let n=0,r=e;for(;this.outboundRequests.has(r);)r=`${e}-${n++}`;return this.outboundRequests.set(r,null),r}sendInternal(e){console.log(`[PostmessageTransport] Sending object to ${this.targetOrigin}: `,e),this.transportWindow.postMessage(e,this.targetOrigin)}reply(e,n){return this.sendInternal({...e,response:n})}send(e,n){return this.sendComplete(e,n).then(r=>r.response)}sendComplete(e,n){if(!this.ready||!this.widgetId)return Promise.reject(new Error("Not ready or unknown widget ID"));const r={api:this.sendDirection,widgetId:this.widgetId,requestId:this.nextRequestId,action:e,data:n};return e===sr.UpdateVisibility&&(r.visible=n.visible),new Promise((i,s)=>{const a=f=>{d(),i(f)},o=f=>{d(),s(f)},l=setTimeout(()=>o(new Error("Request timed out")),(this.timeoutSeconds||1)*1e3),c=()=>o(new Error("Transport stopped"));this.stopController.signal.addEventListener("abort",c);const d=()=>{this.outboundRequests.delete(r.requestId),clearTimeout(l),this.stopController.signal.removeEventListener("abort",c)};this.outboundRequests.set(r.requestId,{request:r,resolve:a,reject:o}),this.sendInternal(r)})}start(){this.inboundWindow.addEventListener("message",e=>{this.handleMessage(e)}),this._ready=!0}stop(){this._ready=!1,this.stopController.abort()}handleMessage(e){if(this.stopController.signal.aborted||!e.data||this.strictOriginCheck&&e.origin!==window.origin)return;const n=e.data;if(!(!n.action||!n.requestId||!n.widgetId))if(n.response){if(n.api!==this.sendDirection)return;this.handleResponse(n)}else{const r=n;if(r.api!==Y2e(this.sendDirection))return;this.handleRequest(r)}}handleRequest(e){if(this.widgetId){if(this.widgetId!==e.widgetId)return}else this._widgetId=e.widgetId;this.emit("message",new CustomEvent("message",{detail:e}))}handleResponse(e){if(e.widgetId!==this.widgetId)return;const n=this.outboundRequests.get(e.requestId);if(n)if(eme(e.response)){const{message:r,...i}=e.response.error;n.reject(new B6(r,i))}else n.resolve(e)}}var sr=(t=>(t.SupportedApiVersions="supported_api_versions",t.Capabilities="capabilities",t.NotifyCapabilities="notify_capabilities",t.ThemeChange="theme_change",t.LanguageChange="language_change",t.TakeScreenshot="screenshot",t.UpdateVisibility="visibility",t.OpenIDCredentials="openid_credentials",t.WidgetConfig="widget_config",t.CloseModalWidget="close_modal",t.ButtonClicked="button_clicked",t.SendEvent="send_event",t.SendToDevice="send_to_device",t.UpdateState="update_state",t.UpdateTurnServers="update_turn_servers",t))(sr||{}),Vn=(t=>(t.SupportedApiVersions="supported_api_versions",t.ContentLoaded="content_loaded",t.SendSticker="m.sticker",t.UpdateAlwaysOnScreen="set_always_on_screen",t.GetOpenIDCredentials="get_openid",t.CloseModalWidget="close_modal",t.OpenModalWidget="open_modal",t.SetModalButtonEnabled="set_button_enabled",t.SendEvent="send_event",t.SendToDevice="send_to_device",t.WatchTurnServers="watch_turn_servers",t.UnwatchTurnServers="unwatch_turn_servers",t.BeeperReadRoomAccountData="com.beeper.read_room_account_data",t.MSC2876ReadEvents="org.matrix.msc2876.read_events",t.MSC2931Navigate="org.matrix.msc2931.navigate",t.MSC2974RenegotiateCapabilities="org.matrix.msc2974.request_capabilities",t.MSC3869ReadRelations="org.matrix.msc3869.read_relations",t.MSC3973UserDirectorySearch="org.matrix.msc3973.user_directory_search",t.MSC4039GetMediaConfigAction="org.matrix.msc4039.get_media_config",t.MSC4039UploadFileAction="org.matrix.msc4039.upload_file",t.MSC4039DownloadFileAction="org.matrix.msc4039.download_file",t.MSC4157UpdateDelayedEvent="org.matrix.msc4157.update_delayed_event",t))(Vn||{}),Xf=(t=>(t.Allowed="allowed",t.Blocked="blocked",t.PendingUserConfirmation="request",t))(Xf||{}),hz=(t=>(t.Custom="m.custom",t.JitsiMeet="m.jitsi",t.Stickerpicker="m.stickerpicker",t))(hz||{}),fz=(t=>(t.Close="m.close",t))(fz||{}),Cl=(t=>(t.Send="send",t.Receive="receive",t))(Cl||{});class Ui{constructor(e,n,r,i,s){this.direction=e,this.eventType=n,this.kind=r,this.keyStr=i,this.raw=s}matchesAsStateEvent(e,n,r){return this.kind!=="state_event"||this.direction!==e||this.eventType!==n?!1:this.keyStr===null||this.keyStr===r}matchesAsToDeviceEvent(e,n){return!(this.kind!=="to_device"||this.direction!==e||this.eventType!==n)}matchesAsRoomEvent(e,n,r=null){if(this.kind!=="event"||this.direction!==e||this.eventType!==n)return!1;if(this.eventType==="m.room.message"){if(this.keyStr===null||this.keyStr===r)return!0}else return!0;return!1}matchesAsRoomAccountData(e,n){return!(this.kind!=="room_account"||this.direction!==e||this.eventType!==n)}static forStateEvent(e,n,r){n=n.replace(/#/g,"\\#"),r=r!=null?`#${r}`:"";const i=`org.matrix.msc2762.${e}.state_event:${n}${r}`;return Ui.findEventCapabilities([i])[0]}static forToDeviceEvent(e,n){const r=`org.matrix.msc3819.${e}.to_device:${n}`;return Ui.findEventCapabilities([r])[0]}static forRoomEvent(e,n){const r=`org.matrix.msc2762.${e}.event:${n}`;return Ui.findEventCapabilities([r])[0]}static forRoomMessageEvent(e,n){n=n??"";const r=`org.matrix.msc2762.${e}.event:m.room.message#${n}`;return Ui.findEventCapabilities([r])[0]}static forRoomAccountData(e,n){const r=`com.beeper.capabilities.${e}.room_account_data:${n}`;return Ui.findEventCapabilities([r])[0]}static findEventCapabilities(e){const n=[];for(const r of e){let i=null,s,a=null;if(r.startsWith("org.matrix.msc2762.send.event:")?(i="send",a="event",s=r.substring(30)):r.startsWith("org.matrix.msc2762.send.state_event:")?(i="send",a="state_event",s=r.substring(36)):r.startsWith("org.matrix.msc3819.send.to_device:")?(i="send",a="to_device",s=r.substring(34)):r.startsWith("org.matrix.msc2762.receive.event:")?(i="receive",a="event",s=r.substring(33)):r.startsWith("org.matrix.msc2762.receive.state_event:")?(i="receive",a="state_event",s=r.substring(39)):r.startsWith("org.matrix.msc3819.receive.to_device:")?(i="receive",a="to_device",s=r.substring(37)):r.startsWith("com.beeper.capabilities.receive.room_account_data:")&&(i="receive",a="room_account",s=r.substring(50)),i===null||a===null||s===void 0)continue;const o=s.startsWith("m.room.message#")||a==="state_event";let l=null;if(s.includes("#")&&o){const c=s.split("#"),d=c.findIndex(f=>!f.endsWith("\\"));s=c.slice(0,d+1).map(f=>f.endsWith("\\")?f.substring(0,f.length-1):f).join("#"),l=c.slice(d+1).join("#")}n.push(new Ui(i,s,a,l,r))}return n}}var Z1=(t=>(t.AnyRoom="*",t))(Z1||{});const p9=class p9 extends Error{constructor(e,n){super(e),this.data=n}};p9.prototype.name=p9.name;let B6=p9;class X2e extends _9.EventEmitter{constructor(e=null,n=null){if(super(),this.clientOrigin=n,this.capabilitiesFinished=!1,this.supportsMSC2974Renegotiate=!1,this.requestedCapabilities=[],this.turnServerWatchers=0,!window.parent)throw new Error("No parent window. This widget doesn't appear to be embedded properly.");this.transport=new Q2e(dz.FromWidget,e,window.parent,window),this.transport.targetOrigin=n,this.transport.on("message",this.handleMessage.bind(this))}hasCapability(e){return Array.isArray(this.approvedCapabilities)?this.approvedCapabilities.includes(e):this.requestedCapabilities.includes(e)}requestCapability(e){if(this.capabilitiesFinished&&!this.supportsMSC2974Renegotiate)throw new Error("Capabilities have already been negotiated");this.requestedCapabilities.push(e)}requestCapabilities(e){e.forEach(n=>this.requestCapability(n))}requestCapabilityForRoomTimeline(e){this.requestCapability(`org.matrix.msc2762.timeline:${e}`)}requestCapabilityToSendState(e,n){this.requestCapability(Ui.forStateEvent(Cl.Send,e,n).raw)}requestCapabilityToReceiveState(e,n){this.requestCapability(Ui.forStateEvent(Cl.Receive,e,n).raw)}requestCapabilityToSendToDevice(e){this.requestCapability(Ui.forToDeviceEvent(Cl.Send,e).raw)}requestCapabilityToReceiveToDevice(e){this.requestCapability(Ui.forToDeviceEvent(Cl.Receive,e).raw)}requestCapabilityToSendEvent(e){this.requestCapability(Ui.forRoomEvent(Cl.Send,e).raw)}requestCapabilityToReceiveEvent(e){this.requestCapability(Ui.forRoomEvent(Cl.Receive,e).raw)}requestCapabilityToSendMessage(e){this.requestCapability(Ui.forRoomMessageEvent(Cl.Send,e).raw)}requestCapabilityToReceiveMessage(e){this.requestCapability(Ui.forRoomMessageEvent(Cl.Receive,e).raw)}requestCapabilityToReceiveRoomAccountData(e){this.requestCapability(Ui.forRoomAccountData(Cl.Receive,e).raw)}requestOpenIDConnectToken(){return new Promise((e,n)=>{this.transport.sendComplete(Vn.GetOpenIDCredentials,{}).then(r=>{const i=r.response;if(i.state===Xf.Allowed)e(i);else if(i.state===Xf.Blocked)n(new Error("User declined to verify their identity"));else if(i.state===Xf.PendingUserConfirmation){const s=a=>{a.preventDefault();const o=a.detail;o.data.original_request_id===r.requestId&&(o.data.state===Xf.Allowed?(e(o.data),this.transport.reply(o,{})):o.data.state===Xf.Blocked?(n(new Error("User declined to verify their identity")),this.transport.reply(o,{})):(n(new Error("Invalid state on reply: "+i.state)),this.transport.reply(o,{error:{message:"Invalid state"}})),this.off(`action:${sr.OpenIDCredentials}`,s))};this.on(`action:${sr.OpenIDCredentials}`,s)}else n(new Error("Invalid state: "+i.state))}).catch(n)})}updateRequestedCapabilities(){return this.transport.send(Vn.MSC2974RenegotiateCapabilities,{capabilities:this.requestedCapabilities}).then()}sendContentLoaded(){return this.transport.send(Vn.ContentLoaded,{}).then()}sendSticker(e){return this.transport.send(Vn.SendSticker,e).then()}setAlwaysOnScreen(e){return this.transport.send(Vn.UpdateAlwaysOnScreen,{value:e}).then(n=>n.success)}openModalWidget(e,n,r=[],i={},s=hz.Custom){return this.transport.send(Vn.OpenModalWidget,{type:s,url:e,name:n,buttons:r,data:i}).then()}closeModalWidget(e={}){return this.transport.send(Vn.CloseModalWidget,e).then()}sendRoomEvent(e,n,r,i,s){return this.sendEvent(e,void 0,n,r,i,s)}sendStateEvent(e,n,r,i,s,a){return this.sendEvent(e,n,r,i,s,a)}sendEvent(e,n,r,i,s,a){return this.transport.send(Vn.SendEvent,{type:e,content:r,...n!==void 0&&{state_key:n},...i!==void 0&&{room_id:i},...s!==void 0&&{delay:s},...a!==void 0&&{parent_delay_id:a}})}updateDelayedEvent(e,n){return this.transport.send(Vn.MSC4157UpdateDelayedEvent,{delay_id:e,action:n})}sendToDevice(e,n,r){return this.transport.send(Vn.SendToDevice,{type:e,encrypted:n,messages:r})}readRoomAccountData(e,n){const r={type:e};return n&&(n.includes(Z1.AnyRoom)?r.room_ids=Z1.AnyRoom:r.room_ids=n),this.transport.send(Vn.BeeperReadRoomAccountData,r).then(i=>i.events)}readRoomEvents(e,n,r,i,s){const a={type:e,msgtype:r};return n!==void 0&&(a.limit=n),i&&(i.includes(Z1.AnyRoom)?a.room_ids=Z1.AnyRoom:a.room_ids=i),s&&(a.since=s),this.transport.send(Vn.MSC2876ReadEvents,a).then(o=>o.events)}async readEventRelations(e,n,r,i,s,a,o,l){if(!(await this.getClientVersions()).includes(bc.MSC3869))throw new Error("The read_relations action is not supported by the client.");const d={event_id:e,rel_type:r,event_type:i,room_id:n,to:o,from:a,limit:s,direction:l};return this.transport.send(Vn.MSC3869ReadRelations,d)}readStateEvents(e,n,r,i){const s={type:e,state_key:r===void 0?!0:r};return n!==void 0&&(s.limit=n),i&&(i.includes(Z1.AnyRoom)?s.room_ids=Z1.AnyRoom:s.room_ids=i),this.transport.send(Vn.MSC2876ReadEvents,s).then(a=>a.events)}setModalButtonEnabled(e,n){if(e===fz.Close)throw new Error("The close button cannot be disabled");return this.transport.send(Vn.SetModalButtonEnabled,{button:e,enabled:n}).then()}navigateTo(e){if(!e||!e.startsWith("https://matrix.to/#"))throw new Error("Invalid matrix.to URI");return this.transport.send(Vn.MSC2931Navigate,{uri:e}).then()}async*getTurnServers(){let e;const n=async r=>{r.preventDefault(),e(r.detail.data),await this.transport.reply(r.detail,{})};if(this.on(`action:${sr.UpdateTurnServers}`,n),this.turnServerWatchers===0)try{await this.transport.send(Vn.WatchTurnServers,{})}catch(r){throw this.off(`action:${sr.UpdateTurnServers}`,n),r}this.turnServerWatchers++;try{for(;;)yield await new Promise(r=>e=r)}finally{this.off(`action:${sr.UpdateTurnServers}`,n),this.turnServerWatchers--,this.turnServerWatchers===0&&await this.transport.send(Vn.UnwatchTurnServers,{})}}async searchUserDirectory(e,n){if(!(await this.getClientVersions()).includes(bc.MSC3973))throw new Error("The user_directory_search action is not supported by the client.");const i={search_term:e,limit:n};return this.transport.send(Vn.MSC3973UserDirectorySearch,i)}async getMediaConfig(){if(!(await this.getClientVersions()).includes(bc.MSC4039))throw new Error("The get_media_config action is not supported by the client.");const n={};return this.transport.send(Vn.MSC4039GetMediaConfigAction,n)}async uploadFile(e){if(!(await this.getClientVersions()).includes(bc.MSC4039))throw new Error("The upload_file action is not supported by the client.");const r={file:e};return this.transport.send(Vn.MSC4039UploadFileAction,r)}async downloadFile(e){if(!(await this.getClientVersions()).includes(bc.MSC4039))throw new Error("The download_file action is not supported by the client.");const r={content_uri:e};return this.transport.send(Vn.MSC4039DownloadFileAction,r)}start(){this.transport.start(),this.getClientVersions().then(e=>{e.includes(bc.MSC2974)&&(this.supportsMSC2974Renegotiate=!0)})}handleMessage(e){const n=new CustomEvent(`action:${e.detail.action}`,{detail:e.detail,cancelable:!0});if(this.emit(`action:${e.detail.action}`,n),!n.defaultPrevented)switch(e.detail.action){case sr.SupportedApiVersions:return this.replyVersions(e.detail);case sr.Capabilities:return this.handleCapabilities(e.detail);case sr.UpdateVisibility:return this.transport.reply(e.detail,{});case sr.NotifyCapabilities:return this.transport.reply(e.detail,{});default:return this.transport.reply(e.detail,{error:{message:"Unknown or unsupported action: "+e.detail.action}})}}replyVersions(e){this.transport.reply(e,{supported_versions:J2e})}getClientVersions(){return Array.isArray(this.cachedClientVersions)?Promise.resolve(this.cachedClientVersions):this.transport.send(Vn.SupportedApiVersions,{}).then(e=>(this.cachedClientVersions=e.supported_versions,e.supported_versions)).catch(e=>(console.warn("non-fatal error getting supported client versions: ",e),[]))}handleCapabilities(e){return this.capabilitiesFinished?this.transport.reply(e,{error:{message:"Capability negotiation already completed"}}):this.getClientVersions().then(n=>(n.includes(bc.MSC2871)?this.once(`action:${sr.NotifyCapabilities}`,r=>{this.approvedCapabilities=r.detail.data.approved,this.emit("ready")}):this.emit("ready"),this.capabilitiesFinished=!0,this.transport.reply(e,{capabilities:this.requestedCapabilities})))}}var p0=(t=>(t.Screenshots="m.capability.screenshot",t.StickerSending="m.sticker",t.AlwaysOnScreen="m.always_on_screen",t.RequiresClient="io.element.requires_client",t.MSC2931Navigate="org.matrix.msc2931.navigate",t.MSC3846TurnServers="town.robin.msc3846.turn_servers",t.MSC3973UserDirectorySearch="org.matrix.msc3973.user_directory_search",t.MSC4039UploadFile="org.matrix.msc4039.upload_file",t.MSC4039DownloadFile="org.matrix.msc4039.download_file",t.MSC4157SendDelayedEvent="org.matrix.msc4157.send.delayed_event",t.MSC4157UpdateDelayedEvent="org.matrix.msc4157.update_delayed_event",t))(p0||{});function eme(t){const e=t.error;return typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"}function KU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(n),!0).forEach(function(r){P(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tme(t){var e,n,r,i=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&(e=t[n])!=null)return e.call(t);if(r&&(e=t[r])!=null)return new k7(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function k7(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return k7=function(r){this.s=r,this.n=r.next},k7.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):e(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):e(i.apply(this.s,arguments))}},new k7(t)}var T7=function(t){return t.PendingEventsChanged="PendingEvent.pendingEventsChanged",t}({});class mz extends M9{constructor(e,n,r,i,s){var a,o,l,c,d,f,p,g,y,v,b,C,S,R;super(i),a=this,this.widgetApi=e,this.capabilities=n,this.roomId=r,P(this,"room",void 0),P(this,"widgetApiReady",void 0),P(this,"roomStateSynced",void 0),P(this,"lifecycle",void 0),P(this,"syncState",null),P(this,"pendingSendingEventsTxId",[]),P(this,"eventEmitter",new Un),P(this,"updateTxId",function(){var k=F(function*(x){if(x.getSender()===a.getUserId()&&a.pendingSendingEventsTxId.some(U=>x.getType()===U.type)){for(var L,N=(L=a.pendingSendingEventsTxId.find(U=>U.id===x.getId()))===null||L===void 0?void 0:L.txId;!N&&a.pendingSendingEventsTxId.length>0;){var D;yield new Promise(U=>a.eventEmitter.once(T7.PendingEventsChanged,()=>U())),N=(D=a.pendingSendingEventsTxId.find(U=>U.id===x.getId()))===null||D===void 0?void 0:D.txId}N&&(x.setTxnId(N),x.setUnsigned(iv(iv({},x.getUnsigned()),{},{transaction_id:N}))),a.pendingSendingEventsTxId=a.pendingSendingEventsTxId.filter(U=>U.id!==x.getId()),a.pendingSendingEventsTxId.length===0&&a.eventEmitter.emit(T7.PendingEventsChanged)}});return function(x){return k.apply(this,arguments)}}()),P(this,"onEvent",function(){var k=F(function*(x){if(x.preventDefault(),x.detail.data.room_id===a.roomId){var L=new $i(x.detail.data);yield a.updateTxId(L),a.syncApi instanceof fd?(yield a.supportUpdateState())?yield a.syncApi.injectRoomEvents(a.room,void 0,[],[L]):yield a.syncApi.injectRoomEvents(a.room,[],void 0,[L]):(yield a.supportUpdateState())?yield a.syncApi.injectRoomEvents(a.room,[],[L]):A.error("slididng sync cannot be used in widget mode if the client widget driver does not support the version: 'org.matrix.msc2762_update_state'"),a.emit(Le.Event,L),a.setSyncState(Kt.Syncing),A.info("Received event ".concat(L.getId()," ").concat(L.getType()))}else{var{event_id:N,room_id:D}=x.detail.data;A.info("Received event ".concat(N," for a different room ").concat(D,"; discarding"))}yield a.ack(x)});return function(x){return k.apply(this,arguments)}}()),P(this,"onToDevice",function(){var k=F(function*(x){x.preventDefault();var L=new $i({type:x.detail.data.type,sender:x.detail.data.sender,content:x.detail.data.content});x.detail.data.encrypted&&L.makeEncrypted(ee.RoomMessageEncrypted,{},"",""),a.emit(Le.ToDeviceEvent,L),a.setSyncState(Kt.Syncing),yield a.ack(x)});return function(x){return k.apply(this,arguments)}}()),P(this,"onStateUpdate",function(){var k=F(function*(x){x.preventDefault(),(yield a.supportUpdateState())||A.warn("received update_state widget action but the widget driver did not claim to support 'org.matrix.msc2762_update_state'");for(var L of x.detail.data.state)if(L.room_id===a.roomId){var N=new $i(L);a.syncApi instanceof fd?yield a.syncApi.injectRoomEvents(a.room,void 0,[N]):yield a.syncApi.injectRoomEvents(a.room,[N]),A.info("Updated state entry ".concat(N.getType()," ").concat(N.getStateKey()," to ").concat(N.getId()))}else{var{event_id:D,room_id:U}=x.detail.data;A.info("Received state entry ".concat(D," for a different room ").concat(U,"; discarding"))}yield a.ack(x)});return function(x){return k.apply(this,arguments)}}());var w=this.widgetApi.transport.send.bind(this.widgetApi.transport);this.widgetApi.transport.send=function(){var k=F(function*(x,L){try{return yield w(x,L)}catch(N){ZU(N)}});return function(x,L){return k.apply(this,arguments)}}();var I=this.widgetApi.transport.sendComplete.bind(this.widgetApi.transport);this.widgetApi.transport.sendComplete=function(){var k=F(function*(x,L){try{return yield I(x,L)}catch(N){ZU(N)}});return function(x,L){return k.apply(this,arguments)}}(),this.widgetApiReady=new Promise(k=>this.widgetApi.once("ready",k)),this.roomStateSynced=(o=n.receiveState)!==null&&o!==void 0&&o.length?new Promise(k=>this.widgetApi.once("action:".concat(sr.UpdateState),k)):Promise.resolve(),((l=n.sendEvent)!==null&&l!==void 0&&l.length||(c=n.receiveEvent)!==null&&c!==void 0&&c.length||n.sendMessage===!0||Array.isArray(n.sendMessage)&&n.sendMessage.length||n.receiveMessage===!0||Array.isArray(n.receiveMessage)&&n.receiveMessage.length||(d=n.sendState)!==null&&d!==void 0&&d.length||(f=n.receiveState)!==null&&f!==void 0&&f.length)&&e.requestCapabilityForRoomTimeline(r),(p=n.sendEvent)===null||p===void 0||p.forEach(k=>e.requestCapabilityToSendEvent(k)),(g=n.receiveEvent)===null||g===void 0||g.forEach(k=>e.requestCapabilityToReceiveEvent(k)),n.sendMessage===!0?e.requestCapabilityToSendMessage():Array.isArray(n.sendMessage)&&n.sendMessage.forEach(k=>e.requestCapabilityToSendMessage(k)),n.receiveMessage===!0?e.requestCapabilityToReceiveMessage():Array.isArray(n.receiveMessage)&&n.receiveMessage.forEach(k=>e.requestCapabilityToReceiveMessage(k)),(y=n.sendState)===null||y===void 0||y.forEach(k=>{var{eventType:x,stateKey:L}=k;return e.requestCapabilityToSendState(x,L)}),(v=n.receiveState)===null||v===void 0||v.forEach(k=>{var{eventType:x,stateKey:L}=k;return e.requestCapabilityToReceiveState(x,L)}),(b=n.sendToDevice)===null||b===void 0||b.forEach(k=>e.requestCapabilityToSendToDevice(k)),(C=n.receiveToDevice)===null||C===void 0||C.forEach(k=>e.requestCapabilityToReceiveToDevice(k)),n.sendDelayedEvents&&((S=n.sendEvent)!==null&&S!==void 0&&S.length||n.sendMessage===!0||Array.isArray(n.sendMessage)&&n.sendMessage.length||(R=n.sendState)!==null&&R!==void 0&&R.length)&&e.requestCapability(p0.MSC4157SendDelayedEvent),n.updateDelayedEvents&&e.requestCapability(p0.MSC4157UpdateDelayedEvent),n.turnServers&&e.requestCapability(p0.MSC3846TurnServers),e.on("action:".concat(sr.SendEvent),this.onEvent),e.on("action:".concat(sr.SendToDevice),this.onToDevice),e.on("action:".concat(sr.UpdateState),this.onStateUpdate),e.start(),s&&e.sendContentLoaded()}supportUpdateState(){var e=this;return F(function*(){return(yield e.widgetApi.getClientVersions()).includes(bc.MSC2762_UPDATE_STATE)})()}startClient(){var e=arguments,n=this;return F(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:{};n.lifecycle=new AbortController;var i=n.getUserId();if(i&&n.store.storeUser(new Gc(i)),r.slidingSync?n.syncApi=new jZ(r.slidingSync,n,r,n.buildSyncApiOptions()):n.syncApi=new fd(n,r,n.buildSyncApiOptions()),n.room=n.syncApi.createRoom(n.roomId),n.store.storeRoom(n.room),yield n.widgetApiReady,yield n.supportUpdateState())yield n.roomStateSynced;else{var s,a;yield Promise.all((s=(a=n.capabilities.receiveState)===null||a===void 0?void 0:a.map(function(){var o=F(function*(l){var{eventType:c,stateKey:d}=l,f=yield n.widgetApi.readStateEvents(c,void 0,d,[n.roomId]),p=f.map(g=>new $i(g));n.syncApi instanceof fd?yield n.syncApi.injectRoomEvents(n.room,void 0,p):yield n.syncApi.injectRoomEvents(n.room,p),p.forEach(g=>{n.emit(Le.Event,g),A.info("Backfilled event ".concat(g.getId()," ").concat(g.getType()," ").concat(g.getStateKey()))})});return function(l){return o.apply(this,arguments)}}()))!==null&&s!==void 0?s:[])}r.clientWellKnownPollPeriod!==void 0&&(n.clientWellKnownIntervalID=setInterval(()=>{n.fetchClientWellKnown()},1e3*r.clientWellKnownPollPeriod),n.fetchClientWellKnown()),n.setSyncState(Kt.Syncing),A.info("Finished initial sync"),n.matrixRTC.start(),n.capabilities.turnServers&&n.watchTurnServers()})()}stopClient(){this.widgetApi.off("action:".concat(sr.SendEvent),this.onEvent),this.widgetApi.off("action:".concat(sr.SendToDevice),this.onToDevice),this.widgetApi.off("action:".concat(sr.UpdateState),this.onStateUpdate),super.stopClient(),this.lifecycle.abort()}joinRoom(e){var n=this;return F(function*(){if(e===n.roomId)return n.room;throw new Error("Unknown room: ".concat(e))})()}encryptAndSendEvent(e,n,r){var i=this;return F(function*(){var s=n.event.redacts?iv(iv({},n.getContent()),{},{redacts:n.event.redacts}):n.getContent();if(r){var a=yield i.widgetApi.sendRoomEvent(n.getType(),s,e.roomId,"delay"in r?r.delay:void 0,"parent_delay_id"in r?r.parent_delay_id:void 0).catch(ul);return i.validateSendDelayedEventResponse(a)}var o=n.getTxnId();o&&i.pendingSendingEventsTxId.push({type:n.getType(),id:void 0,txId:o});var l;try{l=yield i.widgetApi.sendRoomEvent(n.getType(),s,e.roomId).catch(ul)}catch(c){throw i.updatePendingEventStatus(e,n,lt.NOT_SENT),c}return e.updatePendingEvent(n,lt.SENT,l.event_id),i.pendingSendingEventsTxId.forEach(c=>{c.txId===o&&(c.id=l.event_id)}),i.eventEmitter.emit(T7.PendingEventsChanged),{event_id:l.event_id}})()}sendStateEvent(e,n,r){var i=arguments,s=this;return F(function*(){var a=i.length>3&&i[3]!==void 0?i[3]:"",o=yield s.widgetApi.sendStateEvent(n,a,r,e).catch(ul);if(o.event_id===void 0)throw new Error("'event_id' absent from response to an event request");return{event_id:o.event_id}})()}_unstable_sendDelayedStateEvent(e,n,r,i){var s=arguments,a=this;return F(function*(){var o=s.length>4&&s[4]!==void 0?s[4]:"";if(!(yield a.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","sendDelayedStateEvent");var l=yield a.widgetApi.sendStateEvent(r,o,i,e,"delay"in n?n.delay:void 0,"parent_delay_id"in n?n.parent_delay_id:void 0).catch(ul);return a.validateSendDelayedEventResponse(l)})()}validateSendDelayedEventResponse(e){if(e.delay_id===void 0)throw new Error("'delay_id' absent from response to a delayed event request");return{delay_id:e.delay_id}}_unstable_updateDelayedEvent(e,n){var r=this;return F(function*(){if(!(yield r.doesServerSupportUnstableFeature(Il)))throw new pd("Server does not support the delayed events API","updateDelayedEvent");return yield r.widgetApi.updateDelayedEvent(e,n).catch(ul),{}})()}encryptAndSendToDevice(e,n,r){var i=this;return F(function*(){var s=new qc(()=>new Map);for(var{userId:a,deviceId:o}of n)s.getOrCreate(a).set(o,r);yield i.widgetApi.sendToDevice(e,!0,Q1(s)).catch(ul)})()}sendToDevice(e,n){var r=this;return F(function*(){return yield r.widgetApi.sendToDevice(e,!1,Q1(n)).catch(ul),{}})()}getOpenIdToken(){var e=this;return F(function*(){var n=yield e.widgetApi.requestOpenIDConnectToken().catch(ul);return{access_token:n.access_token,expires_in:n.expires_in,matrix_server_name:n.matrix_server_name,token_type:n.token_type}})()}queueToDevice(e){var n=this;return F(function*(){var{eventType:r,batch:i}=e,s=new qc(()=>new Map);for(var{userId:a,deviceId:o,payload:l}of i)s.getOrCreate(a).set(o,l);yield n.widgetApi.sendToDevice(r,!1,Q1(s)).catch(ul)})()}sendToDeviceViaWidgetApi(e,n,r){var i=this;return F(function*(){yield i.widgetApi.sendToDevice(e,n,Q1(r)).catch(ul)})()}checkTurnServers(){var e=this;return F(function*(){return e.turnServers.length>0})()}getSyncState(){return this.syncState}setSyncState(e){var n=this.syncState;this.syncState=e,this.emit(Le.Sync,e,n)}ack(e){var n=this;return F(function*(){yield n.widgetApi.transport.reply(e.detail,{})})()}watchTurnServers(){var e=this;return F(function*(){var n=e.widgetApi.getTurnServers(),r=()=>{n.return(void 0)};e.lifecycle.signal.addEventListener("abort",r);try{var i=!1,s=!1,a;try{for(var o=tme(n),l;i=!(l=yield o.next()).done;i=!1){var c=l.value;e.turnServers=[{urls:c.uris,username:c.username,credential:c.password}],e.emit(Le.TurnServers,e.turnServers),A.log("Received TURN server: ".concat(c.uris))}}catch(d){s=!0,a=d}finally{try{i&&o.return!=null&&(yield o.return())}finally{if(s)throw a}}}catch(d){A.warn("Error watching TURN servers",d)}finally{e.lifecycle.signal.removeEventListener("abort",r)}})()}}function ZU(t){throw t instanceof B6&&t.data.matrix_api_error?On.fromWidgetApiErrorData(t.data.matrix_api_error):t}function ul(t){throw t instanceof Error&&t.message==="Request timed out"?new jh("widget api timeout"):t}class nme{constructor(){P(this,"unthreadedReadReceipts",new Map),P(this,"threadedReadReceipts",new qc(()=>new Map))}setUnthreaded(e,n){this.unthreadedReadReceipts.set(e,n)}setThreaded(e,n,r){this.threadedReadReceipts.getOrCreate(e).set(n,r)}allUnthreaded(){return this.unthreadedReadReceipts.entries()}*allThreaded(){for(var e of this.threadedReadReceipts.values())for(var n of e.entries())yield n}consumeEphemeralEvents(e){e==null||e.forEach(n=>{n.type!==ee.Receipt||!n.content||Object.keys(n.content).forEach(r=>{Object.entries(n.content[r]).forEach(i=>{var[s,a]=i;if(xI(s))for(var o of Object.keys(a)){var l=n.content[r][s][o],c={data:n.content[r][s][o],type:s,eventId:r};l.thread_id?this.setThreaded(l.thread_id,o,c):this.setUnthreaded(o,c)}})})})}buildAccumulatedReceiptEvent(e){var n={type:ee.Receipt,room_id:e,content:{}},r=new qc(()=>new qc(()=>new Map));for(var[i,s]of this.allUnthreaded())r.getOrCreate(s.eventId).getOrCreate(s.type).set(i,s.data);for(var[a,o]of this.allThreaded())r.getOrCreate(o.eventId).getOrCreate(o.type).set(a,o.data);return n.content=Q1(r),r.size>0?n:null}}var gc=function(t){return t.Invite="invite",t.Leave="leave",t.Join="join",t.Knock="knock",t}({});function rme(t){return"_localTs"in t&&t._localTs!==void 0}class pz{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.opts=e,P(this,"accountData",{}),P(this,"inviteRooms",{}),P(this,"knockRooms",{}),P(this,"joinRooms",{}),P(this,"nextBatch",null),this.opts.maxTimelineEntries=this.opts.maxTimelineEntries||50}accumulate(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.accumulateRooms(e,n),this.accumulateAccountData(e),this.nextBatch=e.next_batch}accumulateAccountData(e){!e.account_data||!e.account_data.events||e.account_data.events.forEach(n=>{this.accountData[n.type]=n})}accumulateRooms(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e.rooms&&(e.rooms.invite&&Object.keys(e.rooms.invite).forEach(r=>{this.accumulateRoom(r,gc.Invite,e.rooms.invite[r],n)}),e.rooms.join&&Object.keys(e.rooms.join).forEach(r=>{this.accumulateRoom(r,gc.Join,e.rooms.join[r],n)}),e.rooms.leave&&Object.keys(e.rooms.leave).forEach(r=>{this.accumulateRoom(r,gc.Leave,e.rooms.leave[r],n)}),e.rooms.knock&&Object.keys(e.rooms.knock).forEach(r=>{this.accumulateRoom(r,gc.Knock,e.rooms.knock[r],n)}))}accumulateRoom(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;switch(n){case gc.Invite:this.knockRooms[e]&&delete this.knockRooms[e],this.accumulateInviteState(e,r);break;case gc.Knock:this.accumulateKnockState(e,r);break;case gc.Join:this.inviteRooms[e]&&delete this.inviteRooms[e],this.accumulateJoinState(e,r,i);break;case gc.Leave:this.knockRooms[e]?delete this.knockRooms[e]:this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:A.error("Unknown cateogory: ",n)}}accumulateInviteState(e,n){if(!(!n.invite_state||!n.invite_state.events)){if(!this.inviteRooms[e]){this.inviteRooms[e]={invite_state:n.invite_state};return}var r=this.inviteRooms[e];n.invite_state.events.forEach(i=>{for(var s=!1,a=0;a<r.invite_state.events.length;a++){var o=r.invite_state.events[a];o.type===i.type&&o.state_key==i.state_key&&(r.invite_state.events[a]=i,s=!0)}s||r.invite_state.events.push(i)})}}accumulateKnockState(e,n){if(!(!n.knock_state||!n.knock_state.events)){if(!this.knockRooms[e]){this.knockRooms[e]={knock_state:n.knock_state};return}var r=this.knockRooms[e];n.knock_state.events.forEach(i=>{for(var s=!1,a=0;a<r.knock_state.events.length;a++){var o=r.knock_state.events[a];o.type===i.type&&o.state_key==i.state_key&&(r.knock_state.events[a]=i,s=!0)}s||r.knock_state.events.push(i)})}}accumulateJoinState(e,n){var r,i,s,a,o,l,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.joinRooms[e]||(this.joinRooms[e]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_unreadThreadNotifications:{},_summary:{},_receipts:new nme});var d=this.joinRooms[e];if(n.account_data&&n.account_data.events&&n.account_data.events.forEach(I=>{d._accountData[I.type]=I}),n.unread_notifications&&(d._unreadNotifications=n.unread_notifications),d._unreadThreadNotifications=(r=(i=n[W0.stable])!==null&&i!==void 0?i:n[W0.unstable])!==null&&r!==void 0?r:void 0,n.summary){var f,p,g,y="m.heroes",v="m.invited_member_count",b="m.joined_member_count",C=d._summary,S=n.summary;C[y]=(f=S[y])!==null&&f!==void 0?f:C[y],C[b]=(p=S[b])!==null&&p!==void 0?p:C[b],C[v]=(g=S[v])!==null&&g!==void 0?g:C[v]}if(d._receipts.consumeEphemeralEvents((s=n.ephemeral)===null||s===void 0?void 0:s.events),n.timeline&&n.timeline.limited&&(d._timeline=[]),(a=n.state)===null||a===void 0||(a=a.events)===null||a===void 0||a.forEach(I=>{sv(d._currentState,I)}),(o=n["org.matrix.msc4222.state_after"])===null||o===void 0||(o=o.events)===null||o===void 0||o.forEach(I=>{sv(d._currentState,I)}),(l=n.timeline)===null||l===void 0||(l=l.events)===null||l===void 0||l.forEach((I,k)=>{var x;n["org.matrix.msc4222.state_after"]||sv(d._currentState,I);var L;if(c)L=I;else{var N;L=Object.assign({},I),L.unsigned!==void 0&&(L.unsigned=Object.assign({},L.unsigned));var D=(N=I.unsigned)===null||N===void 0?void 0:N.age;D!==void 0&&(L._localTs=Date.now()-D)}d._timeline.push({event:L,token:k===0&&(x=n.timeline.prev_batch)!==null&&x!==void 0?x:null})}),d._timeline.length>this.opts.maxTimelineEntries){for(var R=d._timeline.length-this.opts.maxTimelineEntries,w=R;w<d._timeline.length;w++)if(d._timeline[w].token){d._timeline=d._timeline.slice(w,d._timeline.length);break}}}getJSON(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n={join:{},invite:{},knock:{},leave:{}};Object.keys(this.inviteRooms).forEach(i=>{n.invite[i]=this.inviteRooms[i]}),Object.keys(this.knockRooms).forEach(i=>{n.knock[i]=this.knockRooms[i]}),Object.keys(this.joinRooms).forEach(i=>{var s=this.joinRooms[i],a={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},"org.matrix.msc4222.state_after":{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:s._unreadNotifications,unread_thread_notifications:s._unreadThreadNotifications,summary:s._summary};Object.keys(s._accountData).forEach(p=>{a.account_data.events.push(s._accountData[p])});var o=s._receipts.buildAccumulatedReceiptEvent(i);o&&a.ephemeral.events.push(o),s._timeline.forEach(p=>{if(!a.timeline.prev_batch){if(!p.token)return;a.timeline.prev_batch=p.token}var g;!e&&rme(p.event)?(g=Object.assign({},p.event),g.unsigned!==void 0&&(g.unsigned=Object.assign({},g.unsigned)),delete g._localTs,g.unsigned=g.unsigned||{},g.unsigned.age=Date.now()-p.event._localTs):g=p.event,a.timeline.events.push(g)});for(var l=Object.create(null),c=a.timeline.events.length-1;c>=0;c--){var d=a.timeline.events[c];if(!(d.state_key===null||d.state_key===void 0)){var f=Wg(d);f.unsigned&&(f.unsigned.prev_content&&(f.content=f.unsigned.prev_content),f.unsigned.prev_sender&&(f.sender=f.unsigned.prev_sender)),sv(l,f)}}Object.keys(s._currentState).forEach(p=>{Object.keys(s._currentState[p]).forEach(g=>{var y=s._currentState[p][g];a["org.matrix.msc4222.state_after"].events.push(y),l[p]&&l[p][g]&&(y=l[p][g]),a.state.events.push(y)})}),n.join[i]=a});var r=[];return Object.keys(this.accountData).forEach(i=>{r.push(this.accountData[i])}),{nextBatch:this.nextBatch,roomsData:n,accountData:r}}getNextBatchToken(){return this.nextBatch}}function sv(t,e){e.state_key===null||e.state_key===void 0||!e.type||(t[e.type]||(t[e.type]=Object.create(null)),t[e.type][e.state_key]=e)}var gz=function(t){return t[t.Blocked=-1]="Blocked",t[t.Unverified=0]="Unverified",t[t.Verified=1]="Verified",t}({});class ime{constructor(e){P(this,"deviceId",void 0),P(this,"userId",void 0),P(this,"algorithms",void 0),P(this,"keys",void 0),P(this,"verified",void 0),P(this,"signatures",void 0),P(this,"displayName",void 0),P(this,"dehydrated",!1),this.deviceId=e.deviceId,this.userId=e.userId,this.algorithms=e.algorithms,this.keys=e.keys,this.verified=e.verified||gz.Unverified,this.signatures=e.signatures||new Map,this.displayName=e.displayName,this.dehydrated=!!e.dehydrated}getFingerprint(){return this.keys.get("ed25519:".concat(this.deviceId))}getIdentityKey(){return this.keys.get("curve25519:".concat(this.deviceId))}}var zU=function(){},sme=10;class ame{constructor(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.client=e,this.timelineSet=n,P(this,"windowLimit",void 0),P(this,"start",void 0),P(this,"end",void 0),P(this,"eventCount",0),this.windowLimit=i.windowLimit||1e3,(r=n.room)===null||r===void 0||r.on(xe.Timeline,this.onTimelineEvent.bind(this))}load(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,r=i=>{if(!i)throw new Error("No timeline given to initFields");var s,a=i.getEvents();if(!e)s=a.length;else if(s=a.findIndex(c=>c.getId()===e),s<0)throw new Error("getEventTimeline result didn't include requested event");var o=Math.min(a.length,s+Math.ceil(n/2)),l=Math.max(0,o-n);this.start=new gk(i,l-i.getBaseIndex()),this.end=new gk(i,o-i.getBaseIndex()),this.eventCount=o-l};return this.timelineSet.getTimelineForEvent(e)?(r(this.timelineSet.getTimelineForEvent(e)),Promise.resolve()):e?this.client.getEventTimeline(this.timelineSet,e).then(r):(r(this.timelineSet.getLiveTimeline()),Promise.resolve())}getTimelineIndex(e){if(e==Me.BACKWARDS){var n;return(n=this.start)!==null&&n!==void 0?n:null}else if(e==Me.FORWARDS){var r;return(r=this.end)!==null&&r!==void 0?r:null}else throw new Error("Invalid direction '"+e+"'")}extend(e,n){var r=this.getTimelineIndex(e);if(!r)return!1;var i=e==Me.BACKWARDS?r.retreat(n):r.advance(n);if(i){this.eventCount+=i,zU("TimelineWindow: increased cap by "+i+" (now "+this.eventCount+")");var s=this.eventCount-this.windowLimit;return s>0&&this.unpaginate(s,e!=Me.BACKWARDS),!0}return!1}onTimelineEvent(e,n,r,i){i&&this.onEventRemoved()}onEventRemoved(){var e=this.getEvents();e.length>0&&e[e.length-1]===void 0&&this.end&&this.end.index--}canPaginate(e){var n=this.getTimelineIndex(e);if(!n)return!1;if(e==Me.BACKWARDS){if(n.index>n.minIndex())return!0}else if(n.index<n.maxIndex())return!0;var r=n.timeline.getNeighbouringTimeline(e),i=n.timeline.getPaginationToken(e);return!!r||!!i}paginate(e,n){var r=arguments,i=this;return F(function*(){var s=r.length>2&&r[2]!==void 0?r[2]:!0,a=r.length>3&&r[3]!==void 0?r[3]:sme,o=i.getTimelineIndex(e);if(!o)return!1;if(o.pendingPaginate)return o.pendingPaginate;if(i.extend(e,n))return!0;if(!s||a===0)return!1;var l=o.timeline.getPaginationToken(e);if(!l)return!1;var c=i.client.paginateEventTimeline(o.timeline,{backwards:e==Me.BACKWARDS,limit:n}).finally(function(){o.pendingPaginate=void 0}).then(d=>d?i.paginate(e,n,!0,a-1):i.paginate(e,n,!1,0));return o.pendingPaginate=c,c})()}unpaginate(e,n){var r=n?this.start:this.end;if(!r)throw new Error("Attempting to unpaginate startOfTimeline=".concat(n," but don't have this direction"));if(e>this.eventCount||e<0)throw new Error("Attemting to unpaginate ".concat(e," events, but only have ").concat(this.eventCount," in the timeline"));for(;e>0;){var i=n?r.advance(e):r.retreat(e);if(i<=0)throw new Error("Unable to unpaginate any further, but still have "+this.eventCount+" events");e-=i,this.eventCount-=i,zU("TimelineWindow.unpaginate: dropped "+i+" (now "+this.eventCount+")")}}getEvents(){if(!this.start)return[];for(var e=[],n=this.start.timeline;n;){var r,i,s=n.getEvents(),a=0,o=s.length;n===this.start.timeline&&(a=this.start.index+n.getBaseIndex()),n===((r=this.end)===null||r===void 0?void 0:r.timeline)&&(o=this.end.index+n.getBaseIndex());for(var l=a;l<o;l++)e.push(s[l]);if(n===((i=this.end)===null||i===void 0?void 0:i.timeline))break;n=n.getNeighbouringTimeline(Me.FORWARDS)}return e}}class gk{constructor(e,n){this.timeline=e,this.index=n,P(this,"pendingPaginate",void 0)}minIndex(){return this.timeline.getBaseIndex()*-1}maxIndex(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()}advance(e){if(!e)return 0;var n;if(e<0){if(n=Math.max(e,this.minIndex()-this.index),n<0)return this.index+=n,n}else if(n=Math.min(e,this.maxIndex()-this.index),n>0)return this.index+=n,n;var r=this.timeline.getNeighbouringTimeline(e<0?Me.BACKWARDS:Me.FORWARDS);return r?(this.timeline=r,e<0?this.index=this.maxIndex():this.index=this.minIndex(),this.advance(e)):0}retreat(e){return this.advance(e*-1)*-1}}var p3="m.login.email.identity",WU="m.login.msisdn",vk=function(t){return t.Password="m.login.password",t.Recaptcha="m.login.recaptcha",t.Terms="m.login.terms",t.Email="m.login.email.identity",t.Msisdn="m.login.msisdn",t.Sso="m.login.sso",t.SsoUnstable="org.matrix.login.sso",t.Dummy="m.login.dummy",t.RegistrationToken="m.login.registration_token",t.UnstableRegistrationToken="org.matrix.msc3231.login.registration_token",t}({});class vz extends Error{constructor(e,n,r){super(e),this.required_stages=n,this.flows=r,P(this,"name","NoAuthFlowFoundError")}}class ax{constructor(e){var n=this;P(this,"matrixClient",void 0),P(this,"inputs",void 0),P(this,"clientSecret",void 0),P(this,"requestCallback",void 0),P(this,"busyChangedCallback",void 0),P(this,"stateUpdatedCallback",void 0),P(this,"requestEmailTokenCallback",void 0),P(this,"supportedStages",void 0),P(this,"data",void 0),P(this,"emailSid",void 0),P(this,"requestingEmailToken",!1),P(this,"attemptAuthDeferred",null),P(this,"chosenFlow",null),P(this,"currentStage",null),P(this,"emailAttempt",1),P(this,"submitPromise",null),P(this,"requestEmailToken",F(function*(){if(n.requestingEmailToken)A.warn("Could not request email token: Already requesting");else{A.trace("Requesting email token. Attempt: "+n.emailAttempt),n.requestingEmailToken=!0;try{var r=yield n.requestEmailTokenCallback(n.inputs.emailAddress,n.clientSecret,n.emailAttempt++,n.data.session);n.emailSid=r.sid,A.trace("Email token request succeeded")}finally{n.requestingEmailToken=!1}}})),this.matrixClient=e.matrixClient,this.data=e.authData||{flows:[]},this.requestCallback=e.doRequest,this.busyChangedCallback=e.busyChanged,this.stateUpdatedCallback=e.stateUpdated||e.startAuthStage,this.requestEmailTokenCallback=e.requestEmailToken,this.inputs=e.inputs||{},e.sessionId&&(this.data.session=e.sessionId),this.clientSecret=e.clientSecret||this.matrixClient.generateClientSecret(),this.emailSid=e.emailSid,e.supportedStages!==void 0&&(this.supportedStages=new Set(e.supportedStages))}attemptAuth(){var e=this;return F(function*(){var n;e.attemptAuthDeferred=Promise.withResolvers();var r=e.attemptAuthDeferred.promise;if((n=e.data)!==null&&n!==void 0&&(n=n.flows)!==null&&n!==void 0&&n.length)e.startNextAuthStage();else{var i;(i=e.busyChangedCallback)===null||i===void 0||i.call(e,!0);var s=e.data.session?{session:e.data.session}:null;e.doRequest(s).finally(()=>{var a;(a=e.busyChangedCallback)===null||a===void 0||a.call(e,!1)})}return r})()}poll(){var e=this;return F(function*(){if(e.data.session&&e.attemptAuthDeferred&&!e.submitPromise){var n={};if(e.currentStage==p3&&e.emailSid){var r={sid:e.emailSid,client_secret:e.clientSecret},i=e.matrixClient.getIdentityServerUrl();i&&(r.id_server=new URL(i).host),n={type:p3,threepid_creds:r}}e.submitAuthDict(n,!0)}})()}getSessionId(){var e;return(e=this.data)===null||e===void 0?void 0:e.session}getClientSecret(){return this.clientSecret}getStageParams(e){var n;return(n=this.data)===null||n===void 0||(n=n.params)===null||n===void 0?void 0:n[e]}getChosenFlow(){return this.chosenFlow}submitAuthDict(e){var n=arguments,r=this;return F(function*(){var i,s=n.length>1&&n[1]!==void 0?n[1]:!1;if(!r.attemptAuthDeferred)throw new Error("submitAuthDict() called before attemptAuth()");if(!s){var a;(a=r.busyChangedCallback)===null||a===void 0||a.call(r,!0)}for(;r.submitPromise;)try{yield r.submitPromise}catch{}var o;(i=r.data)!==null&&i!==void 0&&i.session?o=Object.assign({session:r.data.session},e):o=e;try{r.submitPromise=r.doRequest(o,s),yield r.submitPromise}finally{if(r.submitPromise=null,!s){var l;(l=r.busyChangedCallback)===null||l===void 0||l.call(r,!1)}}})()}getEmailSid(){return this.emailSid}setEmailSid(e){this.emailSid=e}doRequest(e){var n=arguments,r=this;return F(function*(){var i=n.length>1&&n[1]!==void 0?n[1]:!1;try{var s=yield r.requestCallback(e,i);r.attemptAuthDeferred.resolve(s),r.attemptAuthDeferred=null}catch(y){var a,o,l,c,d=y instanceof On?y:null,f=(a=d==null||(o=d.data)===null||o===void 0?void 0:o.flows)!==null&&a!==void 0?a:null,p=((l=r.data)===null||l===void 0?void 0:l.flows)||!!f;if(!d||d.httpStatus!==401||!d.data||!p)if(i)A.log("Background poll request failed doing UI auth: ignoring",y);else{var g;(g=r.attemptAuthDeferred)===null||g===void 0||g.reject(y)}d&&!d.data&&(d.data={}),d&&!d.data.flows&&!d.data.completed&&!d.data.session&&(d.data.flows=r.data.flows,d.data.completed=r.data.completed,d.data.session=r.data.session),d&&(r.data=d.data);try{r.startNextAuthStage()}catch(v){r.attemptAuthDeferred.reject(v),r.attemptAuthDeferred=null;return}if(!r.emailSid&&(c=r.chosenFlow)!==null&&c!==void 0&&c.stages.includes(vk.Email))try{yield r.requestEmailToken()}catch(v){r.attemptAuthDeferred.reject(v),r.attemptAuthDeferred=null}}})()}startNextAuthStage(){var e,n,r=this.chooseStage();if(!r)throw new Error("No incomplete flows from the server");if(this.currentStage=r,r===vk.Dummy){this.submitAuthDict({type:"m.login.dummy"});return}if((e=this.data)!==null&&e!==void 0&&e.errcode||(n=this.data)!==null&&n!==void 0&&n.error){var i,s;this.stateUpdatedCallback(r,{errcode:((i=this.data)===null||i===void 0?void 0:i.errcode)||"",error:((s=this.data)===null||s===void 0?void 0:s.error)||""});return}this.stateUpdatedCallback(r,r===p3?{emailSid:this.emailSid}:{})}chooseStage(){this.chosenFlow===null&&(this.chosenFlow=this.chooseFlow()),A.log("Active flow => %s",JSON.stringify(this.chosenFlow));var e=this.firstUncompletedStage(this.chosenFlow);return A.log("Next stage: %s",e),e}scoreFlow(e){var n=e.stages.length;return this.supportedStages!==void 0&&(n+=e.stages.filter(r=>!this.supportedStages.has(r)).length*10),n}chooseFlow(){var e,n=((e=this.data)===null||e===void 0?void 0:e.flows)||[],r=!!this.inputs.emailAddress||!!this.emailSid,i=!!this.inputs.phoneCountry&&!!this.inputs.phoneNumber;n.sort((d,f)=>this.scoreFlow(d)-this.scoreFlow(f));for(var s of n){var a=!1,o=!1;for(var l of s.stages)l===p3?a=!0:l==WU&&(o=!0);if(a==r&&o==i)return s}var c=[];throw r&&c.push(p3),i&&c.push(WU),new vz("No appropriate authentication flow found",c,n)}firstUncompletedStage(e){var n,r=((n=this.data)===null||n===void 0?void 0:n.completed)||[];return e.stages.find(i=>!r.includes(i))}}function yz(t,e){return new Promise((n,r)=>{var i=!0,s=t.open(e);s.onupgradeneeded=()=>{i=!1},s.onblocked=()=>r(s.error),s.onsuccess=()=>{var a=s.result;a.close(),i||t.deleteDatabase(e),n(i)},s.onerror=()=>r(s.error)})}var _z=[t=>{t.createObjectStore("users",{keyPath:["userId"]}),t.createObjectStore("accountData",{keyPath:["type"]}),t.createObjectStore("sync",{keyPath:["clobber"]})},t=>{var e=t.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]});e.createIndex("room","room_id")},t=>{t.createObjectStore("client_options",{keyPath:["clobber"]})},t=>{t.createObjectStore("to_device_queue",{autoIncrement:!0})}],ome=_z.length;function av(t,e,n){var r=t.openCursor(e);return new Promise((i,s)=>{var a=[];r.onerror=()=>{var o;s(new Error("Query failed: "+((o=r.error)===null||o===void 0?void 0:o.name)))},r.onsuccess=()=>{var o=r.result;if(!o){i(a);return}a.push(n(o)),o.continue()}})}function A1(t){return new Promise((e,n)=>{t.oncomplete=function(r){e(r)},t.onerror=function(){n(t.error)}})}function Cz(t){return new Promise((e,n)=>{t.onsuccess=function(r){e(r)},t.onerror=function(){n(t.error)}})}function lme(t){return new Promise((e,n)=>{t.onsuccess=()=>e(t),t.onerror=r=>n(r)})}function Mb(t){return Cz(t).then(e=>t.result)}class YU{static exists(e,n){return n="matrix-js-sdk:"+(n||"default"),yz(e,n)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default";this.indexedDB=e,P(this,"dbName",void 0),P(this,"syncAccumulator",void 0),P(this,"db",void 0),P(this,"disconnected",!0),P(this,"_isNewlyCreated",!1),P(this,"syncToDatabasePromise",void 0),P(this,"pendingUserPresenceData",[]),this.dbName="matrix-js-sdk:"+n,this.syncAccumulator=new pz}connect(e){var n=this;if(!this.disconnected)return A.log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),Promise.resolve();this.disconnected=!1,A.log("LocalIndexedDBStoreBackend.connect: connecting...");var r=this.indexedDB.open(this.dbName,ome);return r.onupgradeneeded=i=>{var s=r.result,a=i.oldVersion;A.log("LocalIndexedDBStoreBackend.connect: upgrading from ".concat(a)),a<1&&(this._isNewlyCreated=!0),_z.forEach((o,l)=>{a<=l&&o(s)})},r.onblocked=()=>{A.log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},A.log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),Cz(r).then(F(function*(){A.log("LocalIndexedDBStoreBackend.connect: connected"),n.db=r.result,n.db.onversionchange=()=>{var i;(i=n.db)===null||i===void 0||i.close(),n.disconnected=!0,n.db=void 0},n.db.onclose=()=>{n.disconnected=!0,n.db=void 0,e==null||e()},yield n.init()}))}isNewlyCreated(){return Promise.resolve(this._isNewlyCreated)}init(){return Promise.all([this.loadAccountData(),this.loadSyncData()]).then(e=>{var[n,r]=e;A.log("LocalIndexedDBStoreBackend: loaded initial data"),this.syncAccumulator.accumulate({next_batch:r.nextBatch,rooms:r.roomsData,account_data:{events:n}},!0)})}getOutOfBandMembers(e){return new Promise((n,r)=>{var i=this.db.transaction(["oob_membership_events"],"readonly"),s=i.objectStore("oob_membership_events"),a=s.index("room"),o=IDBKeyRange.only(e),l=a.openCursor(o),c=[],d=!1;l.onsuccess=()=>{var f=l.result;if(!f)return!c.length&&!d?n(null):n(c);var p=f.value;p.oob_written?d=!0:c.push(p),f.continue()},l.onerror=f=>{r(f)}}).then(n=>(A.log("LL: got ".concat(n==null?void 0:n.length," membershipEvents from storage for room ").concat(e," ...")),n))}setOutOfBandMembers(e,n){var r=this;return F(function*(){A.log("LL: backend about to store ".concat(n.length)+" members for ".concat(e));var i=r.db.transaction(["oob_membership_events"],"readwrite"),s=i.objectStore("oob_membership_events");n.forEach(o=>{s.put(o)});var a={room_id:e,oob_written:!0,state_key:0};s.put(a),yield A1(i),A.log("LL: backend done storing for ".concat(e,"!"))})()}clearOutOfBandMembers(e){var n=this;return F(function*(){var r=n.db.transaction(["oob_membership_events"],"readonly"),i=r.objectStore("oob_membership_events"),s=i.index("room"),a=IDBKeyRange.only(e),o=Mb(s.openKeyCursor(a,"next")).then(y=>(y==null?void 0:y.primaryKey)[1]),l=Mb(s.openKeyCursor(a,"prev")).then(y=>(y==null?void 0:y.primaryKey)[1]),[c,d]=yield Promise.all([o,l]),f=n.db.transaction(["oob_membership_events"],"readwrite"),p=f.objectStore("oob_membership_events"),g=IDBKeyRange.bound([e,c],[e,d]);A.log("LL: Deleting all users + marker in storage for room ".concat(e,", with key range:"),[e,c],[e,d]),yield lme(p.delete(g))})()}clearDatabase(){return new Promise(e=>{var n;A.log("Removing indexeddb instance: ".concat(this.dbName)),(n=this.db)===null||n===void 0||n.close();var r=this.indexedDB.deleteDatabase(this.dbName);r.onblocked=()=>{A.log("can't yet delete indexeddb ".concat(this.dbName," because it is open elsewhere"))},r.onerror=()=>{var i;A.warn("unable to delete js-sdk store indexeddb: ".concat((i=r.error)===null||i===void 0?void 0:i.name)),e()},r.onsuccess=()=>{A.log("Removed indexeddb instance: ".concat(this.dbName)),e()}})}getSavedSync(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=this.syncAccumulator.getJSON();return n.nextBatch?e?Promise.resolve(Wg(n)):Promise.resolve(n):Promise.resolve(null)}getNextBatchToken(){return Promise.resolve(this.syncAccumulator.getNextBatchToken())}setSyncData(e){return Promise.resolve().then(()=>{this.syncAccumulator.accumulate(e)})}syncToDatabase(e){var n=this;return F(function*(){return n.syncToDatabasePromise?(A.warn("Skipping syncToDatabase() as persist already in flight"),n.pendingUserPresenceData.push(...e),n.syncToDatabasePromise):(e.unshift(...n.pendingUserPresenceData),n.syncToDatabasePromise=n.doSyncToDatabase(e),n.syncToDatabasePromise)})()}doSyncToDatabase(e){var n=this;return F(function*(){try{var r=n.syncAccumulator.getJSON(!0);yield Promise.all([n.persistUserPresenceEvents(e),n.persistAccountData(r.accountData),n.persistSyncData(r.nextBatch,r.roomsData)])}finally{n.syncToDatabasePromise=void 0}})()}persistSyncData(e,n){return A.log("Persisting sync data up to",e),kf(()=>{var r=this.db.transaction(["sync"],"readwrite"),i=r.objectStore("sync");return i.put({clobber:"-",nextBatch:e,roomsData:n}),A1(r).then(()=>{A.log("Persisted sync data up to",e)})})}persistAccountData(e){return kf(()=>{var n=this.db.transaction(["accountData"],"readwrite"),r=n.objectStore("accountData");for(var i of e)r.put(i);return A1(n).then()})}persistUserPresenceEvents(e){return kf(()=>{var n=this.db.transaction(["users"],"readwrite"),r=n.objectStore("users");for(var i of e)r.put({userId:i[0],event:i[1]});return A1(n).then()})}getUserPresenceEvents(){return kf(()=>{var e=this.db.transaction(["users"],"readonly"),n=e.objectStore("users");return av(n,void 0,r=>[r.value.userId,r.value.event])})}loadAccountData(){return A.log("LocalIndexedDBStoreBackend: loading account data..."),kf(()=>{var e=this.db.transaction(["accountData"],"readonly"),n=e.objectStore("accountData");return av(n,void 0,r=>r.value).then(r=>(A.log("LocalIndexedDBStoreBackend: loaded account data"),r))})}loadSyncData(){return A.log("LocalIndexedDBStoreBackend: loading sync data..."),kf(()=>{var e=this.db.transaction(["sync"],"readonly"),n=e.objectStore("sync");return av(n,void 0,r=>r.value).then(r=>(A.log("LocalIndexedDBStoreBackend: loaded sync data"),r.length>1&&A.warn("loadSyncData: More than 1 sync row found."),r.length>0?r[0]:{}))})}getClientOptions(){return Promise.resolve().then(()=>{var e=this.db.transaction(["client_options"],"readonly"),n=e.objectStore("client_options");return av(n,void 0,r=>{var i;return(i=r.value)===null||i===void 0?void 0:i.options}).then(r=>r[0])})}storeClientOptions(e){var n=this;return F(function*(){var r=n.db.transaction(["client_options"],"readwrite"),i=r.objectStore("client_options");i.put({clobber:"-",options:e}),yield A1(r)})()}saveToDeviceBatches(e){var n=this;return F(function*(){var r=n.db.transaction(["to_device_queue"],"readwrite"),i=r.objectStore("to_device_queue");for(var s of e)i.add(s);yield A1(r)})()}getOldestToDeviceBatch(){var e=this;return F(function*(){var n=e.db.transaction(["to_device_queue"],"readonly"),r=n.objectStore("to_device_queue"),i=yield Mb(r.openCursor());if(!i)return null;var s=i.value;return{id:i.key,txnId:s.txnId,eventType:s.eventType,batch:s.batch}})()}removeToDeviceBatch(e){var n=this;return F(function*(){var r=n.db.transaction(["to_device_queue"],"readwrite"),i=r.objectStore("to_device_queue");i.delete(e),yield A1(r)})()}destroy(){var e=this;return F(function*(){var n;(n=e.db)===null||n===void 0||n.close()})()}}class cme{constructor(e,n){this.workerFactory=e,this.dbName=n,P(this,"worker",void 0),P(this,"nextSeq",0),P(this,"inFlight",{}),P(this,"startPromise",void 0),P(this,"onWorkerMessage",r=>{var i=r.data;if(i.command=="closed"){var s;(s=this.onClose)===null||s===void 0||s.call(this)}else if(i.command=="cmd_success"||i.command=="cmd_fail"){if(i.seq===void 0){A.error("Got reply from worker with no seq");return}var a=this.inFlight[i.seq];if(a===void 0){A.error("Got reply for unknown seq "+i.seq);return}if(delete this.inFlight[i.seq],i.command=="cmd_success")a.resolve(i.result);else{var o=new Error(i.error.message);o.name=i.error.name,a.reject(o)}}else A.warn("Unrecognised message from worker: ",i)})}connect(e){return this.onClose=e,this.ensureStarted().then(()=>this.doCmd("connect"))}clearDatabase(){return this.ensureStarted().then(()=>this.doCmd("clearDatabase"))}isNewlyCreated(){return this.doCmd("isNewlyCreated")}getSavedSync(){return this.doCmd("getSavedSync")}getNextBatchToken(){return this.doCmd("getNextBatchToken")}setSyncData(e){return this.doCmd("setSyncData",[e])}syncToDatabase(e){return this.doCmd("syncToDatabase",[e])}getOutOfBandMembers(e){return this.doCmd("getOutOfBandMembers",[e])}setOutOfBandMembers(e,n){return this.doCmd("setOutOfBandMembers",[e,n])}clearOutOfBandMembers(e){return this.doCmd("clearOutOfBandMembers",[e])}getClientOptions(){return this.doCmd("getClientOptions")}storeClientOptions(e){return this.doCmd("storeClientOptions",[e])}getUserPresenceEvents(){return this.doCmd("getUserPresenceEvents")}saveToDeviceBatches(e){var n=this;return F(function*(){return n.doCmd("saveToDeviceBatches",[e])})()}getOldestToDeviceBatch(){var e=this;return F(function*(){return e.doCmd("getOldestToDeviceBatch")})()}removeToDeviceBatch(e){var n=this;return F(function*(){return n.doCmd("removeToDeviceBatch",[e])})()}ensureStarted(){return this.startPromise||(this.worker=this.workerFactory(),this.worker.onmessage=this.onWorkerMessage,this.startPromise=this.doCmd("setupWorker",[this.dbName]).then(()=>{A.log("IndexedDB worker is ready")})),this.startPromise}doCmd(e,n){return Promise.resolve().then(()=>{var r,i=this.nextSeq++,s=Promise.withResolvers();return this.inFlight[i]=s,(r=this.worker)===null||r===void 0||r.postMessage({command:e,seq:i,args:n}),s.promise})}destroy(){var e=this;return F(function*(){var n;(n=e.worker)===null||n===void 0||n.terminate()})()}}var ume=1e3*60*5;class bz extends ng{static exists(e,n){return YU.exists(e,n)}constructor(e){if(super(e),P(this,"backend",void 0),P(this,"startedUp",!1),P(this,"syncTs",0),P(this,"userModifiedMap",{}),P(this,"emitter",new Un),P(this,"onClose",()=>{this.emitter.emit("closed")}),P(this,"getSavedSync",this.degradable(()=>this.backend.getSavedSync(),"getSavedSync")),P(this,"isNewlyCreated",this.degradable(()=>this.backend.isNewlyCreated(),"isNewlyCreated")),P(this,"getSavedSyncToken",this.degradable(()=>this.backend.getNextBatchToken(),"getSavedSyncToken")),P(this,"deleteAllData",this.degradable(()=>(super.deleteAllData(),this.backend.clearDatabase().then(()=>{A.log("Deleted indexeddb data.")},n=>{throw A.error("Failed to delete indexeddb data: ".concat(n)),n})),null)),P(this,"reallySave",this.degradable(()=>{this.syncTs=Date.now();var n=[];for(var r of this.getUsers())this.userModifiedMap[r.userId]!==r.getLastModifiedTime()&&r.events.presence&&(n.push([r.userId,r.events.presence.event]),this.userModifiedMap[r.userId]=r.getLastModifiedTime());return this.backend.syncToDatabase(n)},null)),P(this,"setSyncData",this.degradable(n=>this.backend.setSyncData(n),"setSyncData")),P(this,"getOutOfBandMembers",this.degradable(n=>this.backend.getOutOfBandMembers(n),"getOutOfBandMembers")),P(this,"setOutOfBandMembers",this.degradable((n,r)=>(super.setOutOfBandMembers(n,r),this.backend.setOutOfBandMembers(n,r)),"setOutOfBandMembers")),P(this,"clearOutOfBandMembers",this.degradable(n=>(super.clearOutOfBandMembers(n),this.backend.clearOutOfBandMembers(n)),"clearOutOfBandMembers")),P(this,"getClientOptions",this.degradable(()=>this.backend.getClientOptions(),"getClientOptions")),P(this,"storeClientOptions",this.degradable(n=>(super.storeClientOptions(n),this.backend.storeClientOptions(n)),"storeClientOptions")),!e.indexedDB)throw new Error("Missing required option: indexedDB");e.workerFactory?this.backend=new cme(e.workerFactory,e.dbName):this.backend=new YU(e.indexedDB,e.dbName)}on(e,n){this.emitter.on(e,n)}startup(){return this.startedUp?(A.log("IndexedDBStore.startup: already started"),Promise.resolve()):(A.log("IndexedDBStore.startup: connecting to backend"),this.backend.connect(this.onClose).then(()=>(A.log("IndexedDBStore.startup: loading presence events"),this.backend.getUserPresenceEvents())).then(e=>{A.log("IndexedDBStore.startup: processing presence events"),e.forEach(n=>{var[r,i]=n;if(!this.createUser)throw new Error("`IndexedDBStore.startup` must be called after assigning it to the client, not before!");var s=this.createUser(r);i&&s.setPresenceEvent(new $i(i)),this.userModifiedMap[s.userId]=s.getLastModifiedTime(),this.storeUser(s)}),this.startedUp=!0}))}destroy(){return this.backend.destroy()}wantsSave(){var e=Date.now();return e-this.syncTs>ume}save(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return e||this.wantsSave()?this.reallySave():Promise.resolve()}degradable(e,n){var r=this,i=n?super[n]:null;return F(function*(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];try{return yield e.call(r,...a)}catch(l){A.error("IndexedDBStore failure, degrading to MemoryStore",l),r.emitter.emit("degraded",l);try{A.log("IndexedDBStore trying to delete degraded data"),yield r.backend.clearDatabase(),A.log("IndexedDBStore delete after degrading succeeded")}catch(c){A.warn("IndexedDBStore delete after degrading failed",c)}if(i)return i.call(r,...a)}})}getPendingEvents(e){var n=()=>super.getPendingEvents,r=this;return F(function*(){if(!r.localStorage)return n().call(r,e);var i=r.localStorage.getItem(Pb(e));if(i)try{return JSON.parse(i)}catch(s){A.error("Could not parse persisted pending events",s)}return[]})()}setPendingEvents(e,n){var r=()=>super.setPendingEvents,i=this;return F(function*(){if(!i.localStorage)return r().call(i,e,n);n.length>0?i.localStorage.setItem(Pb(e),JSON.stringify(n)):i.localStorage.removeItem(Pb(e))})()}saveToDeviceBatches(e){return this.backend.saveToDeviceBatches(e)}getOldestToDeviceBatch(){return this.backend.getOldestToDeviceBatch()}removeToDeviceBatch(e){return this.backend.removeToDeviceBatch(e)}}function Pb(t){return"mx_pending_events_".concat(t)}var Vo="crypto.",JU=Vo+"migration",Lb=Vo+"account",dme=Vo+"cross_signing_keys",R7=Vo+"inboundgroupsessions/",hme=Vo+"inboundgroupsessions.withheld/",fme=Vo+"rooms/",Ob=Vo+"sessionsneedingbackup";function Lf(t){return Vo+"sessions/"+t}function Ab(t,e){return R7+t+"/"+e}function mme(t,e){return hme+t+"/"+e}function pme(t){return fme+t}class P9 extends v9{static exists(e){for(var n=e.length,r=0;r<n;r++){var i;if((i=e.key(r))!==null&&i!==void 0&&i.startsWith(Vo))return!0}return!1}constructor(e){super(),this.store=e}containsData(){var e=this;return F(function*(){return P9.exists(e.store)})()}getMigrationState(){var e=this;return F(function*(){var n;return(n=ka(e.store,JU))!==null&&n!==void 0?n:em.NOT_STARTED})()}setMigrationState(e){var n=this;return F(function*(){N1(n.store,JU,e)})()}countEndToEndSessions(e,n){for(var r=0,i=0;i<this.store.length;++i){var s=this.store.key(i);if(s!=null&&s.startsWith(Lf(""))){var a=ka(this.store,s);r+=Object.keys(a??{}).length}}n(r)}_getEndToEndSessions(e){var n=ka(this.store,Lf(e)),r={};for(var[i,s]of Object.entries(n||{}))typeof s=="string"?r[i]={session:s}:r[i]=s;return r}getEndToEndSession(e,n,r,i){var s,a=this._getEndToEndSessions(e);i((s=a[n])!==null&&s!==void 0?s:{})}getEndToEndSessions(e,n,r){var i;r((i=this._getEndToEndSessions(e))!==null&&i!==void 0?i:{})}storeEndToEndSession(e,n,r,i){var s=this._getEndToEndSessions(e)||{};s[n]=r,N1(this.store,Lf(e),s)}getEndToEndSessionsBatch(){var e=this;return F(function*(){for(var n=[],r=0;r<e.store.length;++r){var i;if((i=e.store.key(r))!==null&&i!==void 0&&i.startsWith(Lf(""))){var s=e.store.key(r).split("/")[1];for(var a of Object.values(e._getEndToEndSessions(s)))if(n.push(a),n.length>=tm)return n}}return n.length===0?null:n})()}deleteEndToEndSessionsBatch(e){var n=this;return F(function*(){for(var{deviceKey:r,sessionId:i}of e){var s=n._getEndToEndSessions(r)||{};delete s[i],Object.keys(s).length===0?n.store.removeItem(Lf(r)):N1(n.store,Lf(r),s)}})()}getEndToEndInboundGroupSession(e,n,r,i){i(ka(this.store,Ab(e,n)),ka(this.store,mme(e,n)))}storeEndToEndInboundGroupSession(e,n,r,i){N1(this.store,Ab(e,n),r)}countEndToEndInboundGroupSessions(){var e=this;return F(function*(){for(var n=0,r=0;r<e.store.length;++r){var i=e.store.key(r);i!=null&&i.startsWith(R7)&&(n+=1)}return n})()}getEndToEndInboundGroupSessionsBatch(){var e=this;return F(function*(){for(var n=ka(e.store,Ob)||{},r=[],i=0;i<e.store.length;++i){var s=e.store.key(i);if(s!=null&&s.startsWith(R7)){var a=s.slice(R7.length);if(r.push({senderKey:a.slice(0,43),sessionId:a.slice(44),sessionData:ka(e.store,s),needsBackup:a in n}),r.length>=tm)return r}}return r.length===0?null:r})()}deleteEndToEndInboundGroupSessionsBatch(e){var n=this;return F(function*(){for(var{senderKey:r,sessionId:i}of e){var s=Ab(r,i);n.store.removeItem(s)}})()}getEndToEndRooms(e,n){for(var r={},i=pme(""),s=0;s<this.store.length;++s){var a=this.store.key(s);if(a!=null&&a.startsWith(i)){var o=a.slice(i.length);r[o]=ka(this.store,a)}}n(r)}markSessionsNeedingBackup(e){var n=ka(this.store,Ob)||{};for(var r of e)n[r.senderKey+"/"+r.sessionId]=!0;return N1(this.store,Ob,n),Promise.resolve()}deleteAllData(){return this.store.removeItem(Lb),Promise.resolve()}getAccount(e,n){var r=ka(this.store,Lb);n(r)}storeAccount(e,n){N1(this.store,Lb,n)}getCrossSigningKeys(e,n){var r=ka(this.store,dme);n(r)}getSecretStorePrivateKey(e,n,r){var i=ka(this.store,Vo+"ssss_cache.".concat(r));n(i)}storeSecretStorePrivateKey(e,n,r){N1(this.store,Vo+"ssss_cache.".concat(n),r)}doTxn(e,n,r){return Promise.resolve(r(null))}}function ka(t,e){try{return JSON.parse(t.getItem(e))}catch(n){A.log("Error: Failed to get key %s: %s",e,n.message),A.log(n.stack)}return null}function N1(t,e,n){t.setItem(e,JSON.stringify(n))}let gme=class{constructor(e){this.db=e,P(this,"nextTxnId",0),e.onversionchange=()=>{A.log("versionchange for indexeddb ".concat(this.db.name,": closing")),e.close()}}containsData(){return F(function*(){throw Error("Not implemented for Backend")})()}startup(){var e=this;return F(function*(){return e})()}deleteAllData(){return F(function*(){throw Error("This is not implemented, call IDBFactory::deleteDatabase(dbName) instead.")})()}getMigrationState(){var e=this;return F(function*(){var n=em.NOT_STARTED;return yield e.doTxn("readonly",[jt.STORE_ACCOUNT],r=>{var i=r.objectStore(jt.STORE_ACCOUNT),s=i.get(Lw);s.onsuccess=()=>{var a;n=(a=s.result)!==null&&a!==void 0?a:em.NOT_STARTED}}),n})()}setMigrationState(e){var n=this;return F(function*(){yield n.doTxn("readwrite",[jt.STORE_ACCOUNT],r=>{var i=r.objectStore(jt.STORE_ACCOUNT);i.put(e,Lw)})})()}getAccount(e,n){var r=e.objectStore("account"),i=r.get("-");i.onsuccess=function(){try{n(i.result||null)}catch(s){ys(e,s)}}}storeAccount(e,n){var r=e.objectStore("account");r.put(n,"-")}getCrossSigningKeys(e,n){var r=e.objectStore("account"),i=r.get("crossSigningKeys");i.onsuccess=function(){try{n(i.result||null)}catch(s){ys(e,s)}}}getSecretStorePrivateKey(e,n,r){var i=e.objectStore("account"),s=i.get("ssss_cache:".concat(r));s.onsuccess=function(){try{n(s.result||null)}catch(a){ys(e,a)}}}storeSecretStorePrivateKey(e,n,r){var i=e.objectStore("account");i.put(r,"ssss_cache:".concat(n))}countEndToEndSessions(e,n){var r=e.objectStore("sessions"),i=r.count();i.onsuccess=function(){try{n(i.result)}catch(s){ys(e,s)}}}getEndToEndSessions(e,n,r){var i=n.objectStore("sessions"),s=i.index("deviceKey"),a=s.openCursor(e),o={};a.onsuccess=function(){var l=a.result;if(l)o[l.value.sessionId]={session:l.value.session,lastReceivedMessageTs:l.value.lastReceivedMessageTs},l.continue();else try{r(o)}catch(c){ys(n,c)}}}getEndToEndSession(e,n,r,i){var s=r.objectStore("sessions"),a=s.get([e,n]);a.onsuccess=function(){try{a.result?i({session:a.result.session,lastReceivedMessageTs:a.result.lastReceivedMessageTs}):i(null)}catch(o){ys(r,o)}}}storeEndToEndSession(e,n,r,i){var s=i.objectStore("sessions");s.put({deviceKey:e,sessionId:n,session:r.session,lastReceivedMessageTs:r.lastReceivedMessageTs})}getEndToEndSessionsBatch(){var e=this;return F(function*(){var n=[];return yield e.doTxn("readonly",[jt.STORE_SESSIONS],r=>{var i=r.objectStore(jt.STORE_SESSIONS),s=i.openCursor();s.onsuccess=function(){try{var a=s.result;a&&(n.push(a.value),n.length<tm&&a.continue())}catch(o){ys(r,o)}}}),n.length===0?null:n})()}deleteEndToEndSessionsBatch(e){var n=this;return F(function*(){yield n.doTxn("readwrite",[jt.STORE_SESSIONS],function(){var r=F(function*(i){try{var s=i.objectStore(jt.STORE_SESSIONS),a=function*(){var d=s.delete([o,l]);yield new Promise(f=>{d.onsuccess=f})};for(var{deviceKey:o,sessionId:l}of e)yield*a()}catch(c){ys(i,c)}});return function(i){return r.apply(this,arguments)}}())})()}getEndToEndInboundGroupSession(e,n,r,i){var s=!1,a=!1,o=r.objectStore("inbound_group_sessions"),l=o.get([e,n]);l.onsuccess=function(){try{l.result?s=l.result.session:s=null,a!==!1&&i(s,a)}catch(f){ys(r,f)}};var c=r.objectStore("inbound_group_sessions_withheld"),d=c.get([e,n]);d.onsuccess=function(){try{d.result?a=d.result.session:a=null,s!==!1&&i(s,a)}catch(f){ys(r,f)}}}storeEndToEndInboundGroupSession(e,n,r,i){var s=i.objectStore("inbound_group_sessions");s.put({senderCurve25519Key:e,sessionId:n,session:r})}countEndToEndInboundGroupSessions(){var e=this;return F(function*(){var n=0;return yield e.doTxn("readonly",[jt.STORE_INBOUND_GROUP_SESSIONS],r=>{var i=r.objectStore(jt.STORE_INBOUND_GROUP_SESSIONS),s=i.count();s.onsuccess=()=>{n=s.result}}),n})()}getEndToEndInboundGroupSessionsBatch(){var e=this;return F(function*(){var n=[];return yield e.doTxn("readonly",[jt.STORE_INBOUND_GROUP_SESSIONS,jt.STORE_BACKUP],r=>{var i=r.objectStore(jt.STORE_INBOUND_GROUP_SESSIONS),s=r.objectStore(jt.STORE_BACKUP),a=i.openCursor();a.onsuccess=function(){try{var o=a.result;if(o){var l=s.get(o.key);l.onsuccess=()=>{n.push({senderKey:o.value.senderCurve25519Key,sessionId:o.value.sessionId,sessionData:o.value.session,needsBackup:l.result!==void 0}),n.length<tm&&o.continue()}}}catch(c){ys(r,c)}}}),n.length===0?null:n})()}deleteEndToEndInboundGroupSessionsBatch(e){var n=this;return F(function*(){yield n.doTxn("readwrite",[jt.STORE_INBOUND_GROUP_SESSIONS],function(){var r=F(function*(i){try{var s=i.objectStore(jt.STORE_INBOUND_GROUP_SESSIONS),a=function*(){var d=s.delete([o,l]);yield new Promise(f=>{d.onsuccess=f})};for(var{senderKey:o,sessionId:l}of e)yield*a()}catch(c){ys(i,c)}});return function(i){return r.apply(this,arguments)}}())})()}getEndToEndDeviceData(e,n){var r=e.objectStore("device_data"),i=r.get("-");i.onsuccess=function(){try{n(i.result||null)}catch(s){ys(e,s)}}}getEndToEndRooms(e,n){var r={},i=e.objectStore("rooms"),s=i.openCursor();s.onsuccess=function(){var a=s.result;if(a)r[a.key]=a.value,a.continue();else try{n(r)}catch(o){ys(e,o)}}}markSessionsNeedingBackup(e,n){var r=this;return F(function*(){n||(n=r.db.transaction("sessions_needing_backup","readwrite"));var i=n.objectStore("sessions_needing_backup");yield Promise.all(e.map(s=>new Promise((a,o)=>{var l=i.put({senderCurve25519Key:s.senderKey,sessionId:s.sessionId});l.onsuccess=a,l.onerror=o})))})()}doTxn(e,n,r){var i=this.db.transaction(n,e),s=_me(i),a=r(i);return s.then(()=>a)}};var Ez=[t=>{yme(t)},t=>{t.createObjectStore("account")},t=>{var e=t.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]});e.createIndex("deviceKey","deviceKey")},t=>{t.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]})},t=>{t.createObjectStore("device_data")},t=>{t.createObjectStore("rooms")},t=>{t.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]})},t=>{t.createObjectStore("inbound_group_sessions_withheld",{keyPath:["senderCurve25519Key","sessionId"]})},t=>{var e=t.createObjectStore("session_problems",{keyPath:["deviceKey","time"]});e.createIndex("deviceKey","deviceKey"),t.createObjectStore("notified_error_devices",{keyPath:["userId","deviceId"]})},t=>{t.createObjectStore("shared_history_inbound_group_sessions",{keyPath:["roomId"]})},t=>{t.createObjectStore("parked_shared_history",{keyPath:["roomId"]})}],Sz=Ez.length;function vme(t,e){A.log("Upgrading IndexedDBCryptoStore from version ".concat(e)+" to ".concat(Sz)),Ez.forEach((n,r)=>{e<=r&&n(t)})}function yme(t){var e=t.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});e.createIndex("session",["requestBody.room_id","requestBody.session_id"]),e.createIndex("state","state")}function ys(t,e){t._mx_abortexception=e;try{t.abort()}catch{}}function _me(t){return new Promise((e,n)=>{t.oncomplete=()=>{t._mx_abortexception!==void 0&&n(t._mx_abortexception),e(null)},t.onerror=r=>{t._mx_abortexception!==void 0?n(t._mx_abortexception):(A.log("Error performing indexeddb txn",r),n(t.error))},t.onabort=r=>{t._mx_abortexception!==void 0?n(t._mx_abortexception):(A.log("Error performing indexeddb txn",r),n(t.error))}})}class jt{static exists(e,n){return yz(e,n)}static existsAndIsNotMigrated(e,n){return new Promise((r,i)=>{var s=!0,a=e.open(n);a.onupgradeneeded=()=>{s=!1},a.onblocked=()=>i(a.error),a.onsuccess=()=>{var o=a.result;if(!s)o.close(),e.deleteDatabase(n),r(!1);else{var l=o.transaction([jt.STORE_ACCOUNT],"readonly"),c=l.objectStore(jt.STORE_ACCOUNT),d=c.get(Lw);d.onsuccess=()=>{var f,p=(f=d.result)!==null&&f!==void 0?f:em.NOT_STARTED;r(p===em.NOT_STARTED)},d.onerror=()=>{i(d.error)},o.close()}},a.onerror=()=>i(a.error)})}constructor(e,n){this.indexedDB=e,this.dbName=n,P(this,"backendPromise",void 0),P(this,"backend",void 0)}containsData(){var e=this;return F(function*(){return jt.exists(e.indexedDB,e.dbName)})()}startup(){return this.backendPromise?this.backendPromise:(this.backendPromise=new Promise((e,n)=>{if(!this.indexedDB){n(new Error("no indexeddb support available"));return}A.log("connecting to indexeddb ".concat(this.dbName));var r=this.indexedDB.open(this.dbName,Sz);r.onupgradeneeded=i=>{var s=r.result,a=i.oldVersion;vme(s,a)},r.onblocked=()=>{A.log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},r.onerror=i=>{A.log("Error connecting to indexeddb",i),n(r.error)},r.onsuccess=()=>{var i=r.result;A.log("connected to indexeddb ".concat(this.dbName)),e(new gme(i))}}).then(e=>e.doTxn("readonly",[jt.STORE_INBOUND_GROUP_SESSIONS,jt.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],n=>{e.getEndToEndInboundGroupSession("","",n,()=>{})}).then(()=>e)).catch(e=>{if(e.name==="VersionError")throw A.warn("Crypto DB is too new for us to use!",e),new XI(QI.TooNew);A.warn("unable to connect to indexeddb ".concat(this.dbName)+": falling back to localStorage store: ".concat(e));try{if(!(globalThis.localStorage instanceof Storage))throw new Error("localStorage is not available");return new P9(globalThis.localStorage)}catch(n){return A.warn("Unable to open localStorage: falling back to in-memory store: ".concat(n)),new v9}}).then(e=>(this.backend=e,e)),this.backendPromise)}deleteAllData(){return new Promise((e,n)=>{if(!this.indexedDB){n(new Error("no indexeddb support available"));return}A.log("Removing indexeddb instance: ".concat(this.dbName));var r=this.indexedDB.deleteDatabase(this.dbName);r.onblocked=()=>{A.log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},r.onerror=i=>{A.log("Error deleting data from indexeddb",i),n(r.error)},r.onsuccess=()=>{A.log("Removed indexeddb instance: ".concat(this.dbName)),e()}}).catch(e=>{A.warn("unable to delete IndexedDBCryptoStore: ".concat(e))})}getMigrationState(){return this.backend.getMigrationState()}setMigrationState(e){return this.backend.setMigrationState(e)}getAccount(e,n){this.backend.getAccount(e,n)}storeAccount(e,n){this.backend.storeAccount(e,n)}getCrossSigningKeys(e,n){this.backend.getCrossSigningKeys(e,n)}getSecretStorePrivateKey(e,n,r){this.backend.getSecretStorePrivateKey(e,n,r)}storeSecretStorePrivateKey(e,n,r){this.backend.storeSecretStorePrivateKey(e,n,r)}countEndToEndSessions(e,n){this.backend.countEndToEndSessions(e,n)}getEndToEndSession(e,n,r,i){this.backend.getEndToEndSession(e,n,r,i)}getEndToEndSessions(e,n,r){this.backend.getEndToEndSessions(e,n,r)}storeEndToEndSession(e,n,r,i){this.backend.storeEndToEndSession(e,n,r,i)}countEndToEndInboundGroupSessions(){return this.backend.countEndToEndInboundGroupSessions()}getEndToEndSessionsBatch(){return this.backend.getEndToEndSessionsBatch()}deleteEndToEndSessionsBatch(e){return this.backend.deleteEndToEndSessionsBatch(e)}getEndToEndInboundGroupSession(e,n,r,i){this.backend.getEndToEndInboundGroupSession(e,n,r,i)}storeEndToEndInboundGroupSession(e,n,r,i){this.backend.storeEndToEndInboundGroupSession(e,n,r,i)}getEndToEndInboundGroupSessionsBatch(){return this.backend.getEndToEndInboundGroupSessionsBatch()}deleteEndToEndInboundGroupSessionsBatch(e){return this.backend.deleteEndToEndInboundGroupSessionsBatch(e)}getEndToEndRooms(e,n){this.backend.getEndToEndRooms(e,n)}markSessionsNeedingBackup(e,n){return this.backend.markSessionsNeedingBackup(e,n)}doTxn(e,n,r,i){return this.backend.doTxn(e,n,r,i)}}P(jt,"STORE_ACCOUNT","account");P(jt,"STORE_SESSIONS","sessions");P(jt,"STORE_INBOUND_GROUP_SESSIONS","inbound_group_sessions");P(jt,"STORE_INBOUND_GROUP_SESSIONS_WITHHELD","inbound_group_sessions_withheld");P(jt,"STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS","shared_history_inbound_group_sessions");P(jt,"STORE_PARKED_SHARED_HISTORY","parked_shared_history");P(jt,"STORE_DEVICE_DATA","device_data");P(jt,"STORE_ROOMS","rooms");P(jt,"STORE_BACKUP","sessions_needing_backup");var Cme=function(t){return t.Email="email",t.Phone="msisdn",t}({}),bme=new br("delegated_oidc_compatibility","org.matrix.msc3824.delegated_oidc_compatibility"),Eme=function(t){return t.Gitlab="gitlab",t.Github="github",t.Apple="apple",t.Google="google",t.Facebook="facebook",t.Twitter="twitter",t}({}),Sme=function(t){return t.LOGIN="login",t.REGISTER="register",t}({}),wme="us.cloke.msc4175.tz";class kme{constructor(e){P(this,"relations",void 0),this.relations=e.filter(n=>!!n)}getRelations(){return this.relations.reduce((e,n)=>[...e,...n.getRelations()],[])}on(e,n){this.relations.forEach(r=>r.on(e,n))}off(e,n){this.relations.forEach(r=>r.off(e,n))}}var Tme=function(t){return t.Global="Global",t.SetItemError="setItem",t.GetItemError="getItem",t.RemoveItemError="removeItem",t.ClearError="clear",t.QuotaExceededError="QuotaExceededError",t}({});class Rme extends Un{}var Ime=new Rme,wz=()=>new v9;function kz(t){wz=t}function Tz(t){var e,n,r;return t.store=(e=t.store)!==null&&e!==void 0?e:new ng({localStorage:globalThis.localStorage}),t.scheduler=(n=t.scheduler)!==null&&n!==void 0?n:new nm,t.cryptoStore=(r=t.cryptoStore)!==null&&r!==void 0?r:wz(),t}function L9(t){return new M9(Tz(t))}function Rz(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return new mz(t,e,n,Tz(r),i)}const xme=Object.freeze(Object.defineProperty({__proto__:null,AuthType:vk,AutoDiscovery:dt,AutoDiscoveryAction:ia,AutoDiscoveryError:io,Beacon:mZ,BeaconEvent:Ln,CallEvent:_t,CallFeedEvent:vl,Category:gc,ClientEvent:Le,ClientPrefix:Ur,ClientStoppedError:i2e,ConditionKind:Tr,ConditionOperator:Tfe,ConnectionError:jh,ContentHelpers:she,DELEGATED_OIDC_COMPATIBILITY:bme,DEVICE_CODE_SCOPE:j2e,DMMemberCountCondition:Rfe,Device:ime,DeviceVerification:gz,Direction:Ct,DuplicateStrategy:u0,EVENT_VISIBILITY_CHANGE_TYPE:X1,EventEmitterEvents:HK,EventStatus:lt,EventTimeline:Me,EventTimelineSet:a2,EventType:ee,FILTER_RELATED_BY_REL_TYPES:T2,FILTER_RELATED_BY_SENDERS:k2,FeatureSupport:ji,Filter:ws,GET_LOGIN_TOKEN_CAPABILITY:G2e,GroupCall:GI,GroupCallEvent:mn,GroupCallIntent:NZ,GroupCallState:Yn,GroupCallStatsReportEvent:W3,GroupCallType:w9,GuestAccess:D6,HTTPError:Dd,HistoryVisibility:zI,HttpApiEvent:Vw,IdentityPrefix:pc,IdentityProviderBrand:Eme,IndexedDBCryptoStore:jt,IndexedDBStore:bz,InteractiveAuth:ax,InvalidCryptoStoreError:XI,InvalidCryptoStoreState:QI,JoinRule:kd,KNOWN_SAFE_ROOM_VERSION:TZ,KeySignatureUploadError:r2e,KnownMembership:Ke,LOCAL_NOTIFICATION_SETTINGS_PREFIX:qK,LocalStorageCryptoStore:P9,LocalStorageErrors:Tme,LocationAssetType:X2,MAIN_ROOM_TIMELINE:zg,MAXIMUM_MATRIX_VERSION:Afe,MINIMUM_MATRIX_VERSION:Ofe,MSC3912_RELATION_BASED_REDACTIONS_PROP:Uw,M_ASSET:Kg,M_BEACON:tk,M_BEACON_INFO:WI,M_HTML:Q1e,M_LOCATION:Zg,M_MESSAGE:J1e,M_POLL_END:A6,M_POLL_KIND_DISCLOSED:ohe,M_POLL_KIND_UNDISCLOSED:lhe,M_POLL_RESPONSE:Y0,M_POLL_START:che,M_TEXT:NI,M_TIMESTAMP:e1,M_TOPIC:DI,MatrixClient:M9,MatrixError:On,MatrixEvent:$i,MatrixEventEvent:$t,MatrixHttpApi:SZ,MatrixScheduler:nm,MediaHandlerEvent:G1,MediaPrefix:C2,MemoryCryptoStore:v9,MemoryStore:ng,Method:oe,MsgType:Gl,NoAuthFlowFoundError:vz,NotificationCountType:Zt,OidcError:Hi,OidcTokenRefresher:$2e,PUSHER_DEVICE_ID:D1e,PUSHER_ENABLED:Fw,PendingEventOrdering:im,Poll:vZ,PollEvent:sd,Preset:T9,ProfileKeyMSC4175Timezone:wme,PushRuleActionName:wd,PushRuleKind:ai,REFERENCE_RELATION:rZ,ReceiptType:Qi,RelatedRelations:kme,RelationType:Sn,Relations:AI,RelationsEvent:y7,RestrictedAllowType:Dfe,Room:E9,RoomCreateTypeField:M6,RoomEvent:xe,RoomMember:Z0,RoomMemberEvent:xs,RoomNameType:gl,RoomState:tg,RoomStateEvent:vt,RoomSummary:tZ,RoomType:_2,RoomVersionStability:wZ,RoomWidgetClient:mz,RoomWidgetClientEvent:T7,RuleId:si,SERVICE_TYPES:Xw,SSOAction:Sme,SUPPORTED_MATRIX_VERSIONS:Q0,SearchOrderBy:FZ,SearchResult:k9,SecretStorage:t2e,ServerCapabilities:kZ,SetPresence:RZ,SlidingSyncEvent:ek,StatsReport:Hc,SyncAccumulator:pz,SyncState:Kt,THREAD_RELATION_TYPE:un,Thread:wn,ThreadEvent:Xi,ThreadFilterType:Ro,ThreepidMedium:Cme,TimelineIndex:gk,TimelineWindow:ame,ToDeviceMessageId:C9,TokenRefreshError:bZ,TokenRefreshLogoutError:jI,TweakName:KI,TypedEventEmitter:Un,UNSIGNED_MEMBERSHIP_FIELD:GK,UNSIGNED_THREAD_ID_FIELD:P6,UNSTABLE_ELEMENT_FUNCTIONAL_USERS:BK,UNSTABLE_MSC2666_MUTUAL_ROOMS:az,UNSTABLE_MSC2666_QUERY_MUTUAL_ROOMS:oz,UNSTABLE_MSC2666_SHARED_ROOMS:sz,UNSTABLE_MSC2716_MARKER:VK,UNSTABLE_MSC3088_ENABLED:Nw,UNSTABLE_MSC3088_PURPOSE:Aw,UNSTABLE_MSC3089_BRANCH:Pc,UNSTABLE_MSC3089_LEAF:$K,UNSTABLE_MSC3089_TREE_SUBTYPE:Dw,UNSTABLE_MSC3852_LAST_SEEN_UA:q2e,UNSTABLE_MSC4133_EXTENDED_PROFILES:lz,UNSTABLE_MSC4140_DELAYED_EVENTS:Il,UnsupportedDelayedEventsEndpointError:pd,UpdateDelayedEventAction:ah,User:Gc,UserEvent:Ei,Visibility:UZ,anySignal:EZ,calculateRetryBackoff:$I,completeAuthorizationCodeGrant:F2e,createClient:L9,createNewMatrixCall:J0,createRoomWidgetClient:Rz,decodeBase64:b2,decodeIdToken:tz,determineFeatureSupport:w7,discoverAndValidateOIDCIssuerWellKnown:ix,encodeBase64:_7,encodeUnpaddedBase64:LZ,encodeUnpaddedBase64Url:S9,fixNotificationCountOnDecryption:cz,generateAuthorizationParams:A2e,generateAuthorizationUrl:N2e,generateOidcAuthorizationUrl:D2e,generateScope:x9,getBeaconInfoIdentifier:O6,getHttpUriForMxc:y9,inMainTimelineForReceipt:eg,isDmMemberCountCondition:Ife,isEventTypeSame:X1e,isPollEvent:yZ,isTimestampInDuration:Hw,localStorageErrorsEventsEmitter:Ime,parseErrorResponse:HI,registerOidcClient:H2e,retryNetworkOperation:Bw,safeGetRetryAfterMs:FI,setCryptoStoreFactory:kz,threadFilterTypeToFilter:uz,threadIdForReceipt:sm,timeoutSignal:b9,validateAuthMetadata:ez,validateAuthMetadataAndKeys:sx,validateBearerTokenResponse:iz,validateIdToken:nz,validateStoredUserState:rz},Symbol.toStringTag,{value:"Module"}));if(globalThis.__js_sdk_entrypoint)throw new Error("Multiple matrix-js-sdk entrypoints detected!");globalThis.__js_sdk_entrypoint=!0;var yk;try{yk=globalThis.indexedDB}catch{}yk&&kz(()=>new jt(yk,"matrix-js-sdk:crypto"));globalThis.matrixcs=xme;var u=II();const be=zo(u),Iz=n1e({__proto__:null,default:be},[u]);var ov={},Nb={exports:{}},_s={},Db={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU;function Mme(){return QU||(QU=1,function(t){function e(q,G){var J=q.length;q.push(G);e:for(;0<J;){var B=J-1>>>1,Q=q[B];if(0<i(Q,G))q[B]=G,q[J]=Q,J=B;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var G=q[0],J=q.pop();if(J!==G){q[0]=J;e:for(var B=0,Q=q.length,pe=Q>>>1;B<pe;){var ve=2*(B+1)-1,Re=q[ve],Te=ve+1,Ce=q[Te];if(0>i(Re,J))Te<Q&&0>i(Ce,Re)?(q[B]=Ce,q[Te]=J,B=Te):(q[B]=Re,q[ve]=J,B=ve);else if(Te<Q&&0>i(Ce,J))q[B]=Ce,q[Te]=J,B=Te;else break e}}return G}function i(q,G){var J=q.sortIndex-G.sortIndex;return J!==0?J:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,f=null,p=3,g=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(q){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=q)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function w(q){if(v=!1,R(q),!y)if(n(l)!==null)y=!0,z(I);else{var G=n(c);G!==null&&K(w,G.startTime-q)}}function I(q,G){y=!1,v&&(v=!1,C(L),L=-1),g=!0;var J=p;try{for(R(G),f=n(l);f!==null&&(!(f.expirationTime>G)||q&&!U());){var B=f.callback;if(typeof B=="function"){f.callback=null,p=f.priorityLevel;var Q=B(f.expirationTime<=G);G=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(l)&&r(l),R(G)}else r(l);f=n(l)}if(f!==null)var pe=!0;else{var ve=n(c);ve!==null&&K(w,ve.startTime-G),pe=!1}return pe}finally{f=null,p=J,g=!1}}var k=!1,x=null,L=-1,N=5,D=-1;function U(){return!(t.unstable_now()-D<N)}function j(){if(x!==null){var q=t.unstable_now();D=q;var G=!0;try{G=x(!0,q)}finally{G?$():(k=!1,x=null)}}else k=!1}var $;if(typeof S=="function")$=function(){S(j)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,V=Z.port2;Z.port1.onmessage=j,$=function(){V.postMessage(null)}}else $=function(){b(j,0)};function z(q){x=q,k||(k=!0,$())}function K(q,G){L=b(function(){q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,z(I))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var J=p;p=G;try{return q()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=p;p=q;try{return G()}finally{p=J}},t.unstable_scheduleCallback=function(q,G,J){var B=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?B+J:B):J=B,q){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,q={id:d++,callback:G,priorityLevel:q,startTime:J,expirationTime:Q,sortIndex:-1},J>B?(q.sortIndex=J,e(c,q),n(l)===null&&q===n(c)&&(v?(C(L),L=-1):v=!0,K(w,J-B))):(q.sortIndex=Q,e(l,q),y||g||(y=!0,z(I))),q},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(q){var G=p;return function(){var J=p;p=G;try{return q.apply(this,arguments)}finally{p=J}}}}(Ub)),Ub}var XU;function Pme(){return XU||(XU=1,Db.exports=Mme()),Db.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eF;function Lme(){if(eF)return _s;eF=1;var t=II(),e=Pme();function n(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(h,m){a(h,m),a(h+"Capture",m)}function a(h,m){for(i[h]=m,h=0;h<m.length;h++)r.add(m[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function p(h){return l.call(f,h)?!0:l.call(d,h)?!1:c.test(h)?f[h]=!0:(d[h]=!0,!1)}function g(h,m,_,T){if(_!==null&&_.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return T?!1:_!==null?!_.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,m,_,T){if(m===null||typeof m>"u"||g(h,m,_,T))return!0;if(T)return!1;if(_!==null)switch(_.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function v(h,m,_,T,M,O,H){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=T,this.attributeNamespace=M,this.mustUseProperty=_,this.propertyName=h,this.type=m,this.sanitizeURL=O,this.removeEmptyString=H}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){b[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var m=h[0];b[m]=new v(m,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){b[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){b[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){b[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){b[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){b[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){b[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){b[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function S(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var m=h.replace(C,S);b[m]=new v(m,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var m=h.replace(C,S);b[m]=new v(m,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var m=h.replace(C,S);b[m]=new v(m,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){b[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),b.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){b[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function R(h,m,_,T){var M=b.hasOwnProperty(m)?b[m]:null;(M!==null?M.type!==0:T||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,_,M,T)&&(_=null),T||M===null?p(m)&&(_===null?h.removeAttribute(m):h.setAttribute(m,""+_)):M.mustUseProperty?h[M.propertyName]=_===null?M.type===3?!1:"":_:(m=M.attributeName,T=M.attributeNamespace,_===null?h.removeAttribute(m):(M=M.type,_=M===3||M===4&&_===!0?"":""+_,T?h.setAttributeNS(T,m,_):h.setAttribute(m,_))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),U=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(h){return h===null||typeof h!="object"?null:(h=q&&h[q]||h["@@iterator"],typeof h=="function"?h:null)}var J=Object.assign,B;function Q(h){if(B===void 0)try{throw Error()}catch(_){var m=_.stack.trim().match(/\n( *(at )?)/);B=m&&m[1]||""}return`
`+B+h}var pe=!1;function ve(h,m){if(!h||pe)return"";pe=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ae){var T=ae}Reflect.construct(h,[],m)}else{try{m.call()}catch(ae){T=ae}h.call(m.prototype)}else{try{throw Error()}catch(ae){T=ae}h()}}catch(ae){if(ae&&T&&typeof ae.stack=="string"){for(var M=ae.stack.split(`
`),O=T.stack.split(`
`),H=M.length-1,W=O.length-1;1<=H&&0<=W&&M[H]!==O[W];)W--;for(;1<=H&&0<=W;H--,W--)if(M[H]!==O[W]){if(H!==1||W!==1)do if(H--,W--,0>W||M[H]!==O[W]){var X=`
`+M[H].replace(" at new "," at ");return h.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",h.displayName)),X}while(1<=H&&0<=W);break}}}finally{pe=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?Q(h):""}function Re(h){switch(h.tag){case 5:return Q(h.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return h=ve(h.type,!1),h;case 11:return h=ve(h.type.render,!1),h;case 1:return h=ve(h.type,!0),h;default:return""}}function Te(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case x:return"Fragment";case k:return"Portal";case N:return"Profiler";case L:return"StrictMode";case $:return"Suspense";case Z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case U:return(h.displayName||"Context")+".Consumer";case D:return(h._context.displayName||"Context")+".Provider";case j:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case V:return m=h.displayName||null,m!==null?m:Te(h.type)||"Memo";case z:m=h._payload,h=h._init;try{return Te(h(m))}catch{}}return null}function Ce(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(m);case 8:return m===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function we(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Ee(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function ze(h){var m=Ee(h)?"checked":"value",_=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),T=""+h[m];if(!h.hasOwnProperty(m)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var M=_.get,O=_.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return M.call(this)},set:function(H){T=""+H,O.call(this,H)}}),Object.defineProperty(h,m,{enumerable:_.enumerable}),{getValue:function(){return T},setValue:function(H){T=""+H},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function qt(h){h._valueTracker||(h._valueTracker=ze(h))}function dr(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var _=m.getValue(),T="";return h&&(T=Ee(h)?h.checked?"true":"false":h.value),h=T,h!==_?(m.setValue(h),!0):!1}function nn(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function We(h,m){var _=m.checked;return J({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_??h._wrapperState.initialChecked})}function pi(h,m){var _=m.defaultValue==null?"":m.defaultValue,T=m.checked!=null?m.checked:m.defaultChecked;_=we(m.value!=null?m.value:_),h._wrapperState={initialChecked:T,initialValue:_,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function hr(h,m){m=m.checked,m!=null&&R(h,"checked",m,!1)}function Mi(h,m){hr(h,m);var _=we(m.value),T=m.type;if(_!=null)T==="number"?(_===0&&h.value===""||h.value!=_)&&(h.value=""+_):h.value!==""+_&&(h.value=""+_);else if(T==="submit"||T==="reset"){h.removeAttribute("value");return}m.hasOwnProperty("value")?va(h,m.type,_):m.hasOwnProperty("defaultValue")&&va(h,m.type,we(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(h.defaultChecked=!!m.defaultChecked)}function tl(h,m,_){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var T=m.type;if(!(T!=="submit"&&T!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+h._wrapperState.initialValue,_||m===h.value||(h.value=m),h.defaultValue=m}_=h.name,_!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,_!==""&&(h.name=_)}function va(h,m,_){(m!=="number"||nn(h.ownerDocument)!==h)&&(_==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+_&&(h.defaultValue=""+_))}var Ki=Array.isArray;function ds(h,m,_,T){if(h=h.options,m){m={};for(var M=0;M<_.length;M++)m["$"+_[M]]=!0;for(_=0;_<h.length;_++)M=m.hasOwnProperty("$"+h[_].value),h[_].selected!==M&&(h[_].selected=M),M&&T&&(h[_].defaultSelected=!0)}else{for(_=""+we(_),m=null,M=0;M<h.length;M++){if(h[M].value===_){h[M].selected=!0,T&&(h[M].defaultSelected=!0);return}m!==null||h[M].disabled||(m=h[M])}m!==null&&(m.selected=!0)}}function bu(h,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},m,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function lo(h,m){var _=m.value;if(_==null){if(_=m.children,m=m.defaultValue,_!=null){if(m!=null)throw Error(n(92));if(Ki(_)){if(1<_.length)throw Error(n(93));_=_[0]}m=_}m==null&&(m=""),_=m}h._wrapperState={initialValue:we(_)}}function m1(h,m){var _=we(m.value),T=we(m.defaultValue);_!=null&&(_=""+_,_!==h.value&&(h.value=_),m.defaultValue==null&&h.defaultValue!==_&&(h.defaultValue=_)),T!=null&&(h.defaultValue=""+T)}function nl(h){var m=h.textContent;m===h._wrapperState.initialValue&&m!==""&&m!==null&&(h.value=m)}function p1(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function g1(h,m){return h==null||h==="http://www.w3.org/1999/xhtml"?p1(m):h==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var co,tf=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,_,T,M){MSApp.execUnsafeLocalFunction(function(){return h(m,_,T,M)})}:h}(function(h,m){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=m;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=co.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;m.firstChild;)h.appendChild(m.firstChild)}});function rl(h,m){if(m){var _=h.firstChild;if(_&&_===h.lastChild&&_.nodeType===3){_.nodeValue=m;return}}h.textContent=m}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nc=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(h){nc.forEach(function(m){m=m+h.charAt(0).toUpperCase()+h.substring(1),Zi[m]=Zi[h]})});function pt(h,m,_){return m==null||typeof m=="boolean"||m===""?"":_||typeof m!="number"||m===0||Zi.hasOwnProperty(h)&&Zi[h]?(""+m).trim():m+"px"}function Fn(h,m){h=h.style;for(var _ in m)if(m.hasOwnProperty(_)){var T=_.indexOf("--")===0,M=pt(_,m[_],T);_==="float"&&(_="cssFloat"),T?h.setProperty(_,M):h[_]=M}}var Sr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eu(h,m){if(m){if(Sr[h]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,h));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function Su(h,m){if(h.indexOf("-")===-1)return typeof m.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function tt(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Mt=null,Pt=null,Et=null;function bn(h){if(h=jp(h)){if(typeof Mt!="function")throw Error(n(280));var m=h.stateNode;m&&(m=l8(m),Mt(h.stateNode,h.type,m))}}function gi(h){Pt?Et?Et.push(h):Et=[h]:Pt=h}function Wr(){if(Pt){var h=Pt,m=Et;if(Et=Pt=null,bn(h),m)for(h=0;h<m.length;h++)bn(m[h])}}function uo(h,m){return h(m)}function hs(){}var ho=!1;function fo(h,m,_){if(ho)return h(m,_);ho=!0;try{return uo(h,m,_)}finally{ho=!1,(Pt!==null||Et!==null)&&(hs(),Wr())}}function Pi(h,m){var _=h.stateNode;if(_===null)return null;var T=l8(_);if(T===null)return null;_=T[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(h=h.type,T=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!T;break e;default:h=!1}if(h)return null;if(_&&typeof _!="function")throw Error(n(231,m,typeof _));return _}var wu=!1;if(o)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){wu=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{wu=!1}function aue(h,m,_,T,M,O,H,W,X){var ae=Array.prototype.slice.call(arguments,3);try{m.apply(_,ae)}catch(ge){this.onError(ge)}}var Cp=!1,H4=null,$4=!1,w_=null,oue={onError:function(h){Cp=!0,H4=h}};function lue(h,m,_,T,M,O,H,W,X){Cp=!1,H4=null,aue.apply(oue,arguments)}function cue(h,m,_,T,M,O,H,W,X){if(lue.apply(this,arguments),Cp){if(Cp){var ae=H4;Cp=!1,H4=null}else throw Error(n(198));$4||($4=!0,w_=ae)}}function v1(h){var m=h,_=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(_=m.return),h=m.return;while(h)}return m.tag===3?_:null}function CO(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function bO(h){if(v1(h)!==h)throw Error(n(188))}function uue(h){var m=h.alternate;if(!m){if(m=v1(h),m===null)throw Error(n(188));return m!==h?null:h}for(var _=h,T=m;;){var M=_.return;if(M===null)break;var O=M.alternate;if(O===null){if(T=M.return,T!==null){_=T;continue}break}if(M.child===O.child){for(O=M.child;O;){if(O===_)return bO(M),h;if(O===T)return bO(M),m;O=O.sibling}throw Error(n(188))}if(_.return!==T.return)_=M,T=O;else{for(var H=!1,W=M.child;W;){if(W===_){H=!0,_=M,T=O;break}if(W===T){H=!0,T=M,_=O;break}W=W.sibling}if(!H){for(W=O.child;W;){if(W===_){H=!0,_=O,T=M;break}if(W===T){H=!0,T=O,_=M;break}W=W.sibling}if(!H)throw Error(n(189))}}if(_.alternate!==T)throw Error(n(190))}if(_.tag!==3)throw Error(n(188));return _.stateNode.current===_?h:m}function EO(h){return h=uue(h),h!==null?SO(h):null}function SO(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=SO(h);if(m!==null)return m;h=h.sibling}return null}var wO=e.unstable_scheduleCallback,kO=e.unstable_cancelCallback,due=e.unstable_shouldYield,hue=e.unstable_requestPaint,fr=e.unstable_now,fue=e.unstable_getCurrentPriorityLevel,k_=e.unstable_ImmediatePriority,TO=e.unstable_UserBlockingPriority,V4=e.unstable_NormalPriority,mue=e.unstable_LowPriority,RO=e.unstable_IdlePriority,B4=null,il=null;function pue(h){if(il&&typeof il.onCommitFiberRoot=="function")try{il.onCommitFiberRoot(B4,h,void 0,(h.current.flags&128)===128)}catch{}}var mo=Math.clz32?Math.clz32:yue,gue=Math.log,vue=Math.LN2;function yue(h){return h>>>=0,h===0?32:31-(gue(h)/vue|0)|0}var q4=64,G4=4194304;function bp(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function K4(h,m){var _=h.pendingLanes;if(_===0)return 0;var T=0,M=h.suspendedLanes,O=h.pingedLanes,H=_&268435455;if(H!==0){var W=H&~M;W!==0?T=bp(W):(O&=H,O!==0&&(T=bp(O)))}else H=_&~M,H!==0?T=bp(H):O!==0&&(T=bp(O));if(T===0)return 0;if(m!==0&&m!==T&&(m&M)===0&&(M=T&-T,O=m&-m,M>=O||M===16&&(O&4194240)!==0))return m;if((T&4)!==0&&(T|=_&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=T;0<m;)_=31-mo(m),M=1<<_,T|=h[_],m&=~M;return T}function _ue(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cue(h,m){for(var _=h.suspendedLanes,T=h.pingedLanes,M=h.expirationTimes,O=h.pendingLanes;0<O;){var H=31-mo(O),W=1<<H,X=M[H];X===-1?((W&_)===0||(W&T)!==0)&&(M[H]=_ue(W,m)):X<=m&&(h.expiredLanes|=W),O&=~W}}function T_(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function IO(){var h=q4;return q4<<=1,(q4&4194240)===0&&(q4=64),h}function R_(h){for(var m=[],_=0;31>_;_++)m.push(h);return m}function Ep(h,m,_){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-mo(m),h[m]=_}function bue(h,m){var _=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<_;){var M=31-mo(_),O=1<<M;m[M]=0,T[M]=-1,h[M]=-1,_&=~O}}function I_(h,m){var _=h.entangledLanes|=m;for(h=h.entanglements;_;){var T=31-mo(_),M=1<<T;M&m|h[T]&m&&(h[T]|=m),_&=~M}}var on=0;function xO(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var MO,x_,PO,LO,OO,M_=!1,Z4=[],Tu=null,Ru=null,Iu=null,Sp=new Map,wp=new Map,xu=[],Eue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AO(h,m){switch(h){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Iu=null;break;case"pointerover":case"pointerout":Sp.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(m.pointerId)}}function kp(h,m,_,T,M,O){return h===null||h.nativeEvent!==O?(h={blockedOn:m,domEventName:_,eventSystemFlags:T,nativeEvent:O,targetContainers:[M]},m!==null&&(m=jp(m),m!==null&&x_(m)),h):(h.eventSystemFlags|=T,m=h.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),h)}function Sue(h,m,_,T,M){switch(m){case"focusin":return Tu=kp(Tu,h,m,_,T,M),!0;case"dragenter":return Ru=kp(Ru,h,m,_,T,M),!0;case"mouseover":return Iu=kp(Iu,h,m,_,T,M),!0;case"pointerover":var O=M.pointerId;return Sp.set(O,kp(Sp.get(O)||null,h,m,_,T,M)),!0;case"gotpointercapture":return O=M.pointerId,wp.set(O,kp(wp.get(O)||null,h,m,_,T,M)),!0}return!1}function NO(h){var m=y1(h.target);if(m!==null){var _=v1(m);if(_!==null){if(m=_.tag,m===13){if(m=CO(_),m!==null){h.blockedOn=m,OO(h.priority,function(){PO(_)});return}}else if(m===3&&_.stateNode.current.memoizedState.isDehydrated){h.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}h.blockedOn=null}function z4(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var _=L_(h.domEventName,h.eventSystemFlags,m[0],h.nativeEvent);if(_===null){_=h.nativeEvent;var T=new _.constructor(_.type,_);rc=T,_.target.dispatchEvent(T),rc=null}else return m=jp(_),m!==null&&x_(m),h.blockedOn=_,!1;m.shift()}return!0}function DO(h,m,_){z4(h)&&_.delete(m)}function wue(){M_=!1,Tu!==null&&z4(Tu)&&(Tu=null),Ru!==null&&z4(Ru)&&(Ru=null),Iu!==null&&z4(Iu)&&(Iu=null),Sp.forEach(DO),wp.forEach(DO)}function Tp(h,m){h.blockedOn===m&&(h.blockedOn=null,M_||(M_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wue)))}function Rp(h){function m(M){return Tp(M,h)}if(0<Z4.length){Tp(Z4[0],h);for(var _=1;_<Z4.length;_++){var T=Z4[_];T.blockedOn===h&&(T.blockedOn=null)}}for(Tu!==null&&Tp(Tu,h),Ru!==null&&Tp(Ru,h),Iu!==null&&Tp(Iu,h),Sp.forEach(m),wp.forEach(m),_=0;_<xu.length;_++)T=xu[_],T.blockedOn===h&&(T.blockedOn=null);for(;0<xu.length&&(_=xu[0],_.blockedOn===null);)NO(_),_.blockedOn===null&&xu.shift()}var nf=w.ReactCurrentBatchConfig,W4=!0;function kue(h,m,_,T){var M=on,O=nf.transition;nf.transition=null;try{on=1,P_(h,m,_,T)}finally{on=M,nf.transition=O}}function Tue(h,m,_,T){var M=on,O=nf.transition;nf.transition=null;try{on=4,P_(h,m,_,T)}finally{on=M,nf.transition=O}}function P_(h,m,_,T){if(W4){var M=L_(h,m,_,T);if(M===null)W_(h,m,T,Y4,_),AO(h,T);else if(Sue(M,h,m,_,T))T.stopPropagation();else if(AO(h,T),m&4&&-1<Eue.indexOf(h)){for(;M!==null;){var O=jp(M);if(O!==null&&MO(O),O=L_(h,m,_,T),O===null&&W_(h,m,T,Y4,_),O===M)break;M=O}M!==null&&T.stopPropagation()}else W_(h,m,T,null,_)}}var Y4=null;function L_(h,m,_,T){if(Y4=null,h=tt(T),h=y1(h),h!==null)if(m=v1(h),m===null)h=null;else if(_=m.tag,_===13){if(h=CO(m),h!==null)return h;h=null}else if(_===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null);return Y4=h,null}function UO(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fue()){case k_:return 1;case TO:return 4;case V4:case mue:return 16;case RO:return 536870912;default:return 16}default:return 16}}var Mu=null,O_=null,J4=null;function FO(){if(J4)return J4;var h,m=O_,_=m.length,T,M="value"in Mu?Mu.value:Mu.textContent,O=M.length;for(h=0;h<_&&m[h]===M[h];h++);var H=_-h;for(T=1;T<=H&&m[_-T]===M[O-T];T++);return J4=M.slice(h,1<T?1-T:void 0)}function Q4(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function X4(){return!0}function jO(){return!1}function Bs(h){function m(_,T,M,O,H){this._reactName=_,this._targetInst=M,this.type=T,this.nativeEvent=O,this.target=H,this.currentTarget=null;for(var W in h)h.hasOwnProperty(W)&&(_=h[W],this[W]=_?_(O):O[W]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?X4:jO,this.isPropagationStopped=jO,this}return J(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=X4)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=X4)},persist:function(){},isPersistent:X4}),m}var rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A_=Bs(rf),Ip=J({},rf,{view:0,detail:0}),Rue=Bs(Ip),N_,D_,xp,e8=J({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F_,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==xp&&(xp&&h.type==="mousemove"?(N_=h.screenX-xp.screenX,D_=h.screenY-xp.screenY):D_=N_=0,xp=h),N_)},movementY:function(h){return"movementY"in h?h.movementY:D_}}),HO=Bs(e8),Iue=J({},e8,{dataTransfer:0}),xue=Bs(Iue),Mue=J({},Ip,{relatedTarget:0}),U_=Bs(Mue),Pue=J({},rf,{animationName:0,elapsedTime:0,pseudoElement:0}),Lue=Bs(Pue),Oue=J({},rf,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Aue=Bs(Oue),Nue=J({},rf,{data:0}),$O=Bs(Nue),Due={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jue(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=Fue[h])?!!m[h]:!1}function F_(){return jue}var Hue=J({},Ip,{key:function(h){if(h.key){var m=Due[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Q4(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Uue[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F_,charCode:function(h){return h.type==="keypress"?Q4(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Q4(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),$ue=Bs(Hue),Vue=J({},e8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VO=Bs(Vue),Bue=J({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F_}),que=Bs(Bue),Gue=J({},rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kue=Bs(Gue),Zue=J({},e8,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),zue=Bs(Zue),Wue=[9,13,27,32],j_=o&&"CompositionEvent"in window,Mp=null;o&&"documentMode"in document&&(Mp=document.documentMode);var Yue=o&&"TextEvent"in window&&!Mp,BO=o&&(!j_||Mp&&8<Mp&&11>=Mp),qO=" ",GO=!1;function KO(h,m){switch(h){case"keyup":return Wue.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZO(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var sf=!1;function Jue(h,m){switch(h){case"compositionend":return ZO(m);case"keypress":return m.which!==32?null:(GO=!0,qO);case"textInput":return h=m.data,h===qO&&GO?null:h;default:return null}}function Que(h,m){if(sf)return h==="compositionend"||!j_&&KO(h,m)?(h=FO(),J4=O_=Mu=null,sf=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return BO&&m.locale!=="ko"?null:m.data;default:return null}}var Xue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zO(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Xue[h.type]:m==="textarea"}function WO(h,m,_,T){gi(T),m=s8(m,"onChange"),0<m.length&&(_=new A_("onChange","change",null,_,T),h.push({event:_,listeners:m}))}var Pp=null,Lp=null;function ede(h){fA(h,0)}function t8(h){var m=uf(h);if(dr(m))return h}function tde(h,m){if(h==="change")return m}var YO=!1;if(o){var H_;if(o){var $_="oninput"in document;if(!$_){var JO=document.createElement("div");JO.setAttribute("oninput","return;"),$_=typeof JO.oninput=="function"}H_=$_}else H_=!1;YO=H_&&(!document.documentMode||9<document.documentMode)}function QO(){Pp&&(Pp.detachEvent("onpropertychange",XO),Lp=Pp=null)}function XO(h){if(h.propertyName==="value"&&t8(Lp)){var m=[];WO(m,Lp,h,tt(h)),fo(ede,m)}}function nde(h,m,_){h==="focusin"?(QO(),Pp=m,Lp=_,Pp.attachEvent("onpropertychange",XO)):h==="focusout"&&QO()}function rde(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return t8(Lp)}function ide(h,m){if(h==="click")return t8(m)}function sde(h,m){if(h==="input"||h==="change")return t8(m)}function ade(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var po=typeof Object.is=="function"?Object.is:ade;function Op(h,m){if(po(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var _=Object.keys(h),T=Object.keys(m);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var M=_[T];if(!l.call(m,M)||!po(h[M],m[M]))return!1}return!0}function eA(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function tA(h,m){var _=eA(h);h=0;for(var T;_;){if(_.nodeType===3){if(T=h+_.textContent.length,h<=m&&T>=m)return{node:_,offset:m-h};h=T}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=eA(_)}}function nA(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?nA(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function rA(){for(var h=window,m=nn();m instanceof h.HTMLIFrameElement;){try{var _=typeof m.contentWindow.location.href=="string"}catch{_=!1}if(_)h=m.contentWindow;else break;m=nn(h.document)}return m}function V_(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}function ode(h){var m=rA(),_=h.focusedElem,T=h.selectionRange;if(m!==_&&_&&_.ownerDocument&&nA(_.ownerDocument.documentElement,_)){if(T!==null&&V_(_)){if(m=T.start,h=T.end,h===void 0&&(h=m),"selectionStart"in _)_.selectionStart=m,_.selectionEnd=Math.min(h,_.value.length);else if(h=(m=_.ownerDocument||document)&&m.defaultView||window,h.getSelection){h=h.getSelection();var M=_.textContent.length,O=Math.min(T.start,M);T=T.end===void 0?O:Math.min(T.end,M),!h.extend&&O>T&&(M=T,T=O,O=M),M=tA(_,O);var H=tA(_,T);M&&H&&(h.rangeCount!==1||h.anchorNode!==M.node||h.anchorOffset!==M.offset||h.focusNode!==H.node||h.focusOffset!==H.offset)&&(m=m.createRange(),m.setStart(M.node,M.offset),h.removeAllRanges(),O>T?(h.addRange(m),h.extend(H.node,H.offset)):(m.setEnd(H.node,H.offset),h.addRange(m)))}}for(m=[],h=_;h=h.parentNode;)h.nodeType===1&&m.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<m.length;_++)h=m[_],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var lde=o&&"documentMode"in document&&11>=document.documentMode,af=null,B_=null,Ap=null,q_=!1;function iA(h,m,_){var T=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;q_||af==null||af!==nn(T)||(T=af,"selectionStart"in T&&V_(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Ap&&Op(Ap,T)||(Ap=T,T=s8(B_,"onSelect"),0<T.length&&(m=new A_("onSelect","select",null,m,_),h.push({event:m,listeners:T}),m.target=af)))}function n8(h,m){var _={};return _[h.toLowerCase()]=m.toLowerCase(),_["Webkit"+h]="webkit"+m,_["Moz"+h]="moz"+m,_}var of={animationend:n8("Animation","AnimationEnd"),animationiteration:n8("Animation","AnimationIteration"),animationstart:n8("Animation","AnimationStart"),transitionend:n8("Transition","TransitionEnd")},G_={},sA={};o&&(sA=document.createElement("div").style,"AnimationEvent"in window||(delete of.animationend.animation,delete of.animationiteration.animation,delete of.animationstart.animation),"TransitionEvent"in window||delete of.transitionend.transition);function r8(h){if(G_[h])return G_[h];if(!of[h])return h;var m=of[h],_;for(_ in m)if(m.hasOwnProperty(_)&&_ in sA)return G_[h]=m[_];return h}var aA=r8("animationend"),oA=r8("animationiteration"),lA=r8("animationstart"),cA=r8("transitionend"),uA=new Map,dA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pu(h,m){uA.set(h,m),s(m,[h])}for(var K_=0;K_<dA.length;K_++){var Z_=dA[K_],cde=Z_.toLowerCase(),ude=Z_[0].toUpperCase()+Z_.slice(1);Pu(cde,"on"+ude)}Pu(aA,"onAnimationEnd"),Pu(oA,"onAnimationIteration"),Pu(lA,"onAnimationStart"),Pu("dblclick","onDoubleClick"),Pu("focusin","onFocus"),Pu("focusout","onBlur"),Pu(cA,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dde=new Set("cancel close invalid load scroll toggle".split(" ").concat(Np));function hA(h,m,_){var T=h.type||"unknown-event";h.currentTarget=_,cue(T,m,void 0,h),h.currentTarget=null}function fA(h,m){m=(m&4)!==0;for(var _=0;_<h.length;_++){var T=h[_],M=T.event;T=T.listeners;e:{var O=void 0;if(m)for(var H=T.length-1;0<=H;H--){var W=T[H],X=W.instance,ae=W.currentTarget;if(W=W.listener,X!==O&&M.isPropagationStopped())break e;hA(M,W,ae),O=X}else for(H=0;H<T.length;H++){if(W=T[H],X=W.instance,ae=W.currentTarget,W=W.listener,X!==O&&M.isPropagationStopped())break e;hA(M,W,ae),O=X}}}if($4)throw h=w_,$4=!1,w_=null,h}function In(h,m){var _=m[tC];_===void 0&&(_=m[tC]=new Set);var T=h+"__bubble";_.has(T)||(mA(m,h,2,!1),_.add(T))}function z_(h,m,_){var T=0;m&&(T|=4),mA(_,h,T,m)}var i8="_reactListening"+Math.random().toString(36).slice(2);function Dp(h){if(!h[i8]){h[i8]=!0,r.forEach(function(_){_!=="selectionchange"&&(dde.has(_)||z_(_,!1,h),z_(_,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[i8]||(m[i8]=!0,z_("selectionchange",!1,m))}}function mA(h,m,_,T){switch(UO(m)){case 1:var M=kue;break;case 4:M=Tue;break;default:M=P_}_=M.bind(null,m,_,h),M=void 0,!wu||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),T?M!==void 0?h.addEventListener(m,_,{capture:!0,passive:M}):h.addEventListener(m,_,!0):M!==void 0?h.addEventListener(m,_,{passive:M}):h.addEventListener(m,_,!1)}function W_(h,m,_,T,M){var O=T;if((m&1)===0&&(m&2)===0&&T!==null)e:for(;;){if(T===null)return;var H=T.tag;if(H===3||H===4){var W=T.stateNode.containerInfo;if(W===M||W.nodeType===8&&W.parentNode===M)break;if(H===4)for(H=T.return;H!==null;){var X=H.tag;if((X===3||X===4)&&(X=H.stateNode.containerInfo,X===M||X.nodeType===8&&X.parentNode===M))return;H=H.return}for(;W!==null;){if(H=y1(W),H===null)return;if(X=H.tag,X===5||X===6){T=O=H;continue e}W=W.parentNode}}T=T.return}fo(function(){var ae=O,ge=tt(_),ye=[];e:{var me=uA.get(h);if(me!==void 0){var Fe=A_,$e=h;switch(h){case"keypress":if(Q4(_)===0)break e;case"keydown":case"keyup":Fe=$ue;break;case"focusin":$e="focus",Fe=U_;break;case"focusout":$e="blur",Fe=U_;break;case"beforeblur":case"afterblur":Fe=U_;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=HO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=xue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=que;break;case aA:case oA:case lA:Fe=Lue;break;case cA:Fe=Kue;break;case"scroll":Fe=Rue;break;case"wheel":Fe=zue;break;case"copy":case"cut":case"paste":Fe=Aue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=VO}var Be=(m&4)!==0,mr=!Be&&h==="scroll",ne=Be?me!==null?me+"Capture":null:me;Be=[];for(var te=ae,re;te!==null;){re=te;var Se=re.stateNode;if(re.tag===5&&Se!==null&&(re=Se,ne!==null&&(Se=Pi(te,ne),Se!=null&&Be.push(Up(te,Se,re)))),mr)break;te=te.return}0<Be.length&&(me=new Fe(me,$e,null,_,ge),ye.push({event:me,listeners:Be}))}}if((m&7)===0){e:{if(me=h==="mouseover"||h==="pointerover",Fe=h==="mouseout"||h==="pointerout",me&&_!==rc&&($e=_.relatedTarget||_.fromElement)&&(y1($e)||$e[ic]))break e;if((Fe||me)&&(me=ge.window===ge?ge:(me=ge.ownerDocument)?me.defaultView||me.parentWindow:window,Fe?($e=_.relatedTarget||_.toElement,Fe=ae,$e=$e?y1($e):null,$e!==null&&(mr=v1($e),$e!==mr||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Fe=null,$e=ae),Fe!==$e)){if(Be=HO,Se="onMouseLeave",ne="onMouseEnter",te="mouse",(h==="pointerout"||h==="pointerover")&&(Be=VO,Se="onPointerLeave",ne="onPointerEnter",te="pointer"),mr=Fe==null?me:uf(Fe),re=$e==null?me:uf($e),me=new Be(Se,te+"leave",Fe,_,ge),me.target=mr,me.relatedTarget=re,Se=null,y1(ge)===ae&&(Be=new Be(ne,te+"enter",$e,_,ge),Be.target=re,Be.relatedTarget=mr,Se=Be),mr=Se,Fe&&$e)t:{for(Be=Fe,ne=$e,te=0,re=Be;re;re=lf(re))te++;for(re=0,Se=ne;Se;Se=lf(Se))re++;for(;0<te-re;)Be=lf(Be),te--;for(;0<re-te;)ne=lf(ne),re--;for(;te--;){if(Be===ne||ne!==null&&Be===ne.alternate)break t;Be=lf(Be),ne=lf(ne)}Be=null}else Be=null;Fe!==null&&pA(ye,me,Fe,Be,!1),$e!==null&&mr!==null&&pA(ye,mr,$e,Be,!0)}}e:{if(me=ae?uf(ae):window,Fe=me.nodeName&&me.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&me.type==="file")var Ge=tde;else if(zO(me))if(YO)Ge=sde;else{Ge=rde;var st=nde}else(Fe=me.nodeName)&&Fe.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Ge=ide);if(Ge&&(Ge=Ge(h,ae))){WO(ye,Ge,_,ge);break e}st&&st(h,me,ae),h==="focusout"&&(st=me._wrapperState)&&st.controlled&&me.type==="number"&&va(me,"number",me.value)}switch(st=ae?uf(ae):window,h){case"focusin":(zO(st)||st.contentEditable==="true")&&(af=st,B_=ae,Ap=null);break;case"focusout":Ap=B_=af=null;break;case"mousedown":q_=!0;break;case"contextmenu":case"mouseup":case"dragend":q_=!1,iA(ye,_,ge);break;case"selectionchange":if(lde)break;case"keydown":case"keyup":iA(ye,_,ge)}var at;if(j_)e:{switch(h){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else sf?KO(h,_)&&(ht="onCompositionEnd"):h==="keydown"&&_.keyCode===229&&(ht="onCompositionStart");ht&&(BO&&_.locale!=="ko"&&(sf||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&sf&&(at=FO()):(Mu=ge,O_="value"in Mu?Mu.value:Mu.textContent,sf=!0)),st=s8(ae,ht),0<st.length&&(ht=new $O(ht,h,null,_,ge),ye.push({event:ht,listeners:st}),at?ht.data=at:(at=ZO(_),at!==null&&(ht.data=at)))),(at=Yue?Jue(h,_):Que(h,_))&&(ae=s8(ae,"onBeforeInput"),0<ae.length&&(ge=new $O("onBeforeInput","beforeinput",null,_,ge),ye.push({event:ge,listeners:ae}),ge.data=at))}fA(ye,m)})}function Up(h,m,_){return{instance:h,listener:m,currentTarget:_}}function s8(h,m){for(var _=m+"Capture",T=[];h!==null;){var M=h,O=M.stateNode;M.tag===5&&O!==null&&(M=O,O=Pi(h,_),O!=null&&T.unshift(Up(h,O,M)),O=Pi(h,m),O!=null&&T.push(Up(h,O,M))),h=h.return}return T}function lf(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function pA(h,m,_,T,M){for(var O=m._reactName,H=[];_!==null&&_!==T;){var W=_,X=W.alternate,ae=W.stateNode;if(X!==null&&X===T)break;W.tag===5&&ae!==null&&(W=ae,M?(X=Pi(_,O),X!=null&&H.unshift(Up(_,X,W))):M||(X=Pi(_,O),X!=null&&H.push(Up(_,X,W)))),_=_.return}H.length!==0&&h.push({event:m,listeners:H})}var hde=/\r\n?/g,fde=/\u0000|\uFFFD/g;function gA(h){return(typeof h=="string"?h:""+h).replace(hde,`
`).replace(fde,"")}function a8(h,m,_){if(m=gA(m),gA(h)!==m&&_)throw Error(n(425))}function o8(){}var Y_=null,J_=null;function Q_(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var X_=typeof setTimeout=="function"?setTimeout:void 0,mde=typeof clearTimeout=="function"?clearTimeout:void 0,vA=typeof Promise=="function"?Promise:void 0,pde=typeof queueMicrotask=="function"?queueMicrotask:typeof vA<"u"?function(h){return vA.resolve(null).then(h).catch(gde)}:X_;function gde(h){setTimeout(function(){throw h})}function eC(h,m){var _=m,T=0;do{var M=_.nextSibling;if(h.removeChild(_),M&&M.nodeType===8)if(_=M.data,_==="/$"){if(T===0){h.removeChild(M),Rp(m);return}T--}else _!=="$"&&_!=="$?"&&_!=="$!"||T++;_=M}while(_);Rp(m)}function Lu(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return h}function yA(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var _=h.data;if(_==="$"||_==="$!"||_==="$?"){if(m===0)return h;m--}else _==="/$"&&m++}h=h.previousSibling}return null}var cf=Math.random().toString(36).slice(2),sl="__reactFiber$"+cf,Fp="__reactProps$"+cf,ic="__reactContainer$"+cf,tC="__reactEvents$"+cf,vde="__reactListeners$"+cf,yde="__reactHandles$"+cf;function y1(h){var m=h[sl];if(m)return m;for(var _=h.parentNode;_;){if(m=_[ic]||_[sl]){if(_=m.alternate,m.child!==null||_!==null&&_.child!==null)for(h=yA(h);h!==null;){if(_=h[sl])return _;h=yA(h)}return m}h=_,_=h.parentNode}return null}function jp(h){return h=h[sl]||h[ic],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function uf(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(n(33))}function l8(h){return h[Fp]||null}var nC=[],df=-1;function Ou(h){return{current:h}}function xn(h){0>df||(h.current=nC[df],nC[df]=null,df--)}function En(h,m){df++,nC[df]=h.current,h.current=m}var Au={},Li=Ou(Au),fs=Ou(!1),_1=Au;function hf(h,m){var _=h.type.contextTypes;if(!_)return Au;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===m)return T.__reactInternalMemoizedMaskedChildContext;var M={},O;for(O in _)M[O]=m[O];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=M),M}function ms(h){return h=h.childContextTypes,h!=null}function c8(){xn(fs),xn(Li)}function _A(h,m,_){if(Li.current!==Au)throw Error(n(168));En(Li,m),En(fs,_)}function CA(h,m,_){var T=h.stateNode;if(m=m.childContextTypes,typeof T.getChildContext!="function")return _;T=T.getChildContext();for(var M in T)if(!(M in m))throw Error(n(108,Ce(h)||"Unknown",M));return J({},_,T)}function u8(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Au,_1=Li.current,En(Li,h),En(fs,fs.current),!0}function bA(h,m,_){var T=h.stateNode;if(!T)throw Error(n(169));_?(h=CA(h,m,_1),T.__reactInternalMemoizedMergedChildContext=h,xn(fs),xn(Li),En(Li,h)):xn(fs),En(fs,_)}var sc=null,d8=!1,rC=!1;function EA(h){sc===null?sc=[h]:sc.push(h)}function _de(h){d8=!0,EA(h)}function Nu(){if(!rC&&sc!==null){rC=!0;var h=0,m=on;try{var _=sc;for(on=1;h<_.length;h++){var T=_[h];do T=T(!0);while(T!==null)}sc=null,d8=!1}catch(M){throw sc!==null&&(sc=sc.slice(h+1)),wO(k_,Nu),M}finally{on=m,rC=!1}}return null}var ff=[],mf=0,h8=null,f8=0,ya=[],_a=0,C1=null,ac=1,oc="";function b1(h,m){ff[mf++]=f8,ff[mf++]=h8,h8=h,f8=m}function SA(h,m,_){ya[_a++]=ac,ya[_a++]=oc,ya[_a++]=C1,C1=h;var T=ac;h=oc;var M=32-mo(T)-1;T&=~(1<<M),_+=1;var O=32-mo(m)+M;if(30<O){var H=M-M%5;O=(T&(1<<H)-1).toString(32),T>>=H,M-=H,ac=1<<32-mo(m)+M|_<<M|T,oc=O+h}else ac=1<<O|_<<M|T,oc=h}function iC(h){h.return!==null&&(b1(h,1),SA(h,1,0))}function sC(h){for(;h===h8;)h8=ff[--mf],ff[mf]=null,f8=ff[--mf],ff[mf]=null;for(;h===C1;)C1=ya[--_a],ya[_a]=null,oc=ya[--_a],ya[_a]=null,ac=ya[--_a],ya[_a]=null}var qs=null,Gs=null,jn=!1,go=null;function wA(h,m){var _=Sa(5,null,null,0);_.elementType="DELETED",_.stateNode=m,_.return=h,m=h.deletions,m===null?(h.deletions=[_],h.flags|=16):m.push(_)}function kA(h,m){switch(h.tag){case 5:var _=h.type;return m=m.nodeType!==1||_.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(h.stateNode=m,qs=h,Gs=Lu(m.firstChild),!0):!1;case 6:return m=h.pendingProps===""||m.nodeType!==3?null:m,m!==null?(h.stateNode=m,qs=h,Gs=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(_=C1!==null?{id:ac,overflow:oc}:null,h.memoizedState={dehydrated:m,treeContext:_,retryLane:1073741824},_=Sa(18,null,null,0),_.stateNode=m,_.return=h,h.child=_,qs=h,Gs=null,!0):!1;default:return!1}}function aC(h){return(h.mode&1)!==0&&(h.flags&128)===0}function oC(h){if(jn){var m=Gs;if(m){var _=m;if(!kA(h,m)){if(aC(h))throw Error(n(418));m=Lu(_.nextSibling);var T=qs;m&&kA(h,m)?wA(T,_):(h.flags=h.flags&-4097|2,jn=!1,qs=h)}}else{if(aC(h))throw Error(n(418));h.flags=h.flags&-4097|2,jn=!1,qs=h}}}function TA(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;qs=h}function m8(h){if(h!==qs)return!1;if(!jn)return TA(h),jn=!0,!1;var m;if((m=h.tag!==3)&&!(m=h.tag!==5)&&(m=h.type,m=m!=="head"&&m!=="body"&&!Q_(h.type,h.memoizedProps)),m&&(m=Gs)){if(aC(h))throw RA(),Error(n(418));for(;m;)wA(h,m),m=Lu(m.nextSibling)}if(TA(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8){var _=h.data;if(_==="/$"){if(m===0){Gs=Lu(h.nextSibling);break e}m--}else _!=="$"&&_!=="$!"&&_!=="$?"||m++}h=h.nextSibling}Gs=null}}else Gs=qs?Lu(h.stateNode.nextSibling):null;return!0}function RA(){for(var h=Gs;h;)h=Lu(h.nextSibling)}function pf(){Gs=qs=null,jn=!1}function lC(h){go===null?go=[h]:go.push(h)}var Cde=w.ReactCurrentBatchConfig;function Hp(h,m,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(n(309));var T=_.stateNode}if(!T)throw Error(n(147,h));var M=T,O=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===O?m.ref:(m=function(H){var W=M.refs;H===null?delete W[O]:W[O]=H},m._stringRef=O,m)}if(typeof h!="string")throw Error(n(284));if(!_._owner)throw Error(n(290,h))}return h}function p8(h,m){throw h=Object.prototype.toString.call(m),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function IA(h){var m=h._init;return m(h._payload)}function xA(h){function m(ne,te){if(h){var re=ne.deletions;re===null?(ne.deletions=[te],ne.flags|=16):re.push(te)}}function _(ne,te){if(!h)return null;for(;te!==null;)m(ne,te),te=te.sibling;return null}function T(ne,te){for(ne=new Map;te!==null;)te.key!==null?ne.set(te.key,te):ne.set(te.index,te),te=te.sibling;return ne}function M(ne,te){return ne=Bu(ne,te),ne.index=0,ne.sibling=null,ne}function O(ne,te,re){return ne.index=re,h?(re=ne.alternate,re!==null?(re=re.index,re<te?(ne.flags|=2,te):re):(ne.flags|=2,te)):(ne.flags|=1048576,te)}function H(ne){return h&&ne.alternate===null&&(ne.flags|=2),ne}function W(ne,te,re,Se){return te===null||te.tag!==6?(te=XC(re,ne.mode,Se),te.return=ne,te):(te=M(te,re),te.return=ne,te)}function X(ne,te,re,Se){var Ge=re.type;return Ge===x?ge(ne,te,re.props.children,Se,re.key):te!==null&&(te.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&IA(Ge)===te.type)?(Se=M(te,re.props),Se.ref=Hp(ne,te,re),Se.return=ne,Se):(Se=j8(re.type,re.key,re.props,null,ne.mode,Se),Se.ref=Hp(ne,te,re),Se.return=ne,Se)}function ae(ne,te,re,Se){return te===null||te.tag!==4||te.stateNode.containerInfo!==re.containerInfo||te.stateNode.implementation!==re.implementation?(te=eb(re,ne.mode,Se),te.return=ne,te):(te=M(te,re.children||[]),te.return=ne,te)}function ge(ne,te,re,Se,Ge){return te===null||te.tag!==7?(te=x1(re,ne.mode,Se,Ge),te.return=ne,te):(te=M(te,re),te.return=ne,te)}function ye(ne,te,re){if(typeof te=="string"&&te!==""||typeof te=="number")return te=XC(""+te,ne.mode,re),te.return=ne,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return re=j8(te.type,te.key,te.props,null,ne.mode,re),re.ref=Hp(ne,null,te),re.return=ne,re;case k:return te=eb(te,ne.mode,re),te.return=ne,te;case z:var Se=te._init;return ye(ne,Se(te._payload),re)}if(Ki(te)||G(te))return te=x1(te,ne.mode,re,null),te.return=ne,te;p8(ne,te)}return null}function me(ne,te,re,Se){var Ge=te!==null?te.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ge!==null?null:W(ne,te,""+re,Se);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case I:return re.key===Ge?X(ne,te,re,Se):null;case k:return re.key===Ge?ae(ne,te,re,Se):null;case z:return Ge=re._init,me(ne,te,Ge(re._payload),Se)}if(Ki(re)||G(re))return Ge!==null?null:ge(ne,te,re,Se,null);p8(ne,re)}return null}function Fe(ne,te,re,Se,Ge){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return ne=ne.get(re)||null,W(te,ne,""+Se,Ge);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case I:return ne=ne.get(Se.key===null?re:Se.key)||null,X(te,ne,Se,Ge);case k:return ne=ne.get(Se.key===null?re:Se.key)||null,ae(te,ne,Se,Ge);case z:var st=Se._init;return Fe(ne,te,re,st(Se._payload),Ge)}if(Ki(Se)||G(Se))return ne=ne.get(re)||null,ge(te,ne,Se,Ge,null);p8(te,Se)}return null}function $e(ne,te,re,Se){for(var Ge=null,st=null,at=te,ht=te=0,Qr=null;at!==null&&ht<re.length;ht++){at.index>ht?(Qr=at,at=null):Qr=at.sibling;var Gt=me(ne,at,re[ht],Se);if(Gt===null){at===null&&(at=Qr);break}h&&at&&Gt.alternate===null&&m(ne,at),te=O(Gt,te,ht),st===null?Ge=Gt:st.sibling=Gt,st=Gt,at=Qr}if(ht===re.length)return _(ne,at),jn&&b1(ne,ht),Ge;if(at===null){for(;ht<re.length;ht++)at=ye(ne,re[ht],Se),at!==null&&(te=O(at,te,ht),st===null?Ge=at:st.sibling=at,st=at);return jn&&b1(ne,ht),Ge}for(at=T(ne,at);ht<re.length;ht++)Qr=Fe(at,ne,ht,re[ht],Se),Qr!==null&&(h&&Qr.alternate!==null&&at.delete(Qr.key===null?ht:Qr.key),te=O(Qr,te,ht),st===null?Ge=Qr:st.sibling=Qr,st=Qr);return h&&at.forEach(function(qu){return m(ne,qu)}),jn&&b1(ne,ht),Ge}function Be(ne,te,re,Se){var Ge=G(re);if(typeof Ge!="function")throw Error(n(150));if(re=Ge.call(re),re==null)throw Error(n(151));for(var st=Ge=null,at=te,ht=te=0,Qr=null,Gt=re.next();at!==null&&!Gt.done;ht++,Gt=re.next()){at.index>ht?(Qr=at,at=null):Qr=at.sibling;var qu=me(ne,at,Gt.value,Se);if(qu===null){at===null&&(at=Qr);break}h&&at&&qu.alternate===null&&m(ne,at),te=O(qu,te,ht),st===null?Ge=qu:st.sibling=qu,st=qu,at=Qr}if(Gt.done)return _(ne,at),jn&&b1(ne,ht),Ge;if(at===null){for(;!Gt.done;ht++,Gt=re.next())Gt=ye(ne,Gt.value,Se),Gt!==null&&(te=O(Gt,te,ht),st===null?Ge=Gt:st.sibling=Gt,st=Gt);return jn&&b1(ne,ht),Ge}for(at=T(ne,at);!Gt.done;ht++,Gt=re.next())Gt=Fe(at,ne,ht,Gt.value,Se),Gt!==null&&(h&&Gt.alternate!==null&&at.delete(Gt.key===null?ht:Gt.key),te=O(Gt,te,ht),st===null?Ge=Gt:st.sibling=Gt,st=Gt);return h&&at.forEach(function(Xde){return m(ne,Xde)}),jn&&b1(ne,ht),Ge}function mr(ne,te,re,Se){if(typeof re=="object"&&re!==null&&re.type===x&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case I:e:{for(var Ge=re.key,st=te;st!==null;){if(st.key===Ge){if(Ge=re.type,Ge===x){if(st.tag===7){_(ne,st.sibling),te=M(st,re.props.children),te.return=ne,ne=te;break e}}else if(st.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&IA(Ge)===st.type){_(ne,st.sibling),te=M(st,re.props),te.ref=Hp(ne,st,re),te.return=ne,ne=te;break e}_(ne,st);break}else m(ne,st);st=st.sibling}re.type===x?(te=x1(re.props.children,ne.mode,Se,re.key),te.return=ne,ne=te):(Se=j8(re.type,re.key,re.props,null,ne.mode,Se),Se.ref=Hp(ne,te,re),Se.return=ne,ne=Se)}return H(ne);case k:e:{for(st=re.key;te!==null;){if(te.key===st)if(te.tag===4&&te.stateNode.containerInfo===re.containerInfo&&te.stateNode.implementation===re.implementation){_(ne,te.sibling),te=M(te,re.children||[]),te.return=ne,ne=te;break e}else{_(ne,te);break}else m(ne,te);te=te.sibling}te=eb(re,ne.mode,Se),te.return=ne,ne=te}return H(ne);case z:return st=re._init,mr(ne,te,st(re._payload),Se)}if(Ki(re))return $e(ne,te,re,Se);if(G(re))return Be(ne,te,re,Se);p8(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,te!==null&&te.tag===6?(_(ne,te.sibling),te=M(te,re),te.return=ne,ne=te):(_(ne,te),te=XC(re,ne.mode,Se),te.return=ne,ne=te),H(ne)):_(ne,te)}return mr}var gf=xA(!0),MA=xA(!1),g8=Ou(null),v8=null,vf=null,cC=null;function uC(){cC=vf=v8=null}function dC(h){var m=g8.current;xn(g8),h._currentValue=m}function hC(h,m,_){for(;h!==null;){var T=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),h===_)break;h=h.return}}function yf(h,m){v8=h,cC=vf=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&m)!==0&&(ps=!0),h.firstContext=null)}function Ca(h){var m=h._currentValue;if(cC!==h)if(h={context:h,memoizedValue:m,next:null},vf===null){if(v8===null)throw Error(n(308));vf=h,v8.dependencies={lanes:0,firstContext:h}}else vf=vf.next=h;return m}var E1=null;function fC(h){E1===null?E1=[h]:E1.push(h)}function PA(h,m,_,T){var M=m.interleaved;return M===null?(_.next=_,fC(m)):(_.next=M.next,M.next=_),m.interleaved=_,lc(h,T)}function lc(h,m){h.lanes|=m;var _=h.alternate;for(_!==null&&(_.lanes|=m),_=h,h=h.return;h!==null;)h.childLanes|=m,_=h.alternate,_!==null&&(_.childLanes|=m),_=h,h=h.return;return _.tag===3?_.stateNode:null}var Du=!1;function mC(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LA(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function cc(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Uu(h,m,_){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,(Ut&2)!==0){var M=T.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),T.pending=m,lc(h,_)}return M=T.interleaved,M===null?(m.next=m,fC(T)):(m.next=M.next,M.next=m),T.interleaved=m,lc(h,_)}function y8(h,m,_){if(m=m.updateQueue,m!==null&&(m=m.shared,(_&4194240)!==0)){var T=m.lanes;T&=h.pendingLanes,_|=T,m.lanes=_,I_(h,_)}}function OA(h,m){var _=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,_===T)){var M=null,O=null;if(_=_.firstBaseUpdate,_!==null){do{var H={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};O===null?M=O=H:O=O.next=H,_=_.next}while(_!==null);O===null?M=O=m:O=O.next=m}else M=O=m;_={baseState:T.baseState,firstBaseUpdate:M,lastBaseUpdate:O,shared:T.shared,effects:T.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=m:h.next=m,_.lastBaseUpdate=m}function _8(h,m,_,T){var M=h.updateQueue;Du=!1;var O=M.firstBaseUpdate,H=M.lastBaseUpdate,W=M.shared.pending;if(W!==null){M.shared.pending=null;var X=W,ae=X.next;X.next=null,H===null?O=ae:H.next=ae,H=X;var ge=h.alternate;ge!==null&&(ge=ge.updateQueue,W=ge.lastBaseUpdate,W!==H&&(W===null?ge.firstBaseUpdate=ae:W.next=ae,ge.lastBaseUpdate=X))}if(O!==null){var ye=M.baseState;H=0,ge=ae=X=null,W=O;do{var me=W.lane,Fe=W.eventTime;if((T&me)===me){ge!==null&&(ge=ge.next={eventTime:Fe,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var $e=h,Be=W;switch(me=m,Fe=_,Be.tag){case 1:if($e=Be.payload,typeof $e=="function"){ye=$e.call(Fe,ye,me);break e}ye=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Be.payload,me=typeof $e=="function"?$e.call(Fe,ye,me):$e,me==null)break e;ye=J({},ye,me);break e;case 2:Du=!0}}W.callback!==null&&W.lane!==0&&(h.flags|=64,me=M.effects,me===null?M.effects=[W]:me.push(W))}else Fe={eventTime:Fe,lane:me,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ge===null?(ae=ge=Fe,X=ye):ge=ge.next=Fe,H|=me;if(W=W.next,W===null){if(W=M.shared.pending,W===null)break;me=W,W=me.next,me.next=null,M.lastBaseUpdate=me,M.shared.pending=null}}while(!0);if(ge===null&&(X=ye),M.baseState=X,M.firstBaseUpdate=ae,M.lastBaseUpdate=ge,m=M.shared.interleaved,m!==null){M=m;do H|=M.lane,M=M.next;while(M!==m)}else O===null&&(M.shared.lanes=0);k1|=H,h.lanes=H,h.memoizedState=ye}}function AA(h,m,_){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var T=h[m],M=T.callback;if(M!==null){if(T.callback=null,T=_,typeof M!="function")throw Error(n(191,M));M.call(T)}}}var $p={},al=Ou($p),Vp=Ou($p),Bp=Ou($p);function S1(h){if(h===$p)throw Error(n(174));return h}function pC(h,m){switch(En(Bp,m),En(Vp,h),En(al,$p),h=m.nodeType,h){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:g1(null,"");break;default:h=h===8?m.parentNode:m,m=h.namespaceURI||null,h=h.tagName,m=g1(m,h)}xn(al),En(al,m)}function _f(){xn(al),xn(Vp),xn(Bp)}function NA(h){S1(Bp.current);var m=S1(al.current),_=g1(m,h.type);m!==_&&(En(Vp,h),En(al,_))}function gC(h){Vp.current===h&&(xn(al),xn(Vp))}var zn=Ou(0);function C8(h){for(var m=h;m!==null;){if(m.tag===13){var _=m.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||_.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var vC=[];function yC(){for(var h=0;h<vC.length;h++)vC[h]._workInProgressVersionPrimary=null;vC.length=0}var b8=w.ReactCurrentDispatcher,_C=w.ReactCurrentBatchConfig,w1=0,Wn=null,Ar=null,Yr=null,E8=!1,qp=!1,Gp=0,bde=0;function Oi(){throw Error(n(321))}function CC(h,m){if(m===null)return!1;for(var _=0;_<m.length&&_<h.length;_++)if(!po(h[_],m[_]))return!1;return!0}function bC(h,m,_,T,M,O){if(w1=O,Wn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,b8.current=h===null||h.memoizedState===null?kde:Tde,h=_(T,M),qp){O=0;do{if(qp=!1,Gp=0,25<=O)throw Error(n(301));O+=1,Yr=Ar=null,m.updateQueue=null,b8.current=Rde,h=_(T,M)}while(qp)}if(b8.current=k8,m=Ar!==null&&Ar.next!==null,w1=0,Yr=Ar=Wn=null,E8=!1,m)throw Error(n(300));return h}function EC(){var h=Gp!==0;return Gp=0,h}function ol(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?Wn.memoizedState=Yr=h:Yr=Yr.next=h,Yr}function ba(){if(Ar===null){var h=Wn.alternate;h=h!==null?h.memoizedState:null}else h=Ar.next;var m=Yr===null?Wn.memoizedState:Yr.next;if(m!==null)Yr=m,Ar=h;else{if(h===null)throw Error(n(310));Ar=h,h={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Yr===null?Wn.memoizedState=Yr=h:Yr=Yr.next=h}return Yr}function Kp(h,m){return typeof m=="function"?m(h):m}function SC(h){var m=ba(),_=m.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=h;var T=Ar,M=T.baseQueue,O=_.pending;if(O!==null){if(M!==null){var H=M.next;M.next=O.next,O.next=H}T.baseQueue=M=O,_.pending=null}if(M!==null){O=M.next,T=T.baseState;var W=H=null,X=null,ae=O;do{var ge=ae.lane;if((w1&ge)===ge)X!==null&&(X=X.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),T=ae.hasEagerState?ae.eagerState:h(T,ae.action);else{var ye={lane:ge,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};X===null?(W=X=ye,H=T):X=X.next=ye,Wn.lanes|=ge,k1|=ge}ae=ae.next}while(ae!==null&&ae!==O);X===null?H=T:X.next=W,po(T,m.memoizedState)||(ps=!0),m.memoizedState=T,m.baseState=H,m.baseQueue=X,_.lastRenderedState=T}if(h=_.interleaved,h!==null){M=h;do O=M.lane,Wn.lanes|=O,k1|=O,M=M.next;while(M!==h)}else M===null&&(_.lanes=0);return[m.memoizedState,_.dispatch]}function wC(h){var m=ba(),_=m.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=h;var T=_.dispatch,M=_.pending,O=m.memoizedState;if(M!==null){_.pending=null;var H=M=M.next;do O=h(O,H.action),H=H.next;while(H!==M);po(O,m.memoizedState)||(ps=!0),m.memoizedState=O,m.baseQueue===null&&(m.baseState=O),_.lastRenderedState=O}return[O,T]}function DA(){}function UA(h,m){var _=Wn,T=ba(),M=m(),O=!po(T.memoizedState,M);if(O&&(T.memoizedState=M,ps=!0),T=T.queue,kC(HA.bind(null,_,T,h),[h]),T.getSnapshot!==m||O||Yr!==null&&Yr.memoizedState.tag&1){if(_.flags|=2048,Zp(9,jA.bind(null,_,T,M,m),void 0,null),Jr===null)throw Error(n(349));(w1&30)!==0||FA(_,m,M)}return M}function FA(h,m,_){h.flags|=16384,h={getSnapshot:m,value:_},m=Wn.updateQueue,m===null?(m={lastEffect:null,stores:null},Wn.updateQueue=m,m.stores=[h]):(_=m.stores,_===null?m.stores=[h]:_.push(h))}function jA(h,m,_,T){m.value=_,m.getSnapshot=T,$A(m)&&VA(h)}function HA(h,m,_){return _(function(){$A(m)&&VA(h)})}function $A(h){var m=h.getSnapshot;h=h.value;try{var _=m();return!po(h,_)}catch{return!0}}function VA(h){var m=lc(h,1);m!==null&&Co(m,h,1,-1)}function BA(h){var m=ol();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:h},m.queue=h,h=h.dispatch=wde.bind(null,Wn,h),[m.memoizedState,h]}function Zp(h,m,_,T){return h={tag:h,create:m,destroy:_,deps:T,next:null},m=Wn.updateQueue,m===null?(m={lastEffect:null,stores:null},Wn.updateQueue=m,m.lastEffect=h.next=h):(_=m.lastEffect,_===null?m.lastEffect=h.next=h:(T=_.next,_.next=h,h.next=T,m.lastEffect=h)),h}function qA(){return ba().memoizedState}function S8(h,m,_,T){var M=ol();Wn.flags|=h,M.memoizedState=Zp(1|m,_,void 0,T===void 0?null:T)}function w8(h,m,_,T){var M=ba();T=T===void 0?null:T;var O=void 0;if(Ar!==null){var H=Ar.memoizedState;if(O=H.destroy,T!==null&&CC(T,H.deps)){M.memoizedState=Zp(m,_,O,T);return}}Wn.flags|=h,M.memoizedState=Zp(1|m,_,O,T)}function GA(h,m){return S8(8390656,8,h,m)}function kC(h,m){return w8(2048,8,h,m)}function KA(h,m){return w8(4,2,h,m)}function ZA(h,m){return w8(4,4,h,m)}function zA(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function WA(h,m,_){return _=_!=null?_.concat([h]):null,w8(4,4,zA.bind(null,m,h),_)}function TC(){}function YA(h,m){var _=ba();m=m===void 0?null:m;var T=_.memoizedState;return T!==null&&m!==null&&CC(m,T[1])?T[0]:(_.memoizedState=[h,m],h)}function JA(h,m){var _=ba();m=m===void 0?null:m;var T=_.memoizedState;return T!==null&&m!==null&&CC(m,T[1])?T[0]:(h=h(),_.memoizedState=[h,m],h)}function QA(h,m,_){return(w1&21)===0?(h.baseState&&(h.baseState=!1,ps=!0),h.memoizedState=_):(po(_,m)||(_=IO(),Wn.lanes|=_,k1|=_,h.baseState=!0),m)}function Ede(h,m){var _=on;on=_!==0&&4>_?_:4,h(!0);var T=_C.transition;_C.transition={};try{h(!1),m()}finally{on=_,_C.transition=T}}function XA(){return ba().memoizedState}function Sde(h,m,_){var T=$u(h);if(_={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null},eN(h))tN(m,_);else if(_=PA(h,m,_,T),_!==null){var M=Wi();Co(_,h,T,M),nN(_,m,T)}}function wde(h,m,_){var T=$u(h),M={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null};if(eN(h))tN(m,M);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=m.lastRenderedReducer,O!==null))try{var H=m.lastRenderedState,W=O(H,_);if(M.hasEagerState=!0,M.eagerState=W,po(W,H)){var X=m.interleaved;X===null?(M.next=M,fC(m)):(M.next=X.next,X.next=M),m.interleaved=M;return}}catch{}finally{}_=PA(h,m,M,T),_!==null&&(M=Wi(),Co(_,h,T,M),nN(_,m,T))}}function eN(h){var m=h.alternate;return h===Wn||m!==null&&m===Wn}function tN(h,m){qp=E8=!0;var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}function nN(h,m,_){if((_&4194240)!==0){var T=m.lanes;T&=h.pendingLanes,_|=T,m.lanes=_,I_(h,_)}}var k8={readContext:Ca,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},kde={readContext:Ca,useCallback:function(h,m){return ol().memoizedState=[h,m===void 0?null:m],h},useContext:Ca,useEffect:GA,useImperativeHandle:function(h,m,_){return _=_!=null?_.concat([h]):null,S8(4194308,4,zA.bind(null,m,h),_)},useLayoutEffect:function(h,m){return S8(4194308,4,h,m)},useInsertionEffect:function(h,m){return S8(4,2,h,m)},useMemo:function(h,m){var _=ol();return m=m===void 0?null:m,h=h(),_.memoizedState=[h,m],h},useReducer:function(h,m,_){var T=ol();return m=_!==void 0?_(m):m,T.memoizedState=T.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},T.queue=h,h=h.dispatch=Sde.bind(null,Wn,h),[T.memoizedState,h]},useRef:function(h){var m=ol();return h={current:h},m.memoizedState=h},useState:BA,useDebugValue:TC,useDeferredValue:function(h){return ol().memoizedState=h},useTransition:function(){var h=BA(!1),m=h[0];return h=Ede.bind(null,h[1]),ol().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,_){var T=Wn,M=ol();if(jn){if(_===void 0)throw Error(n(407));_=_()}else{if(_=m(),Jr===null)throw Error(n(349));(w1&30)!==0||FA(T,m,_)}M.memoizedState=_;var O={value:_,getSnapshot:m};return M.queue=O,GA(HA.bind(null,T,O,h),[h]),T.flags|=2048,Zp(9,jA.bind(null,T,O,_,m),void 0,null),_},useId:function(){var h=ol(),m=Jr.identifierPrefix;if(jn){var _=oc,T=ac;_=(T&~(1<<32-mo(T)-1)).toString(32)+_,m=":"+m+"R"+_,_=Gp++,0<_&&(m+="H"+_.toString(32)),m+=":"}else _=bde++,m=":"+m+"r"+_.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},Tde={readContext:Ca,useCallback:YA,useContext:Ca,useEffect:kC,useImperativeHandle:WA,useInsertionEffect:KA,useLayoutEffect:ZA,useMemo:JA,useReducer:SC,useRef:qA,useState:function(){return SC(Kp)},useDebugValue:TC,useDeferredValue:function(h){var m=ba();return QA(m,Ar.memoizedState,h)},useTransition:function(){var h=SC(Kp)[0],m=ba().memoizedState;return[h,m]},useMutableSource:DA,useSyncExternalStore:UA,useId:XA,unstable_isNewReconciler:!1},Rde={readContext:Ca,useCallback:YA,useContext:Ca,useEffect:kC,useImperativeHandle:WA,useInsertionEffect:KA,useLayoutEffect:ZA,useMemo:JA,useReducer:wC,useRef:qA,useState:function(){return wC(Kp)},useDebugValue:TC,useDeferredValue:function(h){var m=ba();return Ar===null?m.memoizedState=h:QA(m,Ar.memoizedState,h)},useTransition:function(){var h=wC(Kp)[0],m=ba().memoizedState;return[h,m]},useMutableSource:DA,useSyncExternalStore:UA,useId:XA,unstable_isNewReconciler:!1};function vo(h,m){if(h&&h.defaultProps){m=J({},m),h=h.defaultProps;for(var _ in h)m[_]===void 0&&(m[_]=h[_]);return m}return m}function RC(h,m,_,T){m=h.memoizedState,_=_(T,m),_=_==null?m:J({},m,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var T8={isMounted:function(h){return(h=h._reactInternals)?v1(h)===h:!1},enqueueSetState:function(h,m,_){h=h._reactInternals;var T=Wi(),M=$u(h),O=cc(T,M);O.payload=m,_!=null&&(O.callback=_),m=Uu(h,O,M),m!==null&&(Co(m,h,M,T),y8(m,h,M))},enqueueReplaceState:function(h,m,_){h=h._reactInternals;var T=Wi(),M=$u(h),O=cc(T,M);O.tag=1,O.payload=m,_!=null&&(O.callback=_),m=Uu(h,O,M),m!==null&&(Co(m,h,M,T),y8(m,h,M))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var _=Wi(),T=$u(h),M=cc(_,T);M.tag=2,m!=null&&(M.callback=m),m=Uu(h,M,T),m!==null&&(Co(m,h,T,_),y8(m,h,T))}};function rN(h,m,_,T,M,O,H){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,O,H):m.prototype&&m.prototype.isPureReactComponent?!Op(_,T)||!Op(M,O):!0}function iN(h,m,_){var T=!1,M=Au,O=m.contextType;return typeof O=="object"&&O!==null?O=Ca(O):(M=ms(m)?_1:Li.current,T=m.contextTypes,O=(T=T!=null)?hf(h,M):Au),m=new m(_,O),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=T8,h.stateNode=m,m._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=M,h.__reactInternalMemoizedMaskedChildContext=O),m}function sN(h,m,_,T){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(_,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(_,T),m.state!==h&&T8.enqueueReplaceState(m,m.state,null)}function IC(h,m,_,T){var M=h.stateNode;M.props=_,M.state=h.memoizedState,M.refs={},mC(h);var O=m.contextType;typeof O=="object"&&O!==null?M.context=Ca(O):(O=ms(m)?_1:Li.current,M.context=hf(h,O)),M.state=h.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(RC(h,m,O,_),M.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(m=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),m!==M.state&&T8.enqueueReplaceState(M,M.state,null),_8(h,_,M,T),M.state=h.memoizedState),typeof M.componentDidMount=="function"&&(h.flags|=4194308)}function Cf(h,m){try{var _="",T=m;do _+=Re(T),T=T.return;while(T);var M=_}catch(O){M=`
Error generating stack: `+O.message+`
`+O.stack}return{value:h,source:m,stack:M,digest:null}}function xC(h,m,_){return{value:h,source:null,stack:_??null,digest:m??null}}function MC(h,m){try{console.error(m.value)}catch(_){setTimeout(function(){throw _})}}var Ide=typeof WeakMap=="function"?WeakMap:Map;function aN(h,m,_){_=cc(-1,_),_.tag=3,_.payload={element:null};var T=m.value;return _.callback=function(){O8||(O8=!0,GC=T),MC(h,m)},_}function oN(h,m,_){_=cc(-1,_),_.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var M=m.value;_.payload=function(){return T(M)},_.callback=function(){MC(h,m)}}var O=h.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(_.callback=function(){MC(h,m),typeof T!="function"&&(ju===null?ju=new Set([this]):ju.add(this));var H=m.stack;this.componentDidCatch(m.value,{componentStack:H!==null?H:""})}),_}function lN(h,m,_){var T=h.pingCache;if(T===null){T=h.pingCache=new Ide;var M=new Set;T.set(m,M)}else M=T.get(m),M===void 0&&(M=new Set,T.set(m,M));M.has(_)||(M.add(_),h=Vde.bind(null,h,m,_),m.then(h,h))}function cN(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function uN(h,m,_,T,M){return(h.mode&1)===0?(h===m?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(m=cc(-1,1),m.tag=2,Uu(_,m,1))),_.lanes|=1),h):(h.flags|=65536,h.lanes=M,h)}var xde=w.ReactCurrentOwner,ps=!1;function zi(h,m,_,T){m.child=h===null?MA(m,null,_,T):gf(m,h.child,_,T)}function dN(h,m,_,T,M){_=_.render;var O=m.ref;return yf(m,M),T=bC(h,m,_,T,O,M),_=EC(),h!==null&&!ps?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~M,uc(h,m,M)):(jn&&_&&iC(m),m.flags|=1,zi(h,m,T,M),m.child)}function hN(h,m,_,T,M){if(h===null){var O=_.type;return typeof O=="function"&&!QC(O)&&O.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(m.tag=15,m.type=O,fN(h,m,O,T,M)):(h=j8(_.type,null,T,m,m.mode,M),h.ref=m.ref,h.return=m,m.child=h)}if(O=h.child,(h.lanes&M)===0){var H=O.memoizedProps;if(_=_.compare,_=_!==null?_:Op,_(H,T)&&h.ref===m.ref)return uc(h,m,M)}return m.flags|=1,h=Bu(O,T),h.ref=m.ref,h.return=m,m.child=h}function fN(h,m,_,T,M){if(h!==null){var O=h.memoizedProps;if(Op(O,T)&&h.ref===m.ref)if(ps=!1,m.pendingProps=T=O,(h.lanes&M)!==0)(h.flags&131072)!==0&&(ps=!0);else return m.lanes=h.lanes,uc(h,m,M)}return PC(h,m,_,T,M)}function mN(h,m,_){var T=m.pendingProps,M=T.children,O=h!==null?h.memoizedState:null;if(T.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(Ef,Ks),Ks|=_;else{if((_&1073741824)===0)return h=O!==null?O.baseLanes|_:_,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,En(Ef,Ks),Ks|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=O!==null?O.baseLanes:_,En(Ef,Ks),Ks|=T}else O!==null?(T=O.baseLanes|_,m.memoizedState=null):T=_,En(Ef,Ks),Ks|=T;return zi(h,m,M,_),m.child}function pN(h,m){var _=m.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(m.flags|=512,m.flags|=2097152)}function PC(h,m,_,T,M){var O=ms(_)?_1:Li.current;return O=hf(m,O),yf(m,M),_=bC(h,m,_,T,O,M),T=EC(),h!==null&&!ps?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~M,uc(h,m,M)):(jn&&T&&iC(m),m.flags|=1,zi(h,m,_,M),m.child)}function gN(h,m,_,T,M){if(ms(_)){var O=!0;u8(m)}else O=!1;if(yf(m,M),m.stateNode===null)I8(h,m),iN(m,_,T),IC(m,_,T,M),T=!0;else if(h===null){var H=m.stateNode,W=m.memoizedProps;H.props=W;var X=H.context,ae=_.contextType;typeof ae=="object"&&ae!==null?ae=Ca(ae):(ae=ms(_)?_1:Li.current,ae=hf(m,ae));var ge=_.getDerivedStateFromProps,ye=typeof ge=="function"||typeof H.getSnapshotBeforeUpdate=="function";ye||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(W!==T||X!==ae)&&sN(m,H,T,ae),Du=!1;var me=m.memoizedState;H.state=me,_8(m,T,H,M),X=m.memoizedState,W!==T||me!==X||fs.current||Du?(typeof ge=="function"&&(RC(m,_,ge,T),X=m.memoizedState),(W=Du||rN(m,_,W,T,me,X,ae))?(ye||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(m.flags|=4194308)):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=X),H.props=T,H.state=X,H.context=ae,T=W):(typeof H.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{H=m.stateNode,LA(h,m),W=m.memoizedProps,ae=m.type===m.elementType?W:vo(m.type,W),H.props=ae,ye=m.pendingProps,me=H.context,X=_.contextType,typeof X=="object"&&X!==null?X=Ca(X):(X=ms(_)?_1:Li.current,X=hf(m,X));var Fe=_.getDerivedStateFromProps;(ge=typeof Fe=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(W!==ye||me!==X)&&sN(m,H,T,X),Du=!1,me=m.memoizedState,H.state=me,_8(m,T,H,M);var $e=m.memoizedState;W!==ye||me!==$e||fs.current||Du?(typeof Fe=="function"&&(RC(m,_,Fe,T),$e=m.memoizedState),(ae=Du||rN(m,_,ae,T,me,$e,X)||!1)?(ge||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(T,$e,X),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(T,$e,X)),typeof H.componentDidUpdate=="function"&&(m.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof H.componentDidUpdate!="function"||W===h.memoizedProps&&me===h.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||W===h.memoizedProps&&me===h.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=$e),H.props=T,H.state=$e,H.context=X,T=ae):(typeof H.componentDidUpdate!="function"||W===h.memoizedProps&&me===h.memoizedState||(m.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||W===h.memoizedProps&&me===h.memoizedState||(m.flags|=1024),T=!1)}return LC(h,m,_,T,O,M)}function LC(h,m,_,T,M,O){pN(h,m);var H=(m.flags&128)!==0;if(!T&&!H)return M&&bA(m,_,!1),uc(h,m,O);T=m.stateNode,xde.current=m;var W=H&&typeof _.getDerivedStateFromError!="function"?null:T.render();return m.flags|=1,h!==null&&H?(m.child=gf(m,h.child,null,O),m.child=gf(m,null,W,O)):zi(h,m,W,O),m.memoizedState=T.state,M&&bA(m,_,!0),m.child}function vN(h){var m=h.stateNode;m.pendingContext?_A(h,m.pendingContext,m.pendingContext!==m.context):m.context&&_A(h,m.context,!1),pC(h,m.containerInfo)}function yN(h,m,_,T,M){return pf(),lC(M),m.flags|=256,zi(h,m,_,T),m.child}var OC={dehydrated:null,treeContext:null,retryLane:0};function AC(h){return{baseLanes:h,cachePool:null,transitions:null}}function _N(h,m,_){var T=m.pendingProps,M=zn.current,O=!1,H=(m.flags&128)!==0,W;if((W=H)||(W=h!==null&&h.memoizedState===null?!1:(M&2)!==0),W?(O=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(M|=1),En(zn,M&1),h===null)return oC(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((m.mode&1)===0?m.lanes=1:h.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(H=T.children,h=T.fallback,O?(T=m.mode,O=m.child,H={mode:"hidden",children:H},(T&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=H):O=H8(H,T,0,null),h=x1(h,T,_,null),O.return=m,h.return=m,O.sibling=h,m.child=O,m.child.memoizedState=AC(_),m.memoizedState=OC,h):NC(m,H));if(M=h.memoizedState,M!==null&&(W=M.dehydrated,W!==null))return Mde(h,m,H,T,W,M,_);if(O){O=T.fallback,H=m.mode,M=h.child,W=M.sibling;var X={mode:"hidden",children:T.children};return(H&1)===0&&m.child!==M?(T=m.child,T.childLanes=0,T.pendingProps=X,m.deletions=null):(T=Bu(M,X),T.subtreeFlags=M.subtreeFlags&14680064),W!==null?O=Bu(W,O):(O=x1(O,H,_,null),O.flags|=2),O.return=m,T.return=m,T.sibling=O,m.child=T,T=O,O=m.child,H=h.child.memoizedState,H=H===null?AC(_):{baseLanes:H.baseLanes|_,cachePool:null,transitions:H.transitions},O.memoizedState=H,O.childLanes=h.childLanes&~_,m.memoizedState=OC,T}return O=h.child,h=O.sibling,T=Bu(O,{mode:"visible",children:T.children}),(m.mode&1)===0&&(T.lanes=_),T.return=m,T.sibling=null,h!==null&&(_=m.deletions,_===null?(m.deletions=[h],m.flags|=16):_.push(h)),m.child=T,m.memoizedState=null,T}function NC(h,m){return m=H8({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function R8(h,m,_,T){return T!==null&&lC(T),gf(m,h.child,null,_),h=NC(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Mde(h,m,_,T,M,O,H){if(_)return m.flags&256?(m.flags&=-257,T=xC(Error(n(422))),R8(h,m,H,T)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(O=T.fallback,M=m.mode,T=H8({mode:"visible",children:T.children},M,0,null),O=x1(O,M,H,null),O.flags|=2,T.return=m,O.return=m,T.sibling=O,m.child=T,(m.mode&1)!==0&&gf(m,h.child,null,H),m.child.memoizedState=AC(H),m.memoizedState=OC,O);if((m.mode&1)===0)return R8(h,m,H,null);if(M.data==="$!"){if(T=M.nextSibling&&M.nextSibling.dataset,T)var W=T.dgst;return T=W,O=Error(n(419)),T=xC(O,T,void 0),R8(h,m,H,T)}if(W=(H&h.childLanes)!==0,ps||W){if(T=Jr,T!==null){switch(H&-H){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(T.suspendedLanes|H))!==0?0:M,M!==0&&M!==O.retryLane&&(O.retryLane=M,lc(h,M),Co(T,h,M,-1))}return JC(),T=xC(Error(n(421))),R8(h,m,H,T)}return M.data==="$?"?(m.flags|=128,m.child=h.child,m=Bde.bind(null,h),M._reactRetry=m,null):(h=O.treeContext,Gs=Lu(M.nextSibling),qs=m,jn=!0,go=null,h!==null&&(ya[_a++]=ac,ya[_a++]=oc,ya[_a++]=C1,ac=h.id,oc=h.overflow,C1=m),m=NC(m,T.children),m.flags|=4096,m)}function CN(h,m,_){h.lanes|=m;var T=h.alternate;T!==null&&(T.lanes|=m),hC(h.return,m,_)}function DC(h,m,_,T,M){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:M}:(O.isBackwards=m,O.rendering=null,O.renderingStartTime=0,O.last=T,O.tail=_,O.tailMode=M)}function bN(h,m,_){var T=m.pendingProps,M=T.revealOrder,O=T.tail;if(zi(h,m,T.children,_),T=zn.current,(T&2)!==0)T=T&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&CN(h,_,m);else if(h.tag===19)CN(h,_,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(En(zn,T),(m.mode&1)===0)m.memoizedState=null;else switch(M){case"forwards":for(_=m.child,M=null;_!==null;)h=_.alternate,h!==null&&C8(h)===null&&(M=_),_=_.sibling;_=M,_===null?(M=m.child,m.child=null):(M=_.sibling,_.sibling=null),DC(m,!1,M,_,O);break;case"backwards":for(_=null,M=m.child,m.child=null;M!==null;){if(h=M.alternate,h!==null&&C8(h)===null){m.child=M;break}h=M.sibling,M.sibling=_,_=M,M=h}DC(m,!0,_,null,O);break;case"together":DC(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function I8(h,m){(m.mode&1)===0&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function uc(h,m,_){if(h!==null&&(m.dependencies=h.dependencies),k1|=m.lanes,(_&m.childLanes)===0)return null;if(h!==null&&m.child!==h.child)throw Error(n(153));if(m.child!==null){for(h=m.child,_=Bu(h,h.pendingProps),m.child=_,_.return=m;h.sibling!==null;)h=h.sibling,_=_.sibling=Bu(h,h.pendingProps),_.return=m;_.sibling=null}return m.child}function Pde(h,m,_){switch(m.tag){case 3:vN(m),pf();break;case 5:NA(m);break;case 1:ms(m.type)&&u8(m);break;case 4:pC(m,m.stateNode.containerInfo);break;case 10:var T=m.type._context,M=m.memoizedProps.value;En(g8,T._currentValue),T._currentValue=M;break;case 13:if(T=m.memoizedState,T!==null)return T.dehydrated!==null?(En(zn,zn.current&1),m.flags|=128,null):(_&m.child.childLanes)!==0?_N(h,m,_):(En(zn,zn.current&1),h=uc(h,m,_),h!==null?h.sibling:null);En(zn,zn.current&1);break;case 19:if(T=(_&m.childLanes)!==0,(h.flags&128)!==0){if(T)return bN(h,m,_);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),En(zn,zn.current),T)break;return null;case 22:case 23:return m.lanes=0,mN(h,m,_)}return uc(h,m,_)}var EN,UC,SN,wN;EN=function(h,m){for(var _=m.child;_!==null;){if(_.tag===5||_.tag===6)h.appendChild(_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},UC=function(){},SN=function(h,m,_,T){var M=h.memoizedProps;if(M!==T){h=m.stateNode,S1(al.current);var O=null;switch(_){case"input":M=We(h,M),T=We(h,T),O=[];break;case"select":M=J({},M,{value:void 0}),T=J({},T,{value:void 0}),O=[];break;case"textarea":M=bu(h,M),T=bu(h,T),O=[];break;default:typeof M.onClick!="function"&&typeof T.onClick=="function"&&(h.onclick=o8)}Eu(_,T);var H;_=null;for(ae in M)if(!T.hasOwnProperty(ae)&&M.hasOwnProperty(ae)&&M[ae]!=null)if(ae==="style"){var W=M[ae];for(H in W)W.hasOwnProperty(H)&&(_||(_={}),_[H]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?O||(O=[]):(O=O||[]).push(ae,null));for(ae in T){var X=T[ae];if(W=M!=null?M[ae]:void 0,T.hasOwnProperty(ae)&&X!==W&&(X!=null||W!=null))if(ae==="style")if(W){for(H in W)!W.hasOwnProperty(H)||X&&X.hasOwnProperty(H)||(_||(_={}),_[H]="");for(H in X)X.hasOwnProperty(H)&&W[H]!==X[H]&&(_||(_={}),_[H]=X[H])}else _||(O||(O=[]),O.push(ae,_)),_=X;else ae==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,W=W?W.__html:void 0,X!=null&&W!==X&&(O=O||[]).push(ae,X)):ae==="children"?typeof X!="string"&&typeof X!="number"||(O=O||[]).push(ae,""+X):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(X!=null&&ae==="onScroll"&&In("scroll",h),O||W===X||(O=[])):(O=O||[]).push(ae,X))}_&&(O=O||[]).push("style",_);var ae=O;(m.updateQueue=ae)&&(m.flags|=4)}},wN=function(h,m,_,T){_!==T&&(m.flags|=4)};function zp(h,m){if(!jn)switch(h.tailMode){case"hidden":m=h.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function Ai(h){var m=h.alternate!==null&&h.alternate.child===h.child,_=0,T=0;if(m)for(var M=h.child;M!==null;)_|=M.lanes|M.childLanes,T|=M.subtreeFlags&14680064,T|=M.flags&14680064,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)_|=M.lanes|M.childLanes,T|=M.subtreeFlags,T|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=T,h.childLanes=_,m}function Lde(h,m,_){var T=m.pendingProps;switch(sC(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ai(m),null;case 1:return ms(m.type)&&c8(),Ai(m),null;case 3:return T=m.stateNode,_f(),xn(fs),xn(Li),yC(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(m8(m)?m.flags|=4:h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,go!==null&&(zC(go),go=null))),UC(h,m),Ai(m),null;case 5:gC(m);var M=S1(Bp.current);if(_=m.type,h!==null&&m.stateNode!=null)SN(h,m,_,T,M),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!T){if(m.stateNode===null)throw Error(n(166));return Ai(m),null}if(h=S1(al.current),m8(m)){T=m.stateNode,_=m.type;var O=m.memoizedProps;switch(T[sl]=m,T[Fp]=O,h=(m.mode&1)!==0,_){case"dialog":In("cancel",T),In("close",T);break;case"iframe":case"object":case"embed":In("load",T);break;case"video":case"audio":for(M=0;M<Np.length;M++)In(Np[M],T);break;case"source":In("error",T);break;case"img":case"image":case"link":In("error",T),In("load",T);break;case"details":In("toggle",T);break;case"input":pi(T,O),In("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!O.multiple},In("invalid",T);break;case"textarea":lo(T,O),In("invalid",T)}Eu(_,O),M=null;for(var H in O)if(O.hasOwnProperty(H)){var W=O[H];H==="children"?typeof W=="string"?T.textContent!==W&&(O.suppressHydrationWarning!==!0&&a8(T.textContent,W,h),M=["children",W]):typeof W=="number"&&T.textContent!==""+W&&(O.suppressHydrationWarning!==!0&&a8(T.textContent,W,h),M=["children",""+W]):i.hasOwnProperty(H)&&W!=null&&H==="onScroll"&&In("scroll",T)}switch(_){case"input":qt(T),tl(T,O,!0);break;case"textarea":qt(T),nl(T);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(T.onclick=o8)}T=M,m.updateQueue=T,T!==null&&(m.flags|=4)}else{H=M.nodeType===9?M:M.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=p1(_)),h==="http://www.w3.org/1999/xhtml"?_==="script"?(h=H.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof T.is=="string"?h=H.createElement(_,{is:T.is}):(h=H.createElement(_),_==="select"&&(H=h,T.multiple?H.multiple=!0:T.size&&(H.size=T.size))):h=H.createElementNS(h,_),h[sl]=m,h[Fp]=T,EN(h,m,!1,!1),m.stateNode=h;e:{switch(H=Su(_,T),_){case"dialog":In("cancel",h),In("close",h),M=T;break;case"iframe":case"object":case"embed":In("load",h),M=T;break;case"video":case"audio":for(M=0;M<Np.length;M++)In(Np[M],h);M=T;break;case"source":In("error",h),M=T;break;case"img":case"image":case"link":In("error",h),In("load",h),M=T;break;case"details":In("toggle",h),M=T;break;case"input":pi(h,T),M=We(h,T),In("invalid",h);break;case"option":M=T;break;case"select":h._wrapperState={wasMultiple:!!T.multiple},M=J({},T,{value:void 0}),In("invalid",h);break;case"textarea":lo(h,T),M=bu(h,T),In("invalid",h);break;default:M=T}Eu(_,M),W=M;for(O in W)if(W.hasOwnProperty(O)){var X=W[O];O==="style"?Fn(h,X):O==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&tf(h,X)):O==="children"?typeof X=="string"?(_!=="textarea"||X!=="")&&rl(h,X):typeof X=="number"&&rl(h,""+X):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(i.hasOwnProperty(O)?X!=null&&O==="onScroll"&&In("scroll",h):X!=null&&R(h,O,X,H))}switch(_){case"input":qt(h),tl(h,T,!1);break;case"textarea":qt(h),nl(h);break;case"option":T.value!=null&&h.setAttribute("value",""+we(T.value));break;case"select":h.multiple=!!T.multiple,O=T.value,O!=null?ds(h,!!T.multiple,O,!1):T.defaultValue!=null&&ds(h,!!T.multiple,T.defaultValue,!0);break;default:typeof M.onClick=="function"&&(h.onclick=o8)}switch(_){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ai(m),null;case 6:if(h&&m.stateNode!=null)wN(h,m,h.memoizedProps,T);else{if(typeof T!="string"&&m.stateNode===null)throw Error(n(166));if(_=S1(Bp.current),S1(al.current),m8(m)){if(T=m.stateNode,_=m.memoizedProps,T[sl]=m,(O=T.nodeValue!==_)&&(h=qs,h!==null))switch(h.tag){case 3:a8(T.nodeValue,_,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&a8(T.nodeValue,_,(h.mode&1)!==0)}O&&(m.flags|=4)}else T=(_.nodeType===9?_:_.ownerDocument).createTextNode(T),T[sl]=m,m.stateNode=T}return Ai(m),null;case 13:if(xn(zn),T=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(jn&&Gs!==null&&(m.mode&1)!==0&&(m.flags&128)===0)RA(),pf(),m.flags|=98560,O=!1;else if(O=m8(m),T!==null&&T.dehydrated!==null){if(h===null){if(!O)throw Error(n(318));if(O=m.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(n(317));O[sl]=m}else pf(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ai(m),O=!1}else go!==null&&(zC(go),go=null),O=!0;if(!O)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=_,m):(T=T!==null,T!==(h!==null&&h.memoizedState!==null)&&T&&(m.child.flags|=8192,(m.mode&1)!==0&&(h===null||(zn.current&1)!==0?Nr===0&&(Nr=3):JC())),m.updateQueue!==null&&(m.flags|=4),Ai(m),null);case 4:return _f(),UC(h,m),h===null&&Dp(m.stateNode.containerInfo),Ai(m),null;case 10:return dC(m.type._context),Ai(m),null;case 17:return ms(m.type)&&c8(),Ai(m),null;case 19:if(xn(zn),O=m.memoizedState,O===null)return Ai(m),null;if(T=(m.flags&128)!==0,H=O.rendering,H===null)if(T)zp(O,!1);else{if(Nr!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(H=C8(h),H!==null){for(m.flags|=128,zp(O,!1),T=H.updateQueue,T!==null&&(m.updateQueue=T,m.flags|=4),m.subtreeFlags=0,T=_,_=m.child;_!==null;)O=_,h=T,O.flags&=14680066,H=O.alternate,H===null?(O.childLanes=0,O.lanes=h,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=H.childLanes,O.lanes=H.lanes,O.child=H.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=H.memoizedProps,O.memoizedState=H.memoizedState,O.updateQueue=H.updateQueue,O.type=H.type,h=H.dependencies,O.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),_=_.sibling;return En(zn,zn.current&1|2),m.child}h=h.sibling}O.tail!==null&&fr()>Sf&&(m.flags|=128,T=!0,zp(O,!1),m.lanes=4194304)}else{if(!T)if(h=C8(H),h!==null){if(m.flags|=128,T=!0,_=h.updateQueue,_!==null&&(m.updateQueue=_,m.flags|=4),zp(O,!0),O.tail===null&&O.tailMode==="hidden"&&!H.alternate&&!jn)return Ai(m),null}else 2*fr()-O.renderingStartTime>Sf&&_!==1073741824&&(m.flags|=128,T=!0,zp(O,!1),m.lanes=4194304);O.isBackwards?(H.sibling=m.child,m.child=H):(_=O.last,_!==null?_.sibling=H:m.child=H,O.last=H)}return O.tail!==null?(m=O.tail,O.rendering=m,O.tail=m.sibling,O.renderingStartTime=fr(),m.sibling=null,_=zn.current,En(zn,T?_&1|2:_&1),m):(Ai(m),null);case 22:case 23:return YC(),T=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(m.flags|=8192),T&&(m.mode&1)!==0?(Ks&1073741824)!==0&&(Ai(m),m.subtreeFlags&6&&(m.flags|=8192)):Ai(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function Ode(h,m){switch(sC(m),m.tag){case 1:return ms(m.type)&&c8(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return _f(),xn(fs),xn(Li),yC(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 5:return gC(m),null;case 13:if(xn(zn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(n(340));pf()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return xn(zn),null;case 4:return _f(),null;case 10:return dC(m.type._context),null;case 22:case 23:return YC(),null;case 24:return null;default:return null}}var x8=!1,Ni=!1,Ade=typeof WeakSet=="function"?WeakSet:Set,je=null;function bf(h,m){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(T){nr(h,m,T)}else _.current=null}function FC(h,m,_){try{_()}catch(T){nr(h,m,T)}}var kN=!1;function Nde(h,m){if(Y_=W4,h=rA(),V_(h)){if("selectionStart"in h)var _={start:h.selectionStart,end:h.selectionEnd};else e:{_=(_=h.ownerDocument)&&_.defaultView||window;var T=_.getSelection&&_.getSelection();if(T&&T.rangeCount!==0){_=T.anchorNode;var M=T.anchorOffset,O=T.focusNode;T=T.focusOffset;try{_.nodeType,O.nodeType}catch{_=null;break e}var H=0,W=-1,X=-1,ae=0,ge=0,ye=h,me=null;t:for(;;){for(var Fe;ye!==_||M!==0&&ye.nodeType!==3||(W=H+M),ye!==O||T!==0&&ye.nodeType!==3||(X=H+T),ye.nodeType===3&&(H+=ye.nodeValue.length),(Fe=ye.firstChild)!==null;)me=ye,ye=Fe;for(;;){if(ye===h)break t;if(me===_&&++ae===M&&(W=H),me===O&&++ge===T&&(X=H),(Fe=ye.nextSibling)!==null)break;ye=me,me=ye.parentNode}ye=Fe}_=W===-1||X===-1?null:{start:W,end:X}}else _=null}_=_||{start:0,end:0}}else _=null;for(J_={focusedElem:h,selectionRange:_},W4=!1,je=m;je!==null;)if(m=je,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,je=h;else for(;je!==null;){m=je;try{var $e=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Be=$e.memoizedProps,mr=$e.memoizedState,ne=m.stateNode,te=ne.getSnapshotBeforeUpdate(m.elementType===m.type?Be:vo(m.type,Be),mr);ne.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var re=m.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Se){nr(m,m.return,Se)}if(h=m.sibling,h!==null){h.return=m.return,je=h;break}je=m.return}return $e=kN,kN=!1,$e}function Wp(h,m,_){var T=m.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var M=T=T.next;do{if((M.tag&h)===h){var O=M.destroy;M.destroy=void 0,O!==void 0&&FC(m,_,O)}M=M.next}while(M!==T)}}function M8(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var _=m=m.next;do{if((_.tag&h)===h){var T=_.create;_.destroy=T()}_=_.next}while(_!==m)}}function jC(h){var m=h.ref;if(m!==null){var _=h.stateNode;switch(h.tag){case 5:h=_;break;default:h=_}typeof m=="function"?m(h):m.current=h}}function TN(h){var m=h.alternate;m!==null&&(h.alternate=null,TN(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&(delete m[sl],delete m[Fp],delete m[tC],delete m[vde],delete m[yde])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function RN(h){return h.tag===5||h.tag===3||h.tag===4}function IN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||RN(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function HC(h,m,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,m?_.nodeType===8?_.parentNode.insertBefore(h,m):_.insertBefore(h,m):(_.nodeType===8?(m=_.parentNode,m.insertBefore(h,_)):(m=_,m.appendChild(h)),_=_._reactRootContainer,_!=null||m.onclick!==null||(m.onclick=o8));else if(T!==4&&(h=h.child,h!==null))for(HC(h,m,_),h=h.sibling;h!==null;)HC(h,m,_),h=h.sibling}function $C(h,m,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,m?_.insertBefore(h,m):_.appendChild(h);else if(T!==4&&(h=h.child,h!==null))for($C(h,m,_),h=h.sibling;h!==null;)$C(h,m,_),h=h.sibling}var vi=null,yo=!1;function Fu(h,m,_){for(_=_.child;_!==null;)xN(h,m,_),_=_.sibling}function xN(h,m,_){if(il&&typeof il.onCommitFiberUnmount=="function")try{il.onCommitFiberUnmount(B4,_)}catch{}switch(_.tag){case 5:Ni||bf(_,m);case 6:var T=vi,M=yo;vi=null,Fu(h,m,_),vi=T,yo=M,vi!==null&&(yo?(h=vi,_=_.stateNode,h.nodeType===8?h.parentNode.removeChild(_):h.removeChild(_)):vi.removeChild(_.stateNode));break;case 18:vi!==null&&(yo?(h=vi,_=_.stateNode,h.nodeType===8?eC(h.parentNode,_):h.nodeType===1&&eC(h,_),Rp(h)):eC(vi,_.stateNode));break;case 4:T=vi,M=yo,vi=_.stateNode.containerInfo,yo=!0,Fu(h,m,_),vi=T,yo=M;break;case 0:case 11:case 14:case 15:if(!Ni&&(T=_.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){M=T=T.next;do{var O=M,H=O.destroy;O=O.tag,H!==void 0&&((O&2)!==0||(O&4)!==0)&&FC(_,m,H),M=M.next}while(M!==T)}Fu(h,m,_);break;case 1:if(!Ni&&(bf(_,m),T=_.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=_.memoizedProps,T.state=_.memoizedState,T.componentWillUnmount()}catch(W){nr(_,m,W)}Fu(h,m,_);break;case 21:Fu(h,m,_);break;case 22:_.mode&1?(Ni=(T=Ni)||_.memoizedState!==null,Fu(h,m,_),Ni=T):Fu(h,m,_);break;default:Fu(h,m,_)}}function MN(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new Ade),m.forEach(function(T){var M=qde.bind(null,h,T);_.has(T)||(_.add(T),T.then(M,M))})}}function _o(h,m){var _=m.deletions;if(_!==null)for(var T=0;T<_.length;T++){var M=_[T];try{var O=h,H=m,W=H;e:for(;W!==null;){switch(W.tag){case 5:vi=W.stateNode,yo=!1;break e;case 3:vi=W.stateNode.containerInfo,yo=!0;break e;case 4:vi=W.stateNode.containerInfo,yo=!0;break e}W=W.return}if(vi===null)throw Error(n(160));xN(O,H,M),vi=null,yo=!1;var X=M.alternate;X!==null&&(X.return=null),M.return=null}catch(ae){nr(M,m,ae)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)PN(m,h),m=m.sibling}function PN(h,m){var _=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(_o(m,h),ll(h),T&4){try{Wp(3,h,h.return),M8(3,h)}catch(Be){nr(h,h.return,Be)}try{Wp(5,h,h.return)}catch(Be){nr(h,h.return,Be)}}break;case 1:_o(m,h),ll(h),T&512&&_!==null&&bf(_,_.return);break;case 5:if(_o(m,h),ll(h),T&512&&_!==null&&bf(_,_.return),h.flags&32){var M=h.stateNode;try{rl(M,"")}catch(Be){nr(h,h.return,Be)}}if(T&4&&(M=h.stateNode,M!=null)){var O=h.memoizedProps,H=_!==null?_.memoizedProps:O,W=h.type,X=h.updateQueue;if(h.updateQueue=null,X!==null)try{W==="input"&&O.type==="radio"&&O.name!=null&&hr(M,O),Su(W,H);var ae=Su(W,O);for(H=0;H<X.length;H+=2){var ge=X[H],ye=X[H+1];ge==="style"?Fn(M,ye):ge==="dangerouslySetInnerHTML"?tf(M,ye):ge==="children"?rl(M,ye):R(M,ge,ye,ae)}switch(W){case"input":Mi(M,O);break;case"textarea":m1(M,O);break;case"select":var me=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!O.multiple;var Fe=O.value;Fe!=null?ds(M,!!O.multiple,Fe,!1):me!==!!O.multiple&&(O.defaultValue!=null?ds(M,!!O.multiple,O.defaultValue,!0):ds(M,!!O.multiple,O.multiple?[]:"",!1))}M[Fp]=O}catch(Be){nr(h,h.return,Be)}}break;case 6:if(_o(m,h),ll(h),T&4){if(h.stateNode===null)throw Error(n(162));M=h.stateNode,O=h.memoizedProps;try{M.nodeValue=O}catch(Be){nr(h,h.return,Be)}}break;case 3:if(_o(m,h),ll(h),T&4&&_!==null&&_.memoizedState.isDehydrated)try{Rp(m.containerInfo)}catch(Be){nr(h,h.return,Be)}break;case 4:_o(m,h),ll(h);break;case 13:_o(m,h),ll(h),M=h.child,M.flags&8192&&(O=M.memoizedState!==null,M.stateNode.isHidden=O,!O||M.alternate!==null&&M.alternate.memoizedState!==null||(qC=fr())),T&4&&MN(h);break;case 22:if(ge=_!==null&&_.memoizedState!==null,h.mode&1?(Ni=(ae=Ni)||ge,_o(m,h),Ni=ae):_o(m,h),ll(h),T&8192){if(ae=h.memoizedState!==null,(h.stateNode.isHidden=ae)&&!ge&&(h.mode&1)!==0)for(je=h,ge=h.child;ge!==null;){for(ye=je=ge;je!==null;){switch(me=je,Fe=me.child,me.tag){case 0:case 11:case 14:case 15:Wp(4,me,me.return);break;case 1:bf(me,me.return);var $e=me.stateNode;if(typeof $e.componentWillUnmount=="function"){T=me,_=me.return;try{m=T,$e.props=m.memoizedProps,$e.state=m.memoizedState,$e.componentWillUnmount()}catch(Be){nr(T,_,Be)}}break;case 5:bf(me,me.return);break;case 22:if(me.memoizedState!==null){AN(ye);continue}}Fe!==null?(Fe.return=me,je=Fe):AN(ye)}ge=ge.sibling}e:for(ge=null,ye=h;;){if(ye.tag===5){if(ge===null){ge=ye;try{M=ye.stateNode,ae?(O=M.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(W=ye.stateNode,X=ye.memoizedProps.style,H=X!=null&&X.hasOwnProperty("display")?X.display:null,W.style.display=pt("display",H))}catch(Be){nr(h,h.return,Be)}}}else if(ye.tag===6){if(ge===null)try{ye.stateNode.nodeValue=ae?"":ye.memoizedProps}catch(Be){nr(h,h.return,Be)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===h)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===h)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===h)break e;ge===ye&&(ge=null),ye=ye.return}ge===ye&&(ge=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:_o(m,h),ll(h),T&4&&MN(h);break;case 21:break;default:_o(m,h),ll(h)}}function ll(h){var m=h.flags;if(m&2){try{e:{for(var _=h.return;_!==null;){if(RN(_)){var T=_;break e}_=_.return}throw Error(n(160))}switch(T.tag){case 5:var M=T.stateNode;T.flags&32&&(rl(M,""),T.flags&=-33);var O=IN(h);$C(h,O,M);break;case 3:case 4:var H=T.stateNode.containerInfo,W=IN(h);HC(h,W,H);break;default:throw Error(n(161))}}catch(X){nr(h,h.return,X)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Dde(h,m,_){je=h,LN(h)}function LN(h,m,_){for(var T=(h.mode&1)!==0;je!==null;){var M=je,O=M.child;if(M.tag===22&&T){var H=M.memoizedState!==null||x8;if(!H){var W=M.alternate,X=W!==null&&W.memoizedState!==null||Ni;W=x8;var ae=Ni;if(x8=H,(Ni=X)&&!ae)for(je=M;je!==null;)H=je,X=H.child,H.tag===22&&H.memoizedState!==null?NN(M):X!==null?(X.return=H,je=X):NN(M);for(;O!==null;)je=O,LN(O),O=O.sibling;je=M,x8=W,Ni=ae}ON(h)}else(M.subtreeFlags&8772)!==0&&O!==null?(O.return=M,je=O):ON(h)}}function ON(h){for(;je!==null;){var m=je;if((m.flags&8772)!==0){var _=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Ni||M8(5,m);break;case 1:var T=m.stateNode;if(m.flags&4&&!Ni)if(_===null)T.componentDidMount();else{var M=m.elementType===m.type?_.memoizedProps:vo(m.type,_.memoizedProps);T.componentDidUpdate(M,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var O=m.updateQueue;O!==null&&AA(m,O,T);break;case 3:var H=m.updateQueue;if(H!==null){if(_=null,m.child!==null)switch(m.child.tag){case 5:_=m.child.stateNode;break;case 1:_=m.child.stateNode}AA(m,H,_)}break;case 5:var W=m.stateNode;if(_===null&&m.flags&4){_=W;var X=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&_.focus();break;case"img":X.src&&(_.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var ae=m.alternate;if(ae!==null){var ge=ae.memoizedState;if(ge!==null){var ye=ge.dehydrated;ye!==null&&Rp(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ni||m.flags&512&&jC(m)}catch(me){nr(m,m.return,me)}}if(m===h){je=null;break}if(_=m.sibling,_!==null){_.return=m.return,je=_;break}je=m.return}}function AN(h){for(;je!==null;){var m=je;if(m===h){je=null;break}var _=m.sibling;if(_!==null){_.return=m.return,je=_;break}je=m.return}}function NN(h){for(;je!==null;){var m=je;try{switch(m.tag){case 0:case 11:case 15:var _=m.return;try{M8(4,m)}catch(X){nr(m,_,X)}break;case 1:var T=m.stateNode;if(typeof T.componentDidMount=="function"){var M=m.return;try{T.componentDidMount()}catch(X){nr(m,M,X)}}var O=m.return;try{jC(m)}catch(X){nr(m,O,X)}break;case 5:var H=m.return;try{jC(m)}catch(X){nr(m,H,X)}}}catch(X){nr(m,m.return,X)}if(m===h){je=null;break}var W=m.sibling;if(W!==null){W.return=m.return,je=W;break}je=m.return}}var Ude=Math.ceil,P8=w.ReactCurrentDispatcher,VC=w.ReactCurrentOwner,Ea=w.ReactCurrentBatchConfig,Ut=0,Jr=null,wr=null,yi=0,Ks=0,Ef=Ou(0),Nr=0,Yp=null,k1=0,L8=0,BC=0,Jp=null,gs=null,qC=0,Sf=1/0,dc=null,O8=!1,GC=null,ju=null,A8=!1,Hu=null,N8=0,Qp=0,KC=null,D8=-1,U8=0;function Wi(){return(Ut&6)!==0?fr():D8!==-1?D8:D8=fr()}function $u(h){return(h.mode&1)===0?1:(Ut&2)!==0&&yi!==0?yi&-yi:Cde.transition!==null?(U8===0&&(U8=IO()),U8):(h=on,h!==0||(h=window.event,h=h===void 0?16:UO(h.type)),h)}function Co(h,m,_,T){if(50<Qp)throw Qp=0,KC=null,Error(n(185));Ep(h,_,T),((Ut&2)===0||h!==Jr)&&(h===Jr&&((Ut&2)===0&&(L8|=_),Nr===4&&Vu(h,yi)),vs(h,T),_===1&&Ut===0&&(m.mode&1)===0&&(Sf=fr()+500,d8&&Nu()))}function vs(h,m){var _=h.callbackNode;Cue(h,m);var T=K4(h,h===Jr?yi:0);if(T===0)_!==null&&kO(_),h.callbackNode=null,h.callbackPriority=0;else if(m=T&-T,h.callbackPriority!==m){if(_!=null&&kO(_),m===1)h.tag===0?_de(UN.bind(null,h)):EA(UN.bind(null,h)),pde(function(){(Ut&6)===0&&Nu()}),_=null;else{switch(xO(T)){case 1:_=k_;break;case 4:_=TO;break;case 16:_=V4;break;case 536870912:_=RO;break;default:_=V4}_=GN(_,DN.bind(null,h))}h.callbackPriority=m,h.callbackNode=_}}function DN(h,m){if(D8=-1,U8=0,(Ut&6)!==0)throw Error(n(327));var _=h.callbackNode;if(wf()&&h.callbackNode!==_)return null;var T=K4(h,h===Jr?yi:0);if(T===0)return null;if((T&30)!==0||(T&h.expiredLanes)!==0||m)m=F8(h,T);else{m=T;var M=Ut;Ut|=2;var O=jN();(Jr!==h||yi!==m)&&(dc=null,Sf=fr()+500,R1(h,m));do try{Hde();break}catch(W){FN(h,W)}while(!0);uC(),P8.current=O,Ut=M,wr!==null?m=0:(Jr=null,yi=0,m=Nr)}if(m!==0){if(m===2&&(M=T_(h),M!==0&&(T=M,m=ZC(h,M))),m===1)throw _=Yp,R1(h,0),Vu(h,T),vs(h,fr()),_;if(m===6)Vu(h,T);else{if(M=h.current.alternate,(T&30)===0&&!Fde(M)&&(m=F8(h,T),m===2&&(O=T_(h),O!==0&&(T=O,m=ZC(h,O))),m===1))throw _=Yp,R1(h,0),Vu(h,T),vs(h,fr()),_;switch(h.finishedWork=M,h.finishedLanes=T,m){case 0:case 1:throw Error(n(345));case 2:I1(h,gs,dc);break;case 3:if(Vu(h,T),(T&130023424)===T&&(m=qC+500-fr(),10<m)){if(K4(h,0)!==0)break;if(M=h.suspendedLanes,(M&T)!==T){Wi(),h.pingedLanes|=h.suspendedLanes&M;break}h.timeoutHandle=X_(I1.bind(null,h,gs,dc),m);break}I1(h,gs,dc);break;case 4:if(Vu(h,T),(T&4194240)===T)break;for(m=h.eventTimes,M=-1;0<T;){var H=31-mo(T);O=1<<H,H=m[H],H>M&&(M=H),T&=~O}if(T=M,T=fr()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*Ude(T/1960))-T,10<T){h.timeoutHandle=X_(I1.bind(null,h,gs,dc),T);break}I1(h,gs,dc);break;case 5:I1(h,gs,dc);break;default:throw Error(n(329))}}}return vs(h,fr()),h.callbackNode===_?DN.bind(null,h):null}function ZC(h,m){var _=Jp;return h.current.memoizedState.isDehydrated&&(R1(h,m).flags|=256),h=F8(h,m),h!==2&&(m=gs,gs=_,m!==null&&zC(m)),h}function zC(h){gs===null?gs=h:gs.push.apply(gs,h)}function Fde(h){for(var m=h;;){if(m.flags&16384){var _=m.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var T=0;T<_.length;T++){var M=_[T],O=M.getSnapshot;M=M.value;try{if(!po(O(),M))return!1}catch{return!1}}}if(_=m.child,m.subtreeFlags&16384&&_!==null)_.return=m,m=_;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Vu(h,m){for(m&=~BC,m&=~L8,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var _=31-mo(m),T=1<<_;h[_]=-1,m&=~T}}function UN(h){if((Ut&6)!==0)throw Error(n(327));wf();var m=K4(h,0);if((m&1)===0)return vs(h,fr()),null;var _=F8(h,m);if(h.tag!==0&&_===2){var T=T_(h);T!==0&&(m=T,_=ZC(h,T))}if(_===1)throw _=Yp,R1(h,0),Vu(h,m),vs(h,fr()),_;if(_===6)throw Error(n(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,I1(h,gs,dc),vs(h,fr()),null}function WC(h,m){var _=Ut;Ut|=1;try{return h(m)}finally{Ut=_,Ut===0&&(Sf=fr()+500,d8&&Nu())}}function T1(h){Hu!==null&&Hu.tag===0&&(Ut&6)===0&&wf();var m=Ut;Ut|=1;var _=Ea.transition,T=on;try{if(Ea.transition=null,on=1,h)return h()}finally{on=T,Ea.transition=_,Ut=m,(Ut&6)===0&&Nu()}}function YC(){Ks=Ef.current,xn(Ef)}function R1(h,m){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==-1&&(h.timeoutHandle=-1,mde(_)),wr!==null)for(_=wr.return;_!==null;){var T=_;switch(sC(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&c8();break;case 3:_f(),xn(fs),xn(Li),yC();break;case 5:gC(T);break;case 4:_f();break;case 13:xn(zn);break;case 19:xn(zn);break;case 10:dC(T.type._context);break;case 22:case 23:YC()}_=_.return}if(Jr=h,wr=h=Bu(h.current,null),yi=Ks=m,Nr=0,Yp=null,BC=L8=k1=0,gs=Jp=null,E1!==null){for(m=0;m<E1.length;m++)if(_=E1[m],T=_.interleaved,T!==null){_.interleaved=null;var M=T.next,O=_.pending;if(O!==null){var H=O.next;O.next=M,T.next=H}_.pending=T}E1=null}return h}function FN(h,m){do{var _=wr;try{if(uC(),b8.current=k8,E8){for(var T=Wn.memoizedState;T!==null;){var M=T.queue;M!==null&&(M.pending=null),T=T.next}E8=!1}if(w1=0,Yr=Ar=Wn=null,qp=!1,Gp=0,VC.current=null,_===null||_.return===null){Nr=1,Yp=m,wr=null;break}e:{var O=h,H=_.return,W=_,X=m;if(m=yi,W.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ae=X,ge=W,ye=ge.tag;if((ge.mode&1)===0&&(ye===0||ye===11||ye===15)){var me=ge.alternate;me?(ge.updateQueue=me.updateQueue,ge.memoizedState=me.memoizedState,ge.lanes=me.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Fe=cN(H);if(Fe!==null){Fe.flags&=-257,uN(Fe,H,W,O,m),Fe.mode&1&&lN(O,ae,m),m=Fe,X=ae;var $e=m.updateQueue;if($e===null){var Be=new Set;Be.add(X),m.updateQueue=Be}else $e.add(X);break e}else{if((m&1)===0){lN(O,ae,m),JC();break e}X=Error(n(426))}}else if(jn&&W.mode&1){var mr=cN(H);if(mr!==null){(mr.flags&65536)===0&&(mr.flags|=256),uN(mr,H,W,O,m),lC(Cf(X,W));break e}}O=X=Cf(X,W),Nr!==4&&(Nr=2),Jp===null?Jp=[O]:Jp.push(O),O=H;do{switch(O.tag){case 3:O.flags|=65536,m&=-m,O.lanes|=m;var ne=aN(O,X,m);OA(O,ne);break e;case 1:W=X;var te=O.type,re=O.stateNode;if((O.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(ju===null||!ju.has(re)))){O.flags|=65536,m&=-m,O.lanes|=m;var Se=oN(O,W,m);OA(O,Se);break e}}O=O.return}while(O!==null)}$N(_)}catch(Ge){m=Ge,wr===_&&_!==null&&(wr=_=_.return);continue}break}while(!0)}function jN(){var h=P8.current;return P8.current=k8,h===null?k8:h}function JC(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Jr===null||(k1&268435455)===0&&(L8&268435455)===0||Vu(Jr,yi)}function F8(h,m){var _=Ut;Ut|=2;var T=jN();(Jr!==h||yi!==m)&&(dc=null,R1(h,m));do try{jde();break}catch(M){FN(h,M)}while(!0);if(uC(),Ut=_,P8.current=T,wr!==null)throw Error(n(261));return Jr=null,yi=0,Nr}function jde(){for(;wr!==null;)HN(wr)}function Hde(){for(;wr!==null&&!due();)HN(wr)}function HN(h){var m=qN(h.alternate,h,Ks);h.memoizedProps=h.pendingProps,m===null?$N(h):wr=m,VC.current=null}function $N(h){var m=h;do{var _=m.alternate;if(h=m.return,(m.flags&32768)===0){if(_=Lde(_,m,Ks),_!==null){wr=_;return}}else{if(_=Ode(_,m),_!==null){_.flags&=32767,wr=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Nr=6,wr=null;return}}if(m=m.sibling,m!==null){wr=m;return}wr=m=h}while(m!==null);Nr===0&&(Nr=5)}function I1(h,m,_){var T=on,M=Ea.transition;try{Ea.transition=null,on=1,$de(h,m,_,T)}finally{Ea.transition=M,on=T}return null}function $de(h,m,_,T){do wf();while(Hu!==null);if((Ut&6)!==0)throw Error(n(327));_=h.finishedWork;var M=h.finishedLanes;if(_===null)return null;if(h.finishedWork=null,h.finishedLanes=0,_===h.current)throw Error(n(177));h.callbackNode=null,h.callbackPriority=0;var O=_.lanes|_.childLanes;if(bue(h,O),h===Jr&&(wr=Jr=null,yi=0),(_.subtreeFlags&2064)===0&&(_.flags&2064)===0||A8||(A8=!0,GN(V4,function(){return wf(),null})),O=(_.flags&15990)!==0,(_.subtreeFlags&15990)!==0||O){O=Ea.transition,Ea.transition=null;var H=on;on=1;var W=Ut;Ut|=4,VC.current=null,Nde(h,_),PN(_,h),ode(J_),W4=!!Y_,J_=Y_=null,h.current=_,Dde(_),hue(),Ut=W,on=H,Ea.transition=O}else h.current=_;if(A8&&(A8=!1,Hu=h,N8=M),O=h.pendingLanes,O===0&&(ju=null),pue(_.stateNode),vs(h,fr()),m!==null)for(T=h.onRecoverableError,_=0;_<m.length;_++)M=m[_],T(M.value,{componentStack:M.stack,digest:M.digest});if(O8)throw O8=!1,h=GC,GC=null,h;return(N8&1)!==0&&h.tag!==0&&wf(),O=h.pendingLanes,(O&1)!==0?h===KC?Qp++:(Qp=0,KC=h):Qp=0,Nu(),null}function wf(){if(Hu!==null){var h=xO(N8),m=Ea.transition,_=on;try{if(Ea.transition=null,on=16>h?16:h,Hu===null)var T=!1;else{if(h=Hu,Hu=null,N8=0,(Ut&6)!==0)throw Error(n(331));var M=Ut;for(Ut|=4,je=h.current;je!==null;){var O=je,H=O.child;if((je.flags&16)!==0){var W=O.deletions;if(W!==null){for(var X=0;X<W.length;X++){var ae=W[X];for(je=ae;je!==null;){var ge=je;switch(ge.tag){case 0:case 11:case 15:Wp(8,ge,O)}var ye=ge.child;if(ye!==null)ye.return=ge,je=ye;else for(;je!==null;){ge=je;var me=ge.sibling,Fe=ge.return;if(TN(ge),ge===ae){je=null;break}if(me!==null){me.return=Fe,je=me;break}je=Fe}}}var $e=O.alternate;if($e!==null){var Be=$e.child;if(Be!==null){$e.child=null;do{var mr=Be.sibling;Be.sibling=null,Be=mr}while(Be!==null)}}je=O}}if((O.subtreeFlags&2064)!==0&&H!==null)H.return=O,je=H;else e:for(;je!==null;){if(O=je,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Wp(9,O,O.return)}var ne=O.sibling;if(ne!==null){ne.return=O.return,je=ne;break e}je=O.return}}var te=h.current;for(je=te;je!==null;){H=je;var re=H.child;if((H.subtreeFlags&2064)!==0&&re!==null)re.return=H,je=re;else e:for(H=te;je!==null;){if(W=je,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:M8(9,W)}}catch(Ge){nr(W,W.return,Ge)}if(W===H){je=null;break e}var Se=W.sibling;if(Se!==null){Se.return=W.return,je=Se;break e}je=W.return}}if(Ut=M,Nu(),il&&typeof il.onPostCommitFiberRoot=="function")try{il.onPostCommitFiberRoot(B4,h)}catch{}T=!0}return T}finally{on=_,Ea.transition=m}}return!1}function VN(h,m,_){m=Cf(_,m),m=aN(h,m,1),h=Uu(h,m,1),m=Wi(),h!==null&&(Ep(h,1,m),vs(h,m))}function nr(h,m,_){if(h.tag===3)VN(h,h,_);else for(;m!==null;){if(m.tag===3){VN(m,h,_);break}else if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(ju===null||!ju.has(T))){h=Cf(_,h),h=oN(m,h,1),m=Uu(m,h,1),h=Wi(),m!==null&&(Ep(m,1,h),vs(m,h));break}}m=m.return}}function Vde(h,m,_){var T=h.pingCache;T!==null&&T.delete(m),m=Wi(),h.pingedLanes|=h.suspendedLanes&_,Jr===h&&(yi&_)===_&&(Nr===4||Nr===3&&(yi&130023424)===yi&&500>fr()-qC?R1(h,0):BC|=_),vs(h,m)}function BN(h,m){m===0&&((h.mode&1)===0?m=1:(m=G4,G4<<=1,(G4&130023424)===0&&(G4=4194304)));var _=Wi();h=lc(h,m),h!==null&&(Ep(h,m,_),vs(h,_))}function Bde(h){var m=h.memoizedState,_=0;m!==null&&(_=m.retryLane),BN(h,_)}function qde(h,m){var _=0;switch(h.tag){case 13:var T=h.stateNode,M=h.memoizedState;M!==null&&(_=M.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(m),BN(h,_)}var qN;qN=function(h,m,_){if(h!==null)if(h.memoizedProps!==m.pendingProps||fs.current)ps=!0;else{if((h.lanes&_)===0&&(m.flags&128)===0)return ps=!1,Pde(h,m,_);ps=(h.flags&131072)!==0}else ps=!1,jn&&(m.flags&1048576)!==0&&SA(m,f8,m.index);switch(m.lanes=0,m.tag){case 2:var T=m.type;I8(h,m),h=m.pendingProps;var M=hf(m,Li.current);yf(m,_),M=bC(null,m,T,h,M,_);var O=EC();return m.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ms(T)?(O=!0,u8(m)):O=!1,m.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,mC(m),M.updater=T8,m.stateNode=M,M._reactInternals=m,IC(m,T,h,_),m=LC(null,m,T,!0,O,_)):(m.tag=0,jn&&O&&iC(m),zi(null,m,M,_),m=m.child),m;case 16:T=m.elementType;e:{switch(I8(h,m),h=m.pendingProps,M=T._init,T=M(T._payload),m.type=T,M=m.tag=Kde(T),h=vo(T,h),M){case 0:m=PC(null,m,T,h,_);break e;case 1:m=gN(null,m,T,h,_);break e;case 11:m=dN(null,m,T,h,_);break e;case 14:m=hN(null,m,T,vo(T.type,h),_);break e}throw Error(n(306,T,""))}return m;case 0:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:vo(T,M),PC(h,m,T,M,_);case 1:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:vo(T,M),gN(h,m,T,M,_);case 3:e:{if(vN(m),h===null)throw Error(n(387));T=m.pendingProps,O=m.memoizedState,M=O.element,LA(h,m),_8(m,T,null,_);var H=m.memoizedState;if(T=H.element,O.isDehydrated)if(O={element:T,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},m.updateQueue.baseState=O,m.memoizedState=O,m.flags&256){M=Cf(Error(n(423)),m),m=yN(h,m,T,_,M);break e}else if(T!==M){M=Cf(Error(n(424)),m),m=yN(h,m,T,_,M);break e}else for(Gs=Lu(m.stateNode.containerInfo.firstChild),qs=m,jn=!0,go=null,_=MA(m,null,T,_),m.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(pf(),T===M){m=uc(h,m,_);break e}zi(h,m,T,_)}m=m.child}return m;case 5:return NA(m),h===null&&oC(m),T=m.type,M=m.pendingProps,O=h!==null?h.memoizedProps:null,H=M.children,Q_(T,M)?H=null:O!==null&&Q_(T,O)&&(m.flags|=32),pN(h,m),zi(h,m,H,_),m.child;case 6:return h===null&&oC(m),null;case 13:return _N(h,m,_);case 4:return pC(m,m.stateNode.containerInfo),T=m.pendingProps,h===null?m.child=gf(m,null,T,_):zi(h,m,T,_),m.child;case 11:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:vo(T,M),dN(h,m,T,M,_);case 7:return zi(h,m,m.pendingProps,_),m.child;case 8:return zi(h,m,m.pendingProps.children,_),m.child;case 12:return zi(h,m,m.pendingProps.children,_),m.child;case 10:e:{if(T=m.type._context,M=m.pendingProps,O=m.memoizedProps,H=M.value,En(g8,T._currentValue),T._currentValue=H,O!==null)if(po(O.value,H)){if(O.children===M.children&&!fs.current){m=uc(h,m,_);break e}}else for(O=m.child,O!==null&&(O.return=m);O!==null;){var W=O.dependencies;if(W!==null){H=O.child;for(var X=W.firstContext;X!==null;){if(X.context===T){if(O.tag===1){X=cc(-1,_&-_),X.tag=2;var ae=O.updateQueue;if(ae!==null){ae=ae.shared;var ge=ae.pending;ge===null?X.next=X:(X.next=ge.next,ge.next=X),ae.pending=X}}O.lanes|=_,X=O.alternate,X!==null&&(X.lanes|=_),hC(O.return,_,m),W.lanes|=_;break}X=X.next}}else if(O.tag===10)H=O.type===m.type?null:O.child;else if(O.tag===18){if(H=O.return,H===null)throw Error(n(341));H.lanes|=_,W=H.alternate,W!==null&&(W.lanes|=_),hC(H,_,m),H=O.sibling}else H=O.child;if(H!==null)H.return=O;else for(H=O;H!==null;){if(H===m){H=null;break}if(O=H.sibling,O!==null){O.return=H.return,H=O;break}H=H.return}O=H}zi(h,m,M.children,_),m=m.child}return m;case 9:return M=m.type,T=m.pendingProps.children,yf(m,_),M=Ca(M),T=T(M),m.flags|=1,zi(h,m,T,_),m.child;case 14:return T=m.type,M=vo(T,m.pendingProps),M=vo(T.type,M),hN(h,m,T,M,_);case 15:return fN(h,m,m.type,m.pendingProps,_);case 17:return T=m.type,M=m.pendingProps,M=m.elementType===T?M:vo(T,M),I8(h,m),m.tag=1,ms(T)?(h=!0,u8(m)):h=!1,yf(m,_),iN(m,T,M),IC(m,T,M,_),LC(null,m,T,!0,h,_);case 19:return bN(h,m,_);case 22:return mN(h,m,_)}throw Error(n(156,m.tag))};function GN(h,m){return wO(h,m)}function Gde(h,m,_,T){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sa(h,m,_,T){return new Gde(h,m,_,T)}function QC(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Kde(h){if(typeof h=="function")return QC(h)?1:0;if(h!=null){if(h=h.$$typeof,h===j)return 11;if(h===V)return 14}return 2}function Bu(h,m){var _=h.alternate;return _===null?(_=Sa(h.tag,m,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=m,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,m=h.dependencies,_.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function j8(h,m,_,T,M,O){var H=2;if(T=h,typeof h=="function")QC(h)&&(H=1);else if(typeof h=="string")H=5;else e:switch(h){case x:return x1(_.children,M,O,m);case L:H=8,M|=8;break;case N:return h=Sa(12,_,m,M|2),h.elementType=N,h.lanes=O,h;case $:return h=Sa(13,_,m,M),h.elementType=$,h.lanes=O,h;case Z:return h=Sa(19,_,m,M),h.elementType=Z,h.lanes=O,h;case K:return H8(_,M,O,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case D:H=10;break e;case U:H=9;break e;case j:H=11;break e;case V:H=14;break e;case z:H=16,T=null;break e}throw Error(n(130,h==null?h:typeof h,""))}return m=Sa(H,_,m,M),m.elementType=h,m.type=T,m.lanes=O,m}function x1(h,m,_,T){return h=Sa(7,h,T,m),h.lanes=_,h}function H8(h,m,_,T){return h=Sa(22,h,T,m),h.elementType=K,h.lanes=_,h.stateNode={isHidden:!1},h}function XC(h,m,_){return h=Sa(6,h,null,m),h.lanes=_,h}function eb(h,m,_){return m=Sa(4,h.children!==null?h.children:[],h.key,m),m.lanes=_,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function Zde(h,m,_,T,M){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R_(0),this.expirationTimes=R_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R_(0),this.identifierPrefix=T,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function tb(h,m,_,T,M,O,H,W,X){return h=new Zde(h,m,_,W,X),m===1?(m=1,O===!0&&(m|=8)):m=0,O=Sa(3,null,null,m),h.current=O,O.stateNode=h,O.memoizedState={element:T,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},mC(O),h}function zde(h,m,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:T==null?null:""+T,children:h,containerInfo:m,implementation:_}}function KN(h){if(!h)return Au;h=h._reactInternals;e:{if(v1(h)!==h||h.tag!==1)throw Error(n(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ms(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(h.tag===1){var _=h.type;if(ms(_))return CA(h,_,m)}return m}function ZN(h,m,_,T,M,O,H,W,X){return h=tb(_,T,!0,h,M,O,H,W,X),h.context=KN(null),_=h.current,T=Wi(),M=$u(_),O=cc(T,M),O.callback=m??null,Uu(_,O,M),h.current.lanes=M,Ep(h,M,T),vs(h,T),h}function $8(h,m,_,T){var M=m.current,O=Wi(),H=$u(M);return _=KN(_),m.context===null?m.context=_:m.pendingContext=_,m=cc(O,H),m.payload={element:h},T=T===void 0?null:T,T!==null&&(m.callback=T),h=Uu(M,m,H),h!==null&&(Co(h,M,H,O),y8(h,M,H)),H}function V8(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function zN(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<m?_:m}}function nb(h,m){zN(h,m),(h=h.alternate)&&zN(h,m)}function Wde(){return null}var WN=typeof reportError=="function"?reportError:function(h){console.error(h)};function rb(h){this._internalRoot=h}B8.prototype.render=rb.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(n(409));$8(h,m,null,null)},B8.prototype.unmount=rb.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;T1(function(){$8(null,h,null,null)}),m[ic]=null}};function B8(h){this._internalRoot=h}B8.prototype.unstable_scheduleHydration=function(h){if(h){var m=LO();h={blockedOn:null,target:h,priority:m};for(var _=0;_<xu.length&&m!==0&&m<xu[_].priority;_++);xu.splice(_,0,h),_===0&&NO(h)}};function ib(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function q8(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function YN(){}function Yde(h,m,_,T,M){if(M){if(typeof T=="function"){var O=T;T=function(){var ae=V8(H);O.call(ae)}}var H=ZN(m,T,h,0,null,!1,!1,"",YN);return h._reactRootContainer=H,h[ic]=H.current,Dp(h.nodeType===8?h.parentNode:h),T1(),H}for(;M=h.lastChild;)h.removeChild(M);if(typeof T=="function"){var W=T;T=function(){var ae=V8(X);W.call(ae)}}var X=tb(h,0,!1,null,null,!1,!1,"",YN);return h._reactRootContainer=X,h[ic]=X.current,Dp(h.nodeType===8?h.parentNode:h),T1(function(){$8(m,X,_,T)}),X}function G8(h,m,_,T,M){var O=_._reactRootContainer;if(O){var H=O;if(typeof M=="function"){var W=M;M=function(){var X=V8(H);W.call(X)}}$8(m,H,h,M)}else H=Yde(_,m,h,M,T);return V8(H)}MO=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var _=bp(m.pendingLanes);_!==0&&(I_(m,_|1),vs(m,fr()),(Ut&6)===0&&(Sf=fr()+500,Nu()))}break;case 13:T1(function(){var T=lc(h,1);if(T!==null){var M=Wi();Co(T,h,1,M)}}),nb(h,1)}},x_=function(h){if(h.tag===13){var m=lc(h,134217728);if(m!==null){var _=Wi();Co(m,h,134217728,_)}nb(h,134217728)}},PO=function(h){if(h.tag===13){var m=$u(h),_=lc(h,m);if(_!==null){var T=Wi();Co(_,h,m,T)}nb(h,m)}},LO=function(){return on},OO=function(h,m){var _=on;try{return on=h,m()}finally{on=_}},Mt=function(h,m,_){switch(m){case"input":if(Mi(h,_),m=_.name,_.type==="radio"&&m!=null){for(_=h;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<_.length;m++){var T=_[m];if(T!==h&&T.form===h.form){var M=l8(T);if(!M)throw Error(n(90));dr(T),Mi(T,M)}}}break;case"textarea":m1(h,_);break;case"select":m=_.value,m!=null&&ds(h,!!_.multiple,m,!1)}},uo=WC,hs=T1;var Jde={usingClientEntryPoint:!1,Events:[jp,uf,l8,gi,Wr,WC]},Xp={findFiberByHostInstance:y1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qde={bundleType:Xp.bundleType,version:Xp.version,rendererPackageName:Xp.rendererPackageName,rendererConfig:Xp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=EO(h),h===null?null:h.stateNode},findFiberByHostInstance:Xp.findFiberByHostInstance||Wde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K8.isDisabled&&K8.supportsFiber)try{B4=K8.inject(Qde),il=K8}catch{}}return _s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jde,_s.createPortal=function(h,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ib(m))throw Error(n(200));return zde(h,m,null,_)},_s.createRoot=function(h,m){if(!ib(h))throw Error(n(299));var _=!1,T="",M=WN;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onRecoverableError!==void 0&&(M=m.onRecoverableError)),m=tb(h,1,!1,null,null,_,!1,T,M),h[ic]=m.current,Dp(h.nodeType===8?h.parentNode:h),new rb(m)},_s.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=EO(m),h=h===null?null:h.stateNode,h},_s.flushSync=function(h){return T1(h)},_s.hydrate=function(h,m,_){if(!q8(m))throw Error(n(200));return G8(null,h,m,!0,_)},_s.hydrateRoot=function(h,m,_){if(!ib(h))throw Error(n(405));var T=_!=null&&_.hydratedSources||null,M=!1,O="",H=WN;if(_!=null&&(_.unstable_strictMode===!0&&(M=!0),_.identifierPrefix!==void 0&&(O=_.identifierPrefix),_.onRecoverableError!==void 0&&(H=_.onRecoverableError)),m=ZN(m,null,h,1,_??null,M,!1,O,H),h[ic]=m.current,Dp(h),T)for(h=0;h<T.length;h++)_=T[h],M=_._getVersion,M=M(_._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[_,M]:m.mutableSourceEagerHydrationData.push(_,M);return new B8(m)},_s.render=function(h,m,_){if(!q8(m))throw Error(n(200));return G8(null,h,m,!1,_)},_s.unmountComponentAtNode=function(h){if(!q8(h))throw Error(n(40));return h._reactRootContainer?(T1(function(){G8(null,null,h,!1,function(){h._reactRootContainer=null,h[ic]=null})}),!0):!1},_s.unstable_batchedUpdates=WC,_s.unstable_renderSubtreeIntoContainer=function(h,m,_,T){if(!q8(_))throw Error(n(200));if(h==null||h._reactInternals===void 0)throw Error(n(38));return G8(h,m,_,!1,T)},_s.version="18.3.1-next-f1338f8080-20240426",_s}var tF;function xz(){if(tF)return Nb.exports;tF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Nb.exports=Lme(),Nb.exports}var nF;function Ome(){if(nF)return ov;nF=1;var t=xz();return ov.createRoot=t.createRoot,ov.hydrateRoot=t.hydrateRoot,ov}var Ame=Ome(),rF={};function Nme(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var Dme=Object.defineProperty,Ume=(t,e,n)=>e in t?Dme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iF=(t,e,n)=>Ume(t,typeof e!="symbol"?e+"":e,n);let ns=class{constructor(){iF(this,"_locking"),iF(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}};function lr(t,e){if(!t)throw new Error(e)}const Fme=34028234663852886e22,jme=-34028234663852886e22,Hme=4294967295,$me=2147483647,Vme=-2147483648;function I7(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>$me||t<Vme)throw new Error("invalid int 32: "+t)}function _k(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Hme||t<0)throw new Error("invalid uint 32: "+t)}function Mz(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>Fme||t<jme))throw new Error("invalid float 32: "+t)}const Pz=Symbol("@bufbuild/protobuf/enum-type");function Bme(t){const e=t[Pz];return lr(e,"missing enum type on enum object"),e}function Lz(t,e,n,r){t[Pz]=Oz(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function Oz(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const a of e){const o=Az(a);s.push(o),r[a.name]=o,i[a.no]=o}return{typeName:t,values:s,findName(a){return r[a]},findNumber(a){return i[a]}}}function qme(t,e,n){const r={};for(const i of e){const s=Az(i);r[s.localName]=s.no,r[s.no]=s.localName}return Lz(r,t,e),r}function Az(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class ox{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Gme(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),a={[s]:function(o){t.util.initFields(this),t.util.initPartial(o,this)}}[s];return Object.setPrototypeOf(a.prototype,new ox),Object.assign(a,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(o,l){return new a().fromBinary(o,l)},fromJson(o,l){return new a().fromJson(o,l)},fromJsonString(o,l){return new a().fromJsonString(o,l)},equals(o,l){return t.util.equals(a,o,l)}}),a}function Kme(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Fb(t,e,n){for(let s=0;s<28;s=s+7){const a=t>>>s,o=!(!(a>>>7)&&e==0),l=(o?a|128:a)&255;if(n.push(l),!o)return}const r=t>>>28&15|(e&7)<<4,i=e>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const a=e>>>s,o=!!(a>>>7),l=(o?a|128:a)&255;if(n.push(l),!o)return}n.push(e>>>31&1)}}const x7=4294967296;function sF(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(a,o){const l=Number(t.slice(a,o));i*=n,r=r*n+l,r>=x7&&(i=i+(r/x7|0),r=r%x7)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Dz(r,i):lx(r,i)}function Zme(t,e){let n=lx(t,e);const r=n.hi&2147483648;r&&(n=Dz(n.lo,n.hi));const i=Nz(n.lo,n.hi);return r?"-"+i:i}function Nz(t,e){if({lo:t,hi:e}=zme(t,e),e<=2097151)return String(x7*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,a=r+i*8147497,o=i*2;const l=1e7;return s>=l&&(a+=Math.floor(s/l),s%=l),a>=l&&(o+=Math.floor(a/l),a%=l),o.toString()+aF(a)+aF(s)}function zme(t,e){return{lo:t>>>0,hi:e>>>0}}function lx(t,e){return{lo:t|0,hi:e|0}}function Dz(t,e){return e=~e,t?t=~t+1:e+=1,lx(t,e)}const aF=t=>{const e=String(t);return"0000000".slice(e.length)+e};function oF(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Wme(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Yme(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof rF!="object"||rF.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),a=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error("int64 invalid: ".concat(l));return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>o||c<a)throw new Error("uint64 invalid: ".concat(l));return c},enc(l){return t.setBigInt64(0,this.parse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(l){return t.setBigInt64(0,this.uParse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigInt64(0,!0)},uDec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigUint64(0,!0)}}}const n=i=>lr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>lr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),sF(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),sF(i)},dec(i,s){return Zme(i,s)},uDec(i,s){return Nz(i,s)}}}const Kn=Yme();var he;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(he||(he={}));var Ud;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Ud||(Ud={}));function Zu(t,e,n){if(e===n)return!0;if(t==he.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==n}return!1}function am(t,e){switch(t){case he.BOOL:return!1;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return e==0?Kn.zero:"0";case he.DOUBLE:case he.FLOAT:return 0;case he.BYTES:return new Uint8Array(0);case he.STRING:return"";default:return 0}}function Uz(t,e){switch(t){case he.BOOL:return e===!1;case he.STRING:return e==="";case he.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var gr;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(gr||(gr={}));class Jme{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(_k(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return I7(e),oF(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Mz(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){_k(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){I7(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return I7(e),e=(e<<1^e>>31)>>>0,oF(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Kn.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Kn.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Kn.enc(e);return Fb(n.lo,n.hi,this.buf),this}sint64(e){let n=Kn.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Fb(i,s,this.buf),this}uint64(e){let n=Kn.uEnc(e);return Fb(n.lo,n.hi,this.buf),this}}class Qme{constructor(e,n){this.varint64=Kme,this.uint32=Wme,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case gr.Varint:for(;this.buf[this.pos++]&128;);break;case gr.Bit64:this.pos+=4;case gr.Bit32:this.pos+=4;break;case gr.LengthDelimited:let i=this.uint32();this.pos+=i;break;case gr.StartGroup:for(;;){const[s,a]=this.tag();if(a===gr.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(a,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Kn.dec(...this.varint64())}uint64(){return Kn.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Kn.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Kn.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Kn.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Xme(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function Fz(t){const e=t.field.localName,n=Object.create(null);return n[e]=epe(t),[n,()=>n[e]]}function epe(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return am(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function tpe(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Oc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),O9=[];for(let t=0;t<Oc.length;t++)O9[Oc[t].charCodeAt(0)]=t;O9[45]=Oc.indexOf("+");O9[95]=Oc.indexOf("/");const jz={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,a=0;for(let o=0;o<t.length;o++){if(s=O9[t.charCodeAt(o)],s===void 0)switch(t[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=s,i=1;break;case 1:n[r++]=a<<2|(s&48)>>4,a=s,i=2;break;case 2:n[r++]=(a&15)<<4|(s&60)>>2,a=s,i=3;break;case 3:n[r++]=(a&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=Oc[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Oc[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Oc[i|r>>6],e+=Oc[r&63],n=0;break}return n&&(e+=Oc[i],e+="=",n==1&&(e+="=")),e}};function npe(t,e,n){$z(e,t);const r=e.runtime.bin.makeReadOptions(n),i=tpe(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,a]=Fz(e);for(const o of i)e.runtime.bin.readField(s,r.readerFactory(o.data),e.field,o.wireType,r);return a()}function rpe(t,e,n,r){$z(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Hz(t,e)){const c=t.getType().runtime.bin.listUnknownFields(t).filter(d=>d.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const d of c)t.getType().runtime.bin.onUnknownField(t,d.no,d.wireType,d.data)}const a=s.writerFactory();let o=e.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(o,n,a,s);const l=i.readerFactory(a.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),f=l.skip(d,c);t.getType().runtime.bin.onUnknownField(t,c,d,f)}}function Hz(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function $z(t,e){lr(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function Vz(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!Uz(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function lF(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?am(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function oh(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(ox.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function Bz(t,e){return oh(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}he.DOUBLE,he.FLOAT,he.INT64,he.UINT64,he.INT32,he.UINT32,he.BOOL,he.STRING,he.BYTES;const cF={ignoreUnknownFields:!1},uF={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ipe(t){return t?Object.assign(Object.assign({},cF),t):cF}function spe(t){return t?Object.assign(Object.assign({},uF),t):uF}const q6=Symbol(),M7=Symbol();function ape(){return{makeReadOptions:ipe,makeWriteOptions:spe,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(kl(e)));r=r??new t;const i=new Map,s=n.typeRegistry;for(const[a,o]of Object.entries(e)){const l=t.fields.findJsonName(a);if(l){if(l.oneof){if(o===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(c,'", "').concat(a,'"'));i.set(l.oneof,a)}dF(r,o,l,n,t)}else{let c=!1;if(s!=null&&s.findExtension&&a.startsWith("[")&&a.endsWith("]")){const d=s.findExtension(a.substring(1,a.length-1));if(d&&d.extendee.typeName==t.typeName){c=!0;const[f,p]=Fz(d);dF(f,o,d.field,n,d),rpe(r,d,p(),n)}}if(!c&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!Vz(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!lpe(i))continue}const a=i.oneof?t[i.oneof.localName].value:t[i.localName],o=hF(i,a,e);o!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=o)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(t)){const o=s.findExtensionFor(n.typeName,a.no);if(o&&Hz(t,o)){const l=npe(t,o,e),c=hF(o.field,l,e);c!==void 0&&(r[o.field.jsonName]=c)}}}catch(s){const a=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),o=s instanceof Error?s.message:String(s);throw new Error(a+(o.length>0?": ".concat(o):""))}return r},readScalar(t,e,n){return g0(t,e,n??Ud.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||Uz(t,e)))return P7(t,e)},debug:kl}}function kl(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function dF(t,e,n,r,i){let s=n.localName;if(n.repeated){if(lr(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(e)));const a=t[s];for(const o of e){if(o===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(o)));switch(n.kind){case"message":a.push(n.T.fromJson(o,r));break;case"enum":const l=jb(n.T,o,r.ignoreUnknownFields,!0);l!==M7&&a.push(l);break;case"scalar":try{a.push(g0(n.T,o,n.L,!0))}catch(c){let d="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(o));throw c instanceof Error&&c.message.length>0&&(d+=": ".concat(c.message)),new Error(d)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(e)));const a=t[s];for(const[o,l]of Object.entries(e)){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let c;try{c=ope(n.K,o)}catch(d){let f="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}switch(n.V.kind){case"message":a[c]=n.V.T.fromJson(l,r);break;case"enum":const d=jb(n.V.T,l,r.ignoreUnknownFields,!0);d!==M7&&(a[c]=d);break;case"scalar":try{a[c]=g0(n.V.T,l,Ud.BIGINT,!0)}catch(f){let p="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(e));throw f instanceof Error&&f.message.length>0&&(p+=": ".concat(f.message)),new Error(p)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const a=n.T;if(e===null&&a.typeName!="google.protobuf.Value")return;let o=t[s];oh(o)?o.fromJson(e,r):(t[s]=o=a.fromJson(e,r),a.fieldWrapper&&!n.oneof&&(t[s]=a.fieldWrapper.unwrapField(o)));break;case"enum":const l=jb(n.T,e,r.ignoreUnknownFields,!1);switch(l){case q6:lF(n,t);break;case M7:break;default:t[s]=l;break}break;case"scalar":try{const c=g0(n.T,e,n.L,!1);switch(c){case q6:lF(n,t);break;default:t[s]=c;break}}catch(c){let d="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(kl(e));throw c instanceof Error&&c.message.length>0&&(d+=": ".concat(c.message)),new Error(d)}break}}function ope(t,e){if(t===he.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return g0(t,e,Ud.BIGINT,!0).toString()}function g0(t,e,n,r){if(e===null)return r?am(t,n):q6;switch(t){case he.DOUBLE:case he.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==he.FLOAT&&Mz(i),i;case he.INT32:case he.FIXED32:case he.SFIXED32:case he.SINT32:case he.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==he.UINT32||t==he.FIXED32?_k(s):I7(s),s;case he.INT64:case he.SFIXED64:case he.SINT64:if(typeof e!="number"&&typeof e!="string")break;const a=Kn.parse(e);return n?a.toString():a;case he.FIXED64:case he.UINT64:if(typeof e!="number"&&typeof e!="string")break;const o=Kn.uParse(e);return n?o.toString():o;case he.BOOL:if(typeof e!="boolean")break;return e;case he.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case he.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return jz.dec(e)}throw new Error}function jb(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:q6;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return M7;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(kl(e)))}function lpe(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function hF(t,e,n){if(t.kind=="map"){lr(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[a,o]of i)r[a.toString()]=P7(t.V.T,o);break;case"message":for(const[a,o]of i)r[a.toString()]=o.toJson(n);break;case"enum":const s=t.V.T;for(const[a,o]of i)r[a.toString()]=Hb(s,o,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){lr(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(P7(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Hb(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return P7(t.T,e);case"enum":return Hb(t.T,e,n.enumAsInteger);case"message":return Bz(t.T,e).toJson(n)}}function Hb(t,e,n){var r;if(lr(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function P7(t,e){switch(t){case he.INT32:case he.SFIXED32:case he.SINT32:case he.FIXED32:case he.UINT32:return lr(typeof e=="number"),e;case he.FLOAT:case he.DOUBLE:return lr(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case he.STRING:return lr(typeof e=="string"),e;case he.BOOL:return lr(typeof e=="boolean"),e;case he.UINT64:case he.FIXED64:case he.INT64:case he.SFIXED64:case he.SINT64:return lr(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case he.BYTES:return lr(e instanceof Uint8Array),jz.enc(e)}}const Of=Symbol("@bufbuild/protobuf/unknown-fields"),fF={readUnknownFields:!0,readerFactory:t=>new Qme(t)},mF={writeUnknownFields:!0,writerFactory:()=>new Jme};function cpe(t){return t?Object.assign(Object.assign({},fF),t):fF}function upe(t){return t?Object.assign(Object.assign({},mF),t):mF}function dpe(){return{makeReadOptions:cpe,makeWriteOptions:upe,listUnknownFields(t){var e;return(e=t[Of])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Of]},writeUnknownFields(t,e){const r=t[Of];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Of])||(i[Of]=[]),i[Of].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),a=i?e.len:e.pos+n;let o,l;for(;e.pos<a&&([o,l]=e.tag(),!(i===!0&&l==gr.EndGroup));){const c=s.fields.find(o);if(!c){const d=e.skip(l,o);r.readUnknownFields&&this.onUnknownField(t,o,l,d);continue}pF(t,e,c,l,r)}if(i&&(l!=gr.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:pF,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!Vz(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];gF(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&gF(t,e,n,r)}}}function pF(t,e,n,r,i){let{repeated:s,localName:a}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=a&&delete t.value,t.case=a,a="value"),n.kind){case"scalar":case"enum":const o=n.kind=="enum"?he.INT32:n.T;let l=G6;if(n.kind=="scalar"&&n.L>0&&(l=fpe),s){let p=t[a];if(r==gr.LengthDelimited&&o!=he.STRING&&o!=he.BYTES){let y=e.uint32()+e.pos;for(;e.pos<y;)p.push(l(e,o))}else p.push(l(e,o))}else t[a]=l(e,o);break;case"message":const c=n.T;s?t[a].push(L7(e,new c,i,n)):oh(t[a])?L7(e,t[a],i,n):(t[a]=L7(e,new c,i,n),c.fieldWrapper&&!n.oneof&&!n.repeated&&(t[a]=c.fieldWrapper.unwrapField(t[a])));break;case"map":let[d,f]=hpe(n,e,i);t[a][d]=f;break}}function L7(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function hpe(t,e,n){const r=e.uint32(),i=e.pos+r;let s,a;for(;e.pos<i;){const[o]=e.tag();switch(o){case 1:s=G6(e,t.K);break;case 2:switch(t.V.kind){case"scalar":a=G6(e,t.V.T);break;case"enum":a=e.int32();break;case"message":a=L7(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=am(t.K,Ud.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(t.V.kind){case"scalar":a=am(t.V.T,Ud.BIGINT);break;case"enum":a=t.V.T.values[0].no;break;case"message":a=new t.V.T;break}return[s,a]}function fpe(t,e){const n=G6(t,e);return typeof n=="bigint"?n.toString():n}function G6(t,e){switch(e){case he.STRING:return t.string();case he.BOOL:return t.bool();case he.DOUBLE:return t.double();case he.FLOAT:return t.float();case he.INT32:return t.int32();case he.INT64:return t.int64();case he.UINT64:return t.uint64();case he.FIXED64:return t.fixed64();case he.BYTES:return t.bytes();case he.FIXED32:return t.fixed32();case he.SFIXED32:return t.sfixed32();case he.SFIXED64:return t.sfixed64();case he.SINT64:return t.sint64();case he.UINT32:return t.uint32();case he.SINT32:return t.sint32()}}function gF(t,e,n,r){lr(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?he.INT32:t.T;if(i)if(lr(Array.isArray(e)),t.packed)ppe(n,s,t.no,e);else for(const a of e)v0(n,s,t.no,a);else v0(n,s,t.no,e);break;case"message":if(i){lr(Array.isArray(e));for(const a of e)vF(n,r,t,a)}else vF(n,r,t,e);break;case"map":lr(typeof e=="object"&&e!=null);for(const[a,o]of Object.entries(e))mpe(n,r,t,a,o);break}}function mpe(t,e,n,r,i){t.tag(n.no,gr.LengthDelimited),t.fork();let s=r;switch(n.K){case he.INT32:case he.FIXED32:case he.UINT32:case he.SFIXED32:case he.SINT32:s=Number.parseInt(r);break;case he.BOOL:lr(r=="true"||r=="false"),s=r=="true";break}switch(v0(t,n.K,1,s),n.V.kind){case"scalar":v0(t,n.V.T,2,i);break;case"enum":v0(t,he.INT32,2,i);break;case"message":lr(i!==void 0),t.tag(2,gr.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function vF(t,e,n,r){const i=Bz(n.T,r);n.delimited?t.tag(n.no,gr.StartGroup).raw(i.toBinary(e)).tag(n.no,gr.EndGroup):t.tag(n.no,gr.LengthDelimited).bytes(i.toBinary(e))}function v0(t,e,n,r){lr(r!==void 0);let[i,s]=qz(e);t.tag(n,i)[s](r)}function ppe(t,e,n,r){if(!r.length)return;t.tag(n,gr.LengthDelimited).fork();let[,i]=qz(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function qz(t){let e=gr.Varint;switch(t){case he.BYTES:case he.STRING:e=gr.LengthDelimited;break;case he.DOUBLE:case he.FIXED64:case he.SFIXED64:e=gr.Bit64;break;case he.FIXED32:case he.SFIXED32:case he.FLOAT:e=gr.Bit32;break}const n=he[t].toLowerCase();return[e,n]}function gpe(){return{setEnumType:Lz,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,a=t;if(a[i]!=null)switch(r.kind){case"oneof":const o=a[i].case;if(o===void 0)continue;const l=r.findField(o);let c=a[i].value;l&&l.kind=="message"&&!oh(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===he.BYTES&&(c=g3(c)),s[i]={case:o,value:c};break;case"scalar":case"enum":let d=a[i];r.T===he.BYTES&&(d=r.repeated?d.map(g3):g3(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===he.BYTES)for(const[g,y]of Object.entries(a[i]))s[i][g]=g3(y);else Object.assign(s[i],a[i]);break;case"message":const p=r.V.T;for(const g of Object.keys(a[i])){let y=a[i][g];p.fieldWrapper||(y=new p(y)),s[i][g]=y}break}break;case"message":const f=r.T;if(r.repeated)s[i]=a[i].map(p=>oh(p,f)?p:new f(p));else{const p=a[i];f.fieldWrapper?f.typeName==="google.protobuf.BytesValue"?s[i]=g3(p):s[i]=p:s[i]=oh(p,f)?p:new f(p)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((a,o)=>r.T.equals(a,s[o]));case"scalar":return i.every((a,o)=>Zu(r.T,a,s[o]));case"enum":return i.every((a,o)=>Zu(he.INT32,a,s[o]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Zu(he.INT32,i,s);case"scalar":return Zu(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const a=r.findField(i.case);if(a===void 0)return!0;switch(a.kind){case"message":return a.T.equals(i.value,s.value);case"enum":return Zu(he.INT32,i.value,s.value);case"scalar":return Zu(a.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(a.kind));case"map":const o=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return o.every(d=>l.equals(i[d],s[d]));case"enum":return o.every(d=>Zu(he.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return o.every(d=>Zu(c,i[d],s[d]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let a;if(i.repeated)a=s.map(lv);else if(i.kind=="map"){a=r[i.localName];for(const[o,l]of Object.entries(s))a[o]=lv(l)}else i.kind=="oneof"?a=i.findField(s.case)?{case:s.case,value:lv(s.value)}:{case:void 0}:a=lv(s);r[i.localName]=a}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function lv(t){if(t===void 0)return t;if(oh(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function g3(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function vpe(t,e,n){return{syntax:t,json:ape(),bin:dpe(),util:Object.assign(Object.assign({},gpe()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return Gme(this,r,i,s)},makeEnum:qme,makeEnumType:Oz,getEnumType:Bme,makeExtension(r,i,s){return Xme(this,r,i,s)}}}class ype{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function Gz(t,e){const n=Kz(t);return e?n:wpe(Spe(n))}function _pe(t){return Gz(t,!1)}const Cpe=Kz;function Kz(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const bpe=new Set(["constructor","toString","toJSON","valueOf"]),Epe=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Zz=t=>"".concat(t,"$"),Spe=t=>Epe.has(t)?Zz(t):t,wpe=t=>bpe.has(t)?Zz(t):t;class kpe{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=_pe(e)}addField(e){lr(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function Tpe(t,e){var n,r,i,s,a,o;const l=[];let c;for(const d of typeof t=="function"?t():t){const f=d;if(f.localName=Gz(d.name,d.oneof!==void 0),f.jsonName=(n=d.jsonName)!==null&&n!==void 0?n:Cpe(d.name),f.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(f.L=(i=d.L)!==null&&i!==void 0?i:Ud.BIGINT),f.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,f.req=(a=d.req)!==null&&a!==void 0?a:!1,f.opt=(o=d.opt)!==null&&o!==void 0?o:!1,d.packed===void 0&&(f.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=he.BYTES&&d.T!=he.STRING),d.oneof!==void 0){const p=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=p)&&(c=new kpe(p)),f.oneof=c,c.addField(f)}l.push(f)}return l}const ce=vpe("proto3",t=>new ype(t,e=>Tpe(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=am(e.T,e.L);break}}});class Rs extends ox{constructor(e){super(),this.seconds=Kn.zero,this.nanos=0,ce.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ce.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Kn.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Rs.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Rs({seconds:Kn.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Rs().fromBinary(e,n)}static fromJson(e,n){return new Rs().fromJson(e,n)}static fromJsonString(e,n){return new Rs().fromJsonString(e,n)}static equals(e,n){return ce.util.equals(Rs,e,n)}}Rs.runtime=ce;Rs.typeName="google.protobuf.Timestamp";Rs.fields=ce.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Rpe=ce.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Rs},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Ipe,repeated:!0},{no:5,name:"events",kind:"message",T:Mpe,repeated:!0}]),Ipe=ce.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:xpe,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),xpe=ce.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Rs},{no:3,name:"value",kind:"scalar",T:2}]),Mpe=ce.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Rs},{no:7,name:"normalized_end_timestamp",kind:"message",T:Rs,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),zz=ce.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),No=ce.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Ir=ce.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),R2=ce.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),J3=ce.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),rg=ce.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Fo=ce.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"}]),Af=ce.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Ppe=ce.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),oi=ce.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),A9=ce.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:K6,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:aW}]),K6=ce.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),Lpe=ce.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ce.getEnumType(Ir),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Ch=ce.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ce.getEnumType(I2)},{no:4,name:"tracks",kind:"message",T:o2,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Lpe},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ce.getEnumType(ig)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ce.getEnumType(Fo)},{no:18,name:"kind_details",kind:"enum",T:ce.getEnumType(Ope),repeated:!0}]),I2=ce.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ig=ce.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Ope=ce.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),sa=ce.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),Ape=ce.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:lh,repeated:!0}]),o2=ce.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ce.getEnumType(No)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ce.getEnumType(Ir)},{no:10,name:"layers",kind:"message",T:lh,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Ape,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ce.getEnumType(sa)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:aW},{no:19,name:"audio_features",kind:"enum",T:ce.getEnumType(oi),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ce.getEnumType(zz)}]),lh=ce.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ce.getEnumType(R2)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),Es=ce.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ce.getEnumType(Ht)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Yz,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Npe,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Jz,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Dpe,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Rpe,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Ck,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Qz,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Xz,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:eW,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Ek,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Sk,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:wk,oneof:"value"}]),Ht=ce.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),Npe=ce.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:Wz,repeated:!0}]),Wz=ce.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Yz=ce.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),Jz=ce.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),Dpe=ce.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:Upe,repeated:!0}]),Upe=ce.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Ck=ce.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Qz=ce.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Xz=ce.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),eW=ce.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:tW,oneof:"value"}]),tW=ce.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),nW=ce.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),Fpe=ce.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ce.getEnumType(rW)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),rW=ce.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),jpe=ce.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ce.getEnumType(iW)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),iW=ce.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"}]),sW=ce.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:yF},{no:2,name:"screen",kind:"message",T:yF},{no:3,name:"resume_connection",kind:"enum",T:ce.getEnumType(rg)},{no:4,name:"disabled_codecs",kind:"message",T:Hpe},{no:5,name:"force_relay",kind:"enum",T:ce.getEnumType(rg)}]),yF=ce.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ce.getEnumType(rg)}]),Hpe=ce.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:K6,repeated:!0},{no:2,name:"publish",kind:"message",T:K6,repeated:!0}]),aW=ce.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),bk=ce.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),oW=ce.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ce.getEnumType(bk)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),lW=ce.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Ek=ce.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ce.getEnumType(sa)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:oW,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:lW,oneof:"content_header"}],{localName:"DataStream_Header"}),Sk=ce.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),wk=ce.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Do=ce.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),kk=ce.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),$pe=ce.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),Vpe=ce.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:bh,oneof:"message"},{no:2,name:"answer",kind:"message",T:bh,oneof:"message"},{no:3,name:"trickle",kind:"message",T:cx,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Rk,oneof:"message"},{no:5,name:"mute",kind:"message",T:ux,oneof:"message"},{no:6,name:"subscription",kind:"message",T:N9,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:cW,oneof:"message"},{no:8,name:"leave",kind:"message",T:D9,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:dW,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:pW,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:gW,oneof:"message"},{no:13,name:"simulate",kind:"message",T:bl,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:hW,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:yW,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:uW,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Zpe,oneof:"message"}]),_F=ce.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:Bpe,oneof:"message"},{no:2,name:"answer",kind:"message",T:bh,oneof:"message"},{no:3,name:"offer",kind:"message",T:bh,oneof:"message"},{no:4,name:"trickle",kind:"message",T:cx,oneof:"message"},{no:5,name:"update",kind:"message",T:Kpe,oneof:"message"},{no:6,name:"track_published",kind:"message",T:dx,oneof:"message"},{no:8,name:"leave",kind:"message",T:D9,oneof:"message"},{no:9,name:"mute",kind:"message",T:ux,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:zpe,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Wpe,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Jpe,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Xpe,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:t3e,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:n3e,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Gpe,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:qpe,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:i3e,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:o3e,oneof:"message"},{no:22,name:"request_response",kind:"message",T:l3e,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:c3e,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:r3e,oneof:"message"}]),Tk=ce.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),Rk=ce.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ce.getEnumType(No)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ce.getEnumType(Ir)},{no:9,name:"layers",kind:"message",T:lh,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Tk,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ce.getEnumType(sa)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ce.getEnumType(zz)},{no:17,name:"audio_features",kind:"enum",T:ce.getEnumType(oi),repeated:!0}]),cx=ce.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ce.getEnumType(Do)},{no:3,name:"final",kind:"scalar",T:8}]),ux=ce.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),Bpe=ce.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:A9},{no:2,name:"participant",kind:"message",T:Ch},{no:3,name:"other_participants",kind:"message",T:Ch,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:fW,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:sW},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Fpe},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:K6,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),qpe=ce.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:fW,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:sW}]),dx=ce.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:o2}]),Gpe=ce.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),bh=ce.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),Kpe=ce.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Ch,repeated:!0}]),N9=ce.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:nW,repeated:!0}]),cW=ce.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ce.getEnumType(R2)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),uW=ce.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ce.getEnumType(oi),repeated:!0}]),Zpe=ce.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),D9=ce.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ce.getEnumType(Fo)},{no:3,name:"action",kind:"enum",T:ce.getEnumType(x2)},{no:4,name:"regions",kind:"message",T:s3e}]),x2=ce.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),dW=ce.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:lh,repeated:!0}]),hW=ce.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),fW=ce.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),zpe=ce.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:Wz,repeated:!0}]),Wpe=ce.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:A9}]),Ype=ce.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ce.getEnumType(J3)},{no:3,name:"score",kind:"scalar",T:2}]),Jpe=ce.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Ype,repeated:!0}]),Qpe=ce.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ce.getEnumType(kk)}]),Xpe=ce.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Qpe,repeated:!0}]),hx=ce.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ce.getEnumType(R2)},{no:2,name:"enabled",kind:"scalar",T:8}]),e3e=ce.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:hx,repeated:!0}]),t3e=ce.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:hx,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:e3e,repeated:!0}]),mW=ce.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),pW=ce.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:mW,repeated:!0}]),n3e=ce.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),r3e=ce.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:A9},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Ch},{no:4,name:"other_participants",kind:"message",T:Ch,repeated:!0}]),gW=ce.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:bh},{no:2,name:"subscription",kind:"message",T:N9},{no:3,name:"publish_tracks",kind:"message",T:dx,repeated:!0},{no:4,name:"data_channels",kind:"message",T:vW,repeated:!0},{no:5,name:"offer",kind:"message",T:bh},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),vW=ce.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ce.getEnumType(Do)}]),bl=ce.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ce.getEnumType($pe),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),yW=ce.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),i3e=ce.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),s3e=ce.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:a3e,repeated:!0}]),a3e=ce.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),o3e=ce.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ce.getEnumType(Ppe)}]),l3e=ce.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ce.getEnumType(fx)},{no:3,name:"message",kind:"scalar",T:9}]),fx=ce.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),c3e=ce.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function u3e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O7={exports:{}},d3e=O7.exports,CF;function h3e(){return CF||(CF=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(d3e,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function o(v,b){var C=v[b];if(typeof C.bind=="function")return C.bind(v);try{return Function.prototype.bind.call(C,v)}catch{return function(){return Function.prototype.apply.apply(C,[v,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(v){return v==="debug"&&(v="log"),typeof console===n?!1:v==="trace"&&r?l:console[v]!==void 0?o(console,v):console.log!==void 0?o(console,"log"):e}function d(){for(var v=this.getLevel(),b=0;b<i.length;b++){var C=i[b];this[C]=b<v?e:this.methodFactory(C,v,this.name)}if(this.log=this.debug,typeof console===n&&v<this.levels.SILENT)return"No console available for logging"}function f(v){return function(){typeof console!==n&&(d.call(this),this[v].apply(this,arguments))}}function p(v,b,C){return c(v)||f.apply(this,arguments)}function g(v,b){var C=this,S,R,w,I="loglevel";typeof v=="string"?I+=":"+v:typeof v=="symbol"&&(I=void 0);function k(U){var j=(i[U]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=j;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+j+";"}catch{}}}function x(){var U;if(!(typeof window===n||!I)){try{U=window.localStorage[I]}catch{}if(typeof U===n)try{var j=window.document.cookie,$=encodeURIComponent(I),Z=j.indexOf($+"=");Z!==-1&&(U=/^([^;]+)/.exec(j.slice(Z+$.length+1))[1])}catch{}return C.levels[U]===void 0&&(U=void 0),U}}function L(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(U){var j=U;if(typeof j=="string"&&C.levels[j.toUpperCase()]!==void 0&&(j=C.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=C.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+U)}C.name=v,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=b||p,C.getLevel=function(){return w??R??S},C.setLevel=function(U,j){return w=N(U),j!==!1&&k(w),d.call(C)},C.setDefaultLevel=function(U){R=N(U),x()||C.setLevel(U,!1)},C.resetLevel=function(){w=null,L(),d.call(C)},C.enableAll=function(U){C.setLevel(C.levels.TRACE,U)},C.disableAll=function(U){C.setLevel(C.levels.SILENT,U)},C.rebuild=function(){if(a!==C&&(S=N(a.getLevel())),d.call(C),a===C)for(var U in s)s[U].rebuild()},S=N(a?a.getLevel():"WARN");var D=x();D!=null&&(w=N(D)),d.call(C)}a=new g,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var C=s[b];return C||(C=s[b]=new g(b,a.methodFactory)),C};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})}(O7)),O7.exports}var Qg=h3e(),sg;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(sg||(sg={}));var qo;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(qo||(qo={}));let kt=Qg.getLogger("livekit");const _W=Object.values(qo).map(t=>Qg.getLogger(t));kt.setDefaultLevel(sg.info);function iu(t){const e=Qg.getLogger(t);return e.setDefaultLevel(kt.getLevel()),e}function CW(t,e){if(e)Qg.getLogger(e).setLevel(t);else for(const n of _W)n.setLevel(t)}function f3e(t,e){_W.forEach(r=>{const i=r.methodFactory;r.methodFactory=(s,a,o)=>{const l=i(s,a,o),c=sg[s],d=c>=a&&c<sg.silent;return(f,p)=>{p?l(f,p):l(f),d&&t(c,f,p)}},r.setLevel(r.getLevel())})}const m3e=Qg.getLogger("lk-e2ee"),v3=7e3,p3e=[0,300,2*2*300,3*3*300,4*4*300,v3,v3,v3,v3,v3];class bW{constructor(e){this._retryDelays=e!==void 0?[...e]:p3e}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function g3e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Y(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function bF(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ac(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bF=="function"?bF(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}var cv={exports:{}},EF;function v3e(){if(EF)return cv.exports;EF=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,k,x){return Function.prototype.apply.call(I,k,x)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function r(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(I){return I!==I};function s(){s.init.call(this)}cv.exports=s,cv.exports.once=C,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function l(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(I){for(var k=[],x=1;x<arguments.length;x++)k.push(arguments[x]);var L=I==="error",N=this._events;if(N!==void 0)L=L&&N.error===void 0;else if(!L)return!1;if(L){var D;if(k.length>0&&(D=k[0]),D instanceof Error)throw D;var U=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw U.context=D,U}var j=N[I];if(j===void 0)return!1;if(typeof j=="function")e(j,this,k);else for(var $=j.length,Z=y(j,$),x=0;x<$;++x)e(Z[x],this,k);return!0};function c(w,I,k,x){var L,N,D;if(o(k),N=w._events,N===void 0?(N=w._events=Object.create(null),w._eventsCount=0):(N.newListener!==void 0&&(w.emit("newListener",I,k.listener?k.listener:k),N=w._events),D=N[I]),D===void 0)D=N[I]=k,++w._eventsCount;else if(typeof D=="function"?D=N[I]=x?[k,D]:[D,k]:x?D.unshift(k):D.push(k),L=l(w),L>0&&D.length>L&&!D.warned){D.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=w,U.type=I,U.count=D.length,r(U)}return w}s.prototype.addListener=function(I,k){return c(this,I,k,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(I,k){return c(this,I,k,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(w,I,k){var x={fired:!1,wrapFn:void 0,target:w,type:I,listener:k},L=d.bind(x);return L.listener=k,x.wrapFn=L,L}s.prototype.once=function(I,k){return o(k),this.on(I,f(this,I,k)),this},s.prototype.prependOnceListener=function(I,k){return o(k),this.prependListener(I,f(this,I,k)),this},s.prototype.removeListener=function(I,k){var x,L,N,D,U;if(o(k),L=this._events,L===void 0)return this;if(x=L[I],x===void 0)return this;if(x===k||x.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete L[I],L.removeListener&&this.emit("removeListener",I,x.listener||k));else if(typeof x!="function"){for(N=-1,D=x.length-1;D>=0;D--)if(x[D]===k||x[D].listener===k){U=x[D].listener,N=D;break}if(N<0)return this;N===0?x.shift():v(x,N),x.length===1&&(L[I]=x[0]),L.removeListener!==void 0&&this.emit("removeListener",I,U||k)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(I){var k,x,L;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[I]),this;if(arguments.length===0){var N=Object.keys(x),D;for(L=0;L<N.length;++L)D=N[L],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=x[I],typeof k=="function")this.removeListener(I,k);else if(k!==void 0)for(L=k.length-1;L>=0;L--)this.removeListener(I,k[L]);return this};function p(w,I,k){var x=w._events;if(x===void 0)return[];var L=x[I];return L===void 0?[]:typeof L=="function"?k?[L.listener||L]:[L]:k?b(L):y(L,L.length)}s.prototype.listeners=function(I){return p(this,I,!0)},s.prototype.rawListeners=function(I){return p(this,I,!1)},s.listenerCount=function(w,I){return typeof w.listenerCount=="function"?w.listenerCount(I):g.call(w,I)},s.prototype.listenerCount=g;function g(w){var I=this._events;if(I!==void 0){var k=I[w];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(w,I){for(var k=new Array(I),x=0;x<I;++x)k[x]=w[x];return k}function v(w,I){for(;I+1<w.length;I++)w[I]=w[I+1];w.pop()}function b(w){for(var I=new Array(w.length),k=0;k<I.length;++k)I[k]=w[k].listener||w[k];return I}function C(w,I){return new Promise(function(k,x){function L(D){w.removeListener(I,N),x(D)}function N(){typeof w.removeListener=="function"&&w.removeListener("error",L),k([].slice.call(arguments))}R(w,I,N,{once:!0}),I!=="error"&&S(w,L,{once:!0})})}function S(w,I,k){typeof w.on=="function"&&R(w,"error",I,k)}function R(w,I,k,x){if(typeof w.on=="function")x.once?w.once(I,k):w.on(I,k);else if(typeof w.addEventListener=="function")w.addEventListener(I,function L(N){x.once&&w.removeEventListener(I,L),k(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return cv.exports}var Zl=v3e();let EW=!0,SW=!0;function Q3(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Hh(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,o){if(a!==e)return i.apply(this,arguments);const l=c=>{const d=n(c);d&&(o.handleEvent?o.handleEvent(d):o(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,l),i.apply(this,[a,l])};const s=r.removeEventListener;r.removeEventListener=function(a,o){if(a!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(o))return s.apply(this,arguments);const l=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function y3e(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(EW=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function _3e(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(SW=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function wW(){if(typeof window=="object"){if(EW)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mx(t,e){SW&&console.warn(t+" is deprecated, please use "+e+" instead.")}function C3e(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Q3(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Q3(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Q3(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Q3(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function SF(t){return Object.prototype.toString.call(t)==="[object Object]"}function kW(t){return SF(t)?Object.keys(t).reduce(function(e,n){const r=SF(t[n]),i=r?kW(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Ik(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Ik(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Ik(t,t.get(i),n)})}))}function wF(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&s.push(a)}),s.forEach(a=>{t.forEach(o=>{o.type===r&&o.trackId===a.id&&Ik(t,o,i)})}),i}const kF=wW;function TW(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const l={};return Object.keys(o).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const d=typeof o[c]=="object"?o[c]:{ideal:o[c]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(p,g){return p?p+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(d.ideal!==void 0){l.optional=l.optional||[];let p={};typeof d.ideal=="number"?(p[f("min",c)]=d.ideal,l.optional.push(p),p={},p[f("max",c)]=d.ideal,l.optional.push(p)):(p[f("",c)]=d.ideal,l.optional.push(p))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[f("",c)]=d.exact):["min","max"].forEach(p=>{d[p]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[f(p,c)]=d[p])})}),o.advanced&&(l.optional=(l.optional||[]).concat(o.advanced)),l},i=function(o,l){if(e.version>=61)return l(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const c=function(d,f,p){f in d&&!(p in d)&&(d[p]=d[f],delete d[f])};o=JSON.parse(JSON.stringify(o)),c(o.audio,"autoGainControl","googAutoGainControl"),c(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=r(o.audio)}if(o&&typeof o.video=="object"){let c=o.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const d=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete o.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(y=>y.kind==="videoinput");let g=p.find(y=>f.some(v=>y.label.toLowerCase().includes(v)));return!g&&p.length&&f.includes("back")&&(g=p[p.length-1]),g&&(o.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),o.video=r(o.video),kF("chrome: "+JSON.stringify(o)),l(o)})}o.video=r(o.video)}return kF("chrome: "+JSON.stringify(o)),l(o)},s=function(o){return e.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,l,c){i(o,d=>{n.webkitGetUserMedia(d,l,f=>{c&&c(s(f))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,c=>o(c).then(d=>{if(c.audio&&!d.getAudioTracks().length||c.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(s(d))))}}}function RW(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function IW(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.track.id):s={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.id):s={track:i};const a=new Event("track");a.track=i,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Hh(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function xW(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){let c=i.apply(this,arguments);return c||(c=e(this,o),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const l=this._senders.indexOf(o);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(l=>l.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function MW(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>wF(a,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Hh(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>wF(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,a;return this.getSenders().forEach(o=>{o.track===r&&(i?a=!0:i=o)}),this.getReceivers().forEach(o=>(o.track===r&&(s?a=!0:s=o),o.track===r)),a||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function PW(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(l)===-1&&this._shimmedLocalStreams[o.id].push(l):this._shimmedLocalStreams[o.id]=[o,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>o.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const l=this._shimmedLocalStreams[o].indexOf(a);l!==-1&&this._shimmedLocalStreams[o].splice(l,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),i.apply(this,arguments)}}function LW(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return PW(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new t.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}r.apply(this,[d])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(v=>v===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[f.id];if(y)y.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new t.MediaStream([d]);this._streams[f.id]=v,this._reverseStreams[v.id]=f,this.addStream(v)}return this.getSenders().find(v=>v.track===d)};function s(c,d){let f=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],y=c._streams[g.id];f=f.replace(new RegExp(y.id,"g"),g.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function a(c,d){let f=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],y=c._streams[g.id];f=f.replace(new RegExp(g.id,"g"),y.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const d=t.RTCPeerConnection.prototype[c],f={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[y=>{const v=s(this,y);p[0].apply(null,[v])},y=>{p[1]&&p[1].apply(null,y)},arguments[2]]):d.apply(this,arguments).then(y=>s(this,y))}};t.RTCPeerConnection.prototype[c]=f[c]});const o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(v=>d.track===v)&&(p=this._streams[g])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xk(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function OW(t,e){Hh(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var TF=Object.freeze({__proto__:null,fixNegotiationNeeded:OW,shimAddTrackRemoveTrack:LW,shimAddTrackRemoveTrackWithNative:PW,shimGetSendersWithDtmf:xW,shimGetUserMedia:TW,shimMediaStream:RW,shimOnTrack:IW,shimPeerConnection:xk,shimSenderReceiverGetStats:MW});function AW(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,a){mx("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,a)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,o,l){o in a&&!(l in a)&&(a[l]=a[o],delete a[o])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const o=a.apply(this,arguments);return i(o,"mozAutoGainControl","autoGainControl"),i(o,"mozNoiseSuppression","noiseSuppression"),o}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o,"autoGainControl","mozAutoGainControl"),i(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function b3e(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function NW(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Mk(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return r.apply(this,[s||null]).then(l=>{if(e.version<53&&!a)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((d,f)=>{l.set(f,Object.assign({},d,{type:n[d.type]||d.type}))})}return l}).then(a,o)}}function DW(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function UW(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Hh(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function FW(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){mx("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function jW(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function HW(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function $W(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function VW(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function BW(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var RF=Object.freeze({__proto__:null,shimAddTransceiver:HW,shimCreateAnswer:BW,shimCreateOffer:VW,shimGetDisplayMedia:b3e,shimGetParameters:$W,shimGetUserMedia:AW,shimOnTrack:NW,shimPeerConnection:Mk,shimRTCDataChannel:jW,shimReceiverGetStats:UW,shimRemoveStream:FW,shimSenderGetStats:DW});function qW(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function GW(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,r.dispatchEvent(a)})}),e.apply(r,arguments)}}}function KW(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(c,d){const f=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[f]);return d?(p.then(c,d),Promise.resolve()):p},e.createAnswer=function(c,d){const f=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[f]);return d?(p.then(c,d),Promise.resolve()):p};let o=function(l,c,d){const f=i.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f};e.setLocalDescription=o,o=function(l,c,d){const f=s.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f},e.setRemoteDescription=o,o=function(l,c,d){const f=a.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f},e.addIceCandidate=o}function ZW(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(zW(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function zW(t){return t&&t.video!==void 0?Object.assign({},t,{video:kW(t.video)}):t}function WW(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let a=0;a<r.iceServers.length;a++){let o=r.iceServers[a];o.urls===void 0&&o.url?(mx("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(r.iceServers[a])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function YW(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function JW(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function QW(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var IF=Object.freeze({__proto__:null,shimAudioContext:QW,shimCallbacksAPI:KW,shimConstraints:zW,shimCreateOfferLegacy:JW,shimGetUserMedia:ZW,shimLocalStreamsAPI:qW,shimRTCIceServerUrls:WW,shimRemoteStreamsAPI:GW,shimTrackEventTransceiver:YW}),$b={exports:{}},xF;function E3e(){return xF||(xF=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)i=s[a].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?s.push(a+"="+n.parameters[a]):s.push(a)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let o=3;o<s.length;o++){const l=s[o],c=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const d=e.parseRtpMap(c),f=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(d.parameters=f.length?e.parseFmtp(f[0]):{},d.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(o=>{r.headerExtensions.push(e.parseExtmap(o))});const a=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(o=>{a.forEach(l=>{o.rtcpFeedback.find(d=>d.type===l.type&&d.parameter===l.parameter)||o.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=e.writeRtpMap(a),i+=e.writeFmtp(a),i+=e.writeRtcpFb(a)});let s=0;return r.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=e.writeExtmap(a)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,o=e.matchPrefix(n,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),l=o.length>0&&o[0].ssrc;let c;const d=e.matchPrefix(n,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(y=>parseInt(y,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(c=d[0][1]),i.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let g={ssrc:l,codecPayloadType:parseInt(p.parameters.apt,10)};l&&c&&(g.rtx={ssrc:c}),r.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&l&&r.push({ssrc:l});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(p=>{p.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const a=e.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const a=e.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const o=e.matchPrefix(n,"a=sctpmap:");if(o.length>0){const l=o[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const a=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e}($b)),$b.exports}var XW=E3e(),M2=u3e(XW),S3e=Nme({__proto__:null,default:M2},[XW]);function A7(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=M2.parseCandidate(r.candidate);for(const a in s)a in i||Object.defineProperty(i,a,{value:s[a]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Hh(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Pk(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Hh(t,"icecandidate",e=>{if(e.candidate){const n=M2.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function N7(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(o){if(!o||!o.sdp)return!1;const l=M2.splitSections(o.sdp);return l.shift(),l.some(c=>{const d=M2.parseMLine(c);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(o){const l=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},i=function(o){let l=65536;return e.browser==="firefox"&&(e.version<57?o===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(o,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const d=M2.matchPrefix(o.sdp,"a=max-message-size:");return d.length>0?c=parseInt(d[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),c=i(l),d=s(arguments[0],l);let f;c===0&&d===0?f=Number.POSITIVE_INFINITY:c===0||d===0?f=Math.max(c,d):f=Math.min(c,d);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return f}}),this._sctp=p}return a.apply(this,arguments)}}function D7(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const o=arguments[0],l=o.length||o.size||o.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Hh(t,"datachannel",r=>(e(r.channel,r.target),r))}function Lk(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",i);s.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ok(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function U7(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function F7(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var w3e=Object.freeze({__proto__:null,removeExtmapAllowMixed:Ok,shimAddIceCandidateNullOrEmpty:U7,shimConnectionState:Lk,shimMaxMessageSize:N7,shimParameterlessSetLocalDescription:F7,shimRTCIceCandidate:A7,shimRTCIceCandidateRelayProtocol:Pk,shimSendThrowTypeError:D7});function k3e(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=wW,r=C3e(t),i={browserDetails:r,commonShim:w3e,extractVersion:Q3,disableLog:y3e,disableWarnings:_3e,sdp:S3e};switch(r.browser){case"chrome":if(!TF||!xk||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=TF,U7(t,r),F7(t),TW(t,r),RW(t),xk(t,r),IW(t),LW(t,r),xW(t),MW(t),OW(t,r),A7(t),Pk(t),Lk(t),N7(t,r),D7(t),Ok(t,r);break;case"firefox":if(!RF||!Mk||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=RF,U7(t,r),F7(t),AW(t,r),Mk(t,r),NW(t),FW(t),DW(t),UW(t),jW(t),HW(t),$W(t),VW(t),BW(t),A7(t),Lk(t),N7(t,r),D7(t);break;case"safari":if(!IF||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=IF,U7(t,r),F7(t),WW(t),JW(t),KW(t),qW(t),GW(t),YW(t),ZW(t),QW(t),A7(t),Pk(t),N7(t,r),D7(t),Ok(t,r);break;default:n("Unsupported browser!");break}return i}k3e({window:typeof window>"u"?void 0:window});const T3e=10,uv="lk_e2ee",R3e="LKFrameEncryptionKey",I3e={sharedKey:!1,ratchetSalt:R3e,ratchetWindowSize:8,failureTolerance:T3e,keyringSize:16};var Td;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Td||(Td={}));var MF;(function(t){t.KeyRatcheted="keyRatcheted"})(MF||(MF={}));var vd;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(vd||(vd={}));var PF;(function(t){t.Error="cryptorError"})(PF||(PF={}));function eY(){return x3e()||Ak()}function Ak(){return typeof window.RTCRtpScriptTransform<"u"}function x3e(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function M3e(t){return Y(this,void 0,void 0,function*(){let e=new TextEncoder;return yield crypto.subtle.importKey("raw",e.encode(t),{name:"PBKDF2"},!1,["deriveBits","deriveKey"])})}function P3e(t){return Y(this,void 0,void 0,function*(){return yield crypto.subtle.importKey("raw",t,"HKDF",!1,["deriveBits","deriveKey"])})}class tY extends Zl.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{kt.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},I3e),e),this.on(Td.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Td.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Td.RatchetRequest,e,n)}}class L3e extends tY{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Object.assign(Object.assign({},e),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1});super(n)}setKey(e){return Y(this,void 0,void 0,function*(){const n=typeof e=="string"?yield M3e(e):yield P3e(e);this.onSetEncryptionKey(n)})}}class t1 extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Dt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(Dt||(Dt={}));class hn extends t1{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=Dt[n]}}class px extends t1{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Nc extends t1{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class O3e extends t1{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Fr extends t1{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Nk extends t1{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class LF extends t1{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class OF extends t1{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:fx[n]}}var Z6;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Z6||(Z6={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Z6||(Z6={}));var AF;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(AF||(AF={}));var le;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(le||(le={}));var se;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(se||(se={}));var Pe;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Pe||(Pe={}));var ke;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(ke||(ke={}));function A3e(t){return typeof t>"u"?t:typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const N3e=/version\/(\d+(\.?_?\d+)+)/i;let Vb;function Os(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Vb===void 0||e){const r=D3e.find(i=>{let{test:s}=i;return s.test(n)});Vb=r==null?void 0:r.describe(n)}return Vb}const D3e=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:j7(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Bb(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:j7(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Bb(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:j7(N3e,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Bb(t)}}}];function j7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function Bb(t){return t.includes("mac os")?j7(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var U3e="2.13.3";const F3e=U3e,j3e=16;class ki{}ki.setTimeout=function(){return setTimeout(...arguments)};ki.setInterval=function(){return setInterval(...arguments)};ki.clearTimeout=function(){return clearTimeout(...arguments)};ki.clearInterval=function(){return clearInterval(...arguments)};const H3e=5e3,y3=[];var Fa;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Fa||(Fa={}));let ue=class e2 extends Zl.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=e2.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=kt,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),H3e):this.handleAppVisibilityChanged()},this.log=iu((i=r.loggerName)!==null&&i!==void 0?i:qo.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=e2.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Tt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===e2.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===e2.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(y3.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&y3.splice(y3.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),l2(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?ke.AudioPlaybackStarted:ke.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?ke.AudioPlaybackFailed:ke.VideoPlaybackFailed,s):s.name==="AbortError"?kt.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):kt.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(a=>a.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ke.ElementAttached,e),e}detach(e){try{if(e){P2(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(ke.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{P2(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(ke.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=iu(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),y3.forEach(r=>{r.parentElement||(n=!1)}),n&&y3.push(e)}}handleAppVisibilityChanged(){return Y(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===e2.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Ms()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Ms()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}};function l2(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Eh()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Eh()||om())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function P2(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(c){switch(c){case e.Audio:return No.AUDIO;case e.Video:return No.VIDEO;default:return No.DATA}}t.kindToProto=i;function s(c){switch(c){case No.AUDIO:return e.Audio;case No.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function a(c){switch(c){case n.Camera:return Ir.CAMERA;case n.Microphone:return Ir.MICROPHONE;case n.ScreenShare:return Ir.SCREEN_SHARE;case n.ScreenShareAudio:return Ir.SCREEN_SHARE_AUDIO;default:return Ir.UNKNOWN}}t.sourceToProto=a;function o(c){switch(c){case Ir.CAMERA:return n.Camera;case Ir.MICROPHONE:return n.Microphone;case Ir.SCREEN_SHARE:return n.ScreenShare;case Ir.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=o;function l(c){switch(c){case kk.ACTIVE:return r.Active;case kk.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=l})(ue||(ue={}));class dn{constructor(e,n,r,i,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const $3e=["vp8","h264"],V3e=["vp8","h264","vp9","av1"];function B3e(t){return!!$3e.find(e=>e===t)}var NF;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(NF||(NF={}));var z6;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(z6||(z6={}));const Ol={h90:new dn(160,90,9e4,20),h180:new dn(320,180,16e4,20),h216:new dn(384,216,18e4,20),h360:new dn(640,360,45e4,20),h540:new dn(960,540,8e5,25),h720:new dn(1280,720,17e5,30),h1080:new dn(1920,1080,3e6,30),h1440:new dn(2560,1440,5e6,30),h2160:new dn(3840,2160,8e6,30)},Dk={h120:new dn(160,120,7e4,20),h180:new dn(240,180,125e3,20),h240:new dn(320,240,14e4,20),h360:new dn(480,360,33e4,20),h480:new dn(640,480,5e5,20),h540:new dn(720,540,6e5,25),h720:new dn(960,720,13e5,30),h1080:new dn(1440,1080,23e5,30),h1440:new dn(1920,1440,38e5,30)},U9={h360fps3:new dn(640,360,2e5,3,"medium"),h360fps15:new dn(640,360,4e5,15,"medium"),h720fps5:new dn(1280,720,8e5,5,"medium"),h720fps15:new dn(1280,720,15e5,15,"medium"),h720fps30:new dn(1280,720,2e6,30,"medium"),h1080fps15:new dn(1920,1080,25e5,15,"medium"),h1080fps30:new dn(1920,1080,5e6,30,"medium"),original:new dn(0,0,7e6,30,"medium")},q3e="|",DF="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function G3e(t){const e=t.split(q3e);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function As(t){return Y(this,void 0,void 0,function*(){return new Promise(e=>ki.setTimeout(e,t))})}function Uk(){return"addTransceiver"in RTCPeerConnection.prototype}function Fk(){return"addTrack"in RTCPeerConnection.prototype}function K3e(){if(!("getCapabilities"in RTCRtpSender)||Eh())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function Z3e(){if(!("getCapabilities"in RTCRtpSender)||om())return!1;if(Eh()){const n=Os();if(n!=null&&n.version&&Fd(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Vc(t){return t==="av1"||t==="vp9"}function jk(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}function z3e(){return typeof RTCPeerConnection>"u"?!1:Uk()||Fk()}function om(){var t;return((t=Os())===null||t===void 0?void 0:t.name)==="Firefox"}function Eh(){var t;return((t=Os())===null||t===void 0?void 0:t.name)==="Safari"}function UF(){const t=Os();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function W3e(){const t=Os();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function Y3e(t){return t||(t=Os()),(t==null?void 0:t.name)==="Safari"&&Fd(t.version,"18.3")>0}function nY(){var t,e;return Ms()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function J3e(){const t=Os(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Fd(e,t.osVersion)>=0?!0:t.name==="Safari"&&Fd(e,t.version)>=0}function Ms(){return typeof document<"u"}function jl(){return navigator.product=="ReactNative"}function Hk(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function rY(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function iY(){if(!jl())return;let t=rY();if(t)return t.platform}function FF(){if(Ms())return window.devicePixelRatio;if(jl()){let t=rY();if(t)return t.devicePixelRatio}return 1}function Fd(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const a=parseInt(n[s],10),o=parseInt(r[s],10);if(a>o)return 1;if(a<o)return-1;if(s===i-1&&a===o)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function Q3e(t){for(const e of t)e.target.handleResize(e)}function X3e(t){for(const e of t)e.target.handleVisibilityChanged(e)}let qb=null;const jF=()=>(qb||(qb=new ResizeObserver(Q3e)),qb);let Gb=null;const HF=()=>(Gb||(Gb=new IntersectionObserver(X3e,{root:null,rootMargin:"0px"})),Gb);function e0e(){var t;const e=new jpe({sdk:iW.JS,protocol:j3e,version:F3e});return jl()&&(e.os=(t=iY())!==null&&t!==void 0?t:""),e}function $F(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const a=i.captureStream(),[o]=a.getTracks();if(!o)throw Error("Could not get empty media stream video track");return o.enabled=n,o}let _3;function Kb(){if(!_3){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[_3]=r.stream.getAudioTracks(),!_3)throw Error("Could not get empty media stream audio track");_3.enabled=!1}return _3.clone()}class c2{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>Y(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function t0e(t){return V3e.includes(t)}function Rd(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function n0e(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function $k(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function r0e(t,e){return t.segments.map(n=>{let{id:r,text:i,language:s,startTime:a,endTime:o,final:l}=n;var c;const d=(c=e.get(r))!==null&&c!==void 0?c:Date.now(),f=Date.now();return l?e.delete(r):e.set(r,d),{id:r,text:i,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(o.toString()),final:l,language:s,firstReceivedTime:d,lastReceivedTime:f}})}function i0e(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function VF(t){switch(t.reason){case Dt.LeaveRequest:return t.context;case Dt.Cancelled:return Fo.CLIENT_INITIATED;case Dt.NotAllowed:return Fo.USER_REJECTED;case Dt.ServerUnreachable:return Fo.JOIN_FAILURE;default:return Fo.UNKNOWN_REASON}}function H7(t){return t!==void 0?Number(t):void 0}function z1(t){return t!==void 0?BigInt(t):void 0}function ch(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Ul(t){return!!t&&t.kind==ue.Kind.Audio}function jm(t){return!!t&&t.kind==ue.Kind.Video}function zu(t){return ch(t)&&jm(t)}function vc(t){return ch(t)&&Ul(t)}function Vk(t){return!!t&&!t.isLocal}function s0e(t){return!!t&&!t.isLocal}function Zb(t){return Vk(t)&&jm(t)}function a0e(t){return t.isLocal}function o0e(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function sY(t,e,n){var r,i,s,a;const{optionsWithoutProcessor:o,audioProcessor:l,videoProcessor:c}=lY(t??{}),d=e==null?void 0:e.processor,f=n==null?void 0:n.processor,p=o??{};return p.audio===!0&&(p.audio={}),p.video===!0&&(p.video={}),p.audio&&(Bk(p.audio,e),(r=(s=p.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(l||d)&&(p.audio.processor=l??d)),p.video&&(Bk(p.video,n),(i=(a=p.video).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(c||f)&&(p.video.processor=c??f)),p}function Bk(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function gx(t){var e,n,r,i;const s={};if(t.video)if(typeof t.video=="object"){const a={},o=a,l=t.video;Object.keys(l).forEach(c=>{switch(c){case"resolution":Bk(o,l.resolution);break;default:o[c]=l[c]}}),s.video=a,(e=(r=s.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function aY(t){return Y(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=oY();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,a=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield As(n),i.getByteTimeDomainData(a);const l=a.some(c=>c!==128&&c!==0);return r.close(),!l}return!1}()})}function oY(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>Y(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)});window.document.body.addEventListener("click",r)}return n}}function l0e(t){return t==="audioinput"?ue.Source.Microphone:t==="videoinput"?ue.Source.Camera:ue.Source.Unknown}function qk(t){return t===ue.Source.Microphone?"audioinput":t===ue.Source.Camera?"videoinput":void 0}function c0e(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Eh()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function $7(t){return t.split("/")[1].toLowerCase()}function u0e(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new dx({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Tt(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?Tt(t.track):{})}}function d0e(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function h0e(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const s of r)t[s]!==e[s]&&(i[s]=(n=e[s])!==null&&n!==void 0?n:"");return i}function lY(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:A3e(e)}}function f0e(t){switch(t){case Ir.CAMERA:return ue.Source.Camera;case Ir.MICROPHONE:return ue.Source.Microphone;case Ir.SCREEN_SHARE:return ue.Source.ScreenShare;case Ir.SCREEN_SHARE_AUDIO:return ue.Source.ScreenShareAudio;default:return ue.Source.Unknown}}class m0e extends Zl.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:s,data:a}=n.data;switch(s){case"error":kt.error(a.error.message),this.emit(vd.EncryptionError,a.error);break;case"initAck":a.enabled&&this.keyProvider.getKeys().forEach(o=>{this.postKey(o)});break;case"enable":if(a.enabled&&this.keyProvider.getKeys().forEach(o=>{this.postKey(o)}),this.encryptionEnabled!==a.enabled&&a.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(vd.ParticipantEncryptionStatusChanged,a.enabled,this.room.localParticipant),this.encryptionEnabled=a.enabled;else if(a.participantIdentity){const o=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(a.participantIdentity);if(!o)throw TypeError("couldn't set encryption status, participant not found".concat(a.participantIdentity));this.emit(vd.ParticipantEncryptionStatusChanged,a.enabled,o)}break;case"ratchetKey":this.keyProvider.emit(Td.KeyRatcheted,a.ratchetResult,a.participantIdentity,a.keyIndex);break}},this.onWorkerError=n=>{kt.error("e2ee worker encountered an error:",{error:n.error}),this.emit(vd.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!eY())throw new px("tried to setup end-to-end encryption on an unsupported browser");if(kt.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:m3e.getLevel()}};this.worker&&(kt.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){kt.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?kt.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Pe.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(le.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==sa.NONE,i.identity)),e.on(le.ConnectionStateChanged,r=>{r===Rt.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==sa.NONE,i.identity)})})}).on(le.TrackUnsubscribed,(r,i,s)=>{var a;const o={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(o)}).on(le.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(le.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(se.LocalTrackPublished,r=>Y(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Td.SetKey,r=>this.postKey(r)).on(Td.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(a)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?$7(r.mimeType):void 0)}}setupE2EESender(e,n){if(!ch(e)||!n){n||kt.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return Y(this,void 0,void 0,function*(){if(this.worker){if(Ak()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(uv in e&&i){const l={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(l);return}let s=e.writableStream,a=e.readableStream;if(!s||!a){const l=e.createEncodedStreams();e.writableStream=l.writable,s=l.writable,e.readableStream=l.readable,a=l.readable}const o={kind:"decode",data:{readableStream:a,writableStream:s,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(o,[a,s])}e[uv]=!0}})}handleSender(e,n,r){var i;if(!(uv in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Ak()){kt.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{kt.info("initialize encoded streams");const s=e.createEncodedStreams(),a={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(a,[s.readable,s.writable])}e[uv]=!0}}}const zb="default";class ci{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new ci),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=ci.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){kt.debug("awaiting getUserMedia promise");try{n?yield ci.userMediaPromiseMap.get(n):yield Promise.all(ci.userMediaPromiseMap.values())}catch{kt.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Eh()&&r.hasDeviceInUse(n))&&(a.filter(l=>l.kind===n).length===0||a.some(l=>{const c=l.label==="",d=n?l.kind===n:!0;return c&&d}))){const l={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},c=yield navigator.mediaDevices.getUserMedia(l);a=yield navigator.mediaDevices.enumerateDevices(),c.getTracks().forEach(d=>{d.stop()})}return r._previousDevices=a,n&&(a=a.filter(o=>o.kind===n)),a}()})}normalizeDeviceId(e,n,r){return Y(this,void 0,void 0,function*(){if(n!==zb)return n;const i=yield this.getDevices(e),s=i.find(o=>o.deviceId===zb);if(!s){kt.warn("could not reliably determine default device");return}const a=i.find(o=>o.deviceId!==zb&&o.groupId===(r??s.groupId));if(!a){kt.warn("could not reliably determine default device");return}return a==null?void 0:a.deviceId})}hasDeviceInUse(e){return e?ci.userMediaPromiseMap.has(e):ci.userMediaPromiseMap.size>0}}ci.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];ci.userMediaPromiseMap=new Map;var y0;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(y0||(y0={}));class p0e{constructor(){this.pendingTasks=new Map,this.taskMutex=new ns,this.nextTaskIndex=0}run(e){return Y(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:y0.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=y0.RUNNING,yield e()}finally{n.status=y0.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return Y(this,void 0,void 0,function*(){return this.run(()=>Y(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function g0e(t,e){const n=new URL(n0e(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),cY(n,"rtc")}function v0e(t){const e=new URL($k(t));return cY(e,"validate")}function y0e(t){return t.endsWith("/")?t:"".concat(t,"/")}function cY(t,e){return t.pathname="".concat(y0e(t.pathname)).concat(e),t.toString()}const _0e=["syncState","trickle","offer","answer","simulate","leave"];function C0e(t){const e=_0e.indexOf(t.case)>=0;return kt.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Mn;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Mn||(Mn={}));class vx{get currentState(){return this.state}get isDisconnected(){return this.state===Mn.DISCONNECTING||this.state===Mn.DISCONNECTED}get isEstablishingConnection(){return this.state===Mn.CONNECTING||this.state===Mn.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Mn.DISCONNECTED,this.log=kt,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=iu((r=n.loggerName)!==null&&r!==void 0?r:qo.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new p0e,this.queuedRequests=[],this.closingLock=new ns,this.connectionLock=new ns,this.state=Mn.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return Y(this,void 0,void 0,function*(){return this.state=Mn.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return Y(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Mn.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r;const s=e0e(),a=b0e(n,s,r),o=g0e(e,a),l=v0e(o);return new Promise((c,d)=>Y(this,void 0,void 0,function*(){const f=yield this.connectionLock.lock();try{const p=()=>Y(this,void 0,void 0,function*(){this.close(),clearTimeout(g),d(new hn("room connection has been cancelled (signal)",Dt.Cancelled))}),g=setTimeout(()=>{this.close(),d(new hn("room connection has timed out (signal)",Dt.ServerUnreachable))},r.websocketTimeout);i!=null&&i.aborted&&p(),i==null||i.addEventListener("abort",p);const y=new URL(o);y.searchParams.has("access_token")&&y.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(y),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(g)},this.ws.onerror=v=>Y(this,void 0,void 0,function*(){if(this.state!==Mn.CONNECTED){this.state=Mn.DISCONNECTED,clearTimeout(g);try{const b=yield fetch(l);if(b.status.toFixed(0).startsWith("4")){const C=yield b.text();d(new hn(C,Dt.NotAllowed,b.status))}else d(new hn("Encountered unknown websocket error during connection: ".concat(v.toString()),Dt.InternalError,b.status))}catch(b){d(new hn(b instanceof Error?b.message:"server was not reachable",Dt.ServerUnreachable))}return}this.handleWSError(v)}),this.ws.onmessage=v=>Y(this,void 0,void 0,function*(){var b,C,S;let R;if(typeof v.data=="string"){const w=JSON.parse(v.data);R=_F.fromJson(w,{ignoreUnknownFields:!0})}else if(v.data instanceof ArrayBuffer)R=_F.fromBinary(new Uint8Array(v.data));else{this.log.error("could not decode websocket message: ".concat(typeof v.data),this.logContext);return}if(this.state!==Mn.CONNECTED){let w=!1;if(((b=R.message)===null||b===void 0?void 0:b.case)==="join"?(this.state=Mn.CONNECTED,i==null||i.removeEventListener("abort",p),this.pingTimeoutDuration=R.message.value.pingTimeout,this.pingIntervalDuration=R.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),c(R.message.value)):this.state===Mn.RECONNECTING&&R.message.case!=="leave"?(this.state=Mn.CONNECTED,i==null||i.removeEventListener("abort",p),this.startPingInterval(),((C=R.message)===null||C===void 0?void 0:C.case)==="reconnect"?c(R.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),c(void 0),w=!0)):this.isEstablishingConnection&&R.message.case==="leave"?d(new hn("Received leave request while trying to (re)connect",Dt.LeaveRequest,void 0,R.message.value.reason)):r.reconnect||d(new hn("did not receive join response, got ".concat((S=R.message)===null||S===void 0?void 0:S.case," instead"),Dt.InternalError)),!w)return}this.signalLatency&&(yield As(this.signalLatency)),this.handleSignalResponse(R)}),this.ws.onclose=v=>{this.isEstablishingConnection&&d(new hn("Websocket got closed during a (re)connection attempt",Dt.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:v.reason,code:v.code,wasClean:v.wasClean,state:this.state})),this.handleOnClose(v.reason)}}finally{f()}}))}close(){return Y(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Mn.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const i=new Promise(s=>{e.ws?e.ws.onclose=()=>{s()}:s()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([i,As(250)])),e.ws=void 0}}finally{n&&(e.state=Mn.DISCONNECTED),r()}}()})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:W6(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:W6(e)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new cx({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new ux({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return Y(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const o=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new hW({requestId:o,metadata:r,name:i,attributes:a})}),o}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new dW({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new pW({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Kn.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new yW({timestamp:Kn.parse(Date.now()),rtt:Kn.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new uW({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new D9({reason:Fo.CLIENT_INITIATED,action:x2.DISCONNECT})})}sendRequest(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!C0e(n)&&r.state===Mn.RECONNECTING){r.queuedRequests.push(()=>Y(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield As(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const a=new Vpe({message:n});try{r.useJSON?r.ws.send(a.toJsonString()):r.ws.send(a.toBinary())}catch(o){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:o}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const a=BF(i.value);this.onAnswer&&this.onAnswer(a)}else if(i.case==="offer"){const a=BF(i.value);this.onOffer&&this.onOffer(a)}else if(i.case==="trickle"){const a=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(a,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return Y(this,void 0,void 0,function*(){if(this.state===Mn.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=ki.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&ki.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=ki.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&ki.clearInterval(this.pingInterval)}}function BF(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function W6(t){return new bh({sdp:t.sdp,type:t.type})}function b0e(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",jl()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}var So={},Wb={},Yb={exports:{}},qF;function yx(){if(qF)return Yb.exports;qF=1;var t=Yb.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Yb.exports}var GF;function E0e(){return GF||(GF=1,function(t){var e=function(o){return String(Number(o))===o?Number(o):o},n=function(o,l,c,d){if(d&&!c)l[d]=e(o[1]);else for(var f=0;f<c.length;f+=1)o[f+1]!=null&&(l[c[f]]=e(o[f+1]))},r=function(o,l,c){var d=o.name&&o.names;o.push&&!l[o.push]?l[o.push]=[]:d&&!l[o.name]&&(l[o.name]={});var f=o.push?{}:d?l[o.name]:l;n(c.match(o.reg),f,o.names,o.name),o.push&&l[o.push].push(f)},i=yx(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var l={},c=[],d=l;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(f){var p=f[0],g=f.slice(2);p==="m"&&(c.push({rtp:[],fmtp:[]}),d=c[c.length-1]);for(var y=0;y<(i[p]||[]).length;y+=1){var v=i[p][y];if(v.reg.test(g))return r(v,d,g)}}),l.media=c,l};var a=function(o,l){var c=l.split(/=(.+)/,2);return c.length===2?o[c[0]]=e(c[1]):c.length===1&&l.length>1&&(o[c[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var l=[],c=o.split(" ").map(e),d=0;d<c.length;d+=3)l.push({component:c[d],ip:c[d+1],port:c[d+2]});return l},t.parseImageAttributes=function(o){return o.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(l){return l.split(",").map(function(c){var d,f=!1;return c[0]!=="~"?d=e(c):(d=e(c.substring(1,c.length)),f=!0),{scid:d,paused:f}})})}}(Wb)),Wb}var Jb,KF;function S0e(){if(KF)return Jb;KF=1;var t=yx(),e=/%[sdv%]/g,n=function(a){var o=1,l=arguments,c=l.length;return a.replace(e,function(d){if(o>=c)return d;var f=l[o];switch(o+=1,d){case"%%":return"%";case"%s":return String(f);case"%d":return Number(f);case"%v":return""}})},r=function(a,o,l){var c=o.format instanceof Function?o.format(o.push?l:l[o.name]):o.format,d=[a+"="+c];if(o.names)for(var f=0;f<o.names.length;f+=1){var p=o.names[f];o.name?d.push(l[o.name][p]):d.push(l[o.names[f]])}else d.push(l[o.name]);return n.apply(null,d)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Jb=function(a,o){o=o||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(f){f.payloads==null&&(f.payloads="")});var l=o.outerOrder||i,c=o.innerOrder||s,d=[];return l.forEach(function(f){t[f].forEach(function(p){p.name in a&&a[p.name]!=null?d.push(r(f,p,a)):p.push in a&&a[p.push]!=null&&a[p.push].forEach(function(g){d.push(r(f,p,g))})})}),a.media.forEach(function(f){d.push(r("m",t.m[0],f)),c.forEach(function(p){t[p].forEach(function(g){g.name in f&&f[g.name]!=null?d.push(r(p,g,f)):g.push in f&&f[g.push]!=null&&f[g.push].forEach(function(y){d.push(r(p,g,y))})})})}),d.join(`\r
`)+`\r
`},Jb}var ZF;function w0e(){if(ZF)return So;ZF=1;var t=E0e(),e=S0e(),n=yx();return So.grammar=n,So.write=e,So.parse=t.parse,So.parseParams=t.parseParams,So.parseFmtpConfig=t.parseFmtpConfig,So.parsePayloads=t.parsePayloads,So.parseRemoteCandidates=t.parseRemoteCandidates,So.parseImageAttributes=t.parseImageAttributes,So.parseSimulcastStreamList=t.parseSimulcastStreamList,So}var nd=w0e();function _x(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,o=(i=n.callback)!=null&&i,l=n.maxWait,c=Date.now(),d=[];function f(){if(l!==void 0){var g=Date.now()-c;if(g+e>=l)return l-g}return e}var p=function(){var g=[].slice.call(arguments),y=this;return new Promise(function(v,b){var C=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,c=Date.now(),!a){var R=t.apply(y,g);o&&o(R),d.forEach(function(w){return(0,w.resolve)(R)}),d=[]}},f()),C){var S=t.apply(y,g);return o&&o(S),v(S)}d.push({resolve:v,reject:b})})};return p.cancel=function(g){s!==void 0&&clearTimeout(s),d.forEach(function(y){return(0,y.reject)(g)}),d=[]},p}const k0e=.7,T0e=20,L2={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class zF extends Zl.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=kt,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=_x(i=>Y(this,void 0,void 0,function*(){this.emit(L2.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),T0e),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=iu((r=n.loggerName)!==null&&r!==void 0?r:qo.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return Y(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return Y(this,void 0,void 0,function*(){var n;let r;if(e.type==="offer"){let{stereoMids:i,nackMids:s}=R0e(e);this.remoteStereoMids=i,this.remoteNackMids=s}else if(e.type==="answer"){const i=nd.parse((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"&&this.trackBitrates.some(a=>{if(!a.transceiver||s.mid!=a.transceiver.mid)return!1;let o=0;if(s.rtp.some(c=>c.codec.toUpperCase()===a.codec.toUpperCase()?(o=c.payload,!0):!1),o===0)return!0;let l=!1;for(const c of s.fmtp)if(c.payload===o){c.config=c.config.split(";").filter(d=>!d.includes("maxaveragebitrate")).join(";"),a.maxbr>0&&(c.config+=";maxaveragebitrate=".concat(a.maxbr*1e3)),l=!0;break}return l||a.maxbr>0&&s.fmtp.push({payload:o,config:"maxaveragebitrate=".concat(a.maxbr*1e3)}),!0})}),r=nd.write(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(L2.NegotiationComplete),e.sdp&&nd.parse(e.sdp).media.forEach(s=>{s.type==="video"&&this.emit(L2.RTPVideoPayloadTypes,s.rtp)}))})}createAndSendOffer(e){return Y(this,void 0,void 0,function*(){var n;if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const s=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&s)yield this._pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:r.sdp},this.logContext));const i=nd.parse((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{YF(s),s.type==="audio"?WF(s,[],[]):s.type==="video"&&this.trackBitrates.some(a=>{if(!s.msid||!a.cid||!s.msid.includes(a.cid))return!1;let o=0;if(s.rtp.some(c=>c.codec.toUpperCase()===a.codec.toUpperCase()?(o=c.payload,!0):!1),o===0||(Vc(a.codec)&&this.ensureVideoDDExtensionForSVC(s,i),a.codec!=="av1"))return!0;const l=Math.round(a.maxbr*k0e);for(const c of s.fmtp)if(c.payload===o){c.config.includes("x-google-start-bitrate")||(c.config+=";x-google-start-bitrate=".concat(l));break}return!0})}),yield this.setMungedSDP(r,nd.write(i)),this.onOffer(r)})}createAndSetAnswer(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=nd.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{YF(i),i.type==="audio"&&WF(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,nd.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Fr("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Fr("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return Y(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(o=>{switch(o.type){case"transport":n=o.selectedCandidatePairId;break;case"candidate-pair":n===""&&o.selected&&(n=o.id),r.set(o.id,o);break;case"remote-candidate":i.set(o.id,"".concat(o.address,":").concat(o.port));break}}),n==="")return;const a=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(a!==void 0)return i.get(a)})}setMungedSDP(e,n,r){return Y(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const a={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new Nk(s)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(a=>a.uri===DF))){if(this.ddExtID===0){let a=0;n.media.forEach(o=>{var l;o.type==="video"&&((l=o.ext)===null||l===void 0||l.forEach(c=>{c.value>a&&(a=c.value)}))}),this.ddExtID=a+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:DF})}}}function WF(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function R0e(t){var e;const n=[],r=[],i=nd.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(a=>{var o;a.type==="audio"&&(a.rtp.some(l=>l.codec==="opus"?(s=l.payload,!0):!1),!((o=a.rtcpFb)===null||o===void 0)&&o.some(l=>l.payload===s&&l.type==="nack")&&r.push(a.mid),a.fmtp.some(l=>l.payload===s?(l.config.includes("sprop-stereo=1")&&n.push(a.mid),!0):!1))}),{stereoMids:n,nackMids:r}}function YF(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const Gk="vp8",I0e={audioPreset:z6.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:U9.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Gk,backupCodec:!0,preConnectBuffer:!1},uY={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},dY={deviceId:{ideal:"default"},resolution:Ol.h720.resolution},x0e={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new bW,disconnectOnPageLeave:!0,webAudioMix:!1},Cx={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var ar;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(ar||(ar={}));class M0e{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=Cx.peerConnectionTimeout,this.log=kt,this.updateState=()=>{var s;const a=this.state,o=this.requiredTransports.map(l=>l.getConnectionState());o.every(l=>l==="connected")?this.state=ar.CONNECTED:o.some(l=>l==="failed")?this.state=ar.FAILED:o.some(l=>l==="connecting")?this.state=ar.CONNECTING:o.every(l=>l==="closed")?this.state=ar.CLOSED:o.some(l=>l==="closed")?this.state=ar.CLOSING:o.every(l=>l==="new")&&(this.state=ar.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(ar[a]," to ").concat(ar[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=iu((i=r.loggerName)!==null&&i!==void 0?i:qo.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new zF(e,r),this.subscriber=new zF(e,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Do.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Do.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=ar.NEW,this.connectionLock=new ns,this.remoteOfferLock=new ns}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return Y(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return Y(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return Y(this,void 0,void 0,function*(){n===Do.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return Y(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const n=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()}finally{n()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return Y(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return Y(this,void 0,void 0,function*(){return new Promise((n,r)=>Y(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(L2.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(L2.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(i),r(a)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Do.PUBLISHER?this.publisher.getConnectedAddress():e===Do.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return Y(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((l,c)=>Y(s,void 0,void 0,function*(){const d=()=>{this.log.warn("abort transport connection",this.logContext),ki.clearTimeout(f),c(new hn("room connection has been cancelled",Dt.Cancelled))};i!=null&&i.signal.aborted&&d(),i==null||i.signal.addEventListener("abort",d);const f=ki.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",d),c(new hn("could not establish pc connection",Dt.InternalError))},a);for(;this.state!==ar.CONNECTED;)if(yield As(50),i!=null&&i.signal.aborted){c(new hn("room connection has been cancelled",Dt.Cancelled));return}ki.clearTimeout(f),i==null||i.signal.removeEventListener("abort",d),l()}))}()})}}class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.message=JF(n,cr.MAX_MESSAGE_BYTES),this.data=r?JF(r,cr.MAX_DATA_BYTES):void 0}static fromProto(e){return new cr(e.code,e.message,e.data)}toProto(){return new tW({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new cr(cr.ErrorCode[e],cr.ErrorMessage[e],n)}}cr.MAX_MESSAGE_BYTES=256;cr.MAX_DATA_BYTES=15360;cr.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};cr.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const hY=15360;function bx(t){return new TextEncoder().encode(t).length}function JF(t,e){if(bx(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(t.slice(0,s)).length<=e?n=s:r=s-1}return t.slice(0,n)}const Ex=2e3;function F9(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const Sx=typeof MediaRecorder<"u";class P0e{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const L0e=Sx?MediaRecorder:P0e;class O0e extends L0e{constructor(e,n){if(!Sx)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,a=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",o),i==null||i.close(),i=void 0},o=l=>{i==null||i.error(l),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",o),i=void 0};this.byteStream=new ReadableStream({start:l=>{i=l,r=c=>Y(this,void 0,void 0,function*(){const d=yield c.data.arrayBuffer();s()||l.enqueue(new Uint8Array(d))}),this.addEventListener("dataavailable",r)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",o)}}function A0e(){return Sx}const N0e=1e3,D0e=1e4;class j9 extends ue{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=_x(()=>Y(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>Y(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ke.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new ns,this.pauseUpstreamLock=new ns,this.processorLock=new ns,this.restartLock=new ns,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==ue.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return Y(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{P2(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){const s=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(l2(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{s()}}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{l2(i??e,s)}))})}waitForDimensions(){return Y(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N0e;return function*(){var r;if(e.kind===ue.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=Os())===null||r===void 0?void 0:r.os)==="iOS"&&(yield As(10));const i=Date.now();for(;Date.now()-i<n;){const s=e.dimensions;if(s)return s;yield As(50)}throw new Nc("unable to get track dimensions after timeout")}()})}setDeviceId(e){return Y(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Rd(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Rd(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return Y(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===ue.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),s=e.kind===ue.Kind.Audio?"audioinput":"videoinput";return n?ci.getInstance().normalizeDeviceId(s,r,i):r}()})}mute(){return Y(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return Y(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return Y(this,void 0,void 0,function*(){if(!this.sender)throw new Nc("unable to replace an unpublished track");let r,i;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,i=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return Y(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,s=g3e(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const a={audio:!1,video:!1};this.kind===ue.Kind.Video?a.video=r||i?{deviceId:r,facingMode:i}:!0:a.audio=r?{deviceId:r}:!0,this.attachedElements.forEach(c=>{P2(this.mediaStreamTrack,c)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const l=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return yield l.applyConstraints(s),l.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(l),this._constraints=e,this.emit(ke.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Y(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),nY()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ke.UpstreamPaused,this);const r=Os();if((r==null?void 0:r.name)==="Safari"&&Fd(r.version,"12.0")<0)throw new px("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ke.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return Y(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const a=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const o=document.createElement(r.kind),l={kind:r.kind,track:r._mediaStreamTrack,element:o,audioContext:r.audioContext};if(yield n.init(l),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(l2(r._mediaStreamTrack,o),o.muted=!0,o.play().catch(c=>r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:c}))),r.processor=n,r.processorElement=o,r.processor.processedTrack){for(const c of r.attachedElements)c!==r.processorElement&&i&&(P2(r._mediaStreamTrack,c),l2(r.processor.processedTrack,c));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(ke.TrackProcessorUpdate,r.processor)}finally{a()}}()})}getProcessor(){return this.processor}stopProcessor(){return Y(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ke.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!A0e()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(!this.localTrackRecorder)this.localTrackRecorder=new O0e(this,{mimeType:"audio/webm;codecs=opus"});else{this.log.warn("preconnect buffer already started");return}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},D0e)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}}class Y6 extends j9{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,ue.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>Y(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(o){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:o}));return}a&&this.prevStats&&(this._currentBitrate=F9(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,oi.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,oi.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Y(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ue.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Y(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Rd(this._constraints.deviceId);return this.source===ue.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return Y(this,void 0,void 0,function*(){let n;if(e){const r=gx({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return Y(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Ms()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ex)))}setProcessor(e){return Y(this,void 0,void 0,function*(){var n;const r=yield this.processorLock.lock();try{if(!jl()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ke.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return Y(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return Y(this,void 0,void 0,function*(){const e=yield aY(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ke.AudioSilenceDetected)),e})}}function U0e(t,e,n){switch(t.kind){case"audio":return new Y6(t,e,!1,void 0,n);case"video":return new lm(t,e,!1,n);default:throw new Nc("unsupported track type: ".concat(t.kind))}}const F0e=Object.values(Ol),j0e=Object.values(Dk),H0e=Object.values(U9),$0e=[Ol.h180,Ol.h360],V0e=[Dk.h180,Dk.h360],B0e=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new dn(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),Kk=["q","h","f"];function Zk(t,e,n,r){var i,s;let a=r==null?void 0:r.videoEncoding;t&&(a=r==null?void 0:r.screenShareEncoding);const o=r==null?void 0:r.simulcast,l=r==null?void 0:r.scalabilityMode,c=r==null?void 0:r.videoCodec;if(!a&&!o&&!l||!e||!n)return[{}];a||(a=G0e(t,e,n,c),kt.debug("using video encoding",a));const d=a.maxFramerate,f=new dn(e,n,a.maxBitrate,a.maxFramerate,a.priority);if(l&&Vc(c)){const y=new J6(l),v=[];if(y.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const b=Os();if(Eh()||jl()||(b==null?void 0:b.name)==="Chrome"&&Fd(b==null?void 0:b.version,"113")<0){const C=y.suffix=="h"?2:3,S=Y3e(b);for(let R=0;R<y.spatial;R+=1)v.push({rid:Kk[2-R],maxBitrate:a.maxBitrate/Math.pow(C,R),maxFramerate:f.encoding.maxFramerate,scaleResolutionDownBy:S?Math.pow(2,R):void 0});v[0].scalabilityMode=l}else v.push({maxBitrate:a.maxBitrate,maxFramerate:f.encoding.maxFramerate,scalabilityMode:l});return f.encoding.priority&&(v[0].priority=f.encoding.priority,v[0].networkPriority=f.encoding.priority),kt.debug("using svc encoding",{encodings:v}),v}if(!o)return[a];let p=[];t?p=(i=XF(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:QF(t,f):p=(s=XF(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:QF(t,f);let g;if(p.length>0){const y=p[0];p.length>1&&([,g]=p);const v=Math.max(e,n);if(v>=960&&g)return Qb(e,n,[y,g,f],d);if(v>=480)return Qb(e,n,[y,f],d)}return Qb(e,n,[f])}function q0e(t,e,n){var r,i,s,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&kt.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const o=t.mediaStreamTrack.getSettings(),l=(r=o.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,c=(s=o.height)!==null&&s!==void 0?s:(a=t.dimensions)===null||a===void 0?void 0:a.height;return t.source===ue.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Zk(t.source===ue.Source.ScreenShare,l,c,n)}function G0e(t,e,n,r){const i=K0e(t,e,n);let{encoding:s}=i[0];const a=Math.max(e,n);for(let o=0;o<i.length;o+=1){const l=i[o];if(s=l.encoding,l.width>=a)break}if(r)switch(r){case"av1":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function K0e(t,e,n){if(t)return H0e;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?F0e:j0e}function QF(t,e){if(t)return B0e(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?$0e:V0e}function Qb(t,e,n,r){const i=[];if(n.forEach((s,a)=>{if(a>=Kk.length)return;const o=Math.min(t,e),c={rid:Kk[a],scaleResolutionDownBy:Math.max(1,o/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},d=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;d&&(c.maxFramerate=d);const f=om()||a===0;s.encoding.priority&&f&&(c.priority=s.encoding.priority,c.networkPriority=s.encoding.priority),i.push(c)}),jl()&&iY()==="ios"){let s;i.forEach(o=>{s?o.maxFramerate&&o.maxFramerate>s&&(s=o.maxFramerate):s=o.maxFramerate});let a=!0;i.forEach(o=>{var l;o.maxFramerate!=s&&(a&&(a=!1,kt.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),kt.info('Setting framerate of encoding "'.concat((l=o.rid)!==null&&l!==void 0?l:"",'" to ').concat(s)),o.maxFramerate=s)})}return i}function XF(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class J6{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function Z0e(t){return t.source===ue.Source.ScreenShare||t.constraints.height&&Rd(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const z0e=5e3;class lm extends j9{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,ue.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>Y(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(o){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:o}));return}const a=new Map(s.map(o=>[o.rid,o]));if(this.prevStats){let o=0;a.forEach((l,c)=>{var d;const f=(d=this.prevStats)===null||d===void 0?void 0:d.get(c);o+=F9(l,f)}),this._currentBitrate=o}this.prevStats=a}),this.senderLock=new ns}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Ms())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ex))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return Y(this,void 0,void 0,function*(){var n,r,i,s,a;yield e.pauseUpstream.call(this);try{for(var o=!0,l=Ac(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;o=!0)s=c.value,o=!1,yield(a=s.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(d){r={error:d}}finally{try{!o&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return Y(this,void 0,void 0,function*(){var n,r,i,s,a;yield e.resumeUpstream.call(this);try{for(var o=!0,l=Ac(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;o=!0){s=c.value,o=!1;const d=s;yield(a=d.sender)===null||a===void 0?void 0:a.replaceTrack(d.mediaStreamTrack)}}catch(d){r={error:d}}finally{try{!o&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Y(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ue.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Y(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===ue.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return Y(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const a={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},o=r.get(i.remoteId);o&&(a.jitter=o.jitter,a.packetsLost=o.packetsLost,a.roundTripTime=o.roundTripTime),n.push(a)}}),n.sort((i,s)=>{var a,o;return((a=s.frameWidth)!==null&&a!==void 0?a:0)-((o=i.frameWidth)!==null&&o!==void 0?o:0)}),n})}setPublishingQuality(e){const n=[];for(let r=Fa.LOW;r<=Fa.HIGH;r+=1)n.push(new hx({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Vc(this.codec),n)}restartTrack(e){return Y(this,void 0,void 0,function*(){var n,r,i,s,a;let o;if(e){const f=gx({video:e});typeof f.video!="boolean"&&(o=f.video)}yield this.restart(o);try{for(var l=!0,c=Ac(this.simulcastCodecs.values()),d;d=yield c.next(),n=d.done,!n;l=!0){s=d.value,l=!1;const f=s;f.sender&&((a=f.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(f.mediaStreamTrack=this.mediaStreamTrack.clone(),yield f.sender.replaceTrack(f.mediaStreamTrack))}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return Y(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a,o,l,c,d,f;if(yield n.setProcessor.call(i,r,s),!((d=i.processor)===null||d===void 0)&&d.processedTrack)try{for(var p=!0,g=Ac(i.simulcastCodecs.values()),y;y=yield g.next(),a=y.done,!a;p=!0)c=y.value,p=!1,yield(f=c.sender)===null||f===void 0?void 0:f.replaceTrack(i.processor.processedTrack)}catch(v){o={error:v}}finally{try{!p&&!a&&(l=g.return)&&(yield l.call(g))}finally{if(o)throw o.error}}}()})}setDegradationPreference(e){return Y(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},z0e))}setPublishingCodecs(e){return Y(this,void 0,void 0,function*(){var n,r,i,s,a,o,l;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Vc(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const c=[];try{for(n=!0,r=Ac(e);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const d=l;if(!this.codec||this.codec===d.codec)yield this.setPublishingLayers(Vc(d.codec),d.qualities);else{const f=this.simulcastCodecs.get(d.codec);if(this.log.debug("try setPublishingCodec for ".concat(d.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:f})),!f||!f.sender){for(const p of d.qualities)if(p.enabled){c.push(d.codec);break}}else f.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(d.codec),this.logContext),yield ej(f.sender,f.encodings,d.qualities,this.senderLock,Vc(d.codec),this.log,this.logContext))}}}catch(d){a={error:d}}finally{try{!n&&!s&&(o=r.return)&&(yield o.call(r))}finally{if(a)throw a.error}}return c})}setPublishingLayers(e,n){return Y(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield ej(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Y(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),nY()&&this.isInBackground&&this.source===ue.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function ej(t,e,n,r,i,s,a){return Y(this,void 0,void 0,function*(){const o=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:t,qualities:n,senderEncodings:e}));try{const l=t.getParameters(),{encodings:c}=l;if(!c)return;if(c.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:c,senderEncodings:e}));return}let d=!1;const f=Os();if((f==null?void 0:f.name)==="Chrome"&&Fd(f==null?void 0:f.version,"133")>0&&c[0].scalabilityMode){const g=c[0],y=new J6(g.scalabilityMode);let v=R2.OFF;if(n.forEach(b=>{b.enabled&&(v===R2.OFF||b.quality>v)&&(v=b.quality)}),v===R2.OFF)g.active&&(g.active=!1,d=!0);else if(!g.active||y.spatial!==v+1){d=!0,g.active=!0;const b=new J6(e[0].scalabilityMode);y.spatial=v+1,y.suffix=b.suffix,y.spatial===1&&(y.suffix=void 0),g.scalabilityMode=y.toString(),g.scaleResolutionDownBy=Math.pow(2,2-v),e[0].maxBitrate&&(g.maxBitrate=e[0].maxBitrate/(g.scaleResolutionDownBy*g.scaleResolutionDownBy))}}else i&&n.some(y=>y.enabled)&&n.forEach(y=>y.enabled=!0),c.forEach((g,y)=>{var v;let b=(v=g.rid)!==null&&v!==void 0?v:"";b===""&&(b="q");const C=fY(b),S=n.find(R=>R.quality===C);S&&g.active!==S.enabled&&(d=!0,g.active=S.enabled,s.debug("setting layer ".concat(S.quality," to ").concat(g.active?"enabled":"disabled"),a),om()&&(S.enabled?(g.scaleResolutionDownBy=e[y].scaleResolutionDownBy,g.maxBitrate=e[y].maxBitrate,g.maxFrameRate=e[y].maxFrameRate):(g.scaleResolutionDownBy=4,g.maxBitrate=10,g.maxFrameRate=2)))});d&&(l.encodings=c,s.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:l.encodings})),yield t.setParameters(l))}finally{o()}})}function fY(t){switch(t){case"f":return Fa.HIGH;case"h":return Fa.MEDIUM;case"q":return Fa.LOW;default:return Fa.HIGH}}function tj(t,e,n,r){if(!n)return[new lh({quality:Fa.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new J6(i),a=[],o=s.suffix=="h"?1.5:2,l=s.suffix=="h"?2:3;for(let c=0;c<s.spatial;c+=1)a.push(new lh({quality:Math.min(Fa.HIGH,s.spatial-1)-c,width:Math.ceil(t/Math.pow(o,c)),height:Math.ceil(e/Math.pow(o,c)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(l,c)):0,ssrc:0}));return a}return n.map(i=>{var s,a,o;const l=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let c=fY((a=i.rid)!==null&&a!==void 0?a:"");return new lh({quality:c,width:Math.ceil(t/l),height:Math.ceil(e/l),bitrate:(o=i.maxBitrate)!==null&&o!==void 0?o:0,ssrc:0})})}const nj="_lossy",rj="_reliable",W0e=2*1e3,Xb="leave-reconnect";var ko;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(ko||(ko={}));class Y0e extends Zl.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Cx.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=ko.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=kt,this.handleDataChannel=r=>Y(this,[r],void 0,function(i){var s=this;let{channel:a}=i;return function*(){if(a){if(a.label===rj)s.reliableDCSub=a;else if(a.label===nj)s.lossyDCSub=a;else return;s.log.debug("on data channel ".concat(a.id,", ").concat(a.label),s.logContext),a.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=r=>Y(this,void 0,void 0,function*(){var i,s;const a=yield this.dataProcessLock.lock();try{let o;if(r.data instanceof ArrayBuffer)o=r.data;else if(r.data instanceof Blob)o=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const l=Es.fromBinary(new Uint8Array(o));((i=l.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(Pe.ActiveSpeakersUpdate,l.value.value.speakers):(((s=l.value)===null||s===void 0?void 0:s.case)==="user"&&Q0e(l,l.value.value),this.emit(Pe.DataPacketReceived,l))}finally{a()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:a}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?Ht.LOSSY:Ht.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(Pe.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let o=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(o===null){s(a);return}r===Xb&&(o=0),this.log.debug("reconnecting in ".concat(o,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=ki.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),o)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===ko.Connected&&r();const s=()=>{this.off(Pe.Disconnected,a),r()},a=()=>{this.off(Pe.Restarted,s),i()};this.once(Pe.Restarted,s),this.once(Pe.Disconnected,a)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Pe.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Mn.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Af.RR_SIGNAL_DISCONNECTED))},this.log=iu((n=e.loggerName)!==null&&n!==void 0?n:qo.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new vx(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new ns,this.dataProcessLock=new ns,this.dcBufferStatus=new Map([[Ht.LOSSY,!0],[Ht.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Pe.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Pe.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Pe.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Pe.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Pe.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Pe.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Pe.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Pe.SignalRequestResponse,r)}get logContext(){var e,n,r,i,s,a;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(a=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(e,n,r,i){return Y(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate(),this.clientConfiguration=s.clientConfiguration,this.emit(Pe.SignalConnected,s),s}catch(s){if(s instanceof hn&&s.reason===Dt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return Y(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Pe.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return Y(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return Y(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Nc("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new hn("publication of local track timed out, no response from server",Dt.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return Y(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return Y(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==ar.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new M0e(i,e.subscriberPrimary,this.loggerOptions),this.emit(Pe.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,a)=>{this.client.sendIceCandidate(s,a)},this.pcManager.onPublisherOffer=s=>{this.client.sendOffer(s)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,a,o)=>Y(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(a)&&(this.publisherConnectionPromise=void 0),s===ar.CONNECTED){const d=this.pcState===ko.New;this.pcState=ko.Connected,d&&this.emit(Pe.Connected,e)}else s===ar.FAILED&&this.pcState===ko.Connected&&(this.pcState=ko.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?Af.RR_SUBSCRIBER_FAILED:Af.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===Mn.RECONNECTING,c=[ar.FAILED,ar.CLOSING,ar.CLOSED].includes(s);l&&c&&!this._isClosed&&this.emit(Pe.Offline)}),this.pcManager.onTrack=s=>{this.emit(Pe.MediaTrackAdded,s.track,s.streams[0],s.receiver)},J0e((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>Y(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>Y(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Pe.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Pe.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Pe.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Pe.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Pe.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Af.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case x2.DISCONNECT:this.emit(Pe.Disconnected,e==null?void 0:e.reason),this.close();break;case x2.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Xb);break;case x2.RESUME:this.handleDisconnect(Xb)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const a={urls:s.urls};s.username&&(a.username=s.username),s.credential&&(a.credential=s.credential),i.push(a)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===rg.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(nj,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(rj,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return Y(this,void 0,void 0,function*(){if(Uk())return yield this.createTransceiverRTCRtpSender(e,n,r);if(Fk())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Fr("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return Y(this,void 0,void 0,function*(){if(Uk())return this.createSimulcastTransceiverSender(e,n,r,i);if(Fk())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Fr("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return Y(this,void 0,void 0,function*(){if(!this.pcManager)throw new Fr("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),jm(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,r,i){return Y(this,void 0,void 0,function*(){if(!this.pcManager)throw new Fr("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,a.sender),a.sender})}createRTCRtpSender(e){return Y(this,void 0,void 0,function*(){if(!this.pcManager)throw new Fr("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return Y(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){kt.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===rg.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:ar.NEW)===ar.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let a=!0;s instanceof Fr?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),a=!1):s instanceof Nf||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",Af.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Pe.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return Y(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new Fr("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Pe.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Nf;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(a){throw a instanceof hn&&a.reason===Dt.NotAllowed?new Fr("could not reconnect, token might be expired"):new Nf}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Pe.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==Mn.CONNECTED)throw new Nf("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Pe.Restarted)}catch(s){const a=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){return Y(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Fr("could not reconnect, url or token not saved");if(!this.pcManager)throw new Fr("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Pe.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof hn&&i.reason===Dt.NotAllowed?new Fr("could not reconnect, token might be expired"):i instanceof hn&&i.reason===Dt.LeaveRequest?i:new Nf(s)}if(this.emit(Pe.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Mn.CONNECTED)throw new Nf("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(Pe.Resumed)})}waitForPCInitialConnection(e,n){return Y(this,void 0,void 0,function*(){if(!this.pcManager)throw new Fr("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return Y(this,void 0,void 0,function*(){this.pcState=ko.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield As(W0e),!this.pcManager)throw new Fr("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=ko.Connected}catch(e){throw this.pcState=ko.Disconnected,new hn("could not establish PC connection, ".concat(e.message),Dt.InternalError)}})}publishRpcResponse(e,n,r,i){return Y(this,void 0,void 0,function*(){const s=new Es({destinationIdentities:[e],kind:Ht.RELIABLE,value:{case:"rpcResponse",value:new eW({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,Ht.RELIABLE)})}publishRpcAck(e,n){return Y(this,void 0,void 0,function*(){const r=new Es({destinationIdentities:[e],kind:Ht.RELIABLE,value:{case:"rpcAck",value:new Xz({requestId:n})}});yield this.sendDataPacket(r,Ht.RELIABLE)})}sendDataPacket(e,n){return Y(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}waitForBufferStatusLow(e){return new Promise((n,r)=>Y(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r("Engine closed");for(this.once(Pe.Closing,i);!this.dcBufferStatus.get(e);)yield As(10);this.off(Pe.Closing,i),n()}}))}ensureDataTransportConnected(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!r.pcManager)throw new Fr("PC manager is closed");const a=i?r.pcManager.subscriber:r.pcManager.publisher,o=i?"Subscriber":"Publisher";if(!a)throw new hn("".concat(o," connection not set"),Dt.InternalError);let l=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),l=!0),!l&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(l=!0),l&&r.negotiate();const c=r.dataChannelForKind(n,i);if((c==null?void 0:c.readyState)==="open")return;const d=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<d;){if(a.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield As(50)}throw new hn("could not establish ".concat(o," connection, state: ").concat(a.getICEConnectionState()),Dt.InternalError)}()})}ensurePublisherConnected(e){return Y(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==ar.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return Y(this,void 0,void 0,function*(){return new Promise((e,n)=>Y(this,void 0,void 0,function*(){if(!this.pcManager){n(new Nk("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Pe.Closing,i),this.pcManager.publisher.once(L2.RTPVideoPayloadTypes,s=>{const a=new Map;s.forEach(o=>{const l=o.codec.toLowerCase();t0e(l)&&a.set(o.payload,l)}),this.emit(Pe.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof Nk&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Af.RR_UNKNOWN),n(s)}finally{this.off(Pe.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===Ht.LOSSY)return this.lossyDCSub;if(e===Ht.RELIABLE)return this.reliableDCSub}else{if(e===Ht.LOSSY)return this.lossyDC;if(e===Ht.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.subscriber.getLocalDescription(),a=this.pcManager.subscriber.getRemoteDescription(),o=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,l=new Array,c=new Array;e.forEach(d=>{d.isDesired!==o&&l.push(d.trackSid),d.isEnabled||c.push(d.trackSid)}),this.client.sendSyncState(new gW({answer:s?W6({sdp:s.sdp,type:s.type}):void 0,offer:a?W6({sdp:a.sdp,type:a.type}):void 0,subscription:new N9({trackSids:l,subscribe:!o,participantTracks:[]}),publishTracks:u0e(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:c}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new vW({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(Ht.LOSSY),Do.PUBLISHER),n(this.dataChannelForKind(Ht.RELIABLE),Do.PUBLISHER),n(this.dataChannelForKind(Ht.LOSSY,!0),Do.SUBSCRIBER),n(this.dataChannelForKind(Ht.RELIABLE,!0),Do.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&ki.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Ms()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Ms()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Nf extends Error{}function J0e(t){return t!==void 0&&t>13}function Q0e(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class zk{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Hk(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return Y(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),kt.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return Y(this,void 0,void 0,function*(){const n=yield fetch("".concat(X0e(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new hn("Could not fetch region settings: ".concat(n.statusText),n.status===401?Dt.NotAllowed:Dt.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function X0e(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class mY{get info(){return this._info}constructor(e,n,r){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0}}class ege extends mY{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>Y(this,void 0,void 0,function*(){try{const{done:n,value:r}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:r.content})}catch{return{done:!0,value:void 0}}}),return(){return Y(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return Y(this,void 0,void 0,function*(){var e,n,r,i;let s=new Set;try{for(var a=!0,o=Ac(this),l;l=yield o.next(),e=l.done,!e;a=!0){i=l.value,a=!1;const c=i;s.add(c)}}catch(c){n={error:c}}finally{try{!a&&!e&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Array.from(s)})}}class tge extends mY{constructor(e,n,r){super(e,n,r),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=H7(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength;const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>Y(this,void 0,void 0,function*(){try{const{done:r,value:i}=yield e.read();return r?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:n.decode(i.content)})}catch{return{done:!0,value:void 0}}}),return(){return Y(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return Y(this,void 0,void 0,function*(){var e,n,r,i;let s="";try{for(var a=!0,o=Ac(this),l;l=yield o.next(),e=l.done,!e;a=!0)i=l.value,a=!1,s+=i}catch(c){n={error:c}}finally{try{!a&&!e&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return s})}}class pY{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return Y(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class nge extends pY{}class rge extends pY{}class wx extends ue{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ke.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return Y(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Ex)),d0e()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(ke.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class gY extends wx{constructor(e,n,r,i,s,a){super(e,n,ue.Kind.Audio,r,a),this.monitorReceiver=()=>Y(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=F9(o,this.prevStats)),this.prevStats=o}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;jl()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(jl())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return Y(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(jk(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&jk(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ke.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(ke.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return Y(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const eE=100;class ige extends wx{constructor(e,n,r,i,s){super(e,n,ue.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>Y(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=F9(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=_x(()=>{this.updateDimensions()},eE),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?P2(this._mediaStreamTrack,n):l2(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new sge(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return Y(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Y(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((o,l)=>Math.max(o,l.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(o=>o.pictureInPicture),a=this.elementInfos.some(o=>o.visible)&&!i||s;if(this.lastVisible!==a){if(!a&&Date.now()-r<eE){ki.setTimeout(()=>{this.updateVisibility()},eE);return}this.lastVisible=a,this.emit(ke.VisibilityChanged,a,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const a of this.elementInfos){const o=a.width()*s,l=a.height()*s;o+l>r+i&&(r=o,i=l)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(ke.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?FF():n||(FF()>2?2:1)}}class sge{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:a}=r;s===this.element&&(this.isIntersecting=a,this.isPiP=C3(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=C3(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=C3(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??Wk(e),this.isPiP=Ms()&&C3(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=Wk(this.element),this.isPiP=C3(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,HF().observe(this.element),jF().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,s;(e=HF())===null||e===void 0||e.unobserve(this.element),(n=jF())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function C3(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Wk(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Wk(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const s=t.offsetWidth,a=t.offsetHeight,{hidden:o}=t,{display:l}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+a>n.pageYOffset&&i+s>n.pageXOffset&&!o&&l!=="none"}class Ic extends Zl.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=sa.NONE,this.log=kt,this.handleMuted=()=>{this.emit(ke.Muted)},this.handleUnmuted=()=>{this.emit(ke.Unmuted)},this.log=iu((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:qo.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=ue.Source.Unknown}setTrack(e){this.track&&(this.track.off(ke.Muted,this.handleMuted),this.track.off(ke.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ke.Muted,this.handleMuted),e.on(ke.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Tt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==sa.NONE}get audioTrack(){if(Ul(this.track))return this.track}get videoTrack(){if(jm(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=ue.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===ue.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Ic||(Ic={}));class Yk extends Ic{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ke.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(ke.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(ke.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return Y(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return Y(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return Y(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return Y(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Ul(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(oi.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(oi.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(oi.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(oi.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(oi.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(oi.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Xg(t,e){return Y(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=lY(t);let a=s.audio,o=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const f=s.audio.deviceId;s.audio.deviceId={exact:f},n=!0,a=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:f}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const f=s.video.deviceId;s.video.deviceId={exact:f},n=!0,o=Object.assign(Object.assign({},s.video),{deviceId:{ideal:f}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const l=sY(s,uY,dY),c=gx(l),d=navigator.mediaDevices.getUserMedia(c);s.audio&&(ci.userMediaPromiseMap.set("audioinput",d),d.catch(()=>ci.userMediaPromiseMap.delete("audioinput"))),s.video&&(ci.userMediaPromiseMap.set("videoinput",d),d.catch(()=>ci.userMediaPromiseMap.delete("videoinput")));try{const f=yield d;return yield Promise.all(f.getTracks().map(p=>Y(this,void 0,void 0,function*(){const g=p.kind==="audio";let y=g?l.audio:l.video;(typeof y=="boolean"||!y)&&(y={});let v;const b=g?c.audio:c.video;typeof b!="boolean"&&(v=b);const C=p.getSettings().deviceId;v!=null&&v.deviceId&&Rd(v.deviceId)!==C?v.deviceId=C:v||(v={deviceId:C});const S=U0e(p,v,e);return S.kind===ue.Kind.Video?S.source=ue.Source.Camera:S.kind===ue.Kind.Audio&&(S.source=ue.Source.Microphone),S.mediaStream=f,Ul(S)&&r?yield S.setProcessor(r):jm(S)&&i&&(yield S.setProcessor(i)),S})))}catch(f){if(!n)throw f;return Xg(Object.assign(Object.assign({},t),{audio:a,video:o}),e)}})}function age(t){return Y(this,void 0,void 0,function*(){return(yield Xg({audio:!1,video:!0}))[0]})}function oge(t){return Y(this,void 0,void 0,function*(){return(yield Xg({audio:!0,video:!1}))[0]})}var ud;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ud||(ud={}));function lge(t){switch(t){case J3.EXCELLENT:return ud.Excellent;case J3.GOOD:return ud.Good;case J3.POOR:return ud.Poor;case J3.LOST:return ud.Lost;default:return ud.Unknown}}class vY extends Zl.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===ig.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===I2.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,s,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ig.STANDARD;var l;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ud.Unknown,this.log=kt,this.log=iu((l=a==null?void 0:a.loggerName)!==null&&l!==void 0?l:qo.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=o,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new c2,this.once(se.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(ue.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(ue.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(ue.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===I2.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==I2.ACTIVE&&this.emit(se.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(se.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(se.ParticipantNameChanged,e)}_setAttributes(e){const n=h0e(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(se.AttributesChanged,n)}setPermissions(e){var n,r,i,s,a,o;const l=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((d,f)=>{var p;return d!==((p=this.permissions)===null||p===void 0?void 0:p.canPublishSources[f])})||e.canSubscribeMetrics!==((o=this.permissions)===null||o===void 0?void 0:o.canSubscribeMetrics);return this.permissions=e,c&&this.emit(se.ParticipantPermissionsChanged,l),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(se.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=lge(e),n!==this._connectionQuality&&this.emit(se.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Ul(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ke.Muted,()=>{this.emit(se.TrackMuted,e)}),e.on(ke.Unmuted,()=>{this.emit(se.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case ue.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case ue.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function cge(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new mW({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}const ij=15e3;class uge extends vY{constructor(e,n,r,i,s){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=sa.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new c2)},this.handleReconnected=()=>{var a,o;(o=(a=this.reconnectFuture)===null||a===void 0?void 0:a.resolve)===null||o===void 0||o.call(a),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var a,o,l,c,d,f;this.reconnectFuture&&(this.reconnectFuture.promise.catch(p=>this.log.warn(p.message,this.logContext)),(o=(a=this.reconnectFuture)===null||a===void 0?void 0:a.reject)===null||o===void 0||o.call(a,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((c=(l=this.signalConnectedFuture).reject)===null||c===void 0||c.call(l,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(f=(d=this.activeAgentFuture)===null||d===void 0?void 0:d.reject)===null||f===void 0||f.call(d,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=a=>{var o,l;a.participant&&this.updateInfo(a.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new c2),(l=(o=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(o)},this.handleSignalRequestResponse=a=>{const{requestId:o,reason:l,message:c}=a,d=this.pendingSignalRequests.get(o);d&&(l!==fx.OK&&d.reject(new OF(c,l)),this.pendingSignalRequests.delete(o))},this.handleDataPacket=a=>{switch(a.value.case){case"rpcResponse":let o=a.value.value,l=null,c=null;o.value.case==="payload"?l=o.value.value:o.value.case==="error"&&(c=cr.fromProto(o.value.value)),this.handleIncomingRpcResponse(o.requestId,l,c);break;case"rpcAck":let d=a.value.value;this.handleIncomingRpcAck(d.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(a=>cge(a)))},this.onTrackUnmuted=a=>{this.onTrackMuted(a,a.isUpstreamPaused)},this.onTrackMuted=(a,o)=>{if(o===void 0&&(o=!0),!a.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Tt(a)));return}this.engine.updateMuteStatus(a.sid,o)},this.onTrackUpstreamPaused=a=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Tt(a))),this.onTrackMuted(a,!0)},this.onTrackUpstreamResumed=a=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Tt(a))),this.onTrackMuted(a,a.isMuted)},this.onTrackFeatureUpdate=a=>{const o=this.audioTrackPublications.get(a.sid);if(!o){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(a.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(o.trackSid,o.getTrackFeatures())},this.handleSubscribedQualityUpdate=a=>Y(this,void 0,void 0,function*(){var o,l,c,d,f;if(!(!((f=this.roomOptions)===null||f===void 0)&&f.dynacast))return;const p=this.videoTrackPublications.get(a.trackSid);if(!p){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}if(!p.videoTrack)return;const g=yield p.videoTrack.setPublishingCodecs(a.subscribedCodecs);try{for(var y=!0,v=Ac(g),b;b=yield v.next(),o=b.done,!o;y=!0){d=b.value,y=!1;const C=d;B3e(C)&&(this.log.debug("publish ".concat(C," for ").concat(p.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Tt(p))),yield this.publishAdditionalCodecForTrack(p.videoTrack,C,p.options))}}catch(C){l={error:C}}finally{try{!y&&!o&&(c=v.return)&&(yield c.call(v))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=a=>{const o=this.trackPublications.get(a.trackSid);if(!o){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}this.unpublishTrack(o.track)},this.handleTrackEnded=a=>Y(this,void 0,void 0,function*(){if(a.source===ue.Source.ScreenShare||a.source===ue.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Tt(a))),this.unpublishTrack(a);else if(a.isUserProvided)yield a.mute();else if(vc(a)||zu(a))try{if(Ms())try{const o=yield navigator==null?void 0:navigator.permissions.query({name:a.source===ue.Source.Camera?"camera":"microphone"});if(o&&o.state==="denied")throw this.log.warn("user has revoked access to ".concat(a.source),Object.assign(Object.assign({},this.logContext),Tt(a))),o.onchange=()=>{o.state!=="denied"&&(a.isMuted||a.restartTrack(),o.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}a.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Tt(a))),vc(a)?yield a.restartTrack({deviceId:"default"}):yield a.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Tt(a))),yield a.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==sa.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(Pe.RemoteMute,(n,r)=>{const i=this.trackPublications.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(Pe.Connected,this.handleReconnected).on(Pe.SignalConnected,this.handleSignalConnected).on(Pe.SignalRestarted,this.handleReconnected).on(Pe.SignalResumed,this.handleReconnected).on(Pe.Restarting,this.handleReconnecting).on(Pe.Resuming,this.handleReconnecting).on(Pe.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Pe.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Pe.Disconnected,this.handleDisconnected).on(Pe.SignalRequestResponse,this.handleSignalRequestResponse).on(Pe.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return Y(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return Y(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return Y(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return Y(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:a}=n;return function*(){return new Promise((o,l)=>Y(r,void 0,void 0,function*(){var c,d;try{let f=!1;const p=yield this.engine.client.sendUpdateLocalMetadata((c=i??this.metadata)!==null&&c!==void 0?c:"",(d=s??this.name)!==null&&d!==void 0?d:"",a),g=performance.now();for(this.pendingSignalRequests.set(p,{resolve:o,reject:y=>{l(y),f=!0},values:{name:s,metadata:i,attributes:a}});performance.now()-g<5e3&&!f;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!a||Object.entries(a).every(y=>{let[v,b]=y;return this.attributes[v]===b||b===""&&!this.attributes[v]}))){this.pendingSignalRequests.delete(p),o();return}yield As(50)}l(new OF("Request to update local metadata timed out","TimeoutError"))}catch(f){f instanceof Error&&l(f)}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(ue.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(ue.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(ue.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(se.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return Y(this,void 0,void 0,function*(){this.encryptionType=e?sa.GCM:sa.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return Y(this,void 0,void 0,function*(){var s,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let o=this.getTrackPublication(e);if(n)if(o)yield o.unmute();else{let l;if(this.pendingPublishing.has(e)){const c=yield this.waitForPendingPublicationOfSource(e);return c||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield c==null?void 0:c.unmute(),c}this.pendingPublishing.add(e);try{switch(e){case ue.Source.Camera:l=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case ue.Source.Microphone:l=yield this.createTracks({audio:(a=r)!==null&&a!==void 0?a:!0});break;case ue.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Nc(e)}}catch(c){throw l==null||l.forEach(d=>{d.stop()}),c instanceof Error&&this.emit(se.MediaDevicesError,c,qk(e)),this.pendingPublishing.delete(e),c}for(const c of l)e===ue.Source.Microphone&&Ul(c)&&(i!=null&&i.preConnectBuffer)&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),c.startPreConnectBuffer());try{const c=[];for(const f of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Tt(f))),c.push(this.publishTrack(f,i));[o]=yield Promise.all(c)}catch(c){throw l==null||l.forEach(d=>{d.stop()}),c}finally{this.pendingPublishing.delete(e)}}else if(!(o!=null&&o.track)&&this.pendingPublishing.has(e)&&(o=yield this.waitForPendingPublicationOfSource(e),o||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),o&&o.track)if(e===ue.Source.ScreenShare){o=yield this.unpublishTrack(o.track);const l=this.getTrackPublication(ue.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield o.mute();return o})}enableCameraAndMicrophone(){return Y(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(ue.Source.Camera)||this.pendingPublishing.has(ue.Source.Microphone))){this.pendingPublishing.add(ue.Source.Camera),this.pendingPublishing.add(ue.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(ue.Source.Camera),this.pendingPublishing.delete(ue.Source.Microphone)}}})}createTracks(e){return Y(this,void 0,void 0,function*(){var n,r;e??(e={});const i=sY(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield Xg(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(o=>(Ul(o)&&(this.microphoneError=void 0,o.setAudioContext(this.audioContext),o.source=ue.Source.Microphone,this.emit(se.AudioStreamAcquired)),jm(o)&&(this.cameraError=void 0,o.source=ue.Source.Camera),o))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return Y(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new px("getDisplayMedia not supported");e.resolution===void 0&&!W3e()&&(e.resolution=U9.h1080fps30.resolution);const n=c0e(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Nc("no video track found");const s=new lm(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=ue.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const a=[s];if(r.getAudioTracks().length>0){this.emit(se.AudioStreamAcquired);const o=new Y6(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=ue.Source.ScreenShareAudio,a.push(o)}return a})}publishTrack(e,n){return Y(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return Y(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var o,l,c,d;vc(r)&&r.setAudioContext(s.audioContext),yield(o=s.reconnectFuture)===null||o===void 0?void 0:o.promise,s.republishPromise&&!a&&(yield s.republishPromise),ch(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let f;if(r instanceof MediaStreamTrack)f=r.getConstraints();else{f=r.constraints;let C;switch(r.source){case ue.Source.Microphone:C="audioinput";break;case ue.Source.Camera:C="videoinput"}C&&s.activeDeviceMap.has(C)&&(f=Object.assign(Object.assign({},f),{deviceId:s.activeDeviceMap.get(C)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Y6(r,f,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new lm(r,f,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Nc("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let p;if(s.trackPublications.forEach(C=>{C.track&&C.track===r&&(p=C)}),p)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),Tt(p))),p;const g="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,y=(l=i==null?void 0:i.forceStereo)!==null&&l!==void 0?l:g;y&&(i||(i={}),i.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),Tt(r))),i.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(c=i.dtx)!==null&&c!==void 0||(i.dtx=!1),(d=i.red)!==null&&d!==void 0||(i.red=!1));const v=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i);!J3e()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),v.simulcast=!1),v.source&&(r.source=v.source);const b=new Promise((C,S)=>Y(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Mn.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:Tt(r)}));const R=setTimeout(()=>{S(new LF("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(R);const w=yield this.publish(r,v,y);C(w)}else try{const R=yield this.publish(r,v,y);C(R)}catch(R){S(R)}}catch(R){S(R)}}));s.pendingPublishPromises.set(r,b);try{return yield b}catch(C){throw C}finally{s.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new c2),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Tt(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>f0e(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Tt(e))),!1)}publish(e,n,r){return Y(this,void 0,void 0,function*(){var i,s,a,o,l,c,d,f,p,g;if(!this.hasPermissionsToPublish(e))throw new LF("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(N=>ch(e)&&N.source===e.source)&&e.source!==ue.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Tt(e))),n.stopMicTrackOnMute&&Ul(e)&&(e.stopOnMute=!0),e.source===ue.Source.ScreenShare&&om()&&(n.simulcast=!1),n.videoCodec==="av1"&&!K3e()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Z3e()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Gk),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(N=>n.videoCodec===$7(N.mime))||(n.videoCodec=$7(this.enabledPublishVideoCodecs[0].mime)));const v=n.videoCodec;e.on(ke.Muted,this.onTrackMuted),e.on(ke.Unmuted,this.onTrackUnmuted),e.on(ke.Ended,this.handleTrackEnded),e.on(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=[],C=!(!((i=n.dtx)!==null&&i!==void 0)||i),S=e.getSourceTrackSettings();S.autoGainControl&&b.push(oi.TF_AUTO_GAIN_CONTROL),S.echoCancellation&&b.push(oi.TF_ECHO_CANCELLATION),S.noiseSuppression&&b.push(oi.TF_NOISE_SUPPRESSION),S.channelCount&&S.channelCount>1&&b.push(oi.TF_STEREO),C&&b.push(oi.TF_NO_DTX),vc(e)&&e.hasPreConnectBuffer&&b.push(oi.TF_PRECONNECT_BUFFER);const R=new Rk({cid:e.mediaStreamTrack.id,name:n.name,type:ue.kindToProto(e.kind),muted:e.isMuted,source:ue.sourceToProto(e.source),disableDtx:C,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:b});let w;if(e.kind===ue.Kind.Video){let N={width:0,height:0};try{N=yield e.waitForDimensions()}catch{const U=(o=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&o!==void 0?o:Ol.h720.resolution;N={width:U.width,height:U.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Tt(e)),{dims:N}))}R.width=N.width,R.height=N.height,zu(e)&&(Vc(v)&&(e.source===ue.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Tt(e))))),n.scalabilityMode=(l=n.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),R.simulcastCodecs=[new Tk({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Gk}),n.backupCodec&&v!==n.backupCodec.codec&&R.encryption===sa.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),R.simulcastCodecs.push(new Tk({codec:n.backupCodec.codec,cid:""})))),w=Zk(e.source===ue.Source.ScreenShare,R.width,R.height,n),R.layers=tj(R.width,R.height,w,Vc(n.videoCodec))}else e.kind===ue.Kind.Audio&&(w=[{maxBitrate:(c=n.audioPreset)===null||c===void 0?void 0:c.maxBitrate,priority:(f=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high",networkPriority:(g=(p=n.audioPreset)===null||p===void 0?void 0:p.priority)!==null&&g!==void 0?g:"high"}]);if(!this.engine||this.engine.isClosed)throw new Fr("cannot publish track when not connected");const I=()=>Y(this,void 0,void 0,function*(){var N,D,U;if(!this.engine.pcManager)throw new Fr("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,w),zu(e)&&((N=n.degradationPreference)!==null&&N!==void 0||(n.degradationPreference=Z0e(e)),e.setDegradationPreference(n.degradationPreference)),w)if(om()&&e.kind===ue.Kind.Audio){let j;for(const $ of this.engine.pcManager.publisher.getTransceivers())if($.sender===e.sender){j=$;break}j&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:j,codec:"opus",maxbr:!((D=w[0])===null||D===void 0)&&D.maxBitrate?w[0].maxBitrate/1e3:0})}else e.codec&&Vc(e.codec)&&(!((U=w[0])===null||U===void 0)&&U.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:R.cid,codec:e.codec,maxbr:w[0].maxBitrate/1e3});yield this.engine.negotiate()});let k;const x=new Promise((N,D)=>Y(this,void 0,void 0,function*(){var U;try{k=yield this.engine.addTrack(R),N(k)}catch(j){e.sender&&(!((U=this.engine.pcManager)===null||U===void 0)&&U.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch($=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),Tt(e)),{error:$}))})),D(j)}}));if(this.enabledPublishVideoCodecs.length>0)k=(yield Promise.all([x,I()]))[0];else{k=yield x;let N;if(k.codecs.forEach(D=>{N===void 0&&(N=D.mimeType)}),N&&e.kind===ue.Kind.Video){const D=$7(N);D!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Tt(e)),{codec:D})),n.videoCodec=D,w=Zk(e.source===ue.Source.ScreenShare,R.width,R.height,n))}yield I()}const L=new Yk(e.kind,k,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(L.options=n,e.sid=k.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:w,trackInfo:k})),zu(e)?e.startMonitor(this.engine.client):vc(e)&&e.startMonitor(),this.addTrackPublication(L),this.emit(se.LocalTrackPublished,L),vc(e)&&k.audioFeatures.includes(oi.TF_PRECONNECT_BUFFER)){const N=e.getPreConnectBuffer();this.on(se.LocalTrackSubscribed,D=>{if(D.trackSid===k.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),Tt(e))),e.stopPreConnectBuffer()}}),N&&new Promise((U,j)=>Y(this,void 0,void 0,function*(){var $,Z,V,z,K,q;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),Tt(e)));const Q=setTimeout(()=>{j(new Error("agent not active within 10 seconds"))},1e4),pe=yield this.waitUntilActiveAgentPresent();clearTimeout(Q),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),Tt(e)));const ve=yield this.streamBytes({name:"preconnect-buffer",mimeType:"audio/opus",topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[pe.identity],attributes:{trackId:L.trackSid,sampleRate:String((K=S.sampleRate)!==null&&K!==void 0?K:"48000"),channels:String((q=S.channelCount)!==null&&q!==void 0?q:"1")}});try{for(var G=!0,J=Ac(N),B;B=yield J.next(),$=B.done,!$;G=!0){z=B.value,G=!1;const Re=z;yield ve.write(Re)}}catch(Re){Z={error:Re}}finally{try{!G&&!$&&(V=J.return)&&(yield V.call(J))}finally{if(Z)throw Z.error}}yield ve.close(),U()}catch(Q){j(Q)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),Tt(e)))}).catch(U=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),Tt(e)),{error:U}))})}return L})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return Y(this,void 0,void 0,function*(){var i;if(this.encryptionType!==sa.NONE)return;let s;if(this.trackPublications.forEach(g=>{g.track&&g.track===e&&(s=g)}),!s)throw new Nc("track is not published");if(!zu(e))throw new Nc("track is not a video track");const a=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),o=q0e(e,n,a);if(!o){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Tt(e)));return}const l=e.addSimulcastTrack(n,o);if(!l)return;const c=new Rk({cid:l.mediaStreamTrack.id,type:ue.kindToProto(e.kind),muted:e.isMuted,source:ue.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:a.videoCodec,cid:l.mediaStreamTrack.id}]});if(c.layers=tj(c.width,c.height,o),!this.engine||this.engine.isClosed)throw new Fr("cannot publish track when not connected");const d=()=>Y(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,l,a,o),yield this.engine.negotiate()}),p=(yield Promise.all([this.engine.addTrack(c),d()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:o,trackInfo:p}))})}unpublishTrack(e,n){return Y(this,void 0,void 0,function*(){var r,i;if(ch(e)){const c=this.pendingPublishPromises.get(e);c&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Tt(e))),yield c)}const s=this.getPublicationForTrack(e),a=s?Tt(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}e=s.track,e.off(ke.Muted,this.onTrackMuted),e.off(ke.Unmuted,this.onTrackUnmuted),e.off(ke.Ended,this.handleTrackEnded),e.off(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let o=!1;const l=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<ar.FAILED&&l)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===l&&(c.direction="inactive",o=!0);if(this.engine.removeTrack(l)&&(o=!0),zu(e)){for(const[,c]of e.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(o=!0),c.sender=void 0);e.simulcastCodecs.clear()}}catch(c){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:c}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case ue.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case ue.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(se.LocalTrackUnpublished,s),s.setTrack(void 0),o&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return Y(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,a)=>Y(r,void 0,void 0,function*(){try{const o=[];this.trackPublications.forEach(l=>{l.track&&(n&&(l.options=Object.assign(Object.assign({},l.options),n)),o.push(l))}),yield Promise.all(o.map(l=>Y(this,void 0,void 0,function*(){const c=l.track;yield this.unpublishTrack(c,!1),i&&!c.isMuted&&c.source!==ue.Source.ScreenShare&&c.source!==ue.Source.ScreenShareAudio&&(vc(c)||zu(c))&&!c.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:l.trackSid})),yield c.restartTrack()),yield this.publishOrRepublishTrack(c,l.options,!0)}))),s()}catch(o){a(o)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return Y(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=i.reliable?Ht.RELIABLE:Ht.LOSSY,a=i.destinationIdentities,o=i.topic,l=new Es({kind:s,value:{case:"user",value:new Yz({participantIdentity:r.identity,payload:n,destinationIdentities:a,topic:o})}});yield r.engine.sendDataPacket(l,s)}()})}publishDtmf(e,n){return Y(this,void 0,void 0,function*(){const r=new Es({kind:Ht.RELIABLE,value:{case:"sipDtmf",value:new Jz({code:e,digit:n})}});yield this.engine.sendDataPacket(r,Ht.RELIABLE)})}sendChatMessage(e,n){return Y(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new Es({value:{case:"chatMessage",value:new Ck(Object.assign(Object.assign({},r),{timestamp:Kn.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,Ht.RELIABLE),this.emit(se.ChatMessage,r),r})}editChatMessage(e,n){return Y(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new Es({value:{case:"chatMessage",value:new Ck(Object.assign(Object.assign({},r),{timestamp:Kn.parse(r.timestamp),editTimestamp:Kn.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,Ht.RELIABLE),this.emit(se.ChatMessage,r),r})}sendText(e,n){return Y(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),a=new TextEncoder().encode(e).byteLength,o=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),l=new Array(o?o.length+1:1).fill(0),c=(f,p)=>{var g;l[p]=f;const y=l.reduce((v,b)=>v+b,0);(g=n==null?void 0:n.onProgress)===null||g===void 0||g.call(n,y)},d=yield this.streamText({streamId:i,totalSize:a,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:o,attributes:n==null?void 0:n.attributes});return yield d.write(e),c(1,0),yield d.close(),n!=null&&n.attachments&&o&&(yield Promise.all(n.attachments.map((f,p)=>Y(this,void 0,void 0,function*(){return this._sendFile(o[p],f,{topic:n.topic,mimeType:f.type,onProgress:g=>{c(g,p+1)}})})))),d.info})}streamText(e){return Y(this,void 0,void 0,function*(){var n,r;const i=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),s={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes},a=new Ek({streamId:i,mimeType:s.mimeType,topic:s.topic,timestamp:z1(s.timestamp),totalLength:z1(e==null?void 0:e.totalSize),attributes:s.attributes,contentHeader:{case:"textHeader",value:new oW({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?bk.UPDATE:bk.CREATE})}}),o=e==null?void 0:e.destinationIdentities,l=new Es({destinationIdentities:o,value:{case:"streamHeader",value:a}});yield this.engine.sendDataPacket(l,Ht.RELIABLE);let c=0;const d=this,f=new WritableStream({write(y){return Y(this,void 0,void 0,function*(){for(const v of o0e(y,ij)){yield d.engine.waitForBufferStatusLow(Ht.RELIABLE);const b=new Sk({content:v,streamId:i,chunkIndex:z1(c)}),C=new Es({destinationIdentities:o,value:{case:"streamChunk",value:b}});yield d.engine.sendDataPacket(C,Ht.RELIABLE),c+=1}})},close(){return Y(this,void 0,void 0,function*(){const y=new wk({streamId:i}),v=new Es({destinationIdentities:o,value:{case:"streamTrailer",value:y}});yield d.engine.sendDataPacket(v,Ht.RELIABLE)})},abort(y){console.log("Sink error:",y)}});let p=()=>Y(this,void 0,void 0,function*(){yield g.close()});d.engine.once(Pe.Closing,p);const g=new nge(f,s,()=>this.engine.off(Pe.Closing,p));return g})}sendFile(e,n){return Y(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return Y(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:o,value:l}=yield a.read();if(o)break;yield s.write(l)}return yield s.close(),s.info})}streamBytes(e){return Y(this,void 0,void 0,function*(){var n,r,i,s,a;const o=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l=e==null?void 0:e.destinationIdentities,c={id:o,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(s=e==null?void 0:e.name)!==null&&s!==void 0?s:"unknown"},d=new Ek({totalLength:z1((a=c.size)!==null&&a!==void 0?a:0),mimeType:c.mimeType,streamId:o,topic:c.topic,timestamp:z1(Date.now()),attributes:c.attributes,contentHeader:{case:"byteHeader",value:new lW({name:c.name})}}),f=new Es({destinationIdentities:l,value:{case:"streamHeader",value:d}});yield this.engine.sendDataPacket(f,Ht.RELIABLE);let p=0;const g=new ns,y=this.engine,v=this.log,b=new WritableStream({write(S){return Y(this,void 0,void 0,function*(){const R=yield g.lock();let w=0;try{for(;w<S.byteLength;){const I=S.slice(w,w+ij);yield y.waitForBufferStatusLow(Ht.RELIABLE);const k=new Es({destinationIdentities:l,value:{case:"streamChunk",value:new Sk({content:I,streamId:o,chunkIndex:z1(p)})}});yield y.sendDataPacket(k,Ht.RELIABLE),p+=1,w+=I.byteLength}}finally{R()}})},close(){return Y(this,void 0,void 0,function*(){const S=new wk({streamId:o}),R=new Es({destinationIdentities:l,value:{case:"streamTrailer",value:S}});yield y.sendDataPacket(R,Ht.RELIABLE)})},abort(S){v.error("Sink error:",S)}});return new rge(b,c)})}performRpc(e){return Y(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:a,responseTimeout:o=1e4}=n;return function*(){return new Promise((c,d)=>Y(r,void 0,void 0,function*(){var f,p,g,y;if(bx(a)>hY){d(cr.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((p=(f=this.engine.latestJoinResponse)===null||f===void 0?void 0:f.serverInfo)===null||p===void 0)&&p.version&&Fd((y=(g=this.engine.latestJoinResponse)===null||g===void 0?void 0:g.serverInfo)===null||y===void 0?void 0:y.version,"1.8.0")<0){d(cr.builtIn("UNSUPPORTED_SERVER"));return}const v=crypto.randomUUID();yield this.publishRpcRequest(i,v,s,a,o-2e3);const b=setTimeout(()=>{this.pendingAcks.delete(v),d(cr.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(v),clearTimeout(C)},2e3);this.pendingAcks.set(v,{resolve:()=>{clearTimeout(b)},participantIdentity:i});const C=setTimeout(()=>{this.pendingResponses.delete(v),d(cr.builtIn("RESPONSE_TIMEOUT"))},o);this.pendingResponses.set(v,{resolve:(S,R)=>{clearTimeout(C),this.pendingAcks.has(v)&&(console.warn("RPC response received before ack",v),this.pendingAcks.delete(v),clearTimeout(b)),R?d(R):c(S??"")},participantIdentity:i})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,s){return Y(this,void 0,void 0,function*(){const a=new Es({destinationIdentities:[e],kind:Ht.RELIABLE,value:{case:"rpcRequest",value:new Qz({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(a,Ht.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,cr.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const a=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Tt(s)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(e){var n,r,i,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new c2),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(vc(i)||zu(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return Y(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[a]=s;return a.source===e});if(i)return i[1];yield As(20)}})}}class Q6 extends Ic{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Fa.HIGH,this.handleEnded=s=>{this.setTrack(void 0),this.emit(ke.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensions=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new N9({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new nW({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ke.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Ic.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ic.SubscriptionStatus.Subscribed:Ic.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ic.PermissionStatus.Allowed:Ic.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(Zb(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Zb(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(ke.VisibilityChanged,this.handleVisibilityChange),i.off(ke.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(ke.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ke.VisibilityChanged,this.handleVisibilityChange),e.on(ke.Ended,this.handleEnded),this.emit(ke.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ke.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ke.Muted:ke.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ke.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ke.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===ue.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Zb(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new cW({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=Fa.HIGH,this.emit(ke.UpdateSettings,e)}}class X6 extends vY{static fromParticipantInfo(e,n,r){return new X6(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,s,a,o){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ig.STANDARD;super(n,r||"",i,s,a,o,l),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ke.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Tt(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ke.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ke.SubscriptionPermissionChanged,n=>{this.emit(se.TrackSubscriptionPermissionChanged,e,n)}),e.on(ke.SubscriptionStatusChanged,n=>{this.emit(se.TrackSubscriptionStatusChanged,e,n)}),e.on(ke.Subscribed,n=>{this.emit(se.TrackSubscribed,n,e)}),e.on(ke.Unsubscribed,n=>{this.emit(se.TrackUnsubscribed,n,e)}),e.on(ke.SubscriptionFailed,n=>{this.emit(se.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ue.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,a){let o=this.getTrackPublicationBySid(n);if(o||n.startsWith("TR")||this.trackPublications.forEach(d=>{!o&&e.kind===d.kind.toString()&&(o=d)}),!o){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(se.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,a-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Tt(o))),this.emit(se.TrackSubscriptionFailed,n);return}const l=e.kind==="video";let c;return l?c=new ige(e,n,i,s):c=new gY(e,n,i,this.audioContext,this.audioOutput),c.source=o.source,c.isMuted=o.isMuted,c.setMediaStream(r),c.start(),o.setTrack(c),this.volumeMap.has(o.source)&&Vk(c)&&Ul(c)&&c.setVolume(this.volumeMap.get(o.source)),o}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,a;let o=this.getTrackPublicationBySid(i.sid);if(o)o.updateInfo(i);else{const l=ue.kindFromProto(i.type);if(!l)return;o=new Q6(l,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),o.updateInfo(i),r.set(i.sid,o);const c=Array.from(this.trackPublications.values()).find(d=>d.source===(o==null?void 0:o.source));c&&o.source!==ue.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Tt(c),newTrack:Tt(o)})),this.addTrackPublication(o)}n.set(i.sid,o)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Tt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(se.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case ue.Kind.Audio:this.audioTrackPublications.delete(e);break;case ue.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(se.TrackUnpublished,r)}setAudioOutput(e){return Y(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;Ul(r.track)&&Vk(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var Rt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(Rt||(Rt={}));const dge=4*1e3;class su extends Zl.EventEmitter{constructor(e){var n,r,i,s;if(super(),n=this,this.state=Rt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=kt,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(a,o,l)=>Y(this,void 0,void 0,function*(){var c;if(!z3e())throw jl()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const d=yield this.disconnectLock.lock();if(this.state===Rt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(Rt.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==a&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Hk(new URL(a))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new zk(a,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().then(g=>{var y;(y=this.regionUrlProvider)===null||y===void 0||y.setServerReportedRegions(g)}).catch(g=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:g}))}));const f=(g,y,v)=>Y(this,void 0,void 0,function*(){var b,C;this.abortController&&this.abortController.abort();const S=new AbortController;this.abortController=S,d==null||d();try{yield this.attemptConnection(v??a,o,l,S),this.abortController=void 0,g()}catch(R){if(this.regionUrlProvider&&R instanceof hn&&R.reason!==Dt.Cancelled&&R.reason!==Dt.NotAllowed){let w=null;try{w=yield this.regionUrlProvider.getNextBestRegionUrl((b=this.abortController)===null||b===void 0?void 0:b.signal)}catch(I){if(I instanceof hn&&(I.status===401||I.reason===Dt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),y(I);return}}w&&!(!((C=this.abortController)===null||C===void 0)&&C.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(R.message,". Retrying with another region: ").concat(w),this.logContext),this.recreateEngine(),yield f(g,y,w)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,VF(R)),y(R))}else{let w=Fo.UNKNOWN_REASON;R instanceof hn&&(w=VF(R)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,w),y(R)}}}),p=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new c2((g,y)=>{f(g,y,p)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(a,o,l,c,d,f)=>Y(this,void 0,void 0,function*(){var p,g,y;const v=yield l.join(a,o,{autoSubscribe:c.autoSubscribe,adaptiveStream:typeof d.adaptiveStream=="object"?!0:d.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},f.signal);let b=v.serverInfo;if(b||(b={version:v.serverVersion,region:v.serverRegion}),this.serverInfo=b,this.log.debug("connected to Livekit Server ".concat(Object.entries(b).map(C=>{let[S,R]=C;return"".concat(S,": ").concat(R)}).join(", ")),{room:(p=v.room)===null||p===void 0?void 0:p.name,roomSid:(g=v.room)===null||g===void 0?void 0:g.sid,identity:(y=v.participant)===null||y===void 0?void 0:y.identity}),!b.version)throw new O3e("unknown server version");return b.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),d.dynacast=!1),v}),this.applyJoinResponse=a=>{const o=a.participant;if(this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.setEnabledPublishCodecs(a.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(a.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([o,...a.otherParticipants]),a.room&&this.handleRoomUpdate(a.room)},this.attemptConnection=(a,o,l,c)=>Y(this,void 0,void 0,function*(){var d,f;this.state===Rt.Reconnecting||this.isResuming||!((d=this.engine)===null||d===void 0)&&d.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((f=this.regionUrlProvider)===null||f===void 0)&&f.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Cx),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const p=yield this.connectSignal(a,o,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(p),this.setupLocalParticipantEvents(),this.emit(le.SignalConnected)}catch(p){yield this.engine.close(),this.recreateEngine();const g=new hn("could not establish signal connection",Dt.ServerUnreachable);throw p instanceof Error&&(g.message="".concat(g.message,": ").concat(p.message)),p instanceof hn&&(g.reason=p.reason,g.status=p.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:p})),g}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new hn("Connection attempt aborted",Dt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(p){throw yield this.engine.close(),this.recreateEngine(),p}Ms()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Ms()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Rt.Connected),this.emit(le.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return Y(n,[...o],void 0,function(){var c=this;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var f,p,g,y;const v=yield c.disconnectLock.lock();try{if(c.state===Rt.Disconnected){c.log.debug("already disconnected",c.logContext);return}c.log.info("disconnect from room",Object.assign({},c.logContext)),(c.state===Rt.Connecting||c.state===Rt.Reconnecting||c.isResuming)&&(c.log.warn("abort connection attempt",c.logContext),(f=c.abortController)===null||f===void 0||f.abort(),(g=(p=c.connectFuture)===null||p===void 0?void 0:p.reject)===null||g===void 0||g.call(p,new hn("Client initiated disconnect",Dt.Cancelled)),c.connectFuture=void 0),!((y=c.engine)===null||y===void 0)&&y.client.isDisconnected||(yield c.engine.client.sendLeave()),c.engine&&(yield c.engine.close()),c.handleDisconnect(d,Fo.CLIENT_INITIATED),c.engine=void 0}finally{v()}}()})},this.onPageLeave=()=>Y(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>Y(this,void 0,void 0,function*(){const a=[],o=Os();if(o&&o.os==="iOS"){const l="livekit-dummy-audio-el";let c=document.getElementById(l);if(!c){c=document.createElement("audio"),c.id=l,c.autoplay=!0,c.hidden=!0;const d=Kb();d.enabled=!0;const f=new MediaStream([d]);c.srcObject=f,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:f,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(le.Disconnected,()=>{c==null||c.remove(),c=null})}a.push(c)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(c=>{c.track&&c.track.attachedElements.forEach(d=>{a.push(d)})})});try{yield Promise.all([this.acquireAudioContext(),...a.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>Y(this,void 0,void 0,function*(){const a=[];for(const o of this.remoteParticipants.values())o.videoTrackPublications.forEach(l=>{var c;(c=l.track)===null||c===void 0||c.attachedElements.forEach(d=>{a.includes(d)||a.push(d)})});yield Promise.all(a.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const a of this.remoteParticipants.values())this.handleParticipantDisconnected(a.identity,a);this.setAndEmitConnectionState(Rt.Reconnecting)&&this.emit(le.Reconnecting)},this.handleSignalRestarted=a=>Y(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(a.serverRegion),Object.assign(Object.assign({},this.logContext),{region:a.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(a);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:a.serverRegion}))}catch{return}this.setAndEmitConnectionState(Rt.Connected),this.emit(le.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=a=>{a.forEach(o=>{var l;if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}o.identity===""&&(o.identity=(l=this.sidToIdentity.get(o.sid))!==null&&l!==void 0?l:"");let c=this.remoteParticipants.get(o.identity);o.state===I2.DISCONNECTED?this.handleParticipantDisconnected(o.identity,c):c=this.getOrCreateParticipant(o.identity,o)})},this.handleActiveSpeakersUpdate=a=>{const o=[],l={};a.forEach(c=>{if(l[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const d=this.getRemoteParticipantBySid(c.sid);d&&(d.audioLevel=c.level,d.setIsSpeaking(!0),o.push(d))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(c=>{l[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(le.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=a=>{const o=new Map;this.activeSpeakers.forEach(c=>{const d=this.remoteParticipants.get(c.identity);d&&d.sid!==c.sid||o.set(c.sid,c)}),a.forEach(c=>{let d=this.getRemoteParticipantBySid(c.sid);c.sid===this.localParticipant.sid&&(d=this.localParticipant),d&&(d.audioLevel=c.level,d.setIsSpeaking(c.active),c.active?o.set(c.sid,d):o.delete(c.sid))});const l=Array.from(o.values());l.sort((c,d)=>d.audioLevel-c.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(le.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=a=>{a.streamStates.forEach(o=>{const l=this.getRemoteParticipantBySid(o.participantSid);if(!l)return;const c=l.getTrackPublicationBySid(o.trackSid);if(!c||!c.track)return;const d=ue.streamStateFromProto(o.state);d!==c.track.streamState&&(c.track.streamState=d,l.emit(se.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(le.TrackStreamStateChanged,c,c.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=a=>{const o=this.getRemoteParticipantBySid(a.participantSid);if(!o)return;const l=o.getTrackPublicationBySid(a.trackSid);l&&l.setAllowed(a.allowed)},this.handleSubscriptionError=a=>{const o=Array.from(this.remoteParticipants.values()).find(c=>c.trackPublications.has(a.trackSid));if(!o)return;const l=o.getTrackPublicationBySid(a.trackSid);l&&l.setSubscriptionError(a.err)},this.handleDataPacket=a=>{const o=this.remoteParticipants.get(a.participantIdentity);if(a.value.case==="user")this.handleUserPacket(o,a.value.value,a.kind);else if(a.value.case==="transcription")this.handleTranscription(o,a.value.value);else if(a.value.case==="sipDtmf")this.handleSipDtmf(o,a.value.value);else if(a.value.case==="chatMessage")this.handleChatMessage(o,a.value.value);else if(a.value.case==="metrics")this.handleMetrics(a.value.value,o);else if(a.value.case==="streamHeader")this.handleStreamHeader(a.value.value,a.participantIdentity);else if(a.value.case==="streamChunk")this.handleStreamChunk(a.value.value);else if(a.value.case==="streamTrailer")this.handleStreamTrailer(a.value.value);else if(a.value.case==="rpcRequest"){const l=a.value.value;this.handleIncomingRpcRequest(a.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(a,o,l)=>{this.emit(le.DataReceived,o.payload,a,l,o.topic),a==null||a.emit(se.DataReceived,o.payload,l)},this.handleSipDtmf=(a,o)=>{this.emit(le.SipDTMFReceived,o,a),a==null||a.emit(se.SipDTMFReceived,o)},this.bufferedSegments=new Map,this.handleTranscription=(a,o)=>{const l=o.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(o.transcribedParticipantIdentity),c=l==null?void 0:l.trackPublications.get(o.trackId),d=r0e(o,this.transcriptionReceivedTimes);c==null||c.emit(ke.TranscriptionReceived,d),l==null||l.emit(se.TranscriptionReceived,d,c),this.emit(le.TranscriptionReceived,d,l,c)},this.handleChatMessage=(a,o)=>{const l=i0e(o);this.emit(le.ChatMessage,l,a)},this.handleMetrics=(a,o)=>{this.emit(le.MetricsReceived,a,o)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(le.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=a=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:a})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(le.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(le.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(le.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>Y(this,void 0,void 0,function*(){var a;((a=Os())===null||a===void 0?void 0:a.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(le.MediaDevicesChanged)}),this.handleRoomUpdate=a=>{const o=this.roomInfo;this.roomInfo=a,o&&o.metadata!==a.metadata&&this.emitWhenConnected(le.RoomMetadataChanged,a.metadata),(o==null?void 0:o.activeRecording)!==a.activeRecording&&this.emitWhenConnected(le.RecordingStatusChanged,a.activeRecording)},this.handleConnectionQualityUpdate=a=>{a.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const l=this.getRemoteParticipantBySid(o.participantSid);l&&l.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=a=>{this.emit(le.ParticipantMetadataChanged,a,this.localParticipant)},this.onLocalParticipantNameChanged=a=>{this.emit(le.ParticipantNameChanged,a,this.localParticipant)},this.onLocalAttributesChanged=a=>{this.emit(le.ParticipantAttributesChanged,a,this.localParticipant)},this.onLocalTrackMuted=a=>{this.emit(le.TrackMuted,a,this.localParticipant)},this.onLocalTrackUnmuted=a=>{this.emit(le.TrackUnmuted,a,this.localParticipant)},this.onTrackProcessorUpdate=a=>{var o;(o=a==null?void 0:a.onPublish)===null||o===void 0||o.call(a,this)},this.onLocalTrackPublished=a=>Y(this,void 0,void 0,function*(){var o,l,c,d,f,p;(o=a.track)===null||o===void 0||o.on(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=a.track)===null||l===void 0||l.on(ke.Restarted,this.onLocalTrackRestarted),(f=(d=(c=a.track)===null||c===void 0?void 0:c.getProcessor())===null||d===void 0?void 0:d.onPublish)===null||f===void 0||f.call(d,this),this.emit(le.LocalTrackPublished,a,this.localParticipant),vc(a.track)&&(yield a.track.checkForSilence())&&this.emit(le.LocalAudioSilenceDetected,a);const g=yield(p=a.track)===null||p===void 0?void 0:p.getDeviceId(!1),y=qk(a.source);y&&g&&g!==this.localParticipant.activeDeviceMap.get(y)&&(this.localParticipant.activeDeviceMap.set(y,g),this.emit(le.ActiveDeviceChanged,y,g))}),this.onLocalTrackUnpublished=a=>{var o,l;(o=a.track)===null||o===void 0||o.off(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=a.track)===null||l===void 0||l.off(ke.Restarted,this.onLocalTrackRestarted),this.emit(le.LocalTrackUnpublished,a,this.localParticipant)},this.onLocalTrackRestarted=a=>Y(this,void 0,void 0,function*(){const o=yield a.getDeviceId(!1),l=qk(a.source);l&&o&&o!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(o," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,o),this.emit(le.ActiveDeviceChanged,l,o))}),this.onLocalConnectionQualityChanged=a=>{this.emit(le.ConnectionQualityChanged,a,this.localParticipant)},this.onMediaDevicesError=(a,o)=>{this.emit(le.MediaDevicesError,a,o)},this.onLocalParticipantPermissionsChanged=a=>{this.emit(le.ParticipantPermissionsChanged,a,this.localParticipant)},this.onLocalChatMessageSent=a=>{this.emit(le.ChatMessage,a,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},x0e),e),this.log=iu((r=this.options.loggerName)!==null&&r!==void 0?r:qo.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},uY),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},dY),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},I0e),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new ns,this.localParticipant=new uge("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Rd(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Rd(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Rd(this.options.audioOutput.deviceId)).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Ms()){const a=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:a.signal}),su.cleanupRegistry&&su.cleanupRegistry.register(this,()=>{a.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,r,i,s,a){return Y(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),a!==1){yield this.engine.publishRpcResponse(e,n,null,cr.builtIn("UNSUPPORTED_VERSION"));return}const o=this.rpcHandlers.get(r);if(!o){yield this.engine.publishRpcResponse(e,n,null,cr.builtIn("UNSUPPORTED_METHOD"));return}let l=null,c=null;try{const d=yield o({requestId:n,callerIdentity:e,payload:i,responseTimeout:s});bx(d)>hY?(l=cr.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):c=d}catch(d){d instanceof cr?l=d:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),d),l=cr.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,c,l)})}setE2EEEnabled(e){return Y(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new m0e(this.options.e2ee),this.e2eeManager.on(vd.ParticipantEncryptionStatusChanged,(n,r)=>{a0e(r)&&(this.isE2EEEnabled=n),this.emit(le.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(vd.EncryptionError,n=>this.emit(le.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return Y(this,void 0,void 0,function*(){return this.state===Rt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(Pe.RoomUpdate,r),e(i.sid))};this.engine.on(Pe.RoomUpdate,r),this.once(le.Disconnected,()=>{this.engine.off(Pe.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Y0e(this.options),this.engine.on(Pe.ParticipantUpdate,this.handleParticipantUpdates).on(Pe.RoomUpdate,this.handleRoomUpdate).on(Pe.SpeakersChanged,this.handleSpeakersChanged).on(Pe.StreamStateChanged,this.handleStreamStateUpdate).on(Pe.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Pe.SubscriptionError,this.handleSubscriptionError).on(Pe.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Pe.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Pe.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Pe.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Pe.DataPacketReceived,this.handleDataPacket).on(Pe.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Rt.SignalReconnecting)&&this.emit(le.SignalReconnecting)}).on(Pe.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Rt.Connected)&&this.emit(le.Reconnected)}).on(Pe.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Rt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Pe.Restarting,this.handleRestarting).on(Pe.SignalRestarted,this.handleSignalRestarted).on(Pe.Offline,()=>{this.setAndEmitConnectionState(Rt.Reconnecting)&&this.emit(le.Reconnecting)}).on(Pe.DCBufferStatusChanged,(e,n)=>{this.emit(le.DCBufferStatusChanged,e,n)}).on(Pe.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(se.LocalTrackSubscribed,n),this.emitWhenConnected(le.LocalTrackSubscribed,n,this.localParticipant)}).on(Pe.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(le.Moved,e.room.name,e.token),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ci.getInstance().getDevices(e,n)}prepareConnection(e,n){return Y(this,void 0,void 0,function*(){if(this.state===Rt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Hk(new URL(e))&&n){this.regionUrlProvider=new zk(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Rt.Disconnected&&(this.regionUrl=r,yield fetch($k(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch($k(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return Y(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new bl({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new bl({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new bl({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new bl({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>Y(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new bl({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>Y(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new bl({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new bl({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>Y(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new D9({reason:Fo.CLIENT_INITIATED,action:x2.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new bl({scenario:{case:"subscriberBandwidth",value:z1(n)}});break;case"leave-full-reconnect":i=new bl({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return Y(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var o,l,c,d,f,p,g,y;let v=!0,b=!1;const C=a?{exact:i}:i;if(r==="audioinput"){b=s.localParticipant.audioTrackPublications.size===0;const S=(o=s.getActiveDevice(r))!==null&&o!==void 0?o:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=C;const R=Array.from(s.localParticipant.audioTrackPublications.values()).filter(w=>w.source===ue.Source.Microphone);try{v=(yield Promise.all(R.map(w=>{var I;return(I=w.audioTrack)===null||I===void 0?void 0:I.setDeviceId(C)}))).every(w=>w===!0)}catch(w){throw s.options.audioCaptureDefaults.deviceId=S,w}}else if(r==="videoinput"){b=s.localParticipant.videoTrackPublications.size===0;const S=(l=s.getActiveDevice(r))!==null&&l!==void 0?l:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=C;const R=Array.from(s.localParticipant.videoTrackPublications.values()).filter(w=>w.source===ue.Source.Camera);try{v=(yield Promise.all(R.map(w=>{var I;return(I=w.videoTrack)===null||I===void 0?void 0:I.setDeviceId(C)}))).every(w=>w===!0)}catch(w){throw s.options.videoCaptureDefaults.deviceId=S,w}}else if(r==="audiooutput"){if(!jk()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");s.options.webAudioMix&&(i=(c=yield ci.getInstance().normalizeDeviceId("audiooutput",i))!==null&&c!==void 0?c:""),(d=(y=s.options).audioOutput)!==null&&d!==void 0||(y.audioOutput={});const S=(f=s.getActiveDevice(r))!==null&&f!==void 0?f:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((p=s.audioContext)===null||p===void 0||p.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(R=>R.setAudioOutput({deviceId:i})))}catch(R){throw s.options.audioOutput.deviceId=S,R}}return(b||r==="audiooutput")&&(s.localParticipant.activeDeviceMap.set(r,r==="audiooutput"&&((g=s.options.audioOutput)===null||g===void 0?void 0:g.deviceId)||i),s.emit(le.ActiveDeviceChanged,r,i)),v}()})}setupLocalParticipantEvents(){this.localParticipant.on(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(se.AttributesChanged,this.onLocalAttributesChanged).on(se.TrackMuted,this.onLocalTrackMuted).on(se.TrackUnmuted,this.onLocalTrackUnmuted).on(se.LocalTrackPublished,this.onLocalTrackPublished).on(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(se.MediaDevicesError,this.onMediaDevicesError).on(se.AudioStreamAcquired,this.startAudio).on(se.ChatMessage,this.onLocalChatMessageSent).on(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===Rt.Connecting||this.state===Rt.Reconnecting){const d=()=>{this.onTrackAdded(e,n,r),f()},f=()=>{this.off(le.Reconnected,d),this.off(le.Connected,d),this.off(le.Disconnected,f)};this.once(le.Reconnected,d),this.once(le.Connected,d),this.once(le.Disconnected,f);return}if(this.state===Rt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=G3e(n.id),s=i[0];let a=i[1],o=e.id;if(a&&a.startsWith("TR")&&(o=a),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=Array.from(this.remoteParticipants.values()).find(d=>d.sid===s);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}let c;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?c=this.options.adaptiveStream:c={}),l.addSubscribedMediaTrack(e,o,n,r,c)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==Rt.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,a,o;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((s=i.track)===null||s===void 0||s.detach(),(a=i.track)===null||a===void 0||a.stop()):(o=i.track)===null||o===void 0||o.stopMonitor()}),this.localParticipant.off(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(se.AttributesChanged,this.onLocalAttributesChanged).off(se.TrackMuted,this.onLocalTrackMuted).off(se.TrackUnmuted,this.onLocalTrackUnmuted).off(se.LocalTrackPublished,this.onLocalTrackPublished).off(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(se.MediaDevicesError,this.onMediaDevicesError).off(se.AudioStreamAcquired,this.startAudio).off(se.ChatMessage,this.onLocalChatMessageSent).off(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Ms()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Rt.Disconnected),this.emit(le.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(le.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return Y(this,void 0,void 0,function*(){var r;if(e.contentHeader.case==="byteHeader"){const i=this.byteStreamHandlers.get(e.topic);if(!i){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let s;const a={id:e.streamId,name:(r=e.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:H7(e.timestamp),attributes:e.attributes},o=new ReadableStream({start:l=>{s=l,this.byteStreamControllers.set(e.streamId,{info:a,controller:s,startTime:Date.now()})}});i(new ege(a,o,H7(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const i=this.textStreamHandlers.get(e.topic);if(!i){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let s;const a={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},o=new ReadableStream({start:l=>{s=l,this.textStreamControllers.set(e.streamId,{info:a,controller:s,startTime:Date.now()})}});i(new tge(a,o,H7(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const r=this.textStreamControllers.get(e.streamId);r&&e.content.length>0&&r.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return Y(this,void 0,void 0,function*(){var e,n,r;const i=ci.getInstance().previousDevices,s=yield ci.getInstance().getDevices(void 0,!1),a=Os();if((a==null?void 0:a.name)==="Chrome"&&a.os!=="iOS")for(let l of s){const c=i.find(d=>d.deviceId===l.deviceId);c&&c.label!==""&&c.kind===l.kind&&c.label!==l.label&&this.getActiveDevice(l.kind)==="default"&&this.emit(le.ActiveDeviceChanged,l.kind,l.deviceId)}const o=["audiooutput","audioinput","videoinput"];for(let l of o){const c=l0e(l),d=this.localParticipant.getTrackPublication(c);if(d&&(!((e=d.track)===null||e===void 0)&&e.isUserProvided))continue;const f=s.filter(g=>g.kind===l),p=this.getActiveDevice(l);if(p===((n=i.filter(g=>g.kind===l)[0])===null||n===void 0?void 0:n.deviceId)&&f.length>0&&((r=f[0])===null||r===void 0?void 0:r.deviceId)!==p){yield this.switchActiveDevice(l,f[0].deviceId);continue}l==="audioinput"&&!UF()||l==="videoinput"||f.length>0&&!f.find(g=>g.deviceId===this.getActiveDevice(l))&&(l!=="audiooutput"||!UF())&&(yield this.switchActiveDevice(l,f[0].deviceId))}})}acquireAudioContext(){return Y(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=oY())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),As(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(le.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=X6.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new X6(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(le.ParticipantConnected,r),r.on(se.TrackPublished,i=>{this.emitWhenConnected(le.TrackPublished,i,r)}).on(se.TrackSubscribed,(i,s)=>{i.kind===ue.Kind.Audio?(i.on(ke.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(ke.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===ue.Kind.Video&&(i.on(ke.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(ke.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(le.TrackSubscribed,i,s,r)}).on(se.TrackUnpublished,i=>{this.emit(le.TrackUnpublished,i,r)}).on(se.TrackUnsubscribed,(i,s)=>{this.emit(le.TrackUnsubscribed,i,s,r)}).on(se.TrackMuted,i=>{this.emitWhenConnected(le.TrackMuted,i,r)}).on(se.TrackUnmuted,i=>{this.emitWhenConnected(le.TrackUnmuted,i,r)}).on(se.ParticipantMetadataChanged,i=>{this.emitWhenConnected(le.ParticipantMetadataChanged,i,r)}).on(se.ParticipantNameChanged,i=>{this.emitWhenConnected(le.ParticipantNameChanged,i,r)}).on(se.AttributesChanged,i=>{this.emitWhenConnected(le.ParticipantAttributesChanged,i,r)}).on(se.ConnectionQualityChanged,i=>{this.emitWhenConnected(le.ConnectionQualityChanged,i,r)}).on(se.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(le.ParticipantPermissionsChanged,i,r)}).on(se.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(le.TrackSubscriptionStatusChanged,i,s,r)}).on(se.TrackSubscriptionFailed,(i,s)=>{this.emit(le.TrackSubscriptionFailed,i,r,s)}).on(se.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(le.TrackSubscriptionPermissionChanged,i,s,r)}).on(se.Active,()=>{this.emitWhenConnected(le.ParticipantActive,r),r.kind===ig.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&s0e(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=ki.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Fo.STATE_MISMATCH))):e=0},dge)}clearConnectionReconcile(){this.connectionReconcileInterval&&ki.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(le.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===Rt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===Rt.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return Y(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new A9({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Kn.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ch({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(le.SignalConnected),this.emit(le.Connected),this.setAndEmitConnectionState(Rt.Connected),i.video){const a=new Yk(ue.Kind.Video,new o2({source:Ir.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:No.AUDIO,name:"video-dummy"}),new lm(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:$F(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(se.LocalTrackPublished,a)}if(i.audio){const a=new Yk(ue.Kind.Audio,new o2({source:Ir.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:No.AUDIO}),new Y6(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Kb(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(se.LocalTrackPublished,a)}for(let a=0;a<s.count-1;a+=1){let o=new Ch({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(a),state:I2.ACTIVE,tracks:[],joinedAt:Kn.parse(Date.now())});const l=this.getOrCreateParticipant(o.identity,o);if(s.video){const c=$F(160*((r=s.aspectRatios[a%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),d=new o2({source:Ir.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:No.AUDIO});l.addSubscribedMediaTrack(c,d.sid,new MediaStream([c]),new RTCRtpReceiver),o.tracks=[...o.tracks,d]}if(s.audio){const c=Kb(),d=new o2({source:Ir.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:No.AUDIO});l.addSubscribedMediaTrack(c,d.sid,new MediaStream([c]),new RTCRtpReceiver),o.tracks=[...o.tracks,d]}l.updateInfo(o)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==le.ActiveSpeakersChanged&&e!==le.TranscriptionReceived){const s=yY(r).filter(a=>a!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}}su.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function yY(t){return t.map(e=>{if(e)return Array.isArray(e)?yY(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Mo;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Mo||(Mo={}));class n1 extends Zl.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Mo.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new su(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return Y(this,void 0,void 0,function*(){if(this.status!==Mo.IDLE)throw Error("check is running already");this.setStatus(Mo.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Mo.SKIPPED&&this.setStatus(this.isSuccess()?Mo.SUCCESS:Mo.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return Y(this,void 0,void 0,function*(){return this.room.state===Rt.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return Y(this,void 0,void 0,function*(){this.room&&this.room.state!==Rt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Mo.SKIPPED)}switchProtocol(e){return Y(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(le.Reconnecting,()=>{n=!0}),this.room.once(le.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield As(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class hge extends n1{get description(){return"Cloud regions"}perform(){return Y(this,void 0,void 0,function*(){const e=new zk(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const a=yield e.getNextBestRegionUrl();if(!a)break;if(r.has(a))continue;r.add(a);const o=yield this.checkCloudRegion(a);this.appendMessage("".concat(o.region," RTT: ").concat(o.rtt,"ms, duration: ").concat(o.duration,"ms")),n.push(o)}n.sort((s,a)=>(s.duration-a.duration)*.5+(s.rtt-a.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return Y(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,l=1e6/a,c="A".repeat(a),d=Date.now();for(let y=0;y<l;y++)yield s.write(c);yield s.close();const f=Date.now(),p=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),g={region:i,rtt:1e4,duration:f-d};return p==null||p.forEach(y=>{y.type==="candidate-pair"&&y.nominated&&(g.rtt=y.currentRoundTripTime*1e3)}),yield this.disconnect(),g})}}const tE=1e4;class fge extends n1{get description(){return"Connection via UDP vs TCP"}perform(){return Y(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(tE/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(tE/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return Y(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const o=n.captureStream(30).getVideoTracks()[0],c=(yield this.room.localParticipant.publishTrack(o,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,d={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},f=setInterval(()=>Y(this,void 0,void 0,function*(){const p=yield c.getRTCStatsReport();p==null||p.forEach(g=>{g.type==="outbound-rtp"?(d.packetsSent=g.packetsSent,d.qualityLimitationDurations=g.qualityLimitationDurations,d.bitrateTotal+=g.targetBitrate,d.count++):g.type==="remote-inbound-rtp"&&(d.packetsLost=g.packetsLost,d.rttTotal+=g.roundTripTime,d.jitterTotal+=g.jitter)})}),1e3);return yield new Promise(p=>setTimeout(p,tE)),clearInterval(f),o.stop(),n.remove(),yield this.disconnect(),d})}}class mge extends n1{get description(){return"Can publish audio"}perform(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield oge();if(yield aY(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const s=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let a=0;if(s.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="audio"||!o.kind&&o.mediaType==="audio")&&(a=o.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class pge extends n1{get description(){return"Can publish video"}perform(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield age();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(s+=a.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return Y(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,a,o,l;const c=document.createElement("canvas"),d=e.getSettings(),f=(a=(s=d.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&a!==void 0?a:1280,p=(l=(o=d.height)!==null&&o!==void 0?o:r.videoHeight)!==null&&l!==void 0?l:720;c.width=f,c.height=p;const g=c.getContext("2d");g.drawImage(r,0,0);const v=g.getImageData(0,0,c.width,c.height).data;let b=!0;for(let C=0;C<v.length;C+=4)if(v[C]!==0||v[C+1]!==0||v[C+2]!==0){b=!1;break}b?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),r.remove()})}}class gge extends n1{get description(){return"Resuming connection after interruption"}perform(){return Y(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,s;const a=new Promise(c=>{setTimeout(c,5e3),s=c}),o=()=>{r=!0};n.on(le.SignalReconnecting,o).on(le.Reconnecting,o).on(le.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const l=n.engine.client.onClose;if(l&&l(""),yield a,r){if(!i||n.state!==Rt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class vge extends n1{get description(){return"Can connect via TURN"}perform(){return Y(this,void 0,void 0,function*(){var e,n;const r=new vx,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,a=!1,o=!1;for(let l of i.iceServers)for(let c of l.urls)c.startsWith("turn:")?(a=!0,o=!0):c.startsWith("turns:")&&(a=!0,o=!0,s=!0),c.startsWith("stun:")&&(o=!0);o?a&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||a?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class yge extends n1{get description(){return"Establishing WebRTC connection"}perform(){return Y(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(le.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,s)=>{if(i.candidate){const a=new RTCIceCandidate(i);let o="".concat(a.protocol," ").concat(a.address,":").concat(a.port," ").concat(a.type);a.address&&(_ge(a.address)?o+=" (private)":a.protocol==="tcp"&&a.tcpType==="passive"?(e=!0,o+=" (passive)"):a.protocol==="udp"&&(n=!0)),this.appendMessage(o)}r&&r(i,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),kt.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function _ge(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Cge extends n1{get description(){return"Connecting to signal connection via WebSocket"}perform(){return Y(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new vx;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===rW.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class JXe extends Zl.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Mo.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Mo.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return Y(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=a=>{this.updateCheck(n,a)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(Cge)})}checkWebRTC(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(yge)})}checkTURN(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(vge)})}checkReconnect(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(gge)})}checkPublishAudio(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(mge)})}checkPublishVideo(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(pge)})}checkConnectionProtocol(){return Y(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(fge);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return Y(this,void 0,void 0,function*(){return this.createAndRunCheck(hge)})}}function kx(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=ch(t)?t.mediaStreamTrack:t,i=r.getSettings();let s={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const a=i.facingMode;kt.trace("rawFacingMode",{rawFacingMode:a}),a&&typeof a=="string"&&Sge(a)&&(s={facingMode:a,confidence:"high"})}if(["low","medium"].includes(s.confidence)){kt.trace("Try to get facing mode from device label: (".concat(r.label,")"));const a=Ege(r.label);a!==void 0&&(s=a)}return s}const sj=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),bge=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function Ege(t){var e;const n=t.trim().toLowerCase();if(n!=="")return sj.has(n)?sj.get(n):(e=Array.from(bge.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function Sge(t){return t===void 0||["user","environment","left","right"].includes(t)}var b3={},aj;function wge(){if(aj)return b3;aj=1,Object.defineProperty(b3,"__esModule",{value:!0}),b3.parse=a,b3.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function a(p,g){const y=new s,v=p.length;if(v<2)return y;const b=(g==null?void 0:g.decode)||d;let C=0;do{const S=p.indexOf("=",C);if(S===-1)break;const R=p.indexOf(";",C),w=R===-1?v:R;if(S>w){C=p.lastIndexOf(";",S-1)+1;continue}const I=o(p,C,S),k=l(p,S,I),x=p.slice(I,k);if(y[x]===void 0){let L=o(p,S+1,w),N=l(p,w,L);const D=b(p.slice(L,N));y[x]=D}C=w+1}while(C<v);return y}function o(p,g,y){do{const v=p.charCodeAt(g);if(v!==32&&v!==9)return g}while(++g<y);return y}function l(p,g,y){for(;g>y;){const v=p.charCodeAt(--g);if(v!==32&&v!==9)return g+1}return y}function c(p,g,y){const v=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const b=v(g);if(!e.test(b))throw new TypeError(`argument val is invalid: ${g}`);let C=p+"="+b;if(!y)return C;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);C+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);C+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);C+="; Path="+y.path}if(y.expires){if(!f(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);C+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(C+="; HttpOnly"),y.secure&&(C+="; Secure"),y.partitioned&&(C+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return C}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function f(p){return i.call(p)==="[object Date]"}return b3}wge();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oj="popstate";function kge(t={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Jk("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ag(i)}return Rge(e,n,null,t)}function er(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tge(){return Math.random().toString(36).substring(2,10)}function lj(t,e){return{usr:t.state,key:t.key,idx:e}}function Jk(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Hm(e):e,state:n,key:e&&e.key||r||Tge()}}function ag({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Rge(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let b=d(),C=b==null?null:b-c;c=b,l&&l({action:o,location:v.location,delta:C})}function p(b,C){o="PUSH";let S=Jk(v.location,b,C);c=d()+1;let R=lj(S,c),w=v.createHref(S);try{a.pushState(R,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(w)}s&&l&&l({action:o,location:v.location,delta:1})}function g(b,C){o="REPLACE";let S=Jk(v.location,b,C);c=d();let R=lj(S,c),w=v.createHref(S);a.replaceState(R,"",w),s&&l&&l({action:o,location:v.location,delta:0})}function y(b){let C=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof b=="string"?b:ag(b);return S=S.replace(/ $/,"%20"),er(C,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,C)}let v={get action(){return o},get location(){return t(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(oj,f),l=b,()=>{i.removeEventListener(oj,f),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let C=y(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:g,go(b){return a.go(b)}};return v}function Tx(t,e,n="/"){return Ige(t,e,n,!1)}function Ige(t,e,n,r){let i=typeof e=="string"?Hm(e):e,s=jd(i.pathname||"/",n);if(s==null)return null;let a=_Y(t);xge(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Hge(s);o=Fge(a[l],c,r)}return o}function _Y(t,e=[],n=[],r=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(er(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Kc([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(er(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),_Y(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Dge(c,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of CY(s.path))i(s,a,l)}),e}function CY(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=CY(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function xge(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Uge(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Mge=/^:[\w-]+$/,Pge=3,Lge=2,Oge=1,Age=10,Nge=-2,cj=t=>t==="*";function Dge(t,e){let n=t.split("/"),r=n.length;return n.some(cj)&&(r+=Nge),e&&(r+=Lge),n.filter(i=>!cj(i)).reduce((i,s)=>i+(Mge.test(s)?Pge:s===""?Oge:Age),r)}function Uge(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Fge(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=e5({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=e5({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Kc([s,f.pathname]),pathnameBase:qge(Kc([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Kc([s,f.pathnameBase]))}return a}function e5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jge(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:f},p)=>{if(d==="*"){let y=o[p]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[p];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function jge(t,e=!1,n=!0){Hl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Hge(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hl(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function jd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $ge(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Hm(t):t;return{pathname:n?n.startsWith("/")?n:Vge(n,e):e,search:Gge(r),hash:Kge(i)}}function Vge(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nE(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bge(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bY(t){let e=Bge(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function EY(t,e,n,r=!1){let i;typeof t=="string"?i=Hm(t):(i={...t},er(!i.pathname||!i.pathname.includes("?"),nE("?","pathname","search",i)),er(!i.pathname||!i.pathname.includes("#"),nE("#","pathname","hash",i)),er(!i.search||!i.search.includes("#"),nE("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=$ge(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Kc=t=>t.join("/").replace(/\/\/+/g,"/"),qge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Kge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var SY=["POST","PUT","PATCH","DELETE"];new Set(SY);var zge=["GET",...SY];new Set(zge);var $m=u.createContext(null);$m.displayName="DataRouter";var H9=u.createContext(null);H9.displayName="DataRouterState";var wY=u.createContext({isTransitioning:!1});wY.displayName="ViewTransition";var Wge=u.createContext(new Map);Wge.displayName="Fetchers";var Yge=u.createContext(null);Yge.displayName="Await";var zl=u.createContext(null);zl.displayName="Navigation";var Vm=u.createContext(null);Vm.displayName="Location";var gu=u.createContext({outlet:null,matches:[],isDataRoute:!1});gu.displayName="Route";var Rx=u.createContext(null);Rx.displayName="RouteError";function kY(t,{relative:e}={}){er(e4(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=u.useContext(zl),{hash:i,pathname:s,search:a}=t4(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Kc([n,s])),r.createHref({pathname:o,search:a,hash:i})}function e4(){return u.useContext(Vm)!=null}function Gi(){return er(e4(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(Vm).location}function Jge(){return u.useContext(Vm).navigationType}var TY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RY(t){u.useContext(zl).static||u.useLayoutEffect(t)}function Wl(){let{isDataRoute:t}=u.useContext(gu);return t?u4e():Qge()}function Qge(){er(e4(),"useNavigate() may be used only in the context of a <Router> component.");let t=u.useContext($m),{basename:e,navigator:n}=u.useContext(zl),{matches:r}=u.useContext(gu),{pathname:i}=Gi(),s=JSON.stringify(bY(r)),a=u.useRef(!1);return RY(()=>{a.current=!0}),u.useCallback((l,c={})=>{if(Hl(a.current,TY),!a.current)return;if(typeof l=="number"){n.go(l);return}let d=EY(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kc([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}u.createContext(null);function t4(t,{relative:e}={}){let{matches:n}=u.useContext(gu),{pathname:r}=Gi(),i=JSON.stringify(bY(n));return u.useMemo(()=>EY(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Xge(t,e){return IY(t,e)}function IY(t,e,n,r){var S;er(e4(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=u.useContext(zl),{matches:a}=u.useContext(gu),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let R=f&&f.path||"";xY(c,!f||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let p=Gi(),g;if(e){let R=typeof e=="string"?Hm(e):e;er(d==="/"||((S=R.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${R.pathname}" was given in the \`location\` prop.`),g=R}else g=p;let y=g.pathname||"/",v=y;if(d!=="/"){let R=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(R.length).join("/")}let b=!s&&n&&n.matches&&n.matches.length>0?n.matches:Tx(t,{pathname:v});Hl(f||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Hl(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=i4e(b&&b.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Kc([d,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?d:Kc([d,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,r);return e&&C?u.createElement(Vm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function e4e(){let t=c4e(),e=Zge(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=u.createElement(u.Fragment,null,u.createElement("p",null,"💿 Hey developer 👋"),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:s},"ErrorBoundary")," or"," ",u.createElement("code",{style:s},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},e),n?u.createElement("pre",{style:i},n):null,a)}var t4e=u.createElement(e4e,null),n4e=class extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?u.createElement(gu.Provider,{value:this.props.routeContext},u.createElement(Rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function r4e({routeContext:t,match:e,children:n}){let r=u.useContext($m);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),u.createElement(gu.Provider,{value:t},n)}function i4e(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);er(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:d,errors:f}=n,p=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,c,d)=>{let f,p=!1,g=null,y=null;n&&(f=s&&c.route.id?s[c.route.id]:void 0,g=c.route.errorElement||t4e,a&&(o<0&&d===0?(xY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):o===d&&(p=!0,y=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,d+1)),b=()=>{let C;return f?C=g:p?C=y:c.route.Component?C=u.createElement(c.route.Component,null):c.route.element?C=c.route.element:C=l,u.createElement(r4e,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:C})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?u.createElement(n4e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function Ix(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s4e(t){let e=u.useContext($m);return er(e,Ix(t)),e}function a4e(t){let e=u.useContext(H9);return er(e,Ix(t)),e}function o4e(t){let e=u.useContext(gu);return er(e,Ix(t)),e}function xx(t){let e=o4e(t),n=e.matches[e.matches.length-1];return er(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function l4e(){return xx("useRouteId")}function c4e(){var r;let t=u.useContext(Rx),e=a4e("useRouteError"),n=xx("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function u4e(){let{router:t}=s4e("useNavigate"),e=xx("useNavigate"),n=u.useRef(!1);return RY(()=>{n.current=!0}),u.useCallback(async(i,s={})=>{Hl(n.current,TY),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var uj={};function xY(t,e,n){!e&&!uj[t]&&(uj[t]=!0,Hl(!1,n))}u.memo(d4e);function d4e({routes:t,future:e,state:n}){return IY(t,void 0,n,e)}function MY(t){er(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h4e({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){er(!e4(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=u.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Hm(n));let{pathname:l="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=u.useMemo(()=>{let y=jd(l,a);return y==null?null:{location:{pathname:y,search:c,hash:d,state:f,key:p},navigationType:r}},[a,l,c,d,f,p,r]);return Hl(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:u.createElement(zl.Provider,{value:o},u.createElement(Vm.Provider,{children:e,value:g}))}function f4e({children:t,location:e}){return Xge(t5(t),e)}function t5(t,e=[]){let n=[];return u.Children.forEach(t,(r,i)=>{if(!u.isValidElement(r))return;let s=[...e,i];if(r.type===u.Fragment){n.push.apply(n,t5(r.props.children,s));return}er(r.type===MY,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),er(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=t5(r.props.children,s)),n.push(a)}),n}var V7="get",B7="application/x-www-form-urlencoded";function $9(t){return t!=null&&typeof t.tagName=="string"}function m4e(t){return $9(t)&&t.tagName.toLowerCase()==="button"}function p4e(t){return $9(t)&&t.tagName.toLowerCase()==="form"}function g4e(t){return $9(t)&&t.tagName.toLowerCase()==="input"}function v4e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function y4e(t,e){return t.button===0&&(!e||e==="_self")&&!v4e(t)}var dv=null;function _4e(){if(dv===null)try{new FormData(document.createElement("form"),0),dv=!1}catch{dv=!0}return dv}var C4e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rE(t){return t!=null&&!C4e.has(t)?(Hl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${B7}"`),null):t}function b4e(t,e){let n,r,i,s,a;if(p4e(t)){let o=t.getAttribute("action");r=o?jd(o,e):null,n=t.getAttribute("method")||V7,i=rE(t.getAttribute("enctype"))||B7,s=new FormData(t)}else if(m4e(t)||g4e(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?jd(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||V7,i=rE(t.getAttribute("formenctype"))||rE(o.getAttribute("enctype"))||B7,s=new FormData(o,t),!_4e()){let{name:c,type:d,value:f}=t;if(d==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,f)}}else{if($9(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=V7,r=null,i=B7,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function Mx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function E4e(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S4e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function w4e(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await E4e(s,n);return a.links?a.links():[]}return[]}));return I4e(r.flat(1).filter(S4e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dj(t,e,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function k4e(t,e,{includeHydrateFallback:n}={}){return T4e(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function T4e(t){return[...new Set(t)]}function R4e(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function I4e(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(R4e(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function x4e(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function M4e(){let t=u.useContext($m);return Mx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function P4e(){let t=u.useContext(H9);return Mx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Px=u.createContext(void 0);Px.displayName="FrameworkContext";function PY(){let t=u.useContext(Px);return Mx(t,"You must render this element inside a <HydratedRouter> element"),t}function L4e(t,e){let n=u.useContext(Px),[r,i]=u.useState(!1),[s,a]=u.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,p=u.useRef(null);u.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let v=C=>{C.forEach(S=>{a(S.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),u.useEffect(()=>{if(r){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[r]);let g=()=>{i(!0)},y=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:E3(o,g),onBlur:E3(l,y),onMouseEnter:E3(c,g),onMouseLeave:E3(d,y),onTouchStart:E3(f,g)}]:[!1,p,{}]}function E3(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function O4e({page:t,...e}){let{router:n}=M4e(),r=u.useMemo(()=>Tx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?u.createElement(N4e,{page:t,matches:r,...e}):null}function A4e(t){let{manifest:e,routeModules:n}=PY(),[r,i]=u.useState([]);return u.useEffect(()=>{let s=!1;return w4e(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function N4e({page:t,matches:e,...n}){let r=Gi(),{manifest:i,routeModules:s}=PY(),{loaderData:a,matches:o}=P4e(),l=u.useMemo(()=>dj(t,e,o,i,r,"data"),[t,e,o,i,r]),c=u.useMemo(()=>dj(t,e,o,i,r,"assets"),[t,e,o,i,r]),d=u.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,y=!1;if(e.forEach(b=>{var S;let C=i.routes[b.route.id];!C||!C.hasLoader||(!l.some(R=>R.route.id===b.route.id)&&b.route.id in a&&((S=s[b.route.id])!=null&&S.shouldRevalidate)||C.hasClientLoader?y=!0:g.add(b.route.id))}),g.size===0)return[];let v=x4e(t);return y&&g.size>0&&v.searchParams.set("_routes",e.filter(b=>g.has(b.route.id)).map(b=>b.route.id).join(",")),[v.pathname+v.search]},[a,r,i,l,e,t,s]),f=u.useMemo(()=>k4e(c,i),[c,i]),p=A4e(c);return u.createElement(u.Fragment,null,d.map(g=>u.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>u.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:y})=>u.createElement("link",{key:g,...y})))}function D4e(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var LY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LY&&(window.__reactRouterVersion="7.2.0")}catch{}function U4e({basename:t,children:e,window:n}){let r=u.useRef();r.current==null&&(r.current=kge({window:n,v5Compat:!0}));let i=r.current,[s,a]=u.useState({action:i.action,location:i.location}),o=u.useCallback(l=>{u.startTransition(()=>a(l))},[a]);return u.useLayoutEffect(()=>i.listen(o),[i,o]),u.createElement(h4e,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var OY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V9=u.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:f,...p},g){let{basename:y}=u.useContext(zl),v=typeof c=="string"&&OY.test(c),b,C=!1;if(typeof c=="string"&&v&&(b=c,LY))try{let N=new URL(window.location.href),D=c.startsWith("//")?new URL(N.protocol+c):new URL(c),U=jd(D.pathname,y);D.origin===N.origin&&U!=null?c=U+D.search+D.hash:C=!0}catch{Hl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=kY(c,{relative:i}),[R,w,I]=L4e(r,p),k=NY(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:f});function x(N){e&&e(N),N.defaultPrevented||k(N)}let L=u.createElement("a",{...p,...I,href:b||S,onClick:C||s?e:x,ref:D4e(g,w),target:l,"data-discover":!v&&n==="render"?"true":void 0});return R&&!v?u.createElement(u.Fragment,null,L,u.createElement(O4e,{page:S})):L});V9.displayName="Link";var F4e=u.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},d){let f=t4(a,{relative:c.relative}),p=Gi(),g=u.useContext(H9),{navigator:y,basename:v}=u.useContext(zl),b=g!=null&&G4e(f)&&o===!0,C=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=p.pathname,R=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&v&&(R=jd(R,v)||R);const w=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let I=S===C||!i&&S.startsWith(C)&&S.charAt(w)==="/",k=R!=null&&(R===C||!i&&R.startsWith(C)&&R.charAt(C.length)==="/"),x={isActive:I,isPending:k,isTransitioning:b},L=I?e:void 0,N;typeof r=="function"?N=r(x):N=[r,I?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(x):s;return u.createElement(V9,{...c,"aria-current":L,className:N,ref:d,style:D,to:a,viewTransition:o},typeof l=="function"?l(x):l)});F4e.displayName="NavLink";var j4e=u.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=V7,action:o,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:f,...p},g)=>{let y=B4e(),v=q4e(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",C=typeof o=="string"&&OY.test(o),S=R=>{if(l&&l(R),R.defaultPrevented)return;R.preventDefault();let w=R.nativeEvent.submitter,I=(w==null?void 0:w.getAttribute("formmethod"))||a;y(w||R.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:f})};return u.createElement("form",{ref:g,method:b,action:v,onSubmit:r?l:S,...p,"data-discover":!C&&t==="render"?"true":void 0})});j4e.displayName="Form";function H4e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AY(t){let e=u.useContext($m);return er(e,H4e(t)),e}function NY(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=Wl(),l=Gi(),c=t4(t,{relative:s});return u.useCallback(d=>{if(y4e(d,e)){d.preventDefault();let f=n!==void 0?n:ag(l)===ag(c);o(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,e,t,i,s,a])}var $4e=0,V4e=()=>`__${String(++$4e)}__`;function B4e(){let{router:t}=AY("useSubmit"),{basename:e}=u.useContext(zl),n=l4e();return u.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=b4e(r,e);if(i.navigate===!1){let d=i.fetcherKey||V4e();await t.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function q4e(t,{relative:e}={}){let{basename:n}=u.useContext(zl),r=u.useContext(gu);er(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...t4(t||".",{relative:e})},a=Gi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Kc([n,s.pathname])),ag(s)}function G4e(t,e={}){let n=u.useContext(wY);er(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AY("useViewTransitionState"),i=t4(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=jd(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=jd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return e5(i.pathname,a)!=null||e5(i.pathname,s)!=null}new TextEncoder;var Bm=xz();const DY=zo(Bm),bt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,uh="8.55.0",Yt=globalThis;function B9(t,e,n){const r=n||Yt,i=r.__SENTRY__=r.__SENTRY__||{},s=i[uh]=i[uh]||{};return s[t]||(s[t]=e())}const r1=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,K4e="Sentry Logger ",Qk=["debug","info","warn","error","log","assert","trace"],n5={};function $h(t){if(!("console"in Yt))return t();const e=Yt.console,n={},r=Object.keys(n5);r.forEach(i=>{const s=n5[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function Z4e(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return r1?Qk.forEach(n=>{e[n]=(...r)=>{t&&$h(()=>{Yt.console[n](`${K4e}[${n}]:`,...r)})}}):Qk.forEach(n=>{e[n]=()=>{}}),e}const Ae=B9("logger",Z4e),UY=50,Sh="?",hj=/\(error: (.*)\)/,fj=/captureMessage|captureException/;function FY(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],a=n.split(`
`);for(let o=r;o<a.length;o++){const l=a[o];if(l.length>1024)continue;const c=hj.test(l)?l.replace(hj,"$1"):l;if(!c.match(/\S*Error: /)){for(const d of e){const f=d(c);if(f){s.push(f);break}}if(s.length>=UY+i)break}}return W4e(s.slice(i))}}function z4e(t){return Array.isArray(t)?FY(...t):t}function W4e(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(hv(e).function||"")&&e.pop(),e.reverse(),fj.test(hv(e).function||"")&&(e.pop(),fj.test(hv(e).function||"")&&e.pop()),e.slice(0,UY).map(n=>({...n,filename:n.filename||hv(e).filename,function:n.function||Sh}))}function hv(t){return t[t.length-1]||{}}const iE="<anonymous>";function au(t){try{return!t||typeof t!="function"?iE:t.name||iE}catch{return iE}}function mj(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const q7={},pj={};function i1(t,e){q7[t]=q7[t]||[],q7[t].push(e)}function s1(t,e){if(!pj[t]){pj[t]=!0;try{e()}catch(n){r1&&Ae.error(`Error while instrumenting ${t}`,n)}}}function qa(t,e){const n=t&&q7[t];if(n)for(const r of n)try{r(e)}catch(i){r1&&Ae.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${au(r)}
Error:`,i)}}let sE=null;function jY(t){const e="error";i1(e,t),s1(e,Y4e)}function Y4e(){sE=Yt.onerror,Yt.onerror=function(t,e,n,r,i){return qa("error",{column:r,error:i,line:n,msg:t,url:e}),sE?sE.apply(this,arguments):!1},Yt.onerror.__SENTRY_INSTRUMENTED__=!0}let aE=null;function HY(t){const e="unhandledrejection";i1(e,t),s1(e,J4e)}function J4e(){aE=Yt.onunhandledrejection,Yt.onunhandledrejection=function(t){return qa("unhandledrejection",t),aE?aE.apply(this,arguments):!0},Yt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Vh(){return Lx(Yt),Yt}function Lx(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||uh,e[uh]=e[uh]||{}}const $Y=Object.prototype.toString;function q9(t){switch($Y.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ou(t,Error)}}function qm(t,e){return $Y.call(t)===`[object ${e}]`}function VY(t){return qm(t,"ErrorEvent")}function gj(t){return qm(t,"DOMError")}function Q4e(t){return qm(t,"DOMException")}function Zc(t){return qm(t,"String")}function Ox(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Ax(t){return t===null||Ox(t)||typeof t!="object"&&typeof t!="function"}function cm(t){return qm(t,"Object")}function G9(t){return typeof Event<"u"&&ou(t,Event)}function X4e(t){return typeof Element<"u"&&ou(t,Element)}function e8e(t){return qm(t,"RegExp")}function K9(t){return!!(t&&t.then&&typeof t.then=="function")}function t8e(t){return cm(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function ou(t,e){try{return t instanceof e}catch{return!1}}function BY(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}const O2=Yt,n8e=80;function wh(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,a=0;const o=" > ",l=o.length;let c;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||n8e;for(;n&&s++<r&&(c=r8e(n,d),!(c==="html"||s>1&&a+i.length*l+c.length>=f));)i.push(c),a+=c.length,n=n.parentNode;return i.reverse().join(o)}catch{return"<unknown>"}}function r8e(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(O2.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&Zc(a)){const o=a.split(/\s+/);for(const l of o)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const o=n.getAttribute(a);o&&r.push(`[${a}="${o}"]`)}return r.join("")}function i8e(){try{return O2.document.location.href}catch{return""}}function s8e(t){return O2.document&&O2.document.querySelector?O2.document.querySelector(t):null}function qY(t){if(!O2.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function A2(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function vj(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{BY(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function a8e(t,e,n=!1){return Zc(t)?e8e(e)?e.test(t):Zc(e)?n?t===e:t.includes(e):!1:!1}function dh(t,e=[],n=!1){return e.some(r=>a8e(t,r,n))}function oa(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&GY(i,r);try{t[e]=i}catch{r1&&Ae.log(`Failed to replace method "${e}" in object`,t)}}function Ya(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{r1&&Ae.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function GY(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Ya(t,"__sentry_original__",e)}catch{}}function Nx(t){return t.__sentry_original__}function KY(t){if(q9(t))return{message:t.message,name:t.name,stack:t.stack,..._j(t)};if(G9(t)){const e={type:t.type,target:yj(t.target),currentTarget:yj(t.currentTarget),..._j(t)};return typeof CustomEvent<"u"&&ou(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function yj(t){try{return X4e(t)?wh(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function _j(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function o8e(t,e=40){const n=Object.keys(KY(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return A2(r,e);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>e))return i===n.length?s:A2(s,e)}return""}function Ti(t){return Xk(t,new Map)}function Xk(t,e){if(l8e(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))typeof t[i]<"u"&&(r[i]=Xk(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Xk(i,e))}),r}return t}function l8e(t){if(!cm(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const ZY=1e3;function n4(){return Date.now()/ZY}function c8e(){const{performance:t}=Yt;if(!t||!t.now)return n4;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/ZY}const is=c8e(),Fs=(()=>{const{performance:t}=Yt;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,a=t.timing&&t.timing.navigationStart,l=typeof a=="number"?Math.abs(a+n-r):e,c=l<e;return s||c?i<=l?t.timeOrigin:a:r})();function Ga(){const t=Yt,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function zY(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function od(t){const{message:e,event_id:n}=t;if(e)return e;const r=zY(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function eT(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function um(t,e){const n=zY(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};n.mechanism.data=s}}function Cj(t){if(u8e(t))return!0;try{Ya(t,"__sentry_captured__",!0)}catch{}return!1}function u8e(t){try{return t.__sentry_captured__}catch{}}var Ec;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Ec||(Ec={}));function kh(t){return new Pa(e=>{e(t)})}function r5(t){return new Pa((e,n)=>{n(t)})}class Pa{constructor(e){Pa.prototype.__init.call(this),Pa.prototype.__init2.call(this),Pa.prototype.__init3.call(this),Pa.prototype.__init4.call(this),this._state=Ec.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Pa((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(a){i(a)}},s=>{if(!n)i(s);else try{r(n(s))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Pa((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(Ec.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ec.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===Ec.PENDING){if(K9(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ec.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Ec.RESOLVED&&n[1](this._value),this._state===Ec.REJECTED&&n[2](this._value),n[0]=!0)})}}}function d8e(t){const e=is(),n={sid:Ga(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>f8e(n)};return t&&dm(n,t),n}function dm(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||is(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ga()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function h8e(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),dm(t,n)}function f8e(t){return Ti({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}function Hd(){return Ga()}function $d(){return Ga().substring(16)}function Z9(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Z9(r[i],e[i],n-1));return r}const tT="_sentrySpan";function og(t,e){e?Ya(t,tT,e):delete t[tT]}function i5(t){return t[tT]}const m8e=100;class Dx{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Hd(),spanId:$d()}}clone(){const e=new Dx;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,og(e,i5(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&dm(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof Vd?[n.getScopeData(),n.getRequestSession()]:cm(n)?[e,e.requestSession]:[],{tags:s,extra:a,user:o,contexts:l,level:c,fingerprint:d=[],propagationContext:f}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),d.length&&(this._fingerprint=d),f&&(this._propagationContext=f),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,og(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Hd()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:m8e;if(r<=0)return this;const i={timestamp:n4(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:i5(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Z9(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:$d(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:Ga();if(!this._client)return Ae.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:Ga();if(!this._client)return Ae.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Ga();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(Ae.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Vd=Dx;function p8e(){return B9("defaultCurrentScope",()=>new Vd)}function g8e(){return B9("defaultIsolationScope",()=>new Vd)}class v8e{constructor(e,n){let r;e?r=e:r=new Vd;let i;n?i=n:i=new Vd,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return K9(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function hm(){const t=Vh(),e=Lx(t);return e.stack=e.stack||new v8e(p8e(),g8e())}function y8e(t){return hm().withScope(t)}function _8e(t,e){const n=hm();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function bj(t){return hm().withScope(()=>t(hm().getIsolationScope()))}function C8e(){return{withIsolationScope:bj,withScope:y8e,withSetScope:_8e,withSetIsolationScope:(t,e)=>bj(e),getCurrentScope:()=>hm().getScope(),getIsolationScope:()=>hm().getIsolationScope()}}function Gm(t){const e=Lx(t);return e.acs?e.acs:C8e()}function Cn(){const t=Vh();return Gm(t).getCurrentScope()}function Yl(){const t=Vh();return Gm(t).getIsolationScope()}function b8e(){return B9("globalScope",()=>new Vd)}function z9(...t){const e=Vh(),n=Gm(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function tn(){return Cn().getClient()}function E8e(t){const e=t.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=e;return Ti({trace_id:n,span_id:r,parent_span_id:i})}const S8e="_sentryMetrics";function nT(t){const e=t[S8e];if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(Ti(i));return n}const ja="sentry.source",WY="sentry.sample_rate",lu="sentry.op",Or="sentry.origin",rT="sentry.idle_span_finish_reason",W9="sentry.measurement_unit",Y9="sentry.measurement_value",Ej="sentry.custom_span_name",w8e="sentry.profile_id",Ux="sentry.exclusive_time",k8e=0,YY=1,ni=2;function T8e(t){if(t<400&&t>=100)return{code:YY};if(t>=400&&t<500)switch(t){case 401:return{code:ni,message:"unauthenticated"};case 403:return{code:ni,message:"permission_denied"};case 404:return{code:ni,message:"not_found"};case 409:return{code:ni,message:"already_exists"};case 413:return{code:ni,message:"failed_precondition"};case 429:return{code:ni,message:"resource_exhausted"};case 499:return{code:ni,message:"cancelled"};default:return{code:ni,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:ni,message:"unimplemented"};case 503:return{code:ni,message:"unavailable"};case 504:return{code:ni,message:"deadline_exceeded"};default:return{code:ni,message:"internal_error"}}return{code:ni,message:"unknown_error"}}function JY(t,e){t.setAttribute("http.response.status_code",e);const n=T8e(e);n.message!=="unknown_error"&&t.setStatus(n)}const Fx="sentry-",R8e=/^sentry-/,I8e=8192;function QY(t){const e=M8e(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(R8e)){const a=i.slice(Fx.length);r[a]=s}return r},{});if(Object.keys(n).length>0)return n}function x8e(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,i])=>(i&&(n[`${Fx}${r}`]=i),n),{});return P8e(e)}function M8e(t){if(!(!t||!Zc(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Sj(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):Sj(t)}function Sj(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function P8e(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,a=i===0?s:`${e},${s}`;return a.length>I8e?(r1&&Ae.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):a},"")}const XY=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function L8e(t){if(!t)return;const e=t.match(XY);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function O8e(t,e){const n=L8e(t),r=QY(e);if(!n||!n.traceId)return{traceId:Hd(),spanId:$d()};const{traceId:i,parentSpanId:s,parentSampled:a}=n,o=$d();return{traceId:i,parentSpanId:s,spanId:o,sampled:a,dsc:r||{}}}function eJ(t=Hd(),e=$d(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}const tJ=0,nJ=1;let wj=!1;function A8e(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:a,origin:o}=Xt(t);return Ti({parent_span_id:s,span_id:e,trace_id:n,data:r,op:i,status:a,origin:o})}function N8e(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:Xt(t).parent_span_id,s=r?$d():e;return Ti({parent_span_id:i,span_id:s,trace_id:n})}function D8e(t){const{traceId:e,spanId:n}=t.spanContext(),r=Bh(t);return eJ(e,n,r)}function hh(t){return typeof t=="number"?kj(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?kj(t.getTime()):is()}function kj(t){return t>9999999999?t/1e3:t}function Xt(t){if(F8e(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(U8e(t)){const{attributes:r,startTime:i,name:s,endTime:a,parentSpanId:o,status:l}=t;return Ti({span_id:e,trace_id:n,data:r,description:s,parent_span_id:o,start_timestamp:hh(i),timestamp:hh(a)||void 0,status:rJ(l),op:r[lu],origin:r[Or],_metrics_summary:nT(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function U8e(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function F8e(t){return typeof t.getSpanJSON=="function"}function Bh(t){const{traceFlags:e}=t.spanContext();return e===nJ}function rJ(t){if(!(!t||t.code===k8e))return t.code===YY?"ok":t.message||"unknown_error"}const fh="_sentryChildSpans",iT="_sentryRootSpan";function iJ(t,e){const n=t[iT]||t;Ya(e,iT,n),t[fh]?t[fh].add(e):Ya(t,fh,new Set([e]))}function j8e(t,e){t[fh]&&t[fh].delete(e)}function G7(t){const e=new Set;function n(r){if(!e.has(r)&&Bh(r)){e.add(r);const i=r[fh]?Array.from(r[fh]):[];for(const s of i)n(s)}}return n(t),Array.from(e)}function Ri(t){return t[iT]||t}function xi(){const t=Vh(),e=Gm(t);return e.getActiveSpan?e.getActiveSpan():i5(Cn())}function sJ(){wj||($h(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),wj=!0)}let Tj=!1;function H8e(){Tj||(Tj=!0,jY(sT),HY(sT))}function sT(){const t=xi(),e=t&&Ri(t);if(e){const n="internal_error";bt&&Ae.log(`[Tracing] Root span: ${n} -> Global error occurred`),e.setStatus({code:ni,message:n})}}sT.tag="sentry_tracingErrorCallback";const aJ="_sentryScope",oJ="_sentryIsolationScope";function $8e(t,e,n){t&&(Ya(t,oJ,n),Ya(t,aJ,e))}function Rj(t){return{scope:t[aJ],isolationScope:t[oJ]}}function Bd(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=tn(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class Km{constructor(e={}){this._traceId=e.traceId||Hd(),this._spanId=e.spanId||$d()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:tJ}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}const jx="production",lJ="_frozenDsc";function Ij(t,e){Ya(t,lJ,e)}function cJ(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Ti({environment:n.environment||jx,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function uJ(t,e){const n=e.getPropagationContext();return n.dsc||cJ(n.traceId,t)}function Zm(t){const e=tn();if(!e)return{};const n=Ri(t),r=n[lJ];if(r)return r;const i=n.spanContext().traceState,s=i&&i.get("sentry.dsc"),a=s&&QY(s);if(a)return a;const o=cJ(t.spanContext().traceId,e),l=Xt(n),c=l.data||{},d=c[WY];d!=null&&(o.sample_rate=`${d}`);const f=c[ja],p=l.description;return f!=="url"&&p&&(o.transaction=p),Bd()&&(o.sampled=String(Bh(n))),e.emit("createDsc",o,n),o}function V8e(t){if(!bt)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Xt(t),{spanId:i}=t.spanContext(),s=Bh(t),a=Ri(t),o=a===t,l=`[Tracing] Starting ${s?"sampled":"unsampled"} ${o?"root ":""}span`,c=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!o){const{op:d,description:f}=Xt(a);c.push(`root ID: ${a.spanContext().spanId}`),d&&c.push(`root op: ${d}`),f&&c.push(`root description: ${f}`)}Ae.log(`${l}
  ${c.join(`
  `)}`)}function B8e(t){if(!bt)return;const{description:e="< unknown name >",op:n="< unknown op >"}=Xt(t),{spanId:r}=t.spanContext(),s=Ri(t)===t,a=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${e}" with ID ${r}`;Ae.log(a)}function dJ(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(typeof e!="number"||isNaN(e)||e<0||e>1){bt&&Ae.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`);return}return e}function q8e(t,e){if(!Bd(t))return[!1];const n=Yl().getScopeData().sdkProcessingMetadata.normalizedRequest,r={...e,normalizedRequest:e.normalizedRequest||n};let i;typeof t.tracesSampler=="function"?i=t.tracesSampler(r):r.parentSampled!==void 0?i=r.parentSampled:typeof t.tracesSampleRate<"u"?i=t.tracesSampleRate:i=1;const s=dJ(i);return s===void 0?(bt&&Ae.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):s?Math.random()<s?[!0,s]:(bt&&Ae.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[!1,s]):(bt&&Ae.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s])}const G8e=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function K8e(t){return t==="http"||t==="https"}function zm(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:a,protocol:o,publicKey:l}=t;return`${o}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function Z8e(t){const e=G8e.exec(t);if(!e){$h(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",a="",o=""]=e.slice(1);let l="",c=o;const d=c.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),c=d.pop()),c){const f=c.match(/^\d+/);f&&(c=f[0])}return hJ({host:s,pass:i,path:l,projectId:c,port:a,protocol:n,publicKey:r})}function hJ(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function z8e(t){if(!r1)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(Ae.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?K8e(r)?e&&isNaN(parseInt(e,10))?(Ae.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(Ae.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Ae.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function fJ(t){const e=typeof t=="string"?Z8e(t):hJ(t);if(!(!e||!z8e(e)))return e}function W8e(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function Sc(t,e=100,n=1/0){try{return aT("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function mJ(t,e=3,n=100*1024){const r=Sc(t,e);return X8e(r)>n?mJ(t,e-1,n):r}function aT(t,e,n=1/0,r=1/0,i=W8e()){const[s,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=Y8e(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return o.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const g=c.toJSON();return aT("",g,l-1,r,i)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const p=KY(e);for(const g in p){if(!Object.prototype.hasOwnProperty.call(p,g))continue;if(f>=r){d[g]="[MaxProperties ~]";break}const y=p[g];d[g]=aT(g,y,l-1,r,i),f++}return a(e),d}function Y8e(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(BY(e))return"[VueViewModel]";if(t8e(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${au(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=J8e(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function J8e(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function Q8e(t){return~-encodeURI(t).split(/%..|./).length}function X8e(t){return Q8e(JSON.stringify(t))}function Wm(t,e=[]){return[t,e]}function eve(t,e){const[n,r]=t;return[n,[...r,e]]}function xj(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function oT(t){return Yt.__SENTRY__&&Yt.__SENTRY__.encodePolyfill?Yt.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function tve(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[oT(r),s]:r.push(typeof s=="string"?oT(s):s)}for(const s of n){const[a,o]=s;if(i(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)i(o);else{let l;try{l=JSON.stringify(o)}catch{l=JSON.stringify(Sc(o))}i(l)}}return typeof r=="string"?r:nve(r)}function nve(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function rve(t){return[{type:"span"},t]}function ive(t){const e=typeof t.data=="string"?oT(t.data):t.data;return[Ti({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const sve={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function Mj(t){return sve[t]}function pJ(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function ave(t,e,n,r){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:zm(r)},...i&&{trace:Ti({...i})}}}function ove(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function lve(t,e,n,r){const i=pJ(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:zm(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Wm(s,[a])}function cve(t,e,n,r){const i=pJ(n),s=t.type&&t.type!=="replay_event"?t.type:"event";ove(t,n&&n.sdk);const a=ave(t,i,r,e);return delete t.sdkProcessingMetadata,Wm(a,[[{type:s},t]])}function uve(t,e){function n(d){return!!d.trace_id&&!!d.public_key}const r=Zm(t[0]),i=e&&e.getDsn(),s=e&&e.getOptions().tunnel,a={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&i&&{dsn:zm(i)}},o=e&&e.getOptions().beforeSendSpan,l=o?d=>{const f=o(Xt(d));return f||sJ(),f}:d=>Xt(d),c=[];for(const d of t){const f=l(d);f&&c.push(rve(f))}return Wm(a,c)}function dve(t,e,n,r=xi()){const i=r&&Ri(r);i&&(bt&&Ae.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),i.addEvent(t,{[Y9]:e,[W9]:n}))}function Pj(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[W9],s=r[Y9];typeof i=="string"&&typeof s=="number"&&(e[n.name]={value:s,unit:i})}),e}const Lj=1e3;class Hx{constructor(e={}){this._traceId=e.traceId||Hd(),this._spanId=e.spanId||$d(),this._startTime=e.startTimestamp||is(),this._attributes={},this.setAttributes({[Or]:"manual",[lu]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?nJ:tJ}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=hh(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(ja,"custom"),this}end(e){this._endTime||(this._endTime=hh(e),B8e(this),this._onSpanEnded())}getSpanJSON(){return Ti({data:this._attributes,description:this._name,op:this._attributes[lu],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:rJ(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Or],_metrics_summary:nT(this),profile_id:this._attributes[w8e],exclusive_time:this._attributes[Ux],measurements:Pj(this._events),is_segment:this._isStandaloneSpan&&Ri(this)===this||void 0,segment_id:this._isStandaloneSpan?Ri(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){bt&&Ae.log("[Tracing] Adding an event to span:",e);const i=Oj(n)?n:r||is(),s=Oj(n)?{}:n||{},a={name:e,time:hh(i),attributes:s};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=tn();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ri(this)))return;if(this._isStandaloneSpan){this._sampled?fve(uve([this],e)):(bt&&Ae.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Rj(this).scope||Cn()).captureEvent(r)}_convertSpanToTransaction(){if(!Aj(Xt(this)))return;this._name||(bt&&Ae.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=Rj(this),i=(e||Cn()).getClient()||tn();if(this._sampled!==!0){bt&&Ae.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),i&&i.recordDroppedEvent("sample_rate","transaction");return}const a=G7(this).filter(f=>f!==this&&!hve(f)).map(f=>Xt(f)).filter(Aj),o=this._attributes[ja];delete this._attributes[Ej],a.forEach(f=>{f.data&&delete f.data[Ej]});const l={contexts:{trace:A8e(this)},spans:a.length>Lj?a.sort((f,p)=>f.start_timestamp-p.start_timestamp).slice(0,Lj):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,...Ti({dynamicSamplingContext:Zm(this)})},_metrics_summary:nT(this),...o&&{transaction_info:{source:o}}},c=Pj(this._events);return c&&Object.keys(c).length&&(bt&&Ae.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function Oj(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Aj(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function hve(t){return t instanceof Hx&&t.isStandaloneSpan()}function fve(t){const e=tn();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}const gJ="__SENTRY_SUPPRESS_TRACING__";function r4(t){const e=yJ();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=pve(t),{forceTransaction:r,parentSpan:i}=t;return(t.scope?a=>z9(t.scope,a):i!==void 0?a=>vJ(i,a):a=>a())(()=>{const a=Cn(),o=vve(a);return t.onlyIfParent&&!o?new Km:mve({parentSpan:o,spanArguments:n,forceTransaction:r,scope:a})})}function vJ(t,e){const n=yJ();return n.withActiveSpan?n.withActiveSpan(t,e):z9(r=>(og(r,t||void 0),e(r)))}function mve({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!Bd())return new Km;const i=Yl();let s;if(t&&!n)s=gve(t,r,e),iJ(t,s);else if(t){const a=Zm(t),{traceId:o,spanId:l}=t.spanContext(),c=Bh(t);s=Nj({traceId:o,parentSpanId:l,...e},r,c),Ij(s,a)}else{const{traceId:a,dsc:o,parentSpanId:l,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};s=Nj({traceId:a,parentSpanId:l,...e},r,c),o&&Ij(s,o)}return V8e(s),$8e(s,r,i),s}function pve(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=hh(t.startTime),delete r.startTime,r}return n}function yJ(){const t=Vh();return Gm(t)}function Nj(t,e,n){const r=tn(),i=r&&r.getOptions()||{},{name:s="",attributes:a}=t,[o,l]=e.getScopeData().sdkProcessingMetadata[gJ]?[!1]:q8e(i,{name:s,parentSampled:n,attributes:a,transactionContext:{name:s,parentSampled:n}}),c=new Hx({...t,attributes:{[ja]:"custom",...t.attributes},sampled:o});return l!==void 0&&c.setAttribute(WY,l),r&&r.emit("spanStart",c),c}function gve(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),s=e.getScopeData().sdkProcessingMetadata[gJ]?!1:Bh(t),a=s?new Hx({...n,parentSpanId:r,traceId:i,sampled:s}):new Km({traceId:i});iJ(t,a);const o=tn();return o&&(o.emit("spanStart",a),n.endTimestamp&&o.emit("spanEnd",a)),a}function vve(t){const e=i5(t);if(!e)return;const n=tn();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Ri(e):e}const K7={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},yve="heartbeatFailed",_ve="idleTimeout",Cve="finalTimeout",bve="externalFinish";function _J(t,e={}){const n=new Map;let r=!1,i,s=bve,a=!e.disableAutoFinish;const o=[],{idleTimeout:l=K7.idleTimeout,finalTimeout:c=K7.finalTimeout,childSpanTimeout:d=K7.childSpanTimeout,beforeSpanEnd:f}=e,p=tn();if(!p||!Bd())return new Km;const g=Cn(),y=xi(),v=Eve(t);v.end=new Proxy(v.end,{apply(k,x,L){f&&f(v);const[N,...D]=L,U=N||is(),j=hh(U),$=G7(v).filter(q=>q!==v);if(!$.length)return I(j),Reflect.apply(k,x,[j,...D]);const Z=$.map(q=>Xt(q).timestamp).filter(q=>!!q),V=Z.length?Math.max(...Z):void 0,z=Xt(v).start_timestamp,K=Math.min(z?z+c/1e3:1/0,Math.max(z||-1/0,Math.min(j,V||1/0)));return I(K),Reflect.apply(k,x,[K,...D])}});function b(){i&&(clearTimeout(i),i=void 0)}function C(k){b(),i=setTimeout(()=>{!r&&n.size===0&&a&&(s=_ve,v.end(k))},l)}function S(k){i=setTimeout(()=>{!r&&a&&(s=yve,v.end(k))},d)}function R(k){b(),n.set(k,!0);const x=is();S(x+d/1e3)}function w(k){if(n.has(k)&&n.delete(k),n.size===0){const x=is();C(x+l/1e3)}}function I(k){r=!0,n.clear(),o.forEach(j=>j()),og(g,y);const x=Xt(v),{start_timestamp:L}=x;if(!L)return;(x.data||{})[rT]||v.setAttribute(rT,s),Ae.log(`[Tracing] Idle span "${x.op}" finished`);const D=G7(v).filter(j=>j!==v);let U=0;D.forEach(j=>{j.isRecording()&&(j.setStatus({code:ni,message:"cancelled"}),j.end(k),bt&&Ae.log("[Tracing] Cancelling span since span ended early",JSON.stringify(j,void 0,2)));const $=Xt(j),{timestamp:Z=0,start_timestamp:V=0}=$,z=V<=k,K=(c+l)/1e3,q=Z-V<=K;if(bt){const G=JSON.stringify(j,void 0,2);z?q||Ae.log("[Tracing] Discarding span since it finished after idle span final timeout",G):Ae.log("[Tracing] Discarding span since it happened after idle span was finished",G)}(!q||!z)&&(j8e(v,j),U++)}),U>0&&v.setAttribute("sentry.idle_span_discarded_spans",U)}return o.push(p.on("spanStart",k=>{if(r||k===v||Xt(k).timestamp)return;G7(v).includes(k)&&R(k.spanContext().spanId)})),o.push(p.on("spanEnd",k=>{r||w(k.spanContext().spanId)})),o.push(p.on("idleSpanEnableAutoFinish",k=>{k===v&&(a=!0,C(),n.size&&S())})),e.disableAutoFinish||C(),setTimeout(()=>{r||(v.setStatus({code:ni,message:"deadline_exceeded"}),s=Cve,v.end())},c),v}function Eve(t){const e=r4(t);return og(Cn(),e),bt&&Ae.log("[Tracing] Started span is an idle span"),e}function lT(t,e,n,r=0){return new Pa((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const o=a({...e},n);bt&&a.id&&o===null&&Ae.log(`Event processor "${a.id}" dropped event`),K9(o)?o.then(l=>lT(t,l,n,r+1).then(i)).then(null,s):lT(t,o,n,r+1).then(i).then(null,s)}})}let fv,Dj,mv;function Sve(t){const e=Yt._sentryDebugIds;if(!e)return{};const n=Object.keys(e);return mv&&n.length===Dj||(Dj=n.length,mv=n.reduce((r,i)=>{fv||(fv={});const s=fv[i];if(s)r[s[0]]=s[1];else{const a=t(i);for(let o=a.length-1;o>=0;o--){const l=a[o],c=l&&l.filename,d=e[i];if(c&&d){r[c]=d,fv[i]=[c,d];break}}}return r},{})),mv}function wve(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;kve(t,e),r&&Ive(t,r),xve(t,n),Tve(t,i),Rve(t,s)}function Uj(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,sdkProcessingMetadata:o,breadcrumbs:l,fingerprint:c,eventProcessors:d,attachments:f,propagationContext:p,transactionName:g,span:y}=e;pv(t,"extra",n),pv(t,"tags",r),pv(t,"user",i),pv(t,"contexts",s),t.sdkProcessingMetadata=Z9(t.sdkProcessingMetadata,o,2),a&&(t.level=a),g&&(t.transactionName=g),y&&(t.span=y),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...p}}function pv(t,e,n){t[e]=Z9(t[e],n,1)}function kve(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:o}=e,l=Ti(n);l&&Object.keys(l).length&&(t.extra={...l,...t.extra});const c=Ti(r);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const d=Ti(i);d&&Object.keys(d).length&&(t.user={...d,...t.user});const f=Ti(s);f&&Object.keys(f).length&&(t.contexts={...f,...t.contexts}),a&&(t.level=a),o&&t.type!=="transaction"&&(t.transaction=o)}function Tve(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function Rve(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Ive(t,e){t.contexts={trace:N8e(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Zm(e),...t.sdkProcessingMetadata};const n=Ri(e),r=Xt(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function xve(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}function Mve(t,e,n,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=t,l={...e,event_id:e.event_id||n.event_id||Ga(),timestamp:e.timestamp||n4()},c=n.integrations||t.integrations.map(b=>b.name);Pve(l,t),Ave(l,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&Lve(l,t.stackParser);const d=Dve(r,n.captureContext);n.mechanism&&um(l,n.mechanism);const f=i?i.getEventProcessors():[],p=b8e().getScopeData();if(s){const b=s.getScopeData();Uj(p,b)}if(d){const b=d.getScopeData();Uj(p,b)}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),wve(l,p);const y=[...f,...p.eventProcessors];return lT(y,l,n).then(b=>(b&&Ove(b),typeof a=="number"&&a>0?Nve(b,a,o):b))}function Pve(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;t.environment=t.environment||n||jx,!t.release&&r&&(t.release=r),!t.dist&&i&&(t.dist=i),t.message&&(t.message=A2(t.message,s));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=A2(a.value,s));const o=t.request;o&&o.url&&(o.url=A2(o.url,s))}function Lve(t,e){const n=Sve(e);try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{n&&i.filename&&(i.debug_id=n[i.filename])})})}catch{}}function Ove(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function Ave(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Nve(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:Sc(i.data,e,n)}}))},...t.user&&{user:Sc(t.user,e,n)},...t.contexts&&{contexts:Sc(t.contexts,e,n)},...t.extra&&{extra:Sc(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Sc(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>({...i,...i.data&&{data:Sc(i.data,e,n)}}))),t.contexts&&t.contexts.flags&&r.contexts&&(r.contexts.flags=Sc(t.contexts.flags,3,n)),r}function Dve(t,e){if(!e)return t;const n=t?t.clone():new Vd;return n.update(e),n}function Uve(t){if(t)return Fve(t)?{captureContext:t}:Hve(t)?{captureContext:t}:t}function Fve(t){return t instanceof Vd||typeof t=="function"}const jve=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Hve(t){return Object.keys(t).some(e=>jve.includes(e))}function J9(t,e){return Cn().captureException(t,Uve(e))}function $ve(t,e){const r={captureContext:e};return Cn().captureMessage(t,void 0,r)}function CJ(t,e){return Cn().captureEvent(t,e)}function Vve(t,e){Yl().setContext(t,e)}function Bve(){return Yl().lastEventId()}function qve(){const t=tn();return!!t&&t.getOptions().enabled!==!1&&!!t.getTransport()}function Fj(t){const e=tn(),n=Yl(),r=Cn(),{release:i,environment:s=jx}=e&&e.getOptions()||{},{userAgent:a}=Yt.navigator||{},o=d8e({release:i,environment:s,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...t}),l=n.getSession();return l&&l.status==="ok"&&dm(l,{status:"exited"}),bJ(),n.setSession(o),r.setSession(o),o}function bJ(){const t=Yl(),e=Cn(),n=e.getSession()||t.getSession();n&&h8e(n),EJ(),t.setSession(),e.setSession()}function EJ(){const t=Yl(),e=Cn(),n=tn(),r=e.getSession()||t.getSession();r&&n&&n.captureSession(r)}function jj(t=!1){if(t){bJ();return}EJ()}const Gve="7";function SJ(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Kve(t){return`${SJ(t)}${t.projectId}/envelope/`}function Zve(t,e){const n={sentry_version:Gve};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function zve(t,e,n){return e||`${Kve(t)}?${Zve(t,n)}`}function Wve(t,e){const n=fJ(t);if(!n)return"";const r=`${SJ(n)}embed/error-page/`;let i=`dsn=${zm(n)}`;for(const s in e)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const a=e.user;if(!a)continue;a.name&&(i+=`&name=${encodeURIComponent(a.name)}`),a.email&&(i+=`&email=${encodeURIComponent(a.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`;return`${r}?${i}`}const Hj=[];function Yve(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function Jve(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(a=>{a.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const a=n(e);r=Array.isArray(a)?a:[a]}else r=e;const i=Yve(r),s=i.findIndex(a=>a.name==="Debug");if(s>-1){const[a]=i.splice(s,1);i.push(a)}return i}function Qve(t,e){const n={};return e.forEach(r=>{r&&wJ(t,r,n)}),n}function $j(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function wJ(t,e,n){if(n[e.name]){bt&&Ae.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,Hj.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Hj.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,a)=>r(s,a,t),{id:e.name});t.addEventProcessor(i)}bt&&Ae.log(`Integration installed: ${e.name}`)}function Xve(t,e,n){const r=[{type:"client_report"},{timestamp:n4(),discarded_events:t}];return Wm(e?{dsn:e}:{},[r])}class Lo extends Error{constructor(e,n="warn"){super(e),this.message=e,this.logLevel=n}}const Vj="Not capturing exception because it's already been captured.";class e7e{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=fJ(e.dsn):bt&&Ae.warn("No DSN provided, client will not send events."),this._dsn){const i=zve(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:i})}const r=["enableTracing","tracesSampleRate","tracesSampler"].find(i=>i in e&&e[i]==null);r&&$h(()=>{console.warn(`[Sentry] Deprecation warning: \`${r}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,n,r){const i=Ga();if(Cj(e))return bt&&Ae.log(Vj),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(a=>this._captureEvent(a,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:Ga(),...r},a=Ox(e)?e:String(e),o=Ax(e)?this.eventFromMessage(a,n,s):this.eventFromException(e,s);return this._process(o.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=Ga();if(n&&n.originalException&&Cj(n.originalException))return bt&&Ae.log(Vj),i;const s={event_id:i,...n},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,o||r)),s.event_id}captureSession(e){typeof e.release!="string"?bt&&Ae.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),dm(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):kh(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];wJ(this,e,this._integrations),n||$j(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=cve(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=eve(r,ive(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=lve(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;bt&&Ae.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(bt&&Ae.error("Error while sending envelope:",n),n)):(bt&&Ae.error("Transport disabled"),kh({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Qve(this,e),$j(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const l of s){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(dm(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Pa(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r=Cn(),i=Yl()){const s=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&a.length>0&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),Mve(s,e,n,r,this,i).then(o=>{if(o===null)return o;o.contexts={trace:E8e(r),...o.contexts};const l=uJ(this,r);return o.sdkProcessingMetadata={dynamicSamplingContext:l,...o.sdkProcessingMetadata},o})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{bt&&(i instanceof Lo&&i.logLevel==="log"?Ae.log(i.message):Ae.warn(i))})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,a=TJ(e),o=kJ(e),l=e.type||"error",c=`before send for type \`${l}\``,d=typeof s>"u"?void 0:dJ(s);if(o&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",e),r5(new Lo(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=l==="replay_event"?"replay":l,g=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,g).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",f,e),new Lo("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return y;const b=n7e(this,i,y,n);return t7e(b,c)}).then(y=>{if(y===null){if(this.recordDroppedEvent("before_send",f,e),a){const S=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw new Lo(`${c} returned \`null\`, will not send event.`,"log")}const v=r&&r.getSession();if(!a&&v&&this._updateSessionFromEvent(v,y),a){const C=y.sdkProcessingMetadata&&y.sdkProcessingMetadata.spanCountBeforeProcessing||0,S=y.spans?y.spans.length:0,R=C-S;R>0&&this.recordDroppedEvent("before_send","span",R)}const b=y.transaction_info;if(a&&b&&y.transaction!==e.transaction){const C="custom";y.transaction_info={...b,source:C}}return this.sendEvent(y,n),y}).then(null,y=>{throw y instanceof Lo?y:(this.captureException(y,{data:{__sentry__:!0},originalException:y}),new Lo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){bt&&Ae.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){bt&&Ae.log("No outcomes to send");return}if(!this._dsn){bt&&Ae.log("No dsn provided, will not send outcomes");return}bt&&Ae.log("Sending outcomes:",e);const n=Xve(e,this._options.tunnel&&zm(this._dsn));this.sendEnvelope(n)}}function t7e(t,e){const n=`${e} must return \`null\` or a valid event.`;if(K9(t))return t.then(r=>{if(!cm(r)&&r!==null)throw new Lo(n);return r},r=>{throw new Lo(`${e} rejected with ${r}`)});if(!cm(t)&&t!==null)throw new Lo(n);return t}function n7e(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:a}=e;if(kJ(n)&&i)return i(n,r);if(TJ(n)){if(n.spans&&a){const o=[];for(const l of n.spans){const c=a(l);c?o.push(c):(sJ(),t.recordDroppedEvent("before_send","span"))}n.spans=o}if(s){if(n.spans){const o=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:o}}return s(n,r)}}return n}function kJ(t){return t.type===void 0}function TJ(t){return t.type==="transaction"}function r7e(t,e){e.debug===!0&&(bt?Ae.enable():$h(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Cn().update(e.initialScope);const r=new t(e);return i7e(r),r.init(),r}function i7e(t){Cn().setClient(t)}function s7e(t){const e=[];function n(){return t===void 0||e.length<t}function r(a){return e.splice(e.indexOf(a),1)[0]||Promise.resolve(void 0)}function i(a){if(!n())return r5(new Lo("Not adding Promise because buffer limit was reached."));const o=a();return e.indexOf(o)===-1&&e.push(o),o.then(()=>r(o)).then(null,()=>r(o).then(null,()=>{})),o}function s(a){return new Pa((o,l)=>{let c=e.length;if(!c)return o(!0);const d=setTimeout(()=>{a&&a>0&&o(!1)},a);e.forEach(f=>{kh(f).then(()=>{--c||(clearTimeout(d),o(!0))},l)})})}return{$:e,add:i,drain:s}}const a7e=60*1e3;function o7e(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?a7e:r-e}function l7e(t,e){return t[e]||t.all||0}function c7e(t,e,n=Date.now()){return l7e(t,e)>n}function u7e(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(s)for(const o of s.trim().split(",")){const[l,c,,,d]=o.split(":",5),f=parseInt(l,10),p=(isNaN(f)?60:f)*1e3;if(!c)i.all=r+p;else for(const g of c.split(";"))g==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(i[g]=r+p):i[g]=r+p}else a?i.all=r+o7e(a,r):e===429&&(i.all=r+60*1e3);return i}const d7e=64;function h7e(t,e,n=s7e(t.bufferSize||d7e)){let r={};const i=a=>n.drain(a);function s(a){const o=[];if(xj(a,(f,p)=>{const g=Mj(p);if(c7e(r,g)){const y=Bj(f,p);t.recordDroppedEvent("ratelimit_backoff",g,y)}else o.push(f)}),o.length===0)return kh({});const l=Wm(a[0],o),c=f=>{xj(l,(p,g)=>{const y=Bj(p,g);t.recordDroppedEvent(f,Mj(g),y)})},d=()=>e({body:tve(l)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&bt&&Ae.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=u7e(r,f),f),f=>{throw c("network_error"),f});return n.add(d).then(f=>f,f=>{if(f instanceof Lo)return bt&&Ae.error("Skipped sending event because buffer is full."),c("queue_overflow"),kh({});throw f})}return{send:s,flush:i}}function Bj(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function RJ(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:uh})),version:uh}),t._metadata=i}function IJ(t={}){const e=tn();if(!qve()||!e)return{};const n=Vh(),r=Gm(n);if(r.getTraceData)return r.getTraceData(t);const i=Cn(),s=t.span||xi(),a=s?D8e(s):f7e(i),o=s?Zm(s):uJ(e,i),l=x8e(o);return XY.test(a)?{"sentry-trace":a,baggage:l}:(Ae.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function f7e(t){const{traceId:e,sampled:n,spanId:r}=t.getPropagationContext();return eJ(e,r,n)}const m7e=100;function Th(t,e){const n=tn(),r=Yl();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=m7e}=n.getOptions();if(s<=0)return;const o={timestamp:n4(),...t},l=i?$h(()=>i(o,e)):o;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,e),r.addBreadcrumb(l,s))}let qj;const p7e="FunctionToString",Gj=new WeakMap,g7e=()=>({name:p7e,setupOnce(){qj=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Nx(this),n=Gj.has(tn())&&e!==void 0?e:this;return qj.apply(n,t)}}catch{}},setup(t){Gj.set(t,!0)}}),v7e=g7e,y7e=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],_7e="InboundFilters",C7e=(t={})=>({name:_7e,processEvent(e,n,r){const i=r.getOptions(),s=E7e(t,i);return S7e(e,s)?null:e}}),b7e=C7e;function E7e(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:y7e],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function S7e(t,e){return e.ignoreInternal&&x7e(t)?(bt&&Ae.warn(`Event dropped due to being internal Sentry Error.
Event: ${od(t)}`),!0):w7e(t,e.ignoreErrors)?(bt&&Ae.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${od(t)}`),!0):P7e(t)?(bt&&Ae.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${od(t)}`),!0):k7e(t,e.ignoreTransactions)?(bt&&Ae.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${od(t)}`),!0):T7e(t,e.denyUrls)?(bt&&Ae.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${od(t)}.
Url: ${s5(t)}`),!0):R7e(t,e.allowUrls)?!1:(bt&&Ae.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${od(t)}.
Url: ${s5(t)}`),!0)}function w7e(t,e){return t.type||!e||!e.length?!1:I7e(t).some(n=>dh(n,e))}function k7e(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?dh(n,e):!1}function T7e(t,e){if(!e||!e.length)return!1;const n=s5(t);return n?dh(n,e):!1}function R7e(t,e){if(!e||!e.length)return!0;const n=s5(t);return n?dh(n,e):!0}function I7e(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),e}function x7e(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function M7e(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function s5(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?M7e(e):null}catch{return bt&&Ae.error(`Cannot extract url for event ${od(t)}`),null}}function P7e(t){return t.type||!t.exception||!t.exception.values||t.exception.values.length===0?!1:!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}function L7e(t,e,n=250,r,i,s,a){if(!s.exception||!s.exception.values||!a||!ou(a.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=O7e(cT(t,e,i,a.originalException,r,s.exception.values,o,0),n))}function cT(t,e,n,r,i,s,a,o){if(s.length>=n+1)return s;let l=[...s];if(ou(r[i],Error)){Kj(a,o);const c=t(e,r[i]),d=l.length;Zj(c,i,d,o),l=cT(t,e,n,r[i],i,[c,...l],c,d)}return Array.isArray(r.errors)&&r.errors.forEach((c,d)=>{if(ou(c,Error)){Kj(a,o);const f=t(e,c),p=l.length;Zj(f,`errors[${d}]`,p,o),l=cT(t,e,n,c,i,[f,...l],f,p)}}),l}function Kj(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Zj(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function O7e(t,e){return t.map(n=>(n.value&&(n.value=A2(n.value,e)),n))}function mh(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function zj(t){return t.split(/\\?\//).filter(e=>e.length>0&&e!==",").length}function A7e(t){const e="console";i1(e,t),s1(e,N7e)}function N7e(){"console"in Yt&&Qk.forEach(function(t){t in Yt.console&&oa(Yt.console,t,function(e){return n5[t]=e,function(...n){qa("console",{args:n,level:t});const i=n5[t];i&&i.apply(Yt.console,n)}})})}function D7e(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const U7e="Dedupe",F7e=()=>{let t;return{name:U7e,processEvent(e){if(e.type)return e;try{if(H7e(e,t))return bt&&Ae.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},j7e=F7e;function H7e(t,e){return e?!!($7e(t,e)||V7e(t,e)):!1}function $7e(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!MJ(t,e)||!xJ(t,e))}function V7e(t,e){const n=Wj(e),r=Wj(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!MJ(t,e)||!xJ(t,e))}function xJ(t,e){let n=mj(t),r=mj(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function MJ(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Wj(t){return t.exception&&t.exception.values&&t.exception.values[0]}function B7e(t,e,n,r,i="auto.http.browser"){if(!t.fetchData)return;const s=Bd()&&e(t.fetchData.url);if(t.endTimestamp&&s){const p=t.fetchData.__span;if(!p)return;const g=r[p];g&&(K7e(g,t),delete r[p]);return}const{method:a,url:o}=t.fetchData,l=G7e(o),c=l?mh(l).host:void 0,d=!!xi(),f=s&&d?r4({name:`${a} ${o}`,attributes:{url:o,type:"fetch","http.method":a,"http.url":l,"server.address":c,[Or]:i,[lu]:"http.client"}}):new Km;if(t.fetchData.__span=f.spanContext().spanId,r[f.spanContext().spanId]=f,n(t.fetchData.url)){const p=t.args[0],g=t.args[1]||{},y=q7e(p,g,Bd()&&d?f:void 0);y&&(t.args[1]=g,g.headers=y)}return f}function q7e(t,e,n){const r=IJ({span:n}),i=r["sentry-trace"],s=r.baggage;if(!i)return;const a=e.headers||(Z7e(t)?t.headers:void 0);if(a)if(z7e(a)){const o=new Headers(a);if(o.set("sentry-trace",i),s){const l=o.get("baggage");if(l){const c=gv(l);o.set("baggage",c?`${c},${s}`:s)}else o.set("baggage",s)}return o}else if(Array.isArray(a)){const o=[...a.filter(l=>!(Array.isArray(l)&&l[0]==="sentry-trace")).map(l=>{if(Array.isArray(l)&&l[0]==="baggage"&&typeof l[1]=="string"){const[c,d,...f]=l;return[c,gv(d),...f]}else return l}),["sentry-trace",i]];return s&&o.push(["baggage",s]),o}else{const o="baggage"in a?a.baggage:void 0;let l=[];return Array.isArray(o)?l=o.map(c=>typeof c=="string"?gv(c):c).filter(c=>c===""):o&&l.push(gv(o)),s&&l.push(s),{...a,"sentry-trace":i,baggage:l.length>0?l.join(","):void 0}}else return{...r}}function G7e(t){try{return new URL(t).href}catch{return}}function K7e(t,e){if(e.response){JY(t,e.response.status);const n=e.response&&e.response.headers&&e.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&t.setAttribute("http.response_content_length",r)}}else e.error&&t.setStatus({code:ni,message:"internal_error"});t.end()}function gv(t){return t.split(",").filter(e=>!e.split("=")[0].startsWith(Fx)).join(",")}function Z7e(t){return typeof Request<"u"&&ou(t,Request)}function z7e(t){return typeof Headers<"u"&&ou(t,Headers)}function PJ(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const uT=Yt;function LJ(){if(!("fetch"in uT))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function dT(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function W7e(){if(typeof EdgeRuntime=="string")return!0;if(!LJ())return!1;if(dT(uT.fetch))return!0;let t=!1;const e=uT.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=dT(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){r1&&Ae.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function OJ(t,e){const n="fetch";i1(n,t),s1(n,()=>AJ(void 0,e))}function Y7e(t){const e="fetch-body-resolved";i1(e,t),s1(e,()=>AJ(Q7e))}function AJ(t,e=!1){e&&!W7e()||oa(Yt,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:a}=X7e(r),o={args:r,fetchData:{method:s,url:a},startTimestamp:is()*1e3,virtualError:i};return t||qa("fetch",{...o}),n.apply(Yt,r).then(async l=>(t?t(l):qa("fetch",{...o,endTimestamp:is()*1e3,response:l}),l),l=>{throw qa("fetch",{...o,endTimestamp:is()*1e3,error:l}),q9(l)&&l.stack===void 0&&(l.stack=i.stack,Ya(l,"framesToPop",1)),l})}})}async function J7e(t,e){if(t&&t.body){const n=t.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let s=!0;for(;s;){let a;try{a=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:o}=await r.read();clearTimeout(a),o&&(e(),s=!1)}catch{s=!1}finally{clearTimeout(a)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}function Q7e(t){let e;try{e=t.clone()}catch{return}J7e(e,()=>{qa("fetch-body-resolved",{endTimestamp:is()*1e3,response:t})})}function hT(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Yj(t){return typeof t=="string"?t:t?hT(t,"url")?t.url:t.toString?t.toString():"":""}function X7e(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Yj(n),method:hT(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:Yj(e),method:hT(e,"method")?String(e.method).toUpperCase():"GET"}}function e6e(){return"npm"}const vv=Yt;function t6e(){const t=vv.chrome,e=t&&t.app&&t.app.runtime,n="history"in vv&&!!vv.history.pushState&&!!vv.history.replaceState;return!e&&n}const ot=Yt;let fT=0;function NJ(){return fT>0}function n6e(){fT++,setTimeout(()=>{fT--})}function fm(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Nx(t))return t}catch{return t}const r=function(...i){try{const s=i.map(a=>fm(a,e));return t.apply(this,s)}catch(s){throw n6e(),z9(a=>{a.addEventProcessor(o=>(e.mechanism&&(eT(o,void 0),um(o,e.mechanism)),o.extra={...o.extra,arguments:i},o)),J9(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}GY(r,t),Ya(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const la=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function $x(t,e){const n=Vx(t,e),r={type:o6e(e),value:l6e(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function r6e(t,e,n,r){const i=tn(),s=i&&i.getOptions().normalizeDepth,a=f6e(e),o={__serialized__:mJ(e,s)};if(a)return{exception:{values:[$x(t,a)]},extra:o};const l={exception:{values:[{type:G9(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:d6e(e,{isUnhandledRejection:r})}]},extra:o};if(n){const c=Vx(t,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function oE(t,e){return{exception:{values:[$x(t,e)]}}}function Vx(t,e){const n=e.stacktrace||e.stack||"",r=s6e(e),i=a6e(e);try{return t(n,r,i)}catch{}return[]}const i6e=/Minified React error #\d+;/i;function s6e(t){return t&&i6e.test(t.message)?1:0}function a6e(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function DJ(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function o6e(t){const e=t&&t.name;return!e&&DJ(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function l6e(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:DJ(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function c6e(t,e,n,r){const i=n&&n.syntheticException||void 0,s=Bx(t,e,i,r);return um(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),kh(s)}function u6e(t,e,n="info",r,i){const s=r&&r.syntheticException||void 0,a=mT(t,e,s,i);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),kh(a)}function Bx(t,e,n,r,i){let s;if(VY(e)&&e.error)return oE(t,e.error);if(gj(e)||Q4e(e)){const a=e;if("stack"in e)s=oE(t,e);else{const o=a.name||(gj(a)?"DOMError":"DOMException"),l=a.message?`${o}: ${a.message}`:o;s=mT(t,l,n,r),eT(s,l)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return q9(e)?oE(t,e):cm(e)||G9(e)?(s=r6e(t,e,n,i),um(s,{synthetic:!0}),s):(s=mT(t,e,n,r),eT(s,`${e}`),um(s,{synthetic:!0}),s)}function mT(t,e,n,r){const i={};if(r&&n){const s=Vx(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),um(i,{synthetic:!0})}if(Ox(e)){const{__sentry_template_string__:s,__sentry_template_values__:a}=e;return i.logentry={message:s,params:a},i}return i.message=e,i}function d6e(t,{isUnhandledRejection:e}){const n=o8e(t),r=e?"promise rejection":"exception";return VY(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:G9(t)?`Event \`${h6e(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function h6e(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function f6e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}function m6e(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:zm(r)}},s=p6e(t);return Wm(i,[s])}function p6e(t){return[{type:"user_report"},t]}class g6e extends e7e{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=ot.SENTRY_SDK_SOURCE||e6e();RJ(n,"browser",["browser"],r),super(n),n.sendClientReports&&ot.document&&ot.document.addEventListener("visibilitychange",()=>{ot.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return c6e(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return u6e(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){la&&Ae.warn("SDK not enabled, will not capture user feedback.");return}const n=m6e(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const qx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,v6e=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Ym=(t,e,n,r)=>{let i,s;return a=>{e.value>=0&&(a||r)&&(s=e.value-(i||0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=v6e(e.value,n),t(e)))}},ct=Yt,y6e=()=>`v4-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,i4=(t=!0)=>{const e=ct.performance&&ct.performance.getEntriesByType&&ct.performance.getEntriesByType("navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},s4=()=>{const t=i4();return t&&t.activationStart||0},Jm=(t,e)=>{const n=i4();let r="navigate";return n&&(ct.document&&ct.document.prerendering||s4()>0?r="prerender":ct.document&&ct.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:y6e(),navigationType:r}},qh=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},Qm=t=>{const e=n=>{(n.type==="pagehide"||ct.document&&ct.document.visibilityState==="hidden")&&t(n)};ct.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},Q9=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let _0=-1;const _6e=()=>ct.document.visibilityState==="hidden"&&!ct.document.prerendering?0:1/0,a5=t=>{ct.document.visibilityState==="hidden"&&_0>-1&&(_0=t.type==="visibilitychange"?t.timeStamp:0,b6e())},C6e=()=>{addEventListener("visibilitychange",a5,!0),addEventListener("prerenderingchange",a5,!0)},b6e=()=>{removeEventListener("visibilitychange",a5,!0),removeEventListener("prerenderingchange",a5,!0)},X9=()=>(ct.document&&_0<0&&(_0=_6e(),C6e()),{get firstHiddenTime(){return _0}}),a4=t=>{ct.document&&ct.document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},E6e=[1800,3e3],S6e=(t,e={})=>{a4(()=>{const n=X9(),r=Jm("FCP");let i;const a=qh("paint",o=>{o.forEach(l=>{l.name==="first-contentful-paint"&&(a.disconnect(),l.startTime<n.firstHiddenTime&&(r.value=Math.max(l.startTime-s4(),0),r.entries.push(l),i(!0)))})});a&&(i=Ym(t,r,E6e,e.reportAllChanges))})},w6e=[.1,.25],k6e=(t,e={})=>{S6e(Q9(()=>{const n=Jm("CLS",0);let r,i=0,s=[];const a=l=>{l.forEach(c=>{if(!c.hadRecentInput){const d=s[0],f=s[s.length-1];i&&d&&f&&c.startTime-f.startTime<1e3&&c.startTime-d.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>n.value&&(n.value=i,n.entries=s,r())},o=qh("layout-shift",a);o&&(r=Ym(t,n,w6e,e.reportAllChanges),Qm(()=>{a(o.takeRecords()),r(!0)}),setTimeout(r,0))}))},T6e=[100,300],R6e=(t,e={})=>{a4(()=>{const n=X9(),r=Jm("FID");let i;const s=l=>{l.startTime<n.firstHiddenTime&&(r.value=l.processingStart-l.startTime,r.entries.push(l),i(!0))},a=l=>{l.forEach(s)},o=qh("first-input",a);i=Ym(t,r,T6e,e.reportAllChanges),o&&Qm(Q9(()=>{a(o.takeRecords()),o.disconnect()}))})};let UJ=0,lE=1/0,yv=0;const I6e=t=>{t.forEach(e=>{e.interactionId&&(lE=Math.min(lE,e.interactionId),yv=Math.max(yv,e.interactionId),UJ=yv?(yv-lE)/7+1:0)})};let pT;const x6e=()=>pT?UJ:performance.interactionCount||0,M6e=()=>{"interactionCount"in performance||pT||(pT=qh("event",I6e,{type:"event",buffered:!0,durationThreshold:0}))},wc=[],cE=new Map,P6e=40;let L6e=0;const O6e=()=>x6e()-L6e,A6e=()=>{const t=Math.min(wc.length-1,Math.floor(O6e()/50));return wc[t]},uE=10,N6e=[],D6e=t=>{if(N6e.forEach(r=>r(t)),!(t.interactionId||t.entryType==="first-input"))return;const e=wc[wc.length-1],n=cE.get(t.interactionId);if(n||wc.length<uE||e&&t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(t);else{const r={id:t.interactionId,latency:t.duration,entries:[t]};cE.set(r.id,r),wc.push(r)}wc.sort((r,i)=>i.latency-r.latency),wc.length>uE&&wc.splice(uE).forEach(r=>cE.delete(r.id))}},FJ=t=>{const e=ct.requestIdleCallback||ct.setTimeout;let n=-1;return t=Q9(t),ct.document&&ct.document.visibilityState==="hidden"?t():(n=e(t),Qm(t)),n},U6e=[200,500],F6e=(t,e={})=>{"PerformanceEventTiming"in ct&&"interactionId"in PerformanceEventTiming.prototype&&a4(()=>{M6e();const n=Jm("INP");let r;const i=a=>{FJ(()=>{a.forEach(D6e);const o=A6e();o&&o.latency!==n.value&&(n.value=o.latency,n.entries=o.entries,r())})},s=qh("event",i,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:P6e});r=Ym(t,n,U6e,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Qm(()=>{i(s.takeRecords()),r(!0)}))})},j6e=[2500,4e3],Jj={},H6e=(t,e={})=>{a4(()=>{const n=X9(),r=Jm("LCP");let i;const s=o=>{e.reportAllChanges||(o=o.slice(-1)),o.forEach(l=>{l.startTime<n.firstHiddenTime&&(r.value=Math.max(l.startTime-s4(),0),r.entries=[l],i())})},a=qh("largest-contentful-paint",s);if(a){i=Ym(t,r,j6e,e.reportAllChanges);const o=Q9(()=>{Jj[r.id]||(s(a.takeRecords()),a.disconnect(),Jj[r.id]=!0,i(!0))});["keydown","click"].forEach(l=>{ct.document&&addEventListener(l,()=>FJ(o),{once:!0,capture:!0})}),Qm(o)}})},$6e=[800,1800],gT=t=>{ct.document&&ct.document.prerendering?a4(()=>gT(t)):ct.document&&ct.document.readyState!=="complete"?addEventListener("load",()=>gT(t),!0):setTimeout(t,0)},V6e=(t,e={})=>{const n=Jm("TTFB"),r=Ym(t,n,$6e,e.reportAllChanges);gT(()=>{const i=i4();i&&(n.value=Math.max(i.responseStart-s4(),0),n.entries=[i],r(!0))})},C0={},o5={};let jJ,HJ,$J,VJ,BJ;function qJ(t,e=!1){return o4("cls",t,Z6e,jJ,e)}function B6e(t,e=!1){return o4("lcp",t,W6e,$J,e)}function q6e(t){return o4("fid",t,z6e,HJ)}function G6e(t){return o4("ttfb",t,Y6e,VJ)}function K6e(t){return o4("inp",t,J6e,BJ)}function lg(t,e){return GJ(t,e),o5[t]||(Q6e(t),o5[t]=!0),KJ(t,e)}function Xm(t,e){const n=C0[t];if(!(!n||!n.length))for(const r of n)try{r(e)}catch(i){qx&&Ae.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${au(r)}
Error:`,i)}}function Z6e(){return k6e(t=>{Xm("cls",{metric:t}),jJ=t},{reportAllChanges:!0})}function z6e(){return R6e(t=>{Xm("fid",{metric:t}),HJ=t})}function W6e(){return H6e(t=>{Xm("lcp",{metric:t}),$J=t},{reportAllChanges:!0})}function Y6e(){return V6e(t=>{Xm("ttfb",{metric:t}),VJ=t})}function J6e(){return F6e(t=>{Xm("inp",{metric:t}),BJ=t})}function o4(t,e,n,r,i=!1){GJ(t,e);let s;return o5[t]||(s=n(),o5[t]=!0),r&&e({metric:r}),KJ(t,e,i?s:void 0)}function Q6e(t){const e={};t==="event"&&(e.durationThreshold=0),qh(t,n=>{Xm(t,{entries:n})},e)}function GJ(t,e){C0[t]=C0[t]||[],C0[t].push(e)}function KJ(t,e,n){return()=>{n&&n();const r=C0[t];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function X6e(t){return"duration"in t}function dE(t){return typeof t=="number"&&isFinite(t)}function cu(t,e,n,{...r}){const i=Xt(t).start_timestamp;return i&&i>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),vJ(t,()=>{const s=r4({startTime:e,...r});return s&&s.end(n),s})}function ZJ(t){const e=tn();if(!e)return;const{name:n,transaction:r,attributes:i,startTime:s}=t,{release:a,environment:o}=e.getOptions(),l=e.getIntegrationByName("Replay"),c=l&&l.getReplayId(),d=Cn(),f=d.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let g;try{g=d.getScopeData().contexts.profile.profile_id}catch{}const y={release:a,environment:o,user:p||void 0,profile_id:g||void 0,replay_id:c||void 0,transaction:r,"user_agent.original":ct.navigator&&ct.navigator.userAgent,...i};return r4({name:n,attributes:y,startTime:s,experimental:{standalone:!0}})}function Gx(){return ct&&ct.addEventListener&&ct.performance}function vr(t){return t/1e3}function zJ(t){let e="unknown",n="unknown",r="";for(const i of t){if(i==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}function e5e(){let t=0,e,n;if(!n5e())return;let r=!1;function i(){r||(r=!0,n&&t5e(t,e,n),s())}const s=qJ(({metric:a})=>{const o=a.entries[a.entries.length-1];o&&(t=a.value,e=o)},!0);Qm(()=>{i()}),setTimeout(()=>{const a=tn();if(!a)return;const o=a.on("startNavigationSpan",()=>{i(),o&&o()}),l=xi(),c=l&&Ri(l),d=c&&Xt(c);d&&d.op==="pageload"&&(n=c.spanContext().spanId)},0)}function t5e(t,e,n){qx&&Ae.log(`Sending CLS span (${t})`);const r=vr((Fs||0)+(e&&e.startTime||0)),i=Cn().getScopeData().transactionName,s=e?wh(e.sources[0]&&e.sources[0].node):"Layout shift",a=Ti({[Or]:"auto.http.browser.cls",[lu]:"ui.webvital.cls",[Ux]:e&&e.duration||0,"sentry.pageload.span_id":n}),o=ZJ({name:s,transaction:i,attributes:a,startTime:r});o&&(o.addEvent("cls",{[W9]:"",[Y9]:t}),o.end(r))}function n5e(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}const r5e=2147483647;let Qj=0,bi={},bs,b0;function i5e({recordClsStandaloneSpans:t}){const e=Gx();if(e&&Fs){e.mark&&ct.performance.mark("sentry-tracing-init");const n=u5e(),r=c5e(),i=d5e(),s=t?e5e():l5e();return()=>{n(),r(),i(),s&&s()}}return()=>{}}function s5e(){lg("longtask",({entries:t})=>{const e=xi();if(!e)return;const{op:n,start_timestamp:r}=Xt(e);for(const i of t){const s=vr(Fs+i.startTime),a=vr(i.duration);n==="navigation"&&r&&s<r||cu(e,s,s+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Or]:"auto.ui.browser.metrics"}})}})}function a5e(){new PerformanceObserver(e=>{const n=xi();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const i=vr(Fs+r.startTime),{start_timestamp:s,op:a}=Xt(n);if(a==="navigation"&&s&&i<s)continue;const o=vr(r.duration),l={[Or]:"auto.ui.browser.metrics"},c=r.scripts[0],{invoker:d,invokerType:f,sourceURL:p,sourceFunctionName:g,sourceCharPosition:y}=c;l["browser.script.invoker"]=d,l["browser.script.invoker_type"]=f,p&&(l["code.filepath"]=p),g&&(l["code.function"]=g),y!==-1&&(l["browser.script.source_char_position"]=y),cu(n,i,i+o,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:l})}}).observe({type:"long-animation-frame",buffered:!0})}function o5e(){lg("event",({entries:t})=>{const e=xi();if(e){for(const n of t)if(n.name==="click"){const r=vr(Fs+n.startTime),i=vr(n.duration),s={name:wh(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[Or]:"auto.ui.browser.metrics"}},a=qY(n.target);a&&(s.attributes["ui.component_name"]=a),cu(e,r,r+i,s)}}})}function l5e(){return qJ(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(bi.cls={value:t.value,unit:""},b0=e)},!0)}function c5e(){return B6e(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(bi.lcp={value:t.value,unit:"millisecond"},bs=e)},!0)}function u5e(){return q6e(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=vr(Fs),r=vr(e.startTime);bi.fid={value:t.value,unit:"millisecond"},bi["mark.fid"]={value:n+r,unit:"second"}})}function d5e(){return G6e(({metric:t})=>{t.entries[t.entries.length-1]&&(bi.ttfb={value:t.value,unit:"millisecond"})})}function h5e(t,e){const n=Gx();if(!n||!n.getEntries||!Fs)return;const r=vr(Fs),i=n.getEntries(),{op:s,start_timestamp:a}=Xt(t);if(i.slice(Qj).forEach(o=>{const l=vr(o.startTime),c=vr(Math.max(0,o.duration));if(!(s==="navigation"&&a&&r+l<a))switch(o.entryType){case"navigation":{m5e(t,o,r);break}case"mark":case"paint":case"measure":{f5e(t,o,l,c,r);const d=X9(),f=o.startTime<d.firstHiddenTime;o.name==="first-paint"&&f&&(bi.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&f&&(bi.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{v5e(t,o,o.name,l,c,r);break}}}),Qj=Math.max(i.length-1,0),y5e(t),s==="pageload"){C5e(bi);const o=bi["mark.fid"];o&&bi.fid&&(cu(t,o.value,o.value+vr(bi.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Or]:"auto.ui.browser.metrics"}}),delete bi["mark.fid"]),(!("fcp"in bi)||!e.recordClsOnPageloadSpan)&&delete bi.cls,Object.entries(bi).forEach(([l,c])=>{dve(l,c.value,c.unit)}),t.setAttribute("performance.timeOrigin",r),t.setAttribute("performance.activationStart",s4()),_5e(t)}bs=void 0,b0=void 0,bi={}}function f5e(t,e,n,r,i){const s=i4(!1),a=vr(s?s.requestStart:0),o=i+Math.max(n,a),l=i+n,c=l+r,d={[Or]:"auto.resource.browser.metrics"};return o!==l&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=o),cu(t,o,c,{name:e.name,op:e.entryType,attributes:d}),o}function m5e(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{_v(t,e,r,n)}),_v(t,e,"secureConnection",n,"TLS/SSL"),_v(t,e,"fetch",n,"cache"),_v(t,e,"domainLookup",n,"DNS"),g5e(t,e,n)}function _v(t,e,n,r,i=n){const s=p5e(n),a=e[s],o=e[`${n}Start`];!o||!a||cu(t,r+vr(o),r+vr(a),{op:`browser.${i}`,name:e.name,attributes:{[Or]:"auto.ui.browser.metrics"}})}function p5e(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function g5e(t,e,n){const r=n+vr(e.requestStart),i=n+vr(e.responseEnd),s=n+vr(e.responseStart);e.responseEnd&&(cu(t,r,i,{op:"browser.request",name:e.name,attributes:{[Or]:"auto.ui.browser.metrics"}}),cu(t,s,i,{op:"browser.response",name:e.name,attributes:{[Or]:"auto.ui.browser.metrics"}}))}function v5e(t,e,n,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=mh(n),o={[Or]:"auto.resource.browser.metrics"};hE(o,e,"transferSize","http.response_transfer_size"),hE(o,e,"encodedBodySize","http.response_content_length"),hE(o,e,"decodedBodySize","http.decoded_response_content_length");const l=e.deliveryType;l!=null&&(o["http.response_delivery_type"]=l);const c=e.renderBlockingStatus;c&&(o["resource.render_blocking_status"]=c),a.protocol&&(o["url.scheme"]=a.protocol.split(":").pop()),a.host&&(o["server.address"]=a.host),o["url.same_origin"]=n.includes(ct.location.origin);const{name:d,version:f}=zJ(e.nextHopProtocol);o["network.protocol.name"]=d,o["network.protocol.version"]=f;const p=s+r,g=p+i;cu(t,p,g,{name:n.replace(ct.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:o})}function y5e(t){const e=ct.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),dE(n.rtt)&&(bi["connection.rtt"]={value:n.rtt,unit:"millisecond"})),dE(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),dE(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function _5e(t){bs&&(bs.element&&t.setAttribute("lcp.element",wh(bs.element)),bs.id&&t.setAttribute("lcp.id",bs.id),bs.url&&t.setAttribute("lcp.url",bs.url.trim().slice(0,200)),bs.loadTime!=null&&t.setAttribute("lcp.loadTime",bs.loadTime),bs.renderTime!=null&&t.setAttribute("lcp.renderTime",bs.renderTime),t.setAttribute("lcp.size",bs.size)),b0&&b0.sources&&b0.sources.forEach((e,n)=>t.setAttribute(`cls.source.${n+1}`,wh(e.node)))}function hE(t,e,n,r){const i=e[n];i!=null&&i<r5e&&(t[r]=i)}function C5e(t){const e=i4(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const b5e=1e3;let Xj,vT,yT;function E5e(t){const e="dom";i1(e,t),s1(e,S5e)}function S5e(){if(!ct.document)return;const t=qa.bind(null,"dom"),e=eH(t,!0);ct.document.addEventListener("click",e,!1),ct.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const i=ct[n],s=i&&i.prototype;!s||!s.hasOwnProperty||!s.hasOwnProperty("addEventListener")||(oa(s,"addEventListener",function(a){return function(o,l,c){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[o]=d[o]||{refCount:0};if(!f.handler){const p=eH(t);f.handler=p,a.call(this,o,p,c)}f.refCount++}catch{}return a.call(this,o,l,c)}}),oa(s,"removeEventListener",function(a){return function(o,l,c){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[o];f&&(f.refCount--,f.refCount<=0&&(a.call(this,o,f.handler,c),f.handler=void 0,delete d[o]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,o,l,c)}}))})}function w5e(t){if(t.type!==vT)return!1;try{if(!t.target||t.target._sentryId!==yT)return!1}catch{}return!0}function k5e(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function eH(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=T5e(n);if(k5e(n.type,r))return;Ya(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ya(r,"_sentryId",Ga());const i=n.type==="keypress"?"input":n.type;w5e(n)||(t({event:n,name:i,global:e}),vT=n.type,yT=r?r._sentryId:void 0),clearTimeout(Xj),Xj=ct.setTimeout(()=>{yT=void 0,vT=void 0},b5e)}}function T5e(t){try{return t.target}catch{return null}}let Cv;function Kx(t){const e="history";i1(e,t),s1(e,R5e)}function R5e(){if(!t6e())return;const t=ct.onpopstate;ct.onpopstate=function(...n){const r=ct.location.href,i=Cv;if(Cv=r,qa("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Cv,a=String(i);Cv=a,qa("history",{from:s,to:a})}return n.apply(this,r)}}oa(ct.history,"pushState",e),oa(ct.history,"replaceState",e)}const Z7={};function I5e(t){const e=Z7[t];if(e)return e;let n=ct[t];if(dT(n))return Z7[t]=n.bind(ct);const r=ct.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){qx&&Ae.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(Z7[t]=n.bind(ct))}function tH(t){Z7[t]=void 0}const u2="__sentry_xhr_v3__";function WJ(t){const e="xhr";i1(e,t),s1(e,x5e)}function x5e(){if(!ct.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=is()*1e3,a=Zc(r[0])?r[0].toUpperCase():void 0,o=M5e(r[1]);if(!a||!o)return e.apply(n,r);n[u2]={method:a,url:o,request_headers:{}},a==="POST"&&o.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[u2];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const d={endTimestamp:is()*1e3,startTimestamp:s,xhr:n,virtualError:i};qa("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,d,f){return l(),c.apply(d,f)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,d,f){const[p,g]=f,y=d[u2];return y&&Zc(p)&&Zc(g)&&(y.request_headers[p.toLowerCase()]=g),c.apply(d,f)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[u2];if(!i)return e.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:is()*1e3,xhr:n};return qa("xhr",s),e.apply(n,r)}})}function M5e(t){if(Zc(t))return t;try{return t.toString()}catch{}}const fE=[],z7=new Map;function P5e(){if(Gx()&&Fs){const e=L5e();return()=>{e()}}return()=>{}}const nH={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function L5e(){return K6e(({metric:t})=>{if(t.value==null)return;const e=t.entries.find(y=>y.duration===t.value&&nH[y.name]);if(!e)return;const{interactionId:n}=e,r=nH[e.name],i=vr(Fs+e.startTime),s=vr(t.value),a=xi(),o=a?Ri(a):void 0,c=(n!=null?z7.get(n):void 0)||o,d=c?Xt(c).description:Cn().getScopeData().transactionName,f=wh(e.target),p=Ti({[Or]:"auto.http.browser.inp",[lu]:`ui.interaction.${r}`,[Ux]:e.duration}),g=ZJ({name:f,transaction:d,attributes:p,startTime:i});g&&(g.addEvent("inp",{[W9]:"millisecond",[Y9]:t.value}),g.end(i+s))})}function O5e(t){const e=({entries:n})=>{const r=xi(),i=r&&Ri(r);n.forEach(s=>{if(!X6e(s)||!i)return;const a=s.interactionId;if(a!=null&&!z7.has(a)){if(fE.length>10){const o=fE.shift();z7.delete(o)}fE.push(a),z7.set(a,i)}})};lg("event",e),lg("first-input",e)}function A5e(t,e=I5e("fetch")){let n=0,r=0;function i(s){const a=s.body.length;n+=a,r++;const o={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return tH("fetch"),r5("No fetch implementation available");try{return e(t.url,o).then(l=>(n-=a,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return tH("fetch"),n-=a,r--,r5(l)}}return h7e(t,i)}const N5e=30,D5e=50;function _T(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?Sh:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const U5e=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,F5e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,j5e=/\((\S*)(?::(\d+))(?::(\d+))\)/,H5e=t=>{const e=U5e.exec(t);if(e){const[,r,i,s]=e;return _T(r,Sh,+i,+s)}const n=F5e.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const a=j5e.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}const[i,s]=YJ(n[1]||Sh,n[2]);return _T(s,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},$5e=[N5e,H5e],V5e=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,B5e=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,q5e=t=>{const e=V5e.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=B5e.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Sh;return[i,r]=YJ(i,r),_T(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},G5e=[D5e,q5e],K5e=[$5e,G5e],Z5e=FY(...K5e),YJ=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Sh,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},bv=1024,z5e="Breadcrumbs",W5e=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:z5e,setup(n){e.console&&A7e(X5e(n)),e.dom&&E5e(Q5e(n,e.dom)),e.xhr&&WJ(e9e(n)),e.fetch&&OJ(t9e(n)),e.history&&Kx(n9e(n)),e.sentry&&n.on("beforeSendEvent",J5e(n))}}},Y5e=W5e;function J5e(t){return function(n){tn()===t&&Th({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:od(n)},{event:n})}}function Q5e(t,e){return function(r){if(tn()!==t)return;let i,s,a=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>bv&&(la&&Ae.warn(`\`dom.maxStringLength\` cannot exceed ${bv}, but a value of ${o} was configured. Sentry will use ${bv} instead.`),o=bv),typeof a=="string"&&(a=[a]);try{const c=r.event,d=r9e(c)?c.target:c;i=wh(d,{keyAttrs:a,maxStringLength:o}),s=qY(d)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),Th(l,{event:r.event,name:r.name,global:r.global})}}function X5e(t){return function(n){if(tn()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:D7e(n.level),message:vj(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${vj(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Th(r,{input:n.args,level:n.level})}}function e9e(t){return function(n){if(tn()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[u2];if(!r||!i||!s)return;const{method:a,url:o,status_code:l,body:c}=s,d={method:a,url:o,status_code:l},f={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},p=PJ(l);Th({category:"xhr",data:d,type:"http",level:p},f)}}function t9e(t){return function(n){if(tn()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,a={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};Th({category:"fetch",data:s,level:"error",type:"http"},a)}else{const s=n.response,a={...n.fetchData,status_code:s&&s.status},o={input:n.args,response:s,startTimestamp:r,endTimestamp:i},l=PJ(a.status_code);Th({category:"fetch",data:a,type:"http",level:l},o)}}}function n9e(t){return function(n){if(tn()!==t)return;let r=n.from,i=n.to;const s=mh(ot.location.href);let a=r?mh(r):void 0;const o=mh(i);(!a||!a.path)&&(a=s),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),Th({category:"navigation",data:{from:r,to:i}})}}function r9e(t){return!!t&&!!t.target}const i9e=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],s9e="BrowserApiErrors",a9e=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:s9e,setupOnce(){e.setTimeout&&oa(ot,"setTimeout",rH),e.setInterval&&oa(ot,"setInterval",rH),e.requestAnimationFrame&&oa(ot,"requestAnimationFrame",l9e),e.XMLHttpRequest&&"XMLHttpRequest"in ot&&oa(XMLHttpRequest.prototype,"send",c9e);const n=e.eventTarget;n&&(Array.isArray(n)?n:i9e).forEach(u9e)}}},o9e=a9e;function rH(t){return function(...e){const n=e[0];return e[0]=fm(n,{mechanism:{data:{function:au(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function l9e(t){return function(e){return t.apply(this,[fm(e,{mechanism:{data:{function:"requestAnimationFrame",handler:au(t)},handled:!1,type:"instrument"}})])}}function c9e(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&oa(n,i,function(s){const a={mechanism:{data:{function:i,handler:au(s)},handled:!1,type:"instrument"}},o=Nx(s);return o&&(a.mechanism.data.handler=au(o)),fm(s,a)})}),t.apply(this,e)}}function u9e(t){const n=ot[t],r=n&&n.prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(oa(r,"addEventListener",function(i){return function(s,a,o){try{d9e(a)&&(a.handleEvent=fm(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:au(a),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[s,fm(a,{mechanism:{data:{function:"addEventListener",handler:au(a),target:t},handled:!1,type:"instrument"}}),o])}}),oa(r,"removeEventListener",function(i){return function(s,a,o){try{const l=a.__sentry_wrapped__;l&&i.call(this,s,l,o)}catch{}return i.call(this,s,a,o)}}))}function d9e(t){return typeof t.handleEvent=="function"}const h9e=()=>({name:"BrowserSession",setupOnce(){if(typeof ot.document>"u"){la&&Ae.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Fj({ignoreDuration:!0}),jj(),Kx(({from:t,to:e})=>{t!==void 0&&t!==e&&(Fj({ignoreDuration:!0}),jj())})}}),f9e="GlobalHandlers",m9e=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:f9e,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(g9e(n),iH("onerror")),e.onunhandledrejection&&(v9e(n),iH("onunhandledrejection"))}}},p9e=m9e;function g9e(t){jY(e=>{const{stackParser:n,attachStacktrace:r}=JJ();if(tn()!==t||NJ())return;const{msg:i,url:s,line:a,column:o,error:l}=e,c=C9e(Bx(n,l||i,void 0,r,!1),s,a,o);c.level="error",CJ(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function v9e(t){HY(e=>{const{stackParser:n,attachStacktrace:r}=JJ();if(tn()!==t||NJ())return;const i=y9e(e),s=Ax(i)?_9e(i):Bx(n,i,void 0,r,!0);s.level="error",CJ(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function y9e(t){if(Ax(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function _9e(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function C9e(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],a=s[0]=s[0]||{},o=a.stacktrace=a.stacktrace||{},l=o.frames=o.frames||[],c=r,d=n,f=Zc(e)&&e.length>0?e:i8e();return l.length===0&&l.push({colno:c,filename:f,function:Sh,in_app:!0,lineno:d}),t}function iH(t){la&&Ae.log(`Global Handler attached: ${t}`)}function JJ(){const t=tn();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const b9e=()=>({name:"HttpContext",preprocessEvent(t){if(!ot.navigator&&!ot.location&&!ot.document)return;const e=t.request&&t.request.url||ot.location&&ot.location.href,{referrer:n}=ot.document||{},{userAgent:r}=ot.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),E9e="cause",S9e=5,w9e="LinkedErrors",k9e=(t={})=>{const e=t.limit||S9e,n=t.key||E9e;return{name:w9e,preprocessEvent(r,i,s){const a=s.getOptions();L7e($x,a.stackParser,a.maxValueLength,n,e,r,i)}}},T9e=k9e;function R9e(t){const e=[b7e(),v7e(),o9e(),Y5e(),p9e(),T9e(),j7e(),b9e()];return t.autoSessionTracking!==!1&&e.push(h9e()),e}function I9e(t={}){const e={defaultIntegrations:R9e(t),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:ot.SENTRY_RELEASE&&ot.SENTRY_RELEASE.id?ot.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return t.defaultIntegrations==null&&delete t.defaultIntegrations,{...e,...t}}function x9e(){const t=typeof ot.window<"u"&&ot;if(!t)return!1;const e=t.chrome?"chrome":"browser",n=t[e],r=n&&n.runtime&&n.runtime.id,i=ot.location&&ot.location.href||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],a=!!r&&ot===ot.top&&s.some(l=>i.startsWith(`${l}//`)),o=typeof t.nw<"u";return!!r&&!a&&!o}function M9e(t={}){const e=I9e(t);if(!e.skipBrowserExtensionCheck&&x9e()){$h(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}la&&(LJ()||Ae.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...e,stackParser:z4e(e.stackParser||Z5e),integrations:Jve(e),transport:e.transport||A5e};return r7e(g6e,n)}function sH(t={}){if(!ot.document){la&&Ae.error("Global document not defined in showReportDialog call");return}const e=Cn(),n=e.getClient(),r=n&&n.getDsn();if(!r){la&&Ae.error("DSN not configured for showReportDialog call");return}if(e&&(t.user={...e.getUser(),...t.user}),!t.eventId){const o=Bve();o&&(t.eventId=o)}const i=ot.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=Wve(r,t),t.onLoad&&(i.onload=t.onLoad);const{onClose:s}=t;if(s){const o=l=>{if(l.data==="__sentry_reportdialog_closed__")try{s()}finally{ot.removeEventListener("message",o)}};ot.addEventListener("message",o)}const a=ot.document.head||ot.document.body;a?a.appendChild(i):la&&Ae.error("Not injecting report dialog. No injection point found in HTML")}const aH=new WeakMap,mE=new Map,W7={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function P9e(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:s,enableHTTPTimings:a,tracePropagationTargets:o}={traceFetch:W7.traceFetch,traceXHR:W7.traceXHR,trackFetchStreamPerformance:W7.trackFetchStreamPerformance,...e},l=typeof s=="function"?s:f=>!0,c=f=>A9e(f,o),d={};n&&(t.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(p=>{if(p.op==="http.client"){const g=mE.get(p.span_id);g&&(p.timestamp=g/1e3,mE.delete(p.span_id))}}),f)),i&&Y7e(f=>{if(f.response){const p=aH.get(f.response);p&&f.endTimestamp&&mE.set(p,f.endTimestamp)}}),OJ(f=>{const p=B7e(f,l,c,d);if(f.response&&f.fetchData.__span&&aH.set(f.response,f.fetchData.__span),p){const g=QJ(f.fetchData.url),y=g?mh(g).host:void 0;p.setAttributes({"http.url":g,"server.address":y})}a&&p&&oH(p)})),r&&WJ(f=>{const p=N9e(f,l,c,d);a&&p&&oH(p)})}function L9e(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function oH(t){const{url:e}=Xt(t).data||{};if(!e||typeof e!="string")return;const n=lg("resource",({entries:r})=>{r.forEach(i=>{L9e(i)&&i.name.endsWith(e)&&(O9e(i).forEach(a=>t.setAttribute(...a)),setTimeout(n))})})}function dl(t=0){return((Fs||performance.timeOrigin)+t)/1e3}function O9e(t){const{name:e,version:n}=zJ(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),Fs?[...r,["http.request.redirect_start",dl(t.redirectStart)],["http.request.fetch_start",dl(t.fetchStart)],["http.request.domain_lookup_start",dl(t.domainLookupStart)],["http.request.domain_lookup_end",dl(t.domainLookupEnd)],["http.request.connect_start",dl(t.connectStart)],["http.request.secure_connection_start",dl(t.secureConnectionStart)],["http.request.connection_end",dl(t.connectEnd)],["http.request.request_start",dl(t.requestStart)],["http.request.response_start",dl(t.responseStart)],["http.request.response_end",dl(t.responseEnd)]]:r}function A9e(t,e){const n=ot.location&&ot.location.href;if(n){let r,i;try{r=new URL(t,n),i=new URL(n).origin}catch{return!1}const s=r.origin===i;return e?dh(r.toString(),e)||s&&dh(r.pathname,e):s}else{const r=!!t.match(/^\/(?!\/)/);return e?dh(t,e):r}}function N9e(t,e,n,r){const i=t.xhr,s=i&&i[u2];if(!i||i.__sentry_own_request__||!s)return;const a=Bd()&&e(s.url);if(t.endTimestamp&&a){const f=i.__sentry_xhr_span_id__;if(!f)return;const p=r[f];p&&s.status_code!==void 0&&(JY(p,s.status_code),p.end(),delete r[f]);return}const o=QJ(s.url),l=o?mh(o).host:void 0,c=!!xi(),d=a&&c?r4({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":o,url:s.url,"server.address":l,[Or]:"auto.http.browser",[lu]:"http.client"}}):new Km;return i.__sentry_xhr_span_id__=d.spanContext().spanId,r[i.__sentry_xhr_span_id__]=d,n(s.url)&&D9e(i,Bd()&&c?d:void 0),d}function D9e(t,e){const{"sentry-trace":n,baggage:r}=IJ({span:e});n&&U9e(t,n,r)}function U9e(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader("baggage",n)}catch{}}function QJ(t){try{return new URL(t,ot.location.origin).href}catch{return}}function F9e(){ot&&ot.document?ot.document.addEventListener("visibilitychange",()=>{const t=xi();if(!t)return;const e=Ri(t);if(ot.document.hidden&&e){const n="cancelled",{op:r,status:i}=Xt(e);la&&Ae.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:ni,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):la&&Ae.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const j9e="BrowserTracing",H9e={...K7,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...W7},$9e=(t={})=>{H8e();const{enableInp:e,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:i,enableStandaloneClsSpans:s},beforeStartSpan:a,idleTimeout:o,finalTimeout:l,childSpanTimeout:c,markBackgroundSpan:d,traceFetch:f,traceXHR:p,trackFetchStreamPerformance:g,shouldCreateSpanForRequest:y,enableHTTPTimings:v,instrumentPageLoad:b,instrumentNavigation:C}={...H9e,...t},S=i5e({recordClsStandaloneSpans:s||!1});e&&P5e(),r&&Yt.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?a5e():n&&s5e(),i&&o5e();const R={name:void 0,source:void 0};function w(I,k){const x=k.op==="pageload",L=a?a(k):k,N=L.attributes||{};k.name!==L.name&&(N[ja]="custom",L.attributes=N),R.name=L.name,R.source=N[ja];const D=_J(L,{idleTimeout:o,finalTimeout:l,childSpanTimeout:c,disableAutoFinish:x,beforeSpanEnd:j=>{S(),h5e(j,{recordClsOnPageloadSpan:!s})}});function U(){["interactive","complete"].includes(ot.document.readyState)&&I.emit("idleSpanEnableAutoFinish",D)}return x&&ot.document&&(ot.document.addEventListener("readystatechange",()=>{U()}),U()),D}return{name:j9e,afterAllSetup(I){let k,x=ot.location&&ot.location.href;function L(){k&&!Xt(k).timestamp&&(la&&Ae.log(`[Tracing] Finishing current active span with op: ${Xt(k).op}`),k.end())}I.on("startNavigationSpan",N=>{tn()===I&&(L(),k=w(I,{op:"navigation",...N}))}),I.on("startPageLoadSpan",(N,D={})=>{if(tn()!==I)return;L();const U=D.sentryTrace||lH("sentry-trace"),j=D.baggage||lH("baggage"),$=O8e(U,j);Cn().setPropagationContext($),k=w(I,{op:"pageload",...N})}),I.on("spanEnd",N=>{const D=Xt(N).op;if(N!==Ri(N)||D!=="navigation"&&D!=="pageload")return;const U=Cn(),j=U.getPropagationContext();U.setPropagationContext({...j,sampled:j.sampled!==void 0?j.sampled:Bh(N),dsc:j.dsc||Zm(N)})}),ot.location&&(b&&XJ(I,{name:ot.location.pathname,startTime:Fs?Fs/1e3:void 0,attributes:{[ja]:"url",[Or]:"auto.pageload.browser"}}),C&&Kx(({to:N,from:D})=>{if(D===void 0&&x&&x.indexOf(N)!==-1){x=void 0;return}D!==N&&(x=void 0,eQ(I,{name:ot.location.pathname,attributes:{[ja]:"url",[Or]:"auto.navigation.browser"}}))})),d&&F9e(),i&&V9e(o,l,c,R),e&&O5e(),P9e(I,{traceFetch:f,traceXHR:p,trackFetchStreamPerformance:g,tracePropagationTargets:I.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:y,enableHTTPTimings:v})}}};function XJ(t,e,n){t.emit("startPageLoadSpan",e,n),Cn().setTransactionName(e.name);const r=xi();return(r&&Xt(r).op)==="pageload"?r:void 0}function eQ(t,e){Yl().setPropagationContext({traceId:Hd()}),Cn().setPropagationContext({traceId:Hd()}),t.emit("startNavigationSpan",e),Cn().setTransactionName(e.name);const n=xi();return(n&&Xt(n).op)==="navigation"?n:void 0}function lH(t){const e=s8e(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function V9e(t,e,n,r){let i;const s=()=>{const a="ui.action.click",o=xi(),l=o&&Ri(o);if(l){const c=Xt(l).op;if(["navigation","pageload"].includes(c)){la&&Ae.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(rT,"interactionInterrupted"),i.end(),i=void 0),!r.name){la&&Ae.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}i=_J({name:r.name,op:a,attributes:{[ja]:r.source||"url"}},{idleTimeout:t,finalTimeout:e,childSpanTimeout:n})};ot.document&&addEventListener("click",s,{once:!1,capture:!0})}function B9e(t){const e={...t};return RJ(e,"react"),Vve("react",{version:u.version}),M9e(e)}function q9e(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}function G9e(t,e){const n=new WeakSet;function r(i,s){if(!n.has(i)){if(i.cause)return n.add(i),r(i.cause,s);i.cause=s}}r(t,e)}function K9e(t,{componentStack:e},n){if(q9e(u.version)&&q9(t)&&e){const r=new Error(t.message);r.name=`React ErrorBoundary ${t.name}`,r.stack=e,G9e(t,r)}return J9(t,{...n,captureContext:{contexts:{react:{componentStack:e}}}})}var pE={exports:{}},rn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cH;function Z9e(){if(cH)return rn;cH=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,b=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function R(I){if(typeof I=="object"&&I!==null){var k=I.$$typeof;switch(k){case e:switch(I=I.type,I){case l:case c:case r:case s:case i:case f:return I;default:switch(I=I&&I.$$typeof,I){case o:case d:case y:case g:case a:return I;default:return k}}case n:return k}}}function w(I){return R(I)===c}return rn.AsyncMode=l,rn.ConcurrentMode=c,rn.ContextConsumer=o,rn.ContextProvider=a,rn.Element=e,rn.ForwardRef=d,rn.Fragment=r,rn.Lazy=y,rn.Memo=g,rn.Portal=n,rn.Profiler=s,rn.StrictMode=i,rn.Suspense=f,rn.isAsyncMode=function(I){return w(I)||R(I)===l},rn.isConcurrentMode=w,rn.isContextConsumer=function(I){return R(I)===o},rn.isContextProvider=function(I){return R(I)===a},rn.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},rn.isForwardRef=function(I){return R(I)===d},rn.isFragment=function(I){return R(I)===r},rn.isLazy=function(I){return R(I)===y},rn.isMemo=function(I){return R(I)===g},rn.isPortal=function(I){return R(I)===n},rn.isProfiler=function(I){return R(I)===s},rn.isStrictMode=function(I){return R(I)===i},rn.isSuspense=function(I){return R(I)===f},rn.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===c||I===s||I===i||I===f||I===p||typeof I=="object"&&I!==null&&(I.$$typeof===y||I.$$typeof===g||I.$$typeof===a||I.$$typeof===o||I.$$typeof===d||I.$$typeof===b||I.$$typeof===C||I.$$typeof===S||I.$$typeof===v)},rn.typeOf=R,rn}var uH;function z9e(){return uH||(uH=1,pE.exports=Z9e()),pE.exports}var gE,dH;function W9e(){if(dH)return gE;dH=1;var t=z9e(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function a(y){return t.isMemo(y)?i:s[y.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function g(y,v,b){if(typeof v!="string"){if(p){var C=f(v);C&&C!==p&&g(y,C,b)}var S=l(v);c&&(S=S.concat(c(v)));for(var R=a(y),w=a(v),I=0;I<S.length;++I){var k=S[I];if(!n[k]&&!(b&&b[k])&&!(w&&w[k])&&!(R&&R[k])){var x=d(v,k);try{o(y,k,x)}catch{}}}}return y}return gE=g,gE}var Y9e=W9e();const J9e=zo(Y9e),tQ=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,hH={componentStack:null,error:null,eventId:null};class ey extends u.Component{constructor(e){super(e),ey.prototype.__init.call(this),this.state=hH,this._openFallbackReportDialog=!0;const n=tn();n&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",r=>{!r.type&&this._lastEventId&&r.event_id===this._lastEventId&&sH({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,n){const{componentStack:r}=n,i=r??void 0,{beforeCapture:s,onError:a,showDialog:o,dialogOptions:l}=this.props;z9(c=>{s&&s(c,e,i);const d=this.props.handled!=null?this.props.handled:!!this.props.fallback,f=K9e(e,n,{mechanism:{handled:d}});a&&a(e,i,f),o&&(this._lastEventId=f,this._openFallbackReportDialog&&sH({...l,eventId:f})),this.setState({error:e,componentStack:r,eventId:f})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&i(e,n,r),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:r,eventId:i}=this.state;e&&e(n,r,i),this.setState(hH)}}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.error){let i;return typeof e=="function"?i=u.createElement(e,{error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):i=e,u.isValidElement(i)?i:(e&&tQ&&Ae.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}let Y7,J7,Q7,X7,Rh,d2=!1;const nQ=new WeakSet,vE=new Set;function Q9e(t,e){const n=$9e({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:i,useNavigationType:s,createRoutesFromChildren:a,matchRoutes:o,stripBasename:l,instrumentPageLoad:c=!0,instrumentNavigation:d=!0}=t;return{...n,setup(){Y7=r,J7=i,Q7=s,Rh=o,X7=a,d2=l||!1},afterAllSetup(f){n.afterAllSetup(f);const p=ot&&ot.location&&ot.location.pathname;c&&p&&XJ(f,{name:p,attributes:{[ja]:"url",[lu]:"pageload",[Or]:`auto.pageload.react.reactrouter_v${e}`}}),d&&nQ.add(f)}}}function X9e(t){const{location:e,routes:n,navigationType:r,version:i,matches:s,basename:a,allRoutes:o}=t,l=Array.isArray(s)?s:Rh(n,e,a),c=tn();if(!(!c||!nQ.has(c))&&(r==="PUSH"||r==="POP")&&l){let d,f="url";const p=iQ(e,o||n);p&&(d=cg(Zx(o||n,e)),f="route"),(!p||!d)&&([d,f]=aQ(n,e,l,a)),eQ(c,{name:d,attributes:{[ja]:f,[lu]:"navigation",[Or]:`auto.navigation.react.reactrouter_v${i}`}})}}function l5(t,e){if(!e||e==="/"||!t.toLowerCase().startsWith(e.toLowerCase()))return t;const n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?t:t.slice(n)||"/"}function eye(t,e,n){const r=t||d2?l5(e,n):e;return[r[r.length-1]==="/"||r.slice(-2)==="/*"?r.slice(0,-1):r,"route"]}function rQ(t){return t.endsWith("*")}function fH(t,e){return rQ(t)&&e.route.children&&e.route.children.length>0||!1}function tye(t){return!!(!t.children&&t.element&&t.path&&t.path.endsWith("/*"))}function iQ(t,e){const n=Rh(e,t);if(n){for(const r of n)if(tye(r.route)&&rye(r))return!0}return!1}function sQ(t,e=new Set){return e.has(t)||(e.add(t),t.children&&!t.index&&t.children.forEach(n=>{sQ(n,e).forEach(i=>e.add(i))})),e}function nye(t){return iye(t.route.path||"")}function rye(t){return t.params["*"]||""}function iye(t){return t[t.length-1]==="*"?t.slice(0,-1):t}function E0(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function cg(t){return t[0]==="/"?t:`/${t}`}function Zx(t,e){const n=Rh(t,e);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const i=nye(r),s=l5(e.pathname,cg(r.pathnameBase));return E0(E0(i||"")+cg(Zx(t.filter(a=>a!==r.route),{pathname:s})))}return""}function aQ(t,e,n,r=""){if(!t||t.length===0)return[d2?l5(e.pathname,r):e.pathname,"url"];let i="";if(n)for(const a of n){const o=a.route;if(o){if(o.index)return eye(i,a.pathname,r);const l=o.path;if(l&&!fH(l,a)){const c=l[0]==="/"||i[i.length-1]==="/"?l:`/${l}`;if(i=E0(i)+cg(c),E0(e.pathname)===E0(r+a.pathname))return zj(i)!==zj(a.pathname)&&!rQ(i)?[(d2?"":r)+c,"route"]:(fH(i,a)&&(i=i.slice(0,-1)),[(d2?"":r)+i,"route"])}}}return[d2?l5(e.pathname,r):e.pathname||"/","url"]}function sye(t,e,n,r,i,s){const a=Array.isArray(r)?r:Rh(s||n,e,i);if(a){let o,l="url";const c=iQ(e,s||n);c&&(o=cg(Zx(s||n,e)),l="route"),(!c||!o)&&([o,l]=aQ(n,e,a,i)),Cn().setTransactionName(o||"/"),t&&(t.updateName(o),t.setAttribute(ja,l))}}function aye(t,e){if(!Y7||!J7||!Q7||!X7||!Rh)return tQ&&Ae.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Y7}. useLocation: ${J7}. useNavigationType: ${Q7}.
      createRoutesFromChildren: ${X7}. matchRoutes: ${Rh}.`),t;const n=r=>{const i=u.useRef(!0),s=J7(),a=Q7();return Y7(()=>{const o=X7(r.children);i.current?(o.forEach(l=>{sQ(l).forEach(d=>{vE.add(d)})}),sye(oye(),s,o,void 0,void 0,Array.from(vE)),i.current=!1):X9e({location:s,routes:o,navigationType:a,version:e,allRoutes:Array.from(vE)})},[s,a]),u.createElement(t,{...r})};return J9e(n,t),n}function oye(){const t=xi(),e=t?Ri(t):void 0;if(!e)return;const n=Xt(e).op;return n==="navigation"||n==="pageload"?e:void 0}function lye(t){return Q9e(t,"7")}function cye(t){return aye(t,"7")}var yE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var mH;function uye(){return mH||(mH=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(yE)),yE.exports}var dye=uye();const De=zo(dye);function oQ(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"m10.6 13.8-2.15-2.15a.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275.95.95 0 0 0-.275.7q0 .425.275.7L9.9 15.9q.3.3.7.3t.7-.3l5.65-5.65a.95.95 0 0 0 .275-.7.95.95 0 0 0-.275-.7.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275zM12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4 6.325 6.325 4 12t2.325 5.675T12 20"})})}oQ.displayName="CheckCircleIcon";const hye=u.forwardRef(oQ);function lQ(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 17q.424 0 .713-.288A.97.97 0 0 0 13 16a.97.97 0 0 0-.287-.713A.97.97 0 0 0 12 15a.97.97 0 0 0-.713.287A.97.97 0 0 0 11 16q0 .424.287.712.288.288.713.288m0-4q.424 0 .713-.287A.97.97 0 0 0 13 12V8a.97.97 0 0 0-.287-.713A.97.97 0 0 0 12 7a.97.97 0 0 0-.713.287A.97.97 0 0 0 11 8v4q0 .424.287.713.288.287.713.287m0 9a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22"})})}lQ.displayName="ErrorSolidIcon";const ty=u.forwardRef(lQ);function cQ(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M11.288 7.288A.97.97 0 0 1 12 7q.424 0 .713.287Q13 7.576 13 8t-.287.713A.97.97 0 0 1 12 9a.97.97 0 0 1-.713-.287A.97.97 0 0 1 11 8q0-.424.287-.713m.001 4.001A.97.97 0 0 1 12 11q.424 0 .713.287.287.288.287.713v4q0 .424-.287.712A.97.97 0 0 1 12 17a.97.97 0 0 1-.713-.288A.97.97 0 0 1 11 16v-4q0-.424.287-.713"}),E.jsx("path",{fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-2 0a8 8 0 1 1-16 0 8 8 0 0 1 16 0",clipRule:"evenodd"})]})}cQ.displayName="InfoIcon";const fye=u.forwardRef(cQ);function uQ(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M6.293 6.293a1 1 0 0 1 1.414 0L12 10.586l4.293-4.293a1 1 0 1 1 1.414 1.414L13.414 12l4.293 4.293a1 1 0 0 1-1.414 1.414L12 13.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L10.586 12 6.293 7.707a1 1 0 0 1 0-1.414"})})}uQ.displayName="CloseIcon";const ny=u.forwardRef(uQ),mye="_alert_zx76t_10",pye="_content_zx76t_37",gye="_icon_zx76t_48",vye="_actions_zx76t_64",Df={alert:mye,content:pye,"text-content":"_text-content_zx76t_44",icon:gye,actions:vye},yye="_typography_6v6n8_153",pH={"font-body-xs-regular":"_font-body-xs-regular_6v6n8_12","font-body-xs-semibold":"_font-body-xs-semibold_6v6n8_17","font-body-xs-medium":"_font-body-xs-medium_6v6n8_22","font-body-sm-regular":"_font-body-sm-regular_6v6n8_31","font-body-sm-semibold":"_font-body-sm-semibold_6v6n8_36","font-body-sm-medium":"_font-body-sm-medium_6v6n8_41","font-body-md-regular":"_font-body-md-regular_6v6n8_50","font-body-md-semibold":"_font-body-md-semibold_6v6n8_55","font-body-md-medium":"_font-body-md-medium_6v6n8_60","font-body-lg-regular":"_font-body-lg-regular_6v6n8_69","font-body-lg-semibold":"_font-body-lg-semibold_6v6n8_74","font-body-lg-medium":"_font-body-lg-medium_6v6n8_79","font-heading-sm-regular":"_font-heading-sm-regular_6v6n8_88","font-heading-sm-semibold":"_font-heading-sm-semibold_6v6n8_93","font-heading-sm-medium":"_font-heading-sm-medium_6v6n8_98","font-heading-md-regular":"_font-heading-md-regular_6v6n8_107","font-heading-md-semibold":"_font-heading-md-semibold_6v6n8_112","font-heading-lg-regular":"_font-heading-lg-regular_6v6n8_121","font-heading-lg-semibold":"_font-heading-lg-semibold_6v6n8_126","font-heading-xl-regular":"_font-heading-xl-regular_6v6n8_135","font-heading-xl-semibold":"_font-heading-xl-semibold_6v6n8_140",typography:yye},dQ=({as:t,children:e,type:n="body",weight:r="regular",size:i="md",className:s,...a})=>{const o=t||"p";return E.jsx(o,{...a,className:De(pH.typography,pH[`font-${n}-${i}-${r}`],s),children:e})},_n=({as:t="p",children:e,...n})=>E.jsx(dQ,{as:t,type:"body",...n,children:e}),_ye="_destructive_m2erp_74",_E={"icon-button":"_icon-button_m2erp_8","subtle-bg":"_subtle-bg_m2erp_29",destructive:_ye},hQ=u.forwardRef(function({as:e,children:n,className:r,disabled:i,...s},a){const o=e||"button",{onClick:l,onSubmit:c,onPointerDown:d,onPointerUp:f,onKeyDown:p,onKeyUp:g,onKeyPress:y,...v}=s,b=i?{}:{onClick:l,onSubmit:c,onPointerDown:d,onPointerUp:f,onKeyDown:p,onKeyUp:g,onKeyPress:y};return E.jsx(o,{...v,ref:a,className:r,role:e==="a"?"link":"button",tabIndex:0,...b,"aria-disabled":i,children:n})}),Cye={"indicator-icon":"_indicator-icon_zr2a0_17"},bye=u.forwardRef(function({children:e,className:n,size:r="100%",colour:i,indicator:s},a){const o=De(Cye["indicator-icon"],n);return E.jsx("div",{ref:a,className:o,"data-indicator":s,style:{"--cpd-icon-button-size":r,"--cpd-color-icon-tertiary":i},children:be.Children.only(e)})}),fQ=u.createContext(null);function zx(){const t=u.useContext(fQ);if(t==null)throw new Error("Tooltip components must be wrapped in <Tooltip />");return t}function ry(){return typeof window<"u"}function ep(t){return mQ(t)?(t.nodeName||"").toLowerCase():"#document"}function Ns(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jl(t){var e;return(e=(mQ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mQ(t){return ry()?t instanceof Node||t instanceof Ns(t).Node:!1}function kn(t){return ry()?t instanceof Element||t instanceof Ns(t).Element:!1}function ua(t){return ry()?t instanceof HTMLElement||t instanceof Ns(t).HTMLElement:!1}function CT(t){return!ry()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ns(t).ShadowRoot}function l4(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=da(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Eye(t){return["table","td","th"].includes(ep(t))}function iy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Wx(t){const e=sy(),n=kn(t)?da(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Sye(t){let e=uu(t);for(;ua(e)&&!zc(e);){if(Wx(e))return e;if(iy(e))return null;e=uu(e)}return null}function sy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zc(t){return["html","body","#document"].includes(ep(t))}function da(t){return Ns(t).getComputedStyle(t)}function ay(t){return kn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uu(t){if(ep(t)==="html")return t;const e=t.assignedSlot||t.parentNode||CT(t)&&t.host||Jl(t);return CT(e)?e.host:e}function pQ(t){const e=uu(t);return zc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ua(e)&&l4(e)?e:pQ(e)}function Id(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=pQ(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=Ns(i);if(s){const o=bT(a);return e.concat(a,a.visualViewport||[],l4(i)?i:[],o&&n?Id(o):[])}return e.concat(i,Id(i,[],n))}function bT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ET(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function mm(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&CT(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function gQ(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function vQ(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function wye(t){return Tye()?!1:!gH()&&t.width===0&&t.height===0||gH()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function yQ(){return/apple/i.test(navigator.vendor)}function gH(){const t=/android/i;return t.test(gQ())||t.test(vQ())}function kye(){return gQ().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Tye(){return vQ().includes("jsdom/")}function ST(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function Rye(t){return"nativeEvent"in t}function Iye(t){return t.matches("html,body")}function yd(t){return(t==null?void 0:t.ownerDocument)||document}function CE(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function t2(t){return"composedPath"in t?t.composedPath()[0]:t.target}const xye="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Mye(t){return ua(t)&&t.matches(xye)}const Pye=["top","right","bottom","left"],qd=Math.min,aa=Math.max,c5=Math.round,Ev=Math.floor,Fl=t=>({x:t,y:t}),Lye={left:"right",right:"left",bottom:"top",top:"bottom"},Oye={start:"end",end:"start"};function wT(t,e,n){return aa(t,qd(e,n))}function du(t,e){return typeof t=="function"?t(e):t}function hu(t){return t.split("-")[0]}function tp(t){return t.split("-")[1]}function Yx(t){return t==="x"?"y":"x"}function Jx(t){return t==="y"?"height":"width"}function Gd(t){return["top","bottom"].includes(hu(t))?"y":"x"}function Qx(t){return Yx(Gd(t))}function Aye(t,e,n){n===void 0&&(n=!1);const r=tp(t),i=Qx(t),s=Jx(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=u5(a)),[a,u5(a)]}function Nye(t){const e=u5(t);return[kT(t),e,kT(e)]}function kT(t){return t.replace(/start|end/g,e=>Oye[e])}function Dye(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function Uye(t,e,n,r){const i=tp(t);let s=Dye(hu(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(kT)))),s}function u5(t){return t.replace(/left|right|bottom|top/g,e=>Lye[e])}function Fye(t){return{top:0,right:0,bottom:0,left:0,...t}}function _Q(t){return typeof t!="number"?Fye(t):{top:t,right:t,bottom:t,left:t}}function d5(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jye=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],TT=jye.join(","),CQ=typeof Element>"u",ug=CQ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,h5=!CQ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},f5=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",a=s||n&&e&&t(e.parentNode);return a},Hye=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},$ye=function(e,n,r){if(f5(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(TT));return n&&ug.call(e,TT)&&i.unshift(e),i=i.filter(r),i},Vye=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!f5(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:a,candidates:c})}else{var d=ug.call(a,TT);d&&r.filter(a)&&(n||!e.includes(a))&&i.push(a);var f=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),p=!f5(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(f&&p){var g=t(f===!0?a.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:a,candidates:g})}else s.unshift.apply(s,a.children)}}return i},bQ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},EQ=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Hye(e))&&!bQ(e)?0:e.tabIndex},Bye=function(e,n){var r=EQ(e);return r<0&&n&&!bQ(e)?0:r},qye=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},SQ=function(e){return e.tagName==="INPUT"},Gye=function(e){return SQ(e)&&e.type==="hidden"},Kye=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Zye=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},zye=function(e){if(!e.name)return!0;var n=e.form||h5(e),r=function(o){return n.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=Zye(i,e.form);return!s||s===e},Wye=function(e){return SQ(e)&&e.type==="radio"},Yye=function(e){return Wye(e)&&!zye(e)},Jye=function(e){var n,r=e&&h5(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var a,o,l;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,d,f;r=h5(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=i)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},vH=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Qye=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ug.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(ug.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var l=e.parentElement,c=h5(e);if(l&&!l.shadowRoot&&i(l)===!0)return vH(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=o}if(Jye(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return vH(e);return!1},Xye=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ug.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},e_e=function(e,n){return!(n.disabled||f5(n)||Gye(n)||Qye(n,e)||Kye(n)||Xye(n))},yH=function(e,n){return!(Yye(n)||EQ(n)<0||!e_e(e,n))},t_e=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},n_e=function t(e){var n=[],r=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,l=Bye(o,a),c=a?t(i.candidates):o;l===0?a?n.push.apply(n,c):n.push(o):r.push({documentOrder:s,tabIndex:l,item:i,isScope:a,content:c})}),r.sort(qye).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},wQ=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Vye([e],n.includeContainer,{filter:yH.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:t_e}):r=$ye(e,n.includeContainer,yH.bind(null,n)),n_e(r)};function _H(t,e,n){let{reference:r,floating:i}=t;const s=Gd(e),a=Qx(e),o=Jx(a),l=hu(e),c=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[o]/2-i[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(tp(e)){case"start":g[a]-=p*(n&&c?-1:1);break;case"end":g[a]+=p*(n&&c?-1:1);break}return g}const r_e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=_H(c,r,l),p=r,g={},y=0;for(let v=0;v<o.length;v++){const{name:b,fn:C}=o[v],{x:S,y:R,data:w,reset:I}=await C({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:a,elements:{reference:t,floating:e}});d=S??d,f=R??f,g={...g,[b]:{...g[b],...w}},I&&y<=50&&(y++,typeof I=="object"&&(I.placement&&(p=I.placement),I.rects&&(c=I.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):I.rects),{x:d,y:f}=_H(c,p,l)),v=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:g}};async function dg(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=du(e,t),y=_Q(g),b=o[p?f==="floating"?"reference":"floating":f],C=d5(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),S=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),w=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},I=d5(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:R,strategy:l}):S);return{top:(C.top-I.top+y.top)/w.y,bottom:(I.bottom-C.bottom+y.bottom)/w.y,left:(C.left-I.left+y.left)/w.x,right:(I.right-C.right+y.right)/w.x}}const i_e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:d=0}=du(t,e)||{};if(c==null)return{};const f=_Q(d),p={x:n,y:r},g=Qx(i),y=Jx(g),v=await a.getDimensions(c),b=g==="y",C=b?"top":"left",S=b?"bottom":"right",R=b?"clientHeight":"clientWidth",w=s.reference[y]+s.reference[g]-p[g]-s.floating[y],I=p[g]-s.reference[g],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let x=k?k[R]:0;(!x||!await(a.isElement==null?void 0:a.isElement(k)))&&(x=o.floating[R]||s.floating[y]);const L=w/2-I/2,N=x/2-v[y]/2-1,D=qd(f[C],N),U=qd(f[S],N),j=D,$=x-v[y]-U,Z=x/2-v[y]/2+L,V=wT(j,Z,$),z=!l.arrow&&tp(i)!=null&&Z!==V&&s.reference[y]/2-(Z<j?D:U)-v[y]/2<0,K=z?Z<j?Z-j:Z-$:0;return{[g]:p[g]+K,data:{[g]:V,centerOffset:Z-V-K,...z&&{alignmentOffset:K}},reset:z}}}),s_e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=du(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const C=hu(i),S=Gd(o),R=hu(o)===o,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=p||(R||!v?[u5(o)]:Nye(o)),k=y!=="none";!p&&k&&I.push(...Uye(o,v,y,w));const x=[o,...I],L=await dg(e,b),N=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&N.push(L[C]),f){const Z=Aye(i,a,w);N.push(L[Z[0]],L[Z[1]])}if(D=[...D,{placement:i,overflows:N}],!N.every(Z=>Z<=0)){var U,j;const Z=(((U=s.flip)==null?void 0:U.index)||0)+1,V=x[Z];if(V)return{data:{index:Z,overflows:D},reset:{placement:V}};let z=(j=D.filter(K=>K.overflows[0]<=0).sort((K,q)=>K.overflows[1]-q.overflows[1])[0])==null?void 0:j.placement;if(!z)switch(g){case"bestFit":{var $;const K=($=D.filter(q=>{if(k){const G=Gd(q.placement);return G===S||G==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(G=>G>0).reduce((G,J)=>G+J,0)]).sort((q,G)=>q[1]-G[1])[0])==null?void 0:$[0];K&&(z=K);break}case"initialPlacement":z=o;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function CH(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bH(t){return Pye.some(e=>t[e]>=0)}const a_e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=du(t,e);switch(r){case"referenceHidden":{const s=await dg(e,{...i,elementContext:"reference"}),a=CH(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:bH(a)}}}case"escaped":{const s=await dg(e,{...i,altBoundary:!0}),a=CH(s,n.floating);return{data:{escapedOffsets:a,escaped:bH(a)}}}default:return{}}}}};async function o_e(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=hu(n),o=tp(n),l=Gd(n)==="y",c=["left","top"].includes(a)?-1:1,d=s&&l?-1:1,f=du(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),l?{x:g*d,y:p*c}:{x:p*c,y:g*d}}const l_e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await o_e(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},c_e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:C,y:S}=b;return{x:C,y:S}}},...l}=du(t,e),c={x:n,y:r},d=await dg(e,l),f=Gd(hu(i)),p=Yx(f);let g=c[p],y=c[f];if(s){const b=p==="y"?"top":"left",C=p==="y"?"bottom":"right",S=g+d[b],R=g-d[C];g=wT(S,g,R)}if(a){const b=f==="y"?"top":"left",C=f==="y"?"bottom":"right",S=y+d[b],R=y-d[C];y=wT(S,y,R)}const v=o.fn({...e,[p]:g,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:s,[f]:a}}}}}},u_e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=du(t,e),d={x:n,y:r},f=Gd(i),p=Yx(f);let g=d[p],y=d[f];const v=du(o,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const R=p==="y"?"height":"width",w=s.reference[p]-s.floating[R]+b.mainAxis,I=s.reference[p]+s.reference[R]-b.mainAxis;g<w?g=w:g>I&&(g=I)}if(c){var C,S;const R=p==="y"?"width":"height",w=["top","left"].includes(hu(i)),I=s.reference[f]-s.floating[R]+(w&&((C=a.offset)==null?void 0:C[f])||0)+(w?0:b.crossAxis),k=s.reference[f]+s.reference[R]+(w?0:((S=a.offset)==null?void 0:S[f])||0)-(w?b.crossAxis:0);y<I?y=I:y>k&&(y=k)}return{[p]:g,[f]:y}}}},d_e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=du(t,e),d=await dg(e,c),f=hu(i),p=tp(i),g=Gd(i)==="y",{width:y,height:v}=s.floating;let b,C;f==="top"||f==="bottom"?(b=f,C=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(C=f,b=p==="end"?"top":"bottom");const S=v-d.top-d.bottom,R=y-d.left-d.right,w=qd(v-d[b],S),I=qd(y-d[C],R),k=!e.middlewareData.shift;let x=w,L=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(L=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=S),k&&!p){const D=aa(d.left,0),U=aa(d.right,0),j=aa(d.top,0),$=aa(d.bottom,0);g?L=y-2*(D!==0||U!==0?D+U:aa(d.left,d.right)):x=v-2*(j!==0||$!==0?j+$:aa(d.top,d.bottom))}await l({...e,availableWidth:L,availableHeight:x});const N=await a.getDimensions(o.floating);return y!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function kQ(t){const e=da(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ua(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,o=c5(n)!==s||c5(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Xx(t){return kn(t)?t:t.contextElement}function N2(t){const e=Xx(t);if(!ua(e))return Fl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=kQ(e);let a=(s?c5(n.width):n.width)/r,o=(s?c5(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const h_e=Fl(0);function TQ(t){const e=Ns(t);return!sy()||!e.visualViewport?h_e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function f_e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ns(t)?!1:e}function Ih(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Xx(t);let a=Fl(1);e&&(r?kn(r)&&(a=N2(r)):a=N2(t));const o=f_e(s,n,r)?TQ(s):Fl(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const p=Ns(s),g=r&&kn(r)?Ns(r):r;let y=p,v=bT(y);for(;v&&r&&g!==y;){const b=N2(v),C=v.getBoundingClientRect(),S=da(v),R=C.left+(v.clientLeft+parseFloat(S.paddingLeft))*b.x,w=C.top+(v.clientTop+parseFloat(S.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,f*=b.y,l+=R,c+=w,y=Ns(v),v=bT(y)}}return d5({width:d,height:f,x:l,y:c})}function eM(t,e){const n=ay(t).scrollLeft;return e?e.left+n:Ih(Jl(t)).left+n}function RQ(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:eM(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function m_e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=Jl(r),o=e?iy(e.floating):!1;if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Fl(1);const d=Fl(0),f=ua(r);if((f||!f&&!s)&&((ep(r)!=="body"||l4(a))&&(l=ay(r)),ua(r))){const g=Ih(r);c=N2(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=a&&!f&&!s?RQ(a,l,!0):Fl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function p_e(t){return Array.from(t.getClientRects())}function g_e(t){const e=Jl(t),n=ay(t),r=t.ownerDocument.body,i=aa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=aa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+eM(t);const o=-n.scrollTop;return da(r).direction==="rtl"&&(a+=aa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function v_e(t,e){const n=Ns(t),r=Jl(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=sy();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function y_e(t,e){const n=Ih(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ua(t)?N2(t):Fl(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function EH(t,e,n){let r;if(e==="viewport")r=v_e(t,n);else if(e==="document")r=g_e(Jl(t));else if(kn(e))r=y_e(e,n);else{const i=TQ(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return d5(r)}function IQ(t,e){const n=uu(t);return n===e||!kn(n)||zc(n)?!1:da(n).position==="fixed"||IQ(n,e)}function __e(t,e){const n=e.get(t);if(n)return n;let r=Id(t,[],!1).filter(o=>kn(o)&&ep(o)!=="body"),i=null;const s=da(t).position==="fixed";let a=s?uu(t):t;for(;kn(a)&&!zc(a);){const o=da(a),l=Wx(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||l4(a)&&!l&&IQ(t,a))?r=r.filter(d=>d!==a):i=o,a=uu(a)}return e.set(t,r),r}function C_e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?iy(e)?[]:__e(e,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,d)=>{const f=EH(e,d,i);return c.top=aa(f.top,c.top),c.right=qd(f.right,c.right),c.bottom=qd(f.bottom,c.bottom),c.left=aa(f.left,c.left),c},EH(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function b_e(t){const{width:e,height:n}=kQ(t);return{width:e,height:n}}function E_e(t,e,n){const r=ua(e),i=Jl(e),s=n==="fixed",a=Ih(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Fl(0);if(r||!r&&!s)if((ep(e)!=="body"||l4(i))&&(o=ay(e)),r){const p=Ih(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=eM(i));const c=i&&!r&&!s?RQ(i,o):Fl(0),d=a.left+o.scrollLeft-l.x-c.x,f=a.top+o.scrollTop-l.y-c.y;return{x:d,y:f,width:a.width,height:a.height}}function bE(t){return da(t).position==="static"}function SH(t,e){if(!ua(t)||da(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Jl(t)===n&&(n=n.ownerDocument.body),n}function xQ(t,e){const n=Ns(t);if(iy(t))return n;if(!ua(t)){let i=uu(t);for(;i&&!zc(i);){if(kn(i)&&!bE(i))return i;i=uu(i)}return n}let r=SH(t,e);for(;r&&Eye(r)&&bE(r);)r=SH(r,e);return r&&zc(r)&&bE(r)&&!Wx(r)?n:r||Sye(t)||n}const S_e=async function(t){const e=this.getOffsetParent||xQ,n=this.getDimensions,r=await n(t.floating);return{reference:E_e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function w_e(t){return da(t).direction==="rtl"}const k_e={convertOffsetParentRelativeRectToViewportRelativeRect:m_e,getDocumentElement:Jl,getClippingRect:C_e,getOffsetParent:xQ,getElementRects:S_e,getClientRects:p_e,getDimensions:b_e,getScale:N2,isElement:kn,isRTL:w_e};function MQ(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function T_e(t,e){let n=null,r;const i=Jl(t);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:f,width:p,height:g}=c;if(o||e(),!p||!g)return;const y=Ev(f),v=Ev(i.clientWidth-(d+p)),b=Ev(i.clientHeight-(f+g)),C=Ev(d),R={rootMargin:-y+"px "+-v+"px "+-b+"px "+-C+"px",threshold:aa(0,qd(1,l))||1};let w=!0;function I(k){const x=k[0].intersectionRatio;if(x!==l){if(!w)return a();x?a(!1,x):r=setTimeout(()=>{a(!1,1e-7)},1e3)}x===1&&!MQ(c,t.getBoundingClientRect())&&a(),w=!1}try{n=new IntersectionObserver(I,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(I,R)}n.observe(t)}return a(!0),s}function PQ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Xx(t),d=i||s?[...c?Id(c):[],...Id(e)]:[];d.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),s&&C.addEventListener("resize",n)});const f=c&&o?T_e(c,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(C=>{let[S]=C;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var R;(R=g)==null||R.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let y,v=l?Ih(t):null;l&&b();function b(){const C=Ih(t);v&&!MQ(v,C)&&n(),v=C,y=requestAnimationFrame(b)}return n(),()=>{var C;d.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),f==null||f(),(C=g)==null||C.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const R_e=l_e,I_e=c_e,x_e=s_e,M_e=d_e,P_e=a_e,wH=i_e,L_e=u_e,O_e=(t,e,n)=>{const r=new Map,i={platform:k_e,...n},s={...i.platform,_c:r};return r_e(t,e,{...i,platform:s})};var e6=typeof document<"u"?u.useLayoutEffect:u.useEffect;function m5(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!m5(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!m5(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function LQ(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kH(t,e){const n=LQ(t);return Math.round(e*n)/n}function EE(t){const e=u.useRef(t);return e6(()=>{e.current=t}),e}function OQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[d,f]=u.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=u.useState(r);m5(p,r)||g(r);const[y,v]=u.useState(null),[b,C]=u.useState(null),S=u.useCallback(q=>{q!==k.current&&(k.current=q,v(q))},[]),R=u.useCallback(q=>{q!==x.current&&(x.current=q,C(q))},[]),w=s||y,I=a||b,k=u.useRef(null),x=u.useRef(null),L=u.useRef(d),N=l!=null,D=EE(l),U=EE(i),j=EE(c),$=u.useCallback(()=>{if(!k.current||!x.current)return;const q={placement:e,strategy:n,middleware:p};U.current&&(q.platform=U.current),O_e(k.current,x.current,q).then(G=>{const J={...G,isPositioned:j.current!==!1};Z.current&&!m5(L.current,J)&&(L.current=J,Bm.flushSync(()=>{f(J)}))})},[p,e,n,U,j]);e6(()=>{c===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[c]);const Z=u.useRef(!1);e6(()=>(Z.current=!0,()=>{Z.current=!1}),[]),e6(()=>{if(w&&(k.current=w),I&&(x.current=I),w&&I){if(D.current)return D.current(w,I,$);$()}},[w,I,$,D,N]);const V=u.useMemo(()=>({reference:k,floating:x,setReference:S,setFloating:R}),[S,R]),z=u.useMemo(()=>({reference:w,floating:I}),[w,I]),K=u.useMemo(()=>{const q={position:n,left:0,top:0};if(!z.floating)return q;const G=kH(z.floating,d.x),J=kH(z.floating,d.y);return o?{...q,transform:"translate("+G+"px, "+J+"px)",...LQ(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:J}},[n,o,z.floating,d.x,d.y]);return u.useMemo(()=>({...d,update:$,refs:V,elements:z,floatingStyles:K}),[d,$,V,z,K])}const A_e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wH({element:r.current,padding:i}).fn(n):{}:r?wH({element:r,padding:i}).fn(n):{}}}},AQ=(t,e)=>({...R_e(t),options:[t,e]}),NQ=(t,e)=>({...I_e(t),options:[t,e]}),N_e=(t,e)=>({...L_e(t),options:[t,e]}),DQ=(t,e)=>({...x_e(t),options:[t,e]}),D_e=(t,e)=>({...M_e(t),options:[t,e]}),U_e=(t,e)=>({...P_e(t),options:[t,e]}),UQ=(t,e)=>({...A_e(t),options:[t,e]});function FQ(t){return u.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const jQ={...Iz},F_e=jQ.useInsertionEffect,j_e=F_e||(t=>t());function Dc(t){const e=u.useRef(()=>{});return j_e(()=>{e.current=t}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var ss=typeof document<"u"?u.useLayoutEffect:u.useEffect;let TH=!1,H_e=0;const RH=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+H_e++;function $_e(){const[t,e]=u.useState(()=>TH?RH():void 0);return ss(()=>{t==null&&e(RH())},[]),u.useEffect(()=>{TH=!0},[]),t}const V_e=jQ.useId,pm=V_e||$_e,B_e=u.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s,shift:a}},width:o=14,height:l=7,tipRadius:c=0,strokeWidth:d=0,staticOffset:f,stroke:p,d:g,style:{transform:y,...v}={},...b}=e,C=pm(),[S,R]=u.useState(!1);if(ss(()=>{if(!i)return;da(i).direction==="rtl"&&R(!0)},[i]),!i)return null;const[w,I]=r.split("-"),k=w==="top"||w==="bottom";let x=f;(k&&a!=null&&a.x||!k&&a!=null&&a.y)&&(x=null);const L=d*2,N=L/2,D=o/2*(c/-8+1),U=l/2*c/4,j=!!g,$=x&&I==="end"?"bottom":"top";let Z=x&&I==="end"?"right":"left";x&&S&&(Z=I==="end"?"left":"right");const V=(s==null?void 0:s.x)!=null?x||s.x:"",z=(s==null?void 0:s.y)!=null?x||s.y:"",K=g||"M0,0"+(" H"+o)+(" L"+(o-D)+","+(l-U))+(" Q"+o/2+","+l+" "+D+","+(l-U))+" Z",q={top:j?"rotate(180deg)":"",left:j?"rotate(90deg)":"rotate(-90deg)",bottom:j?"":"rotate(180deg)",right:j?"rotate(-90deg)":"rotate(90deg)"}[w];return E.jsxs("svg",{...b,"aria-hidden":!0,ref:n,width:j?o:o+L,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[Z]:V,[$]:z,[w]:k||j?"100%":"calc(100% - "+L/2+"px)",transform:[q,y].filter(G=>!!G).join(" "),...v},children:[L>0&&E.jsx("path",{clipPath:"url(#"+C+")",fill:"none",stroke:p,strokeWidth:L+(g?0:1),d:K}),E.jsx("path",{stroke:L&&!g?b.fill:"none",d:K}),E.jsx("clipPath",{id:C,children:E.jsx("rect",{x:-N,y:N*(j?-1:1),width:o+L,height:o})})]})});function q_e(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const G_e=u.createContext(null),K_e=u.createContext(null),tM=()=>{var t;return((t=u.useContext(G_e))==null?void 0:t.id)||null},nM=()=>u.useContext(K_e);function c4(t){return"data-floating-ui-"+t}function SE(t){const e=u.useRef(t);return ss(()=>{e.current=t}),e}const IH=c4("safe-polygon");function t6(t,e,n){return n&&!ST(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function Z_e(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:a}=t,{enabled:o=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:f=0,move:p=!0}=e,g=nM(),y=tM(),v=SE(c),b=SE(l),C=SE(n),S=u.useRef(),R=u.useRef(-1),w=u.useRef(),I=u.useRef(-1),k=u.useRef(!0),x=u.useRef(!1),L=u.useRef(()=>{}),N=u.useRef(!1),D=u.useCallback(()=>{var K;const q=(K=i.current.openEvent)==null?void 0:K.type;return(q==null?void 0:q.includes("mouse"))&&q!=="mousedown"},[i]);u.useEffect(()=>{if(!o)return;function K(q){let{open:G}=q;G||(clearTimeout(R.current),clearTimeout(I.current),k.current=!0,N.current=!1)}return s.on("openchange",K),()=>{s.off("openchange",K)}},[o,s]),u.useEffect(()=>{if(!o||!v.current||!n)return;function K(G){D()&&r(!1,G,"hover")}const q=yd(a.floating).documentElement;return q.addEventListener("mouseleave",K),()=>{q.removeEventListener("mouseleave",K)}},[a.floating,n,r,o,v,D]);const U=u.useCallback(function(K,q,G){q===void 0&&(q=!0),G===void 0&&(G="hover");const J=t6(b.current,"close",S.current);J&&!w.current?(clearTimeout(R.current),R.current=window.setTimeout(()=>r(!1,K,G),J)):q&&(clearTimeout(R.current),r(!1,K,G))},[b,r]),j=Dc(()=>{L.current(),w.current=void 0}),$=Dc(()=>{if(x.current){const K=yd(a.floating).body;K.style.pointerEvents="",K.removeAttribute(IH),x.current=!1}}),Z=Dc(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);u.useEffect(()=>{if(!o)return;function K(B){if(clearTimeout(R.current),k.current=!1,d&&!ST(S.current)||f>0&&!t6(b.current,"open"))return;const Q=t6(b.current,"open",S.current);Q?R.current=window.setTimeout(()=>{C.current||r(!0,B,"hover")},Q):n||r(!0,B,"hover")}function q(B){if(Z())return;L.current();const Q=yd(a.floating);if(clearTimeout(I.current),N.current=!1,v.current&&i.current.floatingContext){n||clearTimeout(R.current),w.current=v.current({...i.current.floatingContext,tree:g,x:B.clientX,y:B.clientY,onClose(){$(),j(),Z()||U(B,!0,"safe-polygon")}});const ve=w.current;Q.addEventListener("mousemove",ve),L.current=()=>{Q.removeEventListener("mousemove",ve)};return}(S.current==="touch"?!mm(a.floating,B.relatedTarget):!0)&&U(B)}function G(B){Z()||i.current.floatingContext&&(v.current==null||v.current({...i.current.floatingContext,tree:g,x:B.clientX,y:B.clientY,onClose(){$(),j(),Z()||U(B)}})(B))}if(kn(a.domReference)){var J;const B=a.domReference;return n&&B.addEventListener("mouseleave",G),(J=a.floating)==null||J.addEventListener("mouseleave",G),p&&B.addEventListener("mousemove",K,{once:!0}),B.addEventListener("mouseenter",K),B.addEventListener("mouseleave",q),()=>{var Q;n&&B.removeEventListener("mouseleave",G),(Q=a.floating)==null||Q.removeEventListener("mouseleave",G),p&&B.removeEventListener("mousemove",K),B.removeEventListener("mouseenter",K),B.removeEventListener("mouseleave",q)}}},[a,o,t,d,f,p,U,j,$,r,n,C,g,b,v,i,Z]),ss(()=>{var K;if(o&&n&&(K=v.current)!=null&&K.__options.blockPointerEvents&&D()){x.current=!0;const G=a.floating;if(kn(a.domReference)&&G){var q;const J=yd(a.floating).body;J.setAttribute(IH,"");const B=a.domReference,Q=g==null||(q=g.nodesRef.current.find(pe=>pe.id===y))==null||(q=q.context)==null?void 0:q.elements.floating;return Q&&(Q.style.pointerEvents=""),J.style.pointerEvents="none",B.style.pointerEvents="auto",G.style.pointerEvents="auto",()=>{J.style.pointerEvents="",B.style.pointerEvents="",G.style.pointerEvents=""}}}},[o,n,y,a,g,v,D]),ss(()=>{n||(S.current=void 0,N.current=!1,j(),$())},[n,j,$]),u.useEffect(()=>()=>{j(),clearTimeout(R.current),clearTimeout(I.current),$()},[o,a.domReference,j,$]);const V=u.useMemo(()=>{function K(q){S.current=q.pointerType}return{onPointerDown:K,onPointerEnter:K,onMouseMove(q){const{nativeEvent:G}=q;function J(){!k.current&&!C.current&&r(!0,G,"hover")}d&&!ST(S.current)||n||f===0||N.current&&q.movementX**2+q.movementY**2<2||(clearTimeout(I.current),S.current==="touch"?J():(N.current=!0,I.current=window.setTimeout(J,f)))}}},[d,r,n,C,f]),z=u.useMemo(()=>({onMouseEnter(){clearTimeout(R.current)},onMouseLeave(K){Z()||U(K.nativeEvent,!1)}}),[U,Z]);return u.useMemo(()=>o?{reference:V,floating:z}:{},[o,V,z])}const RT=()=>{},HQ=u.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:RT,setState:RT,isInstantPhase:!1}),z_e=()=>u.useContext(HQ);function W_e(t){const{children:e,delay:n,timeoutMs:r=0}=t,[i,s]=u.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=u.useRef(null),o=u.useCallback(l=>{s({currentId:l})},[]);return ss(()=>{i.currentId?a.current===null?a.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),a.current=null)},[i.currentId,i.isInstantPhase]),E.jsx(HQ.Provider,{value:u.useMemo(()=>({...i,setState:s,setCurrentId:o}),[i,o]),children:e})}function Y_e(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:i}=t,{id:s,enabled:a=!0}=e,o=s??i,l=z_e(),{currentId:c,setCurrentId:d,initialDelay:f,setState:p,timeoutMs:g}=l;return ss(()=>{a&&c&&(p({delay:{open:1,close:t6(f,"close")}}),c!==o&&r(!1))},[a,o,r,p,c,f]),ss(()=>{function y(){r(!1),p({delay:f,currentId:null})}if(a&&c&&!n&&c===o){if(g){const v=window.setTimeout(y,g);return()=>{clearTimeout(v)}}y()}},[a,n,p,c,o,r,f,g]),ss(()=>{a&&(d===RT||!n||d(o))},[a,n,d,o]),l}function wE(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(a=>{var o;return i.parentId===a.id&&((o=i.context)==null?void 0:o.open)})}),n=n.concat(r);return n}const $Q=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function VQ(t,e){const n=wQ(t,$Q());e==="prev"&&n.reverse();const r=n.indexOf(ET(yd(t)));return n.slice(r+1)[0]}function J_e(){return VQ(document.body,"next")}function Q_e(){return VQ(document.body,"prev")}function kE(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!mm(n,r)}function X_e(t){wQ(t,$Q()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function xH(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const BQ={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let eCe;function MH(t){t.key==="Tab"&&(t.target,clearTimeout(eCe))}const PH=u.forwardRef(function(e,n){const[r,i]=u.useState();ss(()=>(yQ()&&i("button"),document.addEventListener("keydown",MH),()=>{document.removeEventListener("keydown",MH)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[c4("focus-guard")]:"",style:BQ};return E.jsx("span",{...e,...s})}),qQ=u.createContext(null),LH=c4("portal");function tCe(t){t===void 0&&(t={});const{id:e,root:n}=t,r=pm(),i=rCe(),[s,a]=u.useState(null),o=u.useRef(null);return ss(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{o.current=null})},[s]),ss(()=>{if(!r||o.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(LH,""),l.appendChild(c),o.current=c,a(c)},[e,r]),ss(()=>{if(n===null||!r||o.current)return;let l=n||(i==null?void 0:i.portalNode);l&&!kn(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(LH,""),l=c||l,l.appendChild(d),o.current=d,a(d)},[e,n,r,i]),s}function nCe(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=tCe({id:n,root:r}),[a,o]=u.useState(null),l=u.useRef(null),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),p=a==null?void 0:a.modal,g=a==null?void 0:a.open,y=!!a&&!a.modal&&a.open&&i&&!!(r||s);return u.useEffect(()=>{if(!s||!i||p)return;function v(b){s&&kE(b)&&(b.type==="focusin"?xH:X_e)(s)}return s.addEventListener("focusin",v,!0),s.addEventListener("focusout",v,!0),()=>{s.removeEventListener("focusin",v,!0),s.removeEventListener("focusout",v,!0)}},[s,i,p]),u.useEffect(()=>{s&&(g||xH(s))},[g,s]),E.jsxs(qQ.Provider,{value:u.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:f,portalNode:s,setFocusManagerState:o}),[i,s]),children:[y&&s&&E.jsx(PH,{"data-type":"outside",ref:l,onFocus:v=>{if(kE(v,s)){var b;(b=d.current)==null||b.focus()}else{const C=Q_e()||(a==null?void 0:a.domReference);C==null||C.focus()}}}),y&&s&&E.jsx("span",{"aria-owns":s.id,style:BQ}),s&&Bm.createPortal(e,s),y&&s&&E.jsx(PH,{"data-type":"outside",ref:c,onFocus:v=>{if(kE(v,s)){var b;(b=f.current)==null||b.focus()}else{const C=J_e()||(a==null?void 0:a.domReference);C==null||C.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,v.nativeEvent,"focus-out"))}}})]})}const rCe=()=>u.useContext(qQ),iCe="data-floating-ui-focusable",sCe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},aCe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},OH=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function oCe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:a=!0,escapeKey:o=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:y}=e,v=nM(),b=Dc(typeof l=="function"?l:()=>!1),C=typeof l=="function"?b:l,S=u.useRef(!1),R=u.useRef(!1),{escapeKey:w,outsidePress:I}=OH(g),{escapeKey:k,outsidePress:x}=OH(y),L=u.useRef(!1),N=Dc(V=>{var z;if(!n||!a||!o||V.key!=="Escape"||L.current)return;const K=(z=s.current.floatingContext)==null?void 0:z.nodeId,q=v?wE(v.nodesRef.current,K):[];if(!w&&(V.stopPropagation(),q.length>0)){let G=!0;if(q.forEach(J=>{var B;if((B=J.context)!=null&&B.open&&!J.context.dataRef.current.__escapeKeyBubbles){G=!1;return}}),!G)return}r(!1,Rye(V)?V.nativeEvent:V,"escape-key")}),D=Dc(V=>{var z;const K=()=>{var q;N(V),(q=t2(V))==null||q.removeEventListener("keydown",K)};(z=t2(V))==null||z.addEventListener("keydown",K)}),U=Dc(V=>{var z;const K=S.current;S.current=!1;const q=R.current;if(R.current=!1,c==="click"&&q||K||typeof C=="function"&&!C(V))return;const G=t2(V),J="["+c4("inert")+"]",B=yd(i.floating).querySelectorAll(J);let Q=kn(G)?G:null;for(;Q&&!zc(Q);){const Te=uu(Q);if(zc(Te)||!kn(Te))break;Q=Te}if(B.length&&kn(G)&&!Iye(G)&&!mm(G,i.floating)&&Array.from(B).every(Te=>!mm(Q,Te)))return;if(ua(G)&&Z){const Te=zc(G),Ce=da(G),we=/auto|scroll/,Ee=Te||we.test(Ce.overflowX),ze=Te||we.test(Ce.overflowY),qt=Ee&&G.clientWidth>0&&G.scrollWidth>G.clientWidth,dr=ze&&G.clientHeight>0&&G.scrollHeight>G.clientHeight,nn=Ce.direction==="rtl",We=dr&&(nn?V.offsetX<=G.offsetWidth-G.clientWidth:V.offsetX>G.clientWidth),pi=qt&&V.offsetY>G.clientHeight;if(We||pi)return}const pe=(z=s.current.floatingContext)==null?void 0:z.nodeId,ve=v&&wE(v.nodesRef.current,pe).some(Te=>{var Ce;return CE(V,(Ce=Te.context)==null?void 0:Ce.elements.floating)});if(CE(V,i.floating)||CE(V,i.domReference)||ve)return;const Re=v?wE(v.nodesRef.current,pe):[];if(Re.length>0){let Te=!0;if(Re.forEach(Ce=>{var we;if((we=Ce.context)!=null&&we.open&&!Ce.context.dataRef.current.__outsidePressBubbles){Te=!1;return}}),!Te)return}r(!1,V,"outside-press")}),j=Dc(V=>{var z;const K=()=>{var q;U(V),(q=t2(V))==null||q.removeEventListener(c,K)};(z=t2(V))==null||z.addEventListener(c,K)});u.useEffect(()=>{if(!n||!a)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=I;let V=-1;function z(B){r(!1,B,"ancestor-scroll")}function K(){window.clearTimeout(V),L.current=!0}function q(){V=window.setTimeout(()=>{L.current=!1},sy()?5:0)}const G=yd(i.floating);o&&(G.addEventListener("keydown",k?D:N,k),G.addEventListener("compositionstart",K),G.addEventListener("compositionend",q)),C&&G.addEventListener(c,x?j:U,x);let J=[];return p&&(kn(i.domReference)&&(J=Id(i.domReference)),kn(i.floating)&&(J=J.concat(Id(i.floating))),!kn(i.reference)&&i.reference&&i.reference.contextElement&&(J=J.concat(Id(i.reference.contextElement)))),J=J.filter(B=>{var Q;return B!==((Q=G.defaultView)==null?void 0:Q.visualViewport)}),J.forEach(B=>{B.addEventListener("scroll",z,{passive:!0})}),()=>{o&&(G.removeEventListener("keydown",k?D:N,k),G.removeEventListener("compositionstart",K),G.removeEventListener("compositionend",q)),C&&G.removeEventListener(c,x?j:U,x),J.forEach(B=>{B.removeEventListener("scroll",z)}),window.clearTimeout(V)}},[s,i,o,C,c,n,r,p,a,w,I,N,k,D,U,x,j]),u.useEffect(()=>{S.current=!1},[C,c]);const $=u.useMemo(()=>({onKeyDown:N,...d&&{[sCe[f]]:V=>{r(!1,V.nativeEvent,"reference-press")},...f!=="click"&&{onClick(V){r(!1,V.nativeEvent,"reference-press")}}}}),[N,r,d,f]),Z=u.useMemo(()=>({onKeyDown:N,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[aCe[c]]:()=>{S.current=!0}}),[N,c]);return u.useMemo(()=>a?{reference:$,floating:Z}:{},[a,$,Z])}function lCe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=pm(),s=u.useRef({}),[a]=u.useState(()=>q_e()),o=tM()!=null,[l,c]=u.useState(r.reference),d=Dc((g,y,v)=>{s.current.openEvent=g?y:void 0,a.emit("openchange",{open:g,event:y,reason:v,nested:o}),n==null||n(g,y,v)}),f=u.useMemo(()=>({setPositionReference:c}),[]),p=u.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return u.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:p,events:a,floatingId:i,refs:f}),[e,d,p,a,i,f])}function cCe(t){t===void 0&&(t={});const{nodeId:e}=t,n=lCe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,a]=u.useState(null),[o,l]=u.useState(null),d=(i==null?void 0:i.domReference)||s,f=u.useRef(null),p=nM();ss(()=>{d&&(f.current=d)},[d]);const g=OQ({...t,elements:{...i,...o&&{reference:o}}}),y=u.useCallback(R=>{const w=kn(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;l(w),g.refs.setReference(w)},[g.refs]),v=u.useCallback(R=>{(kn(R)||R===null)&&(f.current=R,a(R)),(kn(g.refs.reference.current)||g.refs.reference.current===null||R!==null&&!kn(R))&&g.refs.setReference(R)},[g.refs]),b=u.useMemo(()=>({...g.refs,setReference:v,setPositionReference:y,domReference:f}),[g.refs,v,y]),C=u.useMemo(()=>({...g.elements,domReference:d}),[g.elements,d]),S=u.useMemo(()=>({...g,...r,refs:b,elements:C,nodeId:e}),[g,b,C,e,r]);return ss(()=>{r.dataRef.current.floatingContext=S;const R=p==null?void 0:p.nodesRef.current.find(w=>w.id===e);R&&(R.context=S)}),u.useMemo(()=>({...g,context:S,refs:b,elements:C}),[g,b,C,S])}function uCe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:a}=t,{enabled:o=!0,visibleOnly:l=!0}=e,c=u.useRef(!1),d=u.useRef(),f=u.useRef(!0);u.useEffect(()=>{if(!o)return;const g=Ns(a.domReference);function y(){!n&&ua(a.domReference)&&a.domReference===ET(yd(a.domReference))&&(c.current=!0)}function v(){f.current=!0}return g.addEventListener("blur",y),g.addEventListener("keydown",v,!0),()=>{g.removeEventListener("blur",y),g.removeEventListener("keydown",v,!0)}},[a.domReference,n,o]),u.useEffect(()=>{if(!o)return;function g(y){let{reason:v}=y;(v==="reference-press"||v==="escape-key")&&(c.current=!0)}return i.on("openchange",g),()=>{i.off("openchange",g)}},[i,o]),u.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=u.useMemo(()=>({onPointerDown(g){wye(g.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(g){if(c.current)return;const y=t2(g.nativeEvent);if(l&&kn(y))try{if(yQ()&&kye())throw Error();if(!y.matches(":focus-visible"))return}catch{if(!f.current&&!Mye(y))return}r(!0,g.nativeEvent,"focus")},onBlur(g){c.current=!1;const y=g.relatedTarget,v=g.nativeEvent,b=kn(y)&&y.hasAttribute(c4("focus-guard"))&&y.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var C;const S=ET(a.domReference?a.domReference.ownerDocument:document);!y&&S===a.domReference||mm((C=s.current.floatingContext)==null?void 0:C.refs.floating.current,S)||mm(a.domReference,S)||b||r(!1,v,"focus")})}}),[s,a.domReference,r,l]);return u.useMemo(()=>o?{reference:p}:{},[o,p])}const AH="active",NH="selected";function TE(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[AH]:a,[NH]:o,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[iCe]:""},...s,...e.map(a=>{const o=a?a[n]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((a,o)=>(o&&Object.entries(o).forEach(l=>{let[c,d]=l;if(!(i&&[AH,NH].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var f;(f=r.get(c))==null||f.push(d),a[c]=function(){for(var p,g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];return(p=r.get(c))==null?void 0:p.map(b=>b(...y)).find(b=>b!==void 0)}}}else a[c]=d}),a),{})}}function dCe(t){t===void 0&&(t=[]);const e=t.map(o=>o==null?void 0:o.reference),n=t.map(o=>o==null?void 0:o.floating),r=t.map(o=>o==null?void 0:o.item),i=u.useCallback(o=>TE(o,t,"reference"),e),s=u.useCallback(o=>TE(o,t,"floating"),n),a=u.useCallback(o=>TE(o,t,"item"),r);return u.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:a}),[i,s,a])}const hCe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function fCe(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:i}=t,{enabled:s=!0,role:a="dialog"}=e,o=(n=hCe.get(a))!=null?n:a,l=pm(),d=tM()!=null,f=u.useMemo(()=>o==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":o==="alertdialog"?"dialog":o,"aria-controls":r?i:void 0,...o==="listbox"&&{role:"combobox"},...o==="menu"&&{id:l},...o==="menu"&&d&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[o,i,d,r,l,a]),p=u.useMemo(()=>{const y={id:i,...o&&{role:o}};return o==="tooltip"||a==="label"?y:{...y,...o==="menu"&&{"aria-labelledby":l}}},[o,i,l,a]),g=u.useCallback(y=>{let{active:v,selected:b}=y;const C={role:"option",...v&&{id:i+"-option"}};switch(a){case"select":return{...C,"aria-selected":v&&b};case"combobox":return{...C,...v&&{"aria-selected":!0}}}return{}},[i,a]);return u.useMemo(()=>s?{reference:f,floating:p,item:g}:{},[s,f,p,g])}const mCe="_tooltip_6ode6_8",pCe="_invisible_6ode6_21",gCe="_caption_6ode6_28",vCe="_arrow_6ode6_33",n6={tooltip:mCe,invisible:pCe,caption:gCe,arrow:vCe},GQ={open:300,close:0},KQ=({children:t})=>E.jsx(W_e,{delay:GQ,timeoutMs:300,children:t});KQ.displayName="TooltipProvider";function yCe({open:t,disabled:e=!1,onOpenChange:n,placement:r="bottom",isTriggerInteractive:i,caption:s,"aria-atomic":a,"aria-live":o,...l}){const c=pm(),d=pm(),f=u.useRef(null),[p,g]=u.useState(!1),y=e?!1:t??p,v=($,Z,V)=>{n==null||n($,Z,V),t===void 0&&g($)},b=cCe({placement:r,open:y,onOpenChange:v,whileElementsMounted:PQ,middleware:[AQ(6),DQ({crossAxis:r.includes("-"),fallbackAxisSideDirection:"start",padding:5}),NQ({padding:5}),UQ({element:f})]}),C=b.context,{delay:S,initialDelay:R}=Y_e(C);if(R!==GQ)throw new Error("Tooltips must be wrapped in a global <TooltipProvider>");const w=Z_e(C,{move:!1,enabled:t===void 0,delay:i?S:{},mouseOnly:!0}),I=uCe(C,{enabled:t===void 0}),k=u.useRef(void 0);u.useEffect(()=>()=>window.clearTimeout(k.current),[]);const x=u.useMemo(()=>{const $=()=>{k.current===void 0?k.current=window.setTimeout(()=>{v(!1),k.current=void 0},1500):window.clearTimeout(k.current)};return{reference:{onTouchStart:()=>{k.current!==void 0&&window.clearTimeout(k.current),k.current=window.setTimeout(()=>{v(!0),k.current=void 0},500)},onTouchEnd:$,onTouchCancel:$}}},[]),L=oCe(C),N="label"in l?"label":"description",D=fCe(C,{enabled:N==="description",role:"tooltip"}),U=u.useMemo(()=>N==="label"?{reference:{"aria-labelledby":c,"aria-describedby":s?d:void 0}}:{},[N,c,d]),j=dCe([w,I,x,L,D,U]);return u.useMemo(()=>({labelId:c,captionId:s?d:void 0,caption:s,purpose:N,open:y,setOpen:v,tooltipProps:{"aria-atomic":a,"aria-live":o},...j,...b,arrowRef:f}),[c,d,s,D,y,v,j,b,f])}const _Ce=t=>"label"in t&&!!t.label;function Bi({children:t,isTriggerInteractive:e=!0,nonInteractiveTriggerTabIndex:n=0,...r}){const i=yCe({isTriggerInteractive:e,...r});return E.jsxs(fQ.Provider,{value:i,children:[E.jsx(ECe,{isTriggerInteractive:e,nonInteractiveTriggerTabIndex:n,children:t}),E.jsxs(bCe,{children:[E.jsx("span",{id:i.labelId,children:_Ce(r)?r.label:r.description}),E.jsx(CCe,{})]})]})}function CCe(){const{caption:t,captionId:e}=zx();if(!t)return null;const r=typeof t=="string"?"span":"div";return E.jsx(r,{id:e,className:De(n6.caption,"cpd-theme-dark"),children:t})}function bCe({children:t}){const{context:e,open:n,arrowRef:r,purpose:i,...s}=zx();return!n&&i!=="label"?null:E.jsx(nCe,{children:E.jsxs("div",{ref:s.refs.setFloating,style:s.floatingStyles,...s.tooltipProps,...s.getFloatingProps(),className:De(n6.tooltip,{[n6.invisible]:i==="label"&&!n}),children:[E.jsx(B_e,{ref:r,context:e,width:10,height:6,className:n6.arrow}),t]})})}const ECe=({children:t,isTriggerInteractive:e,nonInteractiveTriggerTabIndex:n})=>{const r=zx(),i=t==null?void 0:t.ref,s=FQ([r.refs.setReference,i]),a=u.useMemo(()=>{if(u.isValidElement(t))if(e){const o=r.getReferenceProps({...typeof t.props=="object"?t.props:{},ref:s});return u.cloneElement(t,o)}else{const o=r.getReferenceProps({ref:s,tabIndex:n}),{"aria-labelledby":l,"aria-describedby":c,...d}=o;return E.jsx("span",{tabIndex:n,...d,children:u.cloneElement(t,{"aria-labelledby":l,"aria-describedby":c})})}},[r,s,t]);if(!a)throw new Error("Tooltip anchor must be a single valid React element");return a},ZQ=u.forwardRef(function({children:e,className:n,indicator:r,size:i="32px",style:s,disabled:a,destructive:o,tooltip:l,subtleBackground:c,...d},f){const p=De(_E["icon-button"],n,{[_E.destructive]:o,[_E["subtle-bg"]]:c}),g=E.jsx(hQ,{as:"button",ref:f,className:p,style:{"--cpd-icon-button-size":i,...s},disabled:a,...d,"data-indicator":r,children:E.jsx(bye,{indicator:r,colour:a?"var(--cpd-color-icon-disabled)":void 0,children:be.Children.only(e)})});return l?E.jsx(Bi,{label:l,children:g}):g}),SCe=({type:t,title:e,children:n,className:r,actions:i,onClose:s,...a})=>{const o=De(Df.alert,r),l=u.useCallback(c=>{switch(t){case"critical":return E.jsx(ty,{...c});case"info":return E.jsx(fye,{...c});case"success":return E.jsx(hye,{...c})}},[t]);return E.jsxs("div",{...a,className:o,"data-type":t,children:[l({width:24,height:24,className:Df.icon,"aria-hidden":!0}),E.jsxs("div",{className:Df.content,children:[E.jsxs("div",{className:Df["text-content"],children:[E.jsx(_n,{size:"md",weight:"semibold",children:e}),E.jsx(_n,{size:"sm",weight:"regular",children:n})]}),i&&E.jsx("div",{className:Df.actions,children:i})]}),s&&E.jsx(ZQ,{onClick:s,"aria-label":"Close",role:"button",className:Df.close,children:E.jsx(ny,{})})]})},wCe="@",kCe="#",TCe="+",RCe=new Intl.Segmenter;function ICe(t){if(t.length<1)return"";const e=t[0];[wCe,kCe,TCe].includes(e)&&(t=t.substring(1));const n=RCe.segment(t)[Symbol.iterator]().next();return n.done?"":n.value.segment}const xCe="_avatar_1qbcf_8",MCe="_image_1qbcf_41",RE={avatar:xCe,image:MCe,"avatar-imageless":"_avatar-imageless_1qbcf_52"};function PCe(t){return t.split("").reduce((i,s)=>i+s.charCodeAt(0),0)%6+1}function LCe(t){return!!(t.onClick||t.onKeyDown||t.onKeyUp)}const OCe=u.forwardRef(function({src:e,id:n,name:r="",type:i="round",className:s="",size:a,style:o={},onError:l,...c},d){return be.createElement(LCe(c)?"button":"span",{ref:d,role:"img","aria-label":n,...c,"data-type":i,"data-color":PCe(n),className:De(RE.avatar,s,{[RE["avatar-imageless"]]:!e}),style:{...o,"--cpd-avatar-size":a}},E.jsx(be.Fragment,{children:e?E.jsx("img",{loading:"lazy",alt:"",src:e,referrerPolicy:"no-referrer",className:De(RE.image),"data-type":i,style:o,width:a,height:a,onError:l}):ICe(r)}))});function et(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ACe(t,e){const n=u.createContext(e),r=s=>{const{children:a,...o}=s,l=u.useMemo(()=>o,Object.values(o));return E.jsx(n.Provider,{value:l,children:a})};r.displayName=t+"Provider";function i(s){const a=u.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Ql(t,e=[]){let n=[];function r(s,a){const o=u.createContext(a),l=n.length;n=[...n,a];const c=f=>{var C;const{scope:p,children:g,...y}=f,v=((C=p==null?void 0:p[t])==null?void 0:C[l])||o,b=u.useMemo(()=>y,Object.values(y));return E.jsx(v.Provider,{value:b,children:g})};c.displayName=s+"Provider";function d(f,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[l])||o,y=u.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(a=>u.createContext(a));return function(o){const l=(o==null?void 0:o[t])||s;return u.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,NCe(i,...e)]}function NCe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...o,...f}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function DH(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Xl(...t){return e=>{let n=!1;const r=t.map(i=>{const s=DH(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():DH(t[i],null)}}}}function fn(...t){return u.useCallback(Xl(...t),t)}var gm=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(UCe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(IT,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(IT,{...r,ref:e,children:n})});gm.displayName="Slot";var IT=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=jCe(n);return u.cloneElement(n,{...FCe(r,n.props),ref:e?Xl(e,i):i})}return u.Children.count(n)>1?u.Children.only(null):null});IT.displayName="SlotClone";var DCe=({children:t})=>E.jsx(E.Fragment,{children:t});function UCe(t){return u.isValidElement(t)&&t.type===DCe}function FCe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function jCe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var HCe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Er=HCe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?gm:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function $Ce(t,e){t&&Bm.flushSync(()=>t.dispatchEvent(e))}function zQ(t){const e=t+"CollectionProvider",[n,r]=Ql(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:y,children:v}=g,b=be.useRef(null),C=be.useRef(new Map).current;return E.jsx(i,{scope:y,itemMap:C,collectionRef:b,children:v})};a.displayName=e;const o=t+"CollectionSlot",l=be.forwardRef((g,y)=>{const{scope:v,children:b}=g,C=s(o,v),S=fn(y,C.collectionRef);return E.jsx(gm,{ref:S,children:b})});l.displayName=o;const c=t+"CollectionItemSlot",d="data-radix-collection-item",f=be.forwardRef((g,y)=>{const{scope:v,children:b,...C}=g,S=be.useRef(null),R=fn(y,S),w=s(c,v);return be.useEffect(()=>(w.itemMap.set(S,{ref:S,...C}),()=>void w.itemMap.delete(S))),E.jsx(gm,{[d]:"",ref:R,children:b})});f.displayName=c;function p(g){const y=s(t+"CollectionConsumer",g);return be.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const C=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((w,I)=>C.indexOf(w.ref.current)-C.indexOf(I.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:l,ItemSlot:f},p,r]}var VCe=u.createContext(void 0);function rM(t){const e=u.useContext(VCe);return t||e||"ltr"}var WQ=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(qCe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(xT,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(xT,{...r,ref:e,children:n})});WQ.displayName="Slot";var xT=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=KCe(n),s=GCe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});xT.displayName="SlotClone";var BCe=({children:t})=>E.jsx(E.Fragment,{children:t});function qCe(t){return u.isValidElement(t)&&t.type===BCe}function GCe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function KCe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ZCe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],YQ=ZCe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?WQ:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function zCe(t,e){t&&Bm.flushSync(()=>t.dispatchEvent(e))}function js(t){const e=u.useRef(t);return u.useEffect(()=>{e.current=t}),u.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function WCe(t,e=globalThis==null?void 0:globalThis.document){const n=js(t);u.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var YCe="DismissableLayer",MT="dismissableLayer.update",JCe="dismissableLayer.pointerDownOutside",QCe="dismissableLayer.focusOutside",UH,JQ=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iM=u.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=t,c=u.useContext(JQ),[d,f]=u.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=u.useState({}),y=fn(e,x=>f(x)),v=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),C=v.indexOf(b),S=d?v.indexOf(d):-1,R=c.layersWithOutsidePointerEventsDisabled.size>0,w=S>=C,I=tbe(x=>{const L=x.target,N=[...c.branches].some(D=>D.contains(L));!w||N||(i==null||i(x),a==null||a(x),x.defaultPrevented||o==null||o())},p),k=nbe(x=>{const L=x.target;[...c.branches].some(D=>D.contains(L))||(s==null||s(x),a==null||a(x),x.defaultPrevented||o==null||o())},p);return WCe(x=>{S===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&o&&(x.preventDefault(),o()))},p),u.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(UH=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),FH(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=UH)}},[d,p,n,c]),u.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),FH())},[d,c]),u.useEffect(()=>{const x=()=>g({});return document.addEventListener(MT,x),()=>document.removeEventListener(MT,x)},[]),E.jsx(YQ.div,{...l,ref:y,style:{pointerEvents:R?w?"auto":"none":void 0,...t.style},onFocusCapture:et(t.onFocusCapture,k.onFocusCapture),onBlurCapture:et(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:et(t.onPointerDownCapture,I.onPointerDownCapture)})});iM.displayName=YCe;var XCe="DismissableLayerBranch",ebe=u.forwardRef((t,e)=>{const n=u.useContext(JQ),r=u.useRef(null),i=fn(e,r);return u.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),E.jsx(YQ.div,{...t,ref:i})});ebe.displayName=XCe;function tbe(t,e=globalThis==null?void 0:globalThis.document){const n=js(t),r=u.useRef(!1),i=u.useRef(()=>{});return u.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){QQ(JCe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function nbe(t,e=globalThis==null?void 0:globalThis.document){const n=js(t),r=u.useRef(!1);return u.useEffect(()=>{const i=s=>{s.target&&!r.current&&QQ(QCe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FH(){const t=new CustomEvent(MT);document.dispatchEvent(t)}function QQ(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?zCe(i,s):i.dispatchEvent(s)}var IE=0;function XQ(){u.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??jH()),document.body.insertAdjacentElement("beforeend",t[1]??jH()),IE++,()=>{IE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),IE--}},[])}function jH(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var xE="focusScope.autoFocusOnMount",ME="focusScope.autoFocusOnUnmount",HH={bubbles:!1,cancelable:!0},rbe="FocusScope",eX=u.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[o,l]=u.useState(null),c=js(i),d=js(s),f=u.useRef(null),p=fn(e,v=>l(v)),g=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(r){let v=function(R){if(g.paused||!o)return;const w=R.target;o.contains(w)?f.current=w:rd(f.current,{select:!0})},b=function(R){if(g.paused||!o)return;const w=R.relatedTarget;w!==null&&(o.contains(w)||rd(f.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const I of R)I.removedNodes.length>0&&rd(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const S=new MutationObserver(C);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),S.disconnect()}}},[r,o,g.paused]),u.useEffect(()=>{if(o){VH.add(g);const v=document.activeElement;if(!o.contains(v)){const C=new CustomEvent(xE,HH);o.addEventListener(xE,c),o.dispatchEvent(C),C.defaultPrevented||(ibe(cbe(tX(o)),{select:!0}),document.activeElement===v&&rd(o))}return()=>{o.removeEventListener(xE,c),setTimeout(()=>{const C=new CustomEvent(ME,HH);o.addEventListener(ME,d),o.dispatchEvent(C),C.defaultPrevented||rd(v??document.body,{select:!0}),o.removeEventListener(ME,d),VH.remove(g)},0)}}},[o,c,d,g]);const y=u.useCallback(v=>{if(!n&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,C=document.activeElement;if(b&&C){const S=v.currentTarget,[R,w]=sbe(S);R&&w?!v.shiftKey&&C===w?(v.preventDefault(),n&&rd(R,{select:!0})):v.shiftKey&&C===R&&(v.preventDefault(),n&&rd(w,{select:!0})):C===S&&v.preventDefault()}},[n,r,g.paused]);return E.jsx(Er.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});eX.displayName=rbe;function ibe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(rd(r,{select:e}),document.activeElement!==n)return}function sbe(t){const e=tX(t),n=$H(e,t),r=$H(e.reverse(),t);return[n,r]}function tX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $H(t,e){for(const n of t)if(!abe(n,{upTo:e}))return n}function abe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function obe(t){return t instanceof HTMLInputElement&&"select"in t}function rd(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&obe(t)&&e&&t.select()}}var VH=lbe();function lbe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=BH(t,e),t.unshift(e)},remove(e){var n;t=BH(t,e),(n=t[0])==null||n.resume()}}}function BH(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cbe(t){return t.filter(e=>e.tagName!=="A")}var Kd=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},ube=Iz.useId||(()=>{}),dbe=0;function Wc(t){const[e,n]=u.useState(ube());return Kd(()=>{n(r=>r??String(dbe++))},[t]),t||(e?`radix-${e}`:"")}var hbe="Arrow",nX=u.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return E.jsx(Er.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:E.jsx("polygon",{points:"0,0 30,0 15,10"})})});nX.displayName=hbe;var fbe=nX;function rX(t){const[e,n]=u.useState(void 0);return Kd(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var sM="Popper",[iX,sX]=Ql(sM),[mbe,aX]=iX(sM),oX=t=>{const{__scopePopper:e,children:n}=t,[r,i]=u.useState(null);return E.jsx(mbe,{scope:e,anchor:r,onAnchorChange:i,children:n})};oX.displayName=sM;var lX="PopperAnchor",cX=u.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=aX(lX,n),a=u.useRef(null),o=fn(e,a);return u.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:E.jsx(Er.div,{...i,ref:o})});cX.displayName=lX;var aM="PopperContent",[pbe,gbe]=iX(aM),uX=u.forwardRef((t,e)=>{var Ce,we,Ee,ze,qt,dr;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=t,b=aX(aM,n),[C,S]=u.useState(null),R=fn(e,nn=>S(nn)),[w,I]=u.useState(null),k=rX(w),x=(k==null?void 0:k.width)??0,L=(k==null?void 0:k.height)??0,N=r+(s!=="center"?"-"+s:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},U=Array.isArray(c)?c:[c],j=U.length>0,$={padding:D,boundary:U.filter(ybe),altBoundary:j},{refs:Z,floatingStyles:V,placement:z,isPositioned:K,middlewareData:q}=OQ({strategy:"fixed",placement:N,whileElementsMounted:(...nn)=>PQ(...nn,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[AQ({mainAxis:i+L,alignmentAxis:a}),l&&NQ({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?N_e():void 0,...$}),l&&DQ({...$}),D_e({...$,apply:({elements:nn,rects:We,availableWidth:pi,availableHeight:hr})=>{const{width:Mi,height:tl}=We.reference,va=nn.floating.style;va.setProperty("--radix-popper-available-width",`${pi}px`),va.setProperty("--radix-popper-available-height",`${hr}px`),va.setProperty("--radix-popper-anchor-width",`${Mi}px`),va.setProperty("--radix-popper-anchor-height",`${tl}px`)}}),w&&UQ({element:w,padding:o}),_be({arrowWidth:x,arrowHeight:L}),p&&U_e({strategy:"referenceHidden",...$})]}),[G,J]=fX(z),B=js(y);Kd(()=>{K&&(B==null||B())},[K,B]);const Q=(Ce=q.arrow)==null?void 0:Ce.x,pe=(we=q.arrow)==null?void 0:we.y,ve=((Ee=q.arrow)==null?void 0:Ee.centerOffset)!==0,[Re,Te]=u.useState();return Kd(()=>{C&&Te(window.getComputedStyle(C).zIndex)},[C]),E.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:K?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(ze=q.transformOrigin)==null?void 0:ze.x,(qt=q.transformOrigin)==null?void 0:qt.y].join(" "),...((dr=q.hide)==null?void 0:dr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:E.jsx(pbe,{scope:n,placedSide:G,onArrowChange:I,arrowX:Q,arrowY:pe,shouldHideArrow:ve,children:E.jsx(Er.div,{"data-side":G,"data-align":J,...v,ref:R,style:{...v.style,animation:K?void 0:"none"}})})})});uX.displayName=aM;var dX="PopperArrow",vbe={top:"bottom",right:"left",bottom:"top",left:"right"},hX=u.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=gbe(dX,r),a=vbe[s.placedSide];return E.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:E.jsx(fbe,{...i,ref:n,style:{...i.style,display:"block"}})})});hX.displayName=dX;function ybe(t){return t!==null}var _be=t=>({name:"transformOrigin",options:t,fn(e){var b,C,S;const{placement:n,rects:r,middlewareData:i}=e,a=((b=i.arrow)==null?void 0:b.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,d]=fX(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(((C=i.arrow)==null?void 0:C.x)??0)+o/2,g=(((S=i.arrow)==null?void 0:S.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=a?f:`${p}px`,v=`${-l}px`):c==="top"?(y=a?f:`${p}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=a?f:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=a?f:`${g}px`),{data:{x:y,y:v}}}});function fX(t){const[e,n="center"]=t.split("-");return[e,n]}var Cbe=oX,bbe=cX,Ebe=uX,Sbe=hX,wbe="Portal",mX=u.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[i,s]=u.useState(!1);Kd(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?DY.createPortal(E.jsx(Er.div,{...r,ref:e}),a):null});mX.displayName=wbe;function kbe(t,e){return u.useReducer((n,r)=>e[n][r]??n,t)}var a1=t=>{const{present:e,children:n}=t,r=Tbe(e),i=typeof n=="function"?n({present:r.isPresent}):u.Children.only(n),s=fn(r.ref,Rbe(i));return typeof n=="function"||r.isPresent?u.cloneElement(i,{ref:s}):null};a1.displayName="Presence";function Tbe(t){const[e,n]=u.useState(),r=u.useRef({}),i=u.useRef(t),s=u.useRef("none"),a=t?"mounted":"unmounted",[o,l]=kbe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const c=Sv(r.current);s.current=o==="mounted"?c:"none"},[o]),Kd(()=>{const c=r.current,d=i.current;if(d!==t){const p=s.current,g=Sv(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Kd(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,f=g=>{const v=Sv(r.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(s.current=Sv(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:u.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Sv(t){return(t==null?void 0:t.animationName)||"none"}function Rbe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function oy({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Ibe({defaultProp:e,onChange:n}),s=t!==void 0,a=s?t:r,o=js(n),l=u.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&o(f)}else i(c)},[s,t,i,o]);return[a,l]}function Ibe({defaultProp:t,onChange:e}){const n=u.useState(t),[r]=n,i=u.useRef(r),s=js(e);return u.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var PE="rovingFocusGroup.onEntryFocus",xbe={bubbles:!1,cancelable:!0},ly="RovingFocusGroup",[PT,pX,Mbe]=zQ(ly),[Pbe,gX]=Ql(ly,[Mbe]),[Lbe,Obe]=Pbe(ly),vX=u.forwardRef((t,e)=>E.jsx(PT.Provider,{scope:t.__scopeRovingFocusGroup,children:E.jsx(PT.Slot,{scope:t.__scopeRovingFocusGroup,children:E.jsx(Abe,{...t,ref:e})})}));vX.displayName=ly;var Abe=u.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...f}=t,p=u.useRef(null),g=fn(e,p),y=rM(s),[v=null,b]=oy({prop:a,defaultProp:o,onChange:l}),[C,S]=u.useState(!1),R=js(c),w=pX(n),I=u.useRef(!1),[k,x]=u.useState(0);return u.useEffect(()=>{const L=p.current;if(L)return L.addEventListener(PE,R),()=>L.removeEventListener(PE,R)},[R]),E.jsx(Lbe,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:v,onItemFocus:u.useCallback(L=>b(L),[b]),onItemShiftTab:u.useCallback(()=>S(!0),[]),onFocusableItemAdd:u.useCallback(()=>x(L=>L+1),[]),onFocusableItemRemove:u.useCallback(()=>x(L=>L-1),[]),children:E.jsx(Er.div,{tabIndex:C||k===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:et(t.onMouseDown,()=>{I.current=!0}),onFocus:et(t.onFocus,L=>{const N=!I.current;if(L.target===L.currentTarget&&N&&!C){const D=new CustomEvent(PE,xbe);if(L.currentTarget.dispatchEvent(D),!D.defaultPrevented){const U=w().filter(z=>z.focusable),j=U.find(z=>z.active),$=U.find(z=>z.id===v),V=[j,$,...U].filter(Boolean).map(z=>z.ref.current);CX(V,d)}}I.current=!1}),onBlur:et(t.onBlur,()=>S(!1))})})}),yX="RovingFocusGroupItem",_X=u.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...a}=t,o=Wc(),l=s||o,c=Obe(yX,n),d=c.currentTabStopId===l,f=pX(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=c;return u.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),E.jsx(PT.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:E.jsx(Er.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...a,ref:e,onMouseDown:et(t.onMouseDown,y=>{r?c.onItemFocus(l):y.preventDefault()}),onFocus:et(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:et(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){c.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=Ube(y,c.orientation,c.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let C=f().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")C.reverse();else if(v==="prev"||v==="next"){v==="prev"&&C.reverse();const S=C.indexOf(y.currentTarget);C=c.loop?Fbe(C,S+1):C.slice(S+1)}setTimeout(()=>CX(C))}})})})});_X.displayName=yX;var Nbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dbe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ube(t,e,n){const r=Dbe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Nbe[r]}function CX(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Fbe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jbe=vX,Hbe=_X,$be=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Uf=new WeakMap,wv=new WeakMap,kv={},LE=0,bX=function(t){return t&&(t.host||bX(t.parentNode))},Vbe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=bX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Bbe=function(t,e,n,r){var i=Vbe(e,Array.isArray(t)?t:[t]);kv[n]||(kv[n]=new WeakMap);var s=kv[n],a=[],o=new Set,l=new Set(i),c=function(f){!f||o.has(f)||(o.add(f),c(f.parentNode))};i.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))d(p);else try{var g=p.getAttribute(r),y=g!==null&&g!=="false",v=(Uf.get(p)||0)+1,b=(s.get(p)||0)+1;Uf.set(p,v),s.set(p,b),a.push(p),v===1&&y&&wv.set(p,!0),b===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",p,C)}})};return d(e),o.clear(),LE++,function(){a.forEach(function(f){var p=Uf.get(f)-1,g=s.get(f)-1;Uf.set(f,p),s.set(f,g),p||(wv.has(f)||f.removeAttribute(r),wv.delete(f)),g||f.removeAttribute(n)}),LE--,LE||(Uf=new WeakMap,Uf=new WeakMap,wv=new WeakMap,kv={})}},EX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=$be(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Bbe(r,i,n,"aria-hidden")):function(){return null}},LT=function(t,e){return LT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},LT(t,e)};function so(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var di=function(){return di=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},di.apply(this,arguments)};function u4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function SX(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function wX(t,e){return function(n,r){e(n,r,t)}}function kX(t,e,n,r,i,s){function a(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,g=n.length-1;g>=0;g--){var y={};for(var v in r)y[v]=v==="access"?{}:r[v];for(var v in r.access)y.access[v]=r.access[v];y.addInitializer=function(C){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(C||null))};var b=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],y);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(f=a(b.get))&&(d.get=f),(f=a(b.set))&&(d.set=f),(f=a(b.init))&&i.unshift(f)}else(f=a(b))&&(o==="field"?i.unshift(f):d[l]=f)}c&&Object.defineProperty(c,r.name,d),p=!0}function TX(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function RX(t){return typeof t=="symbol"?t:"".concat(t)}function IX(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function xX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oM(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function cy(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var uy=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function MX(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&uy(e,t,n)}function Zd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ja(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function PX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ja(arguments[e]));return t}function LX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function Qa(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Yc(t){return this instanceof Yc?(this.v=t,this):new Yc(t)}function lM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(y){return Promise.resolve(y).then(g,f)}}function o(g,y){r[g]&&(i[g]=function(v){return new Promise(function(b,C){s.push([g,v,b,C])>1||l(g,v)})},y&&(i[g]=y(i[g])))}function l(g,y){try{c(r[g](y))}catch(v){p(s[0][3],v)}}function c(g){g.value instanceof Yc?Promise.resolve(g.value.v).then(d,f):p(s[0][2],g)}function d(g){l("next",g)}function f(g){l("throw",g)}function p(g,y){g(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function OX(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(a){return(n=!n)?{value:Yc(t[i](a)),done:!1}:s?s(a):a}:s}}function cM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zd=="function"?Zd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function AX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var qbe=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},OT=function(t){return OT=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},OT(t)};function NX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=OT(t),r=0;r<n.length;r++)n[r]!=="default"&&uy(e,t,n[r]);return qbe(e,t),e}function DX(t){return t&&t.__esModule?t:{default:t}}function UX(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function FX(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function jX(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function HX(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var Gbe=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function $X(t){function e(s){t.error=t.hasError?new Gbe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function VX(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?e?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):t}const Kbe={__extends:so,__assign:di,__rest:u4,__decorate:SX,__param:wX,__esDecorate:kX,__runInitializers:TX,__propKey:RX,__setFunctionName:IX,__metadata:xX,__awaiter:oM,__generator:cy,__createBinding:uy,__exportStar:MX,__values:Zd,__read:Ja,__spread:PX,__spreadArrays:LX,__spreadArray:Qa,__await:Yc,__asyncGenerator:lM,__asyncDelegator:OX,__asyncValues:cM,__makeTemplateObject:AX,__importStar:NX,__importDefault:DX,__classPrivateFieldGet:UX,__classPrivateFieldSet:FX,__classPrivateFieldIn:jX,__addDisposableResource:HX,__disposeResources:$X,__rewriteRelativeImportExtension:VX},QXe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:HX,get __assign(){return di},__asyncDelegator:OX,__asyncGenerator:lM,__asyncValues:cM,__await:Yc,__awaiter:oM,__classPrivateFieldGet:UX,__classPrivateFieldIn:jX,__classPrivateFieldSet:FX,__createBinding:uy,__decorate:SX,__disposeResources:$X,__esDecorate:kX,__exportStar:MX,__extends:so,__generator:cy,__importDefault:DX,__importStar:NX,__makeTemplateObject:AX,__metadata:xX,__param:wX,__propKey:RX,__read:Ja,__rest:u4,__rewriteRelativeImportExtension:VX,__runInitializers:TX,__setFunctionName:IX,__spread:PX,__spreadArray:Qa,__spreadArrays:LX,__values:Zd,default:Kbe},Symbol.toStringTag,{value:"Module"}));var S0="right-scroll-bar-position",w0="width-before-scroll-bar",Zbe="with-scroll-bars-hidden",zbe="--removed-body-scroll-bar-size";function OE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Wbe(t,e){var n=u.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Ybe=typeof window<"u"?u.useLayoutEffect:u.useEffect,qH=new WeakMap;function BX(t,e){var n=Wbe(null,function(r){return t.forEach(function(i){return OE(i,r)})});return Ybe(function(){var r=qH.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(o){s.has(o)||OE(o,null)}),s.forEach(function(o){i.has(o)||OE(o,a)})}qH.set(n,t)},[t]),n}function Jbe(t){return t}function Qbe(t,e){e===void 0&&(e=Jbe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var l=function(){var d=a;a=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){a.push(d),c()},filter:function(d){return a=a.filter(d),n}}}};return i}function qX(t){t===void 0&&(t={});var e=Qbe(null);return e.options=di({async:!0,ssr:!1},t),e}var GX=function(t){var e=t.sideCar,n=u4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return u.createElement(r,di({},n))};GX.isSideCarExport=!0;function KX(t,e){return t.useMedium(e),GX}var ZX=qX(),AE=function(){},dy=u.forwardRef(function(t,e){var n=u.useRef(null),r=u.useState({onScrollCapture:AE,onWheelCapture:AE,onTouchMoveCapture:AE}),i=r[0],s=r[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,y=t.inert,v=t.allowPinchZoom,b=t.as,C=b===void 0?"div":b,S=t.gapMode,R=u4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,I=BX([n,e]),k=di(di({},R),i);return u.createElement(u.Fragment,null,d&&u.createElement(w,{sideCar:ZX,removeScrollBar:c,shards:f,noIsolation:g,inert:y,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:S}),a?u.cloneElement(u.Children.only(o),di(di({},k),{ref:I})):u.createElement(C,di({},k,{className:l,ref:I}),o))});dy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dy.classNames={fullWidth:w0,zeroRight:S0};var Xbe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eEe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Xbe();return e&&t.setAttribute("nonce",e),t}function tEe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function nEe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rEe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=eEe())&&(tEe(e,n),nEe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iEe=function(){var t=rEe();return function(e,n){u.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},uM=function(){var t=iEe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},sEe={left:0,top:0,right:0,gap:0},NE=function(t){return parseInt(t||"",10)||0},aEe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[NE(n),NE(r),NE(i)]},oEe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return sEe;var e=aEe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},lEe=uM(),D2="data-scroll-locked",cEe=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Zbe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(D2,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(S0,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(w0,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(S0," .").concat(S0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(w0," .").concat(w0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(D2,`] {
    `).concat(zbe,": ").concat(o,`px;
  }
`)},GH=function(){var t=parseInt(document.body.getAttribute(D2)||"0",10);return isFinite(t)?t:0},uEe=function(){u.useEffect(function(){return document.body.setAttribute(D2,(GH()+1).toString()),function(){var t=GH()-1;t<=0?document.body.removeAttribute(D2):document.body.setAttribute(D2,t.toString())}},[])},zX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;uEe();var s=u.useMemo(function(){return oEe(i)},[i]);return u.createElement(lEe,{styles:cEe(s,!e,i,n?"":"!important")})},AT=!1;if(typeof window<"u")try{var Tv=Object.defineProperty({},"passive",{get:function(){return AT=!0,!0}});window.addEventListener("test",Tv,Tv),window.removeEventListener("test",Tv,Tv)}catch{AT=!1}var Ff=AT?{passive:!1}:!1,dEe=function(t){return t.tagName==="TEXTAREA"},WX=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dEe(t)&&n[e]==="visible")},hEe=function(t){return WX(t,"overflowY")},fEe=function(t){return WX(t,"overflowX")},KH=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=YX(t,r);if(i){var s=JX(t,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},mEe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},pEe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},YX=function(t,e){return t==="v"?hEe(e):fEe(e)},JX=function(t,e){return t==="v"?mEe(e):pEe(e)},gEe=function(t,e){return t==="h"&&e==="rtl"?-1:1},vEe=function(t,e,n,r,i){var s=gEe(t,window.getComputedStyle(e).direction),a=s*r,o=n.target,l=e.contains(o),c=!1,d=a>0,f=0,p=0;do{var g=JX(t,o),y=g[0],v=g[1],b=g[2],C=v-b-s*y;(y||C)&&YX(t,o)&&(f+=C,p+=y),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(c=!0),c},Rv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ZH=function(t){return[t.deltaX,t.deltaY]},zH=function(t){return t&&"current"in t?t.current:t},yEe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_Ee=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},CEe=0,jf=[];function bEe(t){var e=u.useRef([]),n=u.useRef([0,0]),r=u.useRef(),i=u.useState(CEe++)[0],s=u.useState(uM)[0],a=u.useRef(t);u.useEffect(function(){a.current=t},[t]),u.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Qa([t.lockRef.current],(t.shards||[]).map(zH),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=u.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var C=Rv(v),S=n.current,R="deltaX"in v?v.deltaX:S[0]-C[0],w="deltaY"in v?v.deltaY:S[1]-C[1],I,k=v.target,x=Math.abs(R)>Math.abs(w)?"h":"v";if("touches"in v&&x==="h"&&k.type==="range")return!1;var L=KH(x,k);if(!L)return!0;if(L?I=x:(I=x==="v"?"h":"v",L=KH(x,k)),!L)return!1;if(!r.current&&"changedTouches"in v&&(R||w)&&(r.current=I),!I)return!0;var N=r.current||I;return vEe(N,b,v,N==="h"?R:w)},[]),l=u.useCallback(function(v){var b=v;if(!(!jf.length||jf[jf.length-1]!==s)){var C="deltaY"in b?ZH(b):Rv(b),S=e.current.filter(function(I){return I.name===b.type&&(I.target===b.target||b.target===I.shadowParent)&&yEe(I.delta,C)})[0];if(S&&S.should){b.cancelable&&b.preventDefault();return}if(!S){var R=(a.current.shards||[]).map(zH).filter(Boolean).filter(function(I){return I.contains(b.target)}),w=R.length>0?o(b,R[0]):!a.current.noIsolation;w&&b.cancelable&&b.preventDefault()}}},[]),c=u.useCallback(function(v,b,C,S){var R={name:v,delta:b,target:C,should:S,shadowParent:EEe(C)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(w){return w!==R})},1)},[]),d=u.useCallback(function(v){n.current=Rv(v),r.current=void 0},[]),f=u.useCallback(function(v){c(v.type,ZH(v),v.target,o(v,t.lockRef.current))},[]),p=u.useCallback(function(v){c(v.type,Rv(v),v.target,o(v,t.lockRef.current))},[]);u.useEffect(function(){return jf.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ff),document.addEventListener("touchmove",l,Ff),document.addEventListener("touchstart",d,Ff),function(){jf=jf.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,Ff),document.removeEventListener("touchmove",l,Ff),document.removeEventListener("touchstart",d,Ff)}},[]);var g=t.removeScrollBar,y=t.inert;return u.createElement(u.Fragment,null,y?u.createElement(s,{styles:_Ee(i)}):null,g?u.createElement(zX,{gapMode:t.gapMode}):null)}function EEe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SEe=KX(ZX,bEe);var QX=u.forwardRef(function(t,e){return u.createElement(dy,di({},t,{ref:e,sideCar:SEe}))});QX.classNames=dy.classNames;var NT=["Enter"," "],wEe=["ArrowDown","PageUp","Home"],XX=["ArrowUp","PageDown","End"],kEe=[...wEe,...XX],TEe={ltr:[...NT,"ArrowRight"],rtl:[...NT,"ArrowLeft"]},REe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},d4="Menu",[hg,IEe,xEe]=zQ(d4),[Gh,hy]=Ql(d4,[xEe,sX,gX]),fy=sX(),eee=gX(),[MEe,Kh]=Gh(d4),[PEe,h4]=Gh(d4),tee=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=t,o=fy(e),[l,c]=u.useState(null),d=u.useRef(!1),f=js(s),p=rM(i);return u.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),E.jsx(Cbe,{...o,children:E.jsx(MEe,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:E.jsx(PEe,{scope:e,onClose:u.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:a,children:r})})})};tee.displayName=d4;var LEe="MenuAnchor",dM=u.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=fy(n);return E.jsx(bbe,{...i,...r,ref:e})});dM.displayName=LEe;var hM="MenuPortal",[OEe,nee]=Gh(hM,{forceMount:void 0}),ree=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Kh(hM,e);return E.jsx(OEe,{scope:e,forceMount:n,children:E.jsx(a1,{present:n||s.open,children:E.jsx(mX,{asChild:!0,container:i,children:r})})})};ree.displayName=hM;var Ka="MenuContent",[AEe,fM]=Gh(Ka),iee=u.forwardRef((t,e)=>{const n=nee(Ka,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Kh(Ka,t.__scopeMenu),a=h4(Ka,t.__scopeMenu);return E.jsx(hg.Provider,{scope:t.__scopeMenu,children:E.jsx(a1,{present:r||s.open,children:E.jsx(hg.Slot,{scope:t.__scopeMenu,children:a.modal?E.jsx(NEe,{...i,ref:e}):E.jsx(DEe,{...i,ref:e})})})})}),NEe=u.forwardRef((t,e)=>{const n=Kh(Ka,t.__scopeMenu),r=u.useRef(null),i=fn(e,r);return u.useEffect(()=>{const s=r.current;if(s)return EX(s)},[]),E.jsx(mM,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:et(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),DEe=u.forwardRef((t,e)=>{const n=Kh(Ka,t.__scopeMenu);return E.jsx(mM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mM=u.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:y,...v}=t,b=Kh(Ka,n),C=h4(Ka,n),S=fy(n),R=eee(n),w=IEe(n),[I,k]=u.useState(null),x=u.useRef(null),L=fn(e,x,b.onContentChange),N=u.useRef(0),D=u.useRef(""),U=u.useRef(0),j=u.useRef(null),$=u.useRef("right"),Z=u.useRef(0),V=y?QX:u.Fragment,z=y?{as:gm,allowPinchZoom:!0}:void 0,K=G=>{var Ce,we;const J=D.current+G,B=w().filter(Ee=>!Ee.disabled),Q=document.activeElement,pe=(Ce=B.find(Ee=>Ee.ref.current===Q))==null?void 0:Ce.textValue,ve=B.map(Ee=>Ee.textValue),Re=zEe(ve,J,pe),Te=(we=B.find(Ee=>Ee.textValue===Re))==null?void 0:we.ref.current;(function Ee(ze){D.current=ze,window.clearTimeout(N.current),ze!==""&&(N.current=window.setTimeout(()=>Ee(""),1e3))})(J),Te&&setTimeout(()=>Te.focus())};u.useEffect(()=>()=>window.clearTimeout(N.current),[]),XQ();const q=u.useCallback(G=>{var B,Q;return $.current===((B=j.current)==null?void 0:B.side)&&YEe(G,(Q=j.current)==null?void 0:Q.area)},[]);return E.jsx(AEe,{scope:n,searchRef:D,onItemEnter:u.useCallback(G=>{q(G)&&G.preventDefault()},[q]),onItemLeave:u.useCallback(G=>{var J;q(G)||((J=x.current)==null||J.focus(),k(null))},[q]),onTriggerLeave:u.useCallback(G=>{q(G)&&G.preventDefault()},[q]),pointerGraceTimerRef:U,onPointerGraceIntentChange:u.useCallback(G=>{j.current=G},[]),children:E.jsx(V,{...z,children:E.jsx(eX,{asChild:!0,trapped:i,onMountAutoFocus:et(s,G=>{var J;G.preventDefault(),(J=x.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:E.jsx(iM,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:E.jsx(jbe,{asChild:!0,...R,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:k,onEntryFocus:et(l,G=>{C.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:E.jsx(Ebe,{role:"menu","aria-orientation":"vertical","data-state":Cee(b.open),"data-radix-menu-content":"",dir:C.dir,...S,...v,ref:L,style:{outline:"none",...v.style},onKeyDown:et(v.onKeyDown,G=>{const B=G.target.closest("[data-radix-menu-content]")===G.currentTarget,Q=G.ctrlKey||G.altKey||G.metaKey,pe=G.key.length===1;B&&(G.key==="Tab"&&G.preventDefault(),!Q&&pe&&K(G.key));const ve=x.current;if(G.target!==ve||!kEe.includes(G.key))return;G.preventDefault();const Te=w().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);XX.includes(G.key)&&Te.reverse(),KEe(Te)}),onBlur:et(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(N.current),D.current="")}),onPointerMove:et(t.onPointerMove,fg(G=>{const J=G.target,B=Z.current!==G.clientX;if(G.currentTarget.contains(J)&&B){const Q=G.clientX>Z.current?"right":"left";$.current=Q,Z.current=G.clientX}}))})})})})})})});iee.displayName=Ka;var UEe="MenuGroup",pM=u.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return E.jsx(Er.div,{role:"group",...r,ref:e})});pM.displayName=UEe;var FEe="MenuLabel",see=u.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return E.jsx(Er.div,{...r,ref:e})});see.displayName=FEe;var p5="MenuItem",WH="menu.itemSelect",my=u.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=u.useRef(null),a=h4(p5,t.__scopeMenu),o=fM(p5,t.__scopeMenu),l=fn(e,s),c=u.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const p=new CustomEvent(WH,{bubbles:!0,cancelable:!0});f.addEventListener(WH,g=>r==null?void 0:r(g),{once:!0}),$Ce(f,p),p.defaultPrevented?c.current=!1:a.onClose()}};return E.jsx(aee,{...i,ref:l,disabled:n,onClick:et(t.onClick,d),onPointerDown:f=>{var p;(p=t.onPointerDown)==null||p.call(t,f),c.current=!0},onPointerUp:et(t.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:et(t.onKeyDown,f=>{const p=o.searchRef.current!=="";n||p&&f.key===" "||NT.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});my.displayName=p5;var aee=u.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,a=fM(p5,n),o=eee(n),l=u.useRef(null),c=fn(e,l),[d,f]=u.useState(!1),[p,g]=u.useState("");return u.useEffect(()=>{const y=l.current;y&&g((y.textContent??"").trim())},[s.children]),E.jsx(hg.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:E.jsx(Hbe,{asChild:!0,...o,focusable:!r,children:E.jsx(Er.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:et(t.onPointerMove,fg(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:et(t.onPointerLeave,fg(y=>a.onItemLeave(y))),onFocus:et(t.onFocus,()=>f(!0)),onBlur:et(t.onBlur,()=>f(!1))})})})}),jEe="MenuCheckboxItem",oee=u.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return E.jsx(hee,{scope:t.__scopeMenu,checked:n,children:E.jsx(my,{role:"menuitemcheckbox","aria-checked":g5(n)?"mixed":n,...i,ref:e,"data-state":vM(n),onSelect:et(i.onSelect,()=>r==null?void 0:r(g5(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oee.displayName=jEe;var lee="MenuRadioGroup",[HEe,$Ee]=Gh(lee,{value:void 0,onValueChange:()=>{}}),cee=u.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=js(r);return E.jsx(HEe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:E.jsx(pM,{...i,ref:e})})});cee.displayName=lee;var uee="MenuRadioItem",dee=u.forwardRef((t,e)=>{const{value:n,...r}=t,i=$Ee(uee,t.__scopeMenu),s=n===i.value;return E.jsx(hee,{scope:t.__scopeMenu,checked:s,children:E.jsx(my,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":vM(s),onSelect:et(r.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,n)},{checkForDefaultPrevented:!1})})})});dee.displayName=uee;var gM="MenuItemIndicator",[hee,VEe]=Gh(gM,{checked:!1}),fee=u.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=VEe(gM,n);return E.jsx(a1,{present:r||g5(s.checked)||s.checked===!0,children:E.jsx(Er.span,{...i,ref:e,"data-state":vM(s.checked)})})});fee.displayName=gM;var BEe="MenuSeparator",mee=u.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return E.jsx(Er.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});mee.displayName=BEe;var qEe="MenuArrow",pee=u.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=fy(n);return E.jsx(Sbe,{...i,...r,ref:e})});pee.displayName=qEe;var GEe="MenuSub",[XXe,gee]=Gh(GEe),X3="MenuSubTrigger",vee=u.forwardRef((t,e)=>{const n=Kh(X3,t.__scopeMenu),r=h4(X3,t.__scopeMenu),i=gee(X3,t.__scopeMenu),s=fM(X3,t.__scopeMenu),a=u.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},d=u.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return u.useEffect(()=>d,[d]),u.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),l(null)}},[o,l]),E.jsx(dM,{asChild:!0,...c,children:E.jsx(aee,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Cee(n.open),...t,ref:Xl(e,i.onTriggerChange),onClick:f=>{var p;(p=t.onClick)==null||p.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:et(t.onPointerMove,fg(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:et(t.onPointerLeave,fg(f=>{var g,y;d();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const v=(y=n.content)==null?void 0:y.dataset.side,b=v==="right",C=b?-5:5,S=p[b?"left":"right"],R=p[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+C,y:f.clientY},{x:S,y:p.top},{x:R,y:p.top},{x:R,y:p.bottom},{x:S,y:p.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:et(t.onKeyDown,f=>{var g;const p=s.searchRef.current!=="";t.disabled||p&&f.key===" "||TEe[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});vee.displayName=X3;var yee="MenuSubContent",_ee=u.forwardRef((t,e)=>{const n=nee(Ka,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Kh(Ka,t.__scopeMenu),a=h4(Ka,t.__scopeMenu),o=gee(yee,t.__scopeMenu),l=u.useRef(null),c=fn(e,l);return E.jsx(hg.Provider,{scope:t.__scopeMenu,children:E.jsx(a1,{present:r||s.open,children:E.jsx(hg.Slot,{scope:t.__scopeMenu,children:E.jsx(mM,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:et(t.onFocusOutside,d=>{d.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:et(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:et(t.onKeyDown,d=>{var g;const f=d.currentTarget.contains(d.target),p=REe[a.dir].includes(d.key);f&&p&&(s.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});_ee.displayName=yee;function Cee(t){return t?"open":"closed"}function g5(t){return t==="indeterminate"}function vM(t){return g5(t)?"indeterminate":t?"checked":"unchecked"}function KEe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ZEe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function zEe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=ZEe(t,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function WEe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,l=e[s].y,c=e[a].x,d=e[a].y;l>r!=d>r&&n<(c-o)*(r-l)/(d-l)+o&&(i=!i)}return i}function YEe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return WEe(n,e)}function fg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var bee=tee,Eee=dM,See=ree,wee=iee,kee=pM,Tee=see,Ree=my,Iee=oee,xee=cee,Mee=dee,Pee=fee,Lee=mee,Oee=pee,Aee=vee,Nee=_ee,yM="ContextMenu",[JEe,eet]=Ql(yM,[hy]),os=hy(),[QEe,Dee]=JEe(yM),Uee=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:i,modal:s=!0}=t,[a,o]=u.useState(!1),l=os(e),c=js(r),d=u.useCallback(f=>{o(f),c(f)},[c]);return E.jsx(QEe,{scope:e,open:a,onOpenChange:d,modal:s,children:E.jsx(bee,{...l,dir:i,open:a,onOpenChange:d,modal:s,children:n})})};Uee.displayName=yM;var Fee="ContextMenuTrigger",jee=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=t,s=Dee(Fee,n),a=os(n),o=u.useRef({x:0,y:0}),l=u.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),c=u.useRef(0),d=u.useCallback(()=>window.clearTimeout(c.current),[]),f=p=>{o.current={x:p.clientX,y:p.clientY},s.onOpenChange(!0)};return u.useEffect(()=>d,[d]),u.useEffect(()=>void(r&&d()),[r,d]),E.jsxs(E.Fragment,{children:[E.jsx(Eee,{...a,virtualRef:l}),E.jsx(Er.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:et(t.onContextMenu,p=>{d(),f(p),p.preventDefault()}),onPointerDown:r?t.onPointerDown:et(t.onPointerDown,Iv(p=>{d(),c.current=window.setTimeout(()=>f(p),700)})),onPointerMove:r?t.onPointerMove:et(t.onPointerMove,Iv(d)),onPointerCancel:r?t.onPointerCancel:et(t.onPointerCancel,Iv(d)),onPointerUp:r?t.onPointerUp:et(t.onPointerUp,Iv(d))})]})});jee.displayName=Fee;var XEe="ContextMenuPortal",Hee=t=>{const{__scopeContextMenu:e,...n}=t,r=os(e);return E.jsx(See,{...r,...n})};Hee.displayName=XEe;var $ee="ContextMenuContent",Vee=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=Dee($ee,n),s=os(n),a=u.useRef(!1);return E.jsx(wee,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,o),!o.defaultPrevented&&a.current&&o.preventDefault(),a.current=!1},onInteractOutside:o=>{var l;(l=t.onInteractOutside)==null||l.call(t,o),!o.defaultPrevented&&!i.modal&&(a.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vee.displayName=$ee;var eSe="ContextMenuGroup",tSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(kee,{...i,...r,ref:e})});tSe.displayName=eSe;var nSe="ContextMenuLabel",rSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Tee,{...i,...r,ref:e})});rSe.displayName=nSe;var iSe="ContextMenuItem",Bee=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Ree,{...i,...r,ref:e})});Bee.displayName=iSe;var sSe="ContextMenuCheckboxItem",aSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Iee,{...i,...r,ref:e})});aSe.displayName=sSe;var oSe="ContextMenuRadioGroup",lSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(xee,{...i,...r,ref:e})});lSe.displayName=oSe;var cSe="ContextMenuRadioItem",uSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Mee,{...i,...r,ref:e})});uSe.displayName=cSe;var dSe="ContextMenuItemIndicator",hSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Pee,{...i,...r,ref:e})});hSe.displayName=dSe;var fSe="ContextMenuSeparator",mSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Lee,{...i,...r,ref:e})});mSe.displayName=fSe;var pSe="ContextMenuArrow",gSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Oee,{...i,...r,ref:e})});gSe.displayName=pSe;var vSe="ContextMenuSubTrigger",ySe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Aee,{...i,...r,ref:e})});ySe.displayName=vSe;var _Se="ContextMenuSubContent",CSe=u.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=os(n);return E.jsx(Nee,{...i,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CSe.displayName=_Se;function Iv(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var YH=Uee,bSe=jee,ESe=Hee,SSe=Vee;const wSe="_menu_19sse_8",kSe="_title_19sse_74",JH={menu:wSe,title:kSe},TSe={"menu-title":"_menu-title_1sgvx_8"},RSe=({title:t,id:e,className:n})=>{const r=De(TSe["menu-title"],n);return E.jsx(_n,{as:"h3",id:e,className:r,size:"sm",weight:"semibold",children:t})},_M=u.forwardRef(({title:t,showTitle:e=!0,className:n,children:r,...i},s)=>{const a=u.useId();return E.jsxs("div",{role:"menu",ref:s,"aria-label":e?void 0:t,"aria-labelledby":e?a:void 0,className:De(n,JH.menu),...i,children:[e&&E.jsx(RSe,{className:JH.title,title:t,id:a}),r]})});_M.displayName="FloatingMenu";var qee=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(xSe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(DT,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(DT,{...r,ref:e,children:n})});qee.displayName="Slot";var DT=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=PSe(n),s=MSe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});DT.displayName="SlotClone";var ISe=({children:t})=>E.jsx(E.Fragment,{children:t});function xSe(t){return u.isValidElement(t)&&t.type===ISe}function MSe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function PSe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var LSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],OSe=LSe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?qee:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),DE="focusScope.autoFocusOnMount",UE="focusScope.autoFocusOnUnmount",QH={bubbles:!1,cancelable:!0},ASe="FocusScope",Gee=u.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[o,l]=u.useState(null),c=js(i),d=js(s),f=u.useRef(null),p=fn(e,v=>l(v)),g=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(r){let v=function(R){if(g.paused||!o)return;const w=R.target;o.contains(w)?f.current=w:id(f.current,{select:!0})},b=function(R){if(g.paused||!o)return;const w=R.relatedTarget;w!==null&&(o.contains(w)||id(f.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const I of R)I.removedNodes.length>0&&id(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const S=new MutationObserver(C);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),S.disconnect()}}},[r,o,g.paused]),u.useEffect(()=>{if(o){e$.add(g);const v=document.activeElement;if(!o.contains(v)){const C=new CustomEvent(DE,QH);o.addEventListener(DE,c),o.dispatchEvent(C),C.defaultPrevented||(NSe(HSe(Kee(o)),{select:!0}),document.activeElement===v&&id(o))}return()=>{o.removeEventListener(DE,c),setTimeout(()=>{const C=new CustomEvent(UE,QH);o.addEventListener(UE,d),o.dispatchEvent(C),C.defaultPrevented||id(v??document.body,{select:!0}),o.removeEventListener(UE,d),e$.remove(g)},0)}}},[o,c,d,g]);const y=u.useCallback(v=>{if(!n&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,C=document.activeElement;if(b&&C){const S=v.currentTarget,[R,w]=DSe(S);R&&w?!v.shiftKey&&C===w?(v.preventDefault(),n&&id(R,{select:!0})):v.shiftKey&&C===R&&(v.preventDefault(),n&&id(w,{select:!0})):C===S&&v.preventDefault()}},[n,r,g.paused]);return E.jsx(OSe.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});Gee.displayName=ASe;function NSe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(id(r,{select:e}),document.activeElement!==n)return}function DSe(t){const e=Kee(t),n=XH(e,t),r=XH(e.reverse(),t);return[n,r]}function Kee(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function XH(t,e){for(const n of t)if(!USe(n,{upTo:e}))return n}function USe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function FSe(t){return t instanceof HTMLInputElement&&"select"in t}function id(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&FSe(t)&&e&&t.select()}}var e$=jSe();function jSe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=t$(t,e),t.unshift(e)},remove(e){var n;t=t$(t,e),(n=t[0])==null||n.resume()}}}function t$(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function HSe(t){return t.filter(e=>e.tagName!=="A")}var Zee=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(VSe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(UT,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(UT,{...r,ref:e,children:n})});Zee.displayName="Slot";var UT=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=qSe(n),s=BSe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});UT.displayName="SlotClone";var $Se=({children:t})=>E.jsx(E.Fragment,{children:t});function VSe(t){return u.isValidElement(t)&&t.type===$Se}function BSe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function qSe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var GSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],KSe=GSe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?Zee:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),ZSe="Portal",zee=u.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[i,s]=u.useState(!1);Kd(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?DY.createPortal(E.jsx(KSe.div,{...r,ref:e}),a):null});zee.displayName=ZSe;var CM=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(WSe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(FT,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(FT,{...r,ref:e,children:n})});CM.displayName="Slot";var FT=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=JSe(n),s=YSe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});FT.displayName="SlotClone";var zSe=({children:t})=>E.jsx(E.Fragment,{children:t});function WSe(t){return u.isValidElement(t)&&t.type===zSe}function YSe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function JSe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var QSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],f4=QSe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?CM:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Wee=qX(),FE=function(){},py=u.forwardRef(function(t,e){var n=u.useRef(null),r=u.useState({onScrollCapture:FE,onWheelCapture:FE,onTouchMoveCapture:FE}),i=r[0],s=r[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,y=t.inert,v=t.allowPinchZoom,b=t.as,C=b===void 0?"div":b,S=t.gapMode,R=u4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,I=BX([n,e]),k=di(di({},R),i);return u.createElement(u.Fragment,null,d&&u.createElement(w,{sideCar:Wee,removeScrollBar:c,shards:f,noIsolation:g,inert:y,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:S}),a?u.cloneElement(u.Children.only(o),di(di({},k),{ref:I})):u.createElement(C,di({},k,{className:l,ref:I}),o))});py.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};py.classNames={fullWidth:w0,zeroRight:S0};var jT=!1;if(typeof window<"u")try{var xv=Object.defineProperty({},"passive",{get:function(){return jT=!0,!0}});window.addEventListener("test",xv,xv),window.removeEventListener("test",xv,xv)}catch{jT=!1}var Hf=jT?{passive:!1}:!1,XSe=function(t){return t.tagName==="TEXTAREA"},Yee=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!XSe(t)&&n[e]==="visible")},ewe=function(t){return Yee(t,"overflowY")},twe=function(t){return Yee(t,"overflowX")},n$=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Jee(t,r);if(i){var s=Qee(t,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nwe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rwe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Jee=function(t,e){return t==="v"?ewe(e):twe(e)},Qee=function(t,e){return t==="v"?nwe(e):rwe(e)},iwe=function(t,e){return t==="h"&&e==="rtl"?-1:1},swe=function(t,e,n,r,i){var s=iwe(t,window.getComputedStyle(e).direction),a=s*r,o=n.target,l=e.contains(o),c=!1,d=a>0,f=0,p=0;do{var g=Qee(t,o),y=g[0],v=g[1],b=g[2],C=v-b-s*y;(y||C)&&Jee(t,o)&&(f+=C,p+=y),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(c=!0),c},Mv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},r$=function(t){return[t.deltaX,t.deltaY]},i$=function(t){return t&&"current"in t?t.current:t},awe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},owe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lwe=0,$f=[];function cwe(t){var e=u.useRef([]),n=u.useRef([0,0]),r=u.useRef(),i=u.useState(lwe++)[0],s=u.useState(uM)[0],a=u.useRef(t);u.useEffect(function(){a.current=t},[t]),u.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Qa([t.lockRef.current],(t.shards||[]).map(i$),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=u.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var C=Mv(v),S=n.current,R="deltaX"in v?v.deltaX:S[0]-C[0],w="deltaY"in v?v.deltaY:S[1]-C[1],I,k=v.target,x=Math.abs(R)>Math.abs(w)?"h":"v";if("touches"in v&&x==="h"&&k.type==="range")return!1;var L=n$(x,k);if(!L)return!0;if(L?I=x:(I=x==="v"?"h":"v",L=n$(x,k)),!L)return!1;if(!r.current&&"changedTouches"in v&&(R||w)&&(r.current=I),!I)return!0;var N=r.current||I;return swe(N,b,v,N==="h"?R:w)},[]),l=u.useCallback(function(v){var b=v;if(!(!$f.length||$f[$f.length-1]!==s)){var C="deltaY"in b?r$(b):Mv(b),S=e.current.filter(function(I){return I.name===b.type&&(I.target===b.target||b.target===I.shadowParent)&&awe(I.delta,C)})[0];if(S&&S.should){b.cancelable&&b.preventDefault();return}if(!S){var R=(a.current.shards||[]).map(i$).filter(Boolean).filter(function(I){return I.contains(b.target)}),w=R.length>0?o(b,R[0]):!a.current.noIsolation;w&&b.cancelable&&b.preventDefault()}}},[]),c=u.useCallback(function(v,b,C,S){var R={name:v,delta:b,target:C,should:S,shadowParent:uwe(C)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(w){return w!==R})},1)},[]),d=u.useCallback(function(v){n.current=Mv(v),r.current=void 0},[]),f=u.useCallback(function(v){c(v.type,r$(v),v.target,o(v,t.lockRef.current))},[]),p=u.useCallback(function(v){c(v.type,Mv(v),v.target,o(v,t.lockRef.current))},[]);u.useEffect(function(){return $f.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Hf),document.addEventListener("touchmove",l,Hf),document.addEventListener("touchstart",d,Hf),function(){$f=$f.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,Hf),document.removeEventListener("touchmove",l,Hf),document.removeEventListener("touchstart",d,Hf)}},[]);var g=t.removeScrollBar,y=t.inert;return u.createElement(u.Fragment,null,y?u.createElement(s,{styles:owe(i)}):null,g?u.createElement(zX,{gapMode:t.gapMode}):null)}function uwe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dwe=KX(Wee,cwe);var Xee=u.forwardRef(function(t,e){return u.createElement(py,di({},t,{ref:e,sideCar:dwe}))});Xee.classNames=py.classNames;var bM="Dialog",[ete,tet]=Ql(bM),[hwe,Wo]=ete(bM),tte=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,o=u.useRef(null),l=u.useRef(null),[c=!1,d]=oy({prop:r,defaultProp:i,onChange:s});return E.jsx(hwe,{scope:e,triggerRef:o,contentRef:l,contentId:Wc(),titleId:Wc(),descriptionId:Wc(),open:c,onOpenChange:d,onOpenToggle:u.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};tte.displayName=bM;var nte="DialogTrigger",rte=u.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wo(nte,n),s=fn(e,i.triggerRef);return E.jsx(f4.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":wM(i.open),...r,ref:s,onClick:et(t.onClick,i.onOpenToggle)})});rte.displayName=nte;var EM="DialogPortal",[fwe,ite]=ete(EM,{forceMount:void 0}),ste=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Wo(EM,e);return E.jsx(fwe,{scope:e,forceMount:n,children:u.Children.map(r,a=>E.jsx(a1,{present:n||s.open,children:E.jsx(zee,{asChild:!0,container:i,children:a})}))})};ste.displayName=EM;var v5="DialogOverlay",ate=u.forwardRef((t,e)=>{const n=ite(v5,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wo(v5,t.__scopeDialog);return s.modal?E.jsx(a1,{present:r||s.open,children:E.jsx(mwe,{...i,ref:e})}):null});ate.displayName=v5;var mwe=u.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wo(v5,n);return E.jsx(Xee,{as:CM,allowPinchZoom:!0,shards:[i.contentRef],children:E.jsx(f4.div,{"data-state":wM(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),xh="DialogContent",ote=u.forwardRef((t,e)=>{const n=ite(xh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wo(xh,t.__scopeDialog);return E.jsx(a1,{present:r||s.open,children:s.modal?E.jsx(pwe,{...i,ref:e}):E.jsx(gwe,{...i,ref:e})})});ote.displayName=xh;var pwe=u.forwardRef((t,e)=>{const n=Wo(xh,t.__scopeDialog),r=u.useRef(null),i=fn(e,n.contentRef,r);return u.useEffect(()=>{const s=r.current;if(s)return EX(s)},[]),E.jsx(lte,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:et(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:et(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:et(t.onFocusOutside,s=>s.preventDefault())})}),gwe=u.forwardRef((t,e)=>{const n=Wo(xh,t.__scopeDialog),r=u.useRef(!1),i=u.useRef(!1);return E.jsx(lte,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),lte=u.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,o=Wo(xh,n),l=u.useRef(null),c=fn(e,l);return XQ(),E.jsxs(E.Fragment,{children:[E.jsx(Gee,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:E.jsx(iM,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":wM(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),E.jsxs(E.Fragment,{children:[E.jsx(ywe,{titleId:o.titleId}),E.jsx(Cwe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),SM="DialogTitle",cte=u.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wo(SM,n);return E.jsx(f4.h2,{id:i.titleId,...r,ref:e})});cte.displayName=SM;var ute="DialogDescription",vwe=u.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wo(ute,n);return E.jsx(f4.p,{id:i.descriptionId,...r,ref:e})});vwe.displayName=ute;var dte="DialogClose",hte=u.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wo(dte,n);return E.jsx(f4.button,{type:"button",...r,ref:e,onClick:et(t.onClick,()=>i.onOpenChange(!1))})});hte.displayName=dte;function wM(t){return t?"open":"closed"}var fte="DialogTitleWarning",[net,mte]=ACe(fte,{contentName:xh,titleName:SM,docsSlug:"dialog"}),ywe=({titleId:t})=>{const e=mte(fte),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return u.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_we="DialogDescriptionWarning",Cwe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mte(_we).contentName}}.`;return u.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},kM=tte,bwe=rte,TM=ste,RM=ate,IM=ote,xM=cte,pte=hte;function Ewe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const gte=be.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),m4=()=>{const t=be.useContext(gte);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Ewe(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Swe(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function wwe(){return MM(/^Mac/)}function kwe(){return MM(/^iPhone/)}function s$(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Twe(){return MM(/^iPad/)||wwe()&&navigator.maxTouchPoints>1}function vte(){return kwe()||Twe()}function MM(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Rwe=24,Iwe=typeof window<"u"?u.useLayoutEffect:u.useEffect;function a$(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}const jE=typeof document<"u"&&window.visualViewport;function o$(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function yte(t){for(o$(t)&&(t=t.parentElement);t&&!o$(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const xwe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Pv=0,HE;function Mwe(t={}){let{isDisabled:e}=t;Iwe(()=>{if(!e)return Pv++,Pv===1&&vte()&&(HE=Pwe()),()=>{Pv--,Pv===0&&(HE==null||HE())}},[e])}function Pwe(){let t,e=0,n=f=>{t=yte(f.target),!(t===document.documentElement&&t===document.body)&&(e=f.changedTouches[0].pageY)},r=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let p=f.changedTouches[0].pageY,g=t.scrollTop,y=t.scrollHeight-t.clientHeight;y!==0&&((g<=0&&p>e||g>=y&&p<e)&&f.preventDefault(),e=p)},i=f=>{let p=f.target;HT(p)&&p!==document.activeElement&&(f.preventDefault(),p.style.transform="translateY(-2000px)",p.focus(),requestAnimationFrame(()=>{p.style.transform=""}))},s=f=>{let p=f.target;HT(p)&&(p.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{p.style.transform="",jE&&(jE.height<window.innerHeight?requestAnimationFrame(()=>{l$(p)}):jE.addEventListener("resize",()=>l$(p),{once:!0}))}))},a=()=>{window.scrollTo(0,0)},o=window.pageXOffset,l=window.pageYOffset,c=a$(Lwe(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=a$(S3(document,"touchstart",n,{passive:!1,capture:!0}),S3(document,"touchmove",r,{passive:!1,capture:!0}),S3(document,"touchend",i,{passive:!1,capture:!0}),S3(document,"focus",s,!0),S3(window,"scroll",a));return()=>{c(),d(),window.scrollTo(o,l)}}function Lwe(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function S3(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function l$(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=yte(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const a=n.getBoundingClientRect().bottom+Rwe;s>a&&(n.scrollTop+=i-r)}t=n.parentElement}}function HT(t){return t instanceof HTMLInputElement&&!xwe.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Owe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Awe(...t){return e=>t.forEach(n=>Owe(n,e))}function _te(...t){return u.useCallback(Awe(...t),t)}const Cte=new WeakMap;function jr(t,e,n=!1){if(!t||!(t instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([i,s])=>{if(i.startsWith("--")){t.style.setProperty(i,s);return}r[i]=t.style[i],t.style[i]=s}),!n&&Cte.set(t,r)}function Nwe(t,e){if(!t||!(t instanceof HTMLElement))return;let n=Cte.get(t);n&&(t.style[e]=n[e])}const Rr=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Lv(t,e){if(!t)return null;const n=window.getComputedStyle(t),r=n.transform||n.webkitTransform||n.mozTransform;let i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Rr(e)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Rr(e)?5:4]):null)}function Dwe(t){return 8*(Math.log(t+1)-2)}function $E(t,e){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}function Uwe(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}const Qn={DURATION:.5,EASE:[.32,.72,0,1]},bte=.4,Fwe=.25,jwe=100,Ete=8,Ov=16,$T=26,VE="vaul-dragging";function Ste(t){const e=be.useRef(t);return be.useEffect(()=>{e.current=t}),be.useMemo(()=>(...n)=>e.current==null?void 0:e.current.call(e,...n),[])}function Hwe({defaultProp:t,onChange:e}){const n=be.useState(t),[r]=n,i=be.useRef(r),s=Ste(e);return be.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function wte({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Hwe({defaultProp:e,onChange:n}),s=t!==void 0,a=s?t:r,o=Ste(n),l=be.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&o(f)}else i(c)},[s,t,i,o]);return[a,l]}function $we({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:n,drawerRef:r,overlayRef:i,fadeFromIndex:s,onSnapPointChange:a,direction:o="bottom",container:l,snapToSequentialPoint:c}){const[d,f]=wte({prop:t,defaultProp:n==null?void 0:n[0],onChange:e}),[p,g]=be.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);be.useEffect(()=>{function x(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const y=be.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),v=be.useMemo(()=>{var x;return(x=n==null?void 0:n.findIndex(L=>L===d))!=null?x:null},[n,d]),b=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===d||!n,C=be.useMemo(()=>{const x=l?{width:l.getBoundingClientRect().width,height:l.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var L;return(L=n==null?void 0:n.map(N=>{const D=typeof N=="string";let U=0;if(D&&(U=parseInt(N,10)),Rr(o)){const $=D?U:p?N*x.height:0;return p?o==="bottom"?x.height-$:-x.height+$:$}const j=D?U:p?N*x.width:0;return p?o==="right"?x.width-j:-x.width+j:j}))!=null?L:[]},[n,p,l]),S=be.useMemo(()=>v!==null?C==null?void 0:C[v]:null,[C,v]),R=be.useCallback(x=>{var L;const N=(L=C==null?void 0:C.findIndex(D=>D===x))!=null?L:null;a(N),jr(r.current,{transition:`transform ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,transform:Rr(o)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`}),C&&N!==C.length-1&&s!==void 0&&N!==s&&N<s?jr(i.current,{transition:`opacity ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,opacity:"0"}):jr(i.current,{transition:`opacity ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(N,0)])},[r.current,n,C,s,i,f]);be.useEffect(()=>{if(d||t){var x;const L=(x=n==null?void 0:n.findIndex(N=>N===t||N===d))!=null?x:-1;C&&L!==-1&&typeof C[L]=="number"&&R(C[L])}},[d,t,n,C,R]);function w({draggedDistance:x,closeDrawer:L,velocity:N,dismissible:D}){if(s===void 0)return;const U=o==="bottom"||o==="right"?(S??0)-x:(S??0)+x,j=v===s-1,$=v===0,Z=x>0;if(j&&jr(i.current,{transition:`opacity ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`}),!c&&N>2&&!Z){D?L():R(C[0]);return}if(!c&&N>2&&Z&&C&&n){R(C[n.length-1]);return}const V=C==null?void 0:C.reduce((K,q)=>typeof K!="number"||typeof q!="number"?K:Math.abs(q-U)<Math.abs(K-U)?q:K),z=Rr(o)?window.innerHeight:window.innerWidth;if(N>bte&&Math.abs(x)<z*.4){const K=Z?1:-1;if(K>0&&y&&n){R(C[n.length-1]);return}if($&&K<0&&D&&L(),v===null)return;R(C[v+K]);return}R(V)}function I({draggedDistance:x}){if(S===null)return;const L=o==="bottom"||o==="right"?S-x:S+x;(o==="bottom"||o==="right")&&L<C[C.length-1]||(o==="top"||o==="left")&&L>C[C.length-1]||jr(r.current,{transform:Rr(o)?`translate3d(0, ${L}px, 0)`:`translate3d(${L}px, 0, 0)`})}function k(x,L){if(!n||typeof v!="number"||!C||s===void 0)return null;const N=v===s-1;if(v>=s&&L)return 0;if(N&&!L)return 1;if(!b&&!N)return null;const U=N?v+1:v-1,j=N?C[U]-C[U-1]:C[U+1]-C[U],$=x/Math.abs(j);return N?1-$:$}return{isLastSnapPoint:y,activeSnapPoint:d,shouldFade:b,getPercentageDragged:k,setActiveSnapPoint:f,activeSnapPointIndex:v,onRelease:w,onDrag:I,snapPointsOffset:C}}const Vwe=()=>()=>{};function Bwe(){const{direction:t,isOpen:e,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:i}=m4(),s=be.useRef(null),a=u.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-$T)/window.innerWidth}be.useEffect(()=>{if(e&&n){s.current&&clearTimeout(s.current);const l=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!l)return;Uwe(r&&!i?$E(document.body,{background:"black"}):Vwe,$E(l,{transformOrigin:Rr(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Qn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Qn.EASE.join(",")})`}));const c=$E(l,{borderRadius:`${Ete}px`,overflow:"hidden",...Rr(t)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{c(),s.current=window.setTimeout(()=>{a?document.body.style.background=a:document.body.style.removeProperty("background")},Qn.DURATION*1e3)}}},[e,n,a])}let w3=null;function qwe({isOpen:t,modal:e,nested:n,hasBeenOpened:r,preventScrollRestoration:i,noBodyStyles:s}){const[a,o]=be.useState(()=>typeof window<"u"?window.location.href:""),l=be.useRef(0),c=be.useCallback(()=>{if(s$()&&w3===null&&t&&!s){w3={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:p}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=p-window.innerHeight;g&&l.current>=p&&(document.body.style.top=`${-(l.current+g)}px`)}),300)}},[t]),d=be.useCallback(()=>{if(s$()&&w3!==null&&!s){const f=-parseInt(document.body.style.top,10),p=-parseInt(document.body.style.left,10);Object.assign(document.body.style,w3),window.requestAnimationFrame(()=>{if(i&&a!==window.location.href){o(window.location.href);return}window.scrollTo(p,f)}),w3=null}},[a]);return be.useEffect(()=>{function f(){l.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),be.useEffect(()=>{if(e)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[e,d]),be.useEffect(()=>{n||!r||(t?(!window.matchMedia("(display-mode: standalone)").matches&&c(),e||window.setTimeout(()=>{d()},500)):d())},[t,r,a,e,n,c,d]),{restorePositionSetting:d}}function Gwe({open:t,onOpenChange:e,children:n,onDrag:r,onRelease:i,snapPoints:s,shouldScaleBackground:a=!1,setBackgroundColorOnScale:o=!0,closeThreshold:l=Fwe,scrollLockTimeout:c=jwe,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:p=s&&s.length-1,activeSnapPoint:g,setActiveSnapPoint:y,fixed:v,modal:b=!0,onClose:C,nested:S,noBodyStyles:R=!1,direction:w="bottom",defaultOpen:I=!1,disablePreventScroll:k=!0,snapToSequentialPoint:x=!1,preventScrollRestoration:L=!1,repositionInputs:N=!0,onAnimationEnd:D,container:U,autoFocus:j=!1}){var $,Z;const[V=!1,z]=wte({defaultProp:I,prop:t,onChange:tt=>{e==null||e(tt),!tt&&!S&&g1(),setTimeout(()=>{D==null||D(tt)},Qn.DURATION*1e3),tt&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),tt||(document.body.style.pointerEvents="auto")}}),[K,q]=be.useState(!1),[G,J]=be.useState(!1),[B,Q]=be.useState(!1),pe=be.useRef(null),ve=be.useRef(null),Re=be.useRef(null),Te=be.useRef(null),Ce=be.useRef(null),we=be.useRef(!1),Ee=be.useRef(null),ze=be.useRef(0),qt=be.useRef(!1),dr=be.useRef(!I),nn=be.useRef(0),We=be.useRef(null),pi=be.useRef((($=We.current)==null?void 0:$.getBoundingClientRect().height)||0),hr=be.useRef(((Z=We.current)==null?void 0:Z.getBoundingClientRect().width)||0),Mi=be.useRef(0),tl=be.useCallback(tt=>{s&&tt===lo.length-1&&(ve.current=new Date)},[]),{activeSnapPoint:va,activeSnapPointIndex:Ki,setActiveSnapPoint:ds,onRelease:bu,snapPointsOffset:lo,onDrag:m1,shouldFade:nl,getPercentageDragged:p1}=$we({snapPoints:s,activeSnapPointProp:g,setActiveSnapPointProp:y,drawerRef:We,fadeFromIndex:p,overlayRef:pe,onSnapPointChange:tl,direction:w,container:U,snapToSequentialPoint:x});Mwe({isDisabled:!V||G||!b||B||!K||!N||!k});const{restorePositionSetting:g1}=qwe({isOpen:V,modal:b,nested:S??!1,hasBeenOpened:K,preventScrollRestoration:L,noBodyStyles:R});function co(){return(window.innerWidth-$T)/window.innerWidth}function tf(tt){var Mt,Pt;!d&&!s||We.current&&!We.current.contains(tt.target)||(pi.current=((Mt=We.current)==null?void 0:Mt.getBoundingClientRect().height)||0,hr.current=((Pt=We.current)==null?void 0:Pt.getBoundingClientRect().width)||0,J(!0),Re.current=new Date,vte()&&window.addEventListener("touchend",()=>we.current=!1,{once:!0}),tt.target.setPointerCapture(tt.pointerId),ze.current=Rr(w)?tt.pageY:tt.pageX)}function rl(tt,Mt){var Pt;let Et=tt;const bn=(Pt=window.getSelection())==null?void 0:Pt.toString(),gi=We.current?Lv(We.current,w):null,Wr=new Date;if(Et.tagName==="SELECT"||Et.hasAttribute("data-vaul-no-drag")||Et.closest("[data-vaul-no-drag]"))return!1;if(w==="right"||w==="left")return!0;if(ve.current&&Wr.getTime()-ve.current.getTime()<500)return!1;if(gi!==null&&(w==="bottom"?gi>0:gi<0))return!0;if(bn&&bn.length>0)return!1;if(Ce.current&&Wr.getTime()-Ce.current.getTime()<c&&gi===0||Mt)return Ce.current=Wr,!1;for(;Et;){if(Et.scrollHeight>Et.clientHeight){if(Et.scrollTop!==0)return Ce.current=new Date,!1;if(Et.getAttribute("role")==="dialog")return!0}Et=Et.parentNode}return!0}function Zi(tt){if(We.current&&G){const Mt=w==="bottom"||w==="right"?1:-1,Pt=(ze.current-(Rr(w)?tt.pageY:tt.pageX))*Mt,Et=Pt>0,bn=s&&!d&&!Et;if(bn&&Ki===0)return;const gi=Math.abs(Pt),Wr=document.querySelector("[data-vaul-drawer-wrapper]"),uo=w==="bottom"||w==="top"?pi.current:hr.current;let hs=gi/uo;const ho=p1(gi,Et);if(ho!==null&&(hs=ho),bn&&hs>=1||!we.current&&!rl(tt.target,Et))return;if(We.current.classList.add(VE),we.current=!0,jr(We.current,{transition:"none"}),jr(pe.current,{transition:"none"}),s&&m1({draggedDistance:Pt}),Et&&!s){const Pi=Dwe(Pt),wu=Math.min(Pi*-1,0)*Mt;jr(We.current,{transform:Rr(w)?`translate3d(0, ${wu}px, 0)`:`translate3d(${wu}px, 0, 0)`});return}const fo=1-hs;if((nl||p&&Ki===p-1)&&(r==null||r(tt,hs),jr(pe.current,{opacity:`${fo}`,transition:"none"},!0)),Wr&&pe.current&&a){const Pi=Math.min(co()+hs*(1-co()),1),wu=8-hs*8,ku=Math.max(0,14-hs*14);jr(Wr,{borderRadius:`${wu}px`,transform:Rr(w)?`scale(${Pi}) translate3d(0, ${ku}px, 0)`:`scale(${Pi}) translate3d(${ku}px, 0, 0)`,transition:"none"},!0)}if(!s){const Pi=gi*Mt;jr(We.current,{transform:Rr(w)?`translate3d(0, ${Pi}px, 0)`:`translate3d(${Pi}px, 0, 0)`})}}}be.useEffect(()=>{window.requestAnimationFrame(()=>{dr.current=!0})},[]),be.useEffect(()=>{var tt;function Mt(){if(!We.current||!N)return;const Pt=document.activeElement;if(HT(Pt)||qt.current){var Et;const bn=((Et=window.visualViewport)==null?void 0:Et.height)||0,gi=window.innerHeight;let Wr=gi-bn;const uo=We.current.getBoundingClientRect().height||0,hs=uo>gi*.8;Mi.current||(Mi.current=uo);const ho=We.current.getBoundingClientRect().top;if(Math.abs(nn.current-Wr)>60&&(qt.current=!qt.current),s&&s.length>0&&lo&&Ki){const fo=lo[Ki]||0;Wr+=fo}if(nn.current=Wr,uo>bn||qt.current){const fo=We.current.getBoundingClientRect().height;let Pi=fo;fo>bn&&(Pi=bn-(hs?ho:$T)),v?We.current.style.height=`${fo-Math.max(Wr,0)}px`:We.current.style.height=`${Math.max(Pi,bn-ho)}px`}else Swe()||(We.current.style.height=`${Mi.current}px`);s&&s.length>0&&!qt.current?We.current.style.bottom="0px":We.current.style.bottom=`${Math.max(Wr,0)}px`}}return(tt=window.visualViewport)==null||tt.addEventListener("resize",Mt),()=>{var Pt;return(Pt=window.visualViewport)==null?void 0:Pt.removeEventListener("resize",Mt)}},[Ki,s,lo]);function nc(tt){Fn(),C==null||C(),tt||z(!1),setTimeout(()=>{s&&ds(s[0])},Qn.DURATION*1e3)}function pt(){if(!We.current)return;const tt=document.querySelector("[data-vaul-drawer-wrapper]"),Mt=Lv(We.current,w);jr(We.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`}),jr(pe.current,{transition:`opacity ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,opacity:"1"}),a&&Mt&&Mt>0&&V&&jr(tt,{borderRadius:`${Ete}px`,overflow:"hidden",...Rr(w)?{transform:`scale(${co()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${co()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Qn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Qn.EASE.join(",")})`},!0)}function Fn(){!G||!We.current||(We.current.classList.remove(VE),we.current=!1,J(!1),Te.current=new Date)}function Sr(tt){if(!G||!We.current)return;We.current.classList.remove(VE),we.current=!1,J(!1),Te.current=new Date;const Mt=Lv(We.current,w);if(!tt||!rl(tt.target,!1)||!Mt||Number.isNaN(Mt)||Re.current===null)return;const Pt=Te.current.getTime()-Re.current.getTime(),Et=ze.current-(Rr(w)?tt.pageY:tt.pageX),bn=Math.abs(Et)/Pt;if(bn>.05&&(Q(!0),setTimeout(()=>{Q(!1)},200)),s){bu({draggedDistance:Et*(w==="bottom"||w==="right"?1:-1),closeDrawer:nc,velocity:bn,dismissible:d}),i==null||i(tt,!0);return}if(w==="bottom"||w==="right"?Et>0:Et<0){pt(),i==null||i(tt,!0);return}if(bn>bte){nc(),i==null||i(tt,!1);return}var gi;const Wr=Math.min((gi=We.current.getBoundingClientRect().height)!=null?gi:0,window.innerHeight);var uo;const hs=Math.min((uo=We.current.getBoundingClientRect().width)!=null?uo:0,window.innerWidth),ho=w==="left"||w==="right";if(Math.abs(Mt)>=(ho?hs:Wr)*l){nc(),i==null||i(tt,!1);return}i==null||i(tt,!0),pt()}be.useEffect(()=>(V&&(jr(document.documentElement,{scrollBehavior:"auto"}),ve.current=new Date),()=>{Nwe(document.documentElement,"scrollBehavior")}),[V]);function Eu(tt){const Mt=tt?(window.innerWidth-Ov)/window.innerWidth:1,Pt=tt?-16:0;Ee.current&&window.clearTimeout(Ee.current),jr(We.current,{transition:`transform ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,transform:Rr(w)?`scale(${Mt}) translate3d(0, ${Pt}px, 0)`:`scale(${Mt}) translate3d(${Pt}px, 0, 0)`}),!tt&&We.current&&(Ee.current=setTimeout(()=>{const Et=Lv(We.current,w);jr(We.current,{transition:"none",transform:Rr(w)?`translate3d(0, ${Et}px, 0)`:`translate3d(${Et}px, 0, 0)`})},500))}function Su(tt,Mt){if(Mt<0)return;const Pt=(window.innerWidth-Ov)/window.innerWidth,Et=Pt+Mt*(1-Pt),bn=-16+Mt*Ov;jr(We.current,{transform:Rr(w)?`scale(${Et}) translate3d(0, ${bn}px, 0)`:`scale(${Et}) translate3d(${bn}px, 0, 0)`,transition:"none"})}function rc(tt,Mt){const Pt=Rr(w)?window.innerHeight:window.innerWidth,Et=Mt?(Pt-Ov)/Pt:1,bn=Mt?-16:0;Mt&&jr(We.current,{transition:`transform ${Qn.DURATION}s cubic-bezier(${Qn.EASE.join(",")})`,transform:Rr(w)?`scale(${Et}) translate3d(0, ${bn}px, 0)`:`scale(${Et}) translate3d(${bn}px, 0, 0)`})}return be.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),be.createElement(kM,{defaultOpen:I,onOpenChange:tt=>{!d&&!tt||(tt?q(!0):nc(!0),z(tt))},open:V},be.createElement(gte.Provider,{value:{activeSnapPoint:va,snapPoints:s,setActiveSnapPoint:ds,drawerRef:We,overlayRef:pe,onOpenChange:e,onPress:tf,onRelease:Sr,onDrag:Zi,dismissible:d,shouldAnimate:dr,handleOnly:f,isOpen:V,isDragging:G,shouldFade:nl,closeDrawer:nc,onNestedDrag:Su,onNestedOpenChange:Eu,onNestedRelease:rc,keyboardIsOpen:qt,modal:b,snapPointsOffset:lo,activeSnapPointIndex:Ki,direction:w,shouldScaleBackground:a,setBackgroundColorOnScale:o,noBodyStyles:R,container:U,autoFocus:j}},n))}const kte=be.forwardRef(function({...t},e){const{overlayRef:n,snapPoints:r,onRelease:i,shouldFade:s,isOpen:a,modal:o,shouldAnimate:l}=m4(),c=_te(e,n),d=r&&r.length>0;if(!o)return null;const f=be.useCallback(p=>i(p),[i]);return be.createElement(RM,{onMouseUp:f,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":a&&d?"true":"false","data-vaul-snap-points-overlay":a&&s?"true":"false","data-vaul-animate":l!=null&&l.current?"true":"false",...t})});kte.displayName="Drawer.Overlay";const Tte=be.forwardRef(function({onPointerDownOutside:t,style:e,onOpenAutoFocus:n,...r},i){const{drawerRef:s,onPress:a,onRelease:o,onDrag:l,keyboardIsOpen:c,snapPointsOffset:d,activeSnapPointIndex:f,modal:p,isOpen:g,direction:y,snapPoints:v,container:b,handleOnly:C,shouldAnimate:S,autoFocus:R}=m4(),[w,I]=be.useState(!1),k=_te(i,s),x=be.useRef(null),L=be.useRef(null),N=be.useRef(!1),D=v&&v.length>0;Bwe();const U=($,Z,V=0)=>{if(N.current)return!0;const z=Math.abs($.y),K=Math.abs($.x),q=K>z,G=["bottom","right"].includes(Z)?1:-1;if(Z==="left"||Z==="right"){if(!($.x*G<0)&&K>=0&&K<=V)return q}else if(!($.y*G<0)&&z>=0&&z<=V)return!q;return N.current=!0,!0};be.useEffect(()=>{D&&window.requestAnimationFrame(()=>{I(!0)})},[]);function j($){x.current=null,N.current=!1,o($)}return be.createElement(IM,{"data-vaul-drawer-direction":y,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":g&&D?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":S!=null&&S.current?"true":"false",...r,ref:k,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...e}:e,onPointerDown:$=>{C||(r.onPointerDown==null||r.onPointerDown.call(r,$),x.current={x:$.pageX,y:$.pageY},a($))},onOpenAutoFocus:$=>{n==null||n($),R||$.preventDefault()},onPointerDownOutside:$=>{if(t==null||t($),!p||$.defaultPrevented){$.preventDefault();return}c.current&&(c.current=!1)},onFocusOutside:$=>{if(!p){$.preventDefault();return}},onPointerMove:$=>{if(L.current=$,C||(r.onPointerMove==null||r.onPointerMove.call(r,$),!x.current))return;const Z=$.pageY-x.current.y,V=$.pageX-x.current.x,z=$.pointerType==="touch"?10:2;U({x:V,y:Z},y,z)?l($):(Math.abs(V)>z||Math.abs(Z)>z)&&(x.current=null)},onPointerUp:$=>{r.onPointerUp==null||r.onPointerUp.call(r,$),x.current=null,N.current=!1,o($)},onPointerOut:$=>{r.onPointerOut==null||r.onPointerOut.call(r,$),j(L.current)},onContextMenu:$=>{r.onContextMenu==null||r.onContextMenu.call(r,$),L.current&&j(L.current)}})});Tte.displayName="Drawer.Content";const Kwe=250,Zwe=120,zwe=be.forwardRef(function({preventCycle:t=!1,children:e,...n},r){const{closeDrawer:i,isDragging:s,snapPoints:a,activeSnapPoint:o,setActiveSnapPoint:l,dismissible:c,handleOnly:d,isOpen:f,onPress:p,onDrag:g}=m4(),y=be.useRef(null),v=be.useRef(!1);function b(){if(v.current){R();return}window.setTimeout(()=>{C()},Zwe)}function C(){if(s||t||v.current){R();return}if(R(),!a||a.length===0){c||i();return}if(o===a[a.length-1]&&c){i();return}const I=a.findIndex(x=>x===o);if(I===-1)return;const k=a[I+1];l(k)}function S(){y.current=window.setTimeout(()=>{v.current=!0},Kwe)}function R(){y.current&&window.clearTimeout(y.current),v.current=!1}return be.createElement("div",{onClick:b,onPointerCancel:R,onPointerDown:w=>{d&&p(w),S()},onPointerMove:w=>{d&&g(w)},ref:r,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},be.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});zwe.displayName="Drawer.Handle";function Wwe(t){const e=m4(),{container:n=e.container,...r}=t;return be.createElement(TM,{container:n,...r})}const Is={Root:Gwe,Content:Tte,Overlay:kte,Trigger:bwe,Portal:Wwe,Title:xM},Ywe="_bg_1y38p_8",Jwe="_drawer_1y38p_17",Qwe="_body_1y38p_51",y5={bg:Ywe,drawer:Jwe,body:Qwe},PM=u.createContext(null);function LM(){var e;const t=(e=globalThis.navigator)==null?void 0:e.userAgent;return/android/i.test(t)?"android":/iPad|iPhone|iPod|Mac/.test(t)&&"ontouchend"in document?"ios":"other"}const OM=u.forwardRef(({title:t,children:e,className:n,...r},i)=>E.jsx("div",{ref:i,className:De(n,y5.drawer),"aria-label":t,"data-platform":LM(),...r,role:"menu",children:E.jsx("div",{className:y5.body,children:e})}));OM.displayName="DrawerMenu";const Xwe=({onSelect:t,children:e})=>E.jsx(Bee,{onSelect:t??void 0,asChild:!0,children:e}),eke=({title:t,showTitle:e=!0,onOpenChange:n,trigger:r,hasAccessibleAlternative:i,children:s})=>{const[a,o]=u.useState(!1),l=u.useCallback(y=>{o(y),n==null||n(y)},[o,n]),c=LM(),d=c==="android"||c==="ios",f=u.useMemo(()=>({MenuItemWrapper:d?null:Xwe,onOpenChange:l}),[l]),p=E.jsx(PM.Provider,{value:f,children:s}),g=E.jsx(bSe,{"aria-haspopup":"menu",tabIndex:i?void 0:0,asChild:!0,children:r});return d?E.jsxs(E.Fragment,{children:[E.jsx(YH,{onOpenChange:l,children:g}),E.jsx(Is.Root,{open:a,onOpenChange:l,children:E.jsxs(Is.Portal,{children:[E.jsx(Is.Overlay,{className:De(y5.bg)}),E.jsx(Is.Content,{asChild:!0,children:E.jsx(OM,{title:t,children:p})})]})})]}):E.jsxs(YH,{onOpenChange:l,children:[g,E.jsx(ESe,{children:E.jsx(SSe,{asChild:!0,children:E.jsx(_M,{showTitle:e,title:t,children:p})})})]})},tke="_glass_sepwu_8",nke={glass:tke},Rte=u.forwardRef(({children:t,className:e,...n},r)=>E.jsx("div",{ref:r,className:De(e,nke.glass),...n,children:u.Children.only(t)}));Rte.displayName="Glass";const o1=({as:t="h1",children:e,...n})=>E.jsx(dQ,{as:t,type:"heading",...n,children:e}),rke="_link_1v5rz_8",ike={link:rke},ske=u.forwardRef(function({children:e,className:n,kind:r="primary",size:i="medium",...s},a){return E.jsx("a",{ref:a,...s,rel:"noreferrer noopener",className:De(ike.link,n),"data-kind":r,"data-size":i,children:e})});var AM="DropdownMenu",[ake,ret]=Ql(AM,[hy]),ls=hy(),[oke,Ite]=ake(AM),xte=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=ls(e),c=u.useRef(null),[d=!1,f]=oy({prop:i,defaultProp:s,onChange:a});return E.jsx(oke,{scope:e,triggerId:Wc(),triggerRef:c,contentId:Wc(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(p=>!p),[f]),modal:o,children:E.jsx(bee,{...l,open:d,onOpenChange:f,dir:r,modal:o,children:n})})};xte.displayName=AM;var Mte="DropdownMenuTrigger",Pte=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Ite(Mte,n),a=ls(n);return E.jsx(Eee,{asChild:!0,...a,children:E.jsx(Er.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Xl(e,s.triggerRef),onPointerDown:et(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:et(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Pte.displayName=Mte;var lke="DropdownMenuPortal",Lte=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ls(e);return E.jsx(See,{...r,...n})};Lte.displayName=lke;var Ote="DropdownMenuContent",Ate=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ite(Ote,n),s=ls(n),a=u.useRef(!1);return E.jsx(wee,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:et(t.onCloseAutoFocus,o=>{var l;a.current||(l=i.triggerRef.current)==null||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:et(t.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!i.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ate.displayName=Ote;var cke="DropdownMenuGroup",uke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(kee,{...i,...r,ref:e})});uke.displayName=cke;var dke="DropdownMenuLabel",hke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Tee,{...i,...r,ref:e})});hke.displayName=dke;var fke="DropdownMenuItem",Nte=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Ree,{...i,...r,ref:e})});Nte.displayName=fke;var mke="DropdownMenuCheckboxItem",pke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Iee,{...i,...r,ref:e})});pke.displayName=mke;var gke="DropdownMenuRadioGroup",vke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(xee,{...i,...r,ref:e})});vke.displayName=gke;var yke="DropdownMenuRadioItem",_ke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Mee,{...i,...r,ref:e})});_ke.displayName=yke;var Cke="DropdownMenuItemIndicator",bke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Pee,{...i,...r,ref:e})});bke.displayName=Cke;var Eke="DropdownMenuSeparator",Ske=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Lee,{...i,...r,ref:e})});Ske.displayName=Eke;var wke="DropdownMenuArrow",kke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Oee,{...i,...r,ref:e})});kke.displayName=wke;var Tke="DropdownMenuSubTrigger",Rke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Aee,{...i,...r,ref:e})});Rke.displayName=Tke;var Ike="DropdownMenuSubContent",xke=u.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ls(n);return E.jsx(Nee,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xke.displayName=Ike;var Mke=xte,Pke=Pte,Lke=Lte,Oke=Ate;const Ake=({onSelect:t,children:e})=>E.jsx(Nte,{onSelect:t??void 0,asChild:!0,children:e}),NM=({title:t,showTitle:e=!0,open:n,onOpenChange:r,trigger:i,children:s,side:a="bottom",align:o="center"})=>{const l=LM(),c=l==="android"||l==="ios",d=u.useMemo(()=>({MenuItemWrapper:c?null:Ake,onOpenChange:r}),[r]),f=E.jsx(PM.Provider,{value:d,children:s});return c?E.jsxs(Is.Root,{open:n,onOpenChange:r,children:[E.jsx(Is.Trigger,{asChild:!0,children:i}),E.jsxs(Is.Portal,{children:[E.jsx(Is.Overlay,{className:De(y5.bg)}),E.jsx(Is.Content,{asChild:!0,children:E.jsx(OM,{title:t,children:f})})]})]}):E.jsxs(Mke,{open:n,onOpenChange:r,children:[E.jsx(Pke,{asChild:!0,children:i}),E.jsx(Lke,{children:E.jsx(Oke,{asChild:!0,side:a,align:o,sideOffset:8,onCloseAutoFocus:p=>{p.preventDefault()},children:E.jsx(_M,{title:t,showTitle:e,children:f})})})]})},Nke="_item_dyt4i_8",Dke="_interactive_dyt4i_26",Uke="_label_dyt4i_34",Fke="_icon_dyt4i_50",jke="_disabled_dyt4i_118",hc={item:Nke,interactive:Dke,"no-label":"_no-label_dyt4i_30",label:Uke,"no-icon":"_no-icon_dyt4i_41",icon:Fke,"nav-hint":"_nav-hint_dyt4i_59",disabled:jke};function Dte(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M8.7 17.3a.95.95 0 0 1-.275-.7q0-.425.275-.7l3.9-3.9-3.9-3.9a.95.95 0 0 1-.275-.7q0-.425.275-.7a.95.95 0 0 1 .7-.275q.425 0 .7.275l4.6 4.6q.15.15.213.325.062.175.062.375t-.062.375a.9.9 0 0 1-.213.325l-4.6 4.6a.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275"})})}Dte.displayName="ChevronRightIcon";const Ute=u.forwardRef(Dte),vm=({as:t,className:e,Icon:n,label:r,labelProps:i,onSelect:s,kind:a="primary",children:o,onClick:l,disabled:c,hideChevron:d,...f})=>{const p=t??"button",g=u.useContext(PM),y=u.useCallback(R=>{if(l==null||l(R),s!==null&&(g==null?void 0:g.MenuItemWrapper)==null){const w=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});s(w),w.defaultPrevented||g==null||g.onOpenChange(!1)}},[g,s]),v=u.isValidElement(n),b=n,C=n,S=E.jsxs(p,{role:"menuitem",...f,className:De(e,hc.item,{[hc.interactive]:s!==null,[hc["no-label"]]:r===null,[hc["no-icon"]]:!n,[hc.disabled]:c}),"data-kind":a,onClick:y,disabled:p==="button"?c:void 0,"aria-disabled":p==="button"?void 0:c,children:[n&&(v?E.jsx(gm,{className:hc.icon,children:b}):E.jsx(C,{width:24,height:24,className:hc.icon,"aria-hidden":!0})),r!==null&&E.jsx(_n,{className:hc.label,size:"md",weight:"medium",as:"span",...i,children:r}),!d&&(p==="button"||p==="a")&&E.jsx(Ute,{width:8,height:24,className:hc["nav-hint"],"aria-hidden":!0,viewBox:"8 0 8 24"}),o]});return(g==null?void 0:g.MenuItemWrapper)==null||s===null?S:E.jsx(g.MenuItemWrapper,{onSelect:s,children:S})};var Hke="Label",Fte=u.forwardRef((t,e)=>E.jsx(Er.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Fte.displayName=Hke;var[DM,iet]=Ql("Form"),UM="Form",[$ke,p4]=DM(UM),[Vke,jte]=DM(UM),Hte=u.forwardRef((t,e)=>{const{__scopeForm:n,onClearServerErrors:r=()=>{},...i}=t,s=u.useRef(null),a=fn(e,s),[o,l]=u.useState({}),c=u.useCallback(D=>o[D],[o]),d=u.useCallback((D,U)=>l(j=>({...j,[D]:{...j[D]??{},...U}})),[]),f=u.useCallback(D=>{l(U=>({...U,[D]:void 0})),S(U=>({...U,[D]:{}}))},[]),[p,g]=u.useState({}),y=u.useCallback(D=>p[D]??[],[p]),v=u.useCallback((D,U)=>{g(j=>({...j,[D]:[...j[D]??[],U]}))},[]),b=u.useCallback((D,U)=>{g(j=>({...j,[D]:(j[D]??[]).filter($=>$.id!==U)}))},[]),[C,S]=u.useState({}),R=u.useCallback(D=>C[D]??{},[C]),w=u.useCallback((D,U)=>{S(j=>({...j,[D]:{...j[D]??{},...U}}))},[]),[I,k]=u.useState({}),x=u.useCallback((D,U)=>{k(j=>{const $=new Set(j[D]).add(U);return{...j,[D]:$}})},[]),L=u.useCallback((D,U)=>{k(j=>{const $=new Set(j[D]);return $.delete(U),{...j,[D]:$}})},[]),N=u.useCallback(D=>Array.from(I[D]??[]).join(" ")||void 0,[I]);return E.jsx($ke,{scope:n,getFieldValidity:c,onFieldValidityChange:d,getFieldCustomMatcherEntries:y,onFieldCustomMatcherEntryAdd:v,onFieldCustomMatcherEntryRemove:b,getFieldCustomErrors:R,onFieldCustomErrorsChange:w,onFieldValiditionClear:f,children:E.jsx(Vke,{scope:n,onFieldMessageIdAdd:x,onFieldMessageIdRemove:L,getFieldDescription:N,children:E.jsx(Er.form,{...i,ref:a,onInvalid:et(t.onInvalid,D=>{const U=qte(D.currentTarget);U===D.target&&U.focus(),D.preventDefault()}),onSubmit:et(t.onSubmit,r,{checkForDefaultPrevented:!1}),onReset:et(t.onReset,r)})})})});Hte.displayName=UM;var FM="FormField",[Bke,jM]=DM(FM),$te=u.forwardRef((t,e)=>{const{__scopeForm:n,name:r,serverInvalid:i=!1,...s}=t,o=p4(FM,n).getFieldValidity(r),l=Wc();return E.jsx(Bke,{scope:n,id:l,name:r,serverInvalid:i,children:E.jsx(Er.div,{"data-valid":$M(o,i),"data-invalid":VM(o,i),...s,ref:e})})});$te.displayName=FM;var VT="FormLabel",Vte=u.forwardRef((t,e)=>{const{__scopeForm:n,...r}=t,i=p4(VT,n),s=jM(VT,n),a=r.htmlFor||s.id,o=i.getFieldValidity(s.name);return E.jsx(Fte,{"data-valid":$M(o,s.serverInvalid),"data-invalid":VM(o,s.serverInvalid),...r,ref:e,htmlFor:a})});Vte.displayName=VT;var r6="FormControl",Bte=u.forwardRef((t,e)=>{const{__scopeForm:n,...r}=t,i=p4(r6,n),s=jM(r6,n),a=jte(r6,n),o=u.useRef(null),l=fn(e,o),c=r.name||s.name,d=r.id||s.id,f=i.getFieldCustomMatcherEntries(c),{onFieldValidityChange:p,onFieldCustomErrorsChange:g,onFieldValiditionClear:y}=i,v=u.useCallback(async S=>{if(Gte(S.validity)){const j=BE(S.validity);p(c,j);return}const R=S.form?new FormData(S.form):new FormData,w=[S.value,R],I=[],k=[];f.forEach(j=>{Xke(j,w)?k.push(j):eTe(j)&&I.push(j)});const x=I.map(({id:j,match:$})=>[j,$(...w)]),L=Object.fromEntries(x),N=Object.values(L).some(Boolean),D=N;S.setCustomValidity(D?mg:"");const U=BE(S.validity);if(p(c,U),g(c,L),!N&&k.length>0){const j=k.map(({id:q,match:G})=>G(...w).then(J=>[q,J])),$=await Promise.all(j),Z=Object.fromEntries($),z=Object.values(Z).some(Boolean);S.setCustomValidity(z?mg:"");const K=BE(S.validity);p(c,K),g(c,Z)}},[f,c,g,p]);u.useEffect(()=>{const S=o.current;if(S){const R=()=>v(S);return S.addEventListener("change",R),()=>S.removeEventListener("change",R)}},[v]);const b=u.useCallback(()=>{const S=o.current;S&&(S.setCustomValidity(""),y(c))},[c,y]);u.useEffect(()=>{var R;const S=(R=o.current)==null?void 0:R.form;if(S)return S.addEventListener("reset",b),()=>S.removeEventListener("reset",b)},[b]),u.useEffect(()=>{const S=o.current,R=S==null?void 0:S.closest("form");if(R&&s.serverInvalid){const w=qte(R);w===S&&w.focus()}},[s.serverInvalid]);const C=i.getFieldValidity(c);return E.jsx(Er.input,{"data-valid":$M(C,s.serverInvalid),"data-invalid":VM(C,s.serverInvalid),"aria-invalid":s.serverInvalid?!0:void 0,"aria-describedby":a.getFieldDescription(c),title:"",...r,ref:l,id:d,name:c,onInvalid:et(t.onInvalid,S=>{const R=S.currentTarget;v(R)}),onChange:et(t.onChange,S=>{b()})})});Bte.displayName=r6;var mg="This value is not valid",qke={badInput:mg,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},g4="FormMessage",Gke=u.forwardRef((t,e)=>{const{match:n,name:r,...i}=t,s=jM(g4,t.__scopeForm),a=r??s.name;return n===void 0?E.jsx(HM,{...i,ref:e,name:a,children:t.children||mg}):typeof n=="function"?E.jsx(Zke,{match:n,...i,ref:e,name:a}):E.jsx(Kke,{match:n,...i,ref:e,name:a})});Gke.displayName=g4;var Kke=u.forwardRef((t,e)=>{const{match:n,forceMatch:r=!1,name:i,children:s,...a}=t,l=p4(g4,a.__scopeForm).getFieldValidity(i);return r||(l==null?void 0:l[n])?E.jsx(HM,{ref:e,...a,name:i,children:s??qke[n]}):null}),Zke=u.forwardRef((t,e)=>{const{match:n,forceMatch:r=!1,name:i,id:s,children:a,...o}=t,l=p4(g4,o.__scopeForm),c=u.useRef(null),d=fn(e,c),f=Wc(),p=s??f,g=u.useMemo(()=>({id:p,match:n}),[p,n]),{onFieldCustomMatcherEntryAdd:y,onFieldCustomMatcherEntryRemove:v}=l;u.useEffect(()=>(y(i,g),()=>v(i,g.id)),[g,i,y,v]);const b=l.getFieldValidity(i),S=l.getFieldCustomErrors(i)[p];return r||b&&!Gte(b)&&S?E.jsx(HM,{id:p,ref:d,...o,name:i,children:a??mg}):null}),HM=u.forwardRef((t,e)=>{const{__scopeForm:n,id:r,name:i,...s}=t,a=jte(g4,n),o=Wc(),l=r??o,{onFieldMessageIdAdd:c,onFieldMessageIdRemove:d}=a;return u.useEffect(()=>(c(i,l),()=>d(i,l)),[i,l,c,d]),E.jsx(Er.span,{id:l,...s,ref:e})}),zke="FormSubmit",Wke=u.forwardRef((t,e)=>{const{__scopeForm:n,...r}=t;return E.jsx(Er.button,{type:"submit",...r,ref:e})});Wke.displayName=zke;function BE(t){const e={};for(const n in t)e[n]=t[n];return e}function Yke(t){return t instanceof HTMLElement}function Jke(t){return"validity"in t}function Qke(t){return Jke(t)&&(t.validity.valid===!1||t.getAttribute("aria-invalid")==="true")}function qte(t){const e=t.elements,[n]=Array.from(e).filter(Yke).filter(Qke);return n}function Xke(t,e){return t.match.constructor.name==="AsyncFunction"||tTe(t.match,e)}function eTe(t){return t.match.constructor.name==="Function"}function tTe(t,e){return t(...e)instanceof Promise}function Gte(t){let e=!1;for(const n in t){const r=n;if(r!=="valid"&&r!=="customError"&&t[r]){e=!0;break}}return e}function $M(t,e){if((t==null?void 0:t.valid)===!0&&!e)return!0}function VM(t,e){if((t==null?void 0:t.valid)===!1||e)return!0}var nTe=Hte,rTe=$te,iTe=Vte,Kte=Bte;const sTe="_container_1e0uz_10",aTe="_input_1e0uz_18",oTe="_ui_1e0uz_19",qE={container:sTe,input:aTe,ui:oTe},lTe=u.forwardRef(function({className:e,...n},r){const i=De(qE.container,e);return E.jsxs("div",{className:i,children:[E.jsx("input",{ref:r,...n,className:qE.input,type:"radio"}),E.jsx("div",{className:qE.ui})]})}),cTe=u.forwardRef(function(e,n){return E.jsx(Kte,{asChild:!0,children:E.jsx(lTe,{ref:n,...e})})}),uTe="_root_19upo_16",dTe="_label_19upo_59",k0={root:uTe,"inline-field":"_inline-field_19upo_32","inline-field-body":"_inline-field-body_19upo_38","inline-field-control":"_inline-field-control_19upo_44",label:dTe},hTe=u.forwardRef(function({children:e,...n},r){const i=De(k0.label,n.className);return E.jsx(iTe,{ref:r,...n,className:i,children:e})});var fTe="Separator",c$="horizontal",mTe=["horizontal","vertical"],Zte=u.forwardRef((t,e)=>{const{decorative:n,orientation:r=c$,...i}=t,s=pTe(r)?r:c$,o=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return E.jsx(Er.div,{"data-orientation":s,...o,...i,ref:e})});Zte.displayName=fTe;function pTe(t){return mTe.includes(t)}var gTe=Zte;const vTe="_separator_7ckbw_8",yTe={separator:vTe},u$="--cpd-separator-spacing",BM=u.forwardRef(({className:t,spacing:e,kind:n="primary",...r},i)=>{const s=De(yTe.separator,t),a=u.useRef(null),o=FQ([a,i]);return u.useEffect(()=>{var c;const l=(c=a.current)==null?void 0:c.style;e?l==null||l.setProperty(u$,e):l==null||l.removeProperty(u$)},[e]),E.jsx(gTe,{...r,className:s,ref:o,"data-kind":n})});BM.displayName="Separator";const _Te="_container_19o42_10",CTe="_input_19o42_24",bTe="_ui_19o42_34",GE={container:_Te,input:CTe,ui:bTe},zte=u.forwardRef(function({className:e,...n},r){const i=De(GE.container,e);return E.jsxs("div",{className:i,children:[E.jsx("input",{ref:r,className:GE.input,...n,type:"checkbox"}),E.jsx("div",{className:GE.ui})]})});u.forwardRef(function(e,n){return E.jsx(Kte,{asChild:!0,children:E.jsx(zte,{ref:n,...e})})});const qM=u.forwardRef(function({className:e,Icon:n,label:r,onSelect:i,checked:s,disabled:a,onClick:o},l){const c=u.useId(),d=u.useCallback(()=>{},[]);return E.jsx(vm,{as:"div",role:"menuitemcheckbox","aria-checked":s,className:e,Icon:n,label:r,onSelect:i,disabled:a,onClick:o,children:E.jsx(zte,{id:c,ref:l,"aria-hidden":!0,checked:s,disabled:a,onChange:d})})});function Wte(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M9.55 17.575q-.2 0-.375-.062a.9.9 0 0 1-.325-.213L4.55 13q-.274-.274-.262-.713.012-.437.287-.712a.95.95 0 0 1 .7-.275q.425 0 .7.275L9.55 15.15l8.475-8.475q.274-.275.713-.275.437 0 .712.275.275.274.275.713 0 .437-.275.712l-9.2 9.2q-.15.15-.325.212a1.1 1.1 0 0 1-.375.063"})})}Wte.displayName="CheckIcon";const Yte=u.forwardRef(Wte),d$=u.forwardRef(function({children:e,...n},r){const i=De(k0.root,n.className);return E.jsx(nTe,{ref:r,...n,className:i,children:e})}),ETe=u.forwardRef(function({className:e,control:n,children:r,...i},s){const a=De(k0["inline-field"],e);return E.jsxs(rTe,{ref:s,...i,className:a,children:[E.jsx("div",{className:k0["inline-field-control"],children:n}),E.jsx("div",{className:k0["inline-field-body"],children:r})]})}),STe="_icon_11k6c_18",wTe={icon:STe};function Jte(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{fillRule:"evenodd",d:"M12 4.031a8 8 0 1 0 8 8 1 1 0 0 1 2 0c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10a1 1 0 1 1 0 2",clipRule:"evenodd"})})}Jte.displayName="SpinnerIcon";const kTe=u.forwardRef(Jte),TTe=u.forwardRef(function({size:e=20,...n},r){return E.jsx(kTe,{ref:r,className:wTe.icon,style:{width:e,height:e},...n})}),RTe="_button_vczzf_8",ITe="_destructive_vczzf_107",k3={button:RTe,"icon-only":"_icon-only_vczzf_50","has-icon":"_has-icon_vczzf_57",destructive:ITe},Bt=u.forwardRef(function({as:e,kind:n="primary",size:r="lg",children:i,className:s,iconOnly:a,Icon:o,destructive:l,disabled:c,...d},f){const[p,g]=n==="destructive"?["secondary",!0]:[n,l],y=De(k3.button,s,{[k3["has-icon"]]:o,[k3["icon-only"]]:a,[k3.destructive]:g}),v=a&&r==="lg"?24:20;return E.jsxs(hQ,{...d,as:e||"button",ref:f,className:y,"data-size":r,"data-kind":p,tabIndex:0,disabled:c,children:[o&&E.jsx(o,{width:v,height:v,className:k3.icon,"aria-hidden":!0}),i]})});function Qte(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 16q1.875 0 3.188-1.312Q16.5 13.375 16.5 11.5t-1.312-3.187T12 7 8.813 8.313 7.5 11.5t1.313 3.188T12 16m0-1.8q-1.125 0-1.912-.787A2.6 2.6 0 0 1 9.3 11.5q0-1.125.787-1.912A2.6 2.6 0 0 1 12 8.8q1.125 0 1.912.787.788.788.788 1.913t-.787 1.912A2.6 2.6 0 0 1 12 14.2m0 4.8q-3.475 0-6.35-1.837Q2.775 15.324 1.3 12.2a.8.8 0 0 1-.1-.312 3 3 0 0 1 0-.775.8.8 0 0 1 .1-.313q1.475-3.125 4.35-4.962Q8.525 4 12 4t6.35 1.838T22.7 10.8a.8.8 0 0 1 .1.313 3 3 0 0 1 0 .774.8.8 0 0 1-.1.313q-1.475 3.125-4.35 4.963Q15.475 19 12 19m0-2a9.54 9.54 0 0 0 5.188-1.488A9.77 9.77 0 0 0 20.8 11.5a9.77 9.77 0 0 0-3.613-4.012A9.54 9.54 0 0 0 12 6a9.55 9.55 0 0 0-5.187 1.487A9.77 9.77 0 0 0 3.2 11.5a9.77 9.77 0 0 0 3.613 4.012A9.54 9.54 0 0 0 12 17"})})}Qte.displayName="VisibilityOnIcon";const xTe=u.forwardRef(Qte),MTe="_content_o77nw_8",PTe="_destructive_o77nw_34",LTe="_success_o77nw_39",KE={content:MTe,destructive:PTe,success:LTe};function OTe({className:t,size:e="large",destructive:n=!1,success:r=!1,children:i}){return E.jsx("div",{className:De(KE.content,t,{[KE.destructive]:n,[KE.success]:r}),"data-size":e,children:be.Children.only(i)})}const pg={"nav-bar":"_nav-bar_1fp3r_8","nav-bar-items":"_nav-bar-items_1fp3r_14","nav-tab":"_nav-tab_1fp3r_25","nav-item":"_nav-item_1fp3r_47"},ATe=({children:t,className:e,role:n,"aria-label":r,...i})=>{const s=De(e,pg["nav-bar"]),a=n!=="tablist"?{role:"navigation","aria-label":r}:{role:"presentation"},o=n==="tablist"?{role:"tablist","aria-label":r}:{};return E.jsx("nav",{...a,...i,className:s,children:E.jsx("ul",{...o,className:pg["nav-bar-items"],children:t})})},NTe=u.forwardRef(function({children:e,href:n,onClick:r,...i},s){return E.jsx("a",{href:n,onClick:r,className:pg["nav-item"],...i,ref:s,children:e})}),DTe=u.forwardRef(function({children:e,disabled:n,onClick:r,...i},s){return E.jsx("button",{onClick:r,className:pg["nav-item"],disabled:n,ref:s,...i,children:e})}),UTe=t=>"href"in t&&!!t.href,FTe=u.forwardRef(function(e,n){const r=e["aria-controls"],s=!!r?{"aria-controls":r,role:"tab","aria-selected":e.active}:{"aria-current":e.active?!0:void 0},a={...e};delete a.active;let o;if(UTe(a)){const l=n;o=E.jsx(NTe,{...a,...s,ref:l})}else{const l=n;o=E.jsx(DTe,{...a,...s,ref:l})}return E.jsx("li",{className:pg["nav-tab"],"data-current":e.active?!0:void 0,role:"presentation",children:o})});function Xte(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 14.95q-.2 0-.375-.062a.9.9 0 0 1-.325-.213l-4.6-4.6a.95.95 0 0 1-.275-.7q0-.425.275-.7a.95.95 0 0 1 .7-.275q.425 0 .7.275l3.9 3.9 3.9-3.9a.95.95 0 0 1 .7-.275q.425 0 .7.275a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7l-4.6 4.6q-.15.15-.325.212a1.1 1.1 0 0 1-.375.063"})})}Xte.displayName="ChevronDownIcon";const jTe=u.forwardRef(Xte);function ene(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"m13.3 17.3-4.6-4.6a.9.9 0 0 1-.213-.325A1.1 1.1 0 0 1 8.425 12q0-.2.062-.375A.9.9 0 0 1 8.7 11.3l4.6-4.6a.95.95 0 0 1 .7-.275q.425 0 .7.275a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7L10.8 12l3.9 3.9a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275"})})}ene.displayName="ChevronLeftIcon";const HTe=u.forwardRef(ene);var ZE,h$;function $Te(){return h$||(h$=1,ZE={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ZE}var VTe=$Te();const BTe=zo(VTe);var qTe=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function f$(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(BTe[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var i=new RegExp(qTe),s=null;(s=i.exec(t))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),o=[a,""];a.indexOf("=")>-1&&(o=a.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var GTe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,KTe=/^\s*$/,ZTe=Object.create(null);function tne(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(tne,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var zTe={parse:function(t,e){e||(e={}),e.components||(e.components=ZTe);var n,r=[],i=[],s=-1,a=!1;if(t.indexOf("<")!==0){var o=t.indexOf("<");r.push({type:"text",content:o===-1?t:t.substring(0,o)})}return t.replace(GTe,function(l,c){if(a){if(l!=="</"+n.name+">")return;a=!1}var d,f=l.charAt(1)!=="/",p=l.startsWith("<!--"),g=c+l.length,y=t.charAt(g);if(p){var v=f$(l);return s<0?(r.push(v),r):((d=i[s]).children.push(v),r)}if(f&&(s++,(n=f$(l)).type==="tag"&&e.components[n.name]&&(n.type="component",a=!0),n.voidElement||a||!y||y==="<"||n.children.push({type:"text",content:t.slice(g,t.indexOf("<",g))}),s===0&&r.push(n),(d=i[s-1])&&d.children.push(n),i[s]=n),(!f||n.voidElement)&&(s>-1&&(n.voidElement||n.name===l.slice(2,-1))&&(s--,n=s===-1?r:i[s]),!a&&y!=="<"&&y)){d=s===-1?r:i[s].children;var b=t.indexOf("<",g),C=t.slice(g,b===-1?void 0:b);KTe.test(C)&&(C=" "),(b>-1&&s+d.length>=0||C!==" ")&&d.push({type:"text",content:C})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+tne("",n)},"")}};const i6=(t,e,n,r)=>{var s,a,o,l;const i=[n,{code:e,...r||{}}];if((a=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&a.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Za(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},m$={},gg=(t,e,n,r)=>{Za(n)&&m$[n]||(Za(n)&&(m$[n]=new Date),i6(t,e,n,r))},nne=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},BT=(t,e,n)=>{t.loadNamespaces(e,nne(t,n))},p$=(t,e,n,r)=>{if(Za(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return BT(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,nne(t,r))},WTe=(t,e,n={})=>!e.languages||!e.languages.length?(gg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{var s;if(((s=n.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Za=t=>typeof t=="string",eh=t=>typeof t=="object"&&t!==null,YTe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,JTe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},QTe=t=>JTe[t],XTe=t=>t.replace(YTe,QTe);let qT={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:XTe};const eRe=(t={})=>{qT={...qT,...t}},rne=()=>qT;let ine;const tRe=t=>{ine=t},GM=()=>ine,zE=(t,e)=>{var r;if(!t)return!1;const n=((r=t.props)==null?void 0:r.children)??t.children;return e?n.length>0:!!n},WE=t=>{var n,r;if(!t)return[];const e=((n=t.props)==null?void 0:n.children)??t.children;return(r=t.props)!=null&&r.i18nIsDynamicList?h2(e):e},nRe=t=>Array.isArray(t)&&t.every(u.isValidElement),h2=t=>Array.isArray(t)?t:[t],rRe=(t,e)=>{const n={...e};return n.props=Object.assign(t.props,e.props),n},sne=(t,e,n,r)=>{if(!t)return"";let i="";const s=h2(t),a=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,l)=>{if(Za(o)){i+=`${o}`;return}if(u.isValidElement(o)){const{props:c,type:d}=o,f=Object.keys(c).length,p=a.indexOf(d)>-1,g=c.children;if(!g&&p&&!f){i+=`<${d}/>`;return}if(!g&&(!p||f)||c.i18nIsDynamicList){i+=`<${l}></${l}>`;return}if(p&&f===1&&Za(g)){i+=`<${d}>${g}</${d}>`;return}const y=sne(g,e,n,r);i+=`<${l}>${y}</${l}>`;return}if(o===null){i6(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(eh(o)){const{format:c,...d}=o,f=Object.keys(d);if(f.length===1){const p=c?`${f[0]}, ${c}`:f[0];i+=`{{${p}}}`;return}i6(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}i6(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},iRe=(t,e,n,r,i,s)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(a.map(b=>`<${b}`).join("|")).test(e);if(!t&&!o&&!s)return[e];const l={},c=b=>{h2(b).forEach(S=>{Za(S)||(zE(S)?c(WE(S)):eh(S)&&!u.isValidElement(S)&&Object.assign(l,S))})};c(t);const d=zTe.parse(`<0>${e}</0>`),f={...l,...i},p=(b,C,S)=>{var I;const R=WE(b),w=y(R,C.children,S);return nRe(R)&&w.length===0||(I=b.props)!=null&&I.i18nIsDynamicList?R:w},g=(b,C,S,R,w)=>{b.dummy?(b.children=C,S.push(u.cloneElement(b,{key:R},w?void 0:C))):S.push(...u.Children.map([b],I=>{const k={...I.props};return delete k.i18nIsDynamicList,u.createElement(I.type,{...k,key:R,ref:I.ref},w?null:C)}))},y=(b,C,S)=>{const R=h2(b);return h2(C).reduce((I,k,x)=>{var N,D;const L=((D=(N=k.children)==null?void 0:N[0])==null?void 0:D.content)&&n.services.interpolator.interpolate(k.children[0].content,f,n.language);if(k.type==="tag"){let U=R[parseInt(k.name,10)];S.length===1&&!U&&(U=S[0][k.name]),U||(U={});const j=Object.keys(k.attrs).length!==0?rRe({props:k.attrs},U):U,$=u.isValidElement(j),Z=$&&zE(k,!0)&&!k.voidElement,V=o&&eh(j)&&j.dummy&&!$,z=eh(t)&&Object.hasOwnProperty.call(t,k.name);if(Za(j)){const K=n.services.interpolator.interpolate(j,f,n.language);I.push(K)}else if(zE(j)||Z){const K=p(j,k,S);g(j,K,I,x)}else if(V){const K=y(R,k.children,S);g(j,K,I,x)}else if(Number.isNaN(parseFloat(k.name)))if(z){const K=p(j,k,S);g(j,K,I,x,k.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(k.name)>-1)if(k.voidElement)I.push(u.createElement(k.name,{key:`${k.name}-${x}`}));else{const K=y(R,k.children,S);I.push(u.createElement(k.name,{key:`${k.name}-${x}`},K))}else if(k.voidElement)I.push(`<${k.name} />`);else{const K=y(R,k.children,S);I.push(`<${k.name}>${K}</${k.name}>`)}else if(eh(j)&&!$){const K=k.children[0]?L:null;K&&I.push(K)}else g(j,L,I,x,k.children.length!==1||!L)}else if(k.type==="text"){const U=r.transWrapTextNodes,j=s?r.unescape(n.services.interpolator.interpolate(k.content,f,n.language)):n.services.interpolator.interpolate(k.content,f,n.language);U?I.push(u.createElement(U,{key:`${k.name}-${x}`},j)):I.push(j)}return I},[])},v=y([{dummy:!0,children:t||[]}],d,h2(t||[]));return WE(v[0])},ane=(t,e,n)=>{const r=t.key||e,i=u.cloneElement(t,{key:r});if(!i.props||!i.props.children||n.indexOf(`${e}/>`)<0&&n.indexOf(`${e} />`)<0)return i;function s(){return u.createElement(u.Fragment,null,i)}return u.createElement(s,{key:r})},sRe=(t,e)=>t.map((n,r)=>ane(n,r,e)),aRe=(t,e)=>{const n={};return Object.keys(t).forEach(r=>{Object.assign(n,{[r]:ane(t[r],r,e)})}),n},oRe=(t,e,n,r)=>t?Array.isArray(t)?sRe(t,e):eh(t)?aRe(t,e):(gg(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function lRe({children:t,count:e,parent:n,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:l,ns:c,i18n:d,t:f,shouldUnescape:p,...g}){var j,$,Z,V,z,K;const y=d||GM();if(!y)return gg(y,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),t;const v=f||y.t.bind(y)||(q=>q),b={...rne(),...(j=y.options)==null?void 0:j.react};let C=c||v.ns||(($=y.options)==null?void 0:$.defaultNS);C=Za(C)?[C]:C||["translation"];const S=sne(t,b,y,r),R=o||S||b.transEmptyNodeValue||r,{hashTransKey:w}=b,I=r||(w?w(S||R):S||R);(V=(Z=y.options)==null?void 0:Z.interpolation)!=null&&V.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const k=a||e!==void 0&&!((K=(z=y.options)==null?void 0:z.interpolation)!=null&&K.alwaysFormat)||!t?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},x={...s,context:i||s.context,count:e,...a,...k,defaultValue:R,ns:C},L=I?v(I,x):R,N=oRe(l,L,y,r),D=iRe(N||t,L,y,b,x,p),U=n??b.defaultTransParent;return U?u.createElement(U,g,D):D}const cRe={type:"3rdParty",init(t){eRe(t.options.react),tRe(t)}},one=u.createContext();class uRe{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function ca({children:t,count:e,parent:n,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:l,ns:c,i18n:d,t:f,shouldUnescape:p,...g}){var S;const{i18n:y,defaultNS:v}=u.useContext(one)||{},b=d||y||GM(),C=f||(b==null?void 0:b.t.bind(b));return lRe({children:t,count:e,parent:n,i18nKey:r,context:i,tOptions:s,values:a,defaults:o,components:l,ns:c||(C==null?void 0:C.ns)||v||((S=b==null?void 0:b.options)==null?void 0:S.defaultNS),i18n:b,t:f,shouldUnescape:p,...g})}const dRe=(t,e)=>{const n=u.useRef();return u.useEffect(()=>{n.current=t},[t,e]),n.current},lne=(t,e,n,r)=>t.getFixedT(e,n,r),hRe=(t,e,n,r)=>u.useCallback(lne(t,e,n,r),[t,e,n,r]),it=(t,e={})=>{var w,I,k,x;const{i18n:n}=e,{i18n:r,defaultNS:i}=u.useContext(one)||{},s=n||r||GM();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new uRe),!s){gg(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const L=(D,U)=>Za(U)?U:eh(U)&&Za(U.defaultValue)?U.defaultValue:Array.isArray(D)?D[D.length-1]:D,N=[L,{},!1];return N.t=L,N.i18n={},N.ready=!1,N}(w=s.options.react)!=null&&w.wait&&gg(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...rne(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let c=i||((I=s.options)==null?void 0:I.defaultNS);c=Za(c)?[c]:c||["translation"],(x=(k=s.reportNamespaces).addUsedNamespaces)==null||x.call(k,c);const d=(s.isInitialized||s.initializedStoreOnce)&&c.every(L=>WTe(L,s,a)),f=hRe(s,e.lng||null,a.nsMode==="fallback"?c:c[0],l),p=()=>f,g=()=>lne(s,e.lng||null,a.nsMode==="fallback"?c:c[0],l),[y,v]=u.useState(p);let b=c.join();e.lng&&(b=`${e.lng}${b}`);const C=dRe(b),S=u.useRef(!0);u.useEffect(()=>{const{bindI18n:L,bindI18nStore:N}=a;S.current=!0,!d&&!o&&(e.lng?p$(s,e.lng,c,()=>{S.current&&v(g)}):BT(s,c,()=>{S.current&&v(g)})),d&&C&&C!==b&&S.current&&v(g);const D=()=>{S.current&&v(g)};return L&&(s==null||s.on(L,D)),N&&(s==null||s.store.on(N,D)),()=>{S.current=!1,s&&(L==null||L.split(" ").forEach(U=>s.off(U,D))),N&&s&&N.split(" ").forEach(U=>s.store.off(U,D))}},[s,b]),u.useEffect(()=>{S.current&&d&&v(p)},[s,l,d]);const R=[y,s,d];if(R.t=y,R.i18n=s,R.ready=d,d||!d&&!o)return R;throw new Promise(L=>{e.lng?p$(s,e.lng,c,()=>L()):BT(s,c,()=>L())})};function cne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{fillRule:"evenodd",d:"m12 4.236-6 3V12c0 5.156 4.239 7.254 6 7.898 1.761-.644 6-2.742 6-7.898V7.236zm-.894-1.789a2 2 0 0 1 1.788 0l6 3A2 2 0 0 1 20 7.236V12c0 6.742-5.773 9.246-7.51 9.846-.32.111-.66.111-.98 0C9.774 21.246 4 18.743 4 12V7.236a2 2 0 0 1 1.106-1.789z",clipRule:"evenodd"})})}cne.displayName="AdminIcon";const fRe=u.forwardRef(cne);function une(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"m12 10.775-3.9 3.9a.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275.95.95 0 0 1-.275-.7q0-.425.275-.7l4.6-4.6q.15-.15.325-.212Q11.8 8.4 12 8.4t.375.063a.9.9 0 0 1 .325.212l4.6 4.6a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275z"})})}une.displayName="ChevronUpIcon";const mRe=u.forwardRef(une);function dne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 11.034a1 1 0 0 0 .29.702l.005.005c.18.18.43.29.705.29h8a1 1 0 0 0 0-2h-5.586L22 3.445a1 1 0 0 0-1.414-1.414L14 8.617V3.031a1 1 0 1 0-2 0zm0 1.963a1 1 0 0 0-.29-.702l-.005-.004A1 1 0 0 0 11 12H3a1 1 0 1 0 0 2h5.586L2 20.586A1 1 0 1 0 3.414 22L10 15.414V21a1 1 0 0 0 2 0z"})})}dne.displayName="CollapseIcon";const pRe=u.forwardRef(dne);function hne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M7 21q-.824 0-1.412-.587A1.93 1.93 0 0 1 5 19V6a.97.97 0 0 1-.713-.287A.97.97 0 0 1 4 5q0-.424.287-.713A.97.97 0 0 1 5 4h4q0-.424.287-.712A.97.97 0 0 1 10 3h4q.424 0 .713.288Q15 3.575 15 4h4q.424 0 .712.287Q20 4.576 20 5t-.288.713A.97.97 0 0 1 19 6v13q0 .824-.587 1.413A1.93 1.93 0 0 1 17 21zM7 6v13h10V6zm2 10q0 .424.287.712Q9.576 17 10 17t.713-.288A.97.97 0 0 0 11 16V9a.97.97 0 0 0-.287-.713A.97.97 0 0 0 10 8a.97.97 0 0 0-.713.287A.97.97 0 0 0 9 9zm4 0q0 .424.287.712.288.288.713.288.424 0 .713-.288A.97.97 0 0 0 15 16V9a.97.97 0 0 0-.287-.713A.97.97 0 0 0 14 8a.97.97 0 0 0-.713.287A.97.97 0 0 0 13 9z"})})}hne.displayName="DeleteIcon";const gRe=u.forwardRef(hne);function fne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{fillRule:"evenodd",d:"M15.706 2.637a2 2 0 0 1 2.829 0l2.828 2.828a2 2 0 0 1 0 2.829L9.605 20.052a1 1 0 0 1-.465.263L3.483 21.73a1 1 0 0 1-1.212-1.213l1.414-5.657a1 1 0 0 1 .263-.465zm1.224 7.262L14.102 7.07l-8.544 8.544-.943 3.771 3.771-.943z",clipRule:"evenodd"})})}fne.displayName="EditIcon";const g$=u.forwardRef(fne);function mne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"m2.765 16.02-2.47-2.416A1.02 1.02 0 0 1 0 12.852q0-.456.295-.751a15.6 15.6 0 0 1 5.316-3.786A15.9 15.9 0 0 1 12 7q3.355 0 6.39 1.329a16 16 0 0 1 5.315 3.772q.295.294.295.751t-.295.752l-2.47 2.416a1.047 1.047 0 0 1-1.396.108l-3.114-2.363a1.1 1.1 0 0 1-.322-.376 1.1 1.1 0 0 1-.108-.483v-2.27a13.6 13.6 0 0 0-2.12-.524C13.459 9.996 12 9.937 12 9.937s-1.459.059-2.174.175q-1.074.174-2.121.523v2.271q0 .268-.108.483a1.1 1.1 0 0 1-.322.376l-3.114 2.363a1.047 1.047 0 0 1-1.396-.107"})})}mne.displayName="EndCallIcon";const pne=u.forwardRef(mne);function gne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M21 3.997a1 1 0 0 0-.29-.702l-.005-.004A1 1 0 0 0 20 3h-8a1 1 0 1 0 0 2h5.586L5 17.586V12a1 1 0 1 0-2 0v8.003a1 1 0 0 0 .29.702l.005.004c.18.18.43.291.705.291h8a1 1 0 1 0 0-2H6.414L19 6.414V12a1 1 0 1 0 2 0z"})})}gne.displayName="ExpandIcon";const vne=u.forwardRef(gne);function yne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M4 11a.97.97 0 0 1-.712-.287A.97.97 0 0 1 3 10V4q0-.424.288-.712A.97.97 0 0 1 4 3h6q.424 0 .713.288Q11 3.575 11 4v6q0 .424-.287.713A.97.97 0 0 1 10 11zm5-2V5H5v4zm5 12a.97.97 0 0 1-.713-.288A.97.97 0 0 1 13 20v-6q0-.424.287-.713A.97.97 0 0 1 14 13h6q.424 0 .712.287.288.288.288.713v6q0 .424-.288.712A.97.97 0 0 1 20 21zm5-2v-4h-4v4zM4 21a.97.97 0 0 1-.712-.288A.97.97 0 0 1 3 20v-6q0-.424.288-.713A.97.97 0 0 1 4 13h6q.424 0 .713.287.287.288.287.713v6q0 .424-.287.712A.97.97 0 0 1 10 21zm5-2v-4H5v4zm5-8a.97.97 0 0 1-.713-.287A.97.97 0 0 1 13 10V4q0-.424.287-.712A.97.97 0 0 1 14 3h6q.424 0 .712.288Q21 3.575 21 4v6q0 .424-.288.713A.97.97 0 0 1 20 11zm5-2V5h-4v4z"})})}yne.displayName="GridIcon";const vRe=u.forwardRef(yne);function _ne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M16.713 6.713A.97.97 0 0 1 16 7a.97.97 0 0 1-.713-.287A.97.97 0 0 1 15 6q0-.424.287-.713A.97.97 0 0 1 16 5q.424 0 .712.287Q17 5.576 17 6t-.288.713"}),E.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm12 2H6v4h12zM6 12v-2h12v2zm0 2v2h12v-2zm0 6v-2h12v2z",clipRule:"evenodd"})]})}_ne.displayName="HostIcon";const yRe=u.forwardRef(_ne);function Cne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 19.071q-1.467 1.467-3.536 1.467-2.067 0-3.535-1.467t-1.467-3.535q0-2.07 1.467-3.536L7.05 9.879q.3-.3.707-.3t.707.3.301.707-.3.707l-2.122 2.121a2.9 2.9 0 0 0-.884 2.122q0 1.237.884 2.12.884.885 2.121.885t2.122-.884l2.121-2.121q.3-.3.707-.3t.707.3.3.707q0 .405-.3.707zm-1.414-4.243q-.3.3-.707.301a.97.97 0 0 1-.707-.3q-.3-.3-.301-.708 0-.405.3-.707l4.243-4.242q.3-.3.707-.3t.707.3.3.707-.3.707zm6.364-.707q-.3.3-.707.3a.97.97 0 0 1-.707-.3q-.3-.3-.301-.707 0-.405.3-.707l2.122-2.121q.884-.885.884-2.121 0-1.238-.884-2.122a2.9 2.9 0 0 0-2.121-.884q-1.237 0-2.122.884l-2.121 2.122q-.3.3-.707.3a.97.97 0 0 1-.707-.3q-.3-.3-.3-.708 0-.405.3-.707L12 4.93q1.467-1.467 3.536-1.467t3.535 1.467 1.467 3.536T19.071 12z"})})}Cne.displayName="LinkIcon";const _Re=u.forwardRef(Cne);function bne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M6 22q-.825 0-1.412-.587A1.93 1.93 0 0 1 4 20V10q0-.825.588-1.412a2 2 0 0 1 .702-.463L1.333 4.167a1 1 0 0 1 1.414-1.414L7 7.006v-.012l13 13v.012l1.247 1.247a1 1 0 1 1-1.414 1.414l-.896-.896A1.94 1.94 0 0 1 18 22zm14-4.834V10q0-.825-.587-1.412A1.93 1.93 0 0 0 18 8h-1V6q0-2.075-1.463-3.537Q14.075 1 12 1T8.463 2.463a4.9 4.9 0 0 0-1.22 1.946L9 6.166V6q0-1.25.875-2.125A2.9 2.9 0 0 1 12 3q1.25 0 2.125.875T15 6v2h-4.166z"})})}bne.displayName="LockOffIcon";const CRe=u.forwardRef(bne);function Ene(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M6 22q-.824 0-1.412-.587A1.93 1.93 0 0 1 4 20V10q0-.825.588-1.412A1.93 1.93 0 0 1 6 8h1V6q0-2.075 1.463-3.537Q9.926 1 12 1q2.075 0 3.537 1.463Q17 3.925 17 6v2h1q.824 0 1.413.588Q20 9.175 20 10v10q0 .824-.587 1.413A1.93 1.93 0 0 1 18 22zM9 8h6V6q0-1.25-.875-2.125A2.9 2.9 0 0 0 12 3q-1.25 0-2.125.875A2.9 2.9 0 0 0 9 6z"})})}Ene.displayName="LockSolidIcon";const bRe=u.forwardRef(Ene);function Sne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M8 8v-.006l6.831 6.832-.002.002 1.414 1.415.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414l-3.022-3.022A7.95 7.95 0 0 1 13 19.938V21a1 1 0 0 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 1 1 2 0 6 6 0 0 0 8.587 5.415l-1.55-1.55A4.005 4.005 0 0 1 8 12v-1.172L2.086 4.914A1 1 0 0 1 3.5 3.5zm9.417 6.583 1.478 1.477A7.96 7.96 0 0 0 20 12a1 1 0 0 0-2 0c0 .925-.21 1.8-.583 2.583M8.073 5.238l7.793 7.793q.132-.495.134-1.031V6a4 4 0 0 0-7.927-.762"})})}Sne.displayName="MicOffSolidIcon";const wne=u.forwardRef(Sne);function kne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{fillRule:"evenodd",d:"M8 8v-.006l2 2V10l3.414 3.414.003-.003 1.414 1.415-.002.002 1.414 1.415.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414l-3.022-3.022A7.95 7.95 0 0 1 13 19.938V21a1 1 0 1 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 1 1 2 0 6 6 0 0 0 8.587 5.415l-1.55-1.55A4.005 4.005 0 0 1 8 12v-1.172L2.086 4.914A1 1 0 0 1 3.5 3.5z",clipRule:"evenodd"}),E.jsx("path",{d:"M14 6v5.166l1.866 1.866q.132-.496.134-1.032V6a4 4 0 0 0-7.928-.762L10 7.166V6a2 2 0 1 1 4 0m3.417 8.583 1.477 1.477A7.96 7.96 0 0 0 20 12a1 1 0 1 0-2 0c0 .925-.21 1.8-.583 2.583"})]})}kne.displayName="MicOffIcon";const ERe=u.forwardRef(kne);function Tne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M8 6a4 4 0 1 1 8 0v6a4 4 0 0 1-8 0z"}),E.jsx("path",{d:"M5 11a1 1 0 0 1 1 1 6 6 0 0 0 12 0 1 1 0 1 1 2 0 8 8 0 0 1-7 7.938V21a1 1 0 1 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 0 1 1-1"})]})}Tne.displayName="MicOnSolidIcon";const KM=u.forwardRef(Tne);function Rne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M3.5 3.5a1 1 0 1 0-1.414 1.414l4.113 4.114a5.5 5.5 0 0 0-.184 1.07A5.002 5.002 0 0 0 7 20h10.172l1.914 1.914A1 1 0 1 0 20.5 20.5l-.979-.979.004-.001L7.145 7.14l-.002.003zm18.5 12a4.48 4.48 0 0 1-.928 2.738L8.637 5.803A5.47 5.47 0 0 1 11.5 5a5.49 5.49 0 0 1 4.25 2.008 4 4 0 0 1 4.187 4.708A4.5 4.5 0 0 1 22 15.5"})})}Rne.displayName="OfflineIcon";const SRe=u.forwardRef(Rne);function Ine(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M6 14q-.824 0-1.412-.588A1.93 1.93 0 0 1 4 12q0-.825.588-1.412A1.93 1.93 0 0 1 6 10q.824 0 1.412.588Q8 11.175 8 12t-.588 1.412A1.93 1.93 0 0 1 6 14m6 0q-.825 0-1.412-.588A1.93 1.93 0 0 1 10 12q0-.825.588-1.412A1.93 1.93 0 0 1 12 10q.825 0 1.412.588Q14 11.175 14 12t-.588 1.412A1.93 1.93 0 0 1 12 14m6 0q-.824 0-1.413-.588A1.93 1.93 0 0 1 16 12q0-.825.587-1.412A1.93 1.93 0 0 1 18 10q.824 0 1.413.588Q20 11.175 20 12t-.587 1.412A1.93 1.93 0 0 1 18 14"})})}Ine.displayName="OverflowHorizontalIcon";const wRe=u.forwardRef(Ine);function xne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M5 3h6a1 1 0 1 1 0 2H5v14h14v-6a1 1 0 1 1 2 0v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2"}),E.jsx("path",{d:"M15 3h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L17.586 5H15a1 1 0 1 1 0-2"})]})}xne.displayName="PopOutIcon";const Mne=u.forwardRef(xne);function Pne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M11 3a1 1 0 1 1 2 0v8.5a.5.5 0 0 0 1 0V4a1 1 0 1 1 2 0v10.2l3.284-2.597a1.081 1.081 0 0 1 1.47 1.577c-.613.673-1.214 1.367-1.818 2.064-1.267 1.463-2.541 2.934-3.943 4.235A6 6 0 0 1 5 15V7a1 1 0 0 1 1.999 0v5.5a.5.5 0 0 0 1 0V4a1 1 0 0 1 2 0v7.5a.5.5 0 0 0 1 0z"})})}Pne.displayName="RaisedHandSolidIcon";const Lne=u.forwardRef(Pne);function One(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{fillRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10m3.536-6.464a1 1 0 0 0-1.415-1.415A3 3 0 0 1 12 15a3 3 0 0 1-2.121-.879 1 1 0 1 0-1.414 1.415A5 5 0 0 0 12 17c1.38 0 2.632-.56 3.536-1.464M10 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m5.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd"})})}One.displayName="ReactionSolidIcon";const kRe=u.forwardRef(One);function Ane(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12.731 2C13.432 2 14 2.568 14 3.269c0 .578.396 1.074.935 1.286q.128.052.253.106c.531.23 1.162.16 1.572-.25a1.27 1.27 0 0 1 1.794 0l1.034 1.035a1.27 1.27 0 0 1 0 1.794c-.41.41-.48 1.04-.248 1.572l.105.253c.212.539.708.935 1.286.935.701 0 1.269.568 1.269 1.269v1.462c0 .701-.568 1.269-1.269 1.269-.578 0-1.074.396-1.287.935q-.05.128-.104.253c-.232.531-.161 1.162.248 1.572a1.27 1.27 0 0 1 0 1.794l-1.034 1.034a1.27 1.27 0 0 1-1.794 0c-.41-.41-1.04-.48-1.572-.248a8 8 0 0 1-.253.105c-.539.212-.935.708-.935 1.286 0 .701-.568 1.269-1.269 1.269H11.27c-.702 0-1.27-.568-1.27-1.269 0-.578-.396-1.074-.935-1.287a8 8 0 0 1-.253-.104c-.531-.232-1.162-.161-1.572.248a1.27 1.27 0 0 1-1.794 0l-1.034-1.034a1.27 1.27 0 0 1 0-1.794c.41-.41.48-1.04.249-1.572a8 8 0 0 1-.106-.253C4.343 14.396 3.847 14 3.27 14 2.568 14 2 13.432 2 12.731V11.27c0-.702.568-1.27 1.269-1.27.578 0 1.074-.396 1.286-.935q.052-.128.106-.253c.23-.531.16-1.162-.25-1.572a1.27 1.27 0 0 1 0-1.794l1.035-1.034a1.27 1.27 0 0 1 1.794 0c.41.41 1.04.48 1.572.249a8 8 0 0 1 .253-.106c.539-.212.935-.708.935-1.286C10 2.568 10.568 2 11.269 2zM12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8"})})}Ane.displayName="SettingsSolidIcon";const TRe=u.forwardRef(Ane);function Nne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M1.288 20.713Q1.575 21 2 21h20q.424 0 .712-.288A.97.97 0 0 0 23 20a.97.97 0 0 0-.288-.712A.97.97 0 0 0 22 19H2a.97.97 0 0 0-.712.288A.97.97 0 0 0 1 20q0 .424.288.712m1.3-3.299A1.93 1.93 0 0 1 2 16V5q0-.824.587-1.412A1.93 1.93 0 0 1 4 3h16q.824 0 1.413.587Q22 4.176 22 5v11q0 .824-.587 1.413A1.93 1.93 0 0 1 20 18H4q-.824 0-1.412-.587m10.12-10.12a1 1 0 0 0-1.415 0l-2.5 2.5a1 1 0 0 0 1.414 1.414l.793-.793V13a1 1 0 1 0 2 0v-2.586l.793.793a1 1 0 0 0 1.414-1.414z"})})}Nne.displayName="ShareScreenSolidIcon";const RRe=u.forwardRef(Nne);function Dne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12 16a.97.97 0 0 1-.713-.287A.97.97 0 0 1 11 15V7.85L9.125 9.725q-.3.3-.7.3T7.7 9.7a.93.93 0 0 1-.288-.713A.98.98 0 0 1 7.7 8.3l3.6-3.6q.15-.15.325-.213.175-.062.375-.062t.375.062a.9.9 0 0 1 .325.213l3.6 3.6q.3.3.287.712a.98.98 0 0 1-.287.688q-.3.3-.713.313a.93.93 0 0 1-.712-.288L13 7.85V15q0 .424-.287.713A.97.97 0 0 1 12 16m-6 4q-.824 0-1.412-.587A1.93 1.93 0 0 1 4 18v-2q0-.424.287-.713A.97.97 0 0 1 5 15q.424 0 .713.287Q6 15.576 6 16v2h12v-2q0-.424.288-.713A.97.97 0 0 1 19 15q.424 0 .712.287.288.288.288.713v2q0 .824-.587 1.413A1.93 1.93 0 0 1 18 20z"})})}Dne.displayName="ShareIcon";const IRe=u.forwardRef(Dne);function Une(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M5 5h14v8h-5a1 1 0 0 0-1 1v5H5zm10 14v-4h4v4zM5 21h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"})})}Une.displayName="SpotlightIcon";const xRe=u.forwardRef(Une);function Fne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M16.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L16.586 6H6a2 2 0 0 0-2 2v7a1 1 0 1 1-2 0V8a4 4 0 0 1 4-4h10.586l-.293-.293a1 1 0 0 1 0-1.414M18 18H7.414l.293-.293a1 1 0 1 0-1.414-1.414l-2 2a1 1 0 0 0 0 1.414l2 2a1 1 0 0 0 1.414-1.414L7.414 20H18a4 4 0 0 0 4-4V9a1 1 0 1 0-2 0v7a2 2 0 0 1-2 2"}),E.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6"})]})}Fne.displayName="SwitchCameraSolidIcon";const MRe=u.forwardRef(Fne);function jne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M12.999 13.012v-.005zm-9.411 7.401Q4.175 21 5 21h14q.824 0 1.413-.587Q21 19.825 21 19V5q0-.824-.587-1.412A1.93 1.93 0 0 0 19 3H5q-.824 0-1.412.587A1.93 1.93 0 0 0 3 5v14q0 .824.587 1.413M12 9a1 1 0 0 0-1 1 1 1 0 1 1-2 0 3 3 0 1 1 4.44 2.633 1.4 1.4 0 0 0-.383.288.3.3 0 0 0-.057.085A1 1 0 0 1 11 13c0-.58.253-1.047.539-1.38.281-.33.63-.572.94-.742A1 1 0 0 0 12 9m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})})}jne.displayName="UnknownSolidIcon";const PRe=u.forwardRef(jne);function Hne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M10 12q-1.65 0-2.825-1.175T6 8t1.175-2.825T10 4t2.825 1.175T14 8t-1.175 2.825T10 12m-8 6v-.8q0-.85.438-1.562.437-.713 1.162-1.088a14.8 14.8 0 0 1 3.15-1.163A13.8 13.8 0 0 1 10 13q1.65 0 3.25.387 1.6.388 3.15 1.163.724.375 1.163 1.087Q18 16.35 18 17.2v.8q0 .824-.587 1.413A1.93 1.93 0 0 1 16 20H4q-.824 0-1.412-.587A1.93 1.93 0 0 1 2 18m2 0h12v-.8a.97.97 0 0 0-.5-.85q-1.35-.675-2.725-1.012a11.6 11.6 0 0 0-5.55 0Q5.85 15.675 4.5 16.35a.97.97 0 0 0-.5.85zm6-8q.825 0 1.412-.588Q12 8.826 12 8q0-.824-.588-1.412A1.93 1.93 0 0 0 10 6q-.825 0-1.412.588A1.93 1.93 0 0 0 8 8q0 .825.588 1.412Q9.175 10 10 10m7 1h2v2q0 .424.288.713.287.287.712.287.424 0 .712-.287A.97.97 0 0 0 21 13v-2h2q.424 0 .712-.287A.97.97 0 0 0 24 10a.97.97 0 0 0-.288-.713A.97.97 0 0 0 23 9h-2V7a.97.97 0 0 0-.288-.713A.97.97 0 0 0 20 6a.97.97 0 0 0-.712.287A.97.97 0 0 0 19 7v2h-2a.97.97 0 0 0-.712.287A.97.97 0 0 0 16 10q0 .424.288.713.287.287.712.287"})})}Hne.displayName="UserAddIcon";const LRe=u.forwardRef(Hne);function $ne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M9.175 13.825Q10.35 15 12 15t2.825-1.175T16 11t-1.175-2.825T12 7 9.175 8.175 8 11t1.175 2.825m4.237-1.412A1.93 1.93 0 0 1 12 13q-.825 0-1.412-.588A1.93 1.93 0 0 1 10 11q0-.825.588-1.412A1.93 1.93 0 0 1 12 9q.825 0 1.412.588Q14 10.175 14 11t-.588 1.412"}),E.jsx("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0"}),E.jsx("path",{d:"M16.23 18.792a13 13 0 0 0-1.455-.455 11.6 11.6 0 0 0-5.55 0q-.73.18-1.455.455a8 8 0 0 1-1.729-1.454q1.336-.618 2.709-.95A13.8 13.8 0 0 1 12 16q1.65 0 3.25.387 1.373.333 2.709.95a8 8 0 0 1-1.73 1.455"})]})}$ne.displayName="UserProfileIcon";const Vne=u.forwardRef($ne);function Bne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M2.747 2.753 4.35 4.355l.007-.003L18 17.994v.012l3.247 3.247a1 1 0 0 1-1.414 1.414l-2.898-2.898A2 2 0 0 1 16 20H6a4 4 0 0 1-4-4V8c0-.892.292-1.715.785-2.38L1.333 4.166a1 1 0 0 1 1.414-1.414M18 15.166 6.834 4H16a2 2 0 0 1 2 2v4.286l3.35-2.871a1 1 0 0 1 1.65.76v7.65a1 1 0 0 1-1.65.76L18 13.715z"})})}Bne.displayName="VideoCallOffSolidIcon";const ORe=u.forwardRef(Bne);function qne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M6 4h10a2 2 0 0 1 2 2v4.286l3.35-2.871a1 1 0 0 1 1.65.76v7.65a1 1 0 0 1-1.65.76L18 13.715V18a2 2 0 0 1-2 2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4"})})}qne.displayName="VideoCallSolidIcon";const Gne=u.forwardRef(qne);function Kne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M3.5 3.5a1 1 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2l3.293 3.293c.63.63 1.707.184 1.707-.707v-3.758l7.086 7.086A1 1 0 0 0 20.5 20.5l-2.136-2.136.003-.003-1.414-1.414-.003.003-1.414-1.414.003-.003-1.415-1.415-.002.003L12 12v-.006L7.503 7.497 7.5 7.5zm11.496 8.662 1.661 1.66c.222-.564.343-1.18.343-1.822 0-1.38-.56-2.632-1.464-3.536a1 1 0 1 0-1.414 1.414 3 3 0 0 1 .874 2.284m3.164 3.165 1.462 1.46A8.96 8.96 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364A1 1 0 0 0 16.95 7.05 6.98 6.98 0 0 1 19 12a7 7 0 0 1-.84 3.326M8.917 6.083 12 9.166V5.414c0-.89-1.077-1.337-1.707-.707z"})})}Kne.displayName="VolumeOffSolidIcon";const ARe=u.forwardRef(Kne);function Zne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"m3.5 3.5 4 4 .003-.003L8.917 8.91l-.003.003L10 10v-.006l2 2V12l2.122 2.121.002-.003 1.415 1.415-.003.003 1.414 1.414.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414L12 14.828v3.758c0 .89-1.077 1.337-1.707.707L7 16H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h.172L2.086 4.914A1 1 0 0 1 3.5 3.5M7.172 10H5v4h2.828L10 16.17v-3.343zm7.824 2.162 1.661 1.66c.222-.564.343-1.18.343-1.822 0-1.38-.56-2.632-1.464-3.536a1 1 0 1 0-1.414 1.414 3 3 0 0 1 .874 2.284m3.164 3.165 1.462 1.46A8.96 8.96 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364A1 1 0 0 0 16.95 7.05 6.98 6.98 0 0 1 19 12a7 7 0 0 1-.84 3.326M8.917 6.083 12 9.166V5.414c0-.89-1.077-1.337-1.707-.707z"})})}Zne.displayName="VolumeOffIcon";const NRe=u.forwardRef(Zne);function zne(t,e){return E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:[E.jsx("path",{d:"M3 10a2 2 0 0 1 2-2h2l3.293-3.293c.63-.63 1.707-.184 1.707.707v13.172c0 .89-1.077 1.337-1.707.707L7 16H5a2 2 0 0 1-2-2zm4.828 4L10 16.172V7.828L7.828 10H5v4zm6.294-5.536a1 1 0 0 1 1.414 0A5 5 0 0 1 17 12c0 1.38-.56 2.632-1.464 3.535a1 1 0 1 1-1.415-1.414 3 3 0 0 0 .88-2.121c0-.829-.335-1.578-.88-2.122a1 1 0 0 1 0-1.414"}),E.jsx("path",{d:"M18.364 5.636A1 1 0 1 0 16.95 7.05 6.98 6.98 0 0 1 19 12a6.98 6.98 0 0 1-2.05 4.95 1 1 0 0 0 1.414 1.414A8.98 8.98 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364"})]})}zne.displayName="VolumeOnIcon";const DRe=u.forwardRef(zne);function Wne(t,e){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:e,...t,children:E.jsx("path",{d:"M4 20q-.824 0-1.412-.587A1.93 1.93 0 0 1 2 18V6q0-.824.587-1.412A1.93 1.93 0 0 1 4 4h16q.824 0 1.413.588Q22 5.175 22 6v12q0 .824-.587 1.413A1.93 1.93 0 0 1 20 20zm0-2h16V8H4z"})})}Wne.displayName="WebBrowserIcon";const URe=u.forwardRef(Wne),FRe="_header_127l4_15",jRe="_nav_127l4_35",HRe="_headerLogo_127l4_51",$Re="_leftNav_127l4_65",VRe="_hideMobile_127l4_65",BRe="_rightNav_127l4_89",qRe="_roomHeaderInfo_127l4_121",GRe="_roomAvatar_127l4_151",KRe="_nameLine_127l4_161",ZRe="_participantsLine_127l4_199",Ha={header:FRe,nav:jRe,headerLogo:HRe,leftNav:$Re,hideMobile:VRe,rightNav:BRe,roomHeaderInfo:qRe,roomAvatar:GRe,nameLine:KRe,participantsLine:ZRe},zRe=(t,e)=>u.createElement("svg",{width:200,height:200,viewBox:"0 0 571 329",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{d:"M457.256 177.164V276.563C457.256 281.443 453.292 285.404 448.408 285.404C443.524 285.404 439.56 281.443 439.56 276.563V175.388C439.56 170.508 443.524 166.548 448.408 166.548C450.191 166.548 451.848 167.071 453.235 167.976C453.632 168.238 454.007 168.528 454.361 168.846C454.814 169.264 455.231 169.73 455.599 170.232C455.925 172.637 456.477 174.957 457.256 177.164Z",fill:"#A6A7A9"}),u.createElement("path",{d:"M537.979 167.573V167.474C537.979 164.136 537.413 160.904 536.655 157.785C536.429 156.823 536.174 155.875 535.891 154.941C535.551 153.803 535.169 152.685 534.744 151.582C533.265 147.748 531.29 144.113 528.826 140.69C519.83 128.27 508.327 120.978 494.616 118.977C493.781 118.849 492.946 118.75 492.096 118.666C487.892 118.255 483.467 118.34 478.923 118.927C475.136 119.408 471.512 120.278 468.058 121.516C467.789 121.608 467.52 121.707 467.258 121.813C465.354 122.251 463.492 122.796 461.687 123.447C454.608 127.485 448.464 133.002 442.929 139.169C440.72 141.624 438.611 144.177 436.587 146.78C434.683 149.205 432.849 151.674 431.065 154.142C430.379 155.083 429.706 156.031 429.034 156.971C417.213 173.592 406.51 190.658 389.062 200.652C388.609 200.921 388.142 201.175 387.674 201.43C387.667 201.437 387.653 201.444 387.639 201.451C386.896 201.918 385.756 202.625 384.439 203.382C382.139 204.726 379.308 206.24 377.156 206.968C372.845 208.432 368.704 209.153 364.719 209.153C354.646 209.153 346.117 207.435 339.158 201.734C333.128 196.798 329.157 191.238 327.252 183.869C326.962 182.737 326.714 181.676 326.523 180.262H402.122C404.776 180.262 406.963 178.387 408.69 176.725C410.163 175.311 411.005 173.196 411.217 171.032C411.253 170.664 411.274 170.31 411.274 169.943C411.274 168.761 411.246 167.587 411.196 166.434C410.8 157.339 408.832 149.007 405.307 141.843C401.329 133.752 395.623 127.33 388.198 122.824C380.766 118.319 371.946 115.992 361.739 115.992C356.09 115.992 350.76 116.657 345.763 118.071C344.035 118.552 342.351 119.097 340.709 119.755C330.947 124.189 323.069 131.771 316.224 140.35C309.868 148.307 304.389 157.134 299.094 165.091C295.994 169.759 292.943 174.349 289.857 178.734C289.177 179.703 288.498 180.658 287.811 181.598C285.327 185.021 282.807 188.275 280.202 191.288C278.538 193.212 276.783 195.058 274.971 196.84C274.1 197.689 273.201 198.502 272.288 199.308C272.097 199.478 271.269 200.15 270.724 200.588C270.49 200.786 270.306 200.935 270.256 200.992C268.614 202.208 266.88 203.283 265.075 204.252C264.764 204.408 263.369 205.087 263.284 205.136C263.001 205.264 256.56 207.803 256.56 207.803C252.249 209.26 248.108 209.889 244.123 209.889C234.036 209.889 225.52 208.149 218.555 202.442C212.524 197.505 208.553 191.939 206.649 184.562C206.359 183.43 206.111 182.369 205.92 180.955H281.511C283.083 180.955 284.491 180.304 285.737 179.399C286.594 178.783 287.372 178.076 288.073 177.397C289.248 176.266 290.027 174.681 290.395 172.977C290.494 172.552 290.558 172.128 290.6 171.697C290.635 171.329 290.657 170.968 290.657 170.6C290.657 169.419 290.628 168.252 290.579 167.092C290.182 157.997 288.222 149.644 284.689 142.479C280.711 134.409 275.013 127.966 267.581 123.461C260.155 118.963 251.329 116.629 241.121 116.629C234.899 116.629 222.371 119.288 221.741 119.507C201.355 126.545 187.941 143.151 175.178 159.616C171.094 164.893 166.996 170.098 162.727 175.077C162.706 175.113 162.671 175.148 162.642 175.183C162.671 174.688 162.692 174.186 162.699 173.684C162.727 173.005 162.741 172.312 162.741 171.626C162.741 171.124 162.734 170.629 162.72 170.134C162.72 169.787 162.706 169.447 162.692 169.101C162.359 159.765 160.158 151.221 156.081 143.498C151.635 135.088 145.527 128.49 137.776 123.723C130.018 118.948 121.361 116.565 111.812 116.565C104.124 116.565 95.9488 118.156 89.3234 121.332C83.0447 124.345 76.3768 128.482 72.0872 133.752C71.8395 134.049 71.344 134.353 71.344 134.657V80.0629C71.344 78.1533 71.3015 65.288 70.6362 57.7627C70.3884 54.9266 70.0486 52.8472 69.5956 52.3875C67.7411 50.5344 65.8016 49.6079 62.7578 49.6079C59.8344 49.6079 56.5217 50.5344 54.5963 52.3875C52.671 54.2476 50.8164 77.934 50.8164 80.9823V171.633C50.8164 172.1 50.8235 172.559 50.8376 173.026C50.9297 175.785 51.2907 178.472 51.8357 181.096C53.2089 187.766 55.9271 193.99 59.2469 199.754C64.0886 208.17 71.2307 214.798 79.5197 219.635C87.7944 224.473 97.3433 226.885 107.55 226.885C117.772 226.885 127.222 224.473 135.645 219.635C136.424 219.19 137.252 218.73 137.995 218.249C157.539 207.767 172.071 191.076 185.527 173.726L187.396 171.35C187.389 171.506 187.396 171.668 187.396 171.831C187.396 182.44 189.817 191.91 194.658 200.256C199.493 208.602 206.239 215.13 214.86 219.833C223.475 224.537 233.229 226.885 244.101 226.885C250.196 226.885 256.602 225.76 263.298 223.511C267.899 221.969 271.984 220.102 275.558 217.931C275.558 217.931 275.565 217.931 275.565 217.924C289.666 209.733 299.929 194.428 308.785 181.132C309.839 187.808 312.005 193.968 315.276 199.612C320.117 207.958 326.849 214.493 335.471 219.19C344.092 223.893 353.839 226.248 364.712 226.248C370.813 226.248 377.219 225.124 383.916 222.867C390.605 220.618 395.864 217.704 400.373 214.126C401.024 213.638 418.253 196.317 429.027 182.893C430.832 180.636 432.467 178.493 433.798 176.563C433.847 176.492 433.89 176.428 433.939 176.357L434.463 174.801C434.647 176.867 434.959 178.925 435.397 180.962C435.652 182.15 435.943 183.338 436.289 184.512C436.318 184.618 436.353 184.724 436.381 184.831C436.573 185.474 436.771 186.118 436.99 186.754C437.011 186.825 437.033 186.889 437.054 186.959C437.118 187.136 437.181 187.32 437.245 187.497C437.443 188.063 437.656 188.629 437.875 189.187C437.351 190.687 436.82 192.186 436.289 193.678C435.666 195.44 435.036 197.201 434.406 198.962L428.97 215.01L428.85 215.356L428.284 217.025L427.576 219.112L427.059 220.632L427.576 220.541L428.284 220.413L436.296 218.956L440.317 218.228L441.025 218.1L444.791 217.414C445.895 217.209 446.999 217.004 448.103 216.799C448.344 216.764 448.578 216.714 448.811 216.672C449.852 216.481 450.885 216.29 451.919 216.099C452.917 215.915 453.901 215.731 454.892 215.547C455.09 215.512 455.295 215.469 455.493 215.434C456.845 215.194 458.19 214.939 459.535 214.691C459.967 214.953 460.406 215.201 460.845 215.448C461.078 215.583 461.312 215.71 461.552 215.837C470.684 220.788 480.707 222.811 491.169 221.814C493.618 221.58 496.003 221.191 498.325 220.647C507.379 218.546 515.384 214.126 522.229 207.435C533.35 196.599 538.687 183.19 537.979 167.573ZM327.677 159.786C328.647 156.038 330.02 152.268 331.797 149.403C333.524 146.589 335.647 143.632 338.153 141.425C340.362 139.488 342.825 137.67 345.529 136.453C350.194 134.325 355.602 133.15 361.732 133.15C370.481 133.15 377.58 136.63 383.017 141.935C387.54 146.348 390.591 152.834 392.176 159.786C392.502 161.187 392.764 162.58 392.962 164.001H326.714C326.983 162.58 327.295 161.222 327.677 159.786ZM207.095 160.493C209.035 153.52 212.517 146.963 217.543 142.543C223.574 137.246 231.438 134.134 241.114 134.134C249.87 134.134 256.963 137.493 262.406 142.791C266.922 147.204 269.98 153.569 271.559 160.486C271.885 161.88 272.146 163.287 272.345 164.702H206.097C206.373 163.287 206.699 161.894 207.095 160.493ZM485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.44 198.976C480.367 198.976 474.867 197.491 469.94 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.143 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.78 458.898 146.461C458.898 146.454 458.898 146.454 458.898 146.447C464.964 138.285 474.669 132.995 485.626 132.995ZM72.6818 169.129C73.0075 163.103 74.5081 157.608 77.1908 152.657C80.2417 147.027 84.4534 142.578 89.8259 139.332C95.1985 136.086 101.201 134.466 107.834 134.466C114.466 134.466 120.469 136.086 125.841 139.332C131.214 142.578 135.454 147.02 138.575 152.657C141.315 157.601 142.844 163.089 143.176 169.108C143.226 169.943 143.247 170.784 143.247 171.64C143.247 172.354 143.233 173.062 143.198 173.762C142.915 179.95 141.371 185.609 138.575 190.722C135.461 196.416 131.221 200.9 125.841 204.139C120.469 207.392 114.466 209.012 107.834 209.012C101.201 209.012 95.1985 207.392 89.8259 204.139C84.4604 200.9 80.2417 196.423 77.1908 190.722C74.4515 185.609 72.9437 179.95 72.6677 173.762C72.6323 173.062 72.6181 172.354 72.6181 171.64C72.6181 170.791 72.6394 169.957 72.6818 169.129Z",fill:"#A6A7A9",stroke:"white",strokeWidth:2,strokeMiterlimit:10}),u.createElement("path",{d:"M536.691 161.922C536.577 159.539 536.316 157.212 535.905 154.941C534.893 149.319 532.996 144.042 530.207 139.127C525.832 131.418 519.78 125.342 512.065 120.908C504.349 116.48 495.805 114.266 486.448 114.266C485.641 114.266 484.848 114.281 484.055 114.323C475.639 114.662 467.959 116.862 461.015 120.908C453.419 125.342 447.403 131.418 442.964 139.127C442.957 139.141 442.802 139.155 442.802 139.169C438.378 146.871 436.021 155.451 436.021 164.907V276.302C436.021 279.095 437.054 281.337 438.817 283.042C440.572 284.739 442.865 285.588 445.548 285.588C448.337 285.588 450.737 284.739 452.436 283.042C454.134 281.337 455.139 279.095 455.139 276.302V198.792C459.387 204.012 464.441 208.078 470.521 210.999C476.594 213.913 483.107 215.37 490.157 215.37C498.906 215.37 506.812 213.185 513.919 208.814C521.033 204.443 526.611 198.396 530.681 190.687C534.751 182.977 536.783 174.384 536.783 164.914C536.776 163.902 536.747 162.905 536.691 161.922ZM469.941 135.124C474.86 132.146 480.367 130.661 486.441 130.661C490.206 130.661 493.746 131.234 497.072 132.379C499.111 133.073 501.065 133.992 502.941 135.124C507.867 138.101 511.739 142.196 514.592 147.423C517.444 152.643 518.86 158.478 518.86 164.914V164.956C518.86 171.378 517.437 177.164 514.592 182.313C511.739 187.469 507.86 191.535 502.933 194.52C498.014 197.498 492.514 198.983 486.441 198.983C480.367 198.983 474.867 197.498 469.941 194.52C465.021 191.542 461.163 187.476 458.367 182.313C455.571 177.15 454.177 171.35 454.177 164.914C454.177 158.478 455.571 152.643 458.367 147.423C458.537 147.105 458.714 146.787 458.898 146.468C458.898 146.461 458.905 146.461 458.905 146.454C460.038 144.488 461.34 142.684 462.806 141.051C464.858 138.731 467.237 136.757 469.941 135.124Z",fill:"#154423"}),u.createElement("mask",{id:"mask0_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask0_61_306)"},u.createElement("path",{d:"M340.418 131.517H339.71V132.931H340.418V131.517Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask1_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask1_61_306)"},u.createElement("path",{d:"M341.126 131.517H340.418V132.931H341.126V131.517Z",fill:"#247B3D"})),u.createElement("mask",{id:"mask2_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask2_61_306)"},u.createElement("path",{d:"M341.834 131.517H341.126V132.931H341.834V131.517Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask3_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask3_61_306)"},u.createElement("path",{d:"M342.542 131.517H341.834V132.931H342.542V131.517Z",fill:"#5B9841"})),u.createElement("mask",{id:"mask4_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask4_61_306)"},u.createElement("path",{d:"M343.25 131.517H342.542V132.931H343.25V131.517Z",fill:"#74A841"})),u.createElement("mask",{id:"mask5_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask5_61_306)"},u.createElement("path",{d:"M343.958 131.517H343.25V132.931H343.958V131.517Z",fill:"#90B93E"})),u.createElement("mask",{id:"mask6_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask6_61_306)"},u.createElement("path",{d:"M344.665 131.517H343.958V132.931H344.665V131.517Z",fill:"#AAC637"})),u.createElement("mask",{id:"mask7_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask7_61_306)"},u.createElement("path",{d:"M345.373 131.517H344.666V132.931H345.373V131.517Z",fill:"#C6D32F"})),u.createElement("mask",{id:"mask8_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask8_61_306)"},u.createElement("path",{d:"M386.981 214.097H386.974V214.875H386.981V214.097Z",fill:"#0A6938"})),u.createElement("mask",{id:"mask9_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask9_61_306)"},u.createElement("path",{d:"M386.988 214.097H386.981V214.875H386.988V214.097Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask10_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask10_61_306)"},u.createElement("path",{d:"M386.995 214.097H386.988V214.875H386.995V214.097Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask11_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask11_61_306)"},u.createElement("path",{d:"M387.002 214.097H386.995V214.875H387.002V214.097Z",fill:"#0B6D38"})),u.createElement("mask",{id:"mask12_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask12_61_306)"},u.createElement("path",{d:"M387.009 214.097H387.002V214.875H387.009V214.097Z",fill:"#0B6D38"})),u.createElement("mask",{id:"mask13_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask13_61_306)"},u.createElement("path",{d:"M387.016 214.097H387.009V214.875H387.016V214.097Z",fill:"#0F6C39"})),u.createElement("mask",{id:"mask14_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask14_61_306)"},u.createElement("path",{d:"M387.023 214.097H387.016V214.875H387.023V214.097Z",fill:"#0F6C39"})),u.createElement("mask",{id:"mask15_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask15_61_306)"},u.createElement("path",{d:"M387.03 214.097H387.023V214.875H387.03V214.097Z",fill:"#126E39"})),u.createElement("mask",{id:"mask16_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask16_61_306)"},u.createElement("path",{d:"M387.037 214.097H387.03V214.875H387.037V214.097Z",fill:"#116F39"})),u.createElement("mask",{id:"mask17_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask17_61_306)"},u.createElement("path",{d:"M387.044 214.097H387.037V214.875H387.044V214.097Z",fill:"#146F3A"})),u.createElement("mask",{id:"mask18_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask18_61_306)"},u.createElement("path",{d:"M387.051 214.097H387.044V214.875H387.051V214.097Z",fill:"#13703A"})),u.createElement("mask",{id:"mask19_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask19_61_306)"},u.createElement("path",{d:"M387.058 214.097H387.052V214.875H387.058V214.097Z",fill:"#146F3A"})),u.createElement("mask",{id:"mask20_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask20_61_306)"},u.createElement("path",{d:"M387.066 214.097H387.059V214.875H387.066V214.097Z",fill:"#16713A"})),u.createElement("mask",{id:"mask21_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask21_61_306)"},u.createElement("path",{d:"M387.073 214.097H387.066V214.875H387.073V214.097Z",fill:"#16713A"})),u.createElement("mask",{id:"mask22_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask22_61_306)"},u.createElement("path",{d:"M387.08 214.097H387.073V214.875H387.08V214.097Z",fill:"#15723A"})),u.createElement("mask",{id:"mask23_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask23_61_306)"},u.createElement("path",{d:"M387.087 214.097H387.08V214.875H387.087V214.097Z",fill:"#18723B"})),u.createElement("mask",{id:"mask24_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask24_61_306)"},u.createElement("path",{d:"M387.094 214.097H387.087V214.875H387.094V214.097Z",fill:"#18723B"})),u.createElement("mask",{id:"mask25_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask25_61_306)"},u.createElement("path",{d:"M387.101 214.097H387.094V214.875H387.101V214.097Z",fill:"#17733C"})),u.createElement("mask",{id:"mask26_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask26_61_306)"},u.createElement("path",{d:"M387.108 214.097H387.101V214.875H387.108V214.097Z",fill:"#19753B"})),u.createElement("mask",{id:"mask27_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask27_61_306)"},u.createElement("path",{d:"M387.115 214.097H387.108V214.875H387.115V214.097Z",fill:"#19753B"})),u.createElement("mask",{id:"mask28_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask28_61_306)"},u.createElement("path",{d:"M387.122 214.097H387.115V214.875H387.122V214.097Z",fill:"#1B763C"})),u.createElement("mask",{id:"mask29_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask29_61_306)"},u.createElement("path",{d:"M387.129 214.097H387.122V214.875H387.129V214.097Z",fill:"#1B763C"})),u.createElement("mask",{id:"mask30_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask30_61_306)"},u.createElement("path",{d:"M387.136 214.097H387.129V214.875H387.136V214.097Z",fill:"#1A783C"})),u.createElement("mask",{id:"mask31_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask31_61_306)"},u.createElement("path",{d:"M387.143 214.097H387.136V214.875H387.143V214.097Z",fill:"#1D783C"})),u.createElement("mask",{id:"mask32_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask32_61_306)"},u.createElement("path",{d:"M387.15 214.097H387.144V214.875H387.15V214.097Z",fill:"#1F793D"})),u.createElement("mask",{id:"mask33_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask33_61_306)"},u.createElement("path",{d:"M387.158 214.097H387.151V214.875H387.158V214.097Z",fill:"#1F793D"})),u.createElement("mask",{id:"mask34_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask34_61_306)"},u.createElement("path",{d:"M387.165 214.097H387.158V214.875H387.165V214.097Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask35_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask35_61_306)"},u.createElement("path",{d:"M387.172 214.097H387.165V214.875H387.172V214.097Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask36_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask36_61_306)"},u.createElement("path",{d:"M387.179 214.097H387.172V214.875H387.179V214.097Z",fill:"#257B3D"})),u.createElement("mask",{id:"mask37_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask37_61_306)"},u.createElement("path",{d:"M387.186 214.097H387.179V214.875H387.186V214.097Z",fill:"#257B3D"})),u.createElement("mask",{id:"mask38_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask38_61_306)"},u.createElement("path",{d:"M387.186 214.097H387.179V214.875H387.186V214.097Z",fill:"#247B3D"})),u.createElement("mask",{id:"mask39_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask39_61_306)"},u.createElement("path",{d:"M387.193 214.097H387.186V214.875H387.193V214.097Z",fill:"#267C3D"})),u.createElement("mask",{id:"mask40_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask40_61_306)"},u.createElement("path",{d:"M387.2 214.097H387.193V214.875H387.2V214.097Z",fill:"#267C3D"})),u.createElement("mask",{id:"mask41_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask41_61_306)"},u.createElement("path",{d:"M387.207 214.097H387.2V214.875H387.207V214.097Z",fill:"#277D3E"})),u.createElement("mask",{id:"mask42_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask42_61_306)"},u.createElement("path",{d:"M387.214 214.097H387.207V214.875H387.214V214.097Z",fill:"#2A7D3E"})),u.createElement("mask",{id:"mask43_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask43_61_306)"},u.createElement("path",{d:"M387.221 214.097H387.214V214.875H387.221V214.097Z",fill:"#2B7F3E"})),u.createElement("mask",{id:"mask44_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask44_61_306)"},u.createElement("path",{d:"M387.228 214.097H387.221V214.875H387.228V214.097Z",fill:"#2B7F3E"})),u.createElement("mask",{id:"mask45_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask45_61_306)"},u.createElement("path",{d:"M387.235 214.097H387.229V214.875H387.235V214.097Z",fill:"#2D803E"})),u.createElement("mask",{id:"mask46_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask46_61_306)"},u.createElement("path",{d:"M387.243 214.097H387.236V214.875H387.243V214.097Z",fill:"#2C803F"})),u.createElement("mask",{id:"mask47_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask47_61_306)"},u.createElement("path",{d:"M387.25 214.097H387.243V214.875H387.25V214.097Z",fill:"#2D803E"})),u.createElement("mask",{id:"mask48_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask48_61_306)"},u.createElement("path",{d:"M387.257 214.097H387.25V214.875H387.257V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask49_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask49_61_306)"},u.createElement("path",{d:"M387.264 214.097H387.257V214.875H387.264V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask50_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask50_61_306)"},u.createElement("path",{d:"M387.271 214.097H387.264V214.875H387.271V214.097Z",fill:"#32813F"})),u.createElement("mask",{id:"mask51_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask51_61_306)"},u.createElement("path",{d:"M387.278 214.097H387.271V214.875H387.278V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask52_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask52_61_306)"},u.createElement("path",{d:"M387.285 214.097H387.278V214.875H387.285V214.097Z",fill:"#33823F"})),u.createElement("mask",{id:"mask53_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask53_61_306)"},u.createElement("path",{d:"M387.292 214.097H387.285V214.875H387.292V214.097Z",fill:"#33823F"})),u.createElement("mask",{id:"mask54_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask54_61_306)"},u.createElement("path",{d:"M387.299 214.097H387.292V214.875H387.299V214.097Z",fill:"#358340"})),u.createElement("mask",{id:"mask55_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask55_61_306)"},u.createElement("path",{d:"M387.306 214.097H387.299V214.875H387.306V214.097Z",fill:"#378240"})),u.createElement("mask",{id:"mask56_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask56_61_306)"},u.createElement("path",{d:"M387.313 214.097H387.306V214.875H387.313V214.097Z",fill:"#368440"})),u.createElement("mask",{id:"mask57_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask57_61_306)"},u.createElement("path",{d:"M387.32 214.097H387.313V214.875H387.32V214.097Z",fill:"#388340"})),u.createElement("mask",{id:"mask58_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask58_61_306)"},u.createElement("path",{d:"M387.327 214.097H387.321V214.875H387.327V214.097Z",fill:"#3A8440"})),u.createElement("mask",{id:"mask59_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask59_61_306)"},u.createElement("path",{d:"M387.335 214.097H387.328V214.875H387.335V214.097Z",fill:"#3A8440"})),u.createElement("mask",{id:"mask60_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask60_61_306)"},u.createElement("path",{d:"M387.342 214.097H387.335V214.875H387.342V214.097Z",fill:"#3B8640"})),u.createElement("mask",{id:"mask61_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask61_61_306)"},u.createElement("path",{d:"M387.349 214.097H387.342V214.875H387.349V214.097Z",fill:"#3B8641"})),u.createElement("mask",{id:"mask62_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask62_61_306)"},u.createElement("path",{d:"M387.356 214.097H387.349V214.875H387.356V214.097Z",fill:"#3B8641"})),u.createElement("mask",{id:"mask63_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask63_61_306)"},u.createElement("path",{d:"M387.363 214.097H387.356V214.875H387.363V214.097Z",fill:"#3E8742"})),u.createElement("mask",{id:"mask64_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask64_61_306)"},u.createElement("path",{d:"M387.37 214.097H387.363V214.875H387.37V214.097Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask65_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask65_61_306)"},u.createElement("path",{d:"M387.377 214.097H387.37V214.875H387.377V214.097Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask66_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask66_61_306)"},u.createElement("path",{d:"M387.384 214.097H387.377V214.875H387.384V214.097Z",fill:"#418842"})),u.createElement("mask",{id:"mask67_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask67_61_306)"},u.createElement("path",{d:"M387.391 214.097H387.384V214.875H387.391V214.097Z",fill:"#438941"})),u.createElement("mask",{id:"mask68_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask68_61_306)"},u.createElement("path",{d:"M387.398 214.097H387.391V214.875H387.398V214.097Z",fill:"#428A40"})),u.createElement("mask",{id:"mask69_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask69_61_306)"},u.createElement("path",{d:"M387.405 214.097H387.398V214.875H387.405V214.097Z",fill:"#458A41"})),u.createElement("mask",{id:"mask70_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask70_61_306)"},u.createElement("path",{d:"M387.412 214.097H387.405V214.875H387.412V214.097Z",fill:"#448C41"})),u.createElement("mask",{id:"mask71_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask71_61_306)"},u.createElement("path",{d:"M387.419 214.097H387.412V214.875H387.419V214.097Z",fill:"#458B40"})),u.createElement("mask",{id:"mask72_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask72_61_306)"},u.createElement("path",{d:"M387.426 214.097H387.419V214.875H387.426V214.097Z",fill:"#478D41"})),u.createElement("mask",{id:"mask73_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask73_61_306)"},u.createElement("path",{d:"M387.434 214.097H387.427V214.875H387.434V214.097Z",fill:"#478C40"})),u.createElement("mask",{id:"mask74_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask74_61_306)"},u.createElement("path",{d:"M387.441 214.097H387.434V214.875H387.441V214.097Z",fill:"#4A8D41"})),u.createElement("mask",{id:"mask75_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask75_61_306)"},u.createElement("path",{d:"M387.448 214.097H387.441V214.875H387.448V214.097Z",fill:"#498E42"})),u.createElement("mask",{id:"mask76_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask76_61_306)"},u.createElement("path",{d:"M387.455 214.097H387.448V214.875H387.455V214.097Z",fill:"#4B8E41"})),u.createElement("mask",{id:"mask77_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask77_61_306)"},u.createElement("path",{d:"M387.462 214.097H387.455V214.875H387.462V214.097Z",fill:"#4B8F42"})),u.createElement("mask",{id:"mask78_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask78_61_306)"},u.createElement("path",{d:"M387.469 214.097H387.462V214.875H387.469V214.097Z",fill:"#4D8F42"})),u.createElement("mask",{id:"mask79_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask79_61_306)"},u.createElement("path",{d:"M387.476 214.097H387.469V214.875H387.476V214.097Z",fill:"#4D9142"})),u.createElement("mask",{id:"mask80_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask80_61_306)"},u.createElement("path",{d:"M387.483 214.097H387.476V214.875H387.483V214.097Z",fill:"#4F9242"})),u.createElement("mask",{id:"mask81_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask81_61_306)"},u.createElement("path",{d:"M387.49 214.097H387.483V214.875H387.49V214.097Z",fill:"#4F9142"})),u.createElement("mask",{id:"mask82_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask82_61_306)"},u.createElement("path",{d:"M387.497 214.097H387.49V214.875H387.497V214.097Z",fill:"#509242"})),u.createElement("mask",{id:"mask83_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask83_61_306)"},u.createElement("path",{d:"M387.504 214.097H387.497V214.875H387.504V214.097Z",fill:"#519242"})),u.createElement("mask",{id:"mask84_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask84_61_306)"},u.createElement("path",{d:"M387.511 214.097H387.504V214.875H387.511V214.097Z",fill:"#539342"})),u.createElement("mask",{id:"mask85_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask85_61_306)"},u.createElement("path",{d:"M387.518 214.097H387.511V214.875H387.518V214.097Z",fill:"#539342"})),u.createElement("mask",{id:"mask86_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask86_61_306)"},u.createElement("path",{d:"M387.525 214.097H387.519V214.875H387.525V214.097Z",fill:"#549442"})),u.createElement("mask",{id:"mask87_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask87_61_306)"},u.createElement("path",{d:"M387.533 214.097H387.526V214.875H387.533V214.097Z",fill:"#559542"})),u.createElement("mask",{id:"mask88_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask88_61_306)"},u.createElement("path",{d:"M387.54 214.097H387.533V214.875H387.54V214.097Z",fill:"#579542"})),u.createElement("mask",{id:"mask89_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask89_61_306)"},u.createElement("path",{d:"M387.547 214.097H387.54V214.875H387.547V214.097Z",fill:"#579641"})),u.createElement("mask",{id:"mask90_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask90_61_306)"},u.createElement("path",{d:"M387.554 214.097H387.547V214.875H387.554V214.097Z",fill:"#579641"})),u.createElement("mask",{id:"mask91_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask91_61_306)"},u.createElement("path",{d:"M387.561 214.097H387.554V214.875H387.561V214.097Z",fill:"#589742"})),u.createElement("mask",{id:"mask92_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask92_61_306)"},u.createElement("path",{d:"M387.568 214.097H387.561V214.875H387.568V214.097Z",fill:"#599842"})),u.createElement("mask",{id:"mask93_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask93_61_306)"},u.createElement("path",{d:"M387.575 214.097H387.568V214.875H387.575V214.097Z",fill:"#5B9841"})),u.createElement("mask",{id:"mask94_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask94_61_306)"},u.createElement("path",{d:"M387.582 214.097H387.575V214.875H387.582V214.097Z",fill:"#5C9942"})),u.createElement("mask",{id:"mask95_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask95_61_306)"},u.createElement("path",{d:"M387.589 214.097H387.582V214.875H387.589V214.097Z",fill:"#5C9942"})),u.createElement("mask",{id:"mask96_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask96_61_306)"},u.createElement("path",{d:"M387.596 214.097H387.589V214.875H387.596V214.097Z",fill:"#5D9A42"})),u.createElement("mask",{id:"mask97_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask97_61_306)"},u.createElement("path",{d:"M387.603 214.097H387.596V214.875H387.603V214.097Z",fill:"#5F9A42"})),u.createElement("mask",{id:"mask98_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask98_61_306)"},u.createElement("path",{d:"M387.61 214.097H387.604V214.875H387.61V214.097Z",fill:"#609B42"})),u.createElement("mask",{id:"mask99_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask99_61_306)"},u.createElement("path",{d:"M387.617 214.097H387.611V214.875H387.617V214.097Z",fill:"#609B41"})),u.createElement("mask",{id:"mask100_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask100_61_306)"},u.createElement("path",{d:"M387.625 214.097H387.618V214.875H387.625V214.097Z",fill:"#619D42"})),u.createElement("mask",{id:"mask101_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask101_61_306)"},u.createElement("path",{d:"M387.632 214.097H387.625V214.875H387.632V214.097Z",fill:"#629D42"})),u.createElement("mask",{id:"mask102_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask102_61_306)"},u.createElement("path",{d:"M387.639 214.097H387.632V214.875H387.639V214.097Z",fill:"#629D42"})),u.createElement("mask",{id:"mask103_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask103_61_306)"},u.createElement("path",{d:"M387.646 214.097H387.639V214.875H387.646V214.097Z",fill:"#629F42"})),u.createElement("mask",{id:"mask104_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask104_61_306)"},u.createElement("path",{d:"M387.653 214.097H387.646V214.875H387.653V214.097Z",fill:"#649D42"})),u.createElement("mask",{id:"mask105_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask105_61_306)"},u.createElement("path",{d:"M387.66 214.097H387.653V214.875H387.66V214.097Z",fill:"#659F41"})),u.createElement("mask",{id:"mask106_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask106_61_306)"},u.createElement("path",{d:"M387.667 214.097H387.66V214.875H387.667V214.097Z",fill:"#669F41"})),u.createElement("mask",{id:"mask107_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask107_61_306)"},u.createElement("path",{d:"M387.674 214.097H387.667V214.875H387.674V214.097Z",fill:"#69A041"})),u.createElement("mask",{id:"mask108_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask108_61_306)"},u.createElement("path",{d:"M387.681 214.097H387.674V214.875H387.681V214.097Z",fill:"#6AA141"})),u.createElement("mask",{id:"mask109_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask109_61_306)"},u.createElement("path",{d:"M387.688 214.097H387.681V214.875H387.688V214.097Z",fill:"#6BA141"})),u.createElement("mask",{id:"mask110_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask110_61_306)"},u.createElement("path",{d:"M387.695 214.097H387.688V214.875H387.695V214.097Z",fill:"#6BA241"})),u.createElement("mask",{id:"mask111_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask111_61_306)"},u.createElement("path",{d:"M387.702 214.097H387.696V214.875H387.702V214.097Z",fill:"#6CA241"})),u.createElement("mask",{id:"mask112_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask112_61_306)"},u.createElement("path",{d:"M387.71 214.097H387.703V214.875H387.71V214.097Z",fill:"#6DA442"})),u.createElement("mask",{id:"mask113_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask113_61_306)"},u.createElement("path",{d:"M387.717 214.097H387.71V214.875H387.717V214.097Z",fill:"#6DA442"})),u.createElement("mask",{id:"mask114_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask114_61_306)"},u.createElement("path",{d:"M387.724 214.097H387.717V214.875H387.724V214.097Z",fill:"#6FA542"})),u.createElement("mask",{id:"mask115_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask115_61_306)"},u.createElement("path",{d:"M387.731 214.097H387.724V214.875H387.731V214.097Z",fill:"#70A642"})),u.createElement("mask",{id:"mask116_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask116_61_306)"},u.createElement("path",{d:"M387.738 214.097H387.731V214.875H387.738V214.097Z",fill:"#71A541"})),u.createElement("mask",{id:"mask117_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask117_61_306)"},u.createElement("path",{d:"M387.745 214.097H387.738V214.875H387.745V214.097Z",fill:"#71A642"})),u.createElement("mask",{id:"mask118_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask118_61_306)"},u.createElement("path",{d:"M387.752 214.097H387.745V214.875H387.752V214.097Z",fill:"#72A642"})),u.createElement("mask",{id:"mask119_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask119_61_306)"},u.createElement("path",{d:"M387.759 214.097H387.752V214.875H387.759V214.097Z",fill:"#73A841"})),u.createElement("mask",{id:"mask120_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask120_61_306)"},u.createElement("path",{d:"M387.766 214.097H387.759V214.875H387.766V214.097Z",fill:"#74A841"})),u.createElement("mask",{id:"mask121_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask121_61_306)"},u.createElement("path",{d:"M387.773 214.097H387.766V214.875H387.773V214.097Z",fill:"#76A841"})),u.createElement("mask",{id:"mask122_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask122_61_306)"},u.createElement("path",{d:"M387.78 214.097H387.773V214.875H387.78V214.097Z",fill:"#77A940"})),u.createElement("mask",{id:"mask123_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask123_61_306)"},u.createElement("path",{d:"M387.787 214.097H387.781V214.875H387.787V214.097Z",fill:"#78A941"})),u.createElement("mask",{id:"mask124_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask124_61_306)"},u.createElement("path",{d:"M387.794 214.097H387.788V214.875H387.794V214.097Z",fill:"#7AAA41"})),u.createElement("mask",{id:"mask125_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask125_61_306)"},u.createElement("path",{d:"M387.802 214.097H387.795V214.875H387.802V214.097Z",fill:"#7BAA40"})),u.createElement("mask",{id:"mask126_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask126_61_306)"},u.createElement("path",{d:"M387.809 214.097H387.802V214.875H387.809V214.097Z",fill:"#7CAC3F"})),u.createElement("mask",{id:"mask127_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask127_61_306)"},u.createElement("path",{d:"M387.816 214.097H387.809V214.875H387.816V214.097Z",fill:"#7DAD3F"})),u.createElement("mask",{id:"mask128_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask128_61_306)"},u.createElement("path",{d:"M387.823 214.097H387.816V214.875H387.823V214.097Z",fill:"#7EAC40"})),u.createElement("mask",{id:"mask129_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask129_61_306)"},u.createElement("path",{d:"M387.83 214.097H387.823V214.875H387.83V214.097Z",fill:"#7EAE40"})),u.createElement("mask",{id:"mask130_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask130_61_306)"},u.createElement("path",{d:"M387.837 214.097H387.83V214.875H387.837V214.097Z",fill:"#7FAD40"})),u.createElement("mask",{id:"mask131_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask131_61_306)"},u.createElement("path",{d:"M387.844 214.097H387.837V214.875H387.844V214.097Z",fill:"#7FAE3F"})),u.createElement("mask",{id:"mask132_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask132_61_306)"},u.createElement("path",{d:"M387.851 214.097H387.844V214.875H387.851V214.097Z",fill:"#80AD3F"})),u.createElement("mask",{id:"mask133_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask133_61_306)"},u.createElement("path",{d:"M387.858 214.097H387.851V214.875H387.858V214.097Z",fill:"#81AF3F"})),u.createElement("mask",{id:"mask134_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask134_61_306)"},u.createElement("path",{d:"M387.865 214.097H387.858V214.875H387.865V214.097Z",fill:"#82B13E"})),u.createElement("mask",{id:"mask135_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask135_61_306)"},u.createElement("path",{d:"M387.872 214.097H387.865V214.875H387.872V214.097Z",fill:"#83B03E"})),u.createElement("mask",{id:"mask136_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask136_61_306)"},u.createElement("path",{d:"M387.879 214.097H387.873V214.875H387.879V214.097Z",fill:"#84B23F"})),u.createElement("mask",{id:"mask137_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask137_61_306)"},u.createElement("path",{d:"M387.887 214.097H387.88V214.875H387.887V214.097Z",fill:"#84B23F"})),u.createElement("mask",{id:"mask138_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask138_61_306)"},u.createElement("path",{d:"M387.894 214.097H387.887V214.875H387.894V214.097Z",fill:"#85B340"})),u.createElement("mask",{id:"mask139_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask139_61_306)"},u.createElement("path",{d:"M387.901 214.097H387.894V214.875H387.901V214.097Z",fill:"#86B33F"})),u.createElement("mask",{id:"mask140_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask140_61_306)"},u.createElement("path",{d:"M387.908 214.097H387.901V214.875H387.908V214.097Z",fill:"#87B43F"})),u.createElement("mask",{id:"mask141_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask141_61_306)"},u.createElement("path",{d:"M387.915 214.097H387.908V214.875H387.915V214.097Z",fill:"#8AB53F"})),u.createElement("mask",{id:"mask142_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask142_61_306)"},u.createElement("path",{d:"M387.922 214.097H387.915V214.875H387.922V214.097Z",fill:"#8BB53F"})),u.createElement("mask",{id:"mask143_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask143_61_306)"},u.createElement("path",{d:"M387.929 214.097H387.922V214.875H387.929V214.097Z",fill:"#8CB63E"})),u.createElement("mask",{id:"mask144_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask144_61_306)"},u.createElement("path",{d:"M387.936 214.097H387.929V214.875H387.936V214.097Z",fill:"#8CB63E"})),u.createElement("mask",{id:"mask145_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask145_61_306)"},u.createElement("path",{d:"M387.943 214.097H387.936V214.875H387.943V214.097Z",fill:"#8CB73E"})),u.createElement("mask",{id:"mask146_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask146_61_306)"},u.createElement("path",{d:"M387.95 214.097H387.943V214.875H387.95V214.097Z",fill:"#8DB83D"})),u.createElement("mask",{id:"mask147_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask147_61_306)"},u.createElement("path",{d:"M387.957 214.097H387.95V214.875H387.957V214.097Z",fill:"#8EB83D"})),u.createElement("mask",{id:"mask148_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask148_61_306)"},u.createElement("path",{d:"M387.964 214.097H387.958V214.875H387.964V214.097Z",fill:"#90B93E"})),u.createElement("mask",{id:"mask149_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask149_61_306)"},u.createElement("path",{d:"M387.971 214.097H387.965V214.875H387.971V214.097Z",fill:"#91BA3D"})),u.createElement("mask",{id:"mask150_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask150_61_306)"},u.createElement("path",{d:"M387.979 214.097H387.972V214.875H387.979V214.097Z",fill:"#92BB3C"})),u.createElement("mask",{id:"mask151_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask151_61_306)"},u.createElement("path",{d:"M387.986 214.097H387.979V214.875H387.986V214.097Z",fill:"#92BA3C"})),u.createElement("mask",{id:"mask152_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask152_61_306)"},u.createElement("path",{d:"M387.993 214.097H387.986V214.875H387.993V214.097Z",fill:"#93BB3C"})),u.createElement("mask",{id:"mask153_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask153_61_306)"},u.createElement("path",{d:"M388 214.097H387.993V214.875H388V214.097Z",fill:"#95BD3C"})),u.createElement("mask",{id:"mask154_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask154_61_306)"},u.createElement("path",{d:"M388.007 214.097H388V214.875H388.007V214.097Z",fill:"#97BC3B"})),u.createElement("mask",{id:"mask155_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask155_61_306)"},u.createElement("path",{d:"M388.014 214.097H388.007V214.875H388.014V214.097Z",fill:"#97BD3B"})),u.createElement("mask",{id:"mask156_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask156_61_306)"},u.createElement("path",{d:"M388.021 214.097H388.014V214.875H388.021V214.097Z",fill:"#98BD3C"})),u.createElement("mask",{id:"mask157_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask157_61_306)"},u.createElement("path",{d:"M388.028 214.097H388.021V214.875H388.028V214.097Z",fill:"#9ABE3C"})),u.createElement("mask",{id:"mask158_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask158_61_306)"},u.createElement("path",{d:"M388.035 214.097H388.028V214.875H388.035V214.097Z",fill:"#9BBD3C"})),u.createElement("mask",{id:"mask159_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask159_61_306)"},u.createElement("path",{d:"M388.042 214.097H388.035V214.875H388.042V214.097Z",fill:"#9BBE3D"})),u.createElement("mask",{id:"mask160_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask160_61_306)"},u.createElement("path",{d:"M388.049 214.097H388.042V214.875H388.049V214.097Z",fill:"#9BBF3B"})),u.createElement("mask",{id:"mask161_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask161_61_306)"},u.createElement("path",{d:"M388.056 214.097H388.05V214.875H388.056V214.097Z",fill:"#9CBF3A"})),u.createElement("mask",{id:"mask162_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask162_61_306)"},u.createElement("path",{d:"M388.064 214.097H388.057V214.875H388.064V214.097Z",fill:"#9DC03A"})),u.createElement("mask",{id:"mask163_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask163_61_306)"},u.createElement("path",{d:"M388.071 214.097H388.064V214.875H388.071V214.097Z",fill:"#9FC03A"})),u.createElement("mask",{id:"mask164_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask164_61_306)"},u.createElement("path",{d:"M388.078 214.097H388.071V214.875H388.078V214.097Z",fill:"#A0C139"})),u.createElement("mask",{id:"mask165_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask165_61_306)"},u.createElement("path",{d:"M388.085 214.097H388.078V214.875H388.085V214.097Z",fill:"#A1C239"})),u.createElement("mask",{id:"mask166_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask166_61_306)"},u.createElement("path",{d:"M388.092 214.097H388.085V214.875H388.092V214.097Z",fill:"#A2C239"})),u.createElement("mask",{id:"mask167_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask167_61_306)"},u.createElement("path",{d:"M388.099 214.097H388.092V214.875H388.099V214.097Z",fill:"#A3C338"})),u.createElement("mask",{id:"mask168_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask168_61_306)"},u.createElement("path",{d:"M388.106 214.097H388.099V214.875H388.106V214.097Z",fill:"#A4C337"})),u.createElement("mask",{id:"mask169_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask169_61_306)"},u.createElement("path",{d:"M388.113 214.097H388.106V214.875H388.113V214.097Z",fill:"#A5C438"})),u.createElement("mask",{id:"mask170_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask170_61_306)"},u.createElement("path",{d:"M388.12 214.097H388.113V214.875H388.12V214.097Z",fill:"#A6C438"})),u.createElement("mask",{id:"mask171_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask171_61_306)"},u.createElement("path",{d:"M388.127 214.097H388.12V214.875H388.127V214.097Z",fill:"#A7C538"})),u.createElement("mask",{id:"mask172_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask172_61_306)"},u.createElement("path",{d:"M388.134 214.097H388.127V214.875H388.134V214.097Z",fill:"#A6C639"})),u.createElement("mask",{id:"mask173_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask173_61_306)"},u.createElement("path",{d:"M388.141 214.097H388.135V214.875H388.141V214.097Z",fill:"#A8C537"})),u.createElement("mask",{id:"mask174_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask174_61_306)"},u.createElement("path",{d:"M388.148 214.097H388.142V214.875H388.148V214.097Z",fill:"#A9C637"})),u.createElement("mask",{id:"mask175_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask175_61_306)"},u.createElement("path",{d:"M388.156 214.097H388.149V214.875H388.156V214.097Z",fill:"#AAC637"})),u.createElement("mask",{id:"mask176_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask176_61_306)"},u.createElement("path",{d:"M388.163 214.097H388.156V214.875H388.163V214.097Z",fill:"#ACC735"})),u.createElement("mask",{id:"mask177_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask177_61_306)"},u.createElement("path",{d:"M388.17 214.097H388.163V214.875H388.17V214.097Z",fill:"#ADC735"})),u.createElement("mask",{id:"mask178_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask178_61_306)"},u.createElement("path",{d:"M388.177 214.097H388.17V214.875H388.177V214.097Z",fill:"#AEC835"})),u.createElement("mask",{id:"mask179_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask179_61_306)"},u.createElement("path",{d:"M388.184 214.097H388.177V214.875H388.184V214.097Z",fill:"#AFC933"})),u.createElement("mask",{id:"mask180_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask180_61_306)"},u.createElement("path",{d:"M388.191 214.097H388.184V214.875H388.191V214.097Z",fill:"#B0CA34"})),u.createElement("mask",{id:"mask181_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask181_61_306)"},u.createElement("path",{d:"M388.198 214.097H388.191V214.875H388.198V214.097Z",fill:"#B2CC36"})),u.createElement("mask",{id:"mask182_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask182_61_306)"},u.createElement("path",{d:"M388.205 214.097H388.198V214.875H388.205V214.097Z",fill:"#B2CA35"})),u.createElement("mask",{id:"mask183_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask183_61_306)"},u.createElement("path",{d:"M388.212 214.097H388.205V214.875H388.212V214.097Z",fill:"#B3CC35"})),u.createElement("mask",{id:"mask184_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask184_61_306)"},u.createElement("path",{d:"M388.219 214.097H388.212V214.875H388.219V214.097Z",fill:"#B5CD36"})),u.createElement("mask",{id:"mask185_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask185_61_306)"},u.createElement("path",{d:"M388.226 214.097H388.219V214.875H388.226V214.097Z",fill:"#B6CD35"})),u.createElement("mask",{id:"mask186_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask186_61_306)"},u.createElement("path",{d:"M388.233 214.097H388.227V214.875H388.233V214.097Z",fill:"#B7CE34"})),u.createElement("mask",{id:"mask187_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask187_61_306)"},u.createElement("path",{d:"M388.241 214.097H388.234V214.875H388.241V214.097Z",fill:"#B8CE34"})),u.createElement("mask",{id:"mask188_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask188_61_306)"},u.createElement("path",{d:"M388.248 214.097H388.241V214.875H388.248V214.097Z",fill:"#B8CE33"})),u.createElement("mask",{id:"mask189_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask189_61_306)"},u.createElement("path",{d:"M388.255 214.097H388.248V214.875H388.255V214.097Z",fill:"#B8CE33"})),u.createElement("mask",{id:"mask190_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask190_61_306)"},u.createElement("path",{d:"M388.262 214.097H388.255V214.875H388.262V214.097Z",fill:"#B9CE34"})),u.createElement("mask",{id:"mask191_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask191_61_306)"},u.createElement("path",{d:"M388.269 214.097H388.262V214.875H388.269V214.097Z",fill:"#BACF33"})),u.createElement("mask",{id:"mask192_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask192_61_306)"},u.createElement("path",{d:"M388.276 214.097H388.269V214.875H388.276V214.097Z",fill:"#BBCF33"})),u.createElement("mask",{id:"mask193_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask193_61_306)"},u.createElement("path",{d:"M388.283 214.097H388.276V214.875H388.283V214.097Z",fill:"#BCCF34"})),u.createElement("mask",{id:"mask194_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask194_61_306)"},u.createElement("path",{d:"M388.29 214.097H388.283V214.875H388.29V214.097Z",fill:"#BCD032"})),u.createElement("mask",{id:"mask195_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask195_61_306)"},u.createElement("path",{d:"M388.297 214.097H388.29V214.875H388.297V214.097Z",fill:"#BDD033"})),u.createElement("mask",{id:"mask196_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask196_61_306)"},u.createElement("path",{d:"M388.304 214.097H388.297V214.875H388.304V214.097Z",fill:"#BED032"})),u.createElement("mask",{id:"mask197_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask197_61_306)"},u.createElement("path",{d:"M388.311 214.097H388.304V214.875H388.311V214.097Z",fill:"#BFD131"})),u.createElement("mask",{id:"mask198_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask198_61_306)"},u.createElement("path",{d:"M388.318 214.097H388.312V214.875H388.318V214.097Z",fill:"#C1D231"})),u.createElement("mask",{id:"mask199_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask199_61_306)"},u.createElement("path",{d:"M388.325 214.097H388.319V214.875H388.325V214.097Z",fill:"#C2D232"})),u.createElement("mask",{id:"mask200_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask200_61_306)"},u.createElement("path",{d:"M388.333 214.097H388.326V214.875H388.333V214.097Z",fill:"#C3D233"})),u.createElement("mask",{id:"mask201_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask201_61_306)"},u.createElement("path",{d:"M388.34 214.097H388.333V214.875H388.34V214.097Z",fill:"#C4D330"})),u.createElement("mask",{id:"mask202_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask202_61_306)"},u.createElement("path",{d:"M388.347 214.097H388.34V214.875H388.347V214.097Z",fill:"#C5D331"})),u.createElement("mask",{id:"mask203_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask203_61_306)"},u.createElement("path",{d:"M388.354 214.097H388.347V214.875H388.354V214.097Z",fill:"#C6D32F"})),u.createElement("mask",{id:"mask204_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask204_61_306)"},u.createElement("path",{d:"M388.361 214.097H388.354V214.875H388.361V214.097Z",fill:"#C6D332"})),u.createElement("path",{d:"M538.014 162.523C537.873 159.185 537.427 155.953 536.677 152.834C535.211 146.666 532.585 140.944 528.834 135.739C519.837 123.319 508.334 116.027 494.623 114.026C493.788 113.899 492.953 113.792 492.103 113.715C487.899 113.304 483.475 113.389 478.93 113.969C475.143 114.457 471.519 115.327 468.065 116.565C467.796 116.657 467.527 116.756 467.265 116.862C465.361 117.301 463.499 117.845 461.694 118.496C449.172 125.639 439.588 137.408 431.066 149.198C430.379 150.139 429.706 151.087 429.034 152.027C417.213 168.641 406.51 185.715 389.062 195.701C388.609 195.977 388.142 196.232 387.674 196.486C387.667 196.493 387.653 196.5 387.639 196.507C386.896 196.974 385.756 197.682 384.44 198.438C382.139 199.782 379.308 201.296 377.156 202.024C372.845 203.481 368.704 204.21 364.719 204.21C354.639 204.21 346.117 202.491 339.159 196.79C333.411 192.087 329.546 187.172 327.543 180.339C327.437 180 327.345 179.618 327.253 179.271C326.962 178.14 326.715 177.44 326.523 176.025H402.122C404.776 176.025 406.963 173.79 408.69 172.128C410.12 170.749 410.963 168.542 411.196 166.434C411.203 166.378 411.21 166.321 411.217 166.265C411.253 165.897 411.274 165.458 411.274 165.091C411.274 154.623 409.285 145.025 405.307 136.941C401.329 128.857 395.624 122.407 388.198 117.902C380.766 113.396 371.946 111.062 361.739 111.062C356.09 111.062 350.76 111.72 345.763 113.135C344.036 113.616 342.351 114.16 340.709 114.818C330.947 119.253 323.069 126.834 316.224 135.414C309.868 143.37 304.389 152.197 299.094 160.154C296.178 164.546 293.304 168.867 290.402 173.012C290.225 173.274 290.041 173.535 289.857 173.797C289.177 174.766 288.498 175.721 287.811 176.662C287.125 177.609 286.438 178.543 285.744 179.455C283.925 181.867 282.085 184.173 280.202 186.351C278.538 188.275 276.783 190.121 274.971 191.903C274.1 192.752 273.201 193.558 272.288 194.372C272.097 194.541 271.269 195.213 270.724 195.652C270.49 195.843 270.306 195.998 270.257 196.048C268.614 197.271 266.88 198.346 265.075 199.315C264.764 199.471 263.369 200.15 263.284 200.199C263.001 200.327 256.56 202.866 256.56 202.866C252.249 204.323 248.108 204.952 244.123 204.952C234.036 204.952 225.521 203.212 218.555 197.505C212.808 192.801 208.943 187.872 206.94 181.04C206.833 180.7 206.741 180.318 206.649 179.972C206.359 178.84 206.111 178.14 205.92 176.725H281.511C284.159 176.725 286.346 174.455 288.073 172.793C289.503 171.414 290.345 169.207 290.579 167.092C290.586 167.036 290.593 166.979 290.6 166.922C290.635 166.555 290.657 166.116 290.657 165.748C290.657 155.281 288.668 145.662 284.69 137.585C280.711 129.508 275.013 123.044 267.581 118.538C260.156 114.04 251.329 111.699 241.122 111.699C234.9 111.699 222.371 114.351 221.741 114.57C201.355 121.608 187.941 138.214 175.178 154.68C171.094 159.956 166.996 165.161 162.727 170.141C162.727 170.141 162.727 170.148 162.72 170.148C162.699 170.183 162.671 170.211 162.642 170.247C162.664 169.872 162.678 169.497 162.692 169.115C162.692 168.995 162.699 168.867 162.699 168.747C162.727 168.068 162.741 167.375 162.741 166.689C162.741 156.349 160.519 146.977 156.081 138.561C151.635 130.152 145.527 123.553 137.776 118.786C130.018 114.012 121.361 111.628 111.812 111.628C104.125 111.628 95.9489 113.22 89.3234 116.395C83.0448 119.408 76.023 123.546 71.7334 128.815C71.6555 128.914 71.5069 129.013 71.3441 129.105C71.0185 129.31 70.6362 129.515 70.6362 129.713V53.8727C70.6362 51.2416 70.9052 49.1057 69.2418 47.4365C67.3872 45.5835 65.6247 44.657 62.5809 44.657C59.6575 44.657 56.0758 45.5835 54.1505 47.4365C52.2251 49.2967 50.1086 51.7438 50.1086 54.7921V166.689C50.1086 168.846 50.4343 170.954 50.8377 173.033C51.043 174.08 51.2695 175.12 51.4819 176.152C52.8551 182.822 55.7502 189.046 59.07 194.81C63.9117 203.227 71.1459 209.847 79.4348 214.691C87.7095 219.529 97.3009 221.941 107.508 221.941C117.729 221.941 127.2 219.529 135.624 214.691C136.402 214.239 137.245 213.786 137.988 213.305C157.532 202.823 172.071 186.132 185.52 168.783L187.396 166.406C187.389 166.562 187.396 166.724 187.396 166.887C187.396 177.496 189.817 186.966 194.658 195.312C199.493 203.651 206.239 210.186 214.86 214.889C223.475 219.593 233.229 221.941 244.102 221.941C250.196 221.941 256.602 220.809 263.298 218.567C267.899 217.025 271.984 215.151 275.558 212.987C275.558 212.987 275.565 212.987 275.565 212.98C289.666 204.79 299.93 189.477 308.785 176.188C309.839 182.864 312.005 189.025 315.276 194.669C320.117 203.014 326.849 209.55 335.471 214.239C344.092 218.949 353.839 221.304 364.712 221.304C370.813 221.304 377.219 220.18 383.916 217.924C390.605 215.667 395.864 212.761 400.373 209.182C401.024 208.694 418.253 191.373 429.027 177.949C430.549 176.046 431.95 174.221 433.154 172.538C433.423 172.156 433.685 171.781 433.939 171.414L434.463 169.858C434.647 171.923 434.959 173.981 435.398 176.018C435.652 177.206 435.943 178.394 436.289 179.568C436.318 179.674 436.353 179.781 436.381 179.887C436.813 181.351 437.309 182.801 437.875 184.243C437.578 185.085 437.288 185.927 436.99 186.761C436.983 186.768 436.983 186.775 436.976 186.783C436.75 187.433 436.523 188.084 436.289 188.735C435.667 190.496 435.037 192.257 434.407 194.018L428.277 212.06L427.569 214.147L427.052 215.66L427.569 215.575L428.277 215.448L428.843 215.342L436.289 213.991L440.31 213.263L441.018 213.135L444.784 212.449C445.888 212.244 446.992 212.039 448.096 211.834C448.337 211.799 448.571 211.749 448.804 211.707C449.845 211.516 450.878 211.325 451.912 211.134C452.91 210.95 453.894 210.766 454.885 210.582C455.083 210.547 455.288 210.504 455.486 210.469C455.961 210.384 456.442 210.299 456.916 210.207C457.787 210.052 458.657 209.889 459.528 209.726C459.96 209.988 460.399 210.236 460.838 210.483C461.071 210.617 461.305 210.745 461.545 210.872C470.677 215.823 480.7 217.846 491.162 216.849C493.611 216.615 495.996 216.226 498.318 215.674C507.081 213.645 514.889 209.436 521.578 203.092L521.599 203.071C521.812 202.88 522.024 202.675 522.236 202.47C532.139 192.794 537.434 181.068 537.986 167.559C538.092 165.918 538.085 164.235 538.014 162.523ZM331.804 144.778C333.531 141.963 335.655 138.837 338.16 136.63C340.369 134.692 342.832 132.797 345.536 131.58C350.201 129.451 355.609 128.228 361.739 128.228C370.488 128.228 377.588 132.019 383.024 137.316C388.46 142.621 391.773 151.256 392.976 159.751H326.729C327.656 154.8 329.341 148.746 331.804 144.778ZM217.55 137.924C223.581 132.627 231.445 129.345 241.122 129.345C249.878 129.345 256.97 132.952 262.414 138.25C267.843 143.554 271.163 151.971 272.352 160.465H206.104C207.697 151.971 211.512 143.229 217.55 137.924ZM143.191 168.811C143.184 168.91 143.184 169.009 143.169 169.108C142.858 175.183 141.322 180.735 138.568 185.764C135.454 191.465 131.214 195.949 125.834 199.188C120.462 202.441 114.459 204.061 107.827 204.061C101.194 204.061 95.1915 202.441 89.8189 199.188C84.4534 195.949 80.2347 191.472 77.1838 185.764C74.494 180.735 72.9863 175.197 72.6748 169.129C72.6678 169.023 72.6678 168.917 72.6607 168.811C72.6253 168.104 72.6111 167.396 72.6111 166.689C72.6111 159.666 74.133 153.336 77.1838 147.706C80.2347 142.076 84.4464 137.627 89.8189 134.381C95.1915 131.135 101.194 129.515 107.827 129.515C114.459 129.515 120.462 131.135 125.834 134.381C131.207 137.627 135.447 142.069 138.568 147.706C141.683 153.336 143.24 159.666 143.24 166.689C143.24 167.396 143.226 168.104 143.191 168.811ZM518.86 164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.441 198.976C480.367 198.976 474.867 197.491 469.941 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.142 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447C464.971 138.285 474.669 132.995 485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949Z",fill:"#154423",stroke:"white",strokeWidth:2,strokeMiterlimit:10}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.4495 111.084C72.8376 123.659 65.9219 139.155 66.6369 157.728C67.2102 172.736 73.0287 185.658 83.5898 196.394C105.993 219.176 145.01 220.088 168.39 194.393C162.281 211.891 141.881 233.017 111.868 234.212C80.5673 235.464 52.6427 213.468 46.7392 182.624C40.6518 150.726 59.0275 121.417 86.4495 111.084Z",fill:"#498E42"}),u.createElement("path",{d:"M109.327 235.337C78.2811 235.337 51.5173 213.256 45.6988 182.836C39.76 151.744 56.7342 121.148 86.0674 110.093L91.1639 108.177L87.1646 111.869C73.5597 124.437 67.005 139.855 67.6916 157.693C68.2508 172.22 73.8499 184.993 84.3402 195.659C94.8801 206.374 109.731 212.52 125.098 212.52C141.457 212.52 156.555 205.829 167.604 193.686L171.108 189.838L169.395 194.753C162.671 214.027 140.763 234.134 111.911 235.287C111.054 235.315 110.184 235.337 109.327 235.337ZM81.7778 114.231C56.543 126.368 42.3932 154.185 47.787 182.426C53.4143 211.848 79.2933 233.201 109.327 233.201C110.155 233.201 110.998 233.186 111.833 233.151C137.273 232.14 157.114 215.922 165.339 198.976C154.339 209.111 140.246 214.628 125.112 214.628C109.186 214.628 93.7759 208.248 82.8396 197.13C71.9671 186.075 66.1556 172.835 65.5823 157.756C64.9381 141.107 70.3815 126.481 81.7778 114.231Z",fill:"white"}),u.createElement("mask",{id:"mask205_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask205_61_306)"},u.createElement("path",{d:"M129.402 144.898H80.5461V194.421H129.402V144.898Z",fill:"#00804A"})),u.createElement("mask",{id:"mask206_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask206_61_306)"},u.createElement("path",{d:"M104.925 194.202C118.541 194.202 129.579 183.173 129.579 169.568C129.579 155.962 118.541 144.933 104.925 144.933C91.3084 144.933 80.2703 155.962 80.2703 169.568C80.2703 183.173 91.3084 194.202 104.925 194.202Z",fill:"#00804A"})),u.createElement("mask",{id:"mask207_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask207_61_306)"},u.createElement("path",{d:"M104.924 193.431C118.114 193.431 128.807 182.747 128.807 169.568C128.807 156.388 118.114 145.704 104.924 145.704C91.7342 145.704 81.0415 156.388 81.0415 169.568C81.0415 182.747 91.7342 193.431 104.924 193.431Z",fill:"#008048"})),u.createElement("mask",{id:"mask208_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask208_61_306)"},u.createElement("path",{d:"M104.924 192.66C117.688 192.66 128.036 182.321 128.036 169.567C128.036 156.814 117.688 146.475 104.924 146.475C92.1605 146.475 81.8132 156.814 81.8132 169.567C81.8132 182.321 92.1605 192.66 104.924 192.66Z",fill:"#008048"})),u.createElement("mask",{id:"mask209_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask209_61_306)"},u.createElement("path",{d:"M104.924 191.889C117.262 191.889 127.264 181.895 127.264 169.567C127.264 157.24 117.262 147.246 104.924 147.246C92.5865 147.246 82.5847 157.24 82.5847 169.567C82.5847 181.895 92.5865 191.889 104.924 191.889Z",fill:"#007E47"})),u.createElement("mask",{id:"mask210_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask210_61_306)"},u.createElement("path",{d:"M104.924 191.118C116.836 191.118 126.492 181.47 126.492 169.568C126.492 157.666 116.836 148.017 104.924 148.017C93.0126 148.017 83.3562 157.666 83.3562 169.568C83.3562 181.47 93.0126 191.118 104.924 191.118Z",fill:"#007E46"})),u.createElement("mask",{id:"mask211_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask211_61_306)"},u.createElement("path",{d:"M104.924 190.347C116.41 190.347 125.721 181.044 125.721 169.567C125.721 158.091 116.41 148.788 104.924 148.788C93.4386 148.788 84.1277 158.091 84.1277 169.567C84.1277 181.044 93.4386 190.347 104.924 190.347Z",fill:"#007E46"})),u.createElement("mask",{id:"mask212_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask212_61_306)"},u.createElement("path",{d:"M104.924 189.583C115.988 189.583 124.957 180.622 124.957 169.567C124.957 158.513 115.988 149.552 104.924 149.552C93.861 149.552 84.8923 158.513 84.8923 169.567C84.8923 180.622 93.861 189.583 104.924 189.583Z",fill:"#007E44"})),u.createElement("mask",{id:"mask213_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask213_61_306)"},u.createElement("path",{d:"M104.924 188.812C115.562 188.812 124.185 180.196 124.185 169.568C124.185 158.939 115.562 150.323 104.924 150.323C94.2871 150.323 85.6638 158.939 85.6638 169.568C85.6638 180.196 94.2871 188.812 104.924 188.812Z",fill:"#057F44"})),u.createElement("mask",{id:"mask214_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask214_61_306)"},u.createElement("path",{d:"M104.924 188.041C115.135 188.041 123.413 179.77 123.413 169.568C123.413 159.365 115.135 151.094 104.924 151.094C94.7131 151.094 86.4353 159.365 86.4353 169.568C86.4353 179.77 94.7131 188.041 104.924 188.041Z",fill:"#057F44"})),u.createElement("mask",{id:"mask215_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask215_61_306)"},u.createElement("path",{d:"M104.924 187.27C114.71 187.27 122.642 179.344 122.642 169.567C122.642 159.79 114.71 151.865 104.924 151.865C95.1394 151.865 87.207 159.79 87.207 169.567C87.207 179.344 95.1394 187.27 104.924 187.27Z",fill:"#0C7F42"})),u.createElement("mask",{id:"mask216_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask216_61_306)"},u.createElement("path",{d:"M104.924 186.5C114.283 186.5 121.87 178.919 121.87 169.568C121.87 160.216 114.283 152.635 104.924 152.635C95.5654 152.635 87.9785 160.216 87.9785 169.568C87.9785 178.919 95.5654 186.5 104.924 186.5Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask217_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask217_61_306)"},u.createElement("path",{d:"M104.924 185.729C113.857 185.729 121.099 178.493 121.099 169.568C121.099 160.642 113.857 153.406 104.924 153.406C95.9915 153.406 88.75 160.642 88.75 169.568C88.75 178.493 95.9915 185.729 104.924 185.729Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask218_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask218_61_306)"},u.createElement("path",{d:"M104.924 184.965C113.435 184.965 120.334 178.071 120.334 169.567C120.334 161.064 113.435 154.17 104.924 154.17C96.4136 154.17 89.5144 161.064 89.5144 169.567C89.5144 178.071 96.4136 184.965 104.924 184.965Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask219_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask219_61_306)"},u.createElement("path",{d:"M104.924 184.194C113.009 184.194 119.563 177.645 119.563 169.567C119.563 161.49 113.009 154.941 104.924 154.941C96.8399 154.941 90.2861 161.49 90.2861 169.567C90.2861 177.645 96.8399 184.194 104.924 184.194Z",fill:"#0B7D40"})),u.createElement("mask",{id:"mask220_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask220_61_306)"},u.createElement("path",{d:"M104.924 183.423C112.583 183.423 118.791 177.22 118.791 169.568C118.791 161.915 112.583 155.712 104.924 155.712C97.266 155.712 91.0576 161.915 91.0576 169.568C91.0576 177.22 97.266 183.423 104.924 183.423Z",fill:"#0B7D40"})),u.createElement("mask",{id:"mask221_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask221_61_306)"},u.createElement("path",{d:"M104.924 182.652C112.157 182.652 118.019 176.794 118.019 169.567C118.019 162.341 112.157 156.483 104.924 156.483C97.692 156.483 91.8291 162.341 91.8291 169.567C91.8291 176.794 97.692 182.652 104.924 182.652Z",fill:"#0C7D3F"})),u.createElement("mask",{id:"mask222_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask222_61_306)"},u.createElement("path",{d:"M104.924 181.881C111.731 181.881 117.248 176.368 117.248 169.567C117.248 162.767 111.731 157.254 104.924 157.254C98.1183 157.254 92.6008 162.767 92.6008 169.567C92.6008 176.368 98.1183 181.881 104.924 181.881Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask223_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask223_61_306)"},u.createElement("path",{d:"M104.924 181.11C111.304 181.11 116.476 175.942 116.476 169.568C116.476 163.193 111.304 158.025 104.924 158.025C98.5444 158.025 93.3723 163.193 93.3723 169.568C93.3723 175.942 98.5444 181.11 104.924 181.11Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask224_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask224_61_306)"},u.createElement("path",{d:"M104.924 180.346C110.882 180.346 115.712 175.521 115.712 169.568C115.712 163.615 110.882 158.789 104.924 158.789C98.9665 158.789 94.1367 163.615 94.1367 169.568C94.1367 175.521 98.9665 180.346 104.924 180.346Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask225_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask225_61_306)"},u.createElement("path",{d:"M104.924 179.575C110.456 179.575 114.94 175.095 114.94 169.567C114.94 164.04 110.456 159.56 104.924 159.56C99.3925 159.56 94.9082 164.04 94.9082 169.567C94.9082 175.095 99.3925 179.575 104.924 179.575Z",fill:"#117D3E"})),u.createElement("mask",{id:"mask226_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask226_61_306)"},u.createElement("path",{d:"M104.924 178.804C110.03 178.804 114.169 174.669 114.169 169.567C114.169 164.466 110.03 160.331 104.924 160.331C99.8188 160.331 95.6799 164.466 95.6799 169.567C95.6799 174.669 99.8188 178.804 104.924 178.804Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask227_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask227_61_306)"},u.createElement("path",{d:"M104.924 178.034C109.604 178.034 113.397 174.243 113.397 169.568C113.397 164.892 109.604 161.102 104.924 161.102C100.245 161.102 96.4514 164.892 96.4514 169.568C96.4514 174.243 100.245 178.034 104.924 178.034Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask228_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask228_61_306)"},u.createElement("path",{d:"M104.924 177.262C109.178 177.262 112.626 173.817 112.626 169.567C112.626 165.318 109.178 161.872 104.924 161.872C100.671 161.872 97.2229 165.318 97.2229 169.567C97.2229 173.817 100.671 177.262 104.924 177.262Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask229_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask229_61_306)"},u.createElement("path",{d:"M104.924 176.492C108.752 176.492 111.854 173.392 111.854 169.567C111.854 165.743 108.752 162.643 104.924 162.643C101.097 162.643 97.9946 165.743 97.9946 169.567C97.9946 173.392 101.097 176.492 104.924 176.492Z",fill:"#197D3E"})),u.createElement("mask",{id:"mask230_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask230_61_306)"},u.createElement("path",{d:"M104.924 175.728C108.329 175.728 111.09 172.97 111.09 169.568C111.09 166.165 108.329 163.407 104.924 163.407C101.519 163.407 98.759 166.165 98.759 169.568C98.759 172.97 101.519 175.728 104.924 175.728Z",fill:"#197C3E"})),u.createElement("mask",{id:"mask231_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask231_61_306)"},u.createElement("path",{d:"M104.924 174.957C107.903 174.957 110.318 172.544 110.318 169.568C110.318 166.591 107.903 164.178 104.924 164.178C101.945 164.178 99.5305 166.591 99.5305 169.568C99.5305 172.544 101.945 174.957 104.924 174.957Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask232_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask232_61_306)"},u.createElement("path",{d:"M104.924 174.186C107.477 174.186 109.547 172.118 109.547 169.567C109.547 167.017 107.477 164.949 104.924 164.949C102.372 164.949 100.302 167.017 100.302 169.567C100.302 172.118 102.372 174.186 104.924 174.186Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask233_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask233_61_306)"},u.createElement("path",{d:"M104.924 173.415C107.051 173.415 108.775 171.692 108.775 169.568C108.775 167.443 107.051 165.72 104.924 165.72C102.798 165.72 101.074 167.443 101.074 169.568C101.074 171.692 102.798 173.415 104.924 173.415Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask234_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask234_61_306)"},u.createElement("path",{d:"M104.924 172.644C106.625 172.644 108.003 171.267 108.003 169.568C108.003 167.868 106.625 166.491 104.924 166.491C103.224 166.491 101.845 167.868 101.845 169.568C101.845 171.267 103.224 172.644 104.924 172.644Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask235_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask235_61_306)"},u.createElement("path",{d:"M104.924 171.873C106.199 171.873 107.232 170.841 107.232 169.567C107.232 168.294 106.199 167.262 104.924 167.262C103.65 167.262 102.617 168.294 102.617 169.567C102.617 170.841 103.65 171.873 104.924 171.873Z",fill:"#207B3E"})),u.createElement("mask",{id:"mask236_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask236_61_306)"},u.createElement("path",{d:"M104.924 171.109C105.777 171.109 106.468 170.419 106.468 169.567C106.468 168.716 105.777 168.026 104.924 168.026C104.072 168.026 103.381 168.716 103.381 169.567C103.381 170.419 104.072 171.109 104.924 171.109Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask237_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask237_61_306)"},u.createElement("path",{d:"M104.924 170.338C105.351 170.338 105.696 169.993 105.696 169.568C105.696 169.142 105.351 168.797 104.924 168.797C104.498 168.797 104.153 169.142 104.153 169.568C104.153 169.993 104.498 170.338 104.924 170.338Z",fill:"#257B3D"})),u.createElement("path",{d:"M101.428 196.331L100.713 191.755C100.274 188.925 99.8633 186.33 99.4669 183.72C99.3537 182.977 99.2546 182.235 99.1555 181.499C98.9289 179.844 98.6954 178.125 98.3697 176.47C98.3131 176.322 97.8459 175.947 97.5345 175.891C93.797 175.226 89.9817 174.596 86.2939 173.995C84.8782 173.762 83.4695 173.528 82.0538 173.295C81.6928 173.231 81.346 173.153 80.9 173.054L78.3022 172.489L80.2913 171.378C80.9 171.039 81.3318 170.798 81.7919 170.579C82.9882 169.978 84.1986 169.37 85.402 168.761C88.6722 167.113 92.0628 165.402 95.4322 163.817C96.3736 163.372 96.4585 163.061 96.2957 162.042C95.6374 157.975 95.0287 153.845 94.4412 149.849L93.8961 146.164C93.8678 145.98 93.8608 145.796 93.8466 145.492L93.7333 143.109L96.0126 145.407C97.7327 147.14 99.3041 148.724 100.868 150.316L102.065 151.518C103.806 153.265 105.604 155.069 107.296 156.915C107.685 157.325 107.904 157.381 108.053 157.381C108.237 157.381 108.485 157.296 108.825 157.12C112.265 155.359 115.776 153.612 119.173 151.928L122.302 150.372C122.684 150.181 123.081 149.99 123.583 149.757L126.563 148.328L121.481 158.096C119.973 160.988 118.494 163.832 117.007 166.696L122.599 172.397C125.02 174.865 127.491 177.376 130.06 180L131.575 181.542L125.813 180.594C123.081 180.148 120.511 179.724 117.942 179.307C117.404 179.222 116.866 179.137 116.335 179.052C114.834 178.819 113.284 178.578 111.776 178.239C111.614 178.203 111.472 178.182 111.359 178.182C111.153 178.182 111.005 178.182 110.679 178.819C108.832 182.44 106.921 186.096 105.073 189.633L103.509 192.632C103.318 193.006 103.105 193.374 102.801 193.905L101.428 196.331ZM82.3016 171.902C83.7031 172.135 85.1117 172.368 86.5204 172.595C90.2153 173.203 94.0306 173.825 97.7822 174.497C98.4972 174.632 99.5872 175.339 99.75 176.202C100.083 177.899 100.323 179.632 100.55 181.308C100.649 182.044 100.755 182.779 100.861 183.515C101.258 186.118 101.661 188.713 102.107 191.535L102.192 192.08C102.213 192.045 102.228 192.009 102.249 191.974L103.813 188.968C105.661 185.432 107.572 181.775 109.412 178.161C109.844 177.319 110.495 176.485 112.074 176.838C113.539 177.171 115.068 177.404 116.54 177.637C117.078 177.722 117.623 177.807 118.161 177.892C120.731 178.309 123.3 178.734 126.032 179.179L127.533 179.427C125.502 177.355 123.534 175.346 121.587 173.366L115.28 166.937L115.514 166.484C117.085 163.464 118.635 160.472 120.228 157.424L123.35 151.426C123.208 151.497 123.074 151.561 122.939 151.624L119.81 153.18C116.42 154.871 112.909 156.61 109.476 158.364C108.917 158.654 108.478 158.782 108.053 158.782C107.218 158.782 106.63 158.258 106.255 157.862C104.57 156.03 102.787 154.234 101.06 152.501L99.8562 151.299C98.4193 149.835 96.9753 148.378 95.418 146.815L95.8356 149.637C96.4232 153.626 97.0319 157.756 97.6831 161.809C97.9096 163.237 97.7114 164.284 96.0197 165.083C92.6645 166.661 89.288 168.365 86.0249 170.006C84.8144 170.614 83.6111 171.223 82.4007 171.831C82.3795 171.859 82.3441 171.88 82.3016 171.902Z",fill:"white"}),u.createElement("path",{d:"M497.072 132.372C494.036 131.531 490.836 131.078 487.531 131.078C477.932 131.078 469.211 134.869 462.812 141.036C456.081 147.508 451.883 156.618 451.883 166.689C451.883 186.358 467.845 202.307 487.531 202.307C507.216 202.307 523.178 186.358 523.178 166.689C523.171 150.33 512.128 136.545 497.072 132.372ZM458.905 146.447C464.971 138.285 474.669 132.995 485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.44 198.976C480.367 198.976 474.867 197.491 469.941 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.143 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447Z",fill:"white"}),u.createElement("path",{d:"M429.706 215.773C429.367 215.773 429.069 215.533 429.013 215.186C428.949 214.804 429.204 214.437 429.593 214.373L458.622 209.422C459.004 209.351 459.372 209.613 459.436 210.002C459.5 210.384 459.245 210.752 458.856 210.816L429.827 215.766C429.784 215.773 429.742 215.773 429.706 215.773Z",fill:"white"}),u.createElement("path",{d:"M536.69 161.922C536.393 158.364 535.735 154.899 534.751 151.575C528.394 130.031 508.447 114.309 484.833 114.309C484.572 114.309 484.317 114.309 484.055 114.316C462.565 114.627 444.231 127.966 436.601 146.779C434.152 152.805 432.8 159.404 432.8 166.314C432.8 168.422 432.927 170.494 433.175 172.538C433.33 173.896 433.55 175.24 433.819 176.569C434.399 179.512 435.242 182.369 436.311 185.106C436.523 185.672 436.756 186.231 436.997 186.782C437.018 186.846 437.047 186.903 437.075 186.966C437.146 187.129 437.217 187.292 437.287 187.454C437.28 187.468 437.273 187.49 437.266 187.504C436.955 188.388 436.636 189.265 436.311 190.142C435.631 192.023 434.944 193.905 434.251 195.786L427.469 215.257L428.984 214.995L436.311 213.736L439.56 213.178L444.104 212.393C447.714 211.763 451.31 211.134 454.913 210.497C455.564 210.384 456.208 210.271 456.859 210.158C456.888 210.179 456.916 210.193 456.944 210.207C457.05 210.278 457.157 210.341 457.263 210.405C465.254 215.413 474.711 218.305 484.833 218.305C499.196 218.305 512.192 212.492 521.613 203.092L521.635 203.071C531.049 193.664 536.882 180.665 536.882 166.3C536.874 164.836 536.811 163.372 536.69 161.922ZM454.177 164.907C454.177 158.47 455.571 152.635 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447C464.971 138.285 474.676 132.995 485.619 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.444 177.156 514.599 182.305C511.746 187.461 507.867 191.528 502.933 194.513C498.014 197.49 492.514 198.976 486.433 198.976C480.36 198.976 474.86 197.49 469.94 194.513C465.021 191.535 461.163 187.468 458.36 182.305C457.964 181.57 457.588 180.813 457.249 180.049C455.691 176.584 454.729 172.849 454.354 168.839C454.233 167.559 454.177 166.243 454.177 164.907Z",fill:"#498E42"}),u.createElement("path",{d:"M485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915ZM485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915ZM537.752 161.83C537.448 158.251 536.783 154.701 535.77 151.278C529.166 128.886 508.214 113.248 484.827 113.248C484.558 113.248 484.289 113.248 484.034 113.255C462.657 113.566 443.644 126.566 435.61 146.383C433.033 152.713 431.731 159.425 431.731 166.314C431.731 168.436 431.858 170.572 432.113 172.658C432.269 173.988 432.488 175.374 432.771 176.775C433.352 179.731 434.208 182.659 435.313 185.481C435.497 185.983 435.723 186.528 436.006 187.172C436.028 187.242 436.056 187.306 436.091 187.391L436.141 187.49C435.865 188.254 435.589 189.017 435.305 189.781C434.626 191.663 433.939 193.537 433.239 195.439L425.87 216.608L439.56 214.253L444.288 213.439C447.898 212.81 451.494 212.18 455.097 211.544L456.64 211.275C456.845 211.403 457.058 211.537 457.263 211.657C465.559 216.7 475.065 219.366 484.834 219.366C499.005 219.366 512.326 213.857 522.385 203.821C532.415 193.799 537.943 180.474 537.943 166.3C537.936 164.843 537.873 163.337 537.752 161.83ZM484.827 217.259C475.115 217.259 465.658 214.514 457.511 209.323L457.44 209.288L457.256 209.146L457.121 209.047L454.722 209.465C451.126 210.101 447.53 210.731 443.913 211.36L439.553 212.11L429.048 213.92L435.235 196.168C435.928 194.287 436.615 192.398 437.295 190.524C437.613 189.654 437.932 188.784 438.243 187.907L438.441 187.497L437.96 186.372C437.684 185.743 437.472 185.227 437.287 184.731C436.226 182.023 435.405 179.208 434.845 176.371C434.576 175.028 434.364 173.705 434.215 172.425C433.968 170.416 433.847 168.365 433.847 166.328C433.847 159.715 435.1 153.272 437.571 147.19C445.286 128.171 463.534 115.688 484.069 115.391C484.324 115.384 484.565 115.384 484.819 115.384C507.265 115.384 527.375 130.399 533.718 151.893C534.694 155.168 535.332 158.577 535.622 162.021C535.735 163.464 535.799 164.914 535.799 166.328C535.799 179.936 530.497 192.724 520.842 202.371C511.229 211.961 498.431 217.259 484.827 217.259ZM485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915Z",fill:"white"}),u.createElement("path",{d:"M518.923 166.251C518.923 184.611 504.023 199.506 485.64 199.506C467.265 199.506 452.357 184.611 452.357 166.251C452.357 158.838 454.785 151.985 458.891 146.461C458.707 146.779 458.53 147.098 458.36 147.416C455.564 152.636 454.17 158.471 454.17 164.907C454.17 171.343 455.564 177.142 458.36 182.306C461.156 187.462 465.014 191.528 469.94 194.513C474.86 197.491 480.367 198.976 486.44 198.976C492.514 198.976 498.021 197.491 502.94 194.513C507.867 191.535 511.753 187.469 514.613 182.306C517.458 177.157 518.888 171.371 518.895 164.949C518.916 165.381 518.923 165.812 518.923 166.251Z",fill:"white"}),u.createElement("path",{d:"M415.245 278.664C414.686 278.664 414.226 278.211 414.226 277.652V253.372C414.226 252.813 414.686 252.36 415.245 252.36C415.804 252.36 416.264 252.813 416.264 253.372V277.652C416.264 278.211 415.804 278.664 415.245 278.664Z",fill:"#18572B"}),u.createElement("path",{d:"M422.026 275.29C421.467 275.29 421.007 274.837 421.007 274.279V256.746C421.007 256.187 421.467 255.734 422.026 255.734C422.585 255.734 423.045 256.187 423.045 256.746V274.279C423.045 274.837 422.585 275.29 422.026 275.29Z",fill:"#18572B"}),u.createElement("path",{d:"M427.455 270.565C426.896 270.565 426.436 270.113 426.436 269.554V259.44C426.436 258.881 426.896 258.429 427.455 258.429C428.015 258.429 428.475 258.881 428.475 259.44V269.554C428.468 270.113 428.015 270.565 427.455 270.565Z",fill:"#18572B"}),u.createElement("path",{d:"M72.0942 261.902C72.0942 260.558 72.2641 259.334 72.5968 258.224C72.9295 257.113 73.4392 256.173 74.1258 255.395C74.8053 254.617 75.6689 254.023 76.7094 253.591C77.7499 253.167 78.9887 252.948 80.4256 252.948C81.2821 252.948 82.1103 253.032 82.9102 253.209C83.71 253.386 84.4179 253.626 85.0479 253.938C85.6708 254.249 86.1733 254.61 86.5414 255.013C86.9095 255.416 87.0935 255.84 87.0935 256.279C87.0935 256.738 86.9237 257.135 86.591 257.46C86.2583 257.785 85.8336 257.948 85.3239 257.948C84.9983 257.948 84.7506 257.898 84.5807 257.792C84.4037 257.686 84.1914 257.552 83.9365 257.396L83.7596 257.29C82.8323 256.639 81.7776 256.321 80.6026 256.321C79.7248 256.321 78.9816 256.448 78.3799 256.703C77.7783 256.958 77.2898 257.325 76.9218 257.813C76.5537 258.302 76.2918 258.889 76.1431 259.582C75.9945 260.275 75.9166 261.053 75.9166 261.909V269.052C75.9166 269.908 75.9945 270.679 76.1431 271.379C76.2918 272.072 76.5537 272.659 76.9218 273.147C77.2898 273.635 77.7783 274.003 78.3799 274.257C78.9816 274.512 79.7248 274.639 80.6026 274.639C81.7564 274.639 82.8111 274.328 83.7596 273.706L83.9365 273.6C84.1914 273.437 84.4037 273.303 84.5807 273.204C84.7576 273.098 85.0054 273.048 85.3239 273.048C85.8336 273.048 86.2583 273.211 86.591 273.536C86.9237 273.861 87.0935 274.243 87.0935 274.682C87.0935 275.142 86.9095 275.58 86.5414 275.983C86.1733 276.386 85.6708 276.74 85.0479 277.044C84.425 277.348 83.71 277.582 82.9102 277.758C82.1103 277.935 81.2821 278.02 80.4256 278.02C78.9887 278.02 77.7499 277.808 76.7094 277.377C75.6689 276.952 74.8053 276.351 74.1258 275.573C73.4462 274.802 72.9366 273.861 72.5968 272.765C72.2641 271.669 72.0942 270.438 72.0942 269.073V261.902Z",fill:"#18572B"}),u.createElement("path",{d:"M97.9236 278.07C96.515 278.07 95.2763 277.829 94.2074 277.355C93.1456 276.881 92.2608 276.238 91.553 275.432C90.8451 274.625 90.3143 273.67 89.9532 272.567C89.5922 271.471 89.4153 270.297 89.4153 269.045V261.902C89.4153 260.699 89.571 259.553 89.8825 258.464C90.1939 257.375 90.6894 256.42 91.376 255.6C92.0556 254.779 92.9404 254.129 94.0163 253.655C95.0922 253.181 96.3947 252.94 97.9236 252.94C99.4526 252.94 100.755 253.181 101.831 253.655C102.907 254.129 103.785 254.779 104.471 255.6C105.151 256.42 105.653 257.375 105.965 258.464C106.276 259.553 106.432 260.699 106.432 261.902V269.045C106.432 270.297 106.255 271.471 105.894 272.567C105.533 273.663 105.002 274.618 104.294 275.432C103.586 276.245 102.702 276.881 101.64 277.355C100.571 277.829 99.3322 278.07 97.9236 278.07ZM97.9236 256.491C96.2106 256.491 95.0002 256.986 94.2924 257.983C93.5845 258.981 93.2306 260.282 93.2306 261.902V269.045C93.2306 270.665 93.6057 271.973 94.3561 272.984C95.1064 273.989 96.2956 274.491 97.9165 274.491C99.5163 274.491 100.691 273.989 101.456 272.984C102.22 271.98 102.602 270.665 102.602 269.045V261.902C102.602 260.282 102.249 258.973 101.541 257.983C100.84 256.986 99.6295 256.491 97.9236 256.491Z",fill:"#18572B"}),u.createElement("path",{d:"M125.07 278.07C124.702 278.07 124.341 277.978 123.994 277.794C123.647 277.61 123.378 277.369 123.194 277.065L114.169 260.798V276.238C114.169 276.726 113.978 277.15 113.595 277.518C113.213 277.886 112.753 278.07 112.222 278.07C111.691 278.07 111.245 277.886 110.884 277.518C110.523 277.15 110.346 276.719 110.346 276.238V254.9C110.346 254.341 110.53 253.881 110.899 253.513C111.267 253.146 111.755 252.955 112.357 252.955C112.753 252.955 113.121 253.047 113.468 253.23C113.815 253.414 114.084 253.669 114.268 253.994C114.523 254.433 114.884 255.083 115.358 255.939C115.832 256.795 116.356 257.743 116.937 258.782C117.517 259.822 118.126 260.918 118.756 262.078C119.393 263.238 120.001 264.342 120.582 265.41C121.162 266.47 121.686 267.432 122.16 268.288C122.635 269.144 123.01 269.802 123.286 270.269V254.801C123.286 254.291 123.477 253.86 123.859 253.499C124.241 253.138 124.695 252.962 125.232 252.962C125.763 252.962 126.209 253.138 126.57 253.499C126.931 253.86 127.108 254.291 127.108 254.801V276.132C127.108 276.662 126.917 277.122 126.535 277.504C126.16 277.879 125.671 278.07 125.07 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M146.595 278.07C146.227 278.07 145.866 277.978 145.519 277.794C145.173 277.61 144.904 277.369 144.72 277.065L135.694 260.798V276.238C135.694 276.726 135.503 277.15 135.121 277.518C134.739 277.886 134.279 278.07 133.748 278.07C133.217 278.07 132.771 277.886 132.41 277.518C132.049 277.15 131.872 276.719 131.872 276.238V254.9C131.872 254.341 132.056 253.881 132.424 253.513C132.792 253.146 133.281 252.955 133.882 252.955C134.279 252.955 134.647 253.047 134.994 253.23C135.341 253.414 135.61 253.669 135.794 253.994C136.048 254.433 136.409 255.083 136.884 255.939C137.358 256.795 137.882 257.743 138.462 258.782C139.043 259.822 139.651 260.918 140.281 262.078C140.918 263.238 141.527 264.342 142.108 265.41C142.688 266.47 143.212 267.432 143.686 268.288C144.16 269.144 144.535 269.802 144.812 270.269V254.801C144.812 254.291 145.003 253.86 145.385 253.499C145.767 253.138 146.22 252.962 146.758 252.962C147.289 252.962 147.735 253.138 148.096 253.499C148.457 253.86 148.634 254.291 148.634 254.801V276.132C148.634 276.662 148.443 277.122 148.061 277.504C147.685 277.879 147.197 278.07 146.595 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M167.215 275.884C167.215 276.415 167.031 276.853 166.663 277.2C166.295 277.546 165.842 277.723 165.311 277.723H156.109C155.394 277.723 154.757 277.582 154.219 277.292C153.674 277.002 153.405 276.464 153.405 275.679V255.317C153.405 254.808 153.61 254.341 154.014 253.909C154.417 253.485 154.934 253.266 155.557 253.266H164.964C165.495 253.266 165.948 253.443 166.316 253.803C166.684 254.164 166.875 254.596 166.875 255.105C166.875 255.614 166.691 256.031 166.316 256.357C165.948 256.682 165.495 256.845 164.964 256.845H157.22V263.677H164.306C164.766 263.677 165.198 263.847 165.587 264.179C165.983 264.511 166.174 264.936 166.174 265.445C166.174 265.954 165.997 266.379 165.636 266.725C165.275 267.072 164.829 267.249 164.299 267.249H157.213V274.187H165.304C165.813 274.187 166.259 274.357 166.642 274.689C167.024 275.021 167.215 275.418 167.215 275.884Z",fill:"#18572B"}),u.createElement("path",{d:"M169.572 261.902C169.572 260.558 169.742 259.334 170.075 258.224C170.407 257.113 170.917 256.173 171.604 255.395C172.283 254.617 173.147 254.023 174.187 253.591C175.228 253.167 176.466 252.948 177.903 252.948C178.76 252.948 179.588 253.032 180.388 253.209C181.188 253.386 181.896 253.626 182.526 253.938C183.149 254.249 183.651 254.61 184.019 255.013C184.387 255.416 184.571 255.84 184.571 256.279C184.571 256.738 184.401 257.135 184.069 257.46C183.736 257.785 183.311 257.948 182.802 257.948C182.476 257.948 182.228 257.898 182.058 257.792C181.882 257.686 181.669 257.552 181.414 257.396L181.237 257.29C180.31 256.639 179.255 256.321 178.08 256.321C177.203 256.321 176.459 256.448 175.858 256.703C175.256 256.958 174.768 257.325 174.4 257.813C174.031 258.302 173.77 258.889 173.621 259.582C173.472 260.275 173.394 261.053 173.394 261.909V269.052C173.394 269.908 173.472 270.679 173.621 271.379C173.77 272.072 174.031 272.659 174.4 273.147C174.768 273.635 175.256 274.003 175.858 274.257C176.459 274.512 177.203 274.639 178.08 274.639C179.234 274.639 180.289 274.328 181.237 273.706L181.414 273.6C181.669 273.437 181.882 273.303 182.058 273.204C182.235 273.098 182.483 273.048 182.802 273.048C183.311 273.048 183.736 273.211 184.069 273.536C184.401 273.861 184.571 274.243 184.571 274.682C184.571 275.142 184.387 275.58 184.019 275.983C183.651 276.386 183.149 276.74 182.526 277.044C181.903 277.348 181.188 277.582 180.388 277.758C179.588 277.935 178.76 278.02 177.903 278.02C176.466 278.02 175.228 277.808 174.187 277.377C173.147 276.952 172.283 276.351 171.604 275.573C170.924 274.802 170.414 273.861 170.075 272.765C169.742 271.669 169.572 270.438 169.572 269.073V261.902Z",fill:"#18572B"}),u.createElement("path",{d:"M193.08 256.838H188.882C188.33 256.838 187.87 256.661 187.509 256.3C187.148 255.939 186.971 255.529 186.971 255.069C186.971 254.673 187.155 254.277 187.523 253.874C187.891 253.471 188.344 253.266 188.875 253.266H201.093C201.581 253.266 202.027 253.443 202.43 253.789C202.834 254.136 203.039 254.567 203.039 255.069C203.039 255.529 202.848 255.939 202.466 256.3C202.083 256.661 201.623 256.838 201.093 256.838H196.895V276.266C196.895 276.726 196.711 277.143 196.336 277.518C195.968 277.886 195.515 278.07 194.984 278.07C194.453 278.07 194 277.886 193.632 277.518C193.264 277.15 193.08 276.733 193.08 276.266V256.838Z",fill:"#18572B"}),u.createElement("path",{d:"M206.097 254.758C206.097 254.27 206.281 253.853 206.649 253.492C207.017 253.131 207.47 252.955 208.001 252.955C208.532 252.955 208.985 253.131 209.353 253.492C209.721 253.853 209.905 254.27 209.905 254.758V276.266C209.905 276.726 209.721 277.143 209.353 277.518C208.985 277.886 208.532 278.07 208.001 278.07C207.47 278.07 207.017 277.886 206.649 277.518C206.281 277.15 206.097 276.733 206.097 276.266V254.758Z",fill:"#18572B"}),u.createElement("path",{d:"M229.392 278.07C229.024 278.07 228.663 277.978 228.316 277.794C227.969 277.61 227.7 277.369 227.516 277.065L218.491 260.798V276.238C218.491 276.726 218.3 277.15 217.918 277.518C217.536 277.886 217.076 278.07 216.545 278.07C216.014 278.07 215.568 277.886 215.207 277.518C214.846 277.15 214.669 276.719 214.669 276.238V254.9C214.669 254.341 214.853 253.881 215.221 253.513C215.589 253.146 216.078 252.955 216.679 252.955C217.076 252.955 217.444 253.047 217.791 253.23C218.137 253.414 218.406 253.669 218.59 253.994C218.845 254.433 219.206 255.083 219.681 255.939C220.155 256.795 220.679 257.743 221.259 258.782C221.839 259.822 222.448 260.918 223.078 262.078C223.715 263.238 224.324 264.342 224.904 265.41C225.485 266.47 226.009 267.432 226.483 268.288C226.957 269.144 227.332 269.802 227.608 270.269V254.801C227.608 254.291 227.8 253.86 228.182 253.499C228.564 253.138 229.017 252.962 229.555 252.962C230.086 252.962 230.532 253.138 230.893 253.499C231.254 253.86 231.431 254.291 231.431 254.801V276.132C231.431 276.662 231.24 277.122 230.857 277.504C230.489 277.879 229.994 278.07 229.392 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M239.04 269.052C239.04 269.908 239.118 270.679 239.267 271.379C239.415 272.072 239.677 272.659 240.045 273.147C240.413 273.635 240.902 274.003 241.503 274.258C242.105 274.512 242.848 274.639 243.726 274.639C244.441 274.639 245.071 274.555 245.616 274.378C246.161 274.201 246.664 273.953 247.124 273.635V267.22H244.519C244.059 267.22 243.648 267.043 243.301 266.697C242.955 266.35 242.778 265.933 242.778 265.445C242.778 264.957 242.955 264.547 243.301 264.214C243.648 263.882 244.052 263.712 244.519 263.712H248.476C249.127 263.712 249.693 263.882 250.175 264.214C250.663 264.547 250.904 265.056 250.904 265.721V273.699C250.904 274.463 250.677 275.113 250.224 275.658C249.771 276.203 249.191 276.648 248.469 276.995C247.754 277.341 246.961 277.596 246.09 277.758C245.22 277.921 244.37 277.999 243.535 277.999C242.098 277.999 240.859 277.787 239.819 277.355C238.778 276.931 237.915 276.33 237.235 275.552C236.556 274.781 236.046 273.84 235.706 272.744C235.373 271.648 235.204 270.417 235.204 269.052V261.909C235.204 260.565 235.373 259.341 235.706 258.231C236.039 257.12 236.549 256.18 237.235 255.402C237.915 254.624 238.778 254.03 239.819 253.598C240.859 253.174 242.098 252.955 243.535 252.955C244.391 252.955 245.22 253.039 246.02 253.216C246.819 253.393 247.527 253.634 248.157 253.945C248.78 254.256 249.283 254.617 249.651 255.02C250.019 255.423 250.203 255.847 250.203 256.286C250.203 256.746 250.033 257.142 249.7 257.467C249.368 257.792 248.943 257.955 248.433 257.955C248.108 257.955 247.86 257.905 247.69 257.799C247.513 257.693 247.301 257.559 247.046 257.403L246.869 257.297C246.409 256.972 245.913 256.731 245.397 256.569C244.873 256.406 244.314 256.328 243.712 256.328C242.834 256.328 242.091 256.456 241.489 256.71C240.888 256.965 240.399 257.333 240.031 257.821C239.663 258.309 239.401 258.896 239.253 259.589C239.104 260.282 239.026 261.06 239.026 261.916V269.052H239.04Z",fill:"#18572B"}),u.createElement("path",{d:"M269.181 269.052V276.196C269.181 276.684 268.996 277.115 268.628 277.497C268.26 277.879 267.807 278.07 267.276 278.07C266.767 278.07 266.321 277.886 265.939 277.518C265.556 277.15 265.365 276.712 265.365 276.203V255.352C265.365 254.801 265.578 254.313 266.009 253.895C266.434 253.478 266.951 253.273 267.552 253.273H272.656C274.185 253.273 275.48 253.492 276.542 253.931C277.604 254.369 278.467 254.963 279.126 255.699C279.784 256.442 280.258 257.283 280.549 258.231C280.839 259.179 280.98 260.176 280.98 261.216C280.98 262.467 280.782 263.578 280.393 264.561C279.996 265.544 279.437 266.364 278.708 267.022C277.979 267.68 277.108 268.182 276.089 268.529C275.07 268.875 273.923 269.052 272.649 269.052H269.181ZM269.181 265.509H272.649C275.657 265.509 277.165 264.066 277.165 261.173C277.165 260.643 277.101 260.112 276.974 259.596C276.847 259.073 276.613 258.613 276.28 258.21C275.948 257.807 275.487 257.474 274.907 257.219C274.327 256.965 273.576 256.838 272.649 256.838H269.181V265.509Z",fill:"#18572B"}),u.createElement("path",{d:"M285.008 276.719C284.895 277.136 284.64 277.461 284.265 277.688C283.882 277.921 283.529 278.034 283.203 278.034C282.672 278.034 282.205 277.872 281.816 277.546C281.419 277.221 281.228 276.797 281.228 276.266C281.228 276.174 281.235 276.061 281.242 275.92C281.256 275.778 281.271 275.679 281.292 275.608L288.059 255.041C288.243 254.44 288.512 253.945 288.859 253.549C289.205 253.153 289.715 252.962 290.388 252.962C291.06 252.962 291.563 253.16 291.895 253.549C292.228 253.945 292.504 254.44 292.709 255.041L299.476 275.608C299.526 275.679 299.554 275.785 299.561 275.92C299.575 276.061 299.575 276.174 299.575 276.266C299.575 276.797 299.384 277.228 299.002 277.546C298.62 277.865 298.153 278.034 297.594 278.034C296.971 278.034 296.518 277.836 296.242 277.447C295.965 277.051 295.711 276.549 295.477 275.92L294.366 272.553H286.275L285.008 276.719ZM290.388 258.676C289.949 260.529 289.467 262.305 288.944 264.016C288.42 265.728 287.896 267.461 287.365 269.222H293.375C292.844 267.468 292.306 265.721 291.761 263.981C291.216 262.248 290.763 260.48 290.388 258.676Z",fill:"#18572B"}),u.createElement("path",{d:"M307.645 267.248L306.463 268.67V276.231C306.463 276.719 306.279 277.136 305.911 277.497C305.543 277.858 305.09 278.034 304.559 278.034C304.028 278.034 303.575 277.858 303.207 277.497C302.839 277.136 302.655 276.719 302.655 276.231V254.758C302.655 254.27 302.839 253.853 303.207 253.492C303.575 253.131 304.028 252.955 304.559 252.955C305.09 252.955 305.543 253.131 305.911 253.492C306.279 253.853 306.463 254.27 306.463 254.758V263.083L314.277 253.789C314.461 253.584 314.702 253.393 314.992 253.216C315.283 253.039 315.587 252.955 315.913 252.955C316.309 252.955 316.705 253.117 317.109 253.443C317.512 253.768 317.718 254.192 317.718 254.723C317.718 254.928 317.689 255.133 317.633 255.331C317.576 255.529 317.456 255.727 317.272 255.939L310.087 264.405C311.404 266.209 312.713 268.012 314.008 269.816C315.304 271.619 316.613 273.423 317.93 275.226C318.043 275.41 318.121 275.573 318.156 275.714C318.192 275.856 318.206 276.004 318.206 276.167C318.206 276.584 318.057 277.002 317.753 277.419C317.449 277.836 316.988 278.041 316.366 278.041C315.672 278.041 315.141 277.773 314.766 277.242L307.645 267.248Z",fill:"#18572B"}),u.createElement("path",{d:"M321.115 254.758C321.115 254.27 321.299 253.853 321.667 253.492C322.035 253.131 322.488 252.955 323.019 252.955C323.55 252.955 324.003 253.131 324.371 253.492C324.739 253.853 324.923 254.27 324.923 254.758V276.266C324.923 276.726 324.739 277.143 324.371 277.518C324.003 277.886 323.55 278.07 323.019 278.07C322.488 278.07 322.035 277.886 321.667 277.518C321.299 277.15 321.115 276.733 321.115 276.266V254.758Z",fill:"#18572B"}),u.createElement("path",{d:"M339.654 270.891C339.654 269.964 339.463 269.293 339.08 268.861C338.698 268.437 338.323 268.125 337.955 267.942C337.374 267.666 336.744 267.418 336.065 267.199C335.385 266.98 334.692 266.746 333.998 266.506C333.304 266.265 332.632 265.982 331.988 265.657C331.337 265.332 330.763 264.922 330.268 264.426C329.772 263.931 329.369 263.316 329.071 262.588C328.767 261.859 328.618 260.975 328.618 259.935C328.618 257.764 329.298 256.06 330.65 254.822C332.002 253.584 333.835 252.969 336.15 252.969C336.61 252.969 337.212 253.004 337.941 253.075C338.67 253.146 339.385 253.28 340.078 253.471C340.772 253.669 341.367 253.945 341.869 254.305C342.365 254.666 342.613 255.133 342.613 255.713C342.613 256.173 342.443 256.583 342.11 256.929C341.777 257.276 341.303 257.453 340.701 257.453C340.397 257.453 340.114 257.403 339.831 257.311C339.555 257.219 339.25 257.106 338.932 256.979C338.606 256.852 338.245 256.746 337.842 256.647C337.438 256.555 336.943 256.505 336.369 256.505C335.881 256.505 335.407 256.555 334.947 256.661C334.486 256.767 334.076 256.937 333.715 257.184C333.354 257.425 333.071 257.764 332.865 258.188C332.66 258.62 332.554 259.143 332.554 259.766C332.554 260.254 332.611 260.657 332.731 260.982C332.844 261.307 332.993 261.583 333.163 261.817C333.34 262.05 333.524 262.227 333.722 262.354C333.92 262.482 334.111 262.595 334.295 262.687C334.876 262.991 335.513 263.245 336.207 263.465C336.9 263.684 337.594 263.924 338.288 264.179C338.981 264.434 339.647 264.724 340.284 265.049C340.921 265.374 341.487 265.777 341.983 266.265C342.478 266.753 342.882 267.355 343.179 268.069C343.476 268.783 343.632 269.653 343.632 270.672C343.632 271.853 343.427 272.9 343.023 273.812C342.62 274.724 342.053 275.502 341.324 276.139C340.595 276.775 339.732 277.256 338.741 277.582C337.743 277.907 336.667 278.07 335.513 278.07C334.911 278.07 334.21 278.02 333.411 277.914C332.611 277.808 331.86 277.645 331.152 277.412C330.445 277.179 329.843 276.881 329.347 276.507C328.852 276.139 328.604 275.686 328.604 275.156C328.604 274.696 328.774 274.286 329.107 273.925C329.44 273.564 329.864 273.388 330.374 273.388C330.629 273.388 330.912 273.444 331.223 273.564C331.535 273.678 331.896 273.812 332.299 273.96C332.703 274.109 333.17 274.243 333.708 274.357C334.239 274.47 334.855 274.533 335.548 274.533C336.936 274.533 337.969 274.222 338.656 273.6C339.307 272.935 339.654 272.044 339.654 270.891Z",fill:"#18572B"}),u.createElement("path",{d:"M351.73 256.838H347.532C346.98 256.838 346.52 256.661 346.159 256.3C345.798 255.939 345.621 255.529 345.621 255.069C345.621 254.673 345.805 254.277 346.173 253.874C346.541 253.471 346.994 253.266 347.525 253.266H359.743C360.231 253.266 360.677 253.443 361.08 253.789C361.484 254.136 361.689 254.567 361.689 255.069C361.689 255.529 361.498 255.939 361.116 256.3C360.734 256.661 360.274 256.838 359.743 256.838H355.545V276.266C355.545 276.726 355.361 277.143 354.986 277.518C354.618 277.886 354.165 278.07 353.634 278.07C353.103 278.07 352.65 277.886 352.282 277.518C351.914 277.15 351.73 276.733 351.73 276.266V256.838Z",fill:"#18572B"}),u.createElement("path",{d:"M364.443 276.719C364.329 277.136 364.075 277.461 363.7 277.688C363.317 277.921 362.963 278.034 362.638 278.034C362.107 278.034 361.64 277.872 361.25 277.546C360.854 277.221 360.663 276.797 360.663 276.266C360.663 276.174 360.67 276.061 360.677 275.92C360.691 275.778 360.705 275.679 360.727 275.608L367.494 255.041C367.678 254.44 367.947 253.945 368.293 253.549C368.64 253.153 369.15 252.962 369.822 252.962C370.495 252.962 370.997 253.16 371.33 253.549C371.663 253.945 371.939 254.44 372.144 255.041L378.911 275.608C378.961 275.679 378.989 275.785 378.996 275.92C379.01 276.061 379.01 276.174 379.01 276.266C379.01 276.797 378.819 277.228 378.437 277.546C378.055 277.865 377.588 278.034 377.028 278.034C376.405 278.034 375.952 277.836 375.676 277.447C375.4 277.051 375.145 276.549 374.912 275.92L373.801 272.553H365.71L364.443 276.719ZM369.822 258.676C369.384 260.529 368.902 262.305 368.378 264.016C367.855 265.728 367.331 267.461 366.8 269.222H372.802C372.272 267.468 371.734 265.721 371.189 263.981C370.651 262.248 370.191 260.48 369.822 258.676Z",fill:"#18572B"}),u.createElement("path",{d:"M396.791 278.07C396.423 278.07 396.062 277.978 395.715 277.794C395.369 277.61 395.1 277.369 394.916 277.065L385.89 260.798V276.238C385.89 276.726 385.699 277.15 385.317 277.518C384.935 277.886 384.475 278.07 383.944 278.07C383.413 278.07 382.967 277.886 382.606 277.518C382.245 277.15 382.068 276.719 382.068 276.238V254.9C382.068 254.341 382.252 253.881 382.62 253.513C382.988 253.146 383.477 252.955 384.078 252.955C384.475 252.955 384.843 253.047 385.19 253.23C385.537 253.414 385.806 253.669 385.99 253.994C386.244 254.433 386.605 255.083 387.08 255.939C387.554 256.795 388.078 257.743 388.658 258.782C389.239 259.822 389.847 260.918 390.477 262.078C391.114 263.238 391.723 264.342 392.304 265.41C392.884 266.47 393.408 267.432 393.882 268.288C394.356 269.144 394.731 269.802 395.008 270.269V254.801C395.008 254.291 395.199 253.86 395.581 253.499C395.963 253.138 396.416 252.962 396.954 252.962C397.485 252.962 397.931 253.138 398.292 253.499C398.653 253.86 398.83 254.291 398.83 254.801V276.132C398.83 276.662 398.639 277.122 398.257 277.504C397.889 277.879 397.393 278.07 396.791 278.07Z",fill:"#18572B"})),WRe=u.forwardRef(zRe);var np=(t=>(t.XS="xs",t.SM="sm",t.MD="md",t.LG="lg",t.XL="xl",t))(np||{});const YRe=new Map([["xs",22],["sm",32],["md",36],["lg",42],["xl",90]]);function JRe(t,e,n=96){const r=Math.floor(n*window.devicePixelRatio),i=Math.floor(n*window.devicePixelRatio),s=n<=96?"crop":"scale";return e?t.mxcUrlToHttp(e,r,i,s,!1,!0,!0):null}const rp=({className:t,id:e,name:n,src:r,size:i="md",style:s,...a})=>{const o=op(),l=u.useMemo(()=>Object.values(np).includes(i)?YRe.get(i):i,[i]),[c,d]=u.useState(void 0);return u.useEffect(()=>{if((o==null?void 0:o.state)!=="valid")return;const{authenticated:f,supportedFeatures:p}=o,g=f==null?void 0:f.client;if(!g||!r||!l||!p.thumbnails)return;const y=g.getAccessToken();if(!y)return;const v=JRe(g,r,l);if(!v){d(void 0);return}let b;return fetch(v,{headers:{Authorization:`Bearer ${y}`}}).then(async C=>C.blob()).then(C=>{b=URL.createObjectURL(C),d(b)}).catch(C=>{d(void 0)}),()=>{b&&URL.revokeObjectURL(b)}},[o,r,l]),E.jsx(OCe,{className:t,id:e,name:n,size:`${l}px`,src:c,style:s,...a})},QRe="_lock_1lm1e_15",XRe={lock:QRe},eIe=({encrypted:t})=>{const{t:e}=it(),n=t?bRe:CRe,r=e(t?"common.encrypted":"common.unencrypted");return E.jsx(Bi,{label:r,placement:"right",isTriggerInteractive:!1,children:E.jsx(n,{width:16,height:16,className:XRe.lock,"data-encrypted":t})})};function T0(t,e,n,r){u.useEffect(()=>{if(t)return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)},[t,e,n,r])}function gy(t,e,n){u.useEffect(()=>(t.on(e,n),()=>{t.off(e,n)}),[t,e,n])}function vy(t){const e=u.useMemo(()=>window.matchMedia(t),[t]),[n,r]=u.useState(0);return T0(e,"change",u.useCallback(()=>r(i=>i+1),[r])),u.useMemo(()=>e.matches,[e,n])}const l1=u.forwardRef(({children:t,className:e,...n},r)=>E.jsx("header",{ref:r,className:De(Ha.header,e),...n,children:t}));l1.displayName="Header";const Zh=({children:t,className:e,hideMobile:n,...r})=>E.jsx("div",{className:De(Ha.nav,Ha.leftNav,{[Ha.hideMobile]:n},e),...r,children:t}),zh=({children:t,className:e,hideMobile:n,...r})=>E.jsx("div",{className:De(Ha.nav,Ha.rightNav,{[Ha.hideMobile]:n},e),...r,children:t}),Mh=({className:t})=>{const{t:e}=it();return E.jsx(V9,{className:De(Ha.headerLogo,t),to:"/","aria-label":e("header_label"),children:E.jsx(WRe,{})})},Yne=({id:t,name:e,avatarUrl:n,encrypted:r,participantCount:i})=>{const{t:s}=it(),a=vy("(max-width: 550px)")?"sm":"lg";return E.jsxs("div",{className:Ha.roomHeaderInfo,"data-size":a,children:[E.jsx(rp,{className:Ha.roomAvatar,id:t,name:e,size:a==="sm"?np.SM:56,src:n??void 0}),E.jsxs("div",{className:Ha.nameLine,children:[E.jsx(o1,{type:a==="sm"?"body":"heading",size:a==="sm"?"lg":"md",weight:"semibold","data-testid":"roomHeader_roomName",children:e}),E.jsx(eIe,{encrypted:r})]}),(i??0)>0&&E.jsxs("div",{className:Ha.participantsLine,children:[E.jsx(Vne,{width:20,height:20,"aria-label":s("header_participants_label")}),E.jsx(_n,{as:"span",size:"sm",weight:"medium","data-testid":"roomHeader_participants_count",children:s("participant_count",{count:i??0})})]})]})},tIe="_page_1rf17_15",nIe="_container_1rf17_39",rIe="_content_1rf17_55",YE={page:tIe,container:nIe,content:rIe};var Jne=typeof global=="object"&&global&&global.Object===Object&&global,iIe=typeof self=="object"&&self&&self.Object===Object&&self,Wh=Jne||iIe||Function("return this")(),_5=Wh.Symbol,Qne=Object.prototype,sIe=Qne.hasOwnProperty,aIe=Qne.toString,T3=_5?_5.toStringTag:void 0;function oIe(t){var e=sIe.call(t,T3),n=t[T3];try{t[T3]=void 0;var r=!0}catch{}var i=aIe.call(t);return r&&(e?t[T3]=n:delete t[T3]),i}var lIe=Object.prototype,cIe=lIe.toString;function uIe(t){return cIe.call(t)}var dIe="[object Null]",hIe="[object Undefined]",v$=_5?_5.toStringTag:void 0;function v4(t){return t==null?t===void 0?hIe:dIe:v$&&v$ in Object(t)?oIe(t):uIe(t)}function ip(t){return t!=null&&typeof t=="object"}var fIe="[object Symbol]";function mIe(t){return typeof t=="symbol"||ip(t)&&v4(t)==fIe}var GT=Array.isArray,pIe=/\s/;function gIe(t){for(var e=t.length;e--&&pIe.test(t.charAt(e)););return e}var vIe=/^\s+/;function yIe(t){return t&&t.slice(0,gIe(t)+1).replace(vIe,"")}function Go(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var y$=NaN,_Ie=/^[-+]0x[0-9a-f]+$/i,CIe=/^0b[01]+$/i,bIe=/^0o[0-7]+$/i,EIe=parseInt;function _$(t){if(typeof t=="number")return t;if(mIe(t))return y$;if(Go(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Go(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yIe(t);var n=CIe.test(t);return n||bIe.test(t)?EIe(t.slice(2),n?2:8):_Ie.test(t)?y$:+t}function Xne(t){return t}var SIe="[object AsyncFunction]",wIe="[object Function]",kIe="[object GeneratorFunction]",TIe="[object Proxy]";function ZM(t){if(!Go(t))return!1;var e=v4(t);return e==wIe||e==kIe||e==SIe||e==TIe}var JE=Wh["__core-js_shared__"],C$=function(){var t=/[^.]+$/.exec(JE&&JE.keys&&JE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function RIe(t){return!!C$&&C$ in t}var IIe=Function.prototype,xIe=IIe.toString;function MIe(t){if(t!=null){try{return xIe.call(t)}catch{}try{return t+""}catch{}}return""}var PIe=/[\\^$.*+?()[\]{}|]/g,LIe=/^\[object .+?Constructor\]$/,OIe=Function.prototype,AIe=Object.prototype,NIe=OIe.toString,DIe=AIe.hasOwnProperty,UIe=RegExp("^"+NIe.call(DIe).replace(PIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function FIe(t){if(!Go(t)||RIe(t))return!1;var e=ZM(t)?UIe:LIe;return e.test(MIe(t))}function jIe(t,e){return t==null?void 0:t[e]}function zM(t,e){var n=jIe(t,e);return FIe(n)?n:void 0}var b$=Object.create,HIe=function(){function t(){}return function(e){if(!Go(e))return{};if(b$)return b$(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function $Ie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function VIe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var BIe=800,qIe=16,GIe=Date.now;function KIe(t){var e=0,n=0;return function(){var r=GIe(),i=qIe-(r-n);if(n=r,i>0){if(++e>=BIe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ZIe(t){return function(){return t}}var C5=function(){try{var t=zM(Object,"defineProperty");return t({},"",{}),t}catch{}}(),zIe=C5?function(t,e){return C5(t,"toString",{configurable:!0,enumerable:!1,value:ZIe(e),writable:!0})}:Xne,WIe=KIe(zIe),YIe=9007199254740991,JIe=/^(?:0|[1-9]\d*)$/;function ere(t,e){var n=typeof t;return e=e??YIe,!!e&&(n=="number"||n!="symbol"&&JIe.test(t))&&t>-1&&t%1==0&&t<e}function WM(t,e,n){e=="__proto__"&&C5?C5(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function yy(t,e){return t===e||t!==t&&e!==e}var QIe=Object.prototype,XIe=QIe.hasOwnProperty;function exe(t,e,n){var r=t[e];(!(XIe.call(t,e)&&yy(r,n))||n===void 0&&!(e in t))&&WM(t,e,n)}function txe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=t[o]),i?WM(n,o,l):exe(n,o,l)}return n}var E$=Math.max;function nxe(t,e,n){return e=E$(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=E$(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),$Ie(t,this,o)}}function rxe(t,e){return WIe(nxe(t,e,Xne),t+"")}var ixe=9007199254740991;function tre(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ixe}function YM(t){return t!=null&&tre(t.length)&&!ZM(t)}function sxe(t,e,n){if(!Go(n))return!1;var r=typeof e;return(r=="number"?YM(n)&&ere(e,n.length):r=="string"&&e in n)?yy(n[e],t):!1}function axe(t){return rxe(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&sxe(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var oxe=Object.prototype;function nre(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||oxe;return t===n}function lxe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var cxe="[object Arguments]";function S$(t){return ip(t)&&v4(t)==cxe}var rre=Object.prototype,uxe=rre.hasOwnProperty,dxe=rre.propertyIsEnumerable,KT=S$(function(){return arguments}())?S$:function(t){return ip(t)&&uxe.call(t,"callee")&&!dxe.call(t,"callee")};function hxe(){return!1}var ire=typeof exports=="object"&&exports&&!exports.nodeType&&exports,w$=ire&&typeof module=="object"&&module&&!module.nodeType&&module,fxe=w$&&w$.exports===ire,k$=fxe?Wh.Buffer:void 0,mxe=k$?k$.isBuffer:void 0,sre=mxe||hxe,pxe="[object Arguments]",gxe="[object Array]",vxe="[object Boolean]",yxe="[object Date]",_xe="[object Error]",Cxe="[object Function]",bxe="[object Map]",Exe="[object Number]",Sxe="[object Object]",wxe="[object RegExp]",kxe="[object Set]",Txe="[object String]",Rxe="[object WeakMap]",Ixe="[object ArrayBuffer]",xxe="[object DataView]",Mxe="[object Float32Array]",Pxe="[object Float64Array]",Lxe="[object Int8Array]",Oxe="[object Int16Array]",Axe="[object Int32Array]",Nxe="[object Uint8Array]",Dxe="[object Uint8ClampedArray]",Uxe="[object Uint16Array]",Fxe="[object Uint32Array]",Pn={};Pn[Mxe]=Pn[Pxe]=Pn[Lxe]=Pn[Oxe]=Pn[Axe]=Pn[Nxe]=Pn[Dxe]=Pn[Uxe]=Pn[Fxe]=!0;Pn[pxe]=Pn[gxe]=Pn[Ixe]=Pn[vxe]=Pn[xxe]=Pn[yxe]=Pn[_xe]=Pn[Cxe]=Pn[bxe]=Pn[Exe]=Pn[Sxe]=Pn[wxe]=Pn[kxe]=Pn[Txe]=Pn[Rxe]=!1;function jxe(t){return ip(t)&&tre(t.length)&&!!Pn[v4(t)]}function Hxe(t){return function(e){return t(e)}}var are=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R0=are&&typeof module=="object"&&module&&!module.nodeType&&module,$xe=R0&&R0.exports===are,QE=$xe&&Jne.process,T$=function(){try{var t=R0&&R0.require&&R0.require("util").types;return t||QE&&QE.binding&&QE.binding("util")}catch{}}(),R$=T$&&T$.isTypedArray,ore=R$?Hxe(R$):jxe;function Vxe(t,e){var n=GT(t),r=!n&&KT(t),i=!n&&!r&&sre(t),s=!n&&!r&&!i&&ore(t),a=n||r||i||s,o=a?lxe(t.length,String):[],l=o.length;for(var c in t)a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ere(c,l))||o.push(c);return o}function Bxe(t,e){return function(n){return t(e(n))}}function qxe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Gxe=Object.prototype,Kxe=Gxe.hasOwnProperty;function Zxe(t){if(!Go(t))return qxe(t);var e=nre(t),n=[];for(var r in t)r=="constructor"&&(e||!Kxe.call(t,r))||n.push(r);return n}function lre(t){return YM(t)?Vxe(t):Zxe(t)}var vg=zM(Object,"create");function zxe(){this.__data__=vg?vg(null):{},this.size=0}function Wxe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Yxe="__lodash_hash_undefined__",Jxe=Object.prototype,Qxe=Jxe.hasOwnProperty;function Xxe(t){var e=this.__data__;if(vg){var n=e[t];return n===Yxe?void 0:n}return Qxe.call(e,t)?e[t]:void 0}var eMe=Object.prototype,tMe=eMe.hasOwnProperty;function nMe(t){var e=this.__data__;return vg?e[t]!==void 0:tMe.call(e,t)}var rMe="__lodash_hash_undefined__";function iMe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vg&&e===void 0?rMe:e,this}function Ph(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ph.prototype.clear=zxe;Ph.prototype.delete=Wxe;Ph.prototype.get=Xxe;Ph.prototype.has=nMe;Ph.prototype.set=iMe;function sMe(){this.__data__=[],this.size=0}function _y(t,e){for(var n=t.length;n--;)if(yy(t[n][0],e))return n;return-1}var aMe=Array.prototype,oMe=aMe.splice;function lMe(t){var e=this.__data__,n=_y(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():oMe.call(e,n,1),--this.size,!0}function cMe(t){var e=this.__data__,n=_y(e,t);return n<0?void 0:e[n][1]}function uMe(t){return _y(this.__data__,t)>-1}function dMe(t,e){var n=this.__data__,r=_y(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function vu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}vu.prototype.clear=sMe;vu.prototype.delete=lMe;vu.prototype.get=cMe;vu.prototype.has=uMe;vu.prototype.set=dMe;var cre=zM(Wh,"Map");function hMe(){this.size=0,this.__data__={hash:new Ph,map:new(cre||vu),string:new Ph}}function fMe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Cy(t,e){var n=t.__data__;return fMe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function mMe(t){var e=Cy(this,t).delete(t);return this.size-=e?1:0,e}function pMe(t){return Cy(this,t).get(t)}function gMe(t){return Cy(this,t).has(t)}function vMe(t,e){var n=Cy(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function sp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sp.prototype.clear=hMe;sp.prototype.delete=mMe;sp.prototype.get=pMe;sp.prototype.has=gMe;sp.prototype.set=vMe;var ure=Bxe(Object.getPrototypeOf,Object),yMe="[object Object]",_Me=Function.prototype,CMe=Object.prototype,dre=_Me.toString,bMe=CMe.hasOwnProperty,EMe=dre.call(Object);function SMe(t){if(!ip(t)||v4(t)!=yMe)return!1;var e=ure(t);if(e===null)return!0;var n=bMe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&dre.call(n)==EMe}function wMe(){this.__data__=new vu,this.size=0}function kMe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function TMe(t){return this.__data__.get(t)}function RMe(t){return this.__data__.has(t)}var IMe=200;function xMe(t,e){var n=this.__data__;if(n instanceof vu){var r=n.__data__;if(!cre||r.length<IMe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sp(r)}return n.set(t,e),this.size=n.size,this}function ap(t){var e=this.__data__=new vu(t);this.size=e.size}ap.prototype.clear=wMe;ap.prototype.delete=kMe;ap.prototype.get=TMe;ap.prototype.has=RMe;ap.prototype.set=xMe;var hre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,I$=hre&&typeof module=="object"&&module&&!module.nodeType&&module,MMe=I$&&I$.exports===hre,x$=MMe?Wh.Buffer:void 0;x$&&x$.allocUnsafe;function PMe(t,e){return t.slice()}var M$=Wh.Uint8Array;function LMe(t){var e=new t.constructor(t.byteLength);return new M$(e).set(new M$(t)),e}function OMe(t,e){var n=LMe(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function AMe(t){return typeof t.constructor=="function"&&!nre(t)?HIe(ure(t)):{}}function NMe(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[++i];if(n(s[l],l,s)===!1)break}return e}}var DMe=NMe(),XE=function(){return Wh.Date.now()},UMe="Expected a function",FMe=Math.max,jMe=Math.min;function HMe(t,e,n){var r,i,s,a,o,l,c=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(UMe);e=_$(e)||0,Go(n)&&(d=!!n.leading,f="maxWait"in n,s=f?FMe(_$(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p);function g(k){var x=r,L=i;return r=i=void 0,c=k,a=t.apply(L,x),a}function y(k){return c=k,o=setTimeout(C,e),d?g(k):a}function v(k){var x=k-l,L=k-c,N=e-x;return f?jMe(N,s-L):N}function b(k){var x=k-l,L=k-c;return l===void 0||x>=e||x<0||f&&L>=s}function C(){var k=XE();if(b(k))return S(k);o=setTimeout(C,v(k))}function S(k){return o=void 0,p&&r?g(k):(r=i=void 0,a)}function R(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function w(){return o===void 0?a:S(XE())}function I(){var k=XE(),x=b(k);if(r=arguments,i=this,l=k,x){if(o===void 0)return y(l);if(f)return clearTimeout(o),o=setTimeout(C,e),g(l)}return o===void 0&&(o=setTimeout(C,e)),a}return I.cancel=R,I.flush=w,I}function ZT(t,e,n){(n!==void 0&&!yy(t[e],n)||n===void 0&&!(e in t))&&WM(t,e,n)}function $Me(t){return ip(t)&&YM(t)}function zT(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function VMe(t){return txe(t,lre(t))}function BMe(t,e,n,r,i,s,a){var o=zT(t,n),l=zT(e,n),c=a.get(l);if(c){ZT(t,n,c);return}var d=s?s(o,l,n+"",t,e,a):void 0,f=d===void 0;if(f){var p=GT(l),g=!p&&sre(l),y=!p&&!g&&ore(l);d=l,p||g||y?GT(o)?d=o:$Me(o)?d=VIe(o):g?(f=!1,d=PMe(l)):y?(f=!1,d=OMe(l)):d=[]:SMe(l)||KT(l)?(d=o,KT(o)?d=VMe(o):(!Go(o)||ZM(o))&&(d=AMe(l))):f=!1}f&&(a.set(l,d),i(d,l,r,s,a),a.delete(l)),ZT(t,n,d)}function fre(t,e,n,r,i){t!==e&&DMe(e,function(s,a){if(i||(i=new ap),Go(s))BMe(t,e,a,n,fre,r,i);else{var o=r?r(zT(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),ZT(t,a,o)}},lre)}var qMe=axe(function(t,e,n){fre(t,e,n)}),GMe="Expected a function";function KMe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(GMe);return Go(n)&&(r="leading"in n?!1:r,i="trailing"in n?!0:i),HMe(t,e,{leading:r,maxWait:e,trailing:i})}const WT={default_server_config:{"m.homeserver":{base_url:"http://localhost:8008",server_name:"localhost"}},features:{feature_use_device_session_member_events:!0},ssla:"https://static.element.io/legal/element-software-and-services-license-agreement-uk-1.pdf",media_devices:{enable_audio:!0,enable_video:!0},app_prompt:!0};function JM(t){return!(t.ok||t.url.startsWith("file:")&&t.status===0)}class At{static get(){var e;if(!((e=this.internalInstance)!=null&&e.config))throw new Error("Config instance read before config got initialized");return this.internalInstance.config}static async init(){var e;if(!((e=At.internalInstance)!=null&&e.initPromise)){const n=new At;At.internalInstance=n;let r;window.location.pathname.endsWith("/room/")||window.location.pathname.endsWith("/room")?r=new URL("/config.json",window.location.href).href:r="config.json",At.internalInstance.initPromise=ZMe(r).then(i=>{n.config=qMe({},WT,i)})}return At.internalInstance.initPromise}static initDefault(){At.internalInstance=new At,At.internalInstance.config={...WT}}static defaultHomeserverUrl(){var e;return Xa().homeserver??((e=At.get().default_server_config)==null?void 0:e["m.homeserver"].base_url)}static defaultServerName(){var n;const e=Xa().homeserver;return e?new URL(e).hostname:(n=At.get().default_server_config)==null?void 0:n["m.homeserver"].server_name}}async function ZMe(t){const e=await fetch(t);return JM(e)?WT:e.json()}var Wt=(t=>(t[t.NONE=0]="NONE",t[t.PER_PARTICIPANT=1]="PER_PARTICIPANT",t[t.SHARED_KEY=2]="SHARED_KEY",t))(Wt||{}),mre=(t=>(t.StartNewCall="start_call",t.JoinExistingCall="join_existing",t.Unknown="unknown",t))(mre||{});function zMe(t,e){const n=t.indexOf("?"),r=e(new URLSearchParams(n===-1?"":t.substring(n)));return`${t.substring(0,n)}?${r.toString()}`}class pre{constructor(e,n){this.queryParams=new URLSearchParams(e);const r=n.indexOf("?");this.fragmentParams=new URLSearchParams(r===-1?"":n.substring(r))}getParam(e){return this.fragmentParams.get(e)??this.queryParams.get(e)}getAllParams(e){return[...this.fragmentParams.getAll(e),...this.queryParams.getAll(e)]}getFlagParam(e,n=!1){const r=this.getParam(e);return r===null?n:r!=="false"}}const Xa=(t=window.location.search,e=window.location.hash)=>{const n=new pre(t,e),r=parseFloat(n.getParam("fontScale")??"");let i=n.getParam("intent");(!i||!Object.values(mre).includes(i))&&(i="unknown");const s=n.getParam("widgetId"),a=n.getParam("parentUrl"),o=!!s&&!!a;return{widgetId:s,parentUrl:a,roomId:n.getParam("roomId"),password:n.getParam("password"),confineToRoom:n.getFlagParam("confineToRoom")||n.getFlagParam("embed"),appPrompt:n.getFlagParam("appPrompt",!0),preload:o?n.getFlagParam("preload"):!1,hideHeader:n.getFlagParam("hideHeader"),showControls:n.getFlagParam("showControls",!0),hideScreensharing:n.getFlagParam("hideScreensharing"),e2eEnabled:n.getFlagParam("enableE2EE",!0),userId:o?n.getParam("userId"):null,displayName:n.getParam("displayName"),deviceId:o?n.getParam("deviceId"):null,baseUrl:o?n.getParam("baseUrl"):null,lang:n.getParam("lang"),fonts:n.getAllParams("font"),fontScale:Number.isNaN(r)?null:r,allowIceFallback:n.getFlagParam("allowIceFallback"),perParticipantE2EE:n.getFlagParam("perParticipantE2EE"),controlledAudioDevices:n.getFlagParam("controlledAudioDevices",n.getFlagParam("controlledMediaDevices")),skipLobby:n.getFlagParam("skipLobby",o&&i==="start_call"),returnToLobby:o?n.getFlagParam("returnToLobby"):!1,theme:n.getParam("theme"),viaServers:o?null:n.getParam("viaServers"),homeserver:o?null:n.getParam("homeserver"),intent:i,posthogApiHost:n.getParam("posthogApiHost"),posthogApiKey:n.getParam("posthogApiKey"),posthogUserId:n.getParam("posthogUserId")??n.getParam("analyticsID"),rageshakeSubmitUrl:n.getParam("rageshakeSubmitUrl"),sentryDsn:n.getParam("sentryDsn"),sentryEnvironment:n.getParam("sentryEnvironment")}},Yo=()=>{const{search:t,hash:e}=Gi();return u.useMemo(()=>Xa(t,e),[t,e])};function WMe(t,e,n){let r=null;t=t.substring(1);const i=t.split("/"),s=i[0]=="room",a=i.length>1;n===""||n.startsWith("#?")?(a&&s&&(r=i[1]),s||(r=i[0])):r=n,r=(r==null?void 0:r.split("?")[0])??null,r&&(r.length<=1?r=null:(r.startsWith("#")||(r=`#${r}`),r.includes(":")||(r=`${r}:${At.defaultServerName()}`)));const o=new pre(e,n);let l=o.getParam("roomId");return l!=null&&l.startsWith("!")&&l.includes("")||(l=null),{roomAlias:r,roomId:l,viaServers:o.getAllParams("viaServers")}}const YMe=()=>{const{pathname:t,search:e,hash:n}=Gi();return u.useMemo(()=>WMe(t,e,n),[t,e,n])};function JMe(t,e,n){const r=new URLSearchParams;switch(e==null?void 0:e.kind){case Wt.SHARED_KEY:{const i=encodeURIComponent(e.secret);i!==e.secret&&A.info("Encoded call password used non URL-safe chars: buggy client?"),r.set("password",i);break}case Wt.PER_PARTICIPANT:r.set("perParticipantE2EE","true");break}return r.set("roomId",t),r}const QMe="_rageshakeControl_1jcp1_15",P$={rageshakeControl:QMe},L$=1024*1024*5,XMe=2*1e3,ePe=3;class tPe extends MI{constructor(){super(...arguments),this.logs="",this.log=(e,...n)=>{const r=new Date().toISOString();n=n.map(s=>s instanceof DOMException?s.message+` (${s.name} | ${s.code})`:s instanceof Error?s.message+(s.stack?`
${s.stack}`:""):typeof s=="object"?JSON.stringify(s,oPe()):s);let i=`${r} ${e} ${n.join(" ")}
`;i=i.replace(/token=[a-zA-Z0-9-]+/gm,"token=xxxxx"),this.logs+=i,this.emit("log")}}popLogs(){const e=this.logs;return this.logs="",e}peekLogs(){return this.logs}}class nPe{constructor(e,n){this.indexedDB=e,this.loggerInstance=n,this.index=0,this.onLoggerLog=()=>{this.db&&this.throttledFlush()},this.throttledFlush=KMe(()=>this.flush,XMe,{leading:!1,trailing:!0}),this.flush=async()=>this.flushPromise?this.flushAgainPromise?this.flushAgainPromise:(this.flushAgainPromise=this.flushPromise.then(this.flush).then(()=>{this.flushAgainPromise=void 0}),this.flushAgainPromise):(this.flushPromise=new Promise((r,i)=>{if(!this.db){i(new Error("No connected database"));return}const s=this.loggerInstance.popLogs();if(s.length===0){r();return}const a=this.db.transaction(["logs","logslastmod"],"readwrite"),o=a.objectStore("logs");a.oncomplete=()=>{r()},a.onerror=c=>{var d;A.error("Failed to flush logs : ",c),i(new Error("Failed to write logs: "+((d=a==null?void 0:a.error)==null?void 0:d.message)))},o.add(this.generateLogEntry(s)),a.objectStore("logslastmod").put(this.generateLastModifiedTime())}).then(()=>{this.flushPromise=void 0}),this.flushPromise),this.id="instance-"+Ba(16),n.on("log",this.onLoggerLog),window.addEventListener("beforeunload",()=>{this.flush().catch(r=>A.error("Failed to flush logs before unload",r))})}async connect(){const e=this.indexedDB.open("logs");return new Promise((n,r)=>{e.onsuccess=()=>{this.db=e.result,n()},e.onerror=()=>{var s;const i="Failed to open log database: "+((s=e==null?void 0:e.error)==null?void 0:s.name);A.error(i),r(new Error(i))},e.onupgradeneeded=()=>{const i=e.result,s=i.createObjectStore("logs",{keyPath:["id","index"]});s.createIndex("id","id",{unique:!1}),s.add(this.generateLogEntry(new Date+" ::: Log database was created.")),i.createObjectStore("logslastmod",{keyPath:"id"}).add(this.generateLastModifiedTime())}})}async consume(){const e=this.db;if(!e)return Promise.reject(new Error("No connected database"));async function n(c,d){const f=e.transaction("logs","readonly").objectStore("logs");return new Promise((p,g)=>{const y=f.index("id").openCursor(IDBKeyRange.only(c),"prev");let v="";y.onerror=()=>{var b;g(new Error("Query failed: "+((b=y==null?void 0:y.error)==null?void 0:b.message)))},y.onsuccess=()=>{const b=y.result;if(!b){p(v);return}v=b.value.lines+v,v.length>=d?p(v):b.continue()}})}async function r(){const c=e.transaction("logslastmod","readonly").objectStore("logslastmod");return rPe(c,void 0,d=>({id:d.value.id,ts:d.value.ts})).then(d=>d.sort((f,p)=>p.ts-f.ts).map(f=>f.id))}async function i(c){return new Promise((d,f)=>{const p=e.transaction(["logs","logslastmod"],"readwrite"),g=p.objectStore("logs"),y=g.index("id").openKeyCursor(IDBKeyRange.only(c));y.onsuccess=()=>{const b=y.result;b&&(g.delete(b.primaryKey),b.continue())},p.oncomplete=()=>{d()},p.onerror=()=>{var b;f(new Error(`Failed to delete logs for '${c}' : ${(b=p==null?void 0:p.error)==null?void 0:b.message}`))},p.objectStore("logslastmod").delete(c)})}const s=await r();let a=[];const o=[];let l=0;for(let c=0;c<s.length;c++){const d=await n(s[c],L$-l);if(o.push({lines:d,id:s[c]}),l+=d.length,l>=L$){a=s.slice(c+1).map(f=>parseInt(f,10));break}}return a.length>0&&(A.log("Removing logs: ",a),Promise.all(a.map(async c=>i(c))).then(()=>{A.log(`Removed ${a.length} old logs.`)},c=>{A.error(c)})),o}generateLogEntry(e){return{id:this.id,lines:e,index:this.index++}}generateLastModifiedTime(){return{id:this.id,ts:Date.now()}}}async function rPe(t,e,n){const r=t.openCursor(e);return new Promise((i,s)=>{const a=[];r.onerror=()=>{var o;s(new Error("Query failed: "+((o=r==null?void 0:r.error)==null?void 0:o.message)))},r.onsuccess=()=>{const o=r.result;if(!o){i(a);return}a.push(n(o)),o.continue()}})}async function iPe(){return global.mx_rage_logger=new tPe,lPe(A,global.mx_rage_logger.log),["trace","debug","info","warn","error"].forEach(t=>{const e=window.console[t];if(!e)return;const n=`${t.toUpperCase()} matrix_sdk`;window.console[t]=(...r)=>{e(...r),typeof r[0]=="string"&&r[0].startsWith(n)&&global.mx_rage_logger.log(QM[t],"matrix_sdk",...r)}}),sPe()}async function sPe(){if(global.mx_rage_initStoragePromise)return global.mx_rage_initStoragePromise;A.log("Configuring rageshake persistence...");let t;try{t=window.indexedDB}catch(e){A.warn("Could not get indexDB from window.",e)}return t?(global.mx_rage_store=new nPe(t,global.mx_rage_logger),global.mx_rage_initStoragePromise=global.mx_rage_store.connect(),global.mx_rage_initStoragePromise):(global.mx_rage_initStoragePromise=Promise.resolve(),global.mx_rage_initStoragePromise)}async function aPe(){if(!global.mx_rage_logger)throw new Error("No console logger, did you forget to call init()?");return global.mx_rage_store?(await global.mx_rage_store.flush(),global.mx_rage_store.consume()):[{lines:global.mx_rage_logger.peekLogs(),id:"-"}]}const oPe=()=>{const t=new WeakSet,e=new WeakMap;return function(n,r){if(typeof r=="object"&&r!==null){if(t.has(r))return"<$ cycle-trimmed $>";t.add(r);let i=0;if(this&&(i=e.get(this)??0),e.set(r,i+1),i>ePe)return"<$ object-pruned $>"}return r}};var QM=(t=>(t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent",t))(QM||{});function lPe(t,e){const n=t,r=n.methodFactory;n.methodFactory=function(i,s,a){const o=r(i,s,a),l=QM[i],c=l>=s&&l<5;return(...d)=>{o.apply(this,d),c&&e(l,a==null?void 0:a.toString(),...d)}},n.setLevel(n.getLevel())}var cPe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},th="1.9.0",O$=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function uPe(t){var e=new Set([t]),n=new Set,r=t.match(O$);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(l){return l===t};function s(o){return n.add(o),!1}function a(o){return e.add(o),!0}return function(l){if(e.has(l))return!0;if(n.has(l))return!1;var c=l.match(O$);if(!c)return s(l);var d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return d.prerelease!=null||i.major!==d.major?s(l):i.major===0?i.minor===d.minor&&i.patch<=d.patch?a(l):s(l):i.minor<=d.minor?a(l):s(l)}}var dPe=uPe(th),hPe=th.split(".")[0],yg=Symbol.for("opentelemetry.js.api."+hPe),_g=cPe;function by(t,e,n,r){var i;r===void 0&&(r=!1);var s=_g[yg]=(i=_g[yg])!==null&&i!==void 0?i:{version:th};if(!r&&s[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(a.stack||a.message),!1}if(s.version!==th){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+th);return n.error(a.stack||a.message),!1}return s[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+th+"."),!0}function ym(t){var e,n,r=(e=_g[yg])===null||e===void 0?void 0:e.version;if(!(!r||!dPe(r)))return(n=_g[yg])===null||n===void 0?void 0:n[t]}function Ey(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+th+".");var n=_g[yg];n&&delete n[t]}var fPe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},mPe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},pPe=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return R3("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return R3("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return R3("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return R3("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return R3("verbose",this._namespace,e)},t}();function R3(t,e,n){var r=ym("diag");if(r)return n.unshift(e),r[t].apply(r,mPe([],fPe(n),!1))}var ra;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(ra||(ra={}));function gPe(t,e){t<ra.NONE?t=ra.NONE:t>ra.ALL&&(t=ra.ALL),e=e||{};function n(r,i){var s=e[r];return typeof s=="function"&&t>=i?s.bind(e):function(){}}return{error:n("error",ra.ERROR),warn:n("warn",ra.WARN),info:n("info",ra.INFO),debug:n("debug",ra.DEBUG),verbose:n("verbose",ra.VERBOSE)}}var vPe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},yPe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},_Pe="diag",zd=function(){function t(){function e(i){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=ym("diag");if(o)return o[i].apply(o,yPe([],vPe(s),!1))}}var n=this,r=function(i,s){var a,o,l;if(s===void 0&&(s={logLevel:ra.INFO}),i===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof s=="number"&&(s={logLevel:s});var d=ym("diag"),f=gPe((o=s.logLevel)!==null&&o!==void 0?o:ra.INFO,i);if(d&&!s.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),f.warn("Current logger will overwrite one already registered from "+p)}return by("diag",f,n,!0)};n.setLogger=r,n.disable=function(){Ey(_Pe,n)},n.createComponentLogger=function(i){return new pPe(i)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),CPe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},bPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EPe=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=CPe(e,2),r=n[0],i=n[1];return[r,i]})},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=new t(this._entries);try{for(var a=bPe(r),o=a.next();!o.done;o=a.next()){var l=o.value;s._entries.delete(l)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.clear=function(){return new t},t}(),SPe=Symbol("BaggageEntryMetadata"),wPe=zd.instance();function kPe(t){return t===void 0&&(t={}),new EPe(new Map(Object.entries(t)))}function TPe(t){return typeof t!="string"&&(wPe.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:SPe,toString:function(){return t}}}function XM(t){return Symbol.for(t)}var RPe=function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,i){var s=new t(n._currentContext);return s._currentContext.set(r,i),s},n.deleteValue=function(r){var i=new t(n._currentContext);return i._currentContext.delete(r),i}}return t}(),n2=new RPe,IPe={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},xPe={set:function(t,e,n){t!=null&&(t[e]=n)}},MPe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},PPe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},LPe=function(){function t(){}return t.prototype.active=function(){return n2},t.prototype.with=function(e,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return n.call.apply(n,PPe([r],MPe(i),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),OPe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s},APe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},eS="context",NPe=new LPe,Sy=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return by(eS,e,zd.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,APe([e,n,r],OPe(s),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return ym(eS)||NPe},t.prototype.disable=function(){this._getContextManager().disable(),Ey(eS,zd.instance())},t}(),fu;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(fu||(fu={}));var gre="0000000000000000",vre="00000000000000000000000000000000",yre={traceId:vre,spanId:gre,traceFlags:fu.NONE},I0=function(){function t(e){e===void 0&&(e=yre),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t}(),eP=XM("OpenTelemetry Context Key SPAN");function tP(t){return t.getValue(eP)||void 0}function DPe(){return tP(Sy.getInstance().active())}function nP(t,e){return t.setValue(eP,e)}function UPe(t){return t.deleteValue(eP)}function FPe(t,e){return nP(t,new I0(e))}function _re(t){var e;return(e=tP(t))===null||e===void 0?void 0:e.spanContext()}var jPe=/^([0-9a-f]{32})$/i,HPe=/^[0-9a-f]{16}$/i;function Cre(t){return jPe.test(t)&&t!==vre}function $Pe(t){return HPe.test(t)&&t!==gre}function wy(t){return Cre(t.traceId)&&$Pe(t.spanId)}function VPe(t){return new I0(t)}var tS=Sy.getInstance(),bre=function(){function t(){}return t.prototype.startSpan=function(e,n,r){r===void 0&&(r=tS.active());var i=!!(n!=null&&n.root);if(i)return new I0;var s=r&&_re(r);return BPe(s)&&wy(s)?new I0(s):new I0},t.prototype.startActiveSpan=function(e,n,r,i){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(s=n,o=r):(s=n,a=r,o=i);var l=a??tS.active(),c=this.startSpan(e,s,l),d=nP(l,c);return tS.with(d,o,void 0,c)}},t}();function BPe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var qPe=new bre,GPe=function(){function t(e,n,r,i){this._provider=e,this.name=n,this.version=r,this.options=i}return t.prototype.startSpan=function(e,n,r){return this._getTracer().startSpan(e,n,r)},t.prototype.startActiveSpan=function(e,n,r,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):qPe},t}(),KPe=function(){function t(){}return t.prototype.getTracer=function(e,n,r){return new bre},t}(),ZPe=new KPe,A$=function(){function t(){}return t.prototype.getTracer=function(e,n,r){var i;return(i=this.getDelegateTracer(e,n,r))!==null&&i!==void 0?i:new GPe(this,e,n,r)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:ZPe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,n,r)},t}(),b5;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(b5||(b5={}));var YT;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(YT||(YT={}));var JT;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(JT||(JT={}));var ph=Sy.getInstance(),cn=zd.instance(),zPe=function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t}(),rP=XM("OpenTelemetry Baggage Key");function Ere(t){return t.getValue(rP)||void 0}function WPe(){return Ere(Sy.getInstance().active())}function YPe(t,e){return t.setValue(rP,e)}function JPe(t){return t.deleteValue(rP)}var nS="propagation",QPe=new zPe,XPe=function(){function t(){this.createBaggage=kPe,this.getBaggage=Ere,this.getActiveBaggage=WPe,this.setBaggage=YPe,this.deleteBaggage=JPe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return by(nS,e,zd.instance())},t.prototype.inject=function(e,n,r){return r===void 0&&(r=xPe),this._getGlobalPropagator().inject(e,n,r)},t.prototype.extract=function(e,n,r){return r===void 0&&(r=IPe),this._getGlobalPropagator().extract(e,n,r)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Ey(nS,zd.instance())},t.prototype._getGlobalPropagator=function(){return ym(nS)||QPe},t}(),x0=XPe.getInstance(),rS="trace",eLe=function(){function t(){this._proxyTracerProvider=new A$,this.wrapSpanContext=VPe,this.isSpanContextValid=wy,this.deleteSpan=UPe,this.getSpan=tP,this.getActiveSpan=DPe,this.getSpanContext=_re,this.setSpan=nP,this.setSpanContext=FPe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=by(rS,this._proxyTracerProvider,zd.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return ym(rS)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){Ey(rS,zd.instance()),this._proxyTracerProvider=new A$},t}(),Oo=eLe.getInstance();const iS={trace:Oo},Sre=XM("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function tLe(t){return t.setValue(Sre,!0)}function iP(t){return t.getValue(Sre)===!0}const nLe="=",QT=";",XT=",",sS="baggage",rLe=180,iLe=4096,sLe=8192;function aLe(t){return t.reduce((e,n)=>{const r=`${e}${e!==""?XT:""}${n}`;return r.length>sLe?e:r},"")}function oLe(t){return t.getAllEntries().map(([e,n])=>{let r=`${encodeURIComponent(e)}=${encodeURIComponent(n.value)}`;return n.metadata!==void 0&&(r+=QT+n.metadata.toString()),r})}function lLe(t){const e=t.split(QT);if(e.length<=0)return;const n=e.shift();if(!n)return;const r=n.indexOf(nLe);if(r<=0)return;const i=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());let a;return e.length>0&&(a=TPe(e.join(QT))),{key:i,value:s,metadata:a}}class cLe{inject(e,n,r){const i=x0.getBaggage(e);if(!i||iP(e))return;const s=oLe(i).filter(o=>o.length<=iLe).slice(0,rLe),a=aLe(s);a.length>0&&r.set(n,sS,a)}extract(e,n,r){const i=r.get(n,sS),s=Array.isArray(i)?i.join(XT):i;if(!s)return e;const a={};return s.length===0||(s.split(XT).forEach(l=>{const c=lLe(l);if(c){const d={value:c.value};c.metadata&&(d.metadata=c.metadata),a[c.key]=d}}),Object.entries(a).length===0)?e:x0.setBaggage(e,x0.createBaggage(a))}fields(){return[sS]}}function s6(t){const e={};if(typeof t!="object"||t==null)return e;for(const[n,r]of Object.entries(t)){if(!uLe(n)){cn.warn(`Invalid attribute key: ${n}`);continue}if(!wre(r)){cn.warn(`Invalid attribute value set for key: ${n}`);continue}Array.isArray(r)?e[n]=r.slice():e[n]=r}return e}function uLe(t){return typeof t=="string"&&t.length>0}function wre(t){return t==null?!0:Array.isArray(t)?dLe(t):kre(t)}function dLe(t){let e;for(const n of t)if(n!=null){if(!e){if(kre(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}function kre(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function hLe(){return t=>{cn.error(fLe(t))}}function fLe(t){return typeof t=="string"?t:JSON.stringify(mLe(t))}function mLe(t){const e={};let n=t;for(;n!==null;)Object.getOwnPropertyNames(n).forEach(r=>{if(e[r])return;const i=n[r];i&&(e[r]=String(i))}),n=Object.getPrototypeOf(n);return e}let pLe=hLe();function sP(t){try{pLe(t)}catch{}}const U2=performance,gLe="2.0.1",aS="exception.message",vLe="exception.stacktrace",oS="exception.type",Tre="service.name",eR="telemetry.sdk.language",yLe="webjs",tR="telemetry.sdk.name",nR="telemetry.sdk.version",_Le="process.runtime.name",lS={[tR]:"opentelemetry",[_Le]:"browser",[eR]:yLe,[nR]:gLe},CLe=9,bLe=6,ELe=Math.pow(10,bLe),E5=Math.pow(10,CLe);function f2(t){const e=t/1e3,n=Math.trunc(e),r=Math.round(t%1e3*ELe);return[n,r]}function Rre(){let t=U2.timeOrigin;if(typeof t!="number"){const e=U2;t=e.timing&&e.timing.fetchStart}return t}function SLe(t){const e=f2(Rre()),n=f2(typeof t=="number"?t:U2.now());return xre(e,n)}function wLe(t,e){let n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=E5),[n,r]}function kLe(t){return t[0]*E5+t[1]}function N$(t){return t[0]*1e3+t[1]/1e6}function cS(t){return t[0]*1e6+t[1]/1e3}function Ire(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function D$(t){return Ire(t)||typeof t=="number"||t instanceof Date}function xre(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=E5&&(n[1]-=E5,n[0]+=1),n}var Tl;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Tl||(Tl={}));class TLe{constructor(e={}){Oe(this,"_propagators");Oe(this,"_fields");this._propagators=e.propagators??[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,r)=>n.concat(r),[])))}inject(e,n,r){for(const i of this._propagators)try{i.inject(e,n,r)}catch(s){cn.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(e,n,r){return this._propagators.reduce((i,s)=>{try{return s.extract(i,n,r)}catch(a){cn.warn(`Failed to extract with ${s.constructor.name}. Err: ${a.message}`)}return i},e)}fields(){return this._fields.slice()}}const rR="[_0-9a-z-*/]",RLe=`[a-z]${rR}{0,255}`,ILe=`[a-z0-9]${rR}{0,240}@[a-z]${rR}{0,13}`,xLe=new RegExp(`^(?:${RLe}|${ILe})$`),MLe=/^[ -~]{0,255}[!-~]$/,PLe=/,|=/;function LLe(t){return xLe.test(t)}function OLe(t){return MLe.test(t)&&!PLe.test(t)}const U$=32,ALe=512,F$=",",j$="=";class aP{constructor(e){Oe(this,"_internalState",new Map);e&&this._parse(e)}set(e,n){const r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,n),r}unset(e){const n=this._clone();return n._internalState.delete(e),n}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,n)=>(e.push(n+j$+this.get(n)),e),[]).join(F$)}_parse(e){e.length>ALe||(this._internalState=e.split(F$).reverse().reduce((n,r)=>{const i=r.trim(),s=i.indexOf(j$);if(s!==-1){const a=i.slice(0,s),o=i.slice(s+1,r.length);LLe(a)&&OLe(o)&&n.set(a,o)}return n},new Map),this._internalState.size>U$&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,U$))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new aP;return e._internalState=new Map(this._internalState),e}}const uS="traceparent",dS="tracestate",NLe="00",DLe="(?!ff)[\\da-f]{2}",ULe="(?![0]{32})[\\da-f]{32}",FLe="(?![0]{16})[\\da-f]{16}",jLe="[\\da-f]{2}",HLe=new RegExp(`^\\s?(${DLe})-(${ULe})-(${FLe})-(${jLe})(-.*)?\\s?$`);function $Le(t){const e=HLe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}class VLe{inject(e,n,r){const i=Oo.getSpanContext(e);if(!i||iP(e)||!wy(i))return;const s=`${NLe}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||fu.NONE).toString(16)}`;r.set(n,uS,s),i.traceState&&r.set(n,dS,i.traceState.serialize())}extract(e,n,r){const i=r.get(n,uS);if(!i)return e;const s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;const a=$Le(s);if(!a)return e;a.isRemote=!0;const o=r.get(n,dS);if(o){const l=Array.isArray(o)?o.join(","):o;a.traceState=new aP(typeof l=="string"?l:void 0)}return Oo.setSpanContext(e,a)}fields(){return[uS,dS]}}const BLe="[object Object]",qLe="[object Null]",GLe="[object Undefined]",KLe=Function.prototype,Mre=KLe.toString,ZLe=Mre.call(Object),zLe=Object.getPrototypeOf,Pre=Object.prototype,Lre=Pre.hasOwnProperty,Y1=Symbol?Symbol.toStringTag:void 0,Ore=Pre.toString;function H$(t){if(!WLe(t)||YLe(t)!==BLe)return!1;const e=zLe(t);if(e===null)return!0;const n=Lre.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Mre.call(n)===ZLe}function WLe(t){return t!=null&&typeof t=="object"}function YLe(t){return t==null?t===void 0?GLe:qLe:Y1&&Y1 in Object(t)?JLe(t):QLe(t)}function JLe(t){const e=Lre.call(t,Y1),n=t[Y1];let r=!1;try{t[Y1]=void 0,r=!0}catch{}const i=Ore.call(t);return r&&(e?t[Y1]=n:delete t[Y1]),i}function QLe(t){return Ore.call(t)}const XLe=20;function eOe(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=Are(e,t.shift(),0,n);return e}function hS(t){return S5(t)?t.slice():t}function Are(t,e,n=0,r){let i;if(!(n>XLe)){if(n++,a6(t)||a6(e)||Nre(e))i=hS(e);else if(S5(t)){if(i=t.slice(),S5(e))for(let s=0,a=e.length;s<a;s++)i.push(hS(e[s]));else if(I3(e)){const s=Object.keys(e);for(let a=0,o=s.length;a<o;a++){const l=s[a];i[l]=hS(e[l])}}}else if(I3(t))if(I3(e)){if(!tOe(t,e))return e;i=Object.assign({},t);const s=Object.keys(e);for(let a=0,o=s.length;a<o;a++){const l=s[a],c=e[l];if(a6(c))typeof c>"u"?delete i[l]:i[l]=c;else{const d=i[l],f=c;if($$(t,l,r)||$$(e,l,r))delete i[l];else{if(I3(d)&&I3(f)){const p=r.get(d)||[],g=r.get(f)||[];p.push({obj:t,key:l}),g.push({obj:e,key:l}),r.set(d,p),r.set(f,g)}i[l]=Are(i[l],c,n,r)}}}}else i=e;return i}}function $$(t,e,n){const r=n.get(t[e])||[];for(let i=0,s=r.length;i<s;i++){const a=r[i];if(a.key===e&&a.obj===t)return!0}return!1}function S5(t){return Array.isArray(t)}function Nre(t){return typeof t=="function"}function I3(t){return!a6(t)&&!S5(t)&&!Nre(t)&&typeof t=="object"}function a6(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function tOe(t,e){return!(!H$(t)||!H$(e))}class nOe{constructor(){Oe(this,"_promise");Oe(this,"_resolve");Oe(this,"_reject");this._promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}class rOe{constructor(e,n){Oe(this,"_callback");Oe(this,"_that");Oe(this,"_isCalled",!1);Oe(this,"_deferred",new nOe);this._callback=e,this._that=n}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(n=>this._deferred.resolve(n),n=>this._deferred.reject(n))}catch(n){this._deferred.reject(n)}}return this._deferred.promise}}function iOe(t,e){return new Promise(n=>{ph.with(tLe(ph.active()),()=>{t.export(e,r=>{n(r)})})})}const sOe={_export:iOe};function aOe(){return"unknown_service"}const e0=t=>t!==null&&typeof t=="object"&&typeof t.then=="function";class w5{constructor(e){Oe(this,"_rawAttributes");Oe(this,"_asyncAttributesPending",!1);Oe(this,"_memoizedAttributes");const n=e.attributes??{};this._rawAttributes=Object.entries(n).map(([r,i])=>(e0(i)&&(this._asyncAttributesPending=!0),[r,i])),this._rawAttributes=V$(this._rawAttributes)}static FromAttributeList(e){const n=new w5({});return n._rawAttributes=V$(e),n._asyncAttributesPending=e.filter(([r,i])=>e0(i)).length>0,n}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){const[n,r]=this._rawAttributes[e];this._rawAttributes[e]=[n,e0(r)?await r:r]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&cn.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const e={};for(const[n,r]of this._rawAttributes){if(e0(r)){cn.debug(`Unsettled resource attribute ${n} skipped`);continue}r!=null&&(e[n]??(e[n]=r))}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}merge(e){return e==null?this:w5.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()])}}function Dre(t){return w5.FromAttributeList(Object.entries(t))}function oOe(){return Dre({[Tre]:aOe(),[eR]:lS[eR],[tR]:lS[tR],[nR]:lS[nR]})}function V$(t){return t.map(([e,n])=>e0(n)?[e,n.catch(r=>{cn.debug("promise rejection for resource attribute: %s - %s",e,r)})]:[e,n])}const lOe="exception";class cOe{constructor(e){Oe(this,"_spanContext");Oe(this,"kind");Oe(this,"parentSpanContext");Oe(this,"attributes",{});Oe(this,"links",[]);Oe(this,"events",[]);Oe(this,"startTime");Oe(this,"resource");Oe(this,"instrumentationScope");Oe(this,"_droppedAttributesCount",0);Oe(this,"_droppedEventsCount",0);Oe(this,"_droppedLinksCount",0);Oe(this,"name");Oe(this,"status",{code:JT.UNSET});Oe(this,"endTime",[0,0]);Oe(this,"_ended",!1);Oe(this,"_duration",[-1,-1]);Oe(this,"_spanProcessor");Oe(this,"_spanLimits");Oe(this,"_attributeValueLengthLimit");Oe(this,"_performanceStartTime");Oe(this,"_performanceOffset");Oe(this,"_startTimeProvided");const n=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=U2.now(),this._performanceOffset=n-(this._performanceStartTime+Rre()),this._startTimeProvided=e.startTime!=null,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime(e.startTime??n),this.resource=e.resource,this.instrumentationScope=e.scope,e.attributes!=null&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}spanContext(){return this._spanContext}setAttribute(e,n){if(n==null||this._isSpanEnded())return this;if(e.length===0)return cn.warn(`Invalid attribute key: ${e}`),this;if(!wre(n))return cn.warn(`Invalid attribute value set for key: ${e}`),this;const{attributeCountLimit:r}=this._spanLimits;return r!==void 0&&Object.keys(this.attributes).length>=r&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(n),this)}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r);return this}addEvent(e,n,r){if(this._isSpanEnded())return this;const{eventCountLimit:i}=this._spanLimits;if(i===0)return cn.warn("No events allowed."),this._droppedEventsCount++,this;i!==void 0&&this.events.length>=i&&(this._droppedEventsCount===0&&cn.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),D$(n)&&(D$(r)||(r=n),n=void 0);const s=s6(n);return this.events.push({name:e,attributes:s,time:this._getTime(r),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status={...e},this.status.message!=null&&typeof e.message!="string"&&(cn.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){cn.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(e),this._duration=wLe(this.startTime,this.endTime),this._duration[0]<0&&(cn.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&cn.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e=="number"&&e<=U2.now())return SLe(e+this._performanceOffset);if(typeof e=="number")return f2(e);if(e instanceof Date)return f2(e.getTime());if(Ire(e))return e;if(this._startTimeProvided)return f2(Date.now());const n=U2.now()-this._performanceStartTime;return xre(this.startTime,f2(n))}isRecording(){return this._ended===!1}recordException(e,n){const r={};typeof e=="string"?r[aS]=e:e&&(e.code?r[oS]=e.code.toString():e.name&&(r[oS]=e.name),e.message&&(r[aS]=e.message),e.stack&&(r[vLe]=e.stack)),r[oS]||r[aS]?this.addEvent(lOe,r,n):cn.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);cn.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)}return this._ended}_truncateToLimitUtil(e,n){return e.length<=n?e:e.substring(0,n)}_truncateToSize(e){const n=this._attributeValueLengthLimit;return n<=0?(cn.warn(`Attribute value limit must be positive, got ${n}`),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(r=>typeof r=="string"?this._truncateToLimitUtil(r,n):r):e}}var _m;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(_m||(_m={}));class k5{shouldSample(){return{decision:_m.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class F2{shouldSample(){return{decision:_m.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class Av{constructor(e){Oe(this,"_root");Oe(this,"_remoteParentSampled");Oe(this,"_remoteParentNotSampled");Oe(this,"_localParentSampled");Oe(this,"_localParentNotSampled");this._root=e.root,this._root||(sP(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new F2),this._remoteParentSampled=e.remoteParentSampled??new F2,this._remoteParentNotSampled=e.remoteParentNotSampled??new k5,this._localParentSampled=e.localParentSampled??new F2,this._localParentNotSampled=e.localParentNotSampled??new k5}shouldSample(e,n,r,i,s,a){const o=Oo.getSpanContext(e);return!o||!wy(o)?this._root.shouldSample(e,n,r,i,s,a):o.isRemote?o.traceFlags&fu.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,i,s,a):this._remoteParentNotSampled.shouldSample(e,n,r,i,s,a):o.traceFlags&fu.SAMPLED?this._localParentSampled.shouldSample(e,n,r,i,s,a):this._localParentNotSampled.shouldSample(e,n,r,i,s,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class B${constructor(e=0){Oe(this,"_ratio");Oe(this,"_upperBound");this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,n){return{decision:Cre(n)&&this._accumulate(n)<this._upperBound?_m.RECORD_AND_SAMPLED:_m.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let n=0;for(let r=0;r<e.length/8;r++){const i=r*8,s=parseInt(e.slice(i,i+8),16);n=(n^s)>>>0}return n}}const q$=1;function Ure(){return{sampler:Fre(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function Fre(){const t="parentbased_always_on";switch(t){case"always_on":return new F2;case"always_off":return new k5;case"parentbased_always_on":return new Av({root:new F2});case"parentbased_always_off":return new Av({root:new k5});case"traceidratio":return new B$(G$());case"parentbased_traceidratio":return new Av({root:new B$(G$())});default:return cn.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "parentbased_always_on".`),new Av({root:new F2})}}function G$(){return cn.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${q$}.`),q$}const uOe=128,dOe=1/0;function hOe(t){const e={sampler:Fre()},n=Ure(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}function fOe(t){var n,r,i,s;const e=Object.assign({},t.spanLimits);return e.attributeCountLimit=((n=t.spanLimits)==null?void 0:n.attributeCountLimit)??((r=t.generalLimits)==null?void 0:r.attributeCountLimit)??void 0??void 0??uOe,e.attributeValueLengthLimit=((i=t.spanLimits)==null?void 0:i.attributeValueLengthLimit)??((s=t.generalLimits)==null?void 0:s.attributeValueLengthLimit)??void 0??void 0??dOe,Object.assign({},t,{spanLimits:e})}const mOe=8,pOe=16;class gOe{constructor(){Oe(this,"generateTraceId",K$(pOe));Oe(this,"generateSpanId",K$(mOe))}}const Nv=Array(32);function K$(t){return function(){for(let n=0;n<t*2;n++)Nv[n]=Math.floor(Math.random()*16)+48,Nv[n]>=58&&(Nv[n]+=39);return String.fromCharCode.apply(null,Nv.slice(0,t*2))}}class vOe{constructor(e,n,r,i){Oe(this,"_sampler");Oe(this,"_generalLimits");Oe(this,"_spanLimits");Oe(this,"_idGenerator");Oe(this,"instrumentationScope");Oe(this,"_resource");Oe(this,"_spanProcessor");const s=hOe(n);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=n.idGenerator||new gOe,this._resource=r,this._spanProcessor=i,this.instrumentationScope=e}startSpan(e,n={},r=ph.active()){n.root&&(r=Oo.deleteSpan(r));const i=Oo.getSpan(r);if(iP(r))return cn.debug("Instrumentation suppressed, returning Noop Span"),Oo.wrapSpanContext(yre);const s=i==null?void 0:i.spanContext(),a=this._idGenerator.generateSpanId();let o,l,c;!s||!Oo.isSpanContextValid(s)?l=this._idGenerator.generateTraceId():(l=s.traceId,c=s.traceState,o=s);const d=n.kind??YT.INTERNAL,f=(n.links??[]).map(S=>({context:S.context,attributes:s6(S.attributes)})),p=s6(n.attributes),g=this._sampler.shouldSample(r,l,e,d,p,f);c=g.traceState??c;const y=g.decision===b5.RECORD_AND_SAMPLED?fu.SAMPLED:fu.NONE,v={traceId:l,spanId:a,traceFlags:y,traceState:c};if(g.decision===b5.NOT_RECORD)return cn.debug("Recording is off, propagating context in a non-recording span"),Oo.wrapSpanContext(v);const b=s6(Object.assign(p,g.attributes));return new cOe({resource:this._resource,scope:this.instrumentationScope,context:r,spanContext:v,name:e,kind:d,links:f,parentSpanContext:o,attributes:b,startTime:n.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,n,r,i){let s,a,o;if(arguments.length<2)return;arguments.length===2?o=n:arguments.length===3?(s=n,o=r):(s=n,a=r,o=i);const l=a??ph.active(),c=this.startSpan(e,s,l),d=Oo.setSpan(l,c);return ph.with(d,o,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class yOe{constructor(e){Oe(this,"_spanProcessors");this._spanProcessors=e}forceFlush(){const e=[];for(const n of this._spanProcessors)e.push(n.forceFlush());return new Promise(n=>{Promise.all(e).then(()=>{n()}).catch(r=>{sP(r||new Error("MultiSpanProcessor: forceFlush failed")),n()})})}onStart(e,n){for(const r of this._spanProcessors)r.onStart(e,n)}onEnd(e){for(const n of this._spanProcessors)n.onEnd(e)}shutdown(){const e=[];for(const n of this._spanProcessors)e.push(n.shutdown());return new Promise((n,r)=>{Promise.all(e).then(()=>{n()},r)})}}var J1;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(J1||(J1={}));class _Oe{constructor(e={}){Oe(this,"_config");Oe(this,"_tracers",new Map);Oe(this,"_resource");Oe(this,"_activeSpanProcessor");var i;const n=eOe({},Ure(),fOe(e));this._resource=n.resource??oOe(),this._config=Object.assign({},n,{resource:this._resource});const r=[];(i=e.spanProcessors)!=null&&i.length&&r.push(...e.spanProcessors),this._activeSpanProcessor=new yOe(r)}getTracer(e,n,r){const i=`${e}@${n||""}:${(r==null?void 0:r.schemaUrl)||""}`;return this._tracers.has(i)||this._tracers.set(i,new vOe({name:e,version:n,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(i)}forceFlush(){const e=this._config.forceFlushTimeoutMillis,n=this._activeSpanProcessor._spanProcessors.map(r=>new Promise(i=>{let s;const a=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${e} ms`)),s=J1.timeout},e);r.forceFlush().then(()=>{clearTimeout(a),s!==J1.timeout&&(s=J1.resolved,i(s))}).catch(o=>{clearTimeout(a),s=J1.error,i(o)})}));return new Promise((r,i)=>{Promise.all(n).then(s=>{const a=s.filter(o=>o!==J1.resolved);a.length>0?i(a):r()}).catch(s=>i([s]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}class COe{constructor(e){Oe(this,"_exporter");Oe(this,"_shutdownOnce");Oe(this,"_pendingExports");this._exporter=e,this._shutdownOnce=new rOe(this._shutdown,this),this._pendingExports=new Set}async forceFlush(){await Promise.all(Array.from(this._pendingExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(e,n){}onEnd(e){if(this._shutdownOnce.isCalled||(e.spanContext().traceFlags&fu.SAMPLED)===0)return;const n=this._doExport(e).catch(r=>sP(r));this._pendingExports.add(n),n.finally(()=>this._pendingExports.delete(n))}async _doExport(e){var r,i;e.resource.asyncAttributesPending&&await((i=(r=e.resource).waitForAsyncAttributes)==null?void 0:i.call(r));const n=await sOe._export(this._exporter,[e]);if(n.code!==Tl.SUCCESS)throw n.error??new Error(`SimpleSpanProcessor: span export failed (status ${n})`)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class bOe{constructor(e){Oe(this,"_delegate");this._delegate=e}export(e,n){this._delegate.export(e,n)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}class Z$ extends Error{constructor(n,r,i){super(n);Oe(this,"code");Oe(this,"name","OTLPExporterError");Oe(this,"data");this.data=i,this.code=r}}function EOe(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function SOe(t){if(t!=null)return()=>t}function wOe(t,e,n){return{timeoutMillis:EOe(t.timeoutMillis??e.timeoutMillis??n.timeoutMillis),concurrencyLimit:t.concurrencyLimit??e.concurrencyLimit??n.concurrencyLimit,compression:t.compression??e.compression??n.compression}}function kOe(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}class TOe{constructor(e){Oe(this,"_concurrencyLimit");Oe(this,"_sendingPromises",[]);this._concurrencyLimit=e}pushPromise(e){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);const n=()=>{const r=this._sendingPromises.indexOf(e);this._sendingPromises.splice(r,1)};e.then(n,n)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function ROe(t){return new TOe(t.concurrencyLimit)}function IOe(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}function xOe(){return{handleResponse(t){t==null||!IOe(t)||t.partialSuccess==null||Object.keys(t.partialSuccess).length===0||cn.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}}}class MOe{constructor(e,n,r,i,s){Oe(this,"_transport");Oe(this,"_serializer");Oe(this,"_responseHandler");Oe(this,"_promiseQueue");Oe(this,"_timeout");Oe(this,"_diagLogger");this._transport=e,this._serializer=n,this._responseHandler=r,this._promiseQueue=i,this._timeout=s,this._diagLogger=cn.createComponentLogger({namespace:"OTLPExportDelegate"})}export(e,n){if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){n({code:Tl.FAILED,error:new Error("Concurrent export limit reached")});return}const r=this._serializer.serializeRequest(e);if(r==null){n({code:Tl.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(r,this._timeout).then(i=>{if(i.status==="success"){if(i.data!=null)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(i.data))}catch(s){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",s,i.data)}n({code:Tl.SUCCESS});return}else if(i.status==="failure"&&i.error){n({code:Tl.FAILED,error:i.error});return}else i.status==="retryable"?n({code:Tl.FAILED,error:new Z$("Export failed with retryable status")}):n({code:Tl.FAILED,error:new Z$("Export failed with unknown error")})},i=>n({code:Tl.FAILED,error:i})))}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function POe(t,e){return new MOe(t.transport,t.serializer,xOe(),t.promiseHandler,e.timeout)}function jre(t,e,n){return POe({transport:n,serializer:e,promiseHandler:ROe(t)},{timeout:t.timeoutMillis})}function z$(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Hre(t){const e=new Uint8Array(t.length/2);let n=0;for(let r=0;r<t.length;r+=2){const i=z$(t.charCodeAt(r)),s=z$(t.charCodeAt(r+1));e[n++]=i<<4|s}return e}function $re(t){const e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function LOe(t){const e=Number(BigInt.asUintN(32,t)),n=Number(BigInt.asUintN(32,t>>BigInt(32)));return{low:e,high:n}}function OOe(t){const e=$re(t);return LOe(e)}function AOe(t){return $re(t).toString()}const NOe=typeof BigInt<"u"?AOe:kLe;function W$(t){return t}function DOe(t){if(t!==void 0)return Hre(t)}const UOe={encodeHrTime:OOe,encodeSpanContext:Hre,encodeOptionalSpanContext:DOe};function FOe(t){return t===void 0?UOe:{encodeHrTime:NOe,encodeSpanContext:W$,encodeOptionalSpanContext:W$}}function jOe(t){return{attributes:ky(t.attributes),droppedAttributesCount:0}}function HOe(t){return{name:t.name,version:t.version}}function ky(t){return Object.keys(t).map(e=>Vre(e,t[e]))}function Vre(t,e){return{key:t,value:Bre(e)}}function Bre(t){const e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(Bre)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(([n,r])=>Vre(n,r))}}:{}}function $Oe(t,e){var s,a,o;const n=t.spanContext(),r=t.status,i=(s=t.parentSpanContext)!=null&&s.spanId?e.encodeSpanContext((a=t.parentSpanContext)==null?void 0:a.spanId):void 0;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:i,traceState:(o=n.traceState)==null?void 0:o.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:ky(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(l=>BOe(l,e)),droppedEventsCount:t.droppedEventsCount,status:{code:r.code,message:r.message},links:t.links.map(l=>VOe(l,e)),droppedLinksCount:t.droppedLinksCount}}function VOe(t,e){var n;return{attributes:t.attributes?ky(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(n=t.context.traceState)==null?void 0:n.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function BOe(t,e){return{attributes:t.attributes?ky(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function qOe(t,e){const n=FOe(e);return{resourceSpans:KOe(t,n)}}function GOe(t){const e=new Map;for(const n of t){let r=e.get(n.resource);r||(r=new Map,e.set(n.resource,r));const i=`${n.instrumentationScope.name}@${n.instrumentationScope.version||""}:${n.instrumentationScope.schemaUrl||""}`;let s=r.get(i);s||(s=[],r.set(i,s)),s.push(n)}return e}function KOe(t,e){const n=GOe(t),r=[],i=n.entries();let s=i.next();for(;!s.done;){const[a,o]=s.value,l=[],c=o.values();let d=c.next();for(;!d.done;){const p=d.value;if(p.length>0){const g=p.map(y=>$Oe(y,e));l.push({scope:HOe(p[0].instrumentationScope),spans:g,schemaUrl:p[0].instrumentationScope.schemaUrl})}d=c.next()}const f={resource:jOe(a),scopeSpans:l,schemaUrl:void 0};r.push(f),s=i.next()}return r}const ZOe={serializeRequest:t=>{const e=qOe(t,{});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}},zOe=5,WOe=1e3,YOe=5e3,JOe=1.5,Y$=.2;function QOe(){return Math.random()*(2*Y$)-Y$}class XOe{constructor(e){Oe(this,"_transport");this._transport=e}retry(e,n,r){return new Promise((i,s)=>{setTimeout(()=>{this._transport.send(e,n).then(i,s)},r)})}async send(e,n){const r=Date.now()+n;let i=await this._transport.send(e,n),s=zOe,a=WOe;for(;i.status==="retryable"&&s>0;){s--;const o=Math.max(Math.min(a,YOe)+QOe(),0);a=a*JOe;const l=i.retryInMillis??o,c=r-Date.now();if(l>c)return i;i=await this.retry(e,c,l)}return i}shutdown(){return this._transport.shutdown()}}function qre(t){return new XOe(t.transport)}function eAe(t){return[429,502,503,504].includes(t)}function tAe(t){if(t==null)return;const e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;const n=new Date(t).getTime()-Date.now();return n>=0?n:0}class nAe{constructor(e){Oe(this,"_parameters");this._parameters=e}send(e,n){return new Promise(r=>{const i=new XMLHttpRequest;i.timeout=n,i.open("POST",this._parameters.url);const s=this._parameters.headers();Object.entries(s).forEach(([a,o])=>{i.setRequestHeader(a,o)}),i.ontimeout=a=>{r({status:"failure",error:new Error("XHR request timed out")})},i.onreadystatechange=()=>{i.status>=200&&i.status<=299?(cn.debug("XHR success"),r({status:"success"})):i.status&&eAe(i.status)?r({status:"retryable",retryInMillis:tAe(i.getResponseHeader("Retry-After"))}):i.status!==0&&r({status:"failure",error:new Error("XHR request failed with non-retryable status")})},i.onabort=()=>{r({status:"failure",error:new Error("XHR request aborted")})},i.onerror=()=>{r({status:"failure",error:new Error("XHR request errored")})},i.send(e)})}shutdown(){}}function rAe(t){return new nAe(t)}class iAe{constructor(e){Oe(this,"_params");this._params=e}send(e){return new Promise(n=>{navigator.sendBeacon(this._params.url,new Blob([e],{type:this._params.blobType}))?(cn.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})}shutdown(){}}function sAe(t){return new iAe(t)}function aAe(t,e){return jre(t,e,qre({transport:rAe(t)}))}function oAe(t,e){return jre(t,e,qre({transport:sAe({url:t.url,blobType:t.headers()["Content-Type"]})}))}function lAe(t){return()=>{const e={};return Object.entries((t==null?void 0:t())??{}).forEach(([n,r])=>{typeof r<"u"?e[n]=String(r):cn.warn(`Header "${n}" has invalid value (${r}) and will be ignored`)}),e}}function cAe(t,e,n){const r={...n()},i={};return()=>(e!=null&&Object.assign(i,e()),t!=null&&Object.assign(i,t()),Object.assign(i,r))}function uAe(t){if(t!=null)try{return new URL(t),t}catch{throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function dAe(t,e,n){return{...wOe(t,e,n),headers:cAe(lAe(t.headers),e.headers,n.headers),url:uAe(t.url)??e.url??n.url,agentOptions:t.agentOptions??e.agentOptions??n.agentOptions}}function hAe(t,e){return{...kOe(),headers:()=>t,url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}}}function fAe(t,e,n){return dAe({url:t.url,timeoutMillis:t.timeoutMillis,headers:SOe(t.headers),concurrencyLimit:t.concurrencyLimit},{},hAe(n,e))}function mAe(t,e,n,r){const i=!!t.headers||typeof navigator.sendBeacon!="function",s=fAe(t,n,r);return i?aAe(s,e):oAe(s,e)}class pAe extends bOe{constructor(e={}){super(mAe(e,ZOe,"v1/traces",{"Content-Type":"application/json"}))}}class gAe{constructor(){Oe(this,"_enabled",!1);Oe(this,"_currentContext",n2)}_bindFunction(e=n2,n){const r=this,i=function(...s){return r.with(e,()=>n.apply(this,s))};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),i}active(){return this._currentContext}bind(e,n){return e===void 0&&(e=this.active()),typeof n=="function"?this._bindFunction(e,n):n}disable(){return this._currentContext=n2,this._enabled=!1,this}enable(){return this._enabled?this:(this._enabled=!0,this._currentContext=n2,this)}with(e,n,r,...i){const s=this._currentContext;this._currentContext=e||n2;try{return n.call(r,...i)}finally{this._currentContext=s}}}function vAe(t){if(t!==null){if(t===void 0){const e=new gAe;e.enable(),ph.setGlobalContextManager(e);return}t.enable(),ph.setGlobalContextManager(t)}}function yAe(t){if(t!==null){if(t===void 0){x0.setGlobalPropagator(new TLe({propagators:[new VLe,new cLe]}));return}x0.setGlobalPropagator(t)}}class _Ae extends _Oe{constructor(e={}){super(e)}register(e={}){Oo.setGlobalTracerProvider(this),yAe(e.propagator),vAe(e.contextManager)}}function J$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(n),!0).forEach(function(r){de(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cg(t){return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e,n){return e&&Q$(t.prototype,e),n&&Q$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CAe(t,e){if(t==null)return{};var n,r,i=function(a,o){if(a==null)return{};var l,c,d={},f=Object.keys(a);for(c=0;c<f.length;c++)l=f[c],o.indexOf(l)>=0||(d[l]=a[l]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function es(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,o=[],l=!0,c=!1;try{for(i=i.call(n);!(l=(s=i.next()).done)&&(o.push(s.value),!r||o.length!==r);l=!0);}catch(d){c=!0,a=d}finally{try{l||i.return==null||i.return()}finally{if(c)throw a}}return o}}(t,e)||oP(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jc(t){return function(e){if(Array.isArray(e))return iR(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||oP(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oP(t,e){if(t){if(typeof t=="string")return iR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iR(t,e):void 0}}function iR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=oP(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||n.return==null||n.return()}finally{if(o)throw s}}}}var La={DEBUG:!1,LIB_VERSION:"1.160.3"},bAe=Array.isArray,Gre=Object.prototype,Kre=Gre.hasOwnProperty,Ty=Gre.toString,qr=bAe||function(t){return Ty.call(t)==="[object Array]"},$a=function(t){return typeof t=="function"},wi=function(t){return t===Object(t)&&!qr(t)},o6=function(t){if(wi(t)){for(var e in t)if(Kre.call(t,e))return!1;return!0}return!1},rt=function(t){return t===void 0},Vi=function(t){return Ty.call(t)=="[object String]"},X$=function(t){return Vi(t)&&t.trim().length===0},yu=function(t){return t===null},Ds=function(t){return rt(t)||yu(t)},Oa=function(t){return Ty.call(t)=="[object Number]"},nh=function(t){return Ty.call(t)==="[object Boolean]"},EAe=function(t){return t instanceof FormData},ie=typeof window<"u"?window:void 0,Ps=typeof globalThis<"u"?globalThis:ie,Zre=Array.prototype,eV=Zre.forEach,tV=Zre.indexOf,jo=Ps==null?void 0:Ps.navigator,Ve=Ps==null?void 0:Ps.document,Ss=Ps==null?void 0:Ps.location,sR=Ps==null?void 0:Ps.fetch,aR=Ps!=null&&Ps.XMLHttpRequest&&"withCredentials"in new Ps.XMLHttpRequest?Ps.XMLHttpRequest:void 0,nV=Ps==null?void 0:Ps.AbortController,ri=jo==null?void 0:jo.userAgent,qn=ie??{},rV="[PostHog.js]",fe={_log:function(t){if(ie&&(La.DEBUG||qn.POSTHOG_DEBUG)&&!rt(ie.console)&&ie.console){for(var e=("__rrweb_original__"in ie.console[t])?ie.console[t].__rrweb_original__:ie.console[t],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,[rV].concat(r))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).error.apply(t,[rV].concat(n))},uninitializedWarning:function(t){fe.error("You must initialize PostHog before calling ".concat(t))}},T5={},Ry=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function j2(t,e,n){if(qr(t)){if(eV&&t.forEach===eV)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===T5)return}}}function yn(t,e,n){if(!Ds(t)){if(qr(t))return j2(t,e,n);if(EAe(t)){var r,i=eo(t.entries());try{for(i.s();!(r=i.n()).done;){var s=r.value;if(e.call(n,s[1],s[0])===T5)return}}catch(o){i.e(o)}finally{i.f()}}else for(var a in t)if(Kre.call(t,a)&&e.call(n,t[a],a)===T5)return}}var ts=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return j2(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t};function Lt(t,e){return t.indexOf(e)!==-1}function l6(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var zre=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},iV=function(t){try{return t()}catch{return}},SAe=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){fe.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),fe.critical(i)}}},oR=function(t){var e={};return yn(t,function(n,r){Vi(n)&&n.length>0&&(e[r]=n)}),e},lR=function(t){return t.replace(/^\$/,"")};function wAe(t,e){return n=t,r=function(s){return Vi(s)&&!yu(e)?s.slice(0,e):s},i=new Set,function s(a,o){return a!==Object(a)?r?r(a,o):a:i.has(a)?void 0:(i.add(a),qr(a)?(l=[],j2(a,function(c){l.push(s(c))})):(l={},yn(a,function(c,d){i.has(c)||(l[d]=s(c,d))})),l);var l}(n);var n,r,i}var Uo,kAe=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var a=t.charCodeAt(i),o=null;a<128?n++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),yu(o)||(n>e&&(s+=t.substring(e,n)),s+=o,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},Uc=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,s){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!s);else{var a="on"+n,o=e[a];e[a]=function(l,c,d){return function(f){if(f=f||t(ie==null?void 0:ie.event)){var p,g=!0;$a(d)&&(p=d(f));var y=c.call(l,f);return p!==!1&&y!==!1||(g=!1),g}}}(e,r,o)}else fe.error("No valid element provided to register_event")}}();function Wre(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(Uo||(Uo={}));var Yre="$people_distinct_id",t0="__alias",n0="__timers",sV="$autocapture_disabled_server_side",cR="$heatmaps_enabled_server_side",aV="$exception_capture_enabled_server_side",oV="$exception_capture_endpoint_suffix",lV="$web_vitals_enabled_server_side",uR="$session_recording_enabled_server_side",cV="$console_log_recording_enabled_server_side",uV="$session_recording_network_payload_capture",dV="$session_recording_canvas_recording",hV="$replay_sample_rate",fV="$replay_minimum_duration",R5="$sesid",M0="$session_is_sampled",m2="$enabled_feature_flags",dR="$early_access_features",p2="$stored_person_properties",ld="$stored_group_properties",hR="$surveys",Dv="$surveys_activated",I5="$flag_call_reported",kc="$user_state",fR="$client_session_props",mR="$capture_rate_limit",pR="$initial_campaign_params",gR="$initial_referrer_info",mV="$initial_person_info",x5="$epp",vR="__POSTHOG_TOOLBAR__",TAe=[Yre,t0,"__cmpns",n0,uR,cR,R5,m2,kc,dR,ld,p2,hR,I5,fR,mR,pR,gR,x5],fS="$active_feature_flags",Uv="$override_feature_flags",pV="$feature_flag_payloads",gV=function(t){var e,n={},r=eo(l6(t||{}));try{for(r.s();!(e=r.n()).done;){var i=es(e.value,2),s=i[0],a=i[1];a&&(n[s]=a)}}catch(o){r.e(o)}finally{r.f()}return n},RAe=function(){function t(e){Jt(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Qt(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(m2),n=this.instance.get_property(Uv);if(!n)return e||{};for(var r=ts({},e),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this._override_warning||(fe.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(pV)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,r=this.instance.get_property(p2),i=this.instance.get_property(ld),s={token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:s,compression:this.instance.config.disable_compression?void 0:Uo.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(a){var o;e.setReloadingPaused(!1);var l=!0;a.statusCode===200&&(e.$anon_distinct_id=void 0,l=!1),e.receivedFeatureFlags((o=a.json)!==null&&o!==void 0?o:{},l),e._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var r,i=this.getFlagVariants()[e],s="".concat(i),a=this.instance.get_property(I5)||{};return(n.send_event||!("send_event"in n))&&(!(e in a)||!a[e].includes(s))&&(qr(a[e])?a[e].push(s):a[e]=[s],(r=this.instance.persistence)===null||r===void 0||r.register(de({},I5,a)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}fe.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);fe.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(n){return n!==e})}},{key:"receivedFeatureFlags",value:function(e,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads();(function(s,a){var o,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=s.featureFlags,f=s.featureFlagPayloads;if(d)if(qr(d)){var p,g={};if(d)for(var y=0;y<d.length;y++)g[d[y]]=!0;a&&a.register((de(p={},fS,d),de(p,m2,g),p))}else{var v=d,b=f;s.errorsWhileComputingFlags&&(v=Ue(Ue({},l),v),b=Ue(Ue({},c),b)),a&&a.register((de(o={},fS,Object.keys(gV(v))),de(o,m2,v||{}),de(o,pV,b||{}),o))}})(e,this.instance.persistence,r,i),this._fireFeatureFlagsCallbacks(n)}}},{key:"override",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return fe.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(Uv);else if(qr(e)){for(var r={},i=0;i<e.length;i++)r[e[i]]=!0;this.instance.persistence.register(de({},Uv,r))}else this.instance.persistence.register(de({},Uv,e))}},{key:"onFeatureFlags",value:function(e){var n=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var r=this._prepareFeatureFlagsForCallbacks(),i=r.flags,s=r.flagVariants;e(i,s)}return function(){return n.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){var r,i,s=de({},"$feature_enrollment/".concat(e),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:s}),this.setPersonPropertiesForFlags(s,!1);var a=Ue(Ue({},this.getFlagVariants()),{},de({},e,n));(r=this.instance.persistence)===null||r===void 0||r.register((de(i={},fS,Object.keys(gV(a))),de(i,m2,a),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(dR);if(i&&!r)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(s){var a;if(s.json){var o=s.json.earlyAccessFeatures;return(a=n.instance.persistence)===null||a===void 0||a.register(de({},dR,o)),e(o)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(function(r){return n[r]}),flagVariants:Object.keys(n).filter(function(r){return n[r]}).reduce(function(r,i){return r[i]=n[i],r},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(e){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;this.featureFlagEventHandlers.forEach(function(s){return s(r,i,{errorsLoading:e})})}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(p2)||{};this.instance.register(de({},p2,Ue(Ue({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(p2)}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(ld)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(function(i){r[i]=Ue(Ue({},r[i]),e[i]),delete e[i]}),this.instance.register(de({},ld,Ue(Ue({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var n=this.instance.get_property(ld)||{};this.instance.register(de({},ld,Ue(Ue({},n),{},de({},e,{}))))}else this.instance.unregister(ld)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Oa(t)&&isFinite(t)&&Math.floor(t)===t});var vV="0123456789abcdef",IAe=function(){function t(e){if(Jt(this,t),this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}return Qt(t,[{key:"toString",value:function(){for(var e="",n=0;n<this.bytes.length;n++)e=e+vV.charAt(this.bytes[n]>>>4)+vV.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(e){return this.compareTo(e)===0}},{key:"compareTo",value:function(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new t(s)}}]),t}(),xAe=function(){function t(){Jt(this,t),de(this,"timestamp",0),de(this,"counter",0),de(this,"random",new MAe)}return Qt(t,[{key:"generate",value:function(){var e=this.generateOrAbort();if(rt(e)){this.timestamp=0;var n=this.generateOrAbort();if(rt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return IAe.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),Jre=function(t){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};ie&&!rt(ie.crypto)&&crypto.getRandomValues&&(Jre=function(t){return crypto.getRandomValues(t)});var yV,MAe=function(){function t(){Jt(this,t),de(this,"buffer",new Uint32Array(8)),de(this,"cursor",1/0)}return Qt(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(Jre(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),_d=function(){return PAe().toString()},PAe=function(){return(yV||(yV=new xAe)).generate()},LAe="Thu, 01 Jan 1970 00:00:00 GMT",x3="",OAe=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function AAe(t,e){if(e){var n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve;if(x3)return x3;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var a=i.split("."),o=Math.min(a.length,8),l="dmn_chk_"+_d(),c=new RegExp("(^|;)\\s*"+l+"=1");!x3&&o--;){var d=a.slice(o).join("."),f=l+"=1;domain=."+d;s.cookie=f,c.test(s.cookie)&&(s.cookie=f+";expires="+LAe,x3=d)}return x3}(t);if(!n){var r=function(i){var s=i.match(OAe);return s?s[0]:""}(t);r!==n&&fe.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var _i,Qc={is_supported:function(){return!!Ve},error:function(t){fe.error("cookieStore error: "+t)},get:function(t){if(Ve){try{for(var e=t+"=",n=Ve.cookie.split(";").filter(function(s){return s.length}),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Qc.get(t))||{}}catch{}return e},set:function(t,e,n,r,i){if(Ve)try{var s="",a="",o=AAe(Ve.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(a="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+o+a;return c.length>3686.4&&fe.warn("cookieStore warning: large cookie, len="+c.length),Ve.cookie=c,c}catch{return}},remove:function(t,e){try{Qc.set(t,"",-1,e)}catch{return}}},mS=null,Br={is_supported:function(){if(!yu(mS))return mS;var t=!0;if(rt(ie))t=!1;else try{var e="__mplssupport__";Br.set(e,"xyz"),Br.get(e)!=='"xyz"'&&(t=!1),Br.remove(e)}catch{t=!1}return t||fe.error("localStorage unsupported; falling back to cookie store"),mS=t,t},error:function(t){fe.error("localStorage error: "+t)},get:function(t){try{return ie==null?void 0:ie.localStorage.getItem(t)}catch(e){Br.error(e)}return null},parse:function(t){try{return JSON.parse(Br.get(t))||{}}catch{}return null},set:function(t,e){try{ie==null||ie.localStorage.setItem(t,JSON.stringify(e))}catch(n){Br.error(n)}},remove:function(t){try{ie==null||ie.localStorage.removeItem(t)}catch(e){Br.error(e)}}},NAe=["distinct_id",R5,M0,x5],Fv=Ue(Ue({},Br),{},{parse:function(t){try{var e={};try{e=Qc.parse(t)||{}}catch{}var n=ts(e,JSON.parse(Br.get(t)||"{}"));return Br.set(t,n),n}catch{}return null},set:function(t,e,n,r,i,s){try{Br.set(t,e,void 0,void 0,s);var a={};NAe.forEach(function(o){e[o]&&(a[o]=e[o])}),Object.keys(a).length&&Qc.set(t,a,n,r,i,s)}catch(o){Br.error(o)}},remove:function(t,e){try{ie==null||ie.localStorage.removeItem(t),Qc.remove(t,e)}catch(n){Br.error(n)}}}),jv={},DAe={is_supported:function(){return!0},error:function(t){fe.error("memoryStorage error: "+t)},get:function(t){return jv[t]||null},parse:function(t){return jv[t]||null},set:function(t,e){jv[t]=e},remove:function(t){delete jv[t]}},D1=null,Si={is_supported:function(){if(!yu(D1))return D1;if(D1=!0,rt(ie))D1=!1;else try{var t="__support__";Si.set(t,"xyz"),Si.get(t)!=='"xyz"'&&(D1=!1),Si.remove(t)}catch{D1=!1}return D1},error:function(t){fe.error("sessionStorage error: ",t)},get:function(t){try{return ie==null?void 0:ie.sessionStorage.getItem(t)}catch(e){Si.error(e)}return null},parse:function(t){try{return JSON.parse(Si.get(t))||null}catch{}return null},set:function(t,e){try{ie==null||ie.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Si.error(n)}},remove:function(t){try{ie==null||ie.sessionStorage.removeItem(t)}catch(e){Si.error(e)}}},UAe=["localhost","127.0.0.1"],P0=function(t){var e=Ve==null?void 0:Ve.createElement("a");return rt(e)?null:(e.href=t,e)},M5=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},FAe=function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",i=[];return yn(t,function(s,a){rt(s)||rt(a)||a==="undefined"||(e=encodeURIComponent(function(o){return o instanceof File}(s)?s.name:s.toString()),n=encodeURIComponent(a),i[i.length]=n+"="+e)}),i.join(r)},_V=function(t,e){for(var n,r=((t.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!qr(n)||n.length<2)return"";var a=n[1];try{a=decodeURIComponent(a)}catch{fe.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},P5=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},za="Mobile",L5="iOS",Al="Android",bg="Tablet",Qre=Al+" "+bg,Xre="iPad",eie="Apple",tie=eie+" Watch",Eg="Safari",Cm="BlackBerry",nie="Samsung",rie=nie+"Browser",iie=nie+" Internet",xd="Chrome",jAe=xd+" OS",sie=xd+" "+L5,lP="Internet Explorer",aie=lP+" "+za,cP="Opera",HAe=cP+" Mini",uP="Edge",oie="Microsoft "+uP,H2="Firefox",lie=H2+" "+L5,Sg="Nintendo",wg="PlayStation",$2="Xbox",cie=Al+" "+za,uie=za+" "+Eg,r0="Windows",yR=r0+" Phone",CV="Nokia",_R="Ouya",die="Generic",$Ae=die+" "+za.toLowerCase(),hie=die+" "+bg.toLowerCase(),CR="Konqueror",Yi="(\\d+(\\.\\d+)?)",pS=new RegExp("Version/"+Yi),VAe=new RegExp($2,"i"),BAe=new RegExp(wg+" \\w+","i"),qAe=new RegExp(Sg+" \\w+","i"),dP=new RegExp(Cm+"|PlayBook|BB10","i"),GAe={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},KAe=function(t,e){return e&&Lt(e,eie)||function(n){return Lt(n,Eg)&&!Lt(n,xd)&&!Lt(n,Al)}(t)},bV=function(t,e){return e=e||"",Lt(t," OPR/")&&Lt(t,"Mini")?HAe:Lt(t," OPR/")?cP:dP.test(t)?Cm:Lt(t,"IE"+za)||Lt(t,"WPDesktop")?aie:Lt(t,rie)?iie:Lt(t,uP)||Lt(t,"Edg/")?oie:Lt(t,"FBIOS")?"Facebook "+za:Lt(t,"UCWEB")||Lt(t,"UCBrowser")?"UC Browser":Lt(t,"CriOS")?sie:Lt(t,"CrMo")?xd:Lt(t,Al)&&Lt(t,Eg)?cie:Lt(t,xd)?xd:Lt(t,"FxiOS")?lie:Lt(t.toLowerCase(),CR.toLowerCase())?CR:KAe(t,e)?Lt(t,za)?uie:Eg:Lt(t,H2)?H2:Lt(t,"MSIE")||Lt(t,"Trident/")?lP:Lt(t,"Gecko")?H2:""},ZAe=(de(_i={},aie,[new RegExp("rv:"+Yi)]),de(_i,oie,[new RegExp(uP+"?\\/"+Yi)]),de(_i,xd,[new RegExp("("+xd+"|CrMo)\\/"+Yi)]),de(_i,sie,[new RegExp("CriOS\\/"+Yi)]),de(_i,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+Yi)]),de(_i,Eg,[pS]),de(_i,uie,[pS]),de(_i,cP,[new RegExp("(Opera|OPR)\\/"+Yi)]),de(_i,H2,[new RegExp(H2+"\\/"+Yi)]),de(_i,lie,[new RegExp("FxiOS\\/"+Yi)]),de(_i,CR,[new RegExp("Konqueror[:/]?"+Yi,"i")]),de(_i,Cm,[new RegExp(Cm+" "+Yi),pS]),de(_i,cie,[new RegExp("android\\s"+Yi,"i")]),de(_i,iie,[new RegExp(rie+"\\/"+Yi)]),de(_i,lP,[new RegExp("(rv:|MSIE )"+Yi)]),de(_i,"Mozilla",[new RegExp("rv:"+Yi)]),_i),EV=[[new RegExp($2+"; "+$2+" (.*?)[);]","i"),function(t){return[$2,t&&t[1]||""]}],[new RegExp(Sg,"i"),[Sg,""]],[new RegExp(wg,"i"),[wg,""]],[dP,[Cm,""]],[new RegExp(r0,"i"),function(t,e){if(/Phone/.test(e)||/WPDesktop/.test(e))return[yR,""];if(new RegExp(za).test(e)&&!/IEMobile\b/.test(e))return[r0+" "+za,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],i=GAe[r]||"";return/arm/i.test(e)&&(i="RT"),[r0,i]}return[r0,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(t){if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[L5,e.join(".")]}return[L5,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(t){var e="";return t&&t.length>=3&&(e=rt(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Al+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Al+")","i"),function(t){if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Al,e.join(".")]}return[Al,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(t){var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[jAe,""]],[/Linux|debian/i,["Linux",""]]],SV=function(t){return qAe.test(t)?Sg:BAe.test(t)?wg:VAe.test(t)?$2:new RegExp(_R,"i").test(t)?_R:new RegExp("("+yR+"|WPDesktop)","i").test(t)?yR:/iPad/.test(t)?Xre:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?tie:dP.test(t)?Cm:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(CV,"i").test(t)?CV:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(za).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Al:Qre:Al:new RegExp("(pda|"+za+")","i").test(t)?$Ae:new RegExp(bg,"i").test(t)&&!new RegExp(bg+" pc","i").test(t)?hie:""},Hv="https?://(.*)",zAe=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],ii={campaignParams:function(t){return Ve?this._campaignParamsFromUrl(Ve.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=zAe.concat(e||[]),r={};return yn(n,function(i){var s=_V(t,i);s&&(r[i]=s)}),r},_searchEngine:function(t){return t?t.search(Hv+"google.([^/?]*)")===0?"google":t.search(Hv+"bing.com")===0?"bing":t.search(Hv+"yahoo.com")===0?"yahoo":t.search(Hv+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=ii._searchEngine(t),n=e!="yahoo"?"q":"p",r={};if(!yu(e)){r.$search_engine=e;var i=Ve?_V(Ve.referrer,n):"";i.length&&(r.ph_keyword=i)}return r},searchInfo:function(){var t=Ve==null?void 0:Ve.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:bV,browserVersion:function(t,e){var n=bV(t,e),r=ZAe[n];if(rt(r))return null;for(var i=0;i<r.length;i++){var s=r[i],a=t.match(s);if(a)return parseFloat(a[a.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<EV.length;e++){var n=es(EV[e],2),r=n[0],i=n[1],s=r.exec(t),a=s&&($a(i)?i(s,t):i);if(a)return a}return["",""]},device:SV,deviceType:function(t){var e=SV(t);return e===Xre||e===Qre||e==="Kobo"||e==="Kindle Fire"||e===hie?bg:e===Sg||e===$2||e===wg||e===_R?"Console":e===tie?"Wearable":e?za:"Desktop"},referrer:function(){return(Ve==null?void 0:Ve.referrer)||"$direct"},referringDomain:function(){var t;return Ve!=null&&Ve.referrer&&((t=P0(Ve.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:Ss==null?void 0:Ss.href}},initialPersonPropsFromInfo:function(t){var e,n=t.r,r=t.u,i={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=P0(n))===null||e===void 0?void 0:e.host};if(r){i.$initial_current_url=r;var s=P0(r);i.$initial_host=s==null?void 0:s.host,i.$initial_pathname=s==null?void 0:s.pathname,yn(this._campaignParamsFromUrl(r),function(a,o){i["$initial_"+lR(o)]=a})}return n&&yn(this._searchInfoFromReferrer(n),function(a,o){i["$initial_"+lR(o)]=a}),i},properties:function(){if(!ri)return{};var t=es(ii.os(ri),2),e=t[0],n=t[1];return ts(oR({$os:e,$os_version:n,$browser:ii.browser(ri,navigator.vendor),$device:ii.device(ri),$device_type:ii.deviceType(ri)}),{$current_url:Ss==null?void 0:Ss.href,$host:Ss==null?void 0:Ss.host,$pathname:Ss==null?void 0:Ss.pathname,$raw_user_agent:ri.length>1e3?ri.substring(0,997)+"...":ri,$browser_version:ii.browserVersion(ri,navigator.vendor),$browser_language:ii.browserLanguage(),$screen_height:ie==null?void 0:ie.screen.height,$screen_width:ie==null?void 0:ie.screen.width,$viewport_height:ie==null?void 0:ie.innerHeight,$viewport_width:ie==null?void 0:ie.innerWidth,$lib:"web",$lib_version:La.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:zre()/1e3})},people_properties:function(){if(!ri)return{};var t=es(ii.os(ri),2),e=t[0],n=t[1];return ts(oR({$os:e,$os_version:n,$browser:ii.browser(ri,navigator.vendor)}),{$browser_version:ii.browserVersion(ri,navigator.vendor)})}},WAe=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],gS=function(){function t(e){Jt(this,t),this.config=e,this.props={},this.campaign_params_saved=!1,this.name=function(n){var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"}(e),this.storage=this.buildStorage(e),this.load(),e.debug&&fe.info("Persistence loaded",e.persistence,Ue({},this.props)),this.update_config(e,e),this.save()}return Qt(t,[{key:"buildStorage",value:function(e){WAe.indexOf(e.persistence.toLowerCase())===-1&&(fe.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Br.is_supported()?Br:n==="localstorage+cookie"&&Fv.is_supported()?Fv:n==="sessionstorage"&&Si.is_supported()?Si:n==="memory"?DAe:n==="cookie"?Qc:Fv.is_supported()?Fv:Qc}},{key:"properties",value:function(){var e={};return yn(this.props,function(n,r){if(r===m2&&wi(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/".concat(i[s])]=n[i[s]];else o=r,l=!1,(yu(a=TAe)?l:tV&&a.indexOf===tV?a.indexOf(o)!=-1:(yn(a,function(c){if(l||(l=c===o))return T5}),l))||(e[r]=n);var a,o,l}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=ts({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,r){var i=this;if(wi(e)){rt(n)&&(n="None"),this.expire_days=rt(r)?this.default_expiry:r;var s=!1;if(yn(e,function(a,o){i.props.hasOwnProperty(o)&&i.props[o]!==n||(i.props[o]=a,s=!0)}),s)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var r=this;if(wi(e)){this.expire_days=rt(n)?this.default_expiry:n;var i=!1;if(yn(e,function(s,a){e.hasOwnProperty(a)&&r.props[a]!==s&&(r.props[a]=s,i=!0)}),i)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(ii.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(ii.searchInfo())}},{key:"update_referrer_info",value:function(){this.register_once(ii.referrerInfo(),void 0)}},{key:"set_initial_person_info",value:function(){this.props[pR]||this.props[gR]||this.register_once(de({},mV,ii.initialPersonInfo()),void 0)}},{key:"get_referrer_info",value:function(){return oR({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var e=this,n={};yn([gR,pR],function(s){var a=e.props[s];a&&yn(a,function(o,l){n["$initial_"+lR(l)]=o})});var r=this.props[mV];if(r){var i=ii.initialPersonPropsFromInfo(r);ts(n,i)}return n}},{key:"safe_merge",value:function(e){return yn(this.props,function(n,r){r in e||(e[r]=n)}),e}},{key:"update_config",value:function(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var r=this.buildStorage(e),i=this.props;this.clear(),this.storage=r,this.props=i,this.save()}}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var r=this.props[n0]||{};r[e]=n,this.props[n0]=r,this.save()}},{key:"remove_event_timer",value:function(e){var n=(this.props[n0]||{})[e];return rt(n)||(delete this.props[n0][e],this.save()),n}},{key:"get_property",value:function(e){return this.props[e]}},{key:"set_property",value:function(e,n){this.props[e]=n,this.save()}}]),t}();function bR(t){return JSON.stringify(t,(e=[],function(n,r){if(wi(r)){for(;e.length>0&&e.at(-1)!==this;)e.pop();return e.includes(r)?"[Circular]":(e.push(r),r)}return r})).length;var e}var YAe=2,JAe=4;function ER(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),r=t.data.slice(0,n),i=t.data.slice(n);return[ER({size:bR(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),ER({size:bR(i),data:i,sessionId:t.sessionId,windowId:t.windowId})].flatMap(function(s){return s})}return[t]}var c6=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(c6||{}),yc=function(t){return t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t}(yc||{});function hP(t){return t?Ry(t).split(/\s+/):[]}function wV(t){var e=ie==null?void 0:ie.location.href;return!!(e&&t&&t.some(function(n){return e.match(n)}))}function O5(t){var e="";switch(Cg(t.className)){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return hP(e)}function fie(t){return Ds(t)?null:Ry(t).split(/(\s+)/).filter(function(e){return V2(e)}).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function A5(t){var e="";return wR(t)&&!vie(t)&&t.childNodes&&t.childNodes.length&&yn(t.childNodes,function(n){var r;mie(n)&&n.textContent&&(e+=(r=fie(n.textContent))!==null&&r!==void 0?r:"")}),Ry(e)}function fP(t){return!!t&&t.nodeType===1}function Md(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function mie(t){return!!t&&t.nodeType===3}function pie(t){return!!t&&t.nodeType===11}var SR=["a","button","form","input","select","textarea","label"];function gie(t){var e=t.parentNode;return!(!e||!fP(e))&&e}function QAe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!ie||!t||Md(t,"html")||!fP(t)||n!=null&&n.url_allowlist&&!wV(n.url_allowlist)||n!=null&&n.url_ignorelist&&wV(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some(function(g){return e.type===g}))return!1}for(var a=!1,o=[t],l=!0,c=t;c.parentNode&&!Md(c,"body");)if(pie(c.parentNode))o.push(c.parentNode.host),c=c.parentNode.host;else{if(!(l=gie(c)))break;if(r||SR.indexOf(l.tagName.toLowerCase())>-1)a=!0;else{var d=ie.getComputedStyle(l);d&&d.getPropertyValue("cursor")==="pointer"&&(a=!0)}o.push(l),c=l}if(!function(g,y){var v=y==null?void 0:y.element_allowlist;if(rt(v))return!0;var b,C=eo(g);try{var S=function(){var w=b.value;if(v.some(function(I){return w.tagName.toLowerCase()===I}))return{v:!0}};for(C.s();!(b=C.n()).done;){var R=S();if(Cg(R)==="object")return R.v}}catch(w){C.e(w)}finally{C.f()}return!1}(o,n)||!function(g,y){var v=y==null?void 0:y.css_selector_allowlist;if(rt(v))return!0;var b,C=eo(g);try{var S=function(){var w=b.value;if(v.some(function(I){return w.matches(I)}))return{v:!0}};for(C.s();!(b=C.n()).done;){var R=S();if(Cg(R)==="object")return R.v}}catch(w){C.e(w)}finally{C.f()}return!1}(o,n))return!1;var f=ie.getComputedStyle(t);if(f&&f.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return a?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(SR.indexOf(p)>-1||t.getAttribute("contenteditable")==="true")}}function wR(t){for(var e=t;e.parentNode&&!Md(e,"body");e=e.parentNode){var n=O5(e);if(Lt(n,"ph-sensitive")||Lt(n,"ph-no-capture"))return!1}if(Lt(O5(t),"ph-include"))return!0;var r=t.type||"";if(Vi(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Vi(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function vie(t){return!!(Md(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Md(t,"select")||Md(t,"textarea")||t.getAttribute("contenteditable")==="true")}var yie="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",XAe=new RegExp("^(?:".concat(yie,")$")),eNe=new RegExp(yie),_ie="\\d{3}-?\\d{2}-?\\d{4}",tNe=new RegExp("^(".concat(_ie,")$")),nNe=new RegExp("(".concat(_ie,")"));function V2(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Ds(t)||Vi(t)&&(t=Ry(t),(e?XAe:eNe).test((t||"").replace(/[- ]/g,""))||(e?tNe:nNe).test(t)))}function kV(t){var e=A5(t);return V2(e="".concat(e," ").concat(Cie(t)).trim())?e:""}function Cie(t){var e="";return t&&t.childNodes&&t.childNodes.length&&yn(t.childNodes,function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=A5(n);e="".concat(e," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(Cie(n)).trim())}catch(s){fe.error(s)}}),e}function rNe(t){return function(e){var n=e.map(function(r){var i,s,a="";if(r.tag_name&&(a+=r.tag_name),r.attr_class){r.attr_class.sort();var o,l=eo(r.attr_class);try{for(l.s();!(o=l.n()).done;){var c=o.value;a+=".".concat(c.replace(/"/g,""))}}catch(p){l.e(p)}finally{l.f()}}var d=Ue(Ue(Ue(Ue({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),f={};return l6(d).sort(function(p,g){var y=es(p,1)[0],v=es(g,1)[0];return y.localeCompare(v)}).forEach(function(p){var g=es(p,2),y=g[0],v=g[1];return f[TV(y.toString())]=TV(v.toString())}),a+=":",a+=l6(d).map(function(p){var g=es(p,2),y=g[0],v=g[1];return"".concat(y,'="').concat(v,'"')}).join("")});return n.join(";")}(function(e){return e.map(function(n){var r,i,s={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:iNe(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return l6(n).filter(function(a){return es(a,1)[0].indexOf("attr__")===0}).forEach(function(a){var o=es(a,2),l=o[0],c=o[1];return s.attributes[l]=c}),s})}(t))}function TV(t){return t.replace(/"|\\"/g,'\\"')}function iNe(t){var e=t.attr__class;return e?qr(e)?e:hP(e):void 0}var kR="[SessionRecording]",TR="redacted",$v={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},sNe=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],aNe=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],oNe=["/s/","/e/","/i/"];function RV(t,e,n,r){if(Ds(t))return t;var i=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Vi(i)&&(i=parseInt(i)),i>n?kR+" ".concat(r," body too large to record (").concat(i," bytes)"):t}function IV(t,e){if(Ds(t))return t;var n=t;return V2(n,!1)||(n=kR+" "+e+" body "+TR),yn(aNe,function(r){var i,s;(i=n)!==null&&i!==void 0&&i.length&&((s=n)===null||s===void 0?void 0:s.indexOf(r))!==-1&&(n=kR+" "+e+" body "+TR+" as might contain: "+r)}),n}var Tc,lNe=function(t,e){var n,r,i,s={payloadSizeLimitBytes:$v.payloadSizeLimitBytes,performanceEntryTypeToObserve:Jc($v.performanceEntryTypeToObserve),payloadHostDenyList:[].concat(Jc(e.payloadHostDenyList||[]),Jc($v.payloadHostDenyList))},a=t.session_recording.recordHeaders!==!1&&e.recordHeaders,o=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),function(p){return p!=null&&p.requestBody&&(p.requestBody=RV(p.requestBody,p.requestHeaders,i,"Request")),p!=null&&p.responseBody&&(p.responseBody=RV(p.responseBody,p.responseHeaders,i,"Response")),p}),d=function(p){return c(function(v){var b=P0(v.name);if(!(b&&b.pathname&&oNe.some(function(C){return b.pathname.indexOf(C)===0})))return v}((y=(g=p).requestHeaders,Ds(y)||yn(Object.keys(y??{}),function(v){sNe.includes(v.toLowerCase())&&(y[v]=TR)}),g)));var g,y},f=$a(t.session_recording.maskNetworkRequestFn);return f&&$a(t.session_recording.maskCapturedNetworkRequestFn)&&fe.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(t.session_recording.maskCapturedNetworkRequestFn=function(p){var g=t.session_recording.maskNetworkRequestFn({url:p.name});return Ue(Ue({},p),{},{name:g==null?void 0:g.url})}),s.maskRequestFn=$a(t.session_recording.maskCapturedNetworkRequestFn)?function(p){var g,y,v,b=d(p);return b&&(g=(y=(v=t.session_recording).maskCapturedNetworkRequestFn)===null||y===void 0?void 0:y.call(v,b))!==null&&g!==void 0?g:void 0}:function(p){return function(g){if(!rt(g))return g.requestBody=IV(g.requestBody,"Request"),g.responseBody=IV(g.responseBody,"Response"),g}(d(p))},Ue(Ue(Ue({},$v),s),{},{recordHeaders:a,recordBody:o,recordPerformance:l,recordInitialRequests:l})},cNe=Qt(function t(e){var n,r,i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jt(this,t),de(this,"bucketSize",100),de(this,"refillRate",10),de(this,"mutationBuckets",{}),de(this,"loggedTracker",{}),de(this,"refillBuckets",function(){Object.keys(i.mutationBuckets).forEach(function(a){i.mutationBuckets[a]=i.mutationBuckets[a]+i.refillRate,i.mutationBuckets[a]>=i.bucketSize&&delete i.mutationBuckets[a]})}),de(this,"getNodeOrRelevantParent",function(a){var o=i.rrweb.mirror.getNode(a);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var l=o.closest("svg");if(l)return[i.rrweb.mirror.getId(l),l]}return[a,o]}),de(this,"numberOfChanges",function(a){var o,l,c,d,f,p,g,y;return((o=(l=a.removes)===null||l===void 0?void 0:l.length)!==null&&o!==void 0?o:0)+((c=(d=a.attributes)===null||d===void 0?void 0:d.length)!==null&&c!==void 0?c:0)+((f=(p=a.texts)===null||p===void 0?void 0:p.length)!==null&&f!==void 0?f:0)+((g=(y=a.adds)===null||y===void 0?void 0:y.length)!==null&&g!==void 0?g:0)}),de(this,"throttleMutations",function(a){if(a.type!==3||a.data.source!==0)return a;var o=a.data,l=i.numberOfChanges(o);o.attributes&&(o.attributes=o.attributes.filter(function(d){var f,p,g,y=es(i.getNodeOrRelevantParent(d.id),2),v=y[0],b=y[1];return i.mutationBuckets[v]===0?!1:(i.mutationBuckets[v]=(f=i.mutationBuckets[v])!==null&&f!==void 0?f:i.bucketSize,i.mutationBuckets[v]=Math.max(i.mutationBuckets[v]-1,0),i.mutationBuckets[v]===0&&(i.loggedTracker[v]||(i.loggedTracker[v]=!0,(p=(g=i.options).onBlockedNode)===null||p===void 0||p.call(g,v,b))),d)}));var c=i.numberOfChanges(o);return c!==0||l===c?a:void 0}),this.rrweb=e,this.options=s,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,setInterval(function(){i.refillBuckets()},1e3)}),uNe=3e5,dNe=[yc.MouseMove,yc.MouseInteraction,yc.Scroll,yc.ViewportResize,yc.Input,yc.TouchMove,yc.MediaInteraction,yc.Drag],xV=function(t){return{rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}},Ta="[SessionRecording]",hNe=function(){function t(e){var n=this;if(Jt(this,t),de(this,"queuedRRWebEvents",[]),de(this,"isIdle",!1),de(this,"_linkedFlagSeen",!1),de(this,"_lastActivityTimestamp",Date.now()),de(this,"_linkedFlag",null),de(this,"_forceAllowLocalhostNetworkCapture",!1),de(this,"_onBeforeUnload",function(){n._flushBuffer()}),de(this,"_onOffline",function(){n._tryAddCustomEvent("browser offline",{})}),de(this,"_onOnline",function(){n._tryAddCustomEvent("browser online",{})}),de(this,"_onVisibilityChange",function(){if(Ve!=null&&Ve.visibilityState){var a="window "+Ve.visibilityState;n._tryAddCustomEvent(a,{})}}),de(this,"_samplingSessionListener",null),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw fe.error(Ta+" started without valid sessionManager"),new Error(Ta+" started without valid sessionManager. This is a bug.");var r=this.sessionManager.checkAndGetSessionAndWindowId(),i=r.sessionId,s=r.windowId;this.sessionId=i,this.windowId=s,this.buffer=this.clearBuffer(),this._setupSampling()}return Qt(t,[{key:"rrwebRecord",get:function(){var e;return qn==null||(e=qn.rrweb)===null||e===void 0?void 0:e.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw new Error(Ta+" must be started with a valid sessionManager.");return this.instance.sessionManager}},{key:"fullSnapshotIntervalMillis",get:function(){var e;return((e=this.instance.config.session_recording)===null||e===void 0?void 0:e.full_snapshot_interval_millis)||uNe}},{key:"isSampled",get:function(){var e=this.instance.get_property(M0);return nh(e)?e:null}},{key:"sessionDuration",get:function(){var e,n,r=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return r?r.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(uR),n=!this.instance.config.disable_session_recording;return ie&&e&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(cV),n=this.instance.config.enable_recording_console_log;return n??e}},{key:"canvasRecording",get:function(){var e=this.instance.get_property(dV);return e&&e.fps&&e.quality?{enabled:e.enabled,fps:e.fps,quality:e.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var e,n,r=this.instance.get_property(uV),i={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),a=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),o=wi(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(nh(o)?o:r!=null&&r.capturePerformance);return s||a||l?{recordHeaders:s,recordBody:a,recordPerformance:l}:void 0}},{key:"sampleRate",get:function(){var e=this.instance.get_property(hV);return Oa(e)?e:null}},{key:"minimumDuration",get:function(){var e=this.instance.get_property(fV);return Oa(e)?e:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Ds(this._linkedFlag)||this._linkedFlagSeen?nh(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(){this.isRecordingEnabled?(this._startCapture(),ie==null||ie.addEventListener("beforeunload",this._onBeforeUnload),ie==null||ie.addEventListener("offline",this._onOffline),ie==null||ie.addEventListener("online",this._onOnline),ie==null||ie.addEventListener("visibilitychange",this._onVisibilityChange),fe.info(Ta+" started")):(this.stopRecording(),this.clearBuffer(),clearInterval(this._fullSnapshotTimer))}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,ie==null||ie.removeEventListener("beforeunload",this._onBeforeUnload),ie==null||ie.removeEventListener("offline",this._onOffline),ie==null||ie.removeEventListener("online",this._onOnline),ie==null||ie.removeEventListener("visibilitychange",this._onVisibilityChange),fe.info(Ta+" stopped"))}},{key:"makeSamplingDecision",value:function(e){var n,r=this.sessionId!==e,i=this.sampleRate;if(Oa(i)){var s,a=this.isSampled,o=r||!nh(a);o?s=Math.random()<i:s=a,!s&&o&&fe.warn(Ta+" Sample rate (".concat(i,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:i}),(n=this.instance.persistence)===null||n===void 0||n.register(de({},M0,s))}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register(de({},M0,null))}}},{key:"afterDecideResponse",value:function(e){var n,r,i,s=this;if(this._persistDecideResponse(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(r=e.sessionRecording)!==null&&r!==void 0&&r.endpoint&&(this._endpoint=(i=e.sessionRecording)===null||i===void 0?void 0:i.endpoint),this._setupSampling(),!Ds(this._linkedFlag)&&!this._linkedFlagSeen){var a=Vi(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,o=Vi(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags(function(l,c){var d=wi(c)&&a in c,f=o?c[a]===o:d;if(f){var p={linkedFlag:a,linkedVariant:o},g="linked flag matched";fe.info(Ta+" "+g,p),s._tryAddCustomEvent(g,p)}s._linkedFlagSeen=f})}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var e=this;Oa(this.sampleRate)&&yu(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(function(n){e.makeSamplingDecision(n)}))}},{key:"_persistDecideResponse",value:function(e){if(this.instance.persistence){var n=this.instance.persistence,r=function(){var i,s,a,o,l,c,d,f,p=(i=e.sessionRecording)===null||i===void 0?void 0:i.sampleRate,g=Ds(p)?null:parseFloat(p),y=(s=e.sessionRecording)===null||s===void 0?void 0:s.minimumDurationMilliseconds;n.register((de(f={},uR,!!e.sessionRecording),de(f,cV,(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled),de(f,uV,Ue({capturePerformance:e.capturePerformance},(o=e.sessionRecording)===null||o===void 0?void 0:o.networkPayloadCapture)),de(f,dV,{enabled:(l=e.sessionRecording)===null||l===void 0?void 0:l.recordCanvas,fps:(c=e.sessionRecording)===null||c===void 0?void 0:c.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality}),de(f,hV,g),de(f,fV,rt(y)?null:y),f))};r(),this.sessionManager.onSessionId(r)}}},{key:"log",value:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(e)]}},timestamp:zre()})}},{key:"_startCapture",value:function(){var e=this;rt(Object.assign)||this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut()||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():this.instance.requestRouter.loadScript("/static/recorder.js?v=".concat(La.LIB_VERSION),function(n){if(n)return fe.error(Ta+" could not load recorder.js",n);e._onScriptLoaded()}))}},{key:"isInteractiveEvent",value:function(e){var n;return e.type===3&&dNe.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>3e5&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._flushBuffer());var r=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)),!this.isIdle){var i=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),s=i.windowId,a=i.sessionId,o=this.sessionId!==a,l=this.windowId!==s;this.windowId=s,this.sessionId=a,(r||[YAe,JAe].indexOf(e.type)===-1&&(l||o||rt(this._fullSnapshotTimer)))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):fe.warn(Ta+" could not emit queued rrweb event.",n,e),!1}}},{key:"_tryAddCustomEvent",value:function(e,n){var r=this;return this._tryRRWebMethod(xV(function(){return r.rrwebRecord.addCustomEvent(e,n)}))}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRWebMethod(xV(function(){return e.rrwebRecord.takeFullSnapshot()}))}},{key:"_onScriptLoaded",value:function(){for(var e,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording,s=0,a=Object.entries(i||{});s<a.length;s++){var o=es(a[s],2),l=o[0],c=o[1];l in r&&(l==="maskInputOptions"?r.maskInputOptions=Ue({password:!0},c):r[l]=c)}if(this.canvasRecording&&this.canvasRecording.enabled&&(r.recordCanvas=!0,r.sampling={canvas:this.canvasRecording.fps},r.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new cNe(this.rrwebRecord,{onBlockedNode:function(f,p){var g="Too many mutations on node '".concat(f,"'. Rate limiting. This could be due to SVG animations or something similar");fe.info(g,{node:p}),n.log(Ta+" "+g,"warn")}});var d=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(Ue({emit:function(f){n.onRRwebEmit(f)},plugins:d},r)),this.instance._addCaptureHook(function(f){try{if(f==="$pageview"){var p=ie?n._maskUrl(ie.location.href):"";if(!p)return;n._tryAddCustomEvent("$pageview",{href:p})}}catch(g){fe.error("Could not add $pageview to rrweb session",g)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:r,activePlugins:d.map(function(f){return f==null?void 0:f.name})}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else fe.error(Ta+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var e=this;if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var n=this.fullSnapshotIntervalMillis;n&&(this._fullSnapshotTimer=setInterval(function(){e._tryTakeFullSnapshot()},n))}}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return qn.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(qn.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&$a(qn.getRecordNetworkPlugin)&&(!UAe.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(qn.getRecordNetworkPlugin(lNe(this.instance.config,this.networkPayloadCapture))):fe.info(Ta+" NetworkCapture not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(this._processQueuedEvents(),e&&wi(e)){if(e.type===c6.Meta){var n=this._maskUrl(e.data.href);if(this._lastHref=n,!n)return;e.data.href=n}else this._pageViewFallBack();e.type===c6.FullSnapshot&&this._scheduleFullSnapshot();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var i=function(o){var l=o;if(l&&wi(l)&&l.type===6&&wi(l.data)&&l.data.plugin==="rrweb/console@1"){l.data.payload.payload.length>10&&(l.data.payload.payload=l.data.payload.payload.slice(0,10),l.data.payload.payload.push("...[truncated]"));for(var c=[],d=0;d<l.data.payload.payload.length;d++)l.data.payload.payload[d]&&l.data.payload.payload[d].length>2e3?c.push(l.data.payload.payload[d].slice(0,2e3)+"...[truncated]"):c.push(l.data.payload.payload[d]);return l.data.payload.payload=c,o}return o}(r),s=bR(i);if(this._updateWindowAndSessionIds(i),!this.isIdle||i.type===c6.Custom){var a={$snapshot_bytes:s,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(a):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&ie){var e=this._maskUrl(ie.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}},{key:"_processQueuedEvents",value:function(){var e=this;if(this.queuedRRWebEvents.length){var n=Jc(this.queuedRRWebEvents);this.queuedRRWebEvents=[],n.forEach(function(r){Date.now()-r.enqueuedAt<=2e3&&e._tryRRWebMethod(r)})}}},{key:"_maskUrl",value:function(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return e}},{key:"clearBuffer",value:function(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this.minimumDuration,r=this.sessionDuration,i=Oa(r)&&r>=0,s=Oa(n)&&i&&r<n;return this.status==="buffering"||s?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&ER(this.buffer).forEach(function(a){e._captureSnapshot({$snapshot_bytes:a.size,$snapshot_data:a.data,$session_id:a.sessionId,$window_id:a.windowId})}),this.clearBuffer())}},{key:"_captureSnapshotBuffered",value:function(e){var n,r=this,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(function(){r._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}},{key:"overrideLinkedFlag",value:function(){this._linkedFlagSeen=!0}}]),t}(),fNe=function(){function t(e){Jt(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Qt(t,[{key:"call",value:function(){var e=this,n={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(p2),group_properties:this.instance.get_property(ld),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:n,compression:this.instance.config.disable_compression?void 0:Uo.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(r){return e.parseDecideResponse(r.json)}})}},{key:"parseDecideResponse",value:function(e){var n=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var r=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e??{},r),r)fe.error("Failed to fetch feature flags from PostHog.");else{if(!Ve||!Ve.body)return fe.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){n.parseDecideResponse(e)},500);if(this.instance._afterDecideResponse(e),e.siteApps)if(this.instance.config.opt_in_site_apps){var i,s=eo(e.siteApps);try{var a=function(){var o=i.value,l=o.id,c=o.url,d=n.instance.requestRouter.endpointFor("api",c);qn["__$$ph_site_app_".concat(l)]=n.instance,n.instance.requestRouter.loadScript(d,function(f){if(f)return fe.error("Error while initializing PostHog app with config id ".concat(l),f)})};for(s.s();!(i=s.n()).done;)a()}catch(o){s.e(o)}finally{s.f()}}else e.siteApps.length>0&&fe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),t}(),mNe=ie!=null&&ie.location?P5(ie.location.hash,"__posthog")||P5(location.hash,"state"):null,MV="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(Tc||(Tc={}));var pNe=function(){function t(e){Jt(this,t),this.instance=e}return Qt(t,[{key:"setToolbarState",value:function(e){qn.ph_toolbar_state=e}},{key:"getToolbarState",value:function(){var e;return(e=qn.ph_toolbar_state)!==null&&e!==void 0?e:Tc.UNINITIALIZED}},{key:"maybeLoadToolbar",value:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!ie||!Ve)return!1;r=(e=r)!==null&&e!==void 0?e:ie.location,s=(n=s)!==null&&n!==void 0?n:ie.history;try{if(!i){try{ie.localStorage.setItem("test","test"),ie.localStorage.removeItem("test")}catch{return!1}i=ie==null?void 0:ie.localStorage}var a,o=mNe||P5(r.hash,"__posthog")||P5(r.hash,"state"),l=o?iV(function(){return JSON.parse(atob(decodeURIComponent(o)))})||iV(function(){return JSON.parse(decodeURIComponent(o))}):null;return l&&l.action==="ph_authorize"?((a=l).source="url",a&&Object.keys(a).length>0&&(l.desiredHash?r.hash=l.desiredHash:s?s.replaceState(s.state,"",r.pathname+r.search):r.hash="")):((a=JSON.parse(i.getItem(MV)||"{}")).source="localstorage",delete a.userIntent),!(!a.token||this.instance.config.token!==a.token)&&(this.loadToolbar(a),!0)}catch{return!1}}},{key:"_callLoadToolbar",value:function(e){(qn.ph_load_toolbar||qn.ph_load_editor)(e,this.instance)}},{key:"loadToolbar",value:function(e){var n=this,r=!(Ve==null||!Ve.getElementById(vR));if(!ie||r)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,s=Ue(Ue({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(ie.localStorage.setItem(MV,JSON.stringify(Ue(Ue({},s),{},{source:void 0}))),this.getToolbarState()===Tc.LOADED)this._callLoadToolbar(s);else if(this.getToolbarState()===Tc.UNINITIALIZED){this.setToolbarState(Tc.LOADING);var a=3e5,o=Math.floor(Date.now()/a)*a;this.instance.requestRouter.loadScript("/static/toolbar.js?t=".concat(o),function(l){if(l)return fe.error("Failed to load toolbar",l),void n.setToolbarState(Tc.UNINITIALIZED);n.setToolbarState(Tc.LOADED),n._callLoadToolbar(s)}),Uc(ie,"turbolinks:load",function(){n.setToolbarState(Tc.UNINITIALIZED),n.loadToolbar(s)})}return!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,r)}}]),t}(),gNe=function(){function t(e){Jt(this,t),de(this,"isPaused",!0),de(this,"queue",[]),de(this,"flushTimeoutMs",3e3),this.sendRequest=e}return Qt(t,[{key:"enqueue",value:function(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var e=this;this.clearFlushTimeout();var n=this.queue.length>0?this.formatQueue():{},r=Object.values(n);[].concat(Jc(r.filter(function(i){return i.url.indexOf("/e")===0})),Jc(r.filter(function(i){return i.url.indexOf("/e")!==0}))).map(function(i){e.sendRequest(Ue(Ue({},i),{},{transport:"sendBeacon"}))})}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(function(){if(e.clearFlushTimeout(),e.queue.length>0){var n=e.formatQueue(),r=function(s){var a=n[s],o=new Date().getTime();a.data&&qr(a.data)&&yn(a.data,function(l){l.offset=Math.abs(l.timestamp-o),delete l.timestamp}),e.sendRequest(a)};for(var i in n)r(i)}},this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var e={};return yn(this.queue,function(n){var r,i=n,s=(i?i.batchKey:null)||i.url;rt(e[s])&&(e[s]=Ue(Ue({},i),{},{data:[]})),(r=e[s].data)===null||r===void 0||r.push(i.data)}),this.queue=[],e}}]),t}(),Wa=Uint8Array,Ls=Uint16Array,bm=Uint32Array,mP=new Wa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pP=new Wa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PV=new Wa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bie=function(t,e){for(var n=new Ls(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new bm(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Eie=bie(mP,2),vNe=Eie[0],RR=Eie[1];vNe[28]=258,RR[258]=28;for(var LV=bie(pP,0)[1],Sie=new Ls(32768),An=0;An<32768;++An){var U1=(43690&An)>>>1|(21845&An)<<1;U1=(61680&(U1=(52428&U1)>>>2|(13107&U1)<<2))>>>4|(3855&U1)<<4,Sie[An]=((65280&U1)>>>8|(255&U1)<<8)>>>1}var L0=function(t,e,n){for(var r=t.length,i=0,s=new Ls(e);i<r;++i)++s[t[i]-1];var a,o=new Ls(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;for(a=new Ls(r),i=0;i<r;++i)a[i]=Sie[o[t[i]-1]++]>>>15-t[i];return a},Lh=new Wa(288);for(An=0;An<144;++An)Lh[An]=8;for(An=144;An<256;++An)Lh[An]=9;for(An=256;An<280;++An)Lh[An]=7;for(An=280;An<288;++An)Lh[An]=8;var N5=new Wa(32);for(An=0;An<32;++An)N5[An]=5;var yNe=L0(Lh,9),_Ne=L0(N5,5),wie=function(t){return(t/8>>0)+(7&t&&1)},kie=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Ls?Ls:t instanceof bm?bm:Wa)(n-e);return r.set(t.subarray(e,n)),r},fc=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},M3=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},vS=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Wa(0),0];if(i==1){var a=new Wa(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort(function(I,k){return I.f-k.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[c].f<n[f].f?c++:f++],l=n[c!=d&&n[c].f<n[f].f?c++:f++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};var p=s[0].s;for(r=1;r<i;++r)s[r].s>p&&(p=s[r].s);var g=new Ls(p+1),y=CNe(n[d-1],g,0);if(y>e){r=0;var v=0,b=y-e,C=1<<b;for(s.sort(function(I,k){return g[k.s]-g[I.s]||I.f-k.f});r<i;++r){var S=s[r].s;if(!(g[S]>e))break;v+=C-(1<<y-g[S]),g[S]=e}for(v>>>=b;v>0;){var R=s[r].s;g[R]<e?v-=1<<e-g[R]++-1:++r}for(;r>=0&&v;--r){var w=s[r].s;g[w]==e&&(--g[w],++v)}y=e}return[new Wa(g),y]},CNe=function t(e,n,r){return e.s==-1?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},OV=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ls(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return[n.subarray(0,r),e]},P3=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},IR=function(t,e,n){var r=n.length,i=wie(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},AV=function(t,e,n,r,i,s,a,o,l,c,d){fc(e,d++,n),++i[256];for(var f=vS(i,15),p=f[0],g=f[1],y=vS(s,15),v=y[0],b=y[1],C=OV(p),S=C[0],R=C[1],w=OV(v),I=w[0],k=w[1],x=new Ls(19),L=0;L<S.length;++L)x[31&S[L]]++;for(L=0;L<I.length;++L)x[31&I[L]]++;for(var N=vS(x,7),D=N[0],U=N[1],j=19;j>4&&!D[PV[j-1]];--j);var $,Z,V,z,K=c+5<<3,q=P3(i,Lh)+P3(s,N5)+a,G=P3(i,p)+P3(s,v)+a+14+3*j+P3(x,D)+(2*x[16]+3*x[17]+7*x[18]);if(K<=q&&K<=G)return IR(e,d,t.subarray(l,l+c));if(fc(e,d,1+(G<q)),d+=2,G<q){$=L0(p,g),Z=p,V=L0(v,b),z=v;var J=L0(D,U);for(fc(e,d,R-257),fc(e,d+5,k-1),fc(e,d+10,j-4),d+=14,L=0;L<j;++L)fc(e,d+3*L,D[PV[L]]);d+=3*j;for(var B=[S,I],Q=0;Q<2;++Q){var pe=B[Q];for(L=0;L<pe.length;++L){var ve=31&pe[L];fc(e,d,J[ve]),d+=D[ve],ve>15&&(fc(e,d,pe[L]>>>5&127),d+=pe[L]>>>12)}}}else $=yNe,Z=Lh,V=_Ne,z=N5;for(L=0;L<o;++L)if(r[L]>255){ve=r[L]>>>18&31,M3(e,d,$[ve+257]),d+=Z[ve+257],ve>7&&(fc(e,d,r[L]>>>23&31),d+=mP[ve]);var Re=31&r[L];M3(e,d,V[Re]),d+=z[Re],Re>3&&(M3(e,d,r[L]>>>5&8191),d+=pP[Re])}else M3(e,d,$[r[L]]),d+=Z[r[L]];return M3(e,d,$[256]),d+Z[256]},bNe=new bm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ENe=function(){for(var t=new bm(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),SNe=function(t,e,n,r,i){return function(s,a,o,l,c,d){var f=s.length,p=new Wa(l+f+5*(1+Math.floor(f/7e3))+c),g=p.subarray(l,p.length-c),y=0;if(!a||f<8)for(var v=0;v<=f;v+=65535){var b=v+65535;b<f?y=IR(g,y,s.subarray(v,b)):(g[v]=d,y=IR(g,y,s.subarray(v,f)))}else{for(var C=bNe[a-1],S=C>>>13,R=8191&C,w=(1<<o)-1,I=new Ls(32768),k=new Ls(w+1),x=Math.ceil(o/3),L=2*x,N=function(Mi){return(s[Mi]^s[Mi+1]<<x^s[Mi+2]<<L)&w},D=new bm(25e3),U=new Ls(288),j=new Ls(32),$=0,Z=0,V=(v=0,0),z=0,K=0;v<f;++v){var q=N(v),G=32767&v,J=k[q];if(I[G]=J,k[q]=G,z<=v){var B=f-v;if(($>7e3||V>24576)&&B>423){y=AV(s,g,0,D,U,j,Z,V,K,v-K,y),V=$=Z=0,K=v;for(var Q=0;Q<286;++Q)U[Q]=0;for(Q=0;Q<30;++Q)j[Q]=0}var pe=2,ve=0,Re=R,Te=G-J&32767;if(B>2&&q==N(v-Te))for(var Ce=Math.min(S,B)-1,we=Math.min(32767,v),Ee=Math.min(258,B);Te<=we&&--Re&&G!=J;){if(s[v+pe]==s[v+pe-Te]){for(var ze=0;ze<Ee&&s[v+ze]==s[v+ze-Te];++ze);if(ze>pe){if(pe=ze,ve=Te,ze>Ce)break;var qt=Math.min(Te,ze-2),dr=0;for(Q=0;Q<qt;++Q){var nn=v-Te+Q+32768&32767,We=nn-I[nn]+32768&32767;We>dr&&(dr=We,J=nn)}}}Te+=(G=J)-(J=I[G])+32768&32767}if(ve){D[V++]=268435456|RR[pe]<<18|LV[ve];var pi=31&RR[pe],hr=31&LV[ve];Z+=mP[pi]+pP[hr],++U[257+pi],++j[hr],z=v+pe,++$}else D[V++]=s[v],++U[s[v]]}}y=AV(s,g,d,D,U,j,Z,V,K,v-K,y)}return kie(p,0,l+wie(y)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!0)},yS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function wNe(t,e){e===void 0&&(e={});var n=function(){var o=4294967295;return{p:function(l){for(var c=o,d=0;d<l.length;++d)c=ENe[255&c^l[d]]^c>>>8;o=c},d:function(){return 4294967295^o}}}(),r=t.length;n.p(t);var i,s=SNe(t,e,10+((i=e).filename&&i.filename.length+1||0),8),a=s.length;return function(o,l){var c=l.filename;if(o[0]=31,o[1]=139,o[2]=8,o[8]=l.level<2?4:l.level==9?2:0,o[9]=3,l.mtime!=0&&yS(o,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),c){o[3]=8;for(var d=0;d<=c.length;++d)o[d+10]=c.charCodeAt(d)}}(s,e),yS(s,a-8,n.d()),yS(s,a-4,r),s}var kNe=!!aR||!!sR,NV="text/plain",D5=function(t,e){var n=es(t.split("?"),2),r=n[0],i=n[1],s=Ue({},e);i==null||i.split("&").forEach(function(o){var l=es(o.split("="),1)[0];delete s[l]});var a=FAe(s);return a=a?(i?i+"&":"")+a:i,"".concat(r,"?").concat(a)},TNe=function(t){return"data="+encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},_S=function(t){var e=t.data,n=t.compression;if(e){if(n===Uo.GZipJS){var r=wNe(function(s,a){var o=s.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(s);for(var l=new Wa(s.length+(s.length>>>1)),c=0,d=function(y){l[c++]=y},f=0;f<o;++f){if(c+5>l.length){var p=new Wa(c+8+(o-f<<1));p.set(l),l=p}var g=s.charCodeAt(f);g<128||a?d(g):g<2048?(d(192|g>>>6),d(128|63&g)):g>55295&&g<57344?(d(240|(g=65536+(1047552&g)|1023&s.charCodeAt(++f))>>>18),d(128|g>>>12&63),d(128|g>>>6&63),d(128|63&g)):(d(224|g>>>12),d(128|g>>>6&63),d(128|63&g))}return kie(l,0,c)}(JSON.stringify(e)),{mtime:0});return{contentType:NV,body:new Blob([r],{type:NV})}}if(n===Uo.Base64){var i=function(s){var a,o,l,c,d,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=0,g=0,y="",v=[];if(!s)return s;s=kAe(s);do a=(d=s.charCodeAt(p++)<<16|s.charCodeAt(p++)<<8|s.charCodeAt(p++))>>18&63,o=d>>12&63,l=d>>6&63,c=63&d,v[g++]=f.charAt(a)+f.charAt(o)+f.charAt(l)+f.charAt(c);while(p<s.length);switch(y=v.join(""),s.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(JSON.stringify(e));return{contentType:"application/x-www-form-urlencoded",body:TNe(i)}}return{contentType:"application/json",body:JSON.stringify(e)}}},O0=[];aR&&O0.push({transport:"XHR",method:function(t){var e,n=new aR;n.open(t.method||"GET",t.url,!0);var r=(e=_S(t))!==null&&e!==void 0?e:{},i=r.contentType,s=r.body;yn(t.headers,function(a,o){n.setRequestHeader(o,a)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=function(){if(n.readyState===4){var a,o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch{}(a=t.callback)===null||a===void 0||a.call(t,o)}},n.send(s)}}),sR&&O0.push({transport:"fetch",method:function(t){var e,n,r=(e=_S(t))!==null&&e!==void 0?e:{},i=r.contentType,s=r.body,a=new Headers;yn(t.headers,function(d,f){a.append(f,d)}),i&&a.append("Content-Type",i);var o=t.url,l=null;if(nV){var c=new nV;l={signal:c.signal,timeout:setTimeout(function(){return c.abort()},t.timeout)}}sR(o,{method:(t==null?void 0:t.method)||"GET",headers:a,keepalive:t.method==="POST",body:s,signal:(n=l)===null||n===void 0?void 0:n.signal}).then(function(d){return d.text().then(function(f){var p,g={statusCode:d.status,text:f};if(d.status===200)try{g.json=JSON.parse(f)}catch(y){fe.error(y)}(p=t.callback)===null||p===void 0||p.call(t,g)})}).catch(function(d){var f;fe.error(d),(f=t.callback)===null||f===void 0||f.call(t,{statusCode:0,text:d})}).finally(function(){return l?clearTimeout(l.timeout):null})}}),jo!=null&&jo.sendBeacon&&O0.push({transport:"sendBeacon",method:function(t){var e=D5(t.url,{beacon:"1"});try{var n,r=(n=_S(t))!==null&&n!==void 0?n:{},i=r.contentType,s=r.body,a=typeof s=="string"?new Blob([s],{type:i}):s;jo.sendBeacon(e,a)}catch{}}});var RNe=["retriesPerformedSoFar"],rh,INe=function(){function t(e){var n=this;Jt(this,t),de(this,"isPolling",!1),de(this,"pollIntervalMs",3e3),de(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!rt(ie)&&"onLine"in ie.navigator&&(this.areWeOnline=ie.navigator.onLine,ie.addEventListener("online",function(){n.areWeOnline=!0,n.flush()}),ie.addEventListener("offline",function(){n.areWeOnline=!1}))}return Qt(t,[{key:"retriableRequest",value:function(e){var n=this,r=e.retriesPerformedSoFar,i=CAe(e,RNe);Oa(r)&&r>0&&(i.url=D5(i.url,{retry_count:r})),this.instance._send_request(Ue(Ue({},i),{},{callback:function(s){var a;s.statusCode!==200&&(s.statusCode<400||s.statusCode>=500)&&(r??0)<10?n.enqueue(Ue({retriesPerformedSoFar:r},i)):(a=i.callback)===null||a===void 0||a.call(i,s)}}))}},{key:"enqueue",value:function(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=function(a){var o=3e3*Math.pow(2,a),l=o/2,c=Math.min(18e5,o),d=(Math.random()-.5)*(c-l);return Math.ceil(c+d)}(n),i=Date.now()+r;this.queue.push({retryAt:i,requestOptions:e});var s="Enqueued failed request for retry in ".concat(r);navigator.onLine||(s+=" (Browser is offline)"),fe.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout(function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()},this.pollIntervalMs)}},{key:"flush",value:function(){var e=Date.now(),n=[],r=this.queue.filter(function(o){return o.retryAt<e||(n.push(o),!1)});if(this.queue=n,r.length>0){var i,s=eo(r);try{for(s.s();!(i=s.n()).done;){var a=i.value.requestOptions;this.retriableRequest(a)}}catch(o){s.e(o)}finally{s.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var e,n=eo(this.queue);try{for(n.s();!(e=n.n()).done;){var r=e.value.requestOptions;try{this.instance._send_request(Ue(Ue({},r),{},{transport:"sendBeacon"}))}catch(i){fe.error(i)}}}catch(i){n.e(i)}finally{n.f()}this.queue=[]}}]),t}(),Vv=1800,xNe=function(){function t(e,n,r,i){var s;Jt(this,t),de(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||_d,this._windowIdGenerator=i||_d;var a=e.persistence_name||e.token,o=e.session_idle_timeout_seconds||Vv;if(Oa(o)?o>Vv?fe.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<60&&fe.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(fe.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=Vv),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,60),Vv),this._window_id_storage_key="ph_"+a+"_window_id",this._primary_window_exists_storage_key="ph_"+a+"_primary_window_exists",this._canUseSessionStorage()){var l=Si.parse(this._window_id_storage_key),c=Si.parse(this._primary_window_exists_storage_key);l&&!c?this._windowId=l:Si.remove(this._window_id_storage_key),Si.set(this._primary_window_exists_storage_key,!0)}if((s=this.config.bootstrap)!==null&&s!==void 0&&s.sessionID)try{var d=function(f){var p=f.replace(/-/g,"");if(p.length!==32)throw new Error("Not a valid UUID");if(p[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(p.substring(0,12),16)}(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),d)}catch(f){fe.error("Invalid sessionID in bootstrap",f)}this._listenToReloadWindow()}return Qt(t,[{key:"onSessionId",value:function(e){var n=this;return rt(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter(function(r){return r!==e})}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Si.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Si.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?Si.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,r){e===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(de({},R5,[n,e,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[R5];return qr(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;ie==null||ie.addEventListener("beforeunload",function(){e._canUseSessionStorage()&&Si.remove(e._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),r=es(this._getSessionId(),3),i=r[0],s=r[1],a=r[2],o=this._getWindowId(),l=a&&a>0&&Math.abs(n-a)>864e5,c=!1,d=!s,f=!e&&Math.abs(n-i)>this._sessionTimeoutMs;d||f||l?(s=this._sessionIdGenerator(),o=this._windowIdGenerator(),fe.info("[SessionId] new session ID generated",{sessionId:s,windowId:o,changeReason:{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}}),a=n,c=!0):o||(o=this._windowIdGenerator(),c=!0);var p=i===0||!e||l?n:i,g=a===0?new Date().getTime():a;return this._setWindowId(o),this._setSessionId(s,p,g),c&&this._sessionIdChangedHandlers.forEach(function(y){return y(s,o)}),{sessionId:s,windowId:o,sessionStartTimestamp:g}}}]),t}();(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})(rh||(rh={}));var DV="i.posthog.com",MNe=function(){function t(e){Jt(this,t),de(this,"_regionCache",{}),this.instance=e}return Qt(t,[{key:"apiHost",get:function(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}},{key:"uiHost",get:function(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(DV),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=rh.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=rh.EU:this._regionCache[this.apiHost]=rh.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===rh.CUSTOM)return this.apiHost+n;var r=DV+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(r);case"api":return"https://".concat(this.region,".").concat(r)}}},{key:"loadScript",value:function(e,n){if(this.instance.config.disable_external_dependency_loading)return fe.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var r=e[0]==="/"?this.endpointFor("assets",e):e,i=function(){if(!Ve)return n("document not found");var s=Ve.createElement("script");s.type="text/javascript",s.src=r,s.onload=function(l){return n(void 0,l)},s.onerror=function(l){return n(l)};var a,o=Ve.querySelectorAll("body > script");o.length>0?(a=o[0].parentNode)===null||a===void 0||a.insertBefore(s,o[0]):Ve.body.appendChild(s)};Ve!=null&&Ve.body?i():Ve==null||Ve.addEventListener("DOMContentLoaded",i)}}]),t}(),Tie="posthog-js";function Rie(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.organization,r=e.projectId,i=e.prefix,s=e.severityAllowList,a=s===void 0?["error"]:s;return function(o){var l,c,d,f,p;if(!(a==="*"||a.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var g=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));o.tags["PostHog Person URL"]=g,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var y=((l=o.exception)===null||l===void 0?void 0:l.values)||[],v={$exception_message:((c=y[0])===null||c===void 0?void 0:c.value)||o.message,$exception_type:(d=y[0])===null||d===void 0?void 0:d.type,$exception_personURL:g,$exception_level:o.level,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((f=y[0])===null||f===void 0?void 0:f.value)||o.message,$sentry_exception_type:(p=y[0])===null||p===void 0?void 0:p.type,$sentry_tags:o.tags,$level:o.level};return n&&r&&(v.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),t.exceptions.sendExceptionEvent(v),o}}var PNe=Qt(function t(e,n,r,i,s){Jt(this,t),this.name=Tie,this.setupOnce=function(a){a(Rie(e,{organization:n,projectId:r,prefix:i,severityAllowList:s}))}});function LNe(t,e){var n=t.config.segment;if(!n)return e();(function(r,i){var s=r.config.segment;if(!s)return i();var a=function(l){var c=function(){return l.anonymousId()||_d()};r.config.get_device_id=c,l.id()&&(r.register({distinct_id:l.id(),$device_id:c()}),r.persistence.set_property(kc,"identified")),i()},o=s.user();"then"in o&&$a(o.then)?o.then(function(l){return a(l)}):a(o)})(t,function(){n.register(function(r){Promise&&Promise.resolve||fe.warn("This browser does not have Promise support, and can not use the segment integration");var i=function(s,a){var o;if(!a)return s;s.event.userId||s.event.anonymousId===r.get_distinct_id()||(fe.info("Segment integration does not have a userId set, resetting PostHog"),r.reset()),s.event.userId&&s.event.userId!==r.get_distinct_id()&&(fe.info("Segment integration has a userId set, identifying with PostHog"),r.identify(s.event.userId));var l=r._calculate_event_properties(a,(o=s.event.properties)!==null&&o!==void 0?o:{},new Date);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(s){return i(s,s.event.event)},page:function(s){return i(s,"$pageview")},identify:function(s){return i(s,"$identify")},screen:function(s){return i(s,"$screen")}}}(t)).then(function(){e()})})}var UV,U5,To,ONe=function(){function t(e){Jt(this,t),this._instance=e}return Qt(t,[{key:"doPageView",value:function(e){var n,r=this._previousPageViewProperties(e);return this._currentPath=(n=ie==null?void 0:ie.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,r}},{key:"doPageLeave",value:function(e){return this._previousPageViewProperties(e)}},{key:"_previousPageViewProperties",value:function(e){var n=this._currentPath,r=this._prevPageviewTimestamp,i=this._instance.scrollManager.getContext();if(!r)return{};var s={};if(i){var a=i.maxScrollHeight,o=i.lastScrollY,l=i.maxScrollY,c=i.maxContentHeight,d=i.lastContentY,f=i.maxContentY;rt(a)||rt(o)||rt(l)||rt(c)||rt(d)||rt(f)||(a=Math.ceil(a),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),d=Math.ceil(d),f=Math.ceil(f),s={$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:a<=1?1:Bv(o/a,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:a<=1?1:Bv(l/a,0,1),$prev_pageview_last_content:d,$prev_pageview_last_content_percentage:c<=1?1:Bv(d/c,0,1),$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:c<=1?1:Bv(f/c,0,1)})}return n&&(s.$prev_pageview_pathname=n),r&&(s.$prev_pageview_duration=(e.getTime()-r.getTime())/1e3),s}}]),t}();function Bv(t,e,n){return Math.max(e,Math.min(t,n))}(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(UV||(UV={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(U5||(U5={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(To||(To={}));var Iie=function(){function t(){Jt(this,t),de(this,"events",{}),this.events={}}return Qt(t,[{key:"on",value:function(e,n){var r=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(n),function(){r.events[e]=r.events[e].filter(function(i){return i!==n})}}},{key:"emit",value:function(e,n){var r,i=eo(this.events[e]||[]);try{for(i.s();!(r=i.n()).done;)(0,r.value)(n)}catch(o){i.e(o)}finally{i.f()}var s,a=eo(this.events["*"]||[]);try{for(a.s();!(s=a.n()).done;)(0,s.value)(e,n)}catch(o){a.e(o)}finally{a.f()}}}]),t}(),ANe=function(){function t(e){var n=this;Jt(this,t),de(this,"_debugEventEmitter",new Iie),de(this,"checkStep",function(r,i){return n.checkStepEvent(r,i)&&n.checkStepUrl(r,i)&&n.checkStepElement(r,i)}),de(this,"checkStepEvent",function(r,i){return i==null||!i.event||(r==null?void 0:r.event)===(i==null?void 0:i.event)}),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}return Qt(t,[{key:"init",value:function(){var e,n=this;if(!rt((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var r;(r=this.instance)===null||r===void 0||r._addCaptureHook(function(i,s){n.on(i,s)})}}},{key:"register",value:function(e){var n,r,i=this;if(!rt((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(function(o){var l,c;(l=i.actionRegistry)===null||l===void 0||l.add(o),(c=o.steps)===null||c===void 0||c.forEach(function(d){var f;(f=i.actionEvents)===null||f===void 0||f.add((d==null?void 0:d.event)||"")})}),(r=this.instance)!==null&&r!==void 0&&r.autocapture)){var s,a=new Set;e.forEach(function(o){var l;(l=o.steps)===null||l===void 0||l.forEach(function(c){c!=null&&c.selector&&a.add(c==null?void 0:c.selector)})}),(s=this.instance)===null||s===void 0||s.autocapture.setElementSelectors(a)}}},{key:"on",value:function(e,n){var r,i=this;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n==null?void 0:n.event))&&this.actionRegistry&&((r=this.actionRegistry)===null||r===void 0?void 0:r.size)>0&&this.actionRegistry.forEach(function(s){i.checkAction(n,s)&&i._debugEventEmitter.emit("actionCaptured",s.name)})}},{key:"_addActionHook",value:function(e){this.onAction("actionCaptured",function(n){return e(n)})}},{key:"checkAction",value:function(e,n){if((n==null?void 0:n.steps)==null)return!1;var r,i=eo(n.steps);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(this.checkStep(e,s))return!0}}catch(a){i.e(a)}finally{i.f()}return!1}},{key:"onAction",value:function(e,n){return this._debugEventEmitter.on(e,n)}},{key:"checkStepUrl",value:function(e,n){if(n!=null&&n.url){var r,i=e==null||(r=e.properties)===null||r===void 0?void 0:r.$current_url;if(!i||typeof i!="string"||!t.matchString(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}},{key:"checkStepElement",value:function(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(function(s){return!(n!=null&&n.href&&!t.matchString(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!t.matchString(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!t.matchString(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))}))return!1;if(n!=null&&n.selector){var r,i=e==null||(r=e.properties)===null||r===void 0?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}},{key:"getElementsList",value:function(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}],[{key:"matchString",value:function(e,n,r){switch(r){case"regex":return!!ie&&M5(e,n);case"exact":return n===e;case"contains":var i=t.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return M5(e,i);default:return!1}}},{key:"escapeStringRegexp",value:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}}]),t}(),xR=function(){function t(e){Jt(this,t),this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}return Qt(t,[{key:"register",value:function(e){var n;rt((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}},{key:"setupActionBasedSurveys",value:function(e){var n=this,r=e.filter(function(i){var s,a,o,l;return((s=i.conditions)===null||s===void 0?void 0:s.actions)&&((a=i.conditions)===null||a===void 0||(o=a.actions)===null||o===void 0||(l=o.values)===null||l===void 0?void 0:l.length)>0});r.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new ANe(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(function(i){n.onAction(i)})),r.forEach(function(i){var s,a,o,l,c,d,f,p,g,y;i.conditions&&(s=i.conditions)!==null&&s!==void 0&&s.actions&&(a=i.conditions)!==null&&a!==void 0&&(o=a.actions)!==null&&o!==void 0&&o.values&&((l=i.conditions)===null||l===void 0||(c=l.actions)===null||c===void 0||(d=c.values)===null||d===void 0?void 0:d.length)>0&&((f=n.actionMatcher)===null||f===void 0||f.register(i.conditions.actions.values),(p=i.conditions)===null||p===void 0||(g=p.actions)===null||g===void 0||(y=g.values)===null||y===void 0||y.forEach(function(v){if(v&&v.name){var b=n.actionToSurveys.get(v.name);b&&b.push(i.id),n.actionToSurveys.set(v.name,b||[i.id])}}))}))}},{key:"setupEventBasedSurveys",value:function(e){var n,r=this;e.filter(function(i){var s,a,o,l;return((s=i.conditions)===null||s===void 0?void 0:s.events)&&((a=i.conditions)===null||a===void 0||(o=a.events)===null||o===void 0||(l=o.values)===null||l===void 0?void 0:l.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook(function(i,s){r.onEvent(i,s)}),e.forEach(function(i){var s,a,o;(s=i.conditions)===null||s===void 0||(a=s.events)===null||a===void 0||(o=a.values)===null||o===void 0||o.forEach(function(l){if(l&&l.name){var c=r.eventToSurveys.get(l.name);c&&c.push(i.id),r.eventToSurveys.set(l.name,c||[i.id])}})}))}},{key:"onEvent",value:function(e,n){var r,i,s=((r=this.instance)===null||r===void 0||(i=r.persistence)===null||i===void 0?void 0:i.props[Dv])||[];if(t.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var a,o=n==null||(a=n.properties)===null||a===void 0?void 0:a.$survey_id;if(o){var l=s.indexOf(o);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}},{key:"onAction",value:function(e){var n,r,i=((n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0?void 0:r.props[Dv])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(i.concat(this.actionToSurveys.get(e)||[]))}},{key:"_updateActivatedSurveys",value:function(e){var n,r;(n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0||r.register(de({},Dv,Jc(new Set(e))))}},{key:"getSurveys",value:function(){var e,n,r=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[Dv];return r||[]}},{key:"getEventToSurveys",value:function(){return this.eventToSurveys}},{key:"_getActionMatcher",value:function(){return this.actionMatcher}}]),t}();de(xR,"SURVEY_SHOWN_EVENT_NAME","survey shown");var L3="[Surveys]",NNe={icontains:function(t){return!!ie&&ie.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},not_icontains:function(t){return!!ie&&ie.location.href.toLowerCase().indexOf(t.toLowerCase())===-1},regex:function(t){return!!ie&&M5(ie.location.href,t)},not_regex:function(t){return!!ie&&!M5(ie.location.href,t)},exact:function(t){return(ie==null?void 0:ie.location.href)===t},is_not:function(t){return(ie==null?void 0:ie.location.href)!==t}},DNe=function(){function t(e){Jt(this,t),this.instance=e,this._surveyEventReceiver=null}return Qt(t,[{key:"afterDecideResponse",value:function(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var e=this,n=qn==null?void 0:qn.extendPostHogWithSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||n||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new xR(this.instance)),this.instance.requestRouter.loadScript("/static/surveys.js",function(r){if(r)return fe.error(L3,"Could not load surveys script",r);e._surveyManager=qn.extendPostHogWithSurveys(e.instance)}))}},{key:"getSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new xR(this.instance));var i=this.instance.get_property(hR);if(i&&!r)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(s){var a;if(s.statusCode!==200||!s.json)return e([]);var o,l=s.json.surveys||[],c=l.filter(function(d){var f,p,g,y,v,b,C,S,R,w,I,k;return((f=d.conditions)===null||f===void 0?void 0:f.events)&&((p=d.conditions)===null||p===void 0||(g=p.events)===null||g===void 0?void 0:g.values)&&((y=d.conditions)===null||y===void 0||(v=y.events)===null||v===void 0||(b=v.values)===null||b===void 0?void 0:b.length)>0||((C=d.conditions)===null||C===void 0?void 0:C.actions)&&((S=d.conditions)===null||S===void 0||(R=S.actions)===null||R===void 0?void 0:R.values)&&((w=d.conditions)===null||w===void 0||(I=w.actions)===null||I===void 0||(k=I.values)===null||k===void 0?void 0:k.length)>0});return c.length>0&&((o=n._surveyEventReceiver)===null||o===void 0||o.register(c)),(a=n.instance.persistence)===null||a===void 0||a.register(de({},hR,l)),e(l)}})}},{key:"getActiveMatchingSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(function(i){var s,a=i.filter(function(c){return!(!c.start_date||c.end_date)}).filter(function(c){var d,f,p,g;if(!c.conditions)return!0;var y=(d=c.conditions)===null||d===void 0||!d.url||NNe[(f=(p=c.conditions)===null||p===void 0?void 0:p.urlMatchType)!==null&&f!==void 0?f:"icontains"](c.conditions.url),v=(g=c.conditions)===null||g===void 0||!g.selector||(Ve==null?void 0:Ve.querySelector(c.conditions.selector));return y&&v}),o=(s=n._surveyEventReceiver)===null||s===void 0?void 0:s.getSurveys(),l=a.filter(function(c){var d,f,p,g,y,v,b,C,S,R;if(!c.linked_flag_key&&!c.targeting_flag_key&&!c.internal_targeting_flag_key)return!0;var w=!c.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(c.linked_flag_key),I=!c.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(c.targeting_flag_key),k=((d=c.conditions)===null||d===void 0?void 0:d.events)&&((f=c.conditions)===null||f===void 0||(p=f.events)===null||p===void 0?void 0:p.values)&&((g=c.conditions)===null||g===void 0||(y=g.events)===null||y===void 0?void 0:y.values.length)>0,x=((v=c.conditions)===null||v===void 0?void 0:v.actions)&&((b=c.conditions)===null||b===void 0||(C=b.actions)===null||C===void 0?void 0:C.values)&&((S=c.conditions)===null||S===void 0||(R=S.actions)===null||R===void 0?void 0:R.values.length)>0,L=!k&&!x||(o==null?void 0:o.includes(c.id)),N=n._canActivateRepeatedly(c),D=!(c.internal_targeting_flag_key&&!N)||n.instance.featureFlags.isFeatureEnabled(c.internal_targeting_flag_key);return w&&I&&D&&L});return e(l)},r)}},{key:"getNextSurveyStep",value:function(e,n,r){var i,s=e.questions[n],a=n+1;if((i=s.branching)===null||i===void 0||!i.type)return n===e.questions.length-1?To.End:a;if(s.branching.type===To.End)return To.End;if(s.branching.type===To.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===To.ResponseBased){if(s.type===U5.SingleChoice){var o,l,c=s.choices.indexOf("".concat(r));if((o=s.branching)!==null&&o!==void 0&&(l=o.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(c)){var d=s.branching.responseValues[c];return Number.isInteger(d)?d:d===To.End?To.End:a}}else if(s.type===U5.Rating){var f,p;if(typeof r!="number"||!Number.isInteger(r))throw new Error("The response type must be an integer");var g=function(v,b){if(b===3){if(v<1||v>3)throw new Error("The response must be in range 1-3");return v===1?"negative":v===2?"neutral":"positive"}if(b===5){if(v<1||v>5)throw new Error("The response must be in range 1-5");return v<=2?"negative":v===3?"neutral":"positive"}if(b===10){if(v<0||v>10)throw new Error("The response must be in range 0-10");return v<=6?"detractors":v<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 10")}(r,s.scale);if((f=s.branching)!==null&&f!==void 0&&(p=f.responseValues)!==null&&p!==void 0&&p.hasOwnProperty(g)){var y=s.branching.responseValues[g];return Number.isInteger(y)?y:y===To.End?To.End:a}}return a}return fe.warn(L3,"Falling back to next question index due to unexpected branching type"),a}},{key:"_canActivateRepeatedly",value:function(e){return Ds(qn.__PosthogExtensions__.canActivateRepeatedly)&&fe.warn(L3,"canActivateRepeatedly is not defined, must init before calling"),qn.__PosthogExtensions__.canActivateRepeatedly(e)}},{key:"canRenderSurvey",value:function(e){var n=this;Ds(this._surveyManager)?fe.warn(L3,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(function(r){var i=r.filter(function(s){return s.id===e})[0];n._surveyManager.canRenderSurvey(i)})}},{key:"renderSurvey",value:function(e,n){var r=this;Ds(this._surveyManager)?fe.warn(L3,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(function(i){var s=i.filter(function(a){return a.id===e})[0];r._surveyManager.renderSurvey(s,Ve==null?void 0:Ve.querySelector(n))})}}]),t}(),UNe=function(){function t(e){var n,r,i=this;Jt(this,t),de(this,"serverLimits",{}),de(this,"lastEventRateLimited",!1),de(this,"checkForLimiting",function(s){var a=s.text;if(a&&a.length)try{(JSON.parse(a).quota_limited||[]).forEach(function(o){fe.info("[RateLimiter] ".concat(o||"events"," is quota limited.")),i.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void fe.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(o==null?void 0:o.message,'"'),{text:a})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)===null||r===void 0?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}return Qt(t,[{key:"clientRateLimitContext",value:function(){var e,n,r,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=new Date().getTime(),a=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(mR))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:s};a.tokens+=(s-a.last)/1e3*this.captureEventsPerSecond,a.last=s,a.tokens>this.captureEventsBurstLimit&&(a.tokens=this.captureEventsBurstLimit);var o=a.tokens<1;return o||i||(a.tokens=Math.max(0,a.tokens-1)),!o||this.lastEventRateLimited||i||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,(r=this.instance.persistence)===null||r===void 0||r.set_property(mR,a),{isRateLimited:o,remainingTokens:a.tokens}}},{key:"isServerRateLimited",value:function(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),t}(),FNe=function(){return Ue({initialPathName:(Ss==null?void 0:Ss.pathname)||"",referringDomain:ii.referringDomain()},ii.campaignParams())},jNe=function(){function t(e,n,r){var i=this;Jt(this,t),de(this,"_onSessionIdCallback",function(s){var a=i._getStoredProps();if(!a||a.sessionId!==s){var o={sessionId:s,props:i._sessionSourceParamGenerator()};i._persistence.register(de({},fR,o))}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=r||FNe,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Qt(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[fR]}},{key:"getSessionProps",value:function(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),t}(),HNe=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],FV=function(t,e){if(!t)return!1;var n=t.toLowerCase();return HNe.concat(e||[]).some(function(r){var i=r.toLowerCase();return n.indexOf(i)!==-1})},xie=function(){function t(){Jt(this,t),this.clicks=[]}return Qt(t,[{key:"isRageClick",value:function(e,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}]),t}();function jV(t){var e;return t.id===vR||!((e=t.closest)===null||e===void 0||!e.call(t,"#"+vR))}var $Ne=function(){function t(e){var n,r=this;Jt(this,t),de(this,"rageclicks",new xie),de(this,"_enabledServerSide",!1),de(this,"_initialized",!1),de(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[cR]),ie==null||ie.addEventListener("beforeunload",function(){r.flush()})}return Qt(t,[{key:"flushIntervalMilliseconds",get:function(){var e=5e3;return wi(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}},{key:"isEnabled",get:function(){return rt(this.instance.config.capture_heatmaps)?rt(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}},{key:"startIfEnabled",value:function(){if(this.isEnabled){if(this._initialized)return;fe.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),this.getAndClearBuffer()}}},{key:"afterDecideResponse",value:function(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register(de({},cR,n)),this._enabledServerSide=n,this.startIfEnabled()}},{key:"getAndClearBuffer",value:function(){var e=this.buffer;return this.buffer=void 0,e}},{key:"_setupListeners",value:function(){var e=this;ie&&Ve&&(Uc(Ve,"click",function(n){return e._onClick(n||(ie==null?void 0:ie.event))},!1,!0),Uc(Ve,"mousemove",function(n){return e._onMouseMove(n||(ie==null?void 0:ie.event))},!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(e,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),a=function(o,l,c){for(var d=o;d&&!Md(d,"body");){if(d===c)return!1;if(Lt(l,ie==null?void 0:ie.getComputedStyle(d).position))return!0;d=gie(d)}return!1}(e.target,["fixed","sticky"],s);return{x:e.clientX+(a?0:i),y:e.clientY+(a?0:r),target_fixed:a,type:n}}},{key:"_onClick",value:function(e){var n;if(!jV(e.target)){var r=this._getProperties(e,"click");(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(Ue(Ue({},r),{},{type:"rageclick"})),this._capture(r)}}},{key:"_onMouseMove",value:function(e){var n=this;jV(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(function(){n._capture(n._getProperties(e,"mousemove"))},500))}},{key:"_capture",value:function(e){if(ie){var n=ie.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}},{key:"flush",value:function(){this.buffer&&!o6(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}]),t}(),VNe=function(){function t(e){var n=this;Jt(this,t),de(this,"_updateScrollData",function(){var r,i,s,a;n.context||(n.context={});var o=n.scrollElement(),l=n.scrollY(),c=o?Math.max(0,o.scrollHeight-o.clientHeight):0,d=l+((o==null?void 0:o.clientHeight)||0),f=(o==null?void 0:o.scrollHeight)||0;n.context.lastScrollY=Math.ceil(l),n.context.maxScrollY=Math.max(l,(r=n.context.maxScrollY)!==null&&r!==void 0?r:0),n.context.maxScrollHeight=Math.max(c,(i=n.context.maxScrollHeight)!==null&&i!==void 0?i:0),n.context.lastContentY=d,n.context.maxContentY=Math.max(d,(s=n.context.maxContentY)!==null&&s!==void 0?s:0),n.context.maxContentHeight=Math.max(f,(a=n.context.maxContentHeight)!==null&&a!==void 0?a:0)}),this.instance=e}return Qt(t,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var e=this.context;return setTimeout(this._updateScrollData,0),e}},{key:"startMeasuringScrollPosition",value:function(){ie==null||ie.addEventListener("scroll",this._updateScrollData,!0),ie==null||ie.addEventListener("scrollend",this._updateScrollData,!0),ie==null||ie.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return ie==null?void 0:ie.document.documentElement;var e,n=eo(qr(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=ie==null?void 0:ie.document.querySelector(r);if(i)return i}}catch(s){n.e(s)}finally{n.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return ie&&(ie.scrollY||ie.pageYOffset||ie.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return ie&&(ie.scrollX||ie.pageXOffset||ie.document.documentElement.scrollLeft)||0}}]),t}(),CS="$copy_autocapture";function bS(t,e){return e.length>t?e.slice(0,t)+"...":e}var cd,BNe=function(){function t(e){Jt(this,t),de(this,"_initialized",!1),de(this,"_isDisabledServerSide",null),de(this,"rageclicks",new xie),de(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}return Qt(t,[{key:"config",get:function(){var e,n,r=wi(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)===null||e===void 0?void 0:e.map(function(i){return new RegExp(i)}),r.url_ignorelist=(n=r.url_ignorelist)===null||n===void 0?void 0:n.map(function(i){return new RegExp(i)}),r}},{key:"_addDomEventHandlers",value:function(){var e=this;if(this.isBrowserSupported()){if(ie&&Ve){var n=function(i){i=i||(ie==null?void 0:ie.event);try{e._captureEvent(i)}catch(s){fe.error("Failed to capture event",s)}},r=function(i){i=i||(ie==null?void 0:ie.event),e._captureEvent(i,CS)};Uc(Ve,"submit",n,!1,!0),Uc(Ve,"change",n,!1,!0),Uc(Ve,"click",n,!1,!0),this.config.capture_copied_text&&(Uc(Ve,"copy",r,!1,!0),Uc(Ve,"cut",r,!1,!0))}}else fe.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(de({},sV,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}},{key:"setElementSelectors",value:function(e){this._elementSelectors=e}},{key:"getElementSelectors",value:function(e){var n,r=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(function(i){var s=Ve==null?void 0:Ve.querySelectorAll(i);s==null||s.forEach(function(a){e===a&&r.push(i)})}),r}},{key:"isEnabled",get:function(){var e,n,r=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[sV],i=this._isDisabledServerSide;if(yu(i)&&!nh(r)&&!this.instance.config.advanced_disable_decide)return!1;var s=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!s}},{key:"_previousElementSibling",value:function(e){if(e.previousElementSibling)return e.previousElementSibling;var n=e;do n=n.previousSibling;while(n&&!fP(n));return n}},{key:"_getAugmentPropertiesFromElement",value:function(e){if(!wR(e))return{};var n={};return yn(e.attributes,function(r){if(r.name&&r.name.indexOf("data-ph-capture-attribute")===0){var i=r.name.replace("data-ph-capture-attribute-",""),s=r.value;i&&s&&V2(s)&&(n[i]=s)}}),n}},{key:"_getPropertiesFromElement",value:function(e,n,r){var i,s=e.tagName.toLowerCase(),a={tag_name:s};SR.indexOf(s)>-1&&!r&&(s.toLowerCase()==="a"||s.toLowerCase()==="button"?a.$el_text=bS(1024,kV(e)):a.$el_text=bS(1024,A5(e)));var o=O5(e);o.length>0&&(a.classes=o.filter(function(p){return p!==""}));var l=(i=this.config)===null||i===void 0?void 0:i.element_attribute_ignorelist;yn(e.attributes,function(p){var g;if((!vie(e)||["name","id","class","aria-label"].indexOf(p.name)!==-1)&&(l==null||!l.includes(p.name))&&!n&&V2(p.value)&&(g=p.name,!Vi(g)||g.substring(0,10)!=="_ngcontent"&&g.substring(0,7)!=="_nghost")){var y=p.value;p.name==="class"&&(y=hP(y).join(" ")),a["attr__"+p.name]=bS(1024,y)}});for(var c=1,d=1,f=e;f=this._previousElementSibling(f);)c++,f.tagName===e.tagName&&d++;return a.nth_child=c,a.nth_of_type=d,a}},{key:"_getDefaultProperties",value:function(e){return{$event_type:e,$ce_version:1}}},{key:"_getEventTarget",value:function(e){return rt(e.target)?e.srcElement||null:(n=e.target)!==null&&n!==void 0&&n.shadowRoot?e.composedPath()[0]||null:e.target||null;var n}},{key:"_captureEvent",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,s=this._getEventTarget(e);mie(s)&&(s=s.parentNode||null),r==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var a=r===CS;if(s&&QAe(s,e,this.config,a,a?["copy","cut"]:void 0)){for(var o,l,c=[s],d=s;d.parentNode&&!Md(d,"body");)pie(d.parentNode)?(c.push(d.parentNode.host),d=d.parentNode.host):(c.push(d.parentNode),d=d.parentNode);var f,p,g=[],y={},v=!1;if(yn(c,function(N){var D=wR(N);N.tagName.toLowerCase()==="a"&&(f=N.getAttribute("href"),f=D&&V2(f)&&f),Lt(O5(N),"ph-no-capture")&&(v=!0),g.push(n._getPropertiesFromElement(N,n.instance.config.mask_all_element_attributes,n.instance.config.mask_all_text));var U=n._getAugmentPropertiesFromElement(N);ts(y,U)}),this.instance.config.mask_all_text||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?g[0].$el_text=kV(s):g[0].$el_text=A5(s)),f){var b,C;g[0].attr__href=f;var S=(b=P0(f))===null||b===void 0?void 0:b.host,R=ie==null||(C=ie.location)===null||C===void 0?void 0:C.host;S&&R&&S!==R&&(p=f)}if(v)return!1;var w=ts(this._getDefaultProperties(e.type),this._elementsChainAsString?{$elements_chain:rNe(g)}:{$elements:g},(o=g[0])!==null&&o!==void 0&&o.$el_text?{$el_text:(l=g[0])===null||l===void 0?void 0:l.$el_text}:{},p&&e.type==="click"?{$external_click_url:p}:{},y),I=this.getElementSelectors(s);if(I&&I.length>0&&(w.$element_selectors=I),r===CS){var k,x=fie(ie==null||(k=ie.getSelection())===null||k===void 0?void 0:k.toString()),L=e.type||"clipboard";if(!x)return!1;w.$selected_content=x,w.$copy_type=L}return this.instance.capture(r,w),!0}}}},{key:"isBrowserSupported",value:function(){return $a(Ve==null?void 0:Ve.querySelectorAll)}}]),t}(),qNe=function(){function t(e){var n=this;Jt(this,t),de(this,"_restoreXHRPatch",void 0),de(this,"_restoreFetchPatch",void 0),de(this,"_startCapturing",function(){rt(n._restoreXHRPatch)&&qn.postHogTracingHeadersPatchFns._patchXHR(n.instance.sessionManager),rt(n._restoreFetchPatch)&&qn.postHogTracingHeadersPatchFns._patchFetch(n.instance.sessionManager)}),this.instance=e}return Qt(t,[{key:"_loadScript",value:function(e){qn.postHogTracingHeadersPatchFns&&e(),this.instance.requestRouter.loadScript("/static/tracing-headers.js?v=".concat(La.LIB_VERSION),function(n){if(n)return fe.error("[TRACING-HEADERS] failed to load script",n);e()})}},{key:"startIfEnabledOrStop",value:function(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}]),t}();(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(cd||(cd={}));var GNe=function(){function t(e){Jt(this,t),this.instance=e}return Qt(t,[{key:"config",get:function(){return this.instance.config}},{key:"consent",get:function(){return this.getDnt()?cd.DENIED:this.storedConsent}},{key:"isOptedOut",value:function(){return this.consent===cd.DENIED||this.consent===cd.PENDING&&this.config.opt_out_capturing_by_default}},{key:"isOptedIn",value:function(){return!this.isOptedOut()}},{key:"optInOut",value:function(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}},{key:"reset",value:function(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}},{key:"storageKey",get:function(){var e=this.instance.config,n=e.token;return(e.opt_out_capturing_cookie_prefix||"__ph_opt_in_out_")+n}},{key:"storedConsent",get:function(){var e=this.storage.get(this.storageKey);return e==="1"?cd.GRANTED:e==="0"?cd.DENIED:cd.PENDING}},{key:"storage",get:function(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?Br:Qc;var n=e==="localStorage"?Qc:Br;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}},{key:"getDnt",value:function(){return!!this.config.respect_dnt&&!!Wre([jo==null?void 0:jo.doNotTrack,jo==null?void 0:jo.msDoNotTrack,qn.doNotTrack],function(e){return Lt([!0,1,"1","yes"],e)})}}]),t}(),qv="[Exception Autocapture]",KNe=function(){function t(e){var n,r=this;Jt(this,t),de(this,"originalOnUnhandledRejectionHandler",void 0),de(this,"startCapturing",function(){if(ie&&r.isEnabled&&!r.hasHandlers&&!r.isCapturing){var i=ie.posthogErrorWrappingFunctions.wrapOnError,s=ie.posthogErrorWrappingFunctions.wrapUnhandledRejection;if(i&&s)try{r.unwrapOnError=i(r.captureException.bind(r)),r.unwrapUnhandledRejection=s(r.captureException.bind(r))}catch(a){fe.error(qv+" failed to start",a),r.stopCapturing()}else fe.error(qv+" failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[aV]),this.startIfEnabled()}return Qt(t,[{key:"isEnabled",get:function(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}},{key:"isCapturing",get:function(){var e;return!(ie==null||(e=ie.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}},{key:"hasHandlers",get:function(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this.isCapturing&&(fe.info(qv+" enabled, starting..."),this.loadScript(this.startCapturing))}},{key:"loadScript",value:function(e){this.hasHandlers&&e(),this.instance.requestRouter.loadScript("/static/exception-autocapture.js?v=".concat(La.LIB_VERSION),function(n){if(n)return fe.error(qv+" failed to load script",n);e()})}},{key:"stopCapturing",value:function(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}},{key:"afterDecideResponse",value:function(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register(de({},aV,this.remoteEnabled)),this.startIfEnabled()}},{key:"captureException",value:function(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}]),t}(),HV=9e5,F1="[Web Vitals]",ZNe=function(){function t(e){var n,r=this;Jt(this,t),de(this,"_enabledServerSide",!1),de(this,"_initialized",!1),de(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),de(this,"_flushToCapture",function(){clearTimeout(r._delayedFlushTimer),r.buffer.metrics.length!==0&&(r.instance.capture("$web_vitals",r.buffer.metrics.reduce(function(i,s){var a;return Ue(Ue({},i),{},(de(a={},"$web_vitals_".concat(s.name,"_event"),Ue({},s)),de(a,"$web_vitals_".concat(s.name,"_value"),s.value),a))},{})),r.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),de(this,"_addToBuffer",function(i){var s,a=(s=r.instance.sessionManager)===null||s===void 0?void 0:s.checkAndGetSessionAndWindowId(!0);if(rt(a))fe.error(F1+"Could not read session ID. Dropping metrics!");else{r.buffer=r.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=r._currentURL();rt(o)||(Ds(i==null?void 0:i.name)||Ds(i==null?void 0:i.value)?fe.error(F1+"Invalid metric received",i):r._maxAllowedValue&&i.value>=r._maxAllowedValue?fe.error(F1+"Ignoring metric with value >= "+r._maxAllowedValue,i):(r.buffer.url!==o&&(r._flushToCapture(),r._delayedFlushTimer=setTimeout(r._flushToCapture,8e3)),rt(r.buffer.url)&&(r.buffer.url=o),r.buffer.firstMetricTimestamp=rt(r.buffer.firstMetricTimestamp)?Date.now():r.buffer.firstMetricTimestamp,r.buffer.metrics.push(Ue(Ue({},i),{},{$current_url:o,$session_id:a.sessionId,$window_id:a.windowId,timestamp:Date.now()})),r.buffer.metrics.length===4&&r._flushToCapture()))}}),de(this,"_startCapturing",function(){var i=qn.postHogWebVitalsCallbacks,s=i.onLCP,a=i.onCLS,o=i.onFCP,l=i.onINP;s&&a&&o&&l?(s(r._addToBuffer),a(r._addToBuffer),o(r._addToBuffer),l(r._addToBuffer),r._initialized=!0):fe.error(F1+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[lV]),this.startIfEnabled()}return Qt(t,[{key:"_maxAllowedValue",get:function(){var e=wi(this.instance.config.capture_performance)&&Oa(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:HV;return 0<e&&e<=6e4?HV:e}},{key:"isEnabled",get:function(){var e=wi(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return nh(e)?e:this._enabledServerSide}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(fe.info(F1+" enabled, starting..."),this.loadScript(this._startCapturing))}},{key:"afterDecideResponse",value:function(e){var n=wi(e.capturePerformance)&&!!e.capturePerformance.web_vitals;this.instance.persistence&&this.instance.persistence.register(de({},lV,n)),this._enabledServerSide=n,this.startIfEnabled()}},{key:"loadScript",value:function(e){ie.postHogWebVitalsCallbacks&&e(),this.instance.requestRouter.loadScript("/static/web-vitals.js?v=".concat(La.LIB_VERSION),function(n){n?fe.error(F1+" failed to load script",n):e()})}},{key:"_currentURL",value:function(){var e=ie?ie.location.href:void 0;return e||fe.error(F1+"Could not determine current URL"),e}}]),t}(),$V="/e/",zNe=function(){function t(e){var n;Jt(this,t),this.instance=e,this._endpointSuffix=((n=this.instance.persistence)===null||n===void 0?void 0:n.props[oV])||$V}return Qt(t,[{key:"endpoint",get:function(){return this.instance.requestRouter.endpointFor("api",this._endpointSuffix)}},{key:"afterDecideResponse",value:function(e){var n=e.autocaptureExceptions;this._endpointSuffix=wi(n)&&n.endpoint||$V,this.instance.persistence&&this.instance.persistence.register(de({},oV,this._endpointSuffix))}},{key:"sendExceptionEvent",value:function(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}]),t}(),A0={},VV=function(){},r2="posthog",Mie=!kNe&&(ri==null?void 0:ri.indexOf("MSIE"))===-1&&(ri==null?void 0:ri.indexOf("Mozilla"))===-1,BV=function(){var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Ve==null?void 0:Ve.location,n=e==null?void 0:e.hostname,!!Vi(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:VV,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Ss&&Vi(Ss==null?void 0:Ss.search)&&Ss.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(ie==null||(t=ie.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(r){var i="Bad HTTP status: "+r.statusCode+" "+r.text;fe.error(i)},get_device_id:function(r){return r},_onCapture:VV,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always",__add_tracing_headers:!1}},qV=function(t){var e={};rt(t.process_person)||(e.person_profiles=t.process_person),rt(t.xhr_headers)||(e.request_headers=t.xhr_headers),rt(t.cookie_name)||(e.persistence_name=t.cookie_name),rt(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=ts({},e,t);return qr(t.property_blacklist)&&(rt(t.property_denylist)?n.property_denylist=t.property_blacklist:qr(t.property_denylist)?n.property_denylist=[].concat(Jc(t.property_blacklist),Jc(t.property_denylist)):fe.error("Invalid value for property_denylist config: "+t.property_denylist)),n},WNe=function(){function t(){Jt(this,t),de(this,"__forceAllowLocalhost",!1)}return Qt(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){fe.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),t}(),Pie=function(){function t(){var e=this;Jt(this,t),de(this,"webPerformance",new WNe),de(this,"version",La.LIB_VERSION),de(this,"_internalEventEmitter",new Iie),this.config=BV(),this.decideEndpointWasHit=!1,this.SentryIntegration=PNe,this.sentryIntegration=function(n){return function(r,i){var s=Rie(r,i);return{name:Tie,processEvent:function(a){return s(a)}}}(e,n)},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this.featureFlags=new RAe(this),this.toolbar=new pNe(this),this.scrollManager=new VNe(this),this.pageViewManager=new ONe(this),this.surveys=new DNe(this),this.exceptions=new zNe(this),this.rateLimiter=new UNe(this),this.requestRouter=new MNe(this),this.consent=new GNe(this),this.people={set:function(n,r,i){var s=Vi(n)?de({},n,r):n;e.setPersonProperties(s),i==null||i({})},set_once:function(n,r,i){var s=Vi(n)?de({},n,r):n;e.setPersonProperties(void 0,s),i==null||i({})}},this.on("eventCaptured",function(n){return fe.info("send",n)})}return Qt(t,[{key:"init",value:function(e,n,r){if(r&&r!==r2){var i,s=(i=A0[r])!==null&&i!==void 0?i:new t;return s._init(e,n,r),A0[r]=s,A0[r2][r]=s,s}return this._init(e,n,r)}},{key:"_init",value:function(e){var n,r,i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(rt(e)||X$(e))return fe.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return fe.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(ts({},BV(),qV(s),{name:a,token:e})),this.config.on_xhr_error&&fe.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:Uo.GZipJS,this.persistence=new gS(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new gS(Ue(Ue({},this.config),{},{persistence:"sessionStorage"}));var o=Ue({},this.persistence.props),l=Ue({},this.sessionPersistence.props);if(this._requestQueue=new gNe(function(S){return i._send_retriable_request(S)}),this._retryQueue=new INe(this),this.__request_queue=[],this.sessionManager=new xNe(this.config,this.persistence),this.sessionPropsManager=new jNe(this.sessionManager,this.persistence),new qNe(this).startIfEnabledOrStop(),this.sessionRecording=new hNe(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new BNe(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new $Ne(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new ZNe(this),this.exceptionObserver=new KNe(this),this.exceptionObserver.startIfEnabled(),La.DEBUG=La.DEBUG||this.config.debug,La.DEBUG&&fe.info("Starting in debug mode",{this:this,config:s,thisC:Ue({},this.config),p:o,s:l}),this._sync_opt_out_with_persistence(),((n=s.bootstrap)===null||n===void 0?void 0:n.distinctID)!==void 0){var c,d,f=this.config.get_device_id(_d()),p=(c=s.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?f:s.bootstrap.distinctID;this.persistence.set_property(kc,(d=s.bootstrap)!==null&&d!==void 0&&d.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var g,y,v=Object.keys(((g=s.bootstrap)===null||g===void 0?void 0:g.featureFlags)||{}).filter(function(S){var R,w;return!((R=s.bootstrap)===null||R===void 0||(w=R.featureFlags)===null||w===void 0||!w[S])}).reduce(function(S,R){var w,I;return S[R]=((w=s.bootstrap)===null||w===void 0||(I=w.featureFlags)===null||I===void 0?void 0:I[R])||!1,S},{}),b=Object.keys(((y=s.bootstrap)===null||y===void 0?void 0:y.featureFlagPayloads)||{}).filter(function(S){return v[S]}).reduce(function(S,R){var w,I,k,x;return(w=s.bootstrap)!==null&&w!==void 0&&(I=w.featureFlagPayloads)!==null&&I!==void 0&&I[R]&&(S[R]=(k=s.bootstrap)===null||k===void 0||(x=k.featureFlagPayloads)===null||x===void 0?void 0:x[R]),S},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:b})}if(!this.get_distinct_id()){var C=this.config.get_device_id(_d());this.register_once({distinct_id:C,$device_id:C},""),this.persistence.set_property(kc,"anonymous")}return ie==null||(r=ie.addEventListener)===null||r===void 0||r.call(ie,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?LNe(this,function(){return i._loaded()}):this._loaded(),$a(this.config._onCapture)&&this.on("eventCaptured",function(S){return i.config._onCapture(S.event,S)}),this}},{key:"_afterDecideResponse",value:function(e){var n,r,i,s,a,o,l,c;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Lt(e.supportedCompression,Uo.GZipJS)?Uo.GZipJS:Lt(e.supportedCompression,Uo.Base64)?Uo.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),(i=this.autocapture)===null||i===void 0||i.afterDecideResponse(e),(s=this.heatmaps)===null||s===void 0||s.afterDecideResponse(e),(a=this.surveys)===null||a===void 0||a.afterDecideResponse(e),(o=this.webVitalsAutocapture)===null||o===void 0||o.afterDecideResponse(e),(l=this.exceptions)===null||l===void 0||l.afterDecideResponse(e),(c=this.exceptionObserver)===null||c===void 0||c.afterDecideResponse(e)}},{key:"_loaded",value:function(){var e=this,n=this.config.advanced_disable_decide;n||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(r){fe.critical("`loaded` function failed",r)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(function(){e.consent.isOptedIn()&&e._captureInitialPageview()},1),n||(new fNe(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||j2(this.__request_queue,function(n){return e._send_retriable_request(n)}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(e){var n=this;this.__loaded&&(Mie?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=D5(e.url,{ip:this.config.ip?1:0}),e.headers=Ue({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,function(r){var i,s,a,o=Ue({},r);o.timeout=o.timeout||6e4,o.url=D5(o.url,{_:new Date().getTime().toString(),ver:La.LIB_VERSION,compression:o.compression});var l=(i=o.transport)!==null&&i!==void 0?i:"XHR",c=(s=(a=Wre(O0,function(d){return d.transport===l}))===null||a===void 0?void 0:a.method)!==null&&s!==void 0?s:O0[0].method;if(!c)throw new Error("No available transport method");c(o)}(Ue(Ue({},e),{},{callback:function(r){var i,s,a;n.rateLimiter.checkForLimiting(r),r.statusCode>=400&&((s=(a=n.config).on_request_error)===null||s===void 0||s.call(a,r)),(i=e.callback)===null||i===void 0||i.call(e,r)}}))))}},{key:"_send_retriable_request",value:function(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}},{key:"_execute_array",value:function(e){var n,r=this,i=[],s=[],a=[];j2(e,function(l){l&&(n=l[0],qr(n)?a.push(l):$a(l)?l.call(r):qr(l)&&n==="alias"?i.push(l):qr(l)&&n.indexOf("capture")!==-1&&$a(r[n])?a.push(l):s.push(l))});var o=function(l,c){j2(l,function(d){if(qr(d[0])){var f=c;yn(d,function(p){f=f[p[0]].apply(f,p.slice(1))})}else this[d[0]].apply(this,d.slice(1))},c)};o(i,this),o(s,this),o(a,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!rt(e)&&Vi(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,o=(r==null?void 0:r.timestamp)||a,l={uuid:_d(),event:e,properties:this._calculate_event_properties(e,n||{},o)};s&&(l.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),r!=null&&r.$set&&(l.$set=r==null?void 0:r.$set);var c=this._calculate_set_once_properties(r==null?void 0:r.$set_once);c&&(l.$set_once=c),(l=wAe(l,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,rt(r==null?void 0:r.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=a);var d=Ue(Ue({},l.properties.$set),l.$set);o6(d)||this.setPersonPropertiesForFlags(d),this._internalEventEmitter.emit("eventCaptured",l);var f={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this._send_retriable_request(f):this._requestQueue.enqueue(f),l}fe.critical("This capture call is ignored due to client rate limiting.")}}else fe.error("No event name provided to posthog.capture")}else fe.uninitializedWarning("posthog.capture")}},{key:"_addCaptureHook",value:function(e){this.on("eventCaptured",function(n){return e(n.event,n)})}},{key:"_calculate_event_properties",value:function(e,n,r){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var i=this.persistence.remove_event_timer(e),s=Ue({},n);if(s.token=this.config.token,e==="$snapshot"){var a=Ue(Ue({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!Vi(s.distinct_id)&&!Oa(s.distinct_id)||X$(s.distinct_id))&&fe.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var o=ii.properties();if(this.sessionManager){var l=this.sessionManager.checkAndGetSessionAndWindowId(),c=l.sessionId,d=l.windowId;s.$session_id=c,s.$window_id=d}if(this.requestRouter.region===rh.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var f=this.sessionPropsManager.getSessionProps();s=ts(s,f)}if(!this.config.disable_scroll_properties){var p={};e==="$pageview"?p=this.pageViewManager.doPageView(r):e==="$pageleave"&&(p=this.pageViewManager.doPageLeave(r)),s=ts(s,p)}if(e==="$pageview"&&Ve&&(s.title=Ve.title),!rt(i)){var g=r.getTime()-i;s.$duration=parseFloat((g/1e3).toFixed(3))}ri&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=ts({},o,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),qr(this.config.property_denylist)?yn(this.config.property_denylist,function(v){delete s[v]}):fe.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var y=this.config.sanitize_properties;return y&&(s=y(s,e)),s.$process_person_profile=this._hasPersonProcessing(),s}},{key:"_calculate_set_once_properties",value:function(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=ts({},this.persistence.get_initial_props(),e||{});return o6(n)?void 0:n}},{key:"register",value:function(e,n){var r;(r=this.persistence)===null||r===void 0||r.register(e,n)}},{key:"register_once",value:function(e,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(e,n,r)}},{key:"register_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}},{key:"unregister",value:function(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}},{key:"unregister_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(de({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"getFeatureFlagPayload",value:function(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}},{key:"getEarlyAccessFeatures",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}},{key:"on",value:function(e,n){return this._internalEventEmitter.on(e,n)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(e))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}},{key:"getActiveMatchingSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}},{key:"renderSurvey",value:function(e,n){this.surveys.renderSurvey(e,n)}},{key:"canRenderSurvey",value:function(e){this.surveys.canRenderSurvey(e)}},{key:"getNextSurveyStep",value:function(e,n,r){return this.surveys.getNextSurveyStep(e,n,r)}},{key:"identify",value:function(e,n,r){if(!this.__loaded||!this.persistence)return fe.uninitializedWarning("posthog.identify");if(Oa(e)&&(e=e.toString(),fe.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))fe.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(t0)&&(this.unregister(t0),this.register({distinct_id:e}));var a=(this.persistence.get_property(kc)||"anonymous")==="anonymous";e!==i&&a?(this.persistence.set_property(kc,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(I5))}}else fe.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}},{key:"group",value:function(e,n,r){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ue(Ue({},i),{},de({},e,n))}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags(de({},e,r))),i[e]===n||r||this.reloadFeatureFlags()}}else fe.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var n,r,i,s;if(fe.info("reset"),!this.__loaded)return fe.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.persistence)===null||i===void 0||i.set_property(kc,"anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId();var o=this.config.get_device_id(_d());this.register_once({distinct_id:o,$device_id:e?o:a},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var n=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=n.sessionId,i=n.sessionStartTimestamp,s=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(r));if(e!=null&&e.withTimestamp&&i){var a,o=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!i)return s;var l=Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0);s+="?t=".concat(l)}return s}},{key:"alias",value:function(e,n){return e===this.get_property(Yre)?(fe.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(rt(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(t0,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(fe.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}},{key:"set_config",value:function(e){var n,r,i,s,a=Ue({},this.config);wi(e)&&(ts(this.config,qV(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new gS(Ue(Ue({},this.config),{},{persistence:"sessionStorage"})),Br.is_supported()&&Br.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(La.DEBUG=!0,fe.info("set_config",{config:e,oldConfig:a,newConfig:Ue({},this.config)})),(r=this.sessionRecording)===null||r===void 0||r.startIfEnabledOrStop(),(i=this.autocapture)===null||i===void 0||i.startIfEnabled(),(s=this.heatmaps)===null||s===void 0||s.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}},{key:"startSessionRecording",value:function(e){var n,r=nh(e)&&e;if(r||e!=null&&e.sampling){var i,s,a=(i=this.sessionManager)===null||i===void 0?void 0:i.checkAndGetSessionAndWindowId();(s=this.persistence)===null||s===void 0||s.register(de({},M0,!0)),fe.info("Session recording started with sampling override for session: ",a==null?void 0:a.sessionId)}(r||e!=null&&e.linked_flag)&&((n=this.sessionRecording)===null||n===void 0||n.overrideLinkedFlag(),fe.info("Session recording started with linked_flags override")),this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}},{key:"captureException",value:function(e,n){var r=$a(qn.parseErrorAsProperties)?qn.parseErrorAsProperties([e.message,void 0,void 0,void 0,e]):Ue({$exception_type:e.name,$exception_message:e.message,$exception_level:"error"},n);this.exceptions.sendExceptionEvent(r)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}},{key:"getSessionProperty",value:function(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}},{key:"toString",value:function(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:r2;return n!==r2&&(n=r2+"."+n),n}},{key:"_isIdentified",value:function(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(kc))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(kc))==="identified"}},{key:"_hasPersonProcessing",value:function(){var e,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&o6(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[t0])&&((r=this.persistence)===null||r===void 0||(i=r.props)===null||i===void 0||!i[x5]))}},{key:"_shouldCapturePageleave",value:function(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}},{key:"createPersonProfile",value:function(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}},{key:"_requirePersonProcessing",value:function(e){return this.config.person_profiles==="never"?(fe.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(x5,!0),!0)}},{key:"_sync_opt_out_with_persistence",value:function(){var e,n,r,i,s=this.consent.isOptedOut(),a=this.config.opt_out_persistence_by_default,o=this.config.disable_persistence||s&&!!a;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==o&&((r=this.persistence)===null||r===void 0||r.set_disabled(o)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==o&&((i=this.sessionPersistence)===null||i===void 0||i.set_disabled(o))}},{key:"opt_in_capturing",value:function(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(rt(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}},{key:"opt_out_capturing",value:function(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}},{key:"has_opted_in_capturing",value:function(){return this.consent.isOptedIn()}},{key:"has_opted_out_capturing",value:function(){return this.consent.isOptedOut()}},{key:"clear_opt_in_out_capturing",value:function(){this.consent.reset(),this._sync_opt_out_with_persistence()}},{key:"_is_bot",value:function(){return jo?function(e,n){if(!e)return!1;var r=e.userAgent;if(r&&FV(r,n))return!0;try{var i=e==null?void 0:e.userAgentData;if(i!=null&&i.brands&&i.brands.some(function(s){return FV(s==null?void 0:s.brand,n)}))return!0}catch{}return!!e.webdriver}(jo,this.config.custom_blocked_useragents):void 0}},{key:"_captureInitialPageview",value:function(){Ve&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Ve.title},{send_instantly:!0}))}},{key:"debug",value:function(e){e===!1?(ie==null||ie.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(ie==null||ie.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=SAe(t.prototype[e[n]])})(Pie,["identify"]);var GV,YNe=(GV=A0[r2]=new Pie,function(){function t(){t.done||(t.done=!0,Mie=!1,yn(A0,function(e){e._dom_loaded()}))}Ve!=null&&Ve.addEventListener&&(Ve.readyState==="complete"?t():Ve.addEventListener("DOMContentLoaded",t,!1)),ie&&Uc(ie,"load",t,!0)}(),GV);class JNe extends MI{constructor(){super(...arguments),this.eventBacklogs=new Map}emit(e,...n){const r=super.emit(e,...n);if(!r){const i=this.eventBacklogs.get(e);i?i.push(n):this.eventBacklogs.set(e,[n])}return r}on(e,n){super.on(e,n);const r=this.eventBacklogs.get(e);if(r){for(const i of r)super.emit(e,...i);this.eventBacklogs.delete(e)}return this}addListener(e,n){return this.on(e,n)}once(e,n){super.once(e,n);const r=this.eventBacklogs.get(e);return r&&(super.emit(e,...r[0]),r.length===1?this.eventBacklogs.delete(e):r.shift()),this}}const QNe="/assets/cat-4r_NkDcK.ogg",XNe="/assets/cat-Dd8bv_2W.mp3",eDe="/assets/clap-AxCMZLTd.ogg",tDe="/assets/clap-Dxm5qGyl.mp3",nDe="/assets/crickets-DUJdcuUa.ogg",rDe="/assets/crickets-CcwrRdbq.mp3",iDe="/assets/dog-CxIWtkNX.ogg",sDe="/assets/dog-BoQdnF-w.mp3",aDe="/assets/generic-BBbS3Wph.ogg",oDe="/assets/generic-BFeSb6fL.mp3",lDe="/assets/lightbulb-BIeJtAR_.ogg",cDe="/assets/lightbulb-BrnY00qi.mp3",uDe="/assets/party-D7rIOhAQ.ogg",dDe="/assets/party-BZPeTgC3.mp3",hDe="/assets/deer-DPSlVch4.ogg",fDe="/assets/deer-91r1Gyrx.mp3",mDe="/assets/rock-BVCJXNC-.ogg",pDe="/assets/rock-CHdnB31m.mp3",gDe="/assets/wave-FiiOzicp.ogg",vDe="/assets/wave-Bzf1LSMH.mp3",gP="io.element.call.reaction",MR={name:"generic",emoji:"",sound:{mp3:oDe,ogg:aDe}},PR=5,kg=[{emoji:"👍",name:"thumbsup",alias:["+1","yes","thumbs up"]},{emoji:"🎉",name:"party",alias:["hurray","success"],sound:{ogg:uDe,mp3:dDe}},{emoji:"👏",name:"clapping",alias:["celebrate","success"],sound:{ogg:eDe,mp3:tDe}},{emoji:"🐶",name:"dog",alias:["doggo","pupper","woofer","bark"],sound:{ogg:iDe,mp3:sDe}},{emoji:"🐱",name:"cat",alias:["meow","kitty"],sound:{ogg:QNe,mp3:XNe}},{emoji:"💡",name:"lightbulb",alias:["bulb","light","idea","ping"],sound:{ogg:lDe,mp3:cDe}},{emoji:"🦗",name:"crickets",alias:["awkward","silence"],sound:{ogg:nDe,mp3:rDe}},{emoji:"👎",name:"thumbsdown",alias:["-1","no","thumbs no"]},{emoji:"😵‍💫",name:"dizzy",alias:["dazed","confused"]},{emoji:"👌",name:"ok",alias:["okay","cool"]},{emoji:"🥰",name:"heart",alias:["heart","love","smiling"]},{emoji:"😄",name:"laugh",alias:["giggle","joy","smiling"]},{emoji:"🦌",name:"deer",alias:["stag","doe","bleat"],sound:{ogg:hDe,mp3:fDe}},{emoji:"🤘",name:"rock",alias:["cool","horns","guitar"],sound:{ogg:mDe,mp3:pDe}},{emoji:"👋",name:"wave",alias:["hand","waving"],sound:{ogg:gDe,mp3:vDe}}];var ui=(t=>(t.JoinCall="io.element.join",t.HangupCall="im.vector.hangup",t.Close="io.element.close",t.TileLayout="io.element.tile_layout",t.SpotlightLayout="io.element.spotlight_layout",t.DeviceMute="io.element.device_mute",t))(ui||{});const Xe=(()=>{try{const{widgetId:t,parentUrl:e}=Xa();if(t&&e){const n=new URL(e).origin;A.info("Widget API is available");const r=new X2e(t,n);r.requestCapability(p0.AlwaysOnScreen);const i=new JNe;[sr.ThemeChange,"io.element.join","im.vector.hangup","io.element.tile_layout","io.element.spotlight_layout","io.element.device_mute"].forEach(C=>{r.on(`action:${C}`,S=>{S.preventDefault(),i.emit(C,S)})});const{roomId:s,userId:a,deviceId:o,baseUrl:l,e2eEnabled:c,allowIceFallback:d}=Xa();if(!s)throw new Error("Room ID must be supplied");if(!a)throw new Error("User ID must be supplied");if(!o)throw new Error("Device ID must be supplied");if(!l)throw new Error("Base URL must be supplied");const f=["org.matrix.rageshake_request",ee.CallEncryptionKeysPrefix,ee.Reaction,ee.RoomRedaction,gP],p=[a,`_${a}_${o}`,`${a}_${o}`].map(C=>({eventType:ee.GroupCallMemberPrefix,stateKey:C})),g=[{eventType:ee.RoomCreate},{eventType:ee.RoomMember},{eventType:ee.RoomEncryption},{eventType:ee.GroupCallMemberPrefix}],y=[ee.CallInvite,ee.CallCandidates,ee.CallAnswer,ee.CallHangup,ee.CallReject,ee.CallSelectAnswer,ee.CallNegotiate,ee.CallSDPStreamMetadataChanged,ee.CallSDPStreamMetadataChangedPrefix,ee.CallReplaces,ee.CallEncryptionKeysPrefix],v=Rz(r,{sendEvent:f,receiveEvent:f,sendState:p,receiveState:g,sendToDevice:y,receiveToDevice:y,turnServers:!1,sendDelayedEvents:!0,updateDelayedEvents:!0},s,{baseUrl:l,userId:a,deviceId:o,timelineSupport:!0,useE2eForGroupCall:c,fallbackICEServerAllowed:d},!1);return{api:r,lazyActions:i,client:(async()=>(await At.init(),await v.startClient({clientWellKnownPollPeriod:60*10}),v))()}}else return A.info("No widget API available"),null}catch(t){return A.warn("Continuing without the widget API",t),null}})();class yDe{constructor(){this.cache={startTime:new Date(0),maxParticipantsCount:0}}cacheStartCall(e){this.cache.startTime=e}cacheParticipantCountChanged(e){this.cache.maxParticipantsCount=Math.max(e,this.cache.maxParticipantsCount)}track(e,n,r,i){It.instance.trackEvent({eventName:"CallEnded",callId:e,callParticipantsMax:this.cache.maxParticipantsCount,callParticipantsOnLeave:n,callDuration:(Date.now()-this.cache.startTime.getTime())/1e3,roomEventEncryptionKeysSent:i.statistics.counters.roomEventEncryptionKeysSent,roomEventEncryptionKeysReceived:i.statistics.counters.roomEventEncryptionKeysReceived,roomEventEncryptionKeysReceivedAverageAge:i.statistics.counters.roomEventEncryptionKeysReceived>0?i.statistics.totals.roomEventEncryptionKeysReceivedTotalAge/i.statistics.counters.roomEventEncryptionKeysReceived:0},{send_instantly:r})}}class _De{track(e){It.instance.trackEvent({eventName:"CallStarted",callId:e})}}class CDe{constructor(){this.cache={signupStart:new Date(0),signupEnd:new Date(0)}}cacheSignupStart(e){this.cache.signupStart=e}getSignupEndTime(){return this.cache.signupEnd}cacheSignupEnd(e){this.cache.signupEnd=e}track(){It.instance.trackEvent({eventName:"Signup",signupDuration:Date.now()-this.cache.signupStart.getTime()}),It.instance.setRegistrationType(xy.Registered)}}class bDe{track(){It.instance.trackEvent({eventName:"Login"}),It.instance.setRegistrationType(xy.Registered)}}class EDe{track(e,n){It.instance.trackEvent({eventName:"MuteMicrophone",targetMuteState:e?"mute":"unmute",callId:n})}}class SDe{track(e,n){It.instance.trackEvent({eventName:"MuteCamera",targetMuteState:e?"mute":"unmute",callId:n})}}class wDe{track(e){It.instance.trackEvent({eventName:"UndecryptableToDeviceEvent",callId:e})}}class kDe{track(e,n,r){It.instance.trackEvent({eventName:"QualitySurvey",callId:e,feedbackText:n,stars:r})}}class TDe{track(e){It.instance.trackEvent({eventName:"CallDisconnected",reason:e})}}class RDe{constructor(){this.connectStart=0,this.websocketConnected=0}cacheConnectStart(){this.connectStart=Date.now()}cacheWsConnect(){this.websocketConnected=Date.now()}track(e={log:!1}){const n=Date.now(),r=n-this.connectStart,i=this.websocketConnected-this.connectStart,s=n-this.websocketConnected;It.instance.trackEvent({eventName:"CallConnectDuration",totalDuration:r,websocketDuration:i,peerConnectionDuration:s}),e.log&&A.log(`Time to connect:
total: ${r}ms
peerConnection: ${i}ms
websocket: ${s}ms`)}}function an(t){return typeof t=="function"}function Lie(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ES=Lie(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function F5(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var y4=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Zd(a),l=o.next();!l.done;l=o.next()){var c=l.value;c.remove(this)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(an(d))try{d()}catch(v){s=v instanceof ES?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var p=Zd(f),g=p.next();!g.done;g=p.next()){var y=g.value;try{KV(y)}catch(v){s=s??[],v instanceof ES?s=Qa(Qa([],Ja(s)),Ja(v.errors)):s.push(v)}}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}if(s)throw new ES(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)KV(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&F5(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&F5(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Oie=y4.EMPTY;function Aie(t){return t instanceof y4||t&&"closed"in t&&an(t.remove)&&an(t.add)&&an(t.unsubscribe)}function KV(t){an(t)?t():t.unsubscribe()}var IDe={Promise:void 0},xDe={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Qa([t,e],Ja(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function Nie(t){xDe.setTimeout(function(){throw t})}function j5(){}function u6(t){t()}var vP=function(t){so(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Aie(n)&&n.add(r)):r.destination=LDe,r}return e.create=function(n,r,i){return new Tg(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(y4),MDe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Gv(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Gv(r)}else Gv(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Gv(n)}},t}(),Tg=function(t){so(e,t);function e(n,r,i){var s=t.call(this)||this,a;return an(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,s.destination=new MDe(a),s}return e}(vP);function Gv(t){Nie(t)}function PDe(t){throw t}var LDe={closed:!0,next:j5,error:PDe,complete:j5},yP=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function c1(t){return t}function ODe(t){return t.length===0?c1:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Dn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=NDe(e)?e:new Tg(e,n,r);return u6(function(){var a=i,o=a.operator,l=a.source;s.add(o?o.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=ZV(n),new n(function(i,s){var a=new Tg({next:function(o){try{e(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[yP]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ODe(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=ZV(e),new e(function(r,i){var s;n.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function ZV(t){var e;return(e=t??IDe.Promise)!==null&&e!==void 0?e:Promise}function ADe(t){return t&&an(t.next)&&an(t.error)&&an(t.complete)}function NDe(t){return t&&t instanceof vP||ADe(t)&&Aie(t)}function DDe(t){return an(t==null?void 0:t.lift)}function mi(t){return function(e){if(DDe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _r(t,e,n,r,i){return new UDe(t,e,n,r,i)}var UDe=function(t){so(e,t);function e(n,r,i,s,a,o){var l=t.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=r?function(c){try{r(c)}catch(d){n.error(d)}}:t.prototype._next,l._error=s?function(c){try{s(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(vP),FDe=Lie(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),li=function(t){so(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new zV(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new FDe},e.prototype.next=function(n){var r=this;u6(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Zd(r.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(n)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;u6(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;u6(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,a=i.isStopped,o=i.observers;return s||a?Oie:(this.currentObservers=null,o.push(n),new y4(function(){r.currentObservers=null,F5(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?n.error(s):a&&n.complete()},e.prototype.asObservable=function(){var n=new Dn;return n.source=this,n},e.create=function(n,r){return new zV(n,r)},e}(Dn),zV=function(t){so(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Oie},e}(li),qi=function(t){so(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(li),_P={now:function(){return(_P.delegate||Date).now()},delegate:void 0},jDe=function(t){so(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=_P);var s=t.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return e.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,a=r._infiniteTimeWindow,o=r._timestampProvider,l=r._windowTime;i||(s.push(n),!a&&s.push(o.now()+l)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,a=i._buffer,o=a.slice(),l=0;l<o.length&&!n.closed;l+=s?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,a=n._infiniteTimeWindow,o=(a?1:2)*r;if(r<1/0&&o<s.length&&s.splice(0,s.length-o),!a){for(var l=i.now(),c=0,d=1;d<s.length&&s[d]<=l;d+=2)c=d;c&&s.splice(0,c+1)}},e}(li),HDe=function(t){so(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(y4),WV={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Qa([t,e],Ja(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},$De=function(t){so(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),WV.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&WV.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,F5(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(HDe),YV=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=_P.now,t}(),VDe=function(t){so(e,t);function e(n,r){r===void 0&&(r=YV.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(YV),Iy=new VDe($De),BDe=Iy,H5=new Dn(function(t){return t.complete()});function Die(t){return t&&an(t.schedule)}function CP(t){return t[t.length-1]}function bP(t){return an(CP(t))?t.pop():void 0}function _4(t){return Die(CP(t))?t.pop():void 0}function qDe(t,e){return typeof CP(t)=="number"?t.pop():e}var EP=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Uie(t){return an(t==null?void 0:t.then)}function Fie(t){return an(t[yP])}function jie(t){return Symbol.asyncIterator&&an(t==null?void 0:t[Symbol.asyncIterator])}function Hie(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function GDe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $ie=GDe();function Vie(t){return an(t==null?void 0:t[$ie])}function Bie(t){return lM(this,arguments,function(){var n,r,i,s;return cy(this,function(a){switch(a.label){case 0:n=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Yc(n.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,Yc(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Yc(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function qie(t){return an(t==null?void 0:t.getReader)}function Zr(t){if(t instanceof Dn)return t;if(t!=null){if(Fie(t))return KDe(t);if(EP(t))return ZDe(t);if(Uie(t))return zDe(t);if(jie(t))return Gie(t);if(Vie(t))return WDe(t);if(qie(t))return YDe(t)}throw Hie(t)}function KDe(t){return new Dn(function(e){var n=t[yP]();if(an(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZDe(t){return new Dn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zDe(t){return new Dn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,Nie)})}function WDe(t){return new Dn(function(e){var n,r;try{for(var i=Zd(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function Gie(t){return new Dn(function(e){JDe(t,e).catch(function(n){return e.error(n)})})}function YDe(t){return Gie(Bie(t))}function JDe(t,e){var n,r,i,s;return oM(this,void 0,void 0,function(){var a,o;return cy(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=cM(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),i={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Pd(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Kie(t,e){return e===void 0&&(e=0),mi(function(n,r){n.subscribe(_r(r,function(i){return Pd(r,t,function(){return r.next(i)},e)},function(){return Pd(r,t,function(){return r.complete()},e)},function(i){return Pd(r,t,function(){return r.error(i)},e)}))})}function Zie(t,e){return e===void 0&&(e=0),mi(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function QDe(t,e){return Zr(t).pipe(Zie(e),Kie(e))}function XDe(t,e){return Zr(t).pipe(Zie(e),Kie(e))}function eUe(t,e){return new Dn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function tUe(t,e){return new Dn(function(n){var r;return Pd(n,e,function(){r=t[$ie](),Pd(n,e,function(){var i,s,a;try{i=r.next(),s=i.value,a=i.done}catch(o){n.error(o);return}a?n.complete():n.next(s)},0,!0)}),function(){return an(r==null?void 0:r.return)&&r.return()}})}function zie(t,e){if(!t)throw new Error("Iterable cannot be null");return new Dn(function(n){Pd(n,e,function(){var r=t[Symbol.asyncIterator]();Pd(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function nUe(t,e){return zie(Bie(t),e)}function rUe(t,e){if(t!=null){if(Fie(t))return QDe(t,e);if(EP(t))return eUe(t,e);if(Uie(t))return XDe(t,e);if(jie(t))return zie(t,e);if(Vie(t))return tUe(t,e);if(qie(t))return nUe(t,e)}throw Hie(t)}function C4(t,e){return e?rUe(t,e):Zr(t)}function Ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_4(t);return C4(t,n)}function iUe(t){return!!t&&(t instanceof Dn||an(t.lift)&&an(t.subscribe))}function sUe(t){return t instanceof Date&&!isNaN(t)}function Ne(t,e){return mi(function(n,r){var i=0;n.subscribe(_r(r,function(s){r.next(t.call(e,s,i++))}))})}var aUe=Array.isArray;function oUe(t,e){return aUe(e)?t.apply(void 0,Qa([],Ja(e))):t(e)}function SP(t){return Ne(function(e){return oUe(t,e)})}var lUe=Array.isArray,cUe=Object.getPrototypeOf,uUe=Object.prototype,dUe=Object.keys;function Wie(t){if(t.length===1){var e=t[0];if(lUe(e))return{args:e,keys:null};if(hUe(e)){var n=dUe(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function hUe(t){return t&&typeof t=="object"&&cUe(t)===uUe}function Yie(t,e){return t.reduce(function(n,r,i){return n[r]=e[i],n},{})}function Bn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_4(t),r=bP(t),i=Wie(t),s=i.args,a=i.keys;if(s.length===0)return C4([],n);var o=new Dn(fUe(s,n,a?function(l){return Yie(a,l)}:c1));return r?o.pipe(SP(r)):o}function fUe(t,e,n){return n===void 0&&(n=c1),function(r){JV(e,function(){for(var i=t.length,s=new Array(i),a=i,o=i,l=function(d){JV(e,function(){var f=C4(t[d],e),p=!1;f.subscribe(_r(r,function(g){s[d]=g,p||(p=!0,o--),o||r.next(n(s.slice()))},function(){--a||r.complete()}))},r)},c=0;c<i;c++)l(c)},r)}}function JV(t,e,n){t?Pd(n,t,e):e()}function mUe(t,e,n,r,i,s,a,o){var l=[],c=0,d=0,f=!1,p=function(){f&&!l.length&&!c&&e.complete()},g=function(v){return c<r?y(v):l.push(v)},y=function(v){c++;var b=!1;Zr(n(v,d++)).subscribe(_r(e,function(C){e.next(C)},function(){b=!0},void 0,function(){if(b)try{c--;for(var C=function(){var S=l.shift();a||y(S)};l.length&&c<r;)C();p()}catch(S){e.error(S)}}))};return t.subscribe(_r(e,g,function(){f=!0,p()})),function(){}}function b4(t,e,n){return n===void 0&&(n=1/0),an(e)?b4(function(r,i){return Ne(function(s,a){return e(r,s,i,a)})(Zr(t(r,i)))},n):(typeof e=="number"&&(n=e),mi(function(r,i){return mUe(r,i,t,n)}))}function Jie(t){return t===void 0&&(t=1/0),b4(c1,t)}function pUe(){return Jie(1)}function $5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pUe()(C4(t,_4(t)))}function gUe(t){return new Dn(function(e){Zr(t()).subscribe(e)})}function vUe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bP(t),r=Wie(t),i=r.args,s=r.keys,a=new Dn(function(o){var l=i.length;if(!l){o.complete();return}for(var c=new Array(l),d=l,f=l,p=function(y){var v=!1;Zr(i[y]).subscribe(_r(o,function(b){v||(v=!0,f--),c[y]=b},function(){return d--},void 0,function(){(!d||!v)&&(f||o.next(s?Yie(s,c):c),o.complete())}))},g=0;g<l;g++)p(g)});return n?a.pipe(SP(n)):a}var yUe=["addListener","removeListener"],_Ue=["addEventListener","removeEventListener"],CUe=["on","off"];function Nl(t,e,n,r){if(an(n)&&(r=n,n=void 0),r)return Nl(t,e,n).pipe(SP(r));var i=Ja(SUe(t)?_Ue.map(function(o){return function(l){return t[o](e,l,n)}}):bUe(t)?yUe.map(QV(t,e)):EUe(t)?CUe.map(QV(t,e)):[],2),s=i[0],a=i[1];if(!s&&EP(t))return b4(function(o){return Nl(o,e,n)})(Zr(t));if(!s)throw new TypeError("Invalid event target");return new Dn(function(o){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return o.next(1<c.length?c:c[0])};return s(l),function(){return a(l)}})}function QV(t,e){return function(n){return function(r){return t[n](e,r)}}}function bUe(t){return an(t.addListener)&&an(t.removeListener)}function EUe(t){return an(t.on)&&an(t.off)}function SUe(t){return an(t.addEventListener)&&an(t.removeEventListener)}function Cd(t,e,n){t===void 0&&(t=0),n===void 0&&(n=BDe);var r=-1;return e!=null&&(Die(e)?n=e:r=e),new Dn(function(i){var s=sUe(t)?+t-n.now():t;s<0&&(s=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function LR(t,e){return t===void 0&&(t=0),e===void 0&&(e=Iy),t<0&&(t=0),Cd(t,t,e)}function Rg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_4(t),r=qDe(t,1/0),i=t;return i.length?i.length===1?Zr(i[0]):Jie(r)(C4(i,n)):H5}var wUe=Array.isArray;function kUe(t){return t.length===1&&wUe(t[0])?t[0]:t}function Bo(t,e){return mi(function(n,r){var i=0;n.subscribe(_r(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}function TUe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=kUe(t),t.length===1?Zr(t[0]):new Dn(RUe(t))}function RUe(t){return function(e){for(var n=[],r=function(s){n.push(Zr(t[s]).subscribe(_r(e,function(a){if(n){for(var o=0;o<n.length;o++)o!==s&&n[o].unsubscribe();n=null}e.next(a)})))},i=0;n&&!e.closed&&i<t.length;i++)r(i)}}function IUe(t){return mi(function(e,n){var r=!1,i=null,s=null,a=!1,o=function(){if(s==null||s.unsubscribe(),s=null,r){r=!1;var c=i;i=null,n.next(c)}a&&n.complete()},l=function(){s=null,a&&n.complete()};e.subscribe(_r(n,function(c){r=!0,i=c,s||Zr(t(c)).subscribe(s=_r(n,o,l))},function(){a=!0,(!r||!s||s.closed)&&n.complete()}))})}function xUe(t,e,n,r,i){return function(s,a){var o=n,l=e,c=0;s.subscribe(_r(a,function(d){var f=c++;l=o?t(l,d,f):(o=!0,d),a.next(l)},i))}}function OR(t){return t<=0?function(){return H5}:mi(function(e,n){var r=0;e.subscribe(_r(n,function(i){++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function MUe(t){return Ne(function(){return t})}function PUe(t,e){return b4(function(n,r){return Zr(t(n,r)).pipe(OR(1),MUe(n))})}function LUe(t,e){e===void 0&&(e=Iy);var n=Cd(t,e);return PUe(function(){return n})}function Pl(t,e){return e===void 0&&(e=c1),t=t??OUe,mi(function(n,r){var i,s=!0;n.subscribe(_r(r,function(a){var o=e(a);(s||!t(i,o))&&(s=!1,i=o,r.next(a))}))})}function OUe(t,e){return t===e}function AUe(t,e){return Pl(function(n,r){return n[t]===r[t]})}function NUe(t){return mi(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function _c(t,e){return mi(xUe(t,e,arguments.length>=2,!0))}function DUe(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new li}:e,r=t.resetOnError,i=r===void 0?!0:r,s=t.resetOnComplete,a=s===void 0?!0:s,o=t.resetOnRefCountZero,l=o===void 0?!0:o;return function(c){var d,f,p,g=0,y=!1,v=!1,b=function(){f==null||f.unsubscribe(),f=void 0},C=function(){b(),d=p=void 0,y=v=!1},S=function(){var R=d;C(),R==null||R.unsubscribe()};return mi(function(R,w){g++,!v&&!y&&b();var I=p=p??n();w.add(function(){g--,g===0&&!v&&!y&&(f=SS(S,l))}),I.subscribe(w),!d&&g>0&&(d=new Tg({next:function(k){return I.next(k)},error:function(k){v=!0,b(),f=SS(C,i,k),I.error(k)},complete:function(){y=!0,b(),f=SS(C,a),I.complete()}}),Zr(R).subscribe(d))})(c)}}function SS(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new Tg({next:function(){i.unsubscribe(),t()}});return Zr(e.apply(void 0,Qa([],Ja(n)))).subscribe(i)}}function UUe(t,e,n){var r,i,s,a,o=!1;return t&&typeof t=="object"?(r=t.bufferSize,a=r===void 0?1/0:r,i=t.windowTime,e=i===void 0?1/0:i,s=t.refCount,o=s===void 0?!1:s,n=t.scheduler):a=t??1/0,DUe({connector:function(){return new jDe(a,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function FUe(t){return Bo(function(e,n){return t<=n})}function gn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_4(t);return mi(function(r,i){(n?$5(t,r,n):$5(t,r)).subscribe(i)})}function Ft(t,e){return mi(function(n,r){var i=null,s=0,a=!1,o=function(){return a&&!i&&r.complete()};n.subscribe(_r(r,function(l){i==null||i.unsubscribe();var c=0,d=s++;Zr(t(l,d)).subscribe(i=_r(r,function(f){return r.next(e?e(l,f,d,c++):f)},function(){i=null,o()}))},function(){a=!0,o()}))})}function jUe(){return Ft(c1)}function HUe(t,e){return mi(function(n,r){var i=e;return Ft(function(s,a){return t(i,s,a)},function(s,a){return i=a,a})(n).subscribe(r),function(){i=null}})}function $Ue(t){return mi(function(e,n){Zr(t).subscribe(_r(n,function(){return n.complete()},j5)),!n.closed&&e.subscribe(n)})}function VUe(t,e,n){var r=an(t)||e||n?{next:t,error:e,complete:n}:t;return r?mi(function(i,s){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var o=!0;i.subscribe(_r(s,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},function(){var l;o=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var c;o=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},function(){var l,c;o&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):c1}function AR(t,e){return mi(function(n,r){var i=e??{},s=i.leading,a=s===void 0?!0:s,o=i.trailing,l=o===void 0?!1:o,c=!1,d=null,f=null,p=!1,g=function(){f==null||f.unsubscribe(),f=null,l&&(b(),p&&r.complete())},y=function(){f=null,p&&r.complete()},v=function(C){return f=Zr(t(C)).subscribe(_r(r,g,y))},b=function(){if(c){c=!1;var C=d;d=null,r.next(C),!p&&v(C)}};n.subscribe(_r(r,function(C){c=!0,d=C,!(f&&!f.closed)&&(a?b():v(C))},function(){p=!0,!(l&&c&&f&&!f.closed)&&r.complete()}))})}function BUe(t,e,n){e===void 0&&(e=Iy);var r=Cd(t,e);return AR(function(){return r},n)}function qUe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bP(t);return mi(function(r,i){for(var s=t.length,a=new Array(s),o=t.map(function(){return!1}),l=!1,c=function(f){Zr(t[f]).subscribe(_r(i,function(p){a[f]=p,!l&&!o[f]&&(o[f]=!0,(l=o.every(c1))&&(o=null))},j5))},d=0;d<s;d++)c(d);r.subscribe(_r(i,function(f){if(l){var p=Qa([f],Ja(a));i.next(n?n.apply(void 0,Qa([],Ja(p))):p)}}))})}function GUe(t,e,n){if(!n)return u.useState(e)[0];const[r]=u.useState(()=>new qi(n)),[i]=u.useState(()=>e(r)),s=u.useRef(!0);return t(()=>{if(s.current){s.current=!1;return}r.next(n)},n),i}function Oh(t,e){return GUe(u.useEffect,t,e)}var KUe=()=>new li,ZUe=t=>t+1|0,zUe=()=>{const t=u.useState(0)[1];return u.useRef(()=>t(ZUe)).current},Qie=typeof window>"u"?u.useEffect:u.useLayoutEffect,XV=t=>{var e;return(e=t[1])!=null&&e.next?t[1]:{next:t[1],error:t[2],complete:t[3]}};function WUe(t,e){const n=u.useRef(e),r=u.useRef(),i=u.useRef();return Qie(()=>{n.current=e,r.current=XV(e)}),t(()=>{const s=n.current[0];r.current||(r.current=XV(n.current));const a=s.subscribe({next:o=>{var l,c;s===n.current[0]&&((c=(l=r.current).next)==null||c.call(l,o))},error:o=>{s===n.current[0]&&(r.current.error?r.current.error(o):console.error(o))},complete:()=>{var o,l;s===n.current[0]&&((l=(o=r.current).complete)==null||l.call(o))}});return i.current=a,()=>{a.unsubscribe()}},[e[0]]),i}function YUe(t,e,n,r){return WUe(u.useEffect,[t,e,n,r])}function JUe(t,e,n){if(iUe(e)){const r=e,[i,s]=u.useState(()=>r instanceof qi||r.value!==void 0?r.value:n);return t(r,s),u.useDebugValue(i),i}else{const r=e,[i,s]=u.useState(n),[a]=u.useState(KUe),[o]=u.useState(()=>r(a,i)),l=u.useRef(c=>a.next(c)).current;return t(o,s),u.useDebugValue(i),[i,l]}}function Ig(t,e){return JUe(YUe,t,e)}function Qe(t){const e=zUe(),n=u.useRef(t),r=u.useRef(),i=u.useRef(!1),s=u.useRef(!1),[a,o]=u.useState(()=>{let l;return t.subscribe({next:c=>{s.current=!0,l=c},error:c=>{r.current=c}}).unsubscribe(),l});if(Qie(()=>{n.current=t}),u.useEffect(()=>{r.current=null;const l=n.current;let c=a;const d=l.subscribe({next:f=>{l===n.current&&(i.current?o(()=>f):c=f)},error:f=>{l===n.current&&(r.current=f,e())}});return i.current||c!==a&&o(()=>c),i.current=!0,()=>{d.unsubscribe()}},[t]),r.current)throw r.current;if(s.current)return u.useDebugValue(a),a;throw new Error("Observable did not synchronously emit a value.")}function QUe(t){const[e]=u.useState(()=>new qi(t)),[n]=u.useState(()=>({get current(){return e.value},set current(r){e.next(r)}}));return[n,e]}class zr{constructor(e,n){this.defaultValue=n,this.setValue=s=>{this._value$.next(s),localStorage.setItem(this.key,JSON.stringify(s))},this.getValue=()=>this._value$.getValue(),this.key=`matrix-setting-${e}`;const r=localStorage.getItem(this.key);let i=n;if(r!==null)try{i=JSON.parse(r)}catch(s){A.warn(`Invalid value stored for setting ${e}: ${r}.`,s)}this._value$=new qi(i),this.value$=this._value$}}function Gr(t){return[Qe(t.value$),t.setValue]}const Xie=new zr("opt-in-analytics",null),wP=()=>{const t=Gr(Xie);return It.instance.isEnabled()?t:[!1,null]},kP=new zr("developer-settings-tab",!1),XUe=new zr("duplicate-tiles",0),eFe=new zr("show-non-member-tiles",!1),ese=new zr("debug-tile-layout",!1),V5=new zr("show-connection-stats",!1),tFe=new zr("audio-input",void 0),tse=new zr("audio-output",void 0),nFe=new zr("video-input",void 0),nse=new zr("background-blur",!1),rse=new zr("hand-raised-show-timer",!1),ise=new zr("reactions-show",!0),TP=new zr("reactions-play-sound",!0),sse=new zr("sound-effect-volume",.5),rFe=new zr("new-membership-manager",!0),ase=new zr("experimental-to-device-transport",!0),iFe=new zr("mute-all-audio",!1),eB=new zr("always-show-self",!0),sFe=new zr("always-show-iphone-earpiece",!1);var xy=(t=>(t[t.Guest=0]="Guest",t[t.Registered=1]="Registered",t))(xy||{});const wl=class wl{constructor(e){var i,s;this.posthog=e,this.enabled=!1,this.anonymity=0,this.platformSuperProperties={},this.registrationType=0,this.optInListener=null,this.sanitizeProperties=(a,o)=>(this.anonymity==1&&(a.$referrer=null,a.$referring_domain=null,a.$initial_referrer=null,a.$initial_referring_domain=null,a.$device_id=null),a.$current_url=a.$current_url.split("/").slice(0,3).join(""),a),this.eventCallEnded=new yDe,this.eventSignup=new CDe,this.eventCallStarted=new _De,this.eventLogin=new bDe,this.eventMuteMicrophone=new EDe,this.eventMuteCamera=new SDe,this.eventUndecryptableToDevice=new wDe,this.eventQualitySurvey=new kDe,this.eventCallDisconnected=new TDe,this.eventCallConnectDuration=new RDe;let n,r;n=(i=At.get().posthog)==null?void 0:i.api_key,r=(s=At.get().posthog)==null?void 0:s.api_host,n&&r?(this.posthog.init(n,{api_host:r,autocapture:!1,mask_all_text:!0,mask_all_element_attributes:!0,capture_pageview:!1,sanitize_properties:this.sanitizeProperties,respect_dnt:!0,advanced_disable_decide:!0}),this.enabled=!0):(A.info("Posthog is not enabled because there is no api key or no host given in the config"),this.enabled=!1)}static hasInstance(){return!!this.internalInstance}static get instance(){return this.internalInstance||(this.internalInstance=new wl(YNe)),this.internalInstance}static resetInstance(){this.internalInstance=null}registerSuperProperties(e){this.enabled&&this.posthog.register(e)}static getPlatformProperties(){var n,r;return{appVersion:"dev",matrixBackend:Xe?"embedded":"jssdk",callBackend:"livekit",cryptoVersion:Xe||(r=(n=window.matrixclient)==null?void 0:n.getCrypto())==null?void 0:r.getVersion()}}capture(e,n,r){this.enabled&&this.posthog.capture(e,{...n},r)}isEnabled(){return this.enabled}setAnonymity(e){this.enabled&&(e==0||e==1)&&(this.posthog.reset(),this.updateSuperProperties()),this.anonymity=e}static getRandomAnalyticsId(){return[...crypto.getRandomValues(new Uint8Array(16))].map(e=>e.toString(16)).join("")}async identifyUser(e){if(this.anonymity==2&&this.enabled){let n=await this.getAnalyticsId();try{if(!n&&!Xe){const r=e();await this.setAccountAnalyticsId(r),n=await this.hashedEcAnalyticsId(r)}}catch(r){A.log("Unable to identify user for tracking"+(r==null?void 0:r.toString()))}n?this.posthog.identify(n):A.info("No analyticsID is available. Should not try to setup posthog")}}async getAnalyticsId(){const e=window.matrixclient;let n;if(Xe)n=Xa().posthogUserId;else{const r=await e.getAccountDataFromServer(wl.ANALYTICS_EVENT_TYPE);n=(r==null?void 0:r.id)??null}return n?await this.hashedEcAnalyticsId(n):null}async hashedEcAnalyticsId(e){const n=window.matrixclient,r="ec"+e+n.getUserId(),i=await crypto.subtle.digest("sha-256",new TextEncoder().encode(r)),s=new Int32Array(i);return Array.from(s).map(a=>Math.abs(a).toString(16).padStart(2,"0")).join("")}async setAccountAnalyticsId(e){if(!Xe){const n=window.matrixclient,r=await n.getAccountDataFromServer(wl.ANALYTICS_EVENT_TYPE);await n.setAccountData(wl.ANALYTICS_EVENT_TYPE,Object.assign({id:e},r))}}getAnonymity(){return this.anonymity}logout(){var e;this.enabled&&this.posthog.reset(),(e=this.optInListener)==null||e.unsubscribe(),this.optInListener=null,this.setAnonymity(0)}onLoginStatusChanged(){this.maybeIdentifyUser().catch(()=>A.log("Could not identify user on login status change"))}updateSuperProperties(){this.platformSuperProperties=wl.getPlatformProperties(),this.registerSuperProperties({...this.platformSuperProperties,registrationType:this.registrationType==0?"Guest":"Registered"})}userRegisteredInThisSession(){return this.eventSignup.getSignupEndTime()>new Date(0)}async maybeIdentifyUser(){window.matrixclient&&(this.anonymity===2&&(this.setRegistrationType(window.matrixclient.isGuest()||window.passwordlessUser?0:1),this.identificationPromise=this.identifyUser(wl.getRandomAnalyticsId),await this.identificationPromise,this.userRegisteredInThisSession()&&this.eventSignup.track()),this.anonymity!==0&&this.updateSuperProperties())}trackEvent({eventName:e,...n},r){const i=()=>{this.anonymity==0||this.anonymity==1||this.capture(e,n,r)};this.identificationPromise?this.identificationPromise.then(i,s=>{A.error("Failed to identify user for tracking",s)}):i()}startListeningToSettingsChanges(){this.optInListener??(this.optInListener=Xie.value$.subscribe(e=>{this.setAnonymity(e?2:0),this.maybeIdentifyUser().catch(()=>A.log("Could not identify user"))}))}setRegistrationType(e){this.registrationType=e,!(this.anonymity==0||this.anonymity==1)&&this.updateSuperProperties()}};wl.ANALYTICS_EVENT_TYPE="im.vector.analytics",wl.internalInstance=null;let It=wl;const aFe=2*60*1e3;class oFe{async forceFlush(){}onStart(e){try{switch(e.name){case"matrix.groupCallMembership":this.onGroupCallMembershipStart(e);return;case"matrix.groupCallMembership.summaryReport":this.onSummaryReportStart(e);return}}catch(n){A.debug(n)}}onEnd(e){switch(e.name){case"matrix.groupCallMembership":this.onGroupCallMembershipEnd(e);return}}get prevCall(){const e=localStorage.getItem("matrix-prev-call");if(e===null)return null;try{return JSON.parse(e)}catch(n){return A.warn("Invalid prev call data",e,"error:",n),null}}set prevCall(e){localStorage.setItem("matrix-prev-call",JSON.stringify(e))}onGroupCallMembershipStart(e){const n=this.prevCall,r=e.attributes["matrix.confId"];if(n!==null&&r===n.callId){const i=N$(e.startTime)-n.hangupTs;i<=aFe&&It.instance.trackEvent({eventName:"Rejoin",callId:n.callId,rejoinDuration:i})}}onGroupCallMembershipEnd(e){this.prevCall={callId:e.attributes["matrix.confId"],hangupTs:N$(e.endTime)}}onSummaryReportStart(e){const n=e.events.find(r=>r.name==="matrix.stats.summary");if(n!==void 0){const r=n.attributes;if(r){const i=`${r["matrix.stats.summary.percentageReceivedMedia"]}`,s=`${r["matrix.stats.summary.percentageReceivedVideoMedia"]}`,a=`${r["matrix.stats.summary.percentageReceivedAudioMedia"]}`,o=`${r["matrix.stats.summary.maxJitter"]}`,l=`${r["matrix.stats.summary.maxPacketLoss"]}`,c=`${r["matrix.stats.summary.peerConnections"]}`,d=`${r["matrix.stats.summary.percentageConcealedAudio"]}`,f=`${r["matrix.stats.summary.opponentUsersInCall"]}`,p=`${r["matrix.stats.summary.opponentDevicesInCall"]}`,g=`${r["matrix.stats.summary.diffDevicesToPeerConnections"]}`,y=`${r["matrix.stats.summary.ratioPeerConnectionToDevices"]}`;It.instance.trackEvent({eventName:"MediaReceived",callId:e.attributes["matrix.confId"],mediaReceived:i,audioReceived:a,videoReceived:s,maxJitter:o,maxPacketLoss:l,peerConnections:c,percentageConcealedAudio:d,opponentUsersInCall:f,opponentDevicesInCall:p,diffDevicesToPeerConnections:g,ratioPeerConnectionToDevices:y},{send_instantly:!0})}}}async shutdown(){return Promise.resolve()}}const tB=t=>Object.entries(t).map(([e,n])=>({key:e,type:typeof n,value:n}));class lFe{constructor(){this.spans=[]}async forceFlush(){}onStart(e){this.spans.push(e)}onEnd(){}dump(){const e=Date.now()*1e3,n=new Map;for(const s of this.spans){const a=s.spanContext().traceId;let o=n.get(a);o===void 0&&(o=[],n.set(a,o)),o.push(s)}const r="p1",i={[r]:{serviceName:"element-call",tags:[]},warnings:null};return JSON.stringify({total:0,limit:0,offset:0,errors:null,data:[...n.entries()].map(([s,a])=>({traceID:s,warnings:null,processes:i,spans:a.map(o=>{var f,p;const l=o.spanContext(),c=cS(o.startTime),d=o.duration[0]===-1?e-c:cS(o.duration);return{traceID:s,spanID:l.spanId,operationName:o.name,processID:r,warnings:null,startTime:c,duration:d,references:((f=o.parentSpanContext)==null?void 0:f.spanId)===void 0?[]:[{refType:"CHILD_OF",traceID:s,spanID:(p=o.parentSpanContext)==null?void 0:p.spanId}],tags:tB(o.attributes),logs:o.events.map(g=>({timestamp:cS(g.time),fields:[...tB(g.attributes??{}),{key:"event",type:"string",value:g.name}]}))}})}))})}async shutdown(){}}const cFe="element-call";let j1;class My{static globalInit(){var r;const e=(r=At.get().opentelemetry)==null?void 0:r.collector_url,n=!!e;(!j1||j1.isOtlpEnabled!==n)&&(A.info("(Re)starting OpenTelemetry debug reporting"),j1==null||j1.dispose(),j1=new My(e,ose()))}static get instance(){return j1}constructor(e,n){const r=[];e?(A.info("Enabling OTLP collector with URL "+e),this.otlpExporter=new pAe({url:e}),r.push(new COe(this.otlpExporter))):A.info("OTLP collector disabled"),n&&(this.rageshakeProcessor=new lFe,r.push(this.rageshakeProcessor)),r.push(new oFe),this._provider=new _Ae({resource:Dre({[Tre]:cFe}),spanProcessors:r}),iS.trace.setGlobalTracerProvider(this._provider),this._tracer=iS.trace.getTracer("my-element-call-otl-tracer")}dispose(){var e;iS.trace.disable(),(e=this._provider)==null||e.shutdown().catch(n=>{A.error("Failed to shutdown OpenTelemetry",n)})}get isOtlpEnabled(){return!!this.otlpExporter}get tracer(){return this._tracer}get provider(){return this._provider}}const nB=async t=>{const{gzip:e}=await z0(async()=>{const{gzip:r}=await import("./pako.esm-BMdhWMX1.js");return{gzip:r}},[]),n=new TextEncoder().encode(t);return new Blob([e(n)])};async function uFe(t,e){e.append("crypto_version",t.getVersion());const n=await t.getOwnDeviceKeys(),r=[`curve25519:${n.curve25519}`,`ed25519:${n.ed25519}`];e.append("device_keys",r.join(", "));const i=await t.getCrossSigningStatus();e.append("cross_signing_ready",String(await t.isCrossSigningReady())),e.append("cross_signing_key",await t.getCrossSigningKeyId()??"n/a"),e.append("cross_signing_privkey_in_secret_storage",String(i.privateKeysInSecretStorage)),e.append("cross_signing_master_privkey_cached",String(i.privateKeysCachedLocally.masterKey)),e.append("cross_signing_self_signing_privkey_cached",String(i.privateKeysCachedLocally.selfSigningKey)),e.append("cross_signing_user_signing_privkey_cached",String(i.privateKeysCachedLocally.userSigningKey))}async function dFe(t,e,n){const r=t.secretStorage;n.append("secret_storage_ready",String(await e.isSecretStorageReady())),n.append("secret_storage_key_in_account",String(await r.hasKey())),n.append("session_backup_key_in_secret_storage",String(!!await t.isKeyBackupKeyStored()));const i=await e.getSessionBackupPrivateKey();n.append("session_backup_key_cached",String(!!i)),n.append("session_backup_key_well_formed",String(i instanceof Uint8Array))}function ose(){var t;return(t=At.get().rageshake)==null?void 0:t.submit_url}function RP(t=ose){const{client:e}=lp(),[{sending:n,sent:r,error:i},s]=u.useState({sending:!1,sent:!1,error:void 0});return{submitRageshake:u.useCallback(async o=>{const l=t();if(!l)throw new Error("No rageshake URL is configured");if(!n)try{s({sending:!0,sent:!1,error:void 0});let c="UNKNOWN";window.navigator&&window.navigator.userAgent&&(c=window.navigator.userAgent);let d="UNKNOWN";try{d=String(window.matchMedia("(pointer: coarse)").matches)}catch(y){A.warn("Could not get coarse pointer for rageshake submit.",y)}let f=o.rageshakeRequestId?`Rageshake ${o.rageshakeRequestId}`:"";o.description&&(f+=`: ${o.description}`);const p=new FormData;if(p.append("text",f??"User did not supply any additional text."),p.append("app","matrix-video-chat"),p.append("version","dev"),p.append("user_agent",c),p.append("installed_pwa","false"),p.append("touch_input",d),p.append("call_backend","livekit"),p.append("hostname",window.location.hostname),e){const y=e.getUserId(),v=e.getUser(y);p.append("display_name",(v==null?void 0:v.displayName)??""),p.append("user_id",e.credentials.userId??""),p.append("device_id",e.deviceId??""),o.roomId&&p.append("room_id",o.roomId);const b=e.getCrypto();b&&(await uFe(b,p),await dFe(e,b,p))}if(o.label&&p.append("label",o.label),navigator.storage&&navigator.storage.persisted)try{p.append("storageManager_persisted",String(await navigator.storage.persisted()))}catch(y){A.warn("coulr not get navigator peristed storage",y)}else if(document.hasStorageAccess)try{p.append("storageManager_persisted",String(await document.hasStorageAccess()))}catch(y){A.warn("could not get storage access",y)}if(navigator.storage&&navigator.storage.estimate)try{const y=await navigator.storage.estimate();p.append("storageManager_quota",String(y.quota)),p.append("storageManager_usage",String(y.usage)),y.usageDetails&&Object.keys(y.usageDetails).forEach(v=>{p.append(`storageManager_usage_${v}`,String(y.usageDetails[v]))})}catch(y){A.warn("could not obatain storage estimate",y)}if(o.sendLogs){const y=await aPe();for(const v of y)p.append("compressed-log",await nB(v.lines),v.id);p.append("file",await nB(My.instance.rageshakeProcessor.dump()),"traces.json.gz")}o.rageshakeRequestId&&p.append("group_call_rageshake_request_id",o.rageshakeRequestId);const g=await fetch(l,{method:"POST",body:p});if(g.status!==200)throw new Error(`Failed to submit feedback: receive HTTP ${g.status} ${g.statusText}`);s({sending:!1,sent:!0,error:void 0})}catch(c){s({sending:!1,sent:!1,error:c}),A.error(c)}},[e,n,t]),sending:n,sent:r,error:i,available:!!t()}}function hFe(t){const[e,n]=u.useState(!1),r=u.useCallback(()=>n(!1),[n]),{client:i}=lp(),[s,a]=u.useState();return u.useEffect(()=>{if(!i)return;const o=l=>{l.getType()==="org.matrix.rageshake_request"&&t===l.getRoomId()&&i.getUserId()!==l.getSender()&&(a(l.getContent().request_id),n(!0))};return i.on(Le.Event,o),()=>{i.removeListener(Le.Event,o)}},[n,t,i]),{rageshakeRequestId:s??"",roomId:t,open:e,onDismiss:r}}const fFe=({description:t})=>{var l;const{submitRageshake:e,sending:n,sent:r,error:i}=RP(),{t:s}=it(),a=u.useCallback(()=>{e({description:t,sendLogs:!0}).catch(c=>{A.error("Failed to send rageshake",c)})},[e,t]);if(!((l=At.get().rageshake)!=null&&l.submit_url))return null;let o=null;if(n)o=E.jsx("span",{children:s("rageshake_sending")});else if(r)o=E.jsx("div",{children:s("rageshake_sent")});else{let c=s("rageshake_send_logs");i&&(c=s("rageshake_button_error_caption")),o=E.jsx(Bt,{onClick:a,className:P$.wideButton,disabled:n,children:c})}return E.jsx("div",{className:P$.rageshakeControl,children:o})},mFe="_error_1kk5g_1",pFe="_icon_1kk5g_17",Kv={error:mFe,icon:pFe},gFe="_endCall_104dx_15",vFe={endCall:gFe},lse=({muted:t,...e})=>{const{t:n}=it(),r=t?wne:KM,i=n(t?"unmute_microphone_button_label":"mute_microphone_button_label");return E.jsx(Bi,{label:i,children:E.jsx(Bt,{iconOnly:!0,Icon:r,kind:t?"primary":"secondary",...e})})},cse=({muted:t,...e})=>{const{t:n}=it(),r=t?ORe:Gne,i=n(t?"start_video_button_label":"stop_video_button_label");return E.jsx(Bi,{label:i,children:E.jsx(Bt,{iconOnly:!0,Icon:r,kind:t?"primary":"secondary",...e})})},use=t=>{const{t:e}=it();return E.jsx(Bi,{label:e("switch_camera"),children:E.jsx(Bt,{iconOnly:!0,Icon:MRe,kind:"secondary",...t})})},yFe=({enabled:t,...e})=>{const{t:n}=it(),r=n(t?"stop_screenshare_button_label":"screenshare_button_label");return E.jsx(Bi,{label:r,children:E.jsx(Bt,{iconOnly:!0,Icon:RRe,kind:t?"primary":"secondary",...e})})},dse=({className:t,...e})=>{const{t:n}=it();return E.jsx(Bi,{label:n("hangup_button_label"),children:E.jsx(Bt,{className:De(t,vFe.endCall),iconOnly:!0,Icon:pne,destructive:!0,...e})})},hse=t=>{const{t:e}=it();return E.jsx(Bi,{label:e("common.settings"),children:E.jsx(Bt,{iconOnly:!0,Icon:TRe,kind:"secondary",...t})})},_Fe="_external_g97eo_15",CFe={external:_Fe};function fse(t,e){const n=kY(t),r=NY(t,{state:e});return[n,r]}const $l=u.forwardRef(function({to:e,state:n,...r},i){const[s,a]=fse(e,n);return E.jsx(ske,{ref:i,...r,href:s,onClick:a})}),NR=u.forwardRef(function({className:e,children:n,...r},i){return E.jsx("a",{ref:i,className:De(e,CFe.external),target:"_blank",rel:"noreferrer noopener",...r,children:n})}),IP=u.forwardRef(function({to:e,state:n,...r},i){const[s,a]=fse(e,n);return E.jsx(Bt,{as:"a",ref:i,...r,href:s,onClick:a})});function mse(t){const[e,n]=u.useState(t.memberships),r=u.useCallback(()=>{A.info(`Memberships changed for call in room ${t.room.roomId} (${t.memberships.length} members)`),n(t.memberships)},[t]);return u.useEffect(()=>(t.on(xr.MembershipsChanged,r),()=>{t.off(xr.MembershipsChanged,r)}),[t,r]),e}const pse=u.createContext(void 0),xP=()=>{const t=u.useContext(pse);if(!t)throw new Error("useReactions must be used within a ReactionsProvider");return t},bFe=({children:t,rtcSession:e,vm:n})=>{const r=mse(e),i=op(),s=(i==null?void 0:i.state)==="valid"&&i.supportedFeatures.reactions,a=e.room,o=a.client.getUserId(),l=a.client.getDeviceId(),c=`${o}:${l}`,d=u.useMemo(()=>{var C;return(C=r.find(S=>S.sender===o&&S.deviceId===l))==null?void 0:C.eventId},[r,o,l]),f=Qe(n.reactions$),p=u.useMemo(()=>c!==void 0?f[c]:void 0,[c,f]),g=Qe(n.handsRaised$),y=u.useMemo(()=>c!==void 0?g[c]:void 0,[c,g]),v=u.useCallback(async()=>{if(!c)return;const C=y==null?void 0:y.reactionEventId;if(C)try{await a.client.redactEvent(e.room.roomId,C),A.debug("Redacted raise hand event")}catch(S){throw A.error("Failed to redact reaction event",C,S),S}else try{if(!d)throw new Error("Cannot find own membership event");const S=await a.client.sendEvent(e.room.roomId,ee.Reaction,{"m.relates_to":{rel_type:Sn.Annotation,event_id:d,key:"🖐️"}});A.debug("Sent raise hand event",S.event_id)}catch(S){A.error("Failed to send raised hand",S)}},[d,c,y,e,a]),b=u.useCallback(async C=>{if(!(!c||p)){if(!d)throw new Error("Cannot find own membership event");await a.client.sendEvent(e.room.roomId,gP,{"m.relates_to":{rel_type:Sn.Reference,event_id:d},emoji:C.emoji,name:C.name})}},[d,p,a,c,e]);return E.jsx(pse.Provider,{value:{supportsReactions:s,toggleRaisedHand:v,sendReaction:b},children:t})},EFe="_raisedButton_1aonn_1",SFe="_reactionPopupMenu_1aonn_9",wFe="_reactionPopupMenuRoot_1aonn_41",kFe="_reactionPopupMenuModal_1aonn_41",TFe="_reactionsMenuSection_1aonn_93",RFe="_reactionsMenu_1aonn_93",IFe="_reactionButton_1aonn_161",xFe="_verticalSeperator_1aonn_181",MFe="_alert_1aonn_197",Io={raisedButton:EFe,reactionPopupMenu:SFe,reactionPopupMenuRoot:wFe,reactionPopupMenuModal:kFe,reactionsMenuSection:TFe,reactionsMenu:RFe,reactionButton:IFe,verticalSeperator:xFe,alert:MFe};var gse=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(LFe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx(DR,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx(DR,{...r,ref:e,children:n})});gse.displayName="Slot";var DR=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=AFe(n),s=OFe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});DR.displayName="SlotClone";var PFe=({children:t})=>E.jsx(E.Fragment,{children:t});function LFe(t){return u.isValidElement(t)&&t.type===PFe}function OFe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function AFe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NFe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],DFe=NFe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?gse:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),UFe="VisuallyHidden",UR=u.forwardRef((t,e)=>E.jsx(DFe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));UR.displayName=UFe;const FFe="_modal_t9kg9_15",jFe="_dialog_t9kg9_27",HFe="_content_t9kg9_41",$Fe="_drawer_t9kg9_63",VFe="_close_t9kg9_117",BFe="_header_t9kg9_167",qFe="_body_t9kg9_227",GFe="_tabbed_t9kg9_257",KFe="_handle_t9kg9_265",Cs={modal:FFe,dialog:jFe,content:HFe,drawer:$Fe,close:VFe,header:BFe,body:qFe,tabbed:GFe,handle:KFe},ZFe="_bg_rz91d_15",zFe="_animate_rz91d_45",WFe="_overlay_rz91d_79",xl={bg:ZFe,animate:zFe,overlay:WFe},Yh=({title:t,hideHeader:e,children:n,className:r,classNameDrawer:i,classNameModal:s,open:a,onDismiss:o,tabbed:l,...c})=>{const{t:d}=it(),f=vy("(hover: none) or (pointer: coarse)"),p=u.useCallback(g=>{g||o==null||o()},[o]);if(f)return E.jsx(Is.Root,{open:a,onOpenChange:p,dismissible:o!==void 0,children:E.jsxs(Is.Portal,{children:[E.jsx(Is.Overlay,{className:De(xl.bg)}),E.jsx(Is.Content,{className:De(r,i,xl.overlay,Cs.modal,Cs.drawer,{[Cs.tabbed]:l}),role:"dialog","aria-describedby":void 0,...c,children:E.jsxs("div",{className:Cs.content,children:[E.jsxs("div",{className:Cs.header,children:[E.jsx("div",{className:Cs.handle}),E.jsx(UR,{asChild:!0,children:E.jsx(Is.Title,{children:t})})]}),E.jsx("div",{className:Cs.body,children:n})]})})]})});{const g=E.jsx(xM,{asChild:!0,children:E.jsx(o1,{as:"h2",weight:"semibold",size:"md",children:t})}),y=E.jsxs("div",{className:Cs.header,children:[g,o!==void 0&&E.jsx(pte,{className:Cs.close,"data-testid":"modal_close","aria-label":d("action.close"),children:E.jsx(ny,{width:20,height:20})})]});return E.jsx(kM,{open:a,onOpenChange:p,children:E.jsxs(TM,{children:[E.jsx(RM,{className:De(xl.bg,xl.animate)}),E.jsx(IM,{asChild:!0,"aria-describedby":void 0,role:"dialog",...c,children:E.jsx(Rte,{className:De(r,s,xl.overlay,xl.animate,Cs.modal,Cs.dialog,{[Cs.tabbed]:l}),children:E.jsxs("div",{className:Cs.content,children:[e?null:y,e?E.jsx(UR,{asChild:!0,children:g}):null,E.jsx("div",{className:Cs.body,children:n})]})})})]})})}},YFe=({raised:t,open:e,...n})=>{const{t:r}=it();return E.jsx(Bi,{label:r("common.reactions"),children:E.jsx(Bt,{className:De(t&&Io.raisedButton),"aria-expanded":e,"aria-haspopup":!0,kind:t||e?"primary":"secondary",iconOnly:!0,Icon:t?Lne:kRe,...n})})};function JFe({sendReaction:t,toggleRaisedHand:e,isHandRaised:n,canReact:r,errorText:i}){const{t:s}=it(),[a,o]=u.useState(!1),l=u.useMemo(()=>a?kg:kg.slice(0,5),[a]),c=s(n?"action.lower_hand":"action.raise_hand");return E.jsxs(E.Fragment,{children:[i&&E.jsx(SCe,{className:Io.alert,type:"critical",title:s("error.generic"),children:i}),E.jsxs("div",{className:Io.reactionPopupMenu,children:[E.jsx("section",{className:Io.handRaiseSection,children:E.jsx(Bi,{label:c,caption:"H",children:E.jsx(Bt,{kind:n?"primary":"secondary","aria-keyshortcuts":"H","aria-pressed":n,"aria-label":c,onClick:()=>e(),iconOnly:!0,Icon:Lne})})}),E.jsx("div",{className:Io.verticalSeperator}),E.jsx("section",{className:Io.reactionsMenuSection,children:E.jsx("menu",{className:De(a&&Io.reactionsMenuExpanded,Io.reactionsMenu),children:l.map((d,f)=>E.jsx("li",{children:E.jsx(Bi,{label:d.name,caption:f<PR?(f+1).toString():void 0,children:E.jsx(Bt,{kind:"secondary",className:Io.reactionButton,disabled:!r,onClick:()=>t(d),"aria-keyshortcuts":f<PR?(f+1).toString():void 0,children:d.emoji})})},d.name))})}),E.jsx("section",{style:{marginLeft:"var(--cpd-separator-spacing)"},children:E.jsx(Bi,{label:s(a?"action.show_less":"action.show_more"),children:E.jsx(Bt,{iconOnly:!0,"aria-label":s(a?"action.show_less":"action.show_more"),Icon:a?mRe:jTe,kind:"tertiary",onClick:()=>o(!a)})})})]})]})}function QFe({identifier:t,vm:e,...n}){const{t:r}=it(),{toggleRaisedHand:i,sendReaction:s}=xP(),[a,o]=u.useState(!1),[l,c]=u.useState(!1),[d,f]=u.useState(),p=Ig(e.handsRaised$.pipe(Ne(b=>!!b[t]))),g=Ig(e.reactions$.pipe(Ne(b=>!b[t])));u.useEffect(()=>{f(void 0)},[l]);const y=u.useCallback(async b=>{try{o(!0),await s(b),f(void 0),c(!1)}catch(C){f(C instanceof Error?C.message:"Unknown error"),A.error("Failed to send reaction",C)}finally{o(!1)}},[s]),v=u.useCallback(()=>{(async()=>{try{o(!0),await i(),c(!1)}catch(C){f(C instanceof Error?C.message:"Unknown error"),A.error("Failed to raise/lower hand",C)}finally{o(!1)}})()},[i]);return E.jsxs(E.Fragment,{children:[E.jsx(YFe,{disabled:a,onClick:()=>c(b=>!b),raised:!!p,open:l,...n}),E.jsx(Yh,{open:l,title:r("action.pick_reaction"),hideHeader:!0,classNameModal:Io.reactionPopupMenuModal,className:Io.reactionPopupMenuRoot,onDismiss:()=>c(!1),children:E.jsx(JFe,{errorText:d,isHandRaised:!!p,canReact:!a&&!!g,sendReaction:b=>void y(b),toggleRaisedHand:v})})]})}const xg=({Icon:t,title:e,rageshake:n,fatal:r,children:i,widget:s})=>{const{t:a}=it(),{confineToRoom:o}=Yo(),l=u.useCallback(()=>{window.location.href="/"},[]),c=({widget:f})=>{const p=()=>{f.api.transport.send(ui.Close,{}).catch(g=>{A.error("Failed to send close action",g)}).finally(()=>{f.api.transport.stop()})};return E.jsx(Bt,{kind:"primary",onClick:p,children:a("action.close")})},d=()=>r||location.pathname==="/"?E.jsx(Bt,{kind:"tertiary",className:Kv.homeLink,onClick:l,children:a("return_home_button")}):E.jsx(IP,{kind:"tertiary",className:Kv.homeLink,to:"/",children:a("return_home_button")});return E.jsxs("div",{className:Kv.error,children:[E.jsx(OTe,{className:Kv.icon,children:E.jsx(t,{})}),E.jsx(o1,{as:"h1",weight:"semibold",size:"md",children:e}),i,n&&E.jsx(fFe,{description:`***Error View***: ${e}`}),s?E.jsx(c,{widget:s}):!o&&E.jsx(d,{})]})};class vse extends Error{constructor(e,n){super(e),this.richMessage=n}}const XFe=()=>{const{t}=it();return E.jsx(xg,{widget:Xe,Icon:Mne,title:t("error.open_elsewhere"),children:E.jsx("p",{children:t("error.open_elsewhere_description",{brand:"Element Call"})})})};class eje extends vse{constructor(){super("App opened in another tab",E.jsx(XFe,{}))}}const B2=({className:t,children:e})=>{const{hideHeader:n}=Yo();return E.jsxs("div",{className:De(YE.page,t),children:[!n&&E.jsxs(l1,{children:[E.jsx(Zh,{children:E.jsx(Mh,{})}),E.jsx(zh,{})]}),E.jsx("div",{className:YE.container,children:E.jsx("div",{className:YE.content,children:e})})]})},Mg=({error:t,widget:e})=>{const{t:n}=it();return u.useEffect(()=>{A.error(t),J9(t)},[t]),E.jsx(B2,{children:t instanceof vse?t.richMessage:E.jsx(xg,{widget:e,Icon:ty,title:n("error.generic"),rageshake:!0,fatal:!0,children:E.jsx("p",{children:n("error.generic_description")})})})},Py=()=>{const{t}=it();return E.jsx(B2,{children:E.jsx("h1",{children:t("common.loading")})})},MP=u.createContext(void 0);MP.Provider;const op=()=>u.useContext(MP);function lp(){var r;let t,e;const n=op();return(n==null?void 0:n.state)==="valid"&&(t=(r=n.authenticated)==null?void 0:r.client,e=n.setClient),{client:t,setClient:e}}function PP(){var l,c,d;const t=op();let e,n,r=!1,i=!0,s,a=!1,o;return(t==null?void 0:t.state)==="valid"?(e=(l=t.authenticated)==null?void 0:l.client,n=t.setClient,r=((c=t.authenticated)==null?void 0:c.isPasswordlessUser)??!1,i=!1,a=e!==void 0,o=(d=t.authenticated)==null?void 0:d.logout):(t==null?void 0:t.state)==="error"&&(s=t.error,i=!1),{client:e,setClient:n,passwordlessUser:r,loading:i,authenticated:a,logout:o,error:s}}const Zv="BroadcastChannel"in window?new BroadcastChannel("load"):null,tje=({children:t})=>{const e=Wl(),[n,r]=u.useState(void 0),i=u.useRef(!1);u.useEffect(()=>{i.current||(i.current=!0,nje().then(S=>{r(S),It.instance.isEnabled()&&It.instance.startListeningToSettingsChanges()}).catch(S=>A.error(S)).finally(()=>i.current=!1))},[]);const s=u.useCallback(async S=>{const R=_se();!(n!=null&&n.client)||!R||(await n.client.setPassword({type:"m.login.password",identifier:{type:"m.id.user",user:R.user_id},user:R.user_id,password:R.tempPassword},S),rB({...R,passwordlessUser:!1}),r({...n,passwordlessUser:!1}))},[n]),a=u.useCallback((S,R)=>{const w=n==null?void 0:n.client;w&&w!==S&&w.stopClient(),rB(R),r({widgetApi:null,client:S,passwordlessUser:R.passwordlessUser}),It.instance.isEnabled()&&It.instance.startListeningToSettingsChanges()},[n==null?void 0:n.client]),o=u.useCallback(async()=>{const S=n==null?void 0:n.client;S&&(await S.logout(!0),await S.clearStores(),yse(),r(null),await e("/"),It.instance.logout(),It.instance.setRegistrationType(xy.Guest))},[e,n==null?void 0:n.client]);u.useEffect(()=>{Xe||Zv==null||Zv.postMessage({})},[]);const[l,c]=u.useState(void 0);T0(Zv,"message",u.useCallback(()=>{n==null||n.client.stopClient(),c(new eje)},[n==null?void 0:n.client,c]));const[d,f]=u.useState(!1),[p,g]=u.useState(!1),[y,v]=u.useState(!1),b=u.useMemo(()=>l?{state:"error",error:l}:n===void 0?void 0:{state:"valid",authenticated:n===null?void 0:{client:n.client,isPasswordlessUser:n.passwordlessUser,changePassword:s,logout:o},setClient:a,disconnected:d,supportedFeatures:{reactions:p,thumbnails:y}},[l,s,n,o,a,d,p,y]),C=u.useCallback((S,R,w)=>{f(rje(S,w))},[]);return u.useEffect(()=>{if(n){if(window.matrixclient=n.client,window.passwordlessUser=n.passwordlessUser,It.hasInstance()&&It.instance.onLoginStatusChanged(),n.client&&n.client.on(Le.Sync,C),n.widgetApi){v(!1);const S=n.widgetApi.hasCapability("org.matrix.msc2762.send.event:m.reaction"),R=n.widgetApi.hasCapability("org.matrix.msc2762.send.event:m.room.redaction"),w=n.widgetApi.hasCapability("org.matrix.msc2762.receive.event:m.reaction"),I=n.widgetApi.hasCapability("org.matrix.msc2762.receive.event:m.room.redaction");!S||!w||!R||!I?(A.warn("Widget does not support reactions"),g(!1)):g(!0)}else g(!0),v(!0);return()=>{n.client&&n.client.removeListener(Le.Sync,C)}}},[n,C]),l?E.jsx(Mg,{widget:Xe,error:l}):E.jsx(MP.Provider,{value:b,children:t})};async function nje(){if(Xe){A.log("Using a matryoshka client");const t=await Xe.client;return{widgetApi:Xe.api,client:t,passwordlessUser:!1}}else{const{initSPA:t}=await z0(async()=>{const{initSPA:e}=await import("./spa-CJusoadu.js");return{initSPA:e}},[]);return t(_se,yse)}}const yse=()=>localStorage.removeItem("matrix-auth-store"),rB=t=>localStorage.setItem("matrix-auth-store",JSON.stringify(t)),_se=()=>{const t=localStorage.getItem("matrix-auth-store");if(t)return JSON.parse(t)},rje=(t,e)=>{var n;return t==="ERROR"&&((n=e==null?void 0:e.error)==null?void 0:n.name)==="ConnectionError"};function E4(t){const[{success:e,loading:n,displayName:r,avatarUrl:i,error:s},a]=u.useState(()=>{let l;return t&&(l=t.getUser(t.getUserId())??void 0),{success:!1,loading:!1,displayName:l==null?void 0:l.rawDisplayName,avatarUrl:l==null?void 0:l.avatarUrl,error:void 0}});u.useEffect(()=>{const l=(d,{displayName:f,avatarUrl:p})=>{a({success:!1,loading:!1,displayName:f,avatarUrl:p,error:void 0})};let c;if(t){const d=t.getUserId();c=t.getUser(d),c==null||c.on(Ei.DisplayName,l),c==null||c.on(Ei.AvatarUrl,l)}return()=>{c&&(c.removeListener(Ei.DisplayName,l),c.removeListener(Ei.AvatarUrl,l))}},[t]);const o=u.useCallback(async({displayName:l,avatar:c,removeAvatar:d})=>{if(t){a(f=>({...f,loading:!0,error:void 0,success:!1}));try{await t.setDisplayName(l);let f;d?await t.setAvatarUrl(""):c&&({content_uri:f}=await t.uploadContent(c),await t.setAvatarUrl(f)),a(p=>({...p,displayName:l,avatarUrl:d?void 0:f??p.avatarUrl,loading:!1,success:!0}))}catch(f){a(p=>({...p,loading:!1,error:f instanceof Error?f:Error(f),success:!1}))}}else A.error("Client not initialized before calling saveProfile")},[t]);return{loading:n,error:s,displayName:r,avatarUrl:i,saveProfile:o,success:e}}const ije="_settingsModal_165cp_15",sje="_volumeSlider_165cp_39",iB={settingsModal:ije,volumeSlider:sje},aje="_tabContainer_c11tk_15",oje="_tabList_c11tk_27",sB={tabContainer:aje,tabList:oje};function lje({label:t,tab:e,onTabChange:n,tabs:r}){const i=u.useId();return E.jsxs("div",{className:sB.tabContainer,children:[E.jsx(ATe,{role:"tablist","aria-label":t,className:sB.tabList,children:r.map(({key:s,name:a})=>E.jsx(FTe,{"aria-controls":`${i}[${s}]`,onClick:()=>n(s),active:s===e,children:a}))}),r.map(({key:s,content:a})=>E.jsx("div",{id:`${i}[${s}]`,style:{display:s===e?void 0:"none"},children:a}))]})}const cje="_fieldRow_1gox3_15",uje="_field_1gox3_15",dje="_rightAlign_1gox3_41",hje="_inputField_1gox3_65",fje="_disabled_1gox3_105",mje="_prefix_1gox3_221",pje="_checkboxField_1gox3_263",gje="_checkbox_1gox3_263",vje="_description_1gox3_337",yje="_errorMessage_1gox3_395",_je="_noLabel_1gox3_421",Ma={fieldRow:cje,field:uje,rightAlign:dje,inputField:hje,disabled:fje,prefix:mje,checkboxField:pje,checkbox:gje,description:vje,errorMessage:yje,noLabel:_je},Cje=(t,e)=>u.createElement("svg",{fill:"none",height:24,stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{d:"m20 6-11 11-5-5"})),bje=u.forwardRef(Cje);class Cse extends Error{constructor(e,n){super(n(e,{lng:"en"})),this.translatedMessage=n(e)}}class Eje extends Cse{}const aB=(t,e)=>new Eje(t,e);function en({children:t,rightAlign:e,className:n}){return E.jsx("div",{className:De(Ma.fieldRow,{[Ma.rightAlign]:e},n),children:t})}function Sje({children:t,className:e}){return E.jsx("div",{className:De(Ma.field,e),children:t})}const hi=u.forwardRef(({id:t,label:e,className:n,type:r,checked:i,prefix:s,suffix:a,description:o,disabled:l,min:c,...d},f)=>{const p=u.useId();return E.jsxs(Sje,{className:De(r==="checkbox"?Ma.checkboxField:Ma.inputField,{[Ma.prefix]:!!s,[Ma.disabled]:l},n),children:[s&&E.jsx("span",{children:s}),r==="textarea"?E.jsx("textarea",{id:t,ref:f,disabled:l,"aria-describedby":p,...d}):E.jsx("input",{id:t,ref:f,type:r,checked:i,disabled:l,"aria-describedby":p,min:c,...d}),E.jsxs("label",{htmlFor:t,children:[r==="checkbox"&&E.jsx("div",{className:Ma.checkbox,children:E.jsx(bje,{})}),e]}),a&&E.jsx("span",{children:a}),o&&E.jsx("p",{id:p,className:e?Ma.description:De(Ma.description,Ma.noLabel),children:o})]})});hi.displayName="InputField";const Jh=({error:t})=>E.jsx("p",{className:Ma.errorMessage,children:t instanceof Cse?t.translatedMessage:t.message}),wje="_avatarInputField_jggu1_15",kje="_avatar_jggu1_15",Tje="_fileInput_jggu1_33",Rje="_edit_jggu1_41",zv={avatarInputField:wje,avatar:kje,fileInput:Tje,edit:Rje},bse=({id:t,label:e,className:n,avatarUrl:r,userId:i,displayName:s,onRemoveAvatar:a,...o})=>{const{t:l}=it(),[c,d]=u.useState(!1),[f,p]=u.useState(void 0),[g,y]=u.useState(!1),v=u.useRef(null);u.useEffect(()=>{const S=v.current,R=w=>{const I=w;I.target.files&&I.target.files.length>0?(p(URL.createObjectURL(I.target.files[0])),d(!1)):p(void 0)};return S.addEventListener("change",R),()=>{S==null||S.removeEventListener("change",R)}});const b=u.useCallback(()=>{v.current.click()},[v]),C=u.useCallback(()=>{d(!0),a()},[a]);return E.jsxs("div",{className:De(zv.avatarInputField,n),children:[E.jsx(rp,{id:i,className:zv.avatar,name:s,size:np.XL,src:c?void 0:f||r}),E.jsx("input",{id:t,accept:"image/*",ref:v,type:"file",className:zv.fileInput,role:"button","aria-label":e,...o}),E.jsx("div",{className:zv.edit,children:(r||f)&&!c?E.jsxs(NM,{title:l("action.edit"),showTitle:!1,open:g,onOpenChange:y,trigger:E.jsx(Bt,{iconOnly:!0,Icon:g$,kind:"tertiary",size:"sm","aria-label":l("action.edit")}),children:[E.jsx(vm,{Icon:IRe,label:l("action.upload_file"),onSelect:b}),E.jsx(vm,{Icon:gRe,label:l("action.remove"),kind:"critical",onSelect:C})]}):E.jsx(Bt,{type:"button",iconOnly:!0,Icon:g$,kind:"tertiary",size:"sm","aria-label":l("action.edit"),onClick:b})})]})};bse.displayName="AvatarInputField";const Ije="_content_1wujw_15",xje="_avatarFieldRow_1wujw_29",oB={content:Ije,avatarFieldRow:xje},Mje=({client:t})=>{const{t:e}=it(),{error:n,displayName:r,avatarUrl:i,saveProfile:s}=E4(t),a=u.useMemo(()=>t.getUserId(),[t]),o=u.useRef(null),l=u.useRef(!1),c=u.useCallback(()=>{l.current=!0},[]),d=u.useRef(!1),f=u.useCallback(()=>{d.current=!0,l.current=!0},[]);return u.useEffect(()=>{const p=o.current;return()=>{if(l.current){const g=new FormData(p),y=g.get("displayName"),v=g.get("avatar"),b=typeof v=="string"?v.length:(v==null?void 0:v.size)??0,C=typeof y=="string"?y:(y==null?void 0:y.name)??null;if(!C)return;s({displayName:C,avatar:v&&b>0?v:void 0,removeAvatar:d.current&&(!v||b===0)}).catch(S=>{A.error("Failed to save profile",S)})}}},[s]),E.jsxs("form",{onChange:c,ref:o,className:oB.content,children:[E.jsx(en,{className:oB.avatarFieldRow,children:a&&r&&E.jsx(bse,{id:"avatar",name:"avatar",label:e("common.avatar"),avatarUrl:i,userId:a,displayName:r,onRemoveAvatar:f})}),E.jsx(en,{children:E.jsx(hi,{id:"userId",name:"userId",label:e("common.username"),type:"text",disabled:!0,value:t.getUserId()})}),E.jsx(en,{children:E.jsx(hi,{id:"displayName",name:"displayName",label:e("common.display_name"),type:"text",required:!0,autoComplete:"off",placeholder:e("common.display_name"),defaultValue:r,"data-testid":"profile_displayname"})}),n&&E.jsx(en,{children:E.jsx(Jh,{error:n})})]})};var d6={exports:{}},Pje=d6.exports,lB;function Lje(){return lB||(lB=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Pje,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function o(v,b){var C=v[b];if(typeof C.bind=="function")return C.bind(v);try{return Function.prototype.bind.call(C,v)}catch{return function(){return Function.prototype.apply.apply(C,[v,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(v){return v==="debug"&&(v="log"),typeof console===n?!1:v==="trace"&&r?l:console[v]!==void 0?o(console,v):console.log!==void 0?o(console,"log"):e}function d(){for(var v=this.getLevel(),b=0;b<i.length;b++){var C=i[b];this[C]=b<v?e:this.methodFactory(C,v,this.name)}if(this.log=this.debug,typeof console===n&&v<this.levels.SILENT)return"No console available for logging"}function f(v){return function(){typeof console!==n&&(d.call(this),this[v].apply(this,arguments))}}function p(v,b,C){return c(v)||f.apply(this,arguments)}function g(v,b){var C=this,S,R,w,I="loglevel";typeof v=="string"?I+=":"+v:typeof v=="symbol"&&(I=void 0);function k(U){var j=(i[U]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=j;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+j+";"}catch{}}}function x(){var U;if(!(typeof window===n||!I)){try{U=window.localStorage[I]}catch{}if(typeof U===n)try{var j=window.document.cookie,$=encodeURIComponent(I),Z=j.indexOf($+"=");Z!==-1&&(U=/^([^;]+)/.exec(j.slice(Z+$.length+1))[1])}catch{}return C.levels[U]===void 0&&(U=void 0),U}}function L(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(U){var j=U;if(typeof j=="string"&&C.levels[j.toUpperCase()]!==void 0&&(j=C.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=C.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+U)}C.name=v,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=b||p,C.getLevel=function(){return w??R??S},C.setLevel=function(U,j){return w=N(U),j!==!1&&k(w),d.call(C)},C.setDefaultLevel=function(U){R=N(U),x()||C.setLevel(U,!1)},C.resetLevel=function(){w=null,L(),d.call(C)},C.enableAll=function(U){C.setLevel(C.levels.TRACE,U)},C.disableAll=function(U){C.setLevel(C.levels.SILENT,U)},C.rebuild=function(){if(a!==C&&(S=N(a.getLevel())),d.call(C),a===C)for(var U in s)s[U].rebuild()},S=N(a?a.getLevel():"WARN");var D=x();D!=null&&(w=N(D)),d.call(C)}a=new g,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var C=s[b];return C||(C=s[b]=new g(b,a.methodFactory)),C};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})}(d6)),d6.exports}var Oje=Lje();const Aje=zo(Oje);var Nje=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{o(n.next(l))}catch(c){i(c)}},a=l=>{try{o(n.throw(l))}catch(c){i(c)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);o((n=n.apply(t,e)).next())});function Dje(t){return typeof t>"u"?!1:Uje(t)||Fje(t)}function Uje(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Fje(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function jje(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function Hje(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(jje(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Dje(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}var $je=[le.ConnectionStateChanged,le.RoomMetadataChanged,le.ActiveSpeakersChanged,le.ConnectionQualityChanged,le.ParticipantConnected,le.ParticipantDisconnected,le.ParticipantPermissionsChanged,le.ParticipantMetadataChanged,le.ParticipantNameChanged,le.ParticipantAttributesChanged,le.TrackMuted,le.TrackUnmuted,le.TrackPublished,le.TrackUnpublished,le.TrackStreamStateChanged,le.TrackSubscriptionFailed,le.TrackSubscriptionPermissionChanged,le.TrackSubscriptionStatusChanged],Vje=[...$je,le.LocalTrackPublished,le.LocalTrackUnpublished];se.TrackPublished,se.TrackUnpublished,se.TrackMuted,se.TrackUnmuted,se.TrackStreamStateChanged,se.TrackSubscribed,se.TrackUnsubscribed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionFailed,se.LocalTrackPublished,se.LocalTrackUnpublished;var Bje=[se.ConnectionQualityChanged,se.IsSpeakingChanged,se.ParticipantMetadataChanged,se.ParticipantPermissionsChanged,se.TrackMuted,se.TrackUnmuted,se.TrackPublished,se.TrackUnpublished,se.TrackStreamStateChanged,se.TrackSubscriptionFailed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionStatusChanged];[...Bje,se.LocalTrackPublished,se.LocalTrackUnpublished];var qje=Aje.getLogger("lk-components-js");qje.setDefaultLevel("WARN");function Gje(t,...e){return new Dn(r=>{const i=()=>{r.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(gn(t))}function Kje(t,e){return new Dn(r=>{const i=(...a)=>{r.next(a)};return t.on(e,i),()=>{t.off(e,i)}})}function Zje(t,e,n=!0){const r=new Dn(s=>{su.getLocalDevices(t,n).then(a=>{s.next(a),s.complete()}).catch(a=>{e==null||e(a),s.next([]),s.complete()})}),i=new Dn(s=>{var a;const o=()=>Nje(this,null,function*(){try{const l=yield su.getLocalDevices(t,n);s.next(l)}catch(l){e==null||e(l)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(a=navigator==null?void 0:navigator.mediaDevices)==null||a.addEventListener("devicechange",o)}return()=>{var l;(l=navigator==null?void 0:navigator.mediaDevices)==null||l.removeEventListener("devicechange",o)}});return $5(r,i)}function LP(t,...e){return new Dn(r=>{const i=()=>{r.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(gn(t))}function OP(t){return LP(t,se.TrackMuted,se.TrackUnmuted,se.ParticipantPermissionsChanged,se.TrackPublished,se.TrackUnpublished,se.LocalTrackPublished,se.LocalTrackUnpublished,se.MediaDevicesError,se.TrackSubscriptionStatusChanged).pipe(Ne(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:s}=n,a=n.getTrackPublication(ue.Source.Microphone),o=n.getTrackPublication(ue.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:s,cameraTrack:o,microphoneTrack:a,participant:n}}))}function zje(t,e={}){var n;let r;const i=new Dn(l=>(r=l,()=>o.unsubscribe())).pipe(gn(Array.from(t.remoteParticipants.values()))),s=(n=e.additionalRoomEvents)!=null?n:Vje,a=Array.from(new Set([le.ParticipantConnected,le.ParticipantDisconnected,le.ConnectionStateChanged,...s])),o=Gje(t,...a).subscribe(l=>r==null?void 0:r.next(Array.from(l.remoteParticipants.values())));return t.remoteParticipants.size>0&&(r==null||r.next(Array.from(t.remoteParticipants.values()))),i}const i2=new li,Ese=new qi([]),Sse=new qi(void 0),FR=new li;window.controls={canEnterPip(){return i2.observed},enablePip(){if(!i2.observed)throw new Error("No call is running");i2.next(!0)},disablePip(){if(!i2.observed)throw new Error("No call is running");i2.next(!1)},setAvailableAudioDevices(t){Ese.next(t)},setAudioDevice(t){Sse.next(t)},setAudioEnabled(t){if(!FR.observed)throw new Error("Output controls are disabled. No setAudioEnabled$ observer");FR.next(t)},setOutputEnabled(t){this.setAudioEnabled(t)},setAvailableOutputDevices(t){this.setAvailableAudioDevices(t)},setOutputDevice(t){this.setAudioDevice(t)}};const jR="earpiece-id",wse=sFe.value$.pipe(Ne(t=>t||navigator.userAgent.includes("iPhone")));function kse(t,e){return u.useMemo(()=>{if(t.size)return e!==void 0&&t.has(e)||t.size===1&&t.has("")?e:t.keys().next().value},[t,e])}function HR(t,e,n){const r=u.useRef(!1),i=n||r.current;r.current||(r.current=n);const s=u.useMemo(()=>Zje(t,()=>A.error("Error creating MediaDeviceObserver"),i).pipe(gn([])),[t,i]),a=Qe(u.useMemo(()=>s.pipe(Ne(f=>{var g;let p=new Map(f.map((y,v)=>[y.deviceId,y.label?{type:"name",name:y.label}:{type:"number",number:v+1}]));return t==="audiooutput"&&!p.has("")&&!p.has("default")&&p.size&&(p=new Map([["",{type:"default",name:((g=f[0])==null?void 0:g.label)||null}],...p])),p})),[s,t])),[o,l]=Gr(e),c=kse(a,o),d=Qe(u.useMemo(()=>s.pipe(Ne(f=>{var p;return(p=f.find(g=>g.deviceId===c))==null?void 0:p.groupId})),[s,c]));return u.useMemo(()=>({available:a,selectedId:c,useAsEarpiece:!1,selectedGroupId:d,select:l}),[a,c,d,l])}const wS={available:new Map,selectedId:void 0,selectedGroupId:void 0,select:()=>{},useAsEarpiece:!1},Wje={audioInput:wS,audioOutput:wS,videoInput:wS,startUsingDeviceNames:()=>{},stopUsingDeviceNames:()=>{}},Tse=u.createContext(Wje);function Yje(){const[t,e]=u.useState(0),n=t>0,r=HR("audioinput",tFe,n),i=HR("videoinput",nFe,n),s=u.useCallback(()=>e(o=>o+1),[e]),a=u.useCallback(()=>e(o=>o-1),[e]);return{audioInput:r,videoInput:i,startUsingDeviceNames:s,stopUsingDeviceNames:a,usingNames:n}}const Jje=({children:t})=>{const{audioInput:e,videoInput:n,startUsingDeviceNames:r,stopUsingDeviceNames:i,usingNames:s}=Yje(),{controlledAudioDevices:a}=Yo(),o=HR("audiooutput",tse,s),l=Qje(),c=u.useMemo(()=>({audioInput:e,audioOutput:a?l:o,videoInput:n,startUsingDeviceNames:r,stopUsingDeviceNames:i}),[e,a,l,o,n,r,i]);return E.jsx(Tse.Provider,{value:c,children:t})};function Qje(){const{available:t}=Qe(Oh(()=>{const a=Ese.pipe(Ne(o=>{const l=o.find(d=>d.forEarpiece),c=o.map(({id:d,name:f,isEarpiece:p,isSpeaker:g})=>{let y={type:"name",name:f};return p&&(y={type:"earpiece"}),g&&(y={type:"default",name:f}),[d,y]});return{devicesMap:new Map(c),deviceForEarpiece:l}}));return Bn([a,wse],({devicesMap:o,deviceForEarpiece:l},c)=>{let d=o;return c&&l&&(d=new Map([...o.entries(),[jR,{type:"earpiece"}]])),{available:d,deviceForEarpiece:l}})})),[e,n]=Gr(tse);u.useEffect(()=>{const a=Sse.subscribe(o=>{o&&n(o)});return()=>a.unsubscribe()},[n]);const r=kse(t,e),[i,s]=u.useState(!1);return u.useEffect(()=>{var a,o,l,c;r&&((o=(a=window.controls).onAudioDeviceSelect)==null||o.call(a,r),(c=(l=window.controls).onOutputDeviceSelect)==null||c.call(l,r)),s(r===jR)},[r]),u.useMemo(()=>({available:t,selectedId:r,selectedGroupId:void 0,select:n,useAsEarpiece:i}),[t,r,n,i])}const u1=()=>u.useContext(Tse),Xje=(t,e=!0)=>u.useEffect(()=>{if(e)return t.startUsingDeviceNames(),t.stopUsingDeviceNames},[t,e]),Rse=()=>{const{audioOutput:t}=u1(),e=u.useMemo(()=>t.useAsEarpiece?1:0,[t.useAsEarpiece]),n=u.useMemo(()=>t.useAsEarpiece?.1:1,[t.useAsEarpiece]);return{pan:e,volume:n}},eHe=()=>{const{t}=it(),[e,n]=Gr(rse),[r,i]=Gr(ise),[s,a]=Gr(TP),o=(d,f)=>{f(d.target.checked)},[l,c]=Gr(kP);return E.jsxs("div",{children:[E.jsx(_n,{children:t("settings.preferences_tab.introduction")}),E.jsx(en,{children:E.jsx(hi,{id:"showHandRaisedTimer",label:t("settings.preferences_tab.show_hand_raised_timer_label"),description:t("settings.preferences_tab.show_hand_raised_timer_description"),type:"checkbox",checked:e,onChange:d=>o(d,n)})}),E.jsx(en,{children:E.jsx(hi,{id:"showReactions",label:t("settings.preferences_tab.reactions_show_label"),description:t("settings.preferences_tab.reactions_show_description"),type:"checkbox",checked:r,onChange:d=>o(d,i)})}),E.jsx(en,{children:E.jsx(hi,{id:"playReactionSound",label:t("settings.preferences_tab.reactions_play_sound_label"),description:t("settings.preferences_tab.reactions_play_sound_description"),type:"checkbox",checked:s,onChange:d=>o(d,a)})}),E.jsx(en,{children:E.jsx(hi,{id:"developerSettingsTab",type:"checkbox",checked:l,label:t("settings.preferences_tab.developer_mode_label"),description:t("settings.preferences_tab.developer_mode_label_description"),onChange:d=>c(d.target.checked)})})]})};function Ise(t,[e,n]){return Math.min(n,Math.max(e,t))}function tHe(t){const e=u.useRef({value:t,previous:t});return u.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var B5=u.forwardRef((t,e)=>{const{children:n,...r}=t,i=u.Children.toArray(n),s=i.find(rHe);if(s){const a=s.props.children,o=i.map(l=>l===s?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:l);return E.jsx($R,{...r,ref:e,children:u.isValidElement(a)?u.cloneElement(a,void 0,o):null})}return E.jsx($R,{...r,ref:e,children:n})});B5.displayName="Slot";var $R=u.forwardRef((t,e)=>{const{children:n,...r}=t;if(u.isValidElement(n)){const i=sHe(n),s=iHe(r,n.props);return n.type!==u.Fragment&&(s.ref=e?Xl(e,i):i),u.cloneElement(n,s)}return u.Children.count(n)>1?u.Children.only(null):null});$R.displayName="SlotClone";var nHe=({children:t})=>E.jsx(E.Fragment,{children:t});function rHe(t){return u.isValidElement(t)&&t.type===nHe}function iHe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function sHe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var aHe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ly=aHe.reduce((t,e)=>{const n=u.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?B5:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function oHe(t){const e=t+"CollectionProvider",[n,r]=Ql(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:y,children:v}=g,b=be.useRef(null),C=be.useRef(new Map).current;return E.jsx(i,{scope:y,itemMap:C,collectionRef:b,children:v})};a.displayName=e;const o=t+"CollectionSlot",l=be.forwardRef((g,y)=>{const{scope:v,children:b}=g,C=s(o,v),S=fn(y,C.collectionRef);return E.jsx(B5,{ref:S,children:b})});l.displayName=o;const c=t+"CollectionItemSlot",d="data-radix-collection-item",f=be.forwardRef((g,y)=>{const{scope:v,children:b,...C}=g,S=be.useRef(null),R=fn(y,S),w=s(c,v);return be.useEffect(()=>(w.itemMap.set(S,{ref:S,...C}),()=>void w.itemMap.delete(S))),E.jsx(B5,{[d]:"",ref:R,children:b})});f.displayName=c;function p(g){const y=s(t+"CollectionConsumer",g);return be.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const C=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((w,I)=>C.indexOf(w.ref.current)-C.indexOf(I.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:l,ItemSlot:f},p,r]}var xse=["PageUp","PageDown"],Mse=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Pse={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cp="Slider",[VR,lHe,cHe]=oHe(cp),[Lse,set]=Ql(cp,[cHe]),[uHe,Oy]=Lse(cp),Ose=u.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:y,...v}=t,b=u.useRef(new Set),C=u.useRef(0),R=a==="horizontal"?dHe:hHe,[w=[],I]=oy({prop:d,defaultProp:c,onChange:U=>{var $;($=[...b.current][C.current])==null||$.focus(),f(U)}}),k=u.useRef(w);function x(U){const j=vHe(w,U);D(U,j)}function L(U){D(U,C.current)}function N(){const U=k.current[C.current];w[C.current]!==U&&p(w)}function D(U,j,{commit:$}={commit:!1}){const Z=bHe(s),V=EHe(Math.round((U-r)/s)*s+r,Z),z=Ise(V,[r,i]);I((K=[])=>{const q=pHe(K,z,j);if(CHe(q,l*s)){C.current=q.indexOf(z);const G=String(q)!==String(K);return G&&$&&p(q),G?q:K}else return K})}return E.jsx(uHe,{scope:t.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:C,thumbs:b.current,values:w,orientation:a,form:y,children:E.jsx(VR.Provider,{scope:t.__scopeSlider,children:E.jsx(VR.Slot,{scope:t.__scopeSlider,children:E.jsx(R,{"aria-disabled":o,"data-disabled":o?"":void 0,...v,ref:e,onPointerDown:et(v.onPointerDown,()=>{o||(k.current=w)}),min:r,max:i,inverted:g,onSlideStart:o?void 0:x,onSlideMove:o?void 0:L,onSlideEnd:o?void 0:N,onHomeKeyDown:()=>!o&&D(r,0,{commit:!0}),onEndKeyDown:()=>!o&&D(i,w.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:j})=>{if(!o){const V=xse.includes(U.key)||U.shiftKey&&Mse.includes(U.key)?10:1,z=C.current,K=w[z],q=s*V*j;D(K+q,z,{commit:!0})}}})})})})});Ose.displayName=cp;var[Ase,Nse]=Lse(cp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),dHe=u.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=t,[f,p]=u.useState(null),g=fn(e,R=>p(R)),y=u.useRef(void 0),v=rM(i),b=v==="ltr",C=b&&!s||!b&&s;function S(R){const w=y.current||f.getBoundingClientRect(),I=[0,w.width],x=AP(I,C?[n,r]:[r,n]);return y.current=w,x(R-w.left)}return E.jsx(Ase,{scope:t.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:E.jsx(Dse,{dir:v,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:R=>{const w=S(R.clientX);a==null||a(w)},onSlideMove:R=>{const w=S(R.clientX);o==null||o(w)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:R=>{const I=Pse[C?"from-left":"from-right"].includes(R.key);c==null||c({event:R,direction:I?-1:1})}})})}),hHe=u.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=t,d=u.useRef(null),f=fn(e,d),p=u.useRef(void 0),g=!i;function y(v){const b=p.current||d.current.getBoundingClientRect(),C=[0,b.height],R=AP(C,g?[r,n]:[n,r]);return p.current=b,R(v-b.top)}return E.jsx(Ase,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:E.jsx(Dse,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=y(v.clientY);s==null||s(b)},onSlideMove:v=>{const b=y(v.clientY);a==null||a(b)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:v=>{const C=Pse[g?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:C?-1:1})}})})}),Dse=u.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=t,d=Oy(cp,n);return E.jsx(Ly.span,{...c,ref:e,onKeyDown:et(t.onKeyDown,f=>{f.key==="Home"?(a(f),f.preventDefault()):f.key==="End"?(o(f),f.preventDefault()):xse.concat(Mse).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:et(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():r(f)}),onPointerMove:et(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:et(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),s(f))})})}),Use="SliderTrack",Fse=u.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Oy(Use,n);return E.jsx(Ly.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});Fse.displayName=Use;var BR="SliderRange",jse=u.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Oy(BR,n),s=Nse(BR,n),a=u.useRef(null),o=fn(e,a),l=i.values.length,c=i.values.map(p=>$se(p,i.min,i.max)),d=l>1?Math.min(...c):0,f=100-Math.max(...c);return E.jsx(Ly.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:f+"%"}})});jse.displayName=BR;var qR="SliderThumb",Hse=u.forwardRef((t,e)=>{const n=lHe(t.__scopeSlider),[r,i]=u.useState(null),s=fn(e,o=>i(o)),a=u.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return E.jsx(fHe,{...t,ref:s,index:a})}),fHe=u.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,a=Oy(qR,n),o=Nse(qR,n),[l,c]=u.useState(null),d=fn(e,S=>c(S)),f=l?a.form||!!l.closest("form"):!0,p=rX(l),g=a.values[r],y=g===void 0?0:$se(g,a.min,a.max),v=gHe(r,a.values.length),b=p==null?void 0:p[o.size],C=b?yHe(b,y,o.direction):0;return u.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),E.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${C}px)`},children:[E.jsx(VR.ItemSlot,{scope:t.__scopeSlider,children:E.jsx(Ly.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:et(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),f&&E.jsx(mHe,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},r)]})});Hse.displayName=qR;var mHe=t=>{const{value:e,...n}=t,r=u.useRef(null),i=tHe(e);return u.useEffect(()=>{const s=r.current,a=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),E.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function pHe(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function $se(t,e,n){const s=100/(n-e)*(t-e);return Ise(s,[0,100])}function gHe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function vHe(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function yHe(t,e,n){const r=t/2,s=AP([0,50],[0,r]);return(r-s(e)*n)*n}function _He(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function CHe(t,e){if(e>0){const n=_He(t);return Math.min(...n)>=e}return!0}function AP(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function bHe(t){return(String(t).split(".")[1]||"").length}function EHe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var SHe=Ose,wHe=Fse,kHe=jse,THe=Hse;const RHe="_slider_swtw7_15",IHe="_track_swtw7_27",xHe="_highlight_swtw7_61",MHe="_handle_swtw7_85",Wv={slider:RHe,track:IHe,highlight:xHe,handle:MHe},Vse=({className:t,label:e,value:n,onValueChange:r,onValueCommit:i,min:s,max:a,step:o,disabled:l})=>{const c=u.useCallback(([f])=>r(f),[r]),d=u.useCallback(([f])=>i==null?void 0:i(f),[i]);return E.jsxs(SHe,{className:De(t,Wv.slider),value:[n],onValueChange:c,onValueCommit:d,min:s,max:a,step:o,disabled:l,children:[E.jsx(wHe,{className:Wv.track,children:E.jsx(kHe,{className:Wv.highlight})}),E.jsx(Bi,{placement:"top",label:Math.round(n*100).toString()+"%",children:E.jsx(THe,{className:Wv.handle,"aria-label":e})})]})},PHe="_selection_1nt0r_1",LHe="_title_1nt0r_9",OHe="_separator_1nt0r_19",AHe="_options_1nt0r_27",NHe="_secondary_1nt0r_39",O3={selection:PHe,title:LHe,separator:OHe,options:AHe,secondary:NHe},kS=({device:t,title:e,numberedLabel:n})=>{const{t:r}=it(),i=u.useId(),s=u.useCallback(a=>{t.select(a.target.value)},[t]);return t.available.size<=1?null:E.jsxs("div",{className:O3.selection,children:[E.jsx(o1,{type:"body",weight:"semibold",size:"sm",as:"h4",className:O3.title,children:e}),E.jsx(BM,{className:O3.separator}),E.jsx("div",{className:O3.options,children:[...t.available].map(([a,o])=>{let l;switch(o.type){case"name":l=o.name;break;case"number":l=n(o.number);break;case"default":l=o.name===null?r("settings.devices.default"):E.jsxs(ca,{i18nKey:"settings.devices.default_named",name:o.name,children:["Default"," ",E.jsxs("span",{className:O3.secondary,children:["(",{name:o.name},")"]})]});break;case"earpiece":l=r("settings.devices.earpiece");break}let c=!1;return t.useAsEarpiece?c=a===jR:c=a===t.selectedId,E.jsx(ETe,{name:i,control:E.jsx(cTe,{checked:c,onChange:s,value:a}),children:E.jsx(hTe,{children:l})},a)})})]})};var Ah=typeof self<"u"?self:{};function H1(){throw Error("Invalid UTF8")}function cB(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}let Yv,TS;const DHe=typeof TextDecoder<"u";let UHe;const FHe=typeof TextEncoder<"u";function Bse(t){if(FHe)t=(UHe||(UHe=new TextEncoder)).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)r[n++]=e;else{if(e<2048)r[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const s=t.charCodeAt(++i);if(s>=56320&&s<=57343){e=1024*(e-55296)+s-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var NP,q5;e:{for(var uB=["CLOSURE_FLAGS"],RS=Ah,IS=0;IS<uB.length;IS++)if((RS=RS[uB[IS]])==null){q5=null;break e}q5=RS}var Pg,dB=q5&&q5[610401301];NP=dB!=null&&dB;const hB=Ah.navigator;function GR(t){return!!NP&&!!Pg&&Pg.brands.some(({brand:e})=>e&&e.indexOf(t)!=-1)}function Aa(t){var e;return(e=Ah.navigator)&&(e=e.userAgent)||(e=""),e.indexOf(t)!=-1}function dd(){return!!NP&&!!Pg&&Pg.brands.length>0}function xS(){return dd()?GR("Chromium"):(Aa("Chrome")||Aa("CriOS"))&&!(!dd()&&Aa("Edge"))||Aa("Silk")}function DP(t){return DP[" "](t),t}Pg=hB&&hB.userAgentData||null,DP[" "]=function(){};var jHe=!dd()&&(Aa("Trident")||Aa("MSIE"));!Aa("Android")||xS(),xS(),Aa("Safari")&&(xS()||!dd()&&Aa("Coast")||!dd()&&Aa("Opera")||!dd()&&Aa("Edge")||(dd()?GR("Microsoft Edge"):Aa("Edg/"))||dd()&&GR("Opera"));var qse={},i0=null;function HHe(t){const e=t.length;let n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);const r=new Uint8Array(n);let i=0;return function(s,a){function o(c){for(;l<s.length;){const d=s.charAt(l++),f=i0[d];if(f!=null)return f;if(!/^[\s\xa0]*$/.test(d))throw Error("Unknown base64 encoding at char: "+d)}return c}Gse();let l=0;for(;;){const c=o(-1),d=o(0),f=o(64),p=o(64);if(p===64&&c===-1)break;a(c<<2|d>>4),f!=64&&(a(d<<4&240|f>>2),p!=64&&a(f<<6&192|p))}}(t,function(s){r[i++]=s}),i!==n?r.subarray(0,i):r}function Gse(){if(!i0){i0={};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const r=t.concat(e[n].split(""));qse[n]=r;for(let i=0;i<r.length;i++){const s=r[i];i0[s]===void 0&&(i0[s]=i)}}}}var Kse=typeof Uint8Array<"u",Zse=!jHe&&typeof btoa=="function";function fB(t){if(!Zse){var e;e===void 0&&(e=0),Gse(),e=qse[e];var n=Array(Math.floor(t.length/3)),r=e[64]||"";let l=0,c=0;for(;l<t.length-2;l+=3){var i=t[l],s=t[l+1],a=t[l+2],o=e[i>>2];i=e[(3&i)<<4|s>>4],s=e[(15&s)<<2|a>>6],a=e[63&a],n[c++]=o+i+s+a}switch(o=0,a=r,t.length-l){case 2:a=e[(15&(o=t[l+1]))<<2]||r;case 1:t=t[l],n[c]=e[t>>2]+e[(3&t)<<4|o>>4]+a+r}return n.join("")}for(e="",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const mB=/[-_.]/g,$He={"-":"+",_:"/",".":"="};function VHe(t){return $He[t]||""}function zse(t){if(!Zse)return HHe(t);mB.test(t)&&(t=t.replace(mB,VHe)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function S4(t){return Kse&&t!=null&&t instanceof Uint8Array}var Em={};function Nh(){return BHe||(BHe=new Xc(null,Em))}function UP(t){Wse(Em);var e=t.g;return(e=e==null||S4(e)?e:typeof e=="string"?zse(e):null)==null?e:t.g=e}var Xc=class{h(){return new Uint8Array(UP(this)||0)}constructor(t,e){if(Wse(e),this.g=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}};let BHe,qHe;function Wse(t){if(t!==Em)throw Error("illegal external caller")}function Yse(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function KR(t){return Yse(t=Error(t),"warning"),t}var Ay=typeof Symbol=="function"&&typeof Symbol()=="symbol",GHe=new Set;function w4(t,e,n=!1,r=!1){return t=typeof Symbol=="function"&&typeof Symbol()=="symbol"?r&&Symbol.for&&t?Symbol.for(t):t!=null?Symbol(t):Symbol():e,n&&GHe.add(t),t}var KHe=w4("jas",void 0,!0,!0),pB=w4(void 0,"0di"),MS=w4(void 0,"2ex"),A3=w4(void 0,"1oa",!0),Sm=w4(void 0,Symbol(),!0);const Je=Ay?KHe:"Ga",Jse={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},Qse=Object.defineProperties;function Ny(t,e){Ay||Je in t||Qse(t,Jse),t[Je]|=e}function Mr(t,e){Ay||Je in t||Qse(t,Jse),t[Je]=e}function up(t){return Ny(t,34),t}function ZHe(t,e){Mr(e,-30975&(0|t))}function ZR(t,e){Mr(e,-30941&(34|t))}function FP(){return typeof BigInt=="function"}function Us(t){return Array.prototype.slice.call(t)}var jP,k4={},Xse={};function gB(t){return!(!t||typeof t!="object"||t.Ia!==Xse)}function HP(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}function $P(t,e){if(t!=null){if(typeof t=="string")t=t?new Xc(t,Em):Nh();else if(t.constructor!==Xc)if(S4(t))t=t.length?new Xc(new Uint8Array(t),Em):Nh();else{if(!e)throw Error();t=void 0}}return t}function G5(t){return!(!Array.isArray(t)||t.length)&&!!(1&(0|t[Je]))}const vB=[];function d1(t){if(2&t)throw Error()}Mr(vB,55),jP=Object.freeze(vB);let yB=class eae{constructor(e,n,r){this.l=0,this.g=e,this.h=n,this.m=r}next(){if(this.l<this.g.length){const e=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,e):e}}return{done:!0,value:void 0}}[Symbol.iterator](){return new eae(this.g,this.h,this.m)}};function VP(t){return Sm?t[Sm]:void 0}var zHe=Object.freeze({});function Dy(t){return t.Qa=!0,t}var WHe=Dy(t=>typeof t=="number"),_B=Dy(t=>typeof t=="string"),YHe=Dy(t=>typeof t=="boolean"),Uy=typeof Ah.BigInt=="function"&&typeof Ah.BigInt(0)=="bigint",zR=Dy(t=>Uy?t>=QHe&&t<=e$e:t[0]==="-"?CB(t,JHe):CB(t,XHe));const JHe=Number.MIN_SAFE_INTEGER.toString(),QHe=Uy?BigInt(Number.MIN_SAFE_INTEGER):void 0,XHe=Number.MAX_SAFE_INTEGER.toString(),e$e=Uy?BigInt(Number.MAX_SAFE_INTEGER):void 0;function CB(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r>i)return!1;if(r<i)return!0}}const t$e=typeof Uint8Array.prototype.slice=="function";let tae,vn=0,or=0;function bB(t){const e=t>>>0;vn=e,or=(t-e)/4294967296>>>0}function wm(t){if(t<0){bB(-t);const[e,n]=KP(vn,or);vn=e>>>0,or=n>>>0}else bB(t)}function BP(t){const e=tae||(tae=new DataView(new ArrayBuffer(8)));e.setFloat32(0,+t,!0),or=0,vn=e.getUint32(0,!0)}function qP(t,e){const n=4294967296*e+(t>>>0);return Number.isSafeInteger(n)?n:Lg(t,e)}function GP(t,e){const n=2147483648&e;return n&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),typeof(t=qP(t,e))=="number"?n?-t:t:n?"-"+t:t}function Lg(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=""+(4294967296*e+t);else FP()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+EB(n)+EB(t));return n}function EB(t){return t=String(t),"0000000".slice(t.length)+t}function Fy(t){if(t.length<16)wm(Number(t));else if(FP())t=BigInt(t),vn=Number(t&BigInt(4294967295))>>>0,or=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(t[0]==="-");or=vn=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const s=Number(t.slice(r,i));or*=1e6,vn=1e6*vn+s,vn>=4294967296&&(or+=Math.trunc(vn/4294967296),or>>>=0,vn>>>=0)}if(e){const[r,i]=KP(vn,or);vn=r,or=i}}}function KP(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}const ZP=typeof BigInt=="function"?BigInt.asIntN:void 0,n$e=typeof BigInt=="function"?BigInt.asUintN:void 0,q2=Number.isSafeInteger,jy=Number.isFinite,K5=Math.trunc;function h1(t){return t==null||typeof t=="number"?t:t==="NaN"||t==="Infinity"||t==="-Infinity"?Number(t):void 0}function nae(t){return t==null||typeof t=="boolean"?t:typeof t=="number"?!!t:void 0}const r$e=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Hy(t){switch(typeof t){case"bigint":return!0;case"number":return jy(t);case"string":return r$e.test(t);default:return!1}}function dp(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return jy(t)?0|t:void 0}function rae(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return jy(t)?t>>>0:void 0}function SB(t){if(t[0]==="-")return!1;const e=t.length;return e<20||e===20&&Number(t.substring(0,6))<184467}function zP(t){return t=K5(t),q2(t)||(wm(t),t=GP(vn,or)),t}function WP(t){var e=K5(Number(t));if(q2(e))return String(e);if((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),e=t.length,!(t[0]==="-"?e<20||e===20&&Number(t.substring(0,7))>-922337:e<19||e===19&&Number(t.substring(0,6))<922337))if(Fy(t),t=vn,2147483648&(e=or))if(FP())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=KP(t,e);t="-"+Lg(n,r)}else t=Lg(t,e);return t}function Z5(t){return t==null?t:typeof t=="bigint"?(zR(t)?t=Number(t):(t=ZP(64,t),t=zR(t)?Number(t):String(t)),t):Hy(t)?typeof t=="number"?zP(t):WP(t):void 0}function i$e(t){if(t==null)return t;var e=typeof t;if(e==="bigint")return String(n$e(64,t));if(Hy(t)){if(e==="string")return e=K5(Number(t)),q2(e)&&e>=0?t=String(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),SB(t)||(Fy(t),t=Lg(vn,or))),t;if(e==="number")return(t=K5(t))>=0&&q2(t)?t:function(n){if(n<0){wm(n);var r=Lg(vn,or);return n=Number(r),q2(n)?n:r}return SB(r=String(n))?r:(wm(n),qP(vn,or))}(t)}}function iae(t){if(typeof t!="string")throw Error();return t}function hp(t){if(t!=null&&typeof t!="string")throw Error();return t}function km(t){return t==null||typeof t=="string"?t:void 0}function YP(t,e,n,r){if(t!=null&&typeof t=="object"&&t.W===k4)return t;if(!Array.isArray(t))return n?2&r?((t=e[pB])||(up((t=new e).u),t=e[pB]=t),e=t):e=new e:e=void 0,e;let i=n=0|t[Je];return i===0&&(i|=32&r),i|=2&r,i!==n&&Mr(t,i),new e(t)}function s$e(t,e,n){if(e)e:{if(!Hy(e=t))throw KR("int64");switch(typeof e){case"string":e=WP(e);break e;case"bigint":if(t=e=ZP(64,e),_B(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(WHe(t)&&!Number.isSafeInteger(t))throw Error(String(t));e=Uy?BigInt(e):YHe(e)?e?"1":"0":_B(e)?e.trim()||"0":String(e);break e;default:e=zP(e)}}else e=Z5(t);return typeof(n=(t=e)==null?n?0:void 0:t)=="string"&&q2(e=+n)?e:n}const a$e={};let o$e=function(){try{return DP(new class extends Map{constructor(){super()}}),!1}catch{return!0}}(),PS=class{constructor(){this.g=new Map}get(e){return this.g.get(e)}set(e,n){return this.g.set(e,n),this.size=this.g.size,this}delete(e){return e=this.g.delete(e),this.size=this.g.size,e}clear(){this.g.clear(),this.size=this.g.size}has(e){return this.g.has(e)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(e,n){return this.g.forEach(e,n)}[Symbol.iterator](){return this.entries()}};const l$e=o$e?(Object.setPrototypeOf(PS.prototype,Map.prototype),Object.defineProperties(PS.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),PS):class extends Map{constructor(){super()}};function wB(t){return t}function LS(t){if(2&t.L)throw Error("Cannot mutate an immutable Map")}var to=class extends l$e{constructor(t,e,n=wB,r=wB){super();let i=0|t[Je];i|=64,Mr(t,i),this.L=i,this.S=e,this.R=n,this.Y=this.S?c$e:r;for(let s=0;s<t.length;s++){const a=t[s],o=n(a[0],!1,!0);let l=a[1];e?l===void 0&&(l=null):l=r(a[1],!1,!0,void 0,void 0,i),super.set(o,l)}}na(t=kB){if(this.size!==0)return this.X(t)}X(t=kB){const e=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=t(r[0]),r[1]=t(r[1]),e.push(r);return e}clear(){LS(this),super.clear()}delete(t){return LS(this),super.delete(this.R(t,!0,!1))}entries(){var t=this.ma();return new yB(t,u$e,this)}keys(){return this.Ha()}values(){var t=this.ma();return new yB(t,to.prototype.get,this)}forEach(t,e){super.forEach((n,r)=>{t.call(e,this.get(r),r,this)})}set(t,e){return LS(this),(t=this.R(t,!0,!1))==null?this:e==null?(super.delete(t),this):super.set(t,this.Y(e,!0,!0,this.S,!1,this.L))}Na(t){const e=this.R(t[0],!1,!0);t=t[1],t=this.S?t===void 0?null:t:this.Y(t,!1,!0,void 0,!1,this.L),super.set(e,t)}has(t){return super.has(this.R(t,!1,!1))}get(t){t=this.R(t,!1,!1);const e=super.get(t);if(e!==void 0){var n=this.S;return n?((n=this.Y(e,!1,!0,n,this.ra,this.L))!==e&&super.set(t,n),n):e}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function c$e(t,e,n,r,i,s){return t=YP(t,r,n,s),i&&(t=Vy(t)),t}function kB(t){return t}function u$e(t){return[t,this.get(t)]}let d$e,sae,h$e;function TB(){return d$e||(d$e=new to(up([]),void 0,void 0,void 0,a$e))}function JP(t,e,n,r,i){if(t!=null){if(Array.isArray(t))t=G5(t)?void 0:i&&2&(0|t[Je])?t:QP(t,e,n,r!==void 0,i);else if(HP(t)){const s={};for(let a in t)s[a]=JP(t[a],e,n,r,i);t=s}else t=e(t,r);return t}}function QP(t,e,n,r,i){const s=r||n?0|t[Je]:0,a=r?!!(32&s):void 0;r=Us(t);for(let o=0;o<r.length;o++)r[o]=JP(r[o],e,n,a,i);return n&&((t=VP(t))&&(r[Sm]=Us(t)),n(s,r)),r}function f$e(t){return JP(t,aae,void 0,void 0,!1)}function aae(t){return t.W===k4?t.toJSON():t instanceof to?t.na(f$e):function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"bigint":return zR(e)?Number(e):String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(G5(e))return}else{if(S4(e))return fB(e);if(e instanceof Xc){const n=e.g;return n==null?"":typeof n=="string"?n:e.g=fB(n)}if(e instanceof to)return e.na()}}return e}(t)}function oae(t){return QP(t,aae,void 0,void 0,!1)}function Ld(t,e,n){return t=lae(t,e[0],e[1],n?1:2),e!==sae&&n&&Ny(t,16384),t}function lae(t,e,n,r){if(t==null){var i=96;n?(t=[n],i|=512):t=[],e&&(i=-33521665&i|(1023&e)<<15)}else{if(!Array.isArray(t))throw Error("narr");if(2048&(i=0|t[Je]))throw Error("farr");if(64&i)return t;if(r===1||r===2||(i|=64),n&&(i|=512,n!==t[0]))throw Error("mid");e:{if(r=(n=t).length){const s=r-1;if(HP(n[s])){if((e=s-(512&(i|=256)?0:-1))>=1024)throw Error("pvtlmt");i=-33521665&i|(1023&e)<<15;break e}}if(e){if((e=Math.max(e,r-(512&i?0:-1)))>1024)throw Error("spvt");i=-33521665&i|(1023&e)<<15}}}return Mr(t,i),t}function WR(t,e,n=ZR){if(t!=null){if(Kse&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=0|t[Je];return 2&r?t:(e&&(e=r===0||!!(32&r)&&!(64&r||!(16&r))),e?(Mr(t,-12293&(34|r)),t):QP(t,WR,4&r?ZR:n,!0,!0))}return t.W===k4?t=2&(r=0|(n=t.u)[Je])?t:new t.constructor($y(n,r,!0)):t instanceof to&&!(2&t.L)&&(n=up(t.X(WR)),t=new to(n,t.S,t.R,t.Y)),t}}function $y(t,e,n){const r=n||2&e?ZR:ZHe,i=!!(32&e);return t=function(s,a,o){const l=Us(s);var c=l.length;const d=256&a?l[c-1]:void 0;for(c+=d?-1:0,a=512&a?1:0;a<c;a++)l[a]=o(l[a]);if(d){a=l[a]={};for(const f in d)a[f]=o(d[f])}return(s=VP(s))&&(l[Sm]=Us(s)),l}(t,e,s=>WR(s,i,r)),Ny(t,32|(n?2:0)),t}function Vy(t){const e=t.u,n=0|e[Je];return 2&n?new t.constructor($y(e,n,!1)):t}function Tm(t,e){return _u(t=t.u,0|t[Je],e)}function _u(t,e,n,r){if(n===-1)return null;var i=n+(512&e?0:-1);const s=t.length-1;return i>=s&&256&e?t[s][n]:r&&256&e&&(e=t[s][n])!=null?(t[i]!=null&&MS!=null&&((i=(t=qHe??(qHe={}))[MS]||0)>=4||(t[MS]=i+1,Yse(t=Error(),"incident"),function(a){Ah.setTimeout(()=>{throw a},0)}(t))),e):i<=s?t[i]:void 0}function Tn(t,e,n){const r=t.u;let i=0|r[Je];return d1(i),tr(r,i,e,n),t}function tr(t,e,n,r){const i=512&e?0:-1,s=n+i;var a=t.length-1;return s>=a&&256&e?(t[a][n]=r,e):s<=a?(t[s]=r,256&e&&n in(t=t[a])&&delete t[n],e):(r!==void 0&&(n>=(a=e>>15&1023||536870912)?r!=null&&(t[a+i]={[n]:r},Mr(t,e|=256)):t[s]=r),e)}function h6(t,e){let n=0|(t=t.u)[Je];const r=_u(t,n,e),i=h1(r);return i!=null&&i!==r&&tr(t,n,e,i),i}function cae(t){let e=0|(t=t.u)[Je];const n=_u(t,e,1),r=$P(n,!0);return r!=null&&r!==n&&tr(t,e,1,r),r}function ih(){return zHe===void 0?2:4}function sh(t,e,n,r,i){const s=t.u,a=2&(t=0|s[Je])?1:r;i=!!i;let o=0|(r=XP(s,t,e))[Je];if(!(4&o)){4&o&&(r=Us(r),o=eu(o,t),t=tr(s,t,e,r));let l=0,c=0;for(;l<r.length;l++){const d=n(r[l]);d!=null&&(r[c++]=d)}c<l&&(r.length=c),o=eL(o,t),n=-4097&(20|o),o=n&=-8193,Mr(r,o),2&o&&Object.freeze(r)}return a===1||a===4&&32&o?Bc(o)||(i=o,o|=2,o!==i&&Mr(r,o),Object.freeze(r)):(a===2&&Bc(o)&&(r=Us(r),o=eu(o,t),o=Od(o,t,i),Mr(r,o),t=tr(s,t,e,r)),Bc(o)||(e=o,o=Od(o,t,i),o!==e&&Mr(r,o))),r}function XP(t,e,n,r){return t=_u(t,e,n,r),Array.isArray(t)?t:jP}function eL(t,e){return t===0&&(t=eu(t,e)),1|t}function Bc(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function uae(t){t=Us(t);for(let e=0;e<t.length;e++){const n=t[e]=Us(t[e]);Array.isArray(n[1])&&(n[1]=up(n[1]))}return t}function YR(t,e,n,r){let i=0|(t=t.u)[Je];d1(i),tr(t,i,e,(r==="0"?Number(n)===0:n===r)?void 0:n)}function fp(t,e,n,r,i){d1(e);var s=!(!(64&e)&&16384&e);const a=(i=XP(t,e,n,i))!==jP;if(s||!a){let o=s=a?0|i[Je]:0;(!a||2&o||Bc(o)||4&o&&!(32&o))&&(i=Us(i),o=eu(o,e),e=tr(t,e,n,i)),o=-13&eL(o,e),o=Od(r?-17&o:16|o,e,!0),o!==s&&Mr(i,o)}return i}function OS(t,e){var n=Xae;return nL(tL(t=t.u),t,0|t[Je],n)===e?e:-1}function tL(t){if(Ay)return t[A3]??(t[A3]=new Map);if(A3 in t)return t[A3];const e=new Map;return Object.defineProperty(t,A3,{value:e}),e}function dae(t,e,n,r){const i=tL(t),s=nL(i,t,e,n);return s!==r&&(s&&(e=tr(t,e,s)),i.set(n,r)),e}function nL(t,e,n,r){let i=t.get(r);if(i!=null)return i;i=0;for(let s=0;s<r.length;s++){const a=r[s];_u(e,n,a)!=null&&(i!==0&&(n=tr(e,n,i)),i=a)}return t.set(r,i),i}function rL(t,e,n,r){let i,s=0|t[Je];if((r=_u(t,s,n,r))!=null&&r.W===k4)return(e=Vy(r))!==r&&tr(t,s,n,e),e.u;if(Array.isArray(r)){const a=0|r[Je];i=2&a?Ld($y(r,a,!1),e,!0):64&a?r:Ld(i,e,!0)}else i=Ld(void 0,e,!0);return i!==r&&tr(t,s,n,i),i}function hae(t,e,n,r){let i=0|(t=t.u)[Je];return(e=YP(r=_u(t,i,n,r),e,!1,i))!==r&&e!=null&&tr(t,i,n,e),e}function Vt(t,e,n,r=!1){if((e=hae(t,e,n,r))==null)return e;if(!(2&(r=0|(t=t.u)[Je]))){const i=Vy(e);i!==e&&tr(t,r,n,e=i)}return e}function fae(t,e,n,r,i,s,a){t=t.u;var o=!!(2&e);const l=o?1:i;s=!!s,a&&(a=!o);var c=0|(i=XP(t,e,r))[Je];if(!(o=!!(4&c))){var d=i,f=e;const p=!!(2&(c=eL(c,e)));p&&(f|=2);let g=!p,y=!0,v=0,b=0;for(;v<d.length;v++){const C=YP(d[v],n,!1,f);if(C instanceof n){if(!p){const S=!!(2&(0|C.u[Je]));g&&(g=!S),y&&(y=S)}d[b++]=C}}b<v&&(d.length=b),c|=4,c=y?16|c:-17&c,Mr(d,c=g?8|c:-9&c),p&&Object.freeze(d)}if(a&&!(8&c||!i.length&&(l===1||l===4&&32&c))){for(Bc(c)&&(i=Us(i),c=eu(c,e),e=tr(t,e,r,i)),n=i,a=c,d=0;d<n.length;d++)(c=n[d])!==(f=Vy(c))&&(n[d]=f);a|=8,Mr(n,a=n.length?-17&a:16|a),c=a}return l===1||l===4&&32&c?Bc(c)||(e=c,(c|=!i.length||16&c&&(!o||32&c)?2:2048)!==e&&Mr(i,c),Object.freeze(i)):(l===2&&Bc(c)&&(Mr(i=Us(i),c=Od(c=eu(c,e),e,s)),e=tr(t,e,r,i)),Bc(c)||(r=c,(c=Od(c,e,s))!==r&&Mr(i,c))),i}function mu(t,e,n){const r=0|t.u[Je];return fae(t,r,e,n,ih(),!1,!(2&r))}function nt(t,e,n,r){return r==null&&(r=void 0),Tn(t,n,r)}function N0(t,e,n,r){r==null&&(r=void 0);e:{let i=0|(t=t.u)[Je];if(d1(i),r==null){const s=tL(t);if(nL(s,t,i,n)!==e)break e;s.set(n,0)}else i=dae(t,i,n,e);tr(t,i,e,r)}}function eu(t,e){return-2049&(t=32|(2&e?2|t:-3&t))}function Od(t,e,n){return 32&e&&n||(t&=-33),t}function z5(t,e,n,r){const i=0|t.u[Je];d1(i),t=fae(t,i,n,e,2,!0),r=r??new n,t.push(r),t[Je]=2&(0|r.u[Je])?-9&t[Je]:-17&t[Je]}function Va(t,e){return dp(Tm(t,e))}function no(t,e){return km(Tm(t,e))}function pr(t,e){return h6(t,e)??0}function Og(t,e,n){if(n!=null&&typeof n!="boolean")throw t=typeof n,Error(`Expected boolean but got ${t!="object"?t:n?Array.isArray(n)?"array":t:"null"}: ${n}`);Tn(t,e,n)}function Vl(t,e,n){if(n!=null){if(typeof n!="number"||!jy(n))throw KR("int32");n|=0}Tn(t,e,n)}function Ze(t,e,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);Tn(t,e,n)}function W5(t,e,n){{const a=t.u;let o=0|a[Je];if(d1(o),n==null)tr(a,o,e);else{var r=t=0|n[Je],i=Bc(t),s=i||Object.isFrozen(n);for(i||(t=0),s||(n=Us(n),r=0,t=Od(t=eu(t,o),o,!0),s=!1),t|=21,i=0;i<n.length;i++){const l=n[i],c=iae(l);Object.is(l,c)||(s&&(n=Us(n),r=0,t=Od(t=eu(t,o),o,!0),s=!1),n[i]=c)}t!==r&&(s&&(n=Us(n),t=Od(t=eu(t,o),o,!0)),Mr(n,t)),tr(a,o,e,n)}}}function By(t,e,n){d1(0|t.u[Je]),sh(t,e,km,2,!0).push(iae(n))}function mae(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function iL(){return Error("Failed to read varint, encoding is invalid.")}function pae(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function sL(t){if(typeof t=="string")return{buffer:zse(t),N:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),N:!1};if(t.constructor===Uint8Array)return{buffer:t,N:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),N:!1};if(t.constructor===Xc)return{buffer:UP(t)||new Uint8Array(0),N:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function aL(t,e){let n,r=0,i=0,s=0;const a=t.h;let o=t.g;do n=a[o++],r|=(127&n)<<s,s+=7;while(s<32&&128&n);for(s>32&&(i|=(127&n)>>4),s=3;s<32&&128&n;s+=7)n=a[o++],i|=(127&n)<<s;if(gh(t,o),n<128)return e(r>>>0,i>>>0);throw iL()}function oL(t){let e=0,n=t.g;const r=n+10,i=t.h;for(;n<r;){const s=i[n++];if(e|=s,(128&s)==0)return gh(t,n),!!(127&e)}throw iL()}function Wd(t){const e=t.h;let n=t.g,r=e[n++],i=127&r;if(128&r&&(r=e[n++],i|=(127&r)<<7,128&r&&(r=e[n++],i|=(127&r)<<14,128&r&&(r=e[n++],i|=(127&r)<<21,128&r&&(r=e[n++],i|=r<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw iL();return gh(t,n),i}function pu(t){return Wd(t)>>>0}function JR(t){var e=t.h;const n=t.g,r=e[n],i=e[n+1],s=e[n+2];return e=e[n+3],gh(t,t.g+4),(r<<0|i<<8|s<<16|e<<24)>>>0}function QR(t){var e=JR(t);t=2*(e>>31)+1;const n=e>>>23&255;return e&=8388607,n==255?e?NaN:t*(1/0):n==0?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(e+8388608)}function m$e(t){return Wd(t)}function AS(t,e,{ba:n=!1}={}){t.ba=n,e&&(e=sL(e),t.h=e.buffer,t.m=e.N,t.j=0,t.l=t.h.length,t.g=t.j)}function gh(t,e){if(t.g=e,e>t.l)throw pae(t.l,e)}function gae(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.l)throw pae(e,t.l-n);return t.g=r,n}function vae(t,e){if(e==0)return Nh();var n=gae(t,e);return t.ba&&t.m?n=t.h.subarray(n,n+e):(t=t.h,n=n===(e=n+e)?new Uint8Array(0):t$e?t.slice(n,e):new Uint8Array(t.subarray(n,e))),n.length==0?Nh():new Xc(n,Em)}to.prototype.toJSON=void 0,to.prototype.Ia=Xse;var RB=[];function yae(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var n=pu(t.g);if(e=n>>>3,!((n&=7)>=0&&n<=5))throw mae(n,t.l);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=n,!0}function f6(t){switch(t.h){case 0:t.h!=0?f6(t):oL(t.g);break;case 1:gh(t=t.g,t.g+8);break;case 2:if(t.h!=2)f6(t);else{var e=pu(t.g);gh(t=t.g,t.g+e)}break;case 5:gh(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!yae(t))throw Error("Unmatched start-group tag: stream EOF");if(t.h==4){if(t.m!=e)throw Error("Unmatched end-group tag");break}f6(t)}break;default:throw mae(t.h,t.l)}}function T4(t,e,n){const r=t.g.l,i=pu(t.g),s=t.g.g+i;let a=s-r;if(a<=0&&(t.g.l=s,n(e,t,void 0,void 0,void 0),a=s-t.g.g),a)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-a} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=s,t.g.l=r,e}function lL(t){var e=pu(t.g),n=gae(t=t.g,e);if(t=t.h,DHe){var r,i=t;(r=TS)||(r=TS=new TextDecoder("utf-8",{fatal:!0})),e=n+e,i=n===0&&e===i.length?i:i.subarray(n,e);try{var s=r.decode(i)}catch(o){if(Yv===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),Yv=!0}catch{Yv=!1}}throw!Yv&&(TS=void 0),o}}else{e=(s=n)+e,n=[];let o,l=null;for(;s<e;){var a=t[s++];a<128?n.push(a):a<224?s>=e?H1():(o=t[s++],a<194||(192&o)!=128?(s--,H1()):n.push((31&a)<<6|63&o)):a<240?s>=e-1?H1():(o=t[s++],(192&o)!=128||a===224&&o<160||a===237&&o>=160||(192&(r=t[s++]))!=128?(s--,H1()):n.push((15&a)<<12|(63&o)<<6|63&r)):a<=244?s>=e-2?H1():(o=t[s++],(192&o)!=128||o-144+(a<<28)>>30!=0||(192&(r=t[s++]))!=128||(192&(i=t[s++]))!=128?(s--,H1()):(a=(7&a)<<18|(63&o)<<12|(63&r)<<6|63&i,a-=65536,n.push(55296+(a>>10&1023),56320+(1023&a)))):H1(),n.length>=8192&&(l=cB(l,n),n.length=0)}s=cB(l,n)}return s}function _ae(t){const e=pu(t.g);return vae(t.g,e)}function qy(t,e,n){var r=pu(t.g);for(r=t.g.g+r;t.g.g<r;)n.push(e(t.g))}var Jv=[];function p$e(t){return t}let G2;function Jo(t,e,n){e.g?e.m(t,e.g,e.h,n):e.m(t,e.h,n)}var qe=class{constructor(t,e){this.u=lae(t,e)}toJSON(){const t=!G2;try{return t&&(G2=oae),Cae(this)}finally{t&&(G2=void 0)}}l(){var t=J$e;return t.g?t.l(this,t.g,t.h,!0):t.l(this,t.h,t.defaultValue,!0)}clone(){const t=this.u;return new this.constructor($y(t,0|t[Je],!1))}N(){return!!(2&(0|this.u[Je]))}};function Cae(t){var e=t.u;{e=(t=G2(e))!==e;let c=t.length;if(c){var n=t[c-1],r=HP(n);r?c--:n=void 0;var i=t;if(r){e:{var s,a=n,o=!1;if(a)for(let d in a)isNaN(+d)?(s??(s={}))[d]=a[d]:(r=a[d],Array.isArray(r)&&(G5(r)||gB(r)&&r.size===0)&&(r=null),r==null&&(o=!0),r!=null&&((s??(s={}))[d]=r));if(o||(s=a),s)for(let d in s){o=s;break e}o=null}a=o==null?n!=null:o!==n}for(;c>0&&((s=i[c-1])==null||G5(s)||gB(s)&&s.size===0);c--)var l=!0;(i!==t||a||l)&&(e?(l||a||o)&&(i.length=c):i=Array.prototype.slice.call(i,0,c),o&&i.push(o)),l=i}else l=t}return l}function IB(t){return t?/^\d+$/.test(t)?(Fy(t),new XR(vn,or)):null:g$e||(g$e=new XR(0,0))}qe.prototype.W=k4,qe.prototype.toString=function(){try{return G2=p$e,Cae(this).toString()}finally{G2=void 0}};var XR=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let g$e;function xB(t){return t?/^-?\d+$/.test(t)?(Fy(t),new eI(vn,or)):null:v$e||(v$e=new eI(0,0))}var eI=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let v$e;function K2(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function mp(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function Gy(t,e){if(e>=0)mp(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function Ag(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function Rm(t,e){e.length!==0&&(t.l.push(e),t.h+=e.length)}function ma(t,e,n){mp(t.g,8*e+n)}function cL(t,e){return ma(t,e,2),e=t.g.end(),Rm(t,e),e.push(t.h),e}function uL(t,e){var n=e.pop();for(n=t.h+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.h++;e.push(n),t.h++}function Ky(t,e,n){ma(t,e,2),mp(t.g,n.length),Rm(t,t.g.end()),Rm(t,n)}function Y5(t,e,n,r){n!=null&&(e=cL(t,e),r(n,t),uL(t,e))}function Qo(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var dL=Qo(),bae=Qo(),hL=Qo(),fL=Qo(),Eae=Qo(),Sae=Qo(),mL=Qo(),wae=Qo(),kae=Qo(),pp=class{constructor(e,n,r){this.g=e,this.h=n,e=dL,this.l=!!e&&r===e||!1}};function Zy(t,e){return new pp(t,e,dL)}function Tae(t,e,n,r,i){Y5(t,n,Mae(e,r),i)}const y$e=Zy(function(t,e,n,r,i){return t.h===2&&(T4(t,rL(e,r,n),i),!0)},Tae),_$e=Zy(function(t,e,n,r,i){return t.h===2&&(T4(t,rL(e,r,n,!0),i),!0)},Tae);var zy=Symbol(),pL=Symbol(),MB=Symbol(),PB=Symbol();let Rae,Iae;function Qh(t,e,n,r){var i=r[t];if(i)return i;(i={}).Pa=r,i.V=function(f){switch(typeof f){case"boolean":return sae||(sae=[0,void 0,!0]);case"number":return f>0?void 0:f===0?h$e||(h$e=[0,void 0]):[-f,void 0];case"string":return[0,f];case"object":return f}}(r[0]);var s=r[1];let a=1;s&&s.constructor===Object&&(i.ga=s,typeof(s=r[++a])=="function"&&(i.la=!0,Rae??(Rae=s),Iae??(Iae=r[a+1]),s=r[a+=2]));const o={};for(;s&&Array.isArray(s)&&s.length&&typeof s[0]=="number"&&s[0]>0;){for(var l=0;l<s.length;l++)o[s[l]]=s;s=r[++a]}for(l=1;s!==void 0;){let f;typeof s=="number"&&(l+=s,s=r[++a]);var c=void 0;if(s instanceof pp?f=s:(f=y$e,a--),f==null?void 0:f.l){s=r[++a],c=r;var d=a;typeof s=="function"&&(s=s(),c[d]=s),c=s}for(d=l+1,typeof(s=r[++a])=="number"&&s<0&&(d-=s,s=r[++a]);l<d;l++){const p=o[l];c?n(i,l,f,c,p):e(i,l,f,p)}}return r[t]=i}function xae(t){return Array.isArray(t)?t[0]instanceof pp?t:[_$e,t]:[t,void 0]}function Mae(t,e){return t instanceof qe?t.u:Array.isArray(t)?Ld(t,e,!1):void 0}function gL(t,e,n,r){const i=n.g;t[e]=r?(s,a,o)=>i(s,a,o,r):i}function vL(t,e,n,r,i){const s=n.g;let a,o;t[e]=(l,c,d)=>s(l,c,d,o||(o=Qh(pL,gL,vL,r).V),a||(a=yL(r)),i)}function yL(t){let e=t[MB];if(e!=null)return e;const n=Qh(pL,gL,vL,t);return e=n.la?(r,i)=>Rae(r,i,n):(r,i)=>{const s=0|r[Je];for(;yae(i)&&i.h!=4;){var a=i.m,o=n[a];if(o==null){var l=n.ga;l&&(l=l[a])&&(l=C$e(l))!=null&&(o=n[a]=l)}o!=null&&o(i,r,a)||(a=(o=i).l,f6(o),o.fa?o=void 0:(l=o.g.g-a,o.g.g=a,o=vae(o.g,l)),a=r,o&&((l=a[Sm])?l.push(o):a[Sm]=[o]))}return 16384&s&&up(r),!0},t[MB]=e}function C$e(t){const e=(t=xae(t))[0].g;if(t=t[1]){const n=yL(t),r=Qh(pL,gL,vL,t).V;return(i,s,a)=>e(i,s,a,r,n)}return e}function Wy(t,e,n){t[e]=n.h}function Yy(t,e,n,r){let i,s;const a=n.h;t[e]=(o,l,c)=>a(o,l,c,s||(s=Qh(zy,Wy,Yy,r).V),i||(i=Pae(r)))}function Pae(t){let e=t[PB];if(!e){const n=Qh(zy,Wy,Yy,t);e=(r,i)=>Lae(r,i,n),t[PB]=e}return e}function Lae(t,e,n){for(var r=0|t[Je],i=512&r?0:-1,s=t.length,a=512&r?1:0,o=s+(256&r?-1:0);a<o;a++){const l=t[a];if(l==null)continue;const c=a-i,d=LB(n,c);d&&d(e,l,c)}if(256&r){r=t[s-1];for(const l in r)i=+l,Number.isNaN(i)||(s=r[i])!=null&&(o=LB(n,i))&&o(e,s,i)}if(t=VP(t))for(Rm(e,e.g.end()),n=0;n<t.length;n++)Rm(e,UP(t[n])||new Uint8Array(0))}function LB(t,e){var n=t[e];if(n)return n;if((n=t.ga)&&(n=n[e])){var r=(n=xae(n))[0].h;if(n=n[1]){const i=Pae(n),s=Qh(zy,Wy,Yy,n).V;n=t.la?Iae(s,i):(a,o,l)=>r(a,o,l,s,i)}else n=r;return t[e]=n}}function gp(t,e){if(Array.isArray(e)){var n=0|e[Je];if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const s=t(e[r]);s!=null&&(e[i++]=s)}return i<r&&(e.length=i),Mr(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}function cs(t,e,n){return new pp(t,e,n)}function vp(t,e,n){return new pp(t,e,n)}function us(t,e,n){tr(t,0|t[Je],e,n)}var b$e=Zy(function(t,e,n,r,i){return t.h===2&&(t=T4(t,Ld([void 0,void 0],r,!0),i),d1(r=0|e[Je]),(i=_u(e,r,n))instanceof to?(2&i.L)!=0?((i=i.X()).push(t),tr(e,r,n,i)):i.Na(t):Array.isArray(i)?(2&(0|i[Je])&&tr(e,r,n,i=uae(i)),i.push(t)):tr(e,r,n,[t]),!0)},function(t,e,n,r,i){if(e instanceof to)e.forEach((s,a)=>{Y5(t,n,Ld([a,s],r,!1),i)});else if(Array.isArray(e))for(let s=0;s<e.length;s++){const a=e[s];Array.isArray(a)&&Y5(t,n,Ld(a,r,!1),i)}});function Oae(t,e,n){if(e=function(r){if(r==null)return r;const i=typeof r;if(i==="bigint")return String(ZP(64,r));if(Hy(r)){if(i==="string")return WP(r);if(i==="number")return zP(r)}}(e),e!=null&&(typeof e=="string"&&xB(e),e!=null))switch(ma(t,n,0),typeof e){case"number":t=t.g,wm(e),K2(t,vn,or);break;case"bigint":n=BigInt.asUintN(64,e),n=new eI(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),K2(t.g,n.h,n.g);break;default:n=xB(e),K2(t.g,n.h,n.g)}}function Aae(t,e,n){(e=dp(e))!=null&&e!=null&&(ma(t,n,0),Gy(t.g,e))}function Nae(t,e,n){(e=nae(e))!=null&&(ma(t,n,0),t.g.g.push(e?1:0))}function Dae(t,e,n){(e=km(e))!=null&&Ky(t,n,Bse(e))}function Uae(t,e,n,r,i){Y5(t,n,Mae(e,r),i)}function Fae(t,e,n){(e=e==null||typeof e=="string"||S4(e)||e instanceof Xc?e:void 0)!=null&&Ky(t,n,sL(e).buffer)}function jae(t,e,n){return(t.h===5||t.h===2)&&(e=fp(e,0|e[Je],n,!1,!1),t.h==2?qy(t,QR,e):e.push(QR(t.g)),!0)}var xc=cs(function(t,e,n){if(t.h!==1)return!1;var r=t.g;t=JR(r);const i=JR(r);r=2*(i>>31)+1;const s=i>>>20&2047;return t=4294967296*(1048575&i)+t,us(e,n,s==2047?t?NaN:r*(1/0):s==0?5e-324*r*t:r*Math.pow(2,s-1075)*(t+4503599627370496)),!0},function(t,e,n){(e=h1(e))!=null&&(ma(t,n,1),t=t.g,(n=tae||(tae=new DataView(new ArrayBuffer(8)))).setFloat64(0,+e,!0),vn=n.getUint32(0,!0),or=n.getUint32(4,!0),Ag(t,vn),Ag(t,or))},Qo()),Pr=cs(function(t,e,n){return t.h===5&&(us(e,n,QR(t.g)),!0)},function(t,e,n){(e=h1(e))!=null&&(ma(t,n,5),t=t.g,BP(e),Ag(t,vn))},mL),E$e=vp(jae,function(t,e,n){if((e=gp(h1,e))!=null)for(let a=0;a<e.length;a++){var r=t,i=n,s=e[a];s!=null&&(ma(r,i,5),r=r.g,BP(s),Ag(r,vn))}},mL),_L=vp(jae,function(t,e,n){if((e=gp(h1,e))!=null&&e.length){ma(t,n,2),mp(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,BP(e[r]),Ag(n,vn)}},mL),Yd=cs(function(t,e,n){return t.h===0&&(us(e,n,aL(t.g,GP)),!0)},Oae,Sae),NS=cs(function(t,e,n){return t.h===0&&(us(e,n,(t=aL(t.g,GP))===0?void 0:t),!0)},Oae,Sae),S$e=cs(function(t,e,n){return t.h===0&&(us(e,n,aL(t.g,qP)),!0)},function(t,e,n){if((e=i$e(e))!=null&&(typeof e=="string"&&IB(e),e!=null))switch(ma(t,n,0),typeof e){case"number":t=t.g,wm(e),K2(t,vn,or);break;case"bigint":n=BigInt.asUintN(64,e),n=new XR(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),K2(t.g,n.h,n.g);break;default:n=IB(e),K2(t.g,n.h,n.g)}},Qo()),ur=cs(function(t,e,n){return t.h===0&&(us(e,n,Wd(t.g)),!0)},Aae,fL),Jy=vp(function(t,e,n){return(t.h===0||t.h===2)&&(e=fp(e,0|e[Je],n,!1,!1),t.h==2?qy(t,Wd,e):e.push(Wd(t.g)),!0)},function(t,e,n){if((e=gp(dp,e))!=null&&e.length){n=cL(t,n);for(let r=0;r<e.length;r++)Gy(t.g,e[r]);uL(t,n)}},fL),g2=cs(function(t,e,n){return t.h===0&&(us(e,n,(t=Wd(t.g))===0?void 0:t),!0)},Aae,fL),Gn=cs(function(t,e,n){return t.h===0&&(us(e,n,oL(t.g)),!0)},Nae,bae),Z2=cs(function(t,e,n){return t.h===0&&(us(e,n,(t=oL(t.g))===!1?void 0:t),!0)},Nae,bae),Fi=vp(function(t,e,n){return t.h===2&&(t=lL(t),fp(e,0|e[Je],n,!1).push(t),!0)},function(t,e,n){if((e=gp(km,e))!=null)for(let a=0;a<e.length;a++){var r=t,i=n,s=e[a];s!=null&&Ky(r,i,Bse(s))}},hL),hd=cs(function(t,e,n){return t.h===2&&(us(e,n,(t=lL(t))===""?void 0:t),!0)},Dae,hL),sn=cs(function(t,e,n){return t.h===2&&(us(e,n,lL(t)),!0)},Dae,hL),Vr=function(t,e,n=dL){return new pp(t,e,n)}(function(t,e,n,r,i){return t.h===2&&(r=Ld(void 0,r,!0),fp(e,0|e[Je],n,!0).push(r),T4(t,r,i),!0)},function(t,e,n,r,i){if(Array.isArray(e))for(let s=0;s<e.length;s++)Uae(t,e[s],n,r,i)}),ln=Zy(function(t,e,n,r,i,s){return t.h===2&&(dae(e,0|e[Je],s,n),T4(t,e=rL(e,r,n),i),!0)},Uae),Hae=cs(function(t,e,n){return t.h===2&&(us(e,n,_ae(t)),!0)},Fae,wae),w$e=vp(function(t,e,n){return(t.h===0||t.h===2)&&(e=fp(e,0|e[Je],n,!1,!1),t.h==2?qy(t,pu,e):e.push(pu(t.g)),!0)},function(t,e,n){if((e=gp(rae,e))!=null)for(let a=0;a<e.length;a++){var r=t,i=n,s=e[a];s!=null&&(ma(r,i,0),mp(r.g,s))}},Eae),k$e=cs(function(t,e,n){return t.h===0&&(us(e,n,(t=pu(t.g))===0?void 0:t),!0)},function(t,e,n){(e=rae(e))!=null&&e!=null&&(ma(t,n,0),mp(t.g,e))},Eae),ro=cs(function(t,e,n){return t.h===0&&(us(e,n,Wd(t.g)),!0)},function(t,e,n){(e=dp(e))!=null&&(e=parseInt(e,10),ma(t,n,0),Gy(t.g,e))},kae);class T$e{constructor(e,n){this.h=e,this.g=n,this.l=Vt,this.m=nt,this.defaultValue=void 0}}function Xo(t,e){return new T$e(t,e)}function f1(t,e){return(n,r)=>{if(Jv.length){const s=Jv.pop();s.o(r),AS(s.g,n,r),n=s}else n=new class{constructor(s,a){if(RB.length){const o=RB.pop();AS(o,s,a),s=o}else s=new class{constructor(o,l){this.h=null,this.m=!1,this.g=this.l=this.j=0,AS(this,o,l)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(s,a);this.g=s,this.l=this.g.g,this.h=this.m=-1,this.o(a)}o({fa:s=!1}={}){this.fa=s}}(n,r);try{const s=new t,a=s.u;yL(e)(a,n);var i=s}finally{n.g.clear(),n.m=-1,n.h=-1,Jv.length<100&&Jv.push(n)}return i}}function Qy(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const a=this.g;return this.g=[],a}}}};Lae(this.u,e,Qh(zy,Wy,Yy,t)),Rm(e,e.g.end());const n=new Uint8Array(e.h),r=e.l,i=r.length;let s=0;for(let a=0;a<i;a++){const o=r[a];n.set(o,s),s+=o.length}return e.l=[n],n}}var OB=class extends qe{constructor(t){super(t)}},AB=[0,hd,cs(function(t,e,n){return t.h===2&&(us(e,n,(t=_ae(t))===Nh()?void 0:t),!0)},function(t,e,n){if(e!=null){if(e instanceof qe){const r=e.Ra;return void(r&&(e=r(e),e!=null&&Ky(t,n,sL(e).buffer)))}if(Array.isArray(e))return}Fae(t,e,n)},wae)];let DS,NB=globalThis.trustedTypes;function DB(t){DS===void 0&&(DS=function(){let n=null;if(!NB)return n;try{const r=i=>i;n=NB.createPolicy("goog#html",{createHTML:r,createScript:r,createScriptURL:r})}catch{}return n}());var e=DS;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(e?e.createScriptURL(t):t)}function R$e(t,...e){if(e.length===0)return DB(t[0]);let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return DB(n)}var $ae=[0,ur,ro,Gn,-1,Jy,ro,-1],I$e=class extends qe{constructor(t){super(t)}},Vae=[0,Gn,sn,Gn,ro,-1,vp(function(t,e,n){return(t.h===0||t.h===2)&&(e=fp(e,0|e[Je],n,!1,!1),t.h==2?qy(t,m$e,e):e.push(Wd(t.g)),!0)},function(t,e,n){if((e=gp(dp,e))!=null&&e.length){n=cL(t,n);for(let r=0;r<e.length;r++)Gy(t.g,e[r]);uL(t,n)}},kae),sn,-1,[0,Gn,-1],ro,Gn,-1],Bae=[0,sn,-2],UB=class extends qe{constructor(e){super(e)}},qae=[0],Gae=[0,ur,Gn,1,Gn,-3],ha=class extends qe{constructor(e){super(e,2)}},Lr={};Lr[336783863]=[0,sn,Gn,-1,ur,[0,[1,2,3,4,5,6,7,8],ln,qae,ln,Vae,ln,Bae,ln,Gae,ln,$ae,ln,[0,sn,-2],ln,[0,sn,ro],ln,[0,ro,sn]],[0,sn],Gn,[0,[1,3],[2,4],ln,[0,Jy],-1,ln,[0,Fi],-1,Vr,[0,sn,-1]],sn];var FB=[0,NS,-1,Z2,-3,NS,Jy,hd,g2,NS,-1,Z2,g2,Z2,-2,hd];function pa(t,e){YR(t,2,hp(e),"")}function Rn(t,e){By(t,3,e)}function Nt(t,e){By(t,4,e)}var as=class extends qe{constructor(t){super(t,500)}o(t){return nt(this,0,7,t)}},D0=[-1,{}],jB=[0,sn,1,D0],HB=[0,sn,Fi,D0];function ga(t,e){z5(t,1,as,e)}function Nn(t,e){By(t,10,e)}function zt(t,e){By(t,15,e)}var Vs=class extends qe{constructor(t){super(t,500)}o(t){return nt(this,0,1001,t)}},Kae=[-500,Vr,[-500,hd,-1,Fi,-3,[-2,Lr,Gn],Vr,AB,g2,-1,jB,HB,Vr,[0,hd,Z2],hd,FB,g2,Fi,987,Fi],4,Vr,[-500,sn,-1,[-1,{}],998,sn],Vr,[-500,sn,Fi,-1,[-2,{},Gn],997,Fi,-1],g2,Vr,[-500,sn,Fi,D0,998,Fi],Fi,g2,jB,HB,Vr,[0,hd,-1,D0],Fi,-2,FB,hd,-1,Z2,[0,Z2,k$e],978,D0,Vr,AB];Vs.prototype.g=Qy(Kae);var x$e=f1(Vs,Kae),M$e=class extends qe{constructor(t){super(t)}},Zae=class extends qe{constructor(e){super(e)}g(){return mu(this,M$e,1)}},zae=[0,Vr,[0,ur,Pr,sn,-1]],Xy=f1(Zae,zae),P$e=class extends qe{constructor(t){super(t)}},L$e=class extends qe{constructor(e){super(e)}},US=class extends qe{constructor(t){super(t)}h(){return Vt(this,P$e,2)}g(){return mu(this,L$e,5)}},Wae=f1(class extends qe{constructor(t){super(t)}},[0,Fi,Jy,_L,[0,ro,[0,ur,-3],[0,Pr,-3],[0,ur,-1,[0,Vr,[0,ur,-2]]],Vr,[0,Pr,-1,sn,Pr]],sn,-1,Yd,Vr,[0,ur,Pr],Fi,Yd]),Yae=class extends qe{constructor(t){super(t)}},z2=f1(class extends qe{constructor(t){super(t)}},[0,Vr,[0,Pr,-4]]),Jae=class extends qe{constructor(t){super(t)}},R4=f1(class extends qe{constructor(t){super(t)}},[0,Vr,[0,Pr,-4]]),O$e=class extends qe{constructor(t){super(t)}},A$e=[0,ur,-1,_L,ro],Qae=class extends qe{constructor(t){super(t)}};Qae.prototype.g=Qy([0,Pr,-4,Yd]);var N$e=class extends qe{constructor(t){super(t)}},D$e=f1(class extends qe{constructor(t){super(t)}},[0,Vr,[0,1,ur,sn,zae],Yd]),$B=class extends qe{constructor(e){super(e)}},U$e=class extends qe{constructor(t){super(t)}oa(){const t=cae(this);return t??Nh()}},F$e=class extends qe{constructor(t){super(t)}},Xae=[1,2],j$e=f1(class extends qe{constructor(t){super(t)}},[0,Vr,[0,Xae,ln,[0,_L],ln,[0,Hae],ur,sn],Yd]),CL=class extends qe{constructor(t){super(t)}},eoe=[0,sn,ur,Pr,Fi,-1],VB=class extends qe{constructor(t){super(t)}},H$e=[0,Gn,-1],BB=class extends qe{constructor(e){super(e)}},m6=[1,2,3,4,5],J5=class extends qe{constructor(t){super(t)}g(){return cae(this)!=null}h(){return no(this,2)!=null}},Zn=class extends qe{constructor(t){super(t)}g(){return nae(Tm(this,2))??!1}},toe=[0,Hae,sn,[0,ur,Yd,-1],[0,S$e,Yd]],Cr=[0,toe,Gn,[0,m6,ln,Gae,ln,Vae,ln,$ae,ln,qae,ln,Bae],ro],e_=class extends qe{constructor(e){super(e)}},bL=[0,Cr,Pr,-1,ur],$$e=Xo(502141897,e_);Lr[502141897]=bL;var V$e=f1(class extends qe{constructor(t){super(t)}},[0,[0,ro,-1,E$e,w$e],A$e]),noe=class extends qe{constructor(t){super(t)}},roe=class extends qe{constructor(t){super(t)}},EL=[0,Cr,Pr,[0,Cr],Gn],ioe=[0,Cr,bL,EL,Pr,[0,[0,toe]]],B$e=Xo(508968150,roe);Lr[508968150]=ioe,Lr[508968149]=EL;var soe=class extends qe{constructor(t){super(t)}},q$e=Xo(513916220,soe);Lr[513916220]=[0,Cr,ioe,ur];var Vf=class extends qe{constructor(t){super(t)}h(){return Vt(this,CL,2)}g(){Tn(this,2)}},aoe=[0,Cr,eoe];Lr[478825465]=aoe;var G$e=class extends qe{constructor(t){super(t)}},ooe=class extends qe{constructor(t){super(t)}},SL=class extends qe{constructor(t){super(t)}},wL=class extends qe{constructor(t){super(t)}},loe=class extends qe{constructor(t){super(t)}},qB=[0,Cr,[0,Cr],aoe,-1],coe=[0,Cr,Pr,ur],kL=[0,Cr,Pr],uoe=[0,Cr,coe,kL,Pr],K$e=Xo(479097054,loe);Lr[479097054]=[0,Cr,uoe,qB],Lr[463370452]=qB,Lr[464864288]=coe;var Z$e=Xo(462713202,wL);Lr[462713202]=uoe,Lr[474472470]=kL;var z$e=class extends qe{constructor(t){super(t)}},doe=class extends qe{constructor(t){super(t)}},hoe=class extends qe{constructor(t){super(t)}},foe=class extends qe{constructor(t){super(t)}},TL=[0,Cr,Pr,-1,ur],tI=[0,Cr,Pr,Gn];foe.prototype.g=Qy([0,Cr,kL,[0,Cr],bL,EL,TL,tI]);var moe=class extends qe{constructor(t){super(t)}},W$e=Xo(456383383,moe);Lr[456383383]=[0,Cr,eoe];var poe=class extends qe{constructor(t){super(t)}},Y$e=Xo(476348187,poe);Lr[476348187]=[0,Cr,H$e];var goe=class extends qe{constructor(t){super(t)}},GB=class extends qe{constructor(t){super(t)}},voe=[0,ro,-1],J$e=Xo(458105876,class extends qe{constructor(t){super(t)}g(){var t=this.u;const e=0|t[Je],n=2&e;return t=function(r,i,s){var a=GB;const o=2&i;let l=!1;if(s==null){if(o)return TB();s=[]}else if(s.constructor===to){if((2&s.L)==0||o)return s;s=s.X()}else Array.isArray(s)?l=!!(2&(0|s[Je])):s=[];if(o){if(!s.length)return TB();l||(l=!0,up(s))}else l&&(l=!1,s=uae(s));return l||(64&(0|s[Je])?s[Je]&=-33:32&i&&Ny(s,32)),tr(r,i,2,a=new to(s,a,s$e,void 0)),a}(t,e,_u(t,e,2)),!n&&GB&&(t.ra=!0),t}});Lr[458105876]=[0,voe,b$e,[!0,Yd,[0,sn,-1,Fi]]];var RL=class extends qe{constructor(t){super(t)}},yoe=Xo(458105758,RL);Lr[458105758]=[0,Cr,sn,voe];var _oe=class extends qe{constructor(t){super(t)}},Q$e=Xo(443442058,_oe);Lr[443442058]=[0,Cr,sn,ur,Pr,Fi,-1,Gn,Pr],Lr[514774813]=TL;var Coe=class extends qe{constructor(t){super(t)}},X$e=Xo(516587230,Coe);function nI(t,e){return e=e?e.clone():new CL,t.displayNamesLocale!==void 0?Tn(e,1,hp(t.displayNamesLocale)):t.displayNamesLocale===void 0&&Tn(e,1),t.maxResults!==void 0?Vl(e,2,t.maxResults):"maxResults"in t&&Tn(e,2),t.scoreThreshold!==void 0?Ze(e,3,t.scoreThreshold):"scoreThreshold"in t&&Tn(e,3),t.categoryAllowlist!==void 0?W5(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&Tn(e,4),t.categoryDenylist!==void 0?W5(e,5,t.categoryDenylist):"categoryDenylist"in t&&Tn(e,5),e}function IL(t,e=-1,n=""){return{categories:t.map(r=>({index:Va(r,1)??0??-1,score:pr(r,2)??0,categoryName:no(r,3)??""??"",displayName:no(r,4)??""??""})),headIndex:e,headName:n}}function boe(t){var a,o;var e=sh(t,3,h1,ih()),n=sh(t,2,dp,ih()),r=sh(t,1,km,ih()),i=sh(t,9,km,ih());const s={categories:[],keypoints:[]};for(let l=0;l<e.length;l++)s.categories.push({score:e[l],index:n[l]??-1,categoryName:r[l]??"",displayName:i[l]??""});if((e=(a=Vt(t,US,4))==null?void 0:a.h())&&(s.boundingBox={originX:Va(e,1)??0,originY:Va(e,2)??0,width:Va(e,3)??0,height:Va(e,4)??0,angle:0}),(o=Vt(t,US,4))==null?void 0:o.g().length)for(const l of Vt(t,US,4).g())s.keypoints.push({x:h6(l,1)??0,y:h6(l,2)??0,score:h6(l,4)??0,label:no(l,3)??""});return s}function t_(t){const e=[];for(const n of mu(t,Jae,1))e.push({x:pr(n,1)??0,y:pr(n,2)??0,z:pr(n,3)??0,visibility:pr(n,4)??0});return e}function U0(t){const e=[];for(const n of mu(t,Yae,1))e.push({x:pr(n,1)??0,y:pr(n,2)??0,z:pr(n,3)??0,visibility:pr(n,4)??0});return e}function KB(t){return Array.from(t,e=>e>127?e-256:e)}function ZB(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let s=0;s<t.length;s++)n+=t[s]*e[s],r+=t[s]*t[s],i+=e[s]*e[s];if(r<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let Qv;Lr[516587230]=[0,Cr,TL,tI,Pr],Lr[518928384]=tI;const eVe=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Eoe(){if(Qv===void 0)try{await WebAssembly.instantiate(eVe),Qv=!0}catch{Qv=!1}return Qv}async function N3(t,e=R$e``){const n=await Eoe()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var W1=class{};function Soe(){var t=navigator;return typeof OffscreenCanvas<"u"&&(!function(e=navigator){return(e=e.userAgent).includes("Safari")&&!e.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function zB(t){if(typeof importScripts!="function"){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise((n,r)=>{e.addEventListener("load",()=>{n()},!1),e.addEventListener("error",i=>{r(i)},!1),document.body.appendChild(e)})}importScripts(t.toString())}function woe(t){return t.videoWidth!==void 0?[t.videoWidth,t.videoHeight]:t.naturalWidth!==void 0?[t.naturalWidth,t.naturalHeight]:t.displayWidth!==void 0?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function Ye(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function WB(t,e,n){if(!t.i.canvas)throw Error("No OpenGL canvas configured.");if(n?t.i._bindTextureToStream(n):t.i._bindTextureToCanvas(),!(n=t.i.canvas.getContext("webgl2")||t.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,i]=woe(e);return!t.l||r===t.i.canvas.width&&i===t.i.canvas.height||(t.i.canvas.width=r,t.i.canvas.height=i),[r,i]}function YB(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(e.length);for(let i=0;i<e.length;i++)r[i]=t.i.stringToNewUTF8(e[i]);e=t.i._malloc(4*r.length),t.i.HEAPU32.set(r,e>>2),n(e);for(const i of r)t.i._free(i);t.i._free(e)}function hl(t,e,n){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=n}function Wu(t,e,n){let r=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(i,s,a)=>{s?(n(r,a),r=[]):r.push(i)}}W1.forVisionTasks=function(t){return N3("vision",t)},W1.forTextTasks=function(t){return N3("text",t)},W1.forGenAiExperimentalTasks=function(t){return N3("genai_experimental",t)},W1.forGenAiTasks=function(t){return N3("genai",t)},W1.forAudioTasks=function(t){return N3("audio",t)},W1.isSimdSupported=function(){return Eoe()};async function tVe(t,e,n,r){return t=await(async(i,s,a,o,l)=>{if(s&&await zB(s),!self.ModuleFactory||a&&(await zB(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&l&&((s=self.Module).locateFile=l.locateFile,l.mainScriptUrlOrBlob&&(s.mainScriptUrlOrBlob=l.mainScriptUrlOrBlob)),l=await self.ModuleFactory(self.Module||l),self.ModuleFactory=self.Module=void 0,new i(l,o)})(t,n.wasmLoaderPath,n.assetLoaderPath,e,{locateFile:i=>i.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&i.endsWith(".data")?n.assetBinaryPath.toString():i}),await t.o(r),t}function FS(t,e){const n=Vt(t.baseOptions,J5,1)||new J5;typeof e=="string"?(Tn(n,2,hp(e)),Tn(n,1)):e instanceof Uint8Array&&(Tn(n,1,$P(e,!1)),Tn(n,2)),nt(t.baseOptions,0,1,n)}function JB(t){try{const e=t.G.length;if(e===1)throw Error(t.G[0].message);if(e>1)throw Error("Encountered multiple errors: "+t.G.map(n=>n.message).join(", "))}finally{t.G=[]}}function He(t,e){t.B=Math.max(t.B,e)}function n_(t,e){t.A=new as,pa(t.A,"PassThroughCalculator"),Rn(t.A,"free_memory"),Nt(t.A,"free_memory_unused_out"),Nn(e,"free_memory"),ga(e,t.A)}function Im(t,e){Rn(t.A,e),Nt(t.A,e+"_unused_out")}function r_(t){t.g.addBoolToStream(!0,"free_memory",t.B)}var p6=class{constructor(t){this.g=t,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){var n,r,i,s,a,o;if(e){const l=t.baseOptions||{};if((n=t.baseOptions)!=null&&n.modelAssetBuffer&&((r=t.baseOptions)!=null&&r.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((i=Vt(this.baseOptions,J5,1))!=null&&i.g()||(s=Vt(this.baseOptions,J5,1))!=null&&s.h()||(a=t.baseOptions)!=null&&a.modelAssetBuffer||(o=t.baseOptions)!=null&&o.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(c,d){let f=Vt(c.baseOptions,BB,3);if(!f){var p=f=new BB,g=new UB;N0(p,4,m6,g)}"delegate"in d&&(d.delegate==="GPU"?(d=f,p=new I$e,N0(d,2,m6,p)):(d=f,p=new UB,N0(d,4,m6,p))),nt(c.baseOptions,0,3,f)}(this,l),l.modelAssetPath)return fetch(l.modelAssetPath.toString()).then(c=>{if(c.ok)return c.arrayBuffer();throw Error(`Failed to fetch model: ${l.modelAssetPath} (${c.status})`)}).then(c=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(c),!0,!1,!1),FS(this,"/model.dat"),this.m(),this.I()});if(l.modelAssetBuffer instanceof Uint8Array)FS(this,l.modelAssetBuffer);else if(l.modelAssetBuffer)return async function(c){const d=[];for(var f=0;;){const{done:p,value:g}=await c.read();if(p)break;d.push(g),f+=g.length}if(d.length===0)return new Uint8Array(0);if(d.length===1)return d[0];c=new Uint8Array(f),f=0;for(const p of d)c.set(p,f),f+=p.length;return c}(l.modelAssetBuffer).then(c=>{FS(this,c),this.m(),this.I()})}return this.m(),this.I(),Promise.resolve()}I(){}da(){let t;if(this.g.da(e=>{t=x$e(e)}),!t)throw Error("Failed to retrieve CalculatorGraphConfig");return t}setGraph(t,e){this.g.attachErrorListener((n,r)=>{this.G.push(Error(r))}),this.g.La(),this.g.setGraph(t,e),this.A=void 0,JB(this)}finishProcessing(){this.g.finishProcessing(),JB(this)}close(){this.A=void 0,this.g.closeGraph()}};function tu(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}p6.prototype.close=p6.prototype.close,function(t,e){t=t.split(".");var n,r=Ah;for((t[0]in r)||r.execScript===void 0||r.execScript("var "+t[0]);t.length&&(n=t.shift());)t.length||e===void 0?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}("TaskRunner",p6);class nVe{constructor(e,n,r,i){this.g=e,this.h=n,this.m=r,this.l=i}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function QB(t,e,n){const r=t.g;if(n=tu(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(t.h,n),n}function XB(t,e){const n=t.g,r=tu(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);const i=tu(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(t.O),n.vertexAttribPointer(t.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const s=tu(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(t.I),n.vertexAttribPointer(t.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new nVe(n,r,i,s)}function xL(t,e){if(t.g){if(e!==t.g)throw Error("Cannot change GL context once initialized")}else t.g=e}function ML(t,e,n,r){return xL(t,e),t.h||(t.m(),t.C()),n?(t.s||(t.s=XB(t,!0)),n=t.s):(t.v||(t.v=XB(t,!1)),n=t.v),e.useProgram(t.h),n.bind(),t.l(),t=r(),n.g.bindVertexArray(null),t}function i_(t,e,n){return xL(t,e),t=tu(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function s_(t,e,n){xL(t,e),t.A||(t.A=tu(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,t.A),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function PL(t){var e;(e=t.g)==null||e.bindFramebuffer(t.g.FRAMEBUFFER,null)}var LL=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const t=this.g;if(this.h=tu(t.createProgram(),"Failed to create WebGL program"),this.aa=QB(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,t.VERTEX_SHADER),this.Z=QB(this,this.G(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.O=t.getAttribLocation(this.h,"aVertex"),this.I=t.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.aa),t.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function Fc(t,e){switch(e){case 0:return t.g.find(n=>n instanceof Uint8Array);case 1:return t.g.find(n=>n instanceof Float32Array);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function rI(t){var e=Fc(t,1);if(!e){if(e=Fc(t,0))e=new Float32Array(e).map(r=>r/255);else{e=new Float32Array(t.width*t.height);const r=xm(t);var n=OL(t);if(s_(n,r,koe(t)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(t.width*t.height*4),r.readPixels(0,0,t.width,t.height,r.RGBA,r.FLOAT,n);for(let i=0,s=0;i<e.length;++i,s+=4)e[i]=n[s]}else r.readPixels(0,0,t.width,t.height,r.RED,r.FLOAT,e)}t.g.push(e)}return e}function koe(t){let e=Fc(t,2);if(!e){const n=xm(t);e=Roe(t);const r=rI(t),i=Toe(t);n.texImage2D(n.TEXTURE_2D,0,i,t.width,t.height,0,n.RED,n.FLOAT,r),iI(t)}return e}function xm(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=tu(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function Toe(t){if(t=xm(t),!Xv)if(t.getExtension("EXT_color_buffer_float")&&t.getExtension("OES_texture_float_linear")&&t.getExtension("EXT_float_blend"))Xv=t.R32F;else{if(!t.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Xv=t.R16F}return Xv}function OL(t){return t.l||(t.l=new LL),t.l}function Roe(t){const e=xm(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Fc(t,2);return n||(n=i_(OL(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(n),t.j=!0),e.bindTexture(e.TEXTURE_2D,n),n}function iI(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var Xv,ei=class{constructor(t,e,n,r,i,s,a){this.g=t,this.m=e,this.j=n,this.canvas=r,this.l=i,this.width=s,this.height=a,this.j&&--eq===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!Fc(this,0)}ja(){return!!Fc(this,1)}P(){return!!Fc(this,2)}ia(){return(e=Fc(t=this,0))||(e=rI(t),e=new Uint8Array(e.map(n=>255*n)),t.g.push(e)),e;var t,e}ha(){return rI(this)}M(){return koe(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof Uint8Array)n=new Uint8Array(e);else if(e instanceof Float32Array)n=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const r=xm(this),i=OL(this);r.activeTexture(r.TEXTURE1),n=i_(i,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);const s=Toe(this);r.texImage2D(r.TEXTURE_2D,0,s,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),s_(i,r,n),ML(i,r,!1,()=>{Roe(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),iI(this)}),PL(i),iI(this)}}t.push(n)}return new ei(t,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&xm(this).deleteTexture(Fc(this,2)),eq=-1}};ei.prototype.close=ei.prototype.close,ei.prototype.clone=ei.prototype.clone,ei.prototype.getAsWebGLTexture=ei.prototype.M,ei.prototype.getAsFloat32Array=ei.prototype.ha,ei.prototype.getAsUint8Array=ei.prototype.ia,ei.prototype.hasWebGLTexture=ei.prototype.P,ei.prototype.hasFloat32Array=ei.prototype.ja,ei.prototype.hasUint8Array=ei.prototype.Fa;var eq=250;function Ml(t,e){switch(e){case 0:return t.g.find(n=>n instanceof ImageData);case 1:return t.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function Ioe(t){var e=Ml(t,0);if(!e){e=Mm(t);const n=a_(t),r=new Uint8Array(t.width*t.height*4);s_(n,e,g6(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,r),PL(n),e=new ImageData(new Uint8ClampedArray(r.buffer),t.width,t.height),t.g.push(e)}return e}function g6(t){let e=Ml(t,2);if(!e){const n=Mm(t);e=v6(t);const r=Ml(t,1)||Ioe(t);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),s0(t)}return e}function Mm(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=tu(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function a_(t){return t.l||(t.l=new LL),t.l}function v6(t){const e=Mm(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Ml(t,2);return n||(n=i_(a_(t),e),t.g.push(n),t.m=!0),e.bindTexture(e.TEXTURE_2D,n),n}function s0(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function tq(t){const e=Mm(t);return ML(a_(t),e,!0,()=>function(n,r){const i=n.canvas;if(i.width===n.width&&i.height===n.height)return r();const s=i.width,a=i.height;return i.width=n.width,i.height=n.height,n=r(),i.width=s,i.height=a,n}(t,()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return t.canvas.transferToImageBitmap()}))}var ti=class{constructor(t,e,n,r,i,s,a){this.g=t,this.j=e,this.m=n,this.canvas=r,this.l=i,this.width=s,this.height=a,(this.j||this.m)&&--nq===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!Ml(this,0)}ka(){return!!Ml(this,1)}P(){return!!Ml(this,2)}Ca(){return Ioe(this)}Ba(){var t=Ml(this,1);return t||(g6(this),v6(this),t=tq(this),s0(this),this.g.push(t),this.j=!0),t}M(){return g6(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof ImageData)n=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const r=Mm(this),i=a_(this);r.activeTexture(r.TEXTURE1),n=i_(i,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),s_(i,r,n),ML(i,r,!1,()=>{v6(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),s0(this)}),PL(i),s0(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);g6(this),v6(this),n=tq(this),s0(this)}t.push(n)}return new ti(t,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ml(this,1).close(),this.m&&Mm(this).deleteTexture(Ml(this,2)),nq=-1}};ti.prototype.close=ti.prototype.close,ti.prototype.clone=ti.prototype.clone,ti.prototype.getAsWebGLTexture=ti.prototype.M,ti.prototype.getAsImageBitmap=ti.prototype.Ba,ti.prototype.getAsImageData=ti.prototype.Ca,ti.prototype.hasWebGLTexture=ti.prototype.P,ti.prototype.hasImageBitmap=ti.prototype.ka,ti.prototype.hasImageData=ti.prototype.Ea;var nq=250;function el(...t){return t.map(([e,n])=>({start:e,end:n}))}const rVe=function(t){return class extends t{La(){this.i._registerModelResourcesGraphService()}}}((rq=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",e!==void 0?this.i.canvas=e:Soe()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph(new TextEncoder().encode(t),!1)}setGraph(t,e){const n=t.length,r=this.i._malloc(n);this.i.HEAPU8.set(t,r),e?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(t,e,n,r,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Ye(this,r||"input_audio",s=>{Ye(this,i=i||"audio_header",a=>{this.i._configureAudio(s,a,t,e??0,n)})})}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}da(t){hl(this,"__graph_config__",e=>{t(e)}),Ye(this,"__graph_config__",e=>{this.i._getGraphConfig(e,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const s=4*t.length;this.h!==s&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(s),this.h=s),this.i.HEAPF32.set(t,this.g/4),Ye(this,r,a=>{this.i._addAudioToInputStream(this.g,e,n,a,i)})}addGpuBufferToStream(t,e,n){Ye(this,e,r=>{const[i,s]=WB(this,t,r);this.i._addBoundTextureToStream(r,i,s,n)})}addBoolToStream(t,e,n){Ye(this,e,r=>{this.i._addBoolToInputStream(t,r,n)})}addDoubleToStream(t,e,n){Ye(this,e,r=>{this.i._addDoubleToInputStream(t,r,n)})}addFloatToStream(t,e,n){Ye(this,e,r=>{this.i._addFloatToInputStream(t,r,n)})}addIntToStream(t,e,n){Ye(this,e,r=>{this.i._addIntToInputStream(t,r,n)})}addUintToStream(t,e,n){Ye(this,e,r=>{this.i._addUintToInputStream(t,r,n)})}addStringToStream(t,e,n){Ye(this,e,r=>{Ye(this,t,i=>{this.i._addStringToInputStream(i,r,n)})})}addStringRecordToStream(t,e,n){Ye(this,e,r=>{YB(this,Object.keys(t),i=>{YB(this,Object.values(t),s=>{this.i._addFlatHashMapToInputStream(i,s,Object.keys(t).length,r,n)})})})}addProtoToStream(t,e,n,r){Ye(this,n,i=>{Ye(this,e,s=>{const a=this.i._malloc(t.length);this.i.HEAPU8.set(t,a),this.i._addProtoToInputStream(a,t.length,s,i,r),this.i._free(a)})})}addEmptyPacketToStream(t,e){Ye(this,t,n=>{this.i._addEmptyPacketToInputStream(n,e)})}addBoolVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateBoolVector(t.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const s of t)this.i._addBoolVectorEntry(i,s);this.i._addBoolVectorToInputStream(i,r,n)})}addDoubleVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateDoubleVector(t.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const s of t)this.i._addDoubleVectorEntry(i,s);this.i._addDoubleVectorToInputStream(i,r,n)})}addFloatVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateFloatVector(t.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const s of t)this.i._addFloatVectorEntry(i,s);this.i._addFloatVectorToInputStream(i,r,n)})}addIntVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateIntVector(t.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const s of t)this.i._addIntVectorEntry(i,s);this.i._addIntVectorToInputStream(i,r,n)})}addUintVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateUintVector(t.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const s of t)this.i._addUintVectorEntry(i,s);this.i._addUintVectorToInputStream(i,r,n)})}addStringVectorToStream(t,e,n){Ye(this,e,r=>{const i=this.i._allocateStringVector(t.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const s of t)Ye(this,s,a=>{this.i._addStringVectorEntry(i,a)});this.i._addStringVectorToInputStream(i,r,n)})}addBoolToInputSidePacket(t,e){Ye(this,e,n=>{this.i._addBoolToInputSidePacket(t,n)})}addDoubleToInputSidePacket(t,e){Ye(this,e,n=>{this.i._addDoubleToInputSidePacket(t,n)})}addFloatToInputSidePacket(t,e){Ye(this,e,n=>{this.i._addFloatToInputSidePacket(t,n)})}addIntToInputSidePacket(t,e){Ye(this,e,n=>{this.i._addIntToInputSidePacket(t,n)})}addUintToInputSidePacket(t,e){Ye(this,e,n=>{this.i._addUintToInputSidePacket(t,n)})}addStringToInputSidePacket(t,e){Ye(this,e,n=>{Ye(this,t,r=>{this.i._addStringToInputSidePacket(r,n)})})}addProtoToInputSidePacket(t,e,n){Ye(this,n,r=>{Ye(this,e,i=>{const s=this.i._malloc(t.length);this.i.HEAPU8.set(t,s),this.i._addProtoToInputSidePacket(s,t.length,i,r),this.i._free(s)})})}addBoolVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const i of t)this.i._addBoolVectorEntry(r,i);this.i._addBoolVectorToInputSidePacket(r,n)})}addDoubleVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const i of t)this.i._addDoubleVectorEntry(r,i);this.i._addDoubleVectorToInputSidePacket(r,n)})}addFloatVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const i of t)this.i._addFloatVectorEntry(r,i);this.i._addFloatVectorToInputSidePacket(r,n)})}addIntVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const i of t)this.i._addIntVectorEntry(r,i);this.i._addIntVectorToInputSidePacket(r,n)})}addUintVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateUintVector(t.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const i of t)this.i._addUintVectorEntry(r,i);this.i._addUintVectorToInputSidePacket(r,n)})}addStringVectorToInputSidePacket(t,e){Ye(this,e,n=>{const r=this.i._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const i of t)Ye(this,i,s=>{this.i._addStringVectorEntry(r,s)});this.i._addStringVectorToInputSidePacket(r,n)})}attachBoolListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachIntVectorListener(n)})}attachUintListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachUintListener(n)})}attachUintVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachUintVectorListener(n)})}attachDoubleListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(t,e){hl(this,t,e),Ye(this,t,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(t,e){Wu(this,t,e),Ye(this,t,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(t,e,n){hl(this,t,e),Ye(this,t,r=>{this.i._attachProtoListener(r,n||!1)})}attachProtoVectorListener(t,e,n){Wu(this,t,e),Ye(this,t,r=>{this.i._attachProtoVectorListener(r,n||!1)})}attachAudioListener(t,e,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),hl(this,t,(r,i)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),e(r,i)}),Ye(this,t,r=>{this.i._attachAudioListener(r,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends rq{get ea(){return this.i}qa(t,e,n){Ye(this,e,r=>{const[i,s]=WB(this,t,r);this.ea._addBoundTextureAsImageToStream(r,i,s,n)})}U(t,e){hl(this,t,e),Ye(this,t,n=>{this.ea._attachImageListener(n)})}ca(t,e){Wu(this,t,e),Ye(this,t,n=>{this.ea._attachImageVectorListener(n)})}}));var rq,ao=class extends rVe{};async function xt(t,e,n){return async function(r,i,s,a){return tVe(r,i,s,a)}(t,n.canvas??(Soe()?void 0:document.createElement("canvas")),e,n)}function xoe(t,e,n,r){if(t.T){const s=new Qae;if(n!=null&&n.regionOfInterest){if(!t.pa)throw Error("This task doesn't support region-of-interest.");var i=n.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error("Expected RectF values to be in [0,1].");Ze(s,1,(i.left+i.right)/2),Ze(s,2,(i.top+i.bottom)/2),Ze(s,4,i.right-i.left),Ze(s,3,i.bottom-i.top)}else Ze(s,1,.5),Ze(s,2,.5),Ze(s,4,1),Ze(s,3,1);if(n!=null&&n.rotationDegrees){if((n==null?void 0:n.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90°.");if(Ze(s,5,-Math.PI*n.rotationDegrees/180),(n==null?void 0:n.rotationDegrees)%180!=0){const[a,o]=woe(e);n=pr(s,3)*o/a,i=pr(s,4)*a/o,Ze(s,4,n),Ze(s,3,i)}}t.g.addProtoToStream(s.g(),"mediapipe.NormalizedRect",t.T,r)}t.g.qa(e,t.aa,r??performance.now()),t.finishProcessing()}function oo(t,e,n){var r;if((r=t.baseOptions)!=null&&r.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");xoe(t,e,n,t.B+1)}function ec(t,e,n,r){var i;if(!((i=t.baseOptions)!=null&&i.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");xoe(t,e,n,r)}function Pm(t,e,n,r){var i=e.data;const s=e.width,a=s*(e=e.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==a)throw Error("Unsupported channel count: "+i.length/a);return t=new ei([i],n,!1,t.g.i.canvas,t.O,s,e),r?t.clone():t}var Hs=class extends p6{constructor(t,e,n,r){super(t),this.g=t,this.aa=e,this.T=n,this.pa=r,this.O=new LL}l(t,e=!0){if("runningMode"in t&&Og(this.baseOptions,2,!!t.runningMode&&t.runningMode!=="IMAGE"),t.canvas!==void 0&&this.g.i.canvas!==t.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(t,e)}close(){this.O.close(),super.close()}};Hs.prototype.close=Hs.prototype.close;var Ra=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect_in",!1),this.j={detections:[]},nt(t=this.h=new e_,0,1,e=new Zn),Ze(this.h,2,.5),Ze(this.h,3,.3)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"minDetectionConfidence"in t&&Ze(this.h,2,t.minDetectionConfidence??.5),"minSuppressionThreshold"in t&&Ze(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}D(t,e){return this.j={detections:[]},oo(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},ec(this,t,n,e),this.j}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect_in"),zt(t,"detections");const e=new ha;Jo(e,$$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect_in"),Nt(n,"DETECTIONS:detections"),n.o(e),ga(t,n),this.g.attachProtoVectorListener("detections",(r,i)=>{for(const s of r)r=Wae(s),this.j.detections.push(boe(r));He(this,i)}),this.g.attachEmptyPacketListener("detections",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ra.prototype.detectForVideo=Ra.prototype.F,Ra.prototype.detect=Ra.prototype.D,Ra.prototype.setOptions=Ra.prototype.o,Ra.createFromModelPath=async function(t,e){return xt(Ra,t,{baseOptions:{modelAssetPath:e}})},Ra.createFromModelBuffer=function(t,e){return xt(Ra,t,{baseOptions:{modelAssetBuffer:e}})},Ra.createFromOptions=function(t,e){return xt(Ra,t,e)};var AL=el([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),NL=el([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),DL=el([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Moe=el([474,475],[475,476],[476,477],[477,474]),UL=el([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),FL=el([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Poe=el([469,470],[470,471],[471,472],[472,469]),jL=el([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Loe=[...AL,...NL,...DL,...UL,...FL,...jL],Ooe=el([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function iq(t){t.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var ir=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,nt(t=this.h=new roe,0,1,e=new Zn),this.v=new noe,nt(this.h,0,3,this.v),this.s=new e_,nt(this.h,0,2,this.s),Vl(this.s,4,1),Ze(this.s,2,.5),Ze(this.v,2,.5),Ze(this.h,4,.5)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"numFaces"in t&&Vl(this.s,4,t.numFaces??1),"minFaceDetectionConfidence"in t&&Ze(this.s,2,t.minFaceDetectionConfidence??.5),"minTrackingConfidence"in t&&Ze(this.h,4,t.minTrackingConfidence??.5),"minFacePresenceConfidence"in t&&Ze(this.v,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}D(t,e){return iq(this),oo(this,t,e),this.j}F(t,e,n){return iq(this),ec(this,t,n,e),this.j}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"face_landmarks");const e=new ha;Jo(e,B$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"NORM_LANDMARKS:face_landmarks"),n.o(e),ga(t,n),this.g.attachProtoVectorListener("face_landmarks",(r,i)=>{for(const s of r)r=R4(s),this.j.faceLandmarks.push(t_(r));He(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{He(this,r)}),this.outputFaceBlendshapes&&(zt(t,"blendshapes"),Nt(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(r,i)=>{if(this.outputFaceBlendshapes)for(const s of r)r=Xy(s),this.j.faceBlendshapes.push(IL(r.g()??[]));He(this,i)}),this.g.attachEmptyPacketListener("blendshapes",r=>{He(this,r)})),this.outputFacialTransformationMatrixes&&(zt(t,"face_geometry"),Nt(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(r,i)=>{if(this.outputFacialTransformationMatrixes)for(const s of r)(r=Vt(V$e(s),O$e,2))&&this.j.facialTransformationMatrixes.push({rows:Va(r,1)??0??0,columns:Va(r,2)??0??0,data:sh(r,3,h1,ih()).slice()??[]});He(this,i)}),this.g.attachEmptyPacketListener("face_geometry",r=>{He(this,r)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ir.prototype.detectForVideo=ir.prototype.F,ir.prototype.detect=ir.prototype.D,ir.prototype.setOptions=ir.prototype.o,ir.createFromModelPath=function(t,e){return xt(ir,t,{baseOptions:{modelAssetPath:e}})},ir.createFromModelBuffer=function(t,e){return xt(ir,t,{baseOptions:{modelAssetBuffer:e}})},ir.createFromOptions=function(t,e){return xt(ir,t,e)},ir.FACE_LANDMARKS_LIPS=AL,ir.FACE_LANDMARKS_LEFT_EYE=NL,ir.FACE_LANDMARKS_LEFT_EYEBROW=DL,ir.FACE_LANDMARKS_LEFT_IRIS=Moe,ir.FACE_LANDMARKS_RIGHT_EYE=UL,ir.FACE_LANDMARKS_RIGHT_EYEBROW=FL,ir.FACE_LANDMARKS_RIGHT_IRIS=Poe,ir.FACE_LANDMARKS_FACE_OVAL=jL,ir.FACE_LANDMARKS_CONTOURS=Loe,ir.FACE_LANDMARKS_TESSELATION=Ooe;var fl=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!0),nt(t=this.j=new soe,0,1,e=new Zn)}get baseOptions(){return Vt(this.j,Zn,1)}set baseOptions(t){nt(this.j,0,1,t)}o(t){return super.l(t)}Oa(t,e,n){const r=typeof e!="function"?e:{};if(this.h=typeof e=="function"?e:n,oo(this,t,r??{}),!this.h)return this.s}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"stylized_image");const e=new ha;Jo(e,q$e,this.j);const n=new as;pa(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"STYLIZED_IMAGE:stylized_image"),n.o(e),ga(t,n),this.g.U("stylized_image",(r,i)=>{var s=!this.h,a=r.data,o=r.width;const l=o*(r=r.height);if(a instanceof Uint8Array)if(a.length===3*l){const c=new Uint8ClampedArray(4*l);for(let d=0;d<l;++d)c[4*d]=a[3*d],c[4*d+1]=a[3*d+1],c[4*d+2]=a[3*d+2],c[4*d+3]=255;a=new ImageData(c,o,r)}else{if(a.length!==4*l)throw Error("Unsupported channel count: "+a.length/l);a=new ImageData(new Uint8ClampedArray(a.buffer,a.byteOffset,a.length),o,r)}else if(!(a instanceof WebGLTexture))throw Error(`Unsupported format: ${a.constructor.name}`);o=new ti([a],!1,!1,this.g.i.canvas,this.O,o,r),this.s=s=s?o.clone():o,this.h&&this.h(s),He(this,i)}),this.g.attachEmptyPacketListener("stylized_image",r=>{this.s=null,this.h&&this.h(null),He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};fl.prototype.stylize=fl.prototype.Oa,fl.prototype.setOptions=fl.prototype.o,fl.createFromModelPath=function(t,e){return xt(fl,t,{baseOptions:{modelAssetPath:e}})},fl.createFromModelBuffer=function(t,e){return xt(fl,t,{baseOptions:{modelAssetBuffer:e}})},fl.createFromOptions=function(t,e){return xt(fl,t,e)};var HL=el([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function sq(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function aq(t){return t.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function oq(t,e=!0){const n=[];for(const i of t){var r=Xy(i);t=[];for(const s of r.g())r=e&&Va(s,1)!=null?Va(s,1)??0:-1,t.push({score:pr(s,2)??0,index:r,categoryName:no(s,3)??""??"",displayName:no(s,4)??""??""});n.push(t)}return n}var Ws=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(t=this.j=new loe,0,1,e=new Zn),this.s=new wL,nt(this.j,0,2,this.s),this.C=new SL,nt(this.s,0,3,this.C),this.v=new ooe,nt(this.s,0,2,this.v),this.h=new G$e,nt(this.j,0,3,this.h),Ze(this.v,2,.5),Ze(this.s,4,.5),Ze(this.C,2,.5)}get baseOptions(){return Vt(this.j,Zn,1)}set baseOptions(t){nt(this.j,0,1,t)}o(t){var i,s,a,o;if(Vl(this.v,3,t.numHands??1),"minHandDetectionConfidence"in t&&Ze(this.v,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&Ze(this.s,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&Ze(this.C,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new Vf,n=e,r=nI(t.cannedGesturesClassifierOptions,(i=Vt(this.h,Vf,3))==null?void 0:i.h());nt(n,0,2,r),nt(this.h,0,3,e)}else t.cannedGesturesClassifierOptions===void 0&&((s=Vt(this.h,Vf,3))==null||s.g());return t.customGesturesClassifierOptions?(nt(n=e=new Vf,0,2,r=nI(t.customGesturesClassifierOptions,(a=Vt(this.h,Vf,4))==null?void 0:a.h())),nt(this.h,0,4,e)):t.customGesturesClassifierOptions===void 0&&((o=Vt(this.h,Vf,4))==null||o.g()),this.l(t)}Ja(t,e){return sq(this),oo(this,t,e),aq(this)}Ka(t,e,n){return sq(this),ec(this,t,n,e),aq(this)}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"hand_gestures"),zt(t,"hand_landmarks"),zt(t,"world_hand_landmarks"),zt(t,"handedness");const e=new ha;Jo(e,K$e,this.j);const n=new as;pa(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"HAND_GESTURES:hand_gestures"),Nt(n,"LANDMARKS:hand_landmarks"),Nt(n,"WORLD_LANDMARKS:world_hand_landmarks"),Nt(n,"HANDEDNESS:handedness"),n.o(e),ga(t,n),this.g.attachProtoVectorListener("hand_landmarks",(r,i)=>{for(const s of r){r=R4(s);const a=[];for(const o of mu(r,Jae,1))a.push({x:pr(o,1)??0,y:pr(o,2)??0,z:pr(o,3)??0,visibility:pr(o,4)??0});this.landmarks.push(a)}He(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{He(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,i)=>{for(const s of r){r=z2(s);const a=[];for(const o of mu(r,Yae,1))a.push({x:pr(o,1)??0,y:pr(o,2)??0,z:pr(o,3)??0,visibility:pr(o,4)??0});this.worldLandmarks.push(a)}He(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{He(this,r)}),this.g.attachProtoVectorListener("hand_gestures",(r,i)=>{this.gestures.push(...oq(r,!1)),He(this,i)}),this.g.attachEmptyPacketListener("hand_gestures",r=>{He(this,r)}),this.g.attachProtoVectorListener("handedness",(r,i)=>{this.handedness.push(...oq(r)),He(this,i)}),this.g.attachEmptyPacketListener("handedness",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function lq(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}Ws.prototype.recognizeForVideo=Ws.prototype.Ka,Ws.prototype.recognize=Ws.prototype.Ja,Ws.prototype.setOptions=Ws.prototype.o,Ws.createFromModelPath=function(t,e){return xt(Ws,t,{baseOptions:{modelAssetPath:e}})},Ws.createFromModelBuffer=function(t,e){return xt(Ws,t,{baseOptions:{modelAssetBuffer:e}})},Ws.createFromOptions=function(t,e){return xt(Ws,t,e)},Ws.HAND_CONNECTIONS=HL;var Ys=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(t=this.h=new wL,0,1,e=new Zn),this.s=new SL,nt(this.h,0,3,this.s),this.j=new ooe,nt(this.h,0,2,this.j),Vl(this.j,3,1),Ze(this.j,2,.5),Ze(this.s,2,.5),Ze(this.h,4,.5)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"numHands"in t&&Vl(this.j,3,t.numHands??1),"minHandDetectionConfidence"in t&&Ze(this.j,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&Ze(this.h,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&Ze(this.s,2,t.minHandPresenceConfidence??.5),this.l(t)}D(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],oo(this,t,e),lq(this)}F(t,e,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],ec(this,t,n,e),lq(this)}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"hand_landmarks"),zt(t,"world_hand_landmarks"),zt(t,"handedness");const e=new ha;Jo(e,Z$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"LANDMARKS:hand_landmarks"),Nt(n,"WORLD_LANDMARKS:world_hand_landmarks"),Nt(n,"HANDEDNESS:handedness"),n.o(e),ga(t,n),this.g.attachProtoVectorListener("hand_landmarks",(r,i)=>{for(const s of r)r=R4(s),this.landmarks.push(t_(r));He(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{He(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,i)=>{for(const s of r)r=z2(s),this.worldLandmarks.push(U0(r));He(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{He(this,r)}),this.g.attachProtoVectorListener("handedness",(r,i)=>{var s=this.handedness,a=s.push;const o=[];for(const l of r){r=Xy(l);const c=[];for(const d of r.g())c.push({score:pr(d,2)??0,index:Va(d,1)??0??-1,categoryName:no(d,3)??""??"",displayName:no(d,4)??""??""});o.push(c)}a.call(s,...o),He(this,i)}),this.g.attachEmptyPacketListener("handedness",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ys.prototype.detectForVideo=Ys.prototype.F,Ys.prototype.detect=Ys.prototype.D,Ys.prototype.setOptions=Ys.prototype.o,Ys.createFromModelPath=function(t,e){return xt(Ys,t,{baseOptions:{modelAssetPath:e}})},Ys.createFromModelBuffer=function(t,e){return xt(Ys,t,{baseOptions:{modelAssetBuffer:e}})},Ys.createFromOptions=function(t,e){return xt(Ys,t,e)},Ys.HAND_CONNECTIONS=HL;var Aoe=el([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function cq(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function uq(t){try{if(!t.C)return t.h;t.C(t.h)}finally{r_(t)}}function e7(t,e){t=R4(t),e.push(t_(t))}var $n=class extends Hs{constructor(t,e){super(new ao(t,e),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,nt(t=this.j=new foe,0,1,e=new Zn),this.J=new SL,nt(this.j,0,2,this.J),this.Z=new z$e,nt(this.j,0,3,this.Z),this.s=new e_,nt(this.j,0,4,this.s),this.H=new noe,nt(this.j,0,5,this.H),this.v=new doe,nt(this.j,0,6,this.v),this.K=new hoe,nt(this.j,0,7,this.K),Ze(this.s,2,.5),Ze(this.s,3,.3),Ze(this.H,2,.5),Ze(this.v,2,.5),Ze(this.v,3,.3),Ze(this.K,2,.5),Ze(this.J,2,.5)}get baseOptions(){return Vt(this.j,Zn,1)}set baseOptions(t){nt(this.j,0,1,t)}o(t){return"minFaceDetectionConfidence"in t&&Ze(this.s,2,t.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in t&&Ze(this.s,3,t.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in t&&Ze(this.H,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"minPoseDetectionConfidence"in t&&Ze(this.v,2,t.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in t&&Ze(this.v,3,t.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in t&&Ze(this.K,2,t.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in t&&Ze(this.J,2,t.minHandLandmarksConfidence??.5),this.l(t)}D(t,e,n){const r=typeof e!="function"?e:{};return this.C=typeof e=="function"?e:n,cq(this),oo(this,t,r),uq(this)}F(t,e,n,r){const i=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:r,cq(this),ec(this,t,i,e),uq(this)}m(){var t=new Vs;Nn(t,"input_frames_image"),zt(t,"pose_landmarks"),zt(t,"pose_world_landmarks"),zt(t,"face_landmarks"),zt(t,"left_hand_landmarks"),zt(t,"left_hand_world_landmarks"),zt(t,"right_hand_landmarks"),zt(t,"right_hand_world_landmarks");const e=new ha,n=new OB;YR(n,1,hp("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(i,s){if(s!=null)if(Array.isArray(s))Tn(i,2,oae(s));else{if(!(typeof s=="string"||s instanceof Xc||S4(s)))throw Error("invalid value in Any.value field: "+s+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");YR(i,2,$P(s,!1),Nh())}}(n,this.j.g());const r=new as;pa(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),z5(r,8,OB,n),Rn(r,"IMAGE:input_frames_image"),Nt(r,"POSE_LANDMARKS:pose_landmarks"),Nt(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Nt(r,"FACE_LANDMARKS:face_landmarks"),Nt(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Nt(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Nt(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Nt(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(e),ga(t,r),n_(this,t),this.g.attachProtoListener("pose_landmarks",(i,s)=>{e7(i,this.h.poseLandmarks),He(this,s)}),this.g.attachEmptyPacketListener("pose_landmarks",i=>{He(this,i)}),this.g.attachProtoListener("pose_world_landmarks",(i,s)=>{var a=this.h.poseWorldLandmarks;i=z2(i),a.push(U0(i)),He(this,s)}),this.g.attachEmptyPacketListener("pose_world_landmarks",i=>{He(this,i)}),this.outputPoseSegmentationMasks&&(Nt(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Im(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",(i,s)=>{this.h.poseSegmentationMasks=[Pm(this,i,!0,!this.C)],He(this,s)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",i=>{this.h.poseSegmentationMasks=[],He(this,i)})),this.g.attachProtoListener("face_landmarks",(i,s)=>{e7(i,this.h.faceLandmarks),He(this,s)}),this.g.attachEmptyPacketListener("face_landmarks",i=>{He(this,i)}),this.outputFaceBlendshapes&&(zt(t,"extra_blendshapes"),Nt(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(i,s)=>{var a=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(i=Xy(i),a.push(IL(i.g()??[]))),He(this,s)}),this.g.attachEmptyPacketListener("extra_blendshapes",i=>{He(this,i)})),this.g.attachProtoListener("left_hand_landmarks",(i,s)=>{e7(i,this.h.leftHandLandmarks),He(this,s)}),this.g.attachEmptyPacketListener("left_hand_landmarks",i=>{He(this,i)}),this.g.attachProtoListener("left_hand_world_landmarks",(i,s)=>{var a=this.h.leftHandWorldLandmarks;i=z2(i),a.push(U0(i)),He(this,s)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",i=>{He(this,i)}),this.g.attachProtoListener("right_hand_landmarks",(i,s)=>{e7(i,this.h.rightHandLandmarks),He(this,s)}),this.g.attachEmptyPacketListener("right_hand_landmarks",i=>{He(this,i)}),this.g.attachProtoListener("right_hand_world_landmarks",(i,s)=>{var a=this.h.rightHandWorldLandmarks;i=z2(i),a.push(U0(i)),He(this,s)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",i=>{He(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};$n.prototype.detectForVideo=$n.prototype.F,$n.prototype.detect=$n.prototype.D,$n.prototype.setOptions=$n.prototype.o,$n.createFromModelPath=function(t,e){return xt($n,t,{baseOptions:{modelAssetPath:e}})},$n.createFromModelBuffer=function(t,e){return xt($n,t,{baseOptions:{modelAssetBuffer:e}})},$n.createFromOptions=function(t,e){return xt($n,t,e)},$n.HAND_CONNECTIONS=HL,$n.POSE_CONNECTIONS=Aoe,$n.FACE_LANDMARKS_LIPS=AL,$n.FACE_LANDMARKS_LEFT_EYE=NL,$n.FACE_LANDMARKS_LEFT_EYEBROW=DL,$n.FACE_LANDMARKS_LEFT_IRIS=Moe,$n.FACE_LANDMARKS_RIGHT_EYE=UL,$n.FACE_LANDMARKS_RIGHT_EYEBROW=FL,$n.FACE_LANDMARKS_RIGHT_IRIS=Poe,$n.FACE_LANDMARKS_FACE_OVAL=jL,$n.FACE_LANDMARKS_CONTOURS=Loe,$n.FACE_LANDMARKS_TESSELATION=Ooe;var Ia=class extends Hs{constructor(t,e){super(new ao(t,e),"input_image","norm_rect",!0),this.j={classifications:[]},nt(t=this.h=new moe,0,1,e=new Zn)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return nt(this.h,0,2,nI(t,Vt(this.h,CL,2))),this.l(t)}sa(t,e){return this.j={classifications:[]},oo(this,t,e),this.j}ta(t,e,n){return this.j={classifications:[]},ec(this,t,n,e),this.j}m(){var t=new Vs;Nn(t,"input_image"),Nn(t,"norm_rect"),zt(t,"classifications");const e=new ha;Jo(e,W$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Rn(n,"IMAGE:input_image"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"CLASSIFICATIONS:classifications"),n.o(e),ga(t,n),this.g.attachProtoListener("classifications",(r,i)=>{this.j=function(s){const a={classifications:mu(s,N$e,1).map(o=>{var l;return IL(((l=Vt(o,Zae,4))==null?void 0:l.g())??[],Va(o,2)??0,no(o,3)??"")})};return Z5(Tm(s,2))!=null&&(a.timestampMs=Z5(Tm(s,2))??0),a}(D$e(r)),He(this,i)}),this.g.attachEmptyPacketListener("classifications",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ia.prototype.classifyForVideo=Ia.prototype.ta,Ia.prototype.classify=Ia.prototype.sa,Ia.prototype.setOptions=Ia.prototype.o,Ia.createFromModelPath=function(t,e){return xt(Ia,t,{baseOptions:{modelAssetPath:e}})},Ia.createFromModelBuffer=function(t,e){return xt(Ia,t,{baseOptions:{modelAssetBuffer:e}})},Ia.createFromOptions=function(t,e){return xt(Ia,t,e)};var Js=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!0),this.h=new poe,this.embeddings={embeddings:[]},nt(t=this.h,0,1,e=new Zn)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){var e=this.h,n=Vt(this.h,VB,2);return n=n?n.clone():new VB,t.l2Normalize!==void 0?Og(n,1,t.l2Normalize):"l2Normalize"in t&&Tn(n,1),t.quantize!==void 0?Og(n,2,t.quantize):"quantize"in t&&Tn(n,2),nt(e,0,2,n),this.l(t)}za(t,e){return oo(this,t,e),this.embeddings}Aa(t,e,n){return ec(this,t,n,e),this.embeddings}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"embeddings_out");const e=new ha;Jo(e,Y$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"EMBEDDINGS:embeddings_out"),n.o(e),ga(t,n),this.g.attachProtoListener("embeddings_out",(r,i)=>{r=j$e(r),this.embeddings=function(s){return{embeddings:mu(s,F$e,1).map(a=>{var l,c;const o={headIndex:Va(a,3)??0??-1,headName:no(a,4)??""??""};if(hae(a,$B,OS(a,1))!==void 0)a=sh(a=Vt(a,$B,OS(a,1)),1,h1,ih()),o.floatEmbedding=a.slice();else{const d=new Uint8Array(0);o.quantizedEmbedding=((c=(l=Vt(a,U$e,OS(a,2)))==null?void 0:l.oa())==null?void 0:c.h())??d}return o}),timestampMs:Z5(Tm(s,2))??0}}(r),He(this,i)}),this.g.attachEmptyPacketListener("embeddings_out",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Js.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=ZB(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=ZB(KB(t.quantizedEmbedding),KB(e.quantizedEmbedding))}return t},Js.prototype.embedForVideo=Js.prototype.Aa,Js.prototype.embed=Js.prototype.za,Js.prototype.setOptions=Js.prototype.o,Js.createFromModelPath=function(t,e){return xt(Js,t,{baseOptions:{modelAssetPath:e}})},Js.createFromModelBuffer=function(t,e){return xt(Js,t,{baseOptions:{modelAssetBuffer:e}})},Js.createFromOptions=function(t,e){return xt(Js,t,e)};var sI=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};function dq(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function hq(t){try{const e=new sI(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{r_(t)}}sI.prototype.close=sI.prototype.close;var Di=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new RL,this.v=new goe,nt(this.h,0,3,this.v),nt(t=this.h,0,1,e=new Zn)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?Tn(this.h,2,hp(t.displayNamesLocale)):"displayNamesLocale"in t&&Tn(this.h,2),"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}I(){(function(t){var n,r;const e=mu(t.da(),as,1).filter(i=>(no(i,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(t.s=[],e.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");e.length===1&&(((r=(n=Vt(e[0],ha,7))==null?void 0:n.l())==null?void 0:r.g())??new Map).forEach((i,s)=>{t.s[Number(s)]=no(i,1)??""})})(this)}segment(t,e,n){const r=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:n,dq(this),oo(this,t,r),hq(this)}Ma(t,e,n,r){const i=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,dq(this),ec(this,t,i,e),hq(this)}Da(){return this.s}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect");const e=new ha;Jo(e,yoe,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),n.o(e),ga(t,n),n_(this,t),this.outputConfidenceMasks&&(zt(t,"confidence_masks"),Nt(n,"CONFIDENCE_MASKS:confidence_masks"),Im(this,"confidence_masks"),this.g.ca("confidence_masks",(r,i)=>{this.confidenceMasks=r.map(s=>Pm(this,s,!0,!this.j)),He(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],He(this,r)})),this.outputCategoryMask&&(zt(t,"category_mask"),Nt(n,"CATEGORY_MASK:category_mask"),Im(this,"category_mask"),this.g.U("category_mask",(r,i)=>{this.categoryMask=Pm(this,r,!1,!this.j),He(this,i)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,He(this,r)})),zt(t,"quality_scores"),Nt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,i)=>{this.qualityScores=r,He(this,i)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Di.prototype.getLabels=Di.prototype.Da,Di.prototype.segmentForVideo=Di.prototype.Ma,Di.prototype.segment=Di.prototype.segment,Di.prototype.setOptions=Di.prototype.o,Di.createFromModelPath=function(t,e){return xt(Di,t,{baseOptions:{modelAssetPath:e}})},Di.createFromModelBuffer=function(t,e){return xt(Di,t,{baseOptions:{modelAssetBuffer:e}})},Di.createFromOptions=function(t,e){return xt(Di,t,e)};var aI=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};aI.prototype.close=aI.prototype.close;var iVe=class extends qe{constructor(t){super(t)}},Bf=[0,ur,-2],Q5=[0,xc,-3,Gn,xc,-1],fq=[0,Q5],mq=[0,Q5,ur,-1],jS=class extends qe{constructor(t){super(t)}},pq=[0,xc,-1,Gn],sVe=class extends qe{constructor(t){super(t)}},gq=class extends qe{constructor(t){super(t)}},oI=[1,2,3,4,5,6,7,8,9,10,14,15],Noe=class extends qe{constructor(t){super(t)}};Noe.prototype.g=Qy([0,Vr,[0,oI,ln,Q5,ln,[0,Q5,Bf],ln,fq,ln,[0,fq,Bf],ln,pq,ln,[0,xc,-3,Gn,ro],ln,[0,xc,-3,Gn],ln,[0,sn,xc,-2,Gn,ur,Gn,-1,2,xc,Bf],ln,mq,ln,[0,mq,Bf],xc,Bf,sn,ln,[0,xc,-3,Gn,Bf,-1],ln,[0,Vr,pq]],sn,[0,sn,ur,-1,Gn]]);var ml=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new RL,this.s=new goe,nt(this.h,0,3,this.s),nt(t=this.h,0,1,e=new Zn)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}segment(t,e,n,r){const i=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new Noe;const s=new gq;var a=new iVe;if(Vl(a,1,255),nt(s,0,12,a),e.keypoint&&e.scribble)throw Error("Cannot provide both keypoint and scribble.");if(e.keypoint){var o=new jS;Og(o,3,!0),Ze(o,1,e.keypoint.x),Ze(o,2,e.keypoint.y),N0(s,5,oI,o)}else{if(!e.scribble)throw Error("Must provide either a keypoint or a scribble.");for(o of(a=new sVe,e.scribble))Og(e=new jS,3,!0),Ze(e,1,o.x),Ze(e,2,o.y),z5(a,1,jS,e);N0(s,15,oI,a)}z5(r,1,gq,s),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),oo(this,t,i);e:{try{const c=new aI(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var l=c;break e}this.j(c)}finally{r_(this)}l=void 0}return l}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"roi_in"),Nn(t,"norm_rect_in");const e=new ha;Jo(e,yoe,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"ROI:roi_in"),Rn(n,"NORM_RECT:norm_rect_in"),n.o(e),ga(t,n),n_(this,t),this.outputConfidenceMasks&&(zt(t,"confidence_masks"),Nt(n,"CONFIDENCE_MASKS:confidence_masks"),Im(this,"confidence_masks"),this.g.ca("confidence_masks",(r,i)=>{this.confidenceMasks=r.map(s=>Pm(this,s,!0,!this.j)),He(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],He(this,r)})),this.outputCategoryMask&&(zt(t,"category_mask"),Nt(n,"CATEGORY_MASK:category_mask"),Im(this,"category_mask"),this.g.U("category_mask",(r,i)=>{this.categoryMask=Pm(this,r,!1,!this.j),He(this,i)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,He(this,r)})),zt(t,"quality_scores"),Nt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,i)=>{this.qualityScores=r,He(this,i)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ml.prototype.segment=ml.prototype.segment,ml.prototype.setOptions=ml.prototype.o,ml.createFromModelPath=function(t,e){return xt(ml,t,{baseOptions:{modelAssetPath:e}})},ml.createFromModelBuffer=function(t,e){return xt(ml,t,{baseOptions:{modelAssetBuffer:e}})},ml.createFromOptions=function(t,e){return xt(ml,t,e)};var xa=class extends Hs{constructor(t,e){super(new ao(t,e),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},nt(t=this.h=new _oe,0,1,e=new Zn)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?Tn(this.h,2,hp(t.displayNamesLocale)):"displayNamesLocale"in t&&Tn(this.h,2),t.maxResults!==void 0?Vl(this.h,3,t.maxResults):"maxResults"in t&&Tn(this.h,3),t.scoreThreshold!==void 0?Ze(this.h,4,t.scoreThreshold):"scoreThreshold"in t&&Tn(this.h,4),t.categoryAllowlist!==void 0?W5(this.h,5,t.categoryAllowlist):"categoryAllowlist"in t&&Tn(this.h,5),t.categoryDenylist!==void 0?W5(this.h,6,t.categoryDenylist):"categoryDenylist"in t&&Tn(this.h,6),this.l(t)}D(t,e){return this.j={detections:[]},oo(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},ec(this,t,n,e),this.j}m(){var t=new Vs;Nn(t,"input_frame_gpu"),Nn(t,"norm_rect"),zt(t,"detections");const e=new ha;Jo(e,Q$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),Rn(n,"IMAGE:input_frame_gpu"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"DETECTIONS:detections"),n.o(e),ga(t,n),this.g.attachProtoVectorListener("detections",(r,i)=>{for(const s of r)r=Wae(s),this.j.detections.push(boe(r));He(this,i)}),this.g.attachEmptyPacketListener("detections",r=>{He(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};xa.prototype.detectForVideo=xa.prototype.F,xa.prototype.detect=xa.prototype.D,xa.prototype.setOptions=xa.prototype.o,xa.createFromModelPath=async function(t,e){return xt(xa,t,{baseOptions:{modelAssetPath:e}})},xa.createFromModelBuffer=function(t,e){return xt(xa,t,{baseOptions:{modelAssetBuffer:e}})},xa.createFromOptions=function(t,e){return xt(xa,t,e)};var lI=class{constructor(t,e,n){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=n}close(){var t;(t=this.segmentationMasks)==null||t.forEach(e=>{e.close()})}};function vq(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function yq(t){try{const e=new lI(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.s)return e;t.s(e)}finally{r_(t)}}lI.prototype.close=lI.prototype.close;var Qs=class extends Hs{constructor(t,e){super(new ao(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,nt(t=this.h=new Coe,0,1,e=new Zn),this.v=new hoe,nt(this.h,0,3,this.v),this.j=new doe,nt(this.h,0,2,this.j),Vl(this.j,4,1),Ze(this.j,2,.5),Ze(this.v,2,.5),Ze(this.h,4,.5)}get baseOptions(){return Vt(this.h,Zn,1)}set baseOptions(t){nt(this.h,0,1,t)}o(t){return"numPoses"in t&&Vl(this.j,4,t.numPoses??1),"minPoseDetectionConfidence"in t&&Ze(this.j,2,t.minPoseDetectionConfidence??.5),"minTrackingConfidence"in t&&Ze(this.h,4,t.minTrackingConfidence??.5),"minPosePresenceConfidence"in t&&Ze(this.v,2,t.minPosePresenceConfidence??.5),"outputSegmentationMasks"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}D(t,e,n){const r=typeof e!="function"?e:{};return this.s=typeof e=="function"?e:n,vq(this),oo(this,t,r),yq(this)}F(t,e,n,r){const i=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,vq(this),ec(this,t,i,e),yq(this)}m(){var t=new Vs;Nn(t,"image_in"),Nn(t,"norm_rect"),zt(t,"normalized_landmarks"),zt(t,"world_landmarks"),zt(t,"segmentation_masks");const e=new ha;Jo(e,X$e,this.h);const n=new as;pa(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),Nt(n,"NORM_LANDMARKS:normalized_landmarks"),Nt(n,"WORLD_LANDMARKS:world_landmarks"),n.o(e),ga(t,n),n_(this,t),this.g.attachProtoVectorListener("normalized_landmarks",(r,i)=>{this.landmarks=[];for(const s of r)r=R4(s),this.landmarks.push(t_(r));He(this,i)}),this.g.attachEmptyPacketListener("normalized_landmarks",r=>{this.landmarks=[],He(this,r)}),this.g.attachProtoVectorListener("world_landmarks",(r,i)=>{this.worldLandmarks=[];for(const s of r)r=z2(s),this.worldLandmarks.push(U0(r));He(this,i)}),this.g.attachEmptyPacketListener("world_landmarks",r=>{this.worldLandmarks=[],He(this,r)}),this.outputSegmentationMasks&&(Nt(n,"SEGMENTATION_MASK:segmentation_masks"),Im(this,"segmentation_masks"),this.g.ca("segmentation_masks",(r,i)=>{this.segmentationMasks=r.map(s=>Pm(this,s,!0,!this.s)),He(this,i)}),this.g.attachEmptyPacketListener("segmentation_masks",r=>{this.segmentationMasks=[],He(this,r)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Qs.prototype.detectForVideo=Qs.prototype.F,Qs.prototype.detect=Qs.prototype.D,Qs.prototype.setOptions=Qs.prototype.o,Qs.createFromModelPath=function(t,e){return xt(Qs,t,{baseOptions:{modelAssetPath:e}})},Qs.createFromModelBuffer=function(t,e){return xt(Qs,t,{baseOptions:{modelAssetBuffer:e}})},Qs.createFromOptions=function(t,e){return xt(Qs,t,e)},Qs.POSE_CONNECTIONS=Aoe;var aVe=()=>typeof OffscreenCanvas<"u";async function _q(t){return new Promise(e=>setTimeout(e,t))}async function oVe(t){await _q(10);const n=Date.now();for(;Date.now()-n<500;){const{width:r,height:i}=t.getSettings();if(r&&i)return{width:r,height:i};await _q(50)}return{width:void 0,height:void 0}}function X5(t,e){if(aVe())return new OffscreenCanvas(t,e);const n=document.createElement("canvas");return n.width=t,n.height=e,n}var Doe=class Uoe{constructor(e,n,r={}){this.useStreamFallback=!1,this.processingEnabled=!1;var i;this.name=n,this.transformer=e,this.maxFps=(i=r.maxFps)!=null?i:30}static get isSupported(){const e=typeof MediaStreamTrackGenerator<"u"&&typeof MediaStreamTrackProcessor<"u",n=typeof HTMLCanvasElement<"u"&&typeof VideoFrame<"u"&&"captureStream"in HTMLCanvasElement.prototype;return e||n}static get hasModernApiSupport(){return typeof MediaStreamTrackGenerator<"u"&&typeof MediaStreamTrackProcessor<"u"}async setup(e){this.source=e.track;const{width:n,height:r}=await oVe(this.source);if(this.sourceDummy=e.element,!(this.sourceDummy instanceof HTMLVideoElement))throw TypeError("Currently only video transformers are supported");if(this.sourceDummy instanceof HTMLVideoElement&&(this.sourceDummy.height=r??300,this.sourceDummy.width=n??300),this.useStreamFallback=!Uoe.hasModernApiSupport,this.useStreamFallback){const i=document.querySelector('canvas[data-livekit-processor="'+this.name+'"]');i?(this.displayCanvas=i,this.displayCanvas.width=n??300,this.displayCanvas.height=r??300):(this.displayCanvas=document.createElement("canvas"),this.displayCanvas.width=n??300,this.displayCanvas.height=r??300,this.displayCanvas.style.display="none",this.displayCanvas.dataset.livekitProcessor=this.name,document.body.appendChild(this.displayCanvas)),this.renderContext=this.displayCanvas.getContext("2d"),this.capturedStream=this.displayCanvas.captureStream(),this.canvas=X5(n??300,r??300)}else this.processor=new MediaStreamTrackProcessor({track:this.source}),this.trackGenerator=new MediaStreamTrackGenerator({kind:"video",signalTarget:this.source}),this.canvas=X5(n??300,r??300)}async init(e){if(await this.setup(e),!this.canvas)throw new TypeError("Expected canvas to be defined after setup");await this.transformer.init({outputCanvas:this.canvas,inputElement:this.sourceDummy}),this.useStreamFallback?this.initFallbackPath():this.initStreamProcessorPath()}initStreamProcessorPath(){if(!this.processor||!this.trackGenerator)throw new TypeError("Expected processor and trackGenerator to be defined for stream processor path");this.processor.readable.pipeThrough(this.transformer.transformer).pipeTo(this.trackGenerator.writable).catch(r=>console.error("error when trying to pipe",r)).finally(()=>this.destroy()),this.processedTrack=this.trackGenerator}initFallbackPath(){if(!this.capturedStream||!this.source||!this.canvas||!this.renderContext)throw new TypeError("Missing required components for fallback implementation");this.processedTrack=this.capturedStream.getVideoTracks()[0],this.processingEnabled=!0,this.frameCallback=e=>{if(!this.processingEnabled||!e){e.close();return}const n={enqueue:r=>{this.renderContext&&this.displayCanvas&&(this.renderContext.drawImage(r,0,0,this.displayCanvas.width,this.displayCanvas.height),r.close())}};try{this.transformer.transform(e,n)}catch(r){console.error("Error in transform:",r),e.close()}},this.startRenderLoop()}startRenderLoop(){if(!this.sourceDummy||!(this.sourceDummy instanceof HTMLVideoElement))return;let e=-1,n=0;const r=this.sourceDummy,i=1e3/this.maxFps;let s=this.maxFps,a=[],o=0,l=0,c=0;const d=()=>{if(!this.processingEnabled||!this.sourceDummy||!(this.sourceDummy instanceof HTMLVideoElement))return;if(this.sourceDummy.paused){console.warn("Video is paused, trying to play"),this.sourceDummy.play();return}const f=r.currentTime,p=performance.now(),g=p-n,y=f!==e;if(y){if(o>0){const b=p-o;a.push(b),a.length>10&&a.shift(),a.length>2&&(s=1e3/(a.reduce((R,w)=>R+w,0)/a.length),(typeof window<"u"&&window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&p-c>5e3&&(console.debug(`[${this.name}] Estimated video FPS: ${s.toFixed(1)}, Processing at: ${(l/5).toFixed(1)} FPS`),l=0,c=p))}o=p}const v=g>=i;if(y&&v){e=f,n=p,l++;try{if(r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA){const b=new VideoFrame(r);this.frameCallback?this.frameCallback(b):b.close()}}catch(b){console.error("Error in render loop:",b)}}this.animationFrameId=requestAnimationFrame(d)};this.animationFrameId=requestAnimationFrame(d)}async restart(e){await this.destroy(),await this.init(e)}async restartTransformer(...e){await this.transformer.restart(e[0])}async updateTransformerOptions(...e){await this.transformer.update(e[0])}async destroy(){var e,n,r,i;this.useStreamFallback?(this.processingEnabled=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.displayCanvas&&this.displayCanvas.parentNode&&this.displayCanvas.parentNode.removeChild(this.displayCanvas),(e=this.capturedStream)==null||e.getTracks().forEach(s=>s.stop())):(await((r=(n=this.processor)==null?void 0:n.writableControl)==null?void 0:r.close()),(i=this.trackGenerator)==null||i.stop()),await this.transformer.destroy()}},lVe={"@mediapipe/tasks-vision":"0.10.14"};function $1(t,e){const n=t.TEXTURE0+e;t.activeTexture(n);const r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,r),r}function Jd(t,e,n){const r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw console.error("Shader compile failed:",t.getShaderInfoLog(r)),t.deleteShader(r),new Error("Shader compile failed");return r}function o_(t,e,n){const r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw console.error("Program link failed:",t.getProgramInfoLog(r)),new Error("Program link failed");return r}function D3(t,e,n,r){const i=t.createFramebuffer();if(t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,r,0,t.RGBA,t.UNSIGNED_BYTE,null),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer not complete");return t.bindFramebuffer(t.FRAMEBUFFER,null),i}function cVe(t){const e=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,-1,-1,1,1,1,-1]),t.STATIC_DRAW),e}async function uVe(t,e,n){const r=t.width/t.height,i=e/n;let s=0,a=0,o=t.width,l=t.height;return r>i?(o=Math.round(t.height*i),s=Math.round((t.width-o)/2)):r<i&&(l=Math.round(t.width/i),a=Math.round((t.height-l)/2)),createImageBitmap(t,s,a,o,l,{resizeWidth:e,resizeHeight:n,resizeQuality:"medium"})}var V1;function HS(){return V1||(V1=new ImageData(2,2),V1.data[0]=0,V1.data[1]=0,V1.data[2]=0,V1.data[3]=0),V1}var $L=t=>t,VL=(t=!0)=>`#version 300 es
  in vec2 position;
  out vec2 texCoords;

  void main() {
    texCoords = (position + 1.0) / 2.0;
    texCoords.y = ${t?"1.0 - texCoords.y":"texCoords.y"};
    gl_Position = vec4(position, 0, 1.0);
  }
`,dVe=$L`#version 300 es
  precision mediump float;
  in vec2 texCoords;
  uniform sampler2D u_texture;
  uniform vec2 u_texelSize;
  uniform vec2 u_direction;
  uniform float u_radius;
  out vec4 fragColor;

  void main() {
    float sigma = u_radius;
    float twoSigmaSq = 2.0 * sigma * sigma;
    float totalWeight = 0.0;
    vec3 result = vec3(0.0);
    const int MAX_SAMPLES = 16;
    int radius = int(min(float(MAX_SAMPLES), ceil(u_radius)));

    for (int i = -MAX_SAMPLES; i <= MAX_SAMPLES; ++i) {
      float offset = float(i);
      if (abs(offset) > float(radius)) continue;
      float weight = exp(-(offset * offset) / twoSigmaSq);
      vec2 sampleCoord = texCoords + u_direction * u_texelSize * offset;
      result += texture(u_texture, sampleCoord).rgb * weight;
      totalWeight += weight;
    }

    fragColor = vec4(result / totalWeight, 1.0);
  }
`;function hVe(t){const e=Jd(t,t.VERTEX_SHADER,VL()),n=Jd(t,t.FRAGMENT_SHADER,dVe),r=o_(t,e,n),i={position:t.getAttribLocation(r,"position"),texture:t.getUniformLocation(r,"u_texture"),texelSize:t.getUniformLocation(r,"u_texelSize"),direction:t.getUniformLocation(r,"u_direction"),radius:t.getUniformLocation(r,"u_radius")};return{program:r,shader:n,vertexShader:e,uniforms:i}}function Cq(t,e,n,r,i,s,a,o,l,c){t.useProgram(s),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(a.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a.position);const d=1/n,f=1/r;return t.bindFramebuffer(t.FRAMEBUFFER,l[0]),t.viewport(0,0,n,r),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.uniform1i(a.texture,0),t.uniform2f(a.texelSize,d,f),t.uniform2f(a.direction,1,0),t.uniform1f(a.radius,i),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,l[1]),t.viewport(0,0,n,r),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,c[0]),t.uniform1i(a.texture,0),t.uniform2f(a.direction,0,1),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,null),c[1]}var fVe=$L`#version 300 es
precision mediump float;

in vec2 texCoords;

uniform sampler2D u_texture;
uniform vec2 u_texelSize;    // 1.0 / texture size
uniform vec2 u_direction;    // (1.0, 0.0) for horizontal, (0.0, 1.0) for vertical
uniform float u_radius;      // blur radius in texels

out vec4 fragColor;

void main() {
    vec3 sum = vec3(0.0);
    float count = 0.0;

    // Limit radius to avoid excessive loop cost
    const int MAX_RADIUS = 16;
    int radius = int(min(float(MAX_RADIUS), u_radius));

    for (int i = -MAX_RADIUS; i <= MAX_RADIUS; ++i) {
        if (abs(i) > radius) continue;

        vec2 offset = u_direction * u_texelSize * float(i);
        sum += texture(u_texture, texCoords + offset).rgb;
        count += 1.0;
  }

  fragColor = vec4(sum / count, 1.0);
}
`;function mVe(t){const e=Jd(t,t.VERTEX_SHADER,VL()),n=Jd(t,t.FRAGMENT_SHADER,fVe),r=o_(t,e,n),i={position:t.getAttribLocation(r,"position"),texture:t.getUniformLocation(r,"u_texture"),texelSize:t.getUniformLocation(r,"u_texelSize"),direction:t.getUniformLocation(r,"u_direction"),radius:t.getUniformLocation(r,"u_radius")};return{program:r,vertexShader:e,fragmentShader:n,uniforms:i}}var pVe=$L`#version 300 es
  precision mediump float;
  in vec2 texCoords;
  uniform sampler2D background;
  uniform sampler2D frame;
  uniform sampler2D mask;
  out vec4 fragColor;
  
  void main() {
      
    vec4 frameTex = texture(frame, texCoords);
    vec4 bgTex = texture(background, texCoords);

    float maskVal = texture(mask, texCoords).r;

    // Compute screen-space gradient to detect edge sharpness
    float grad = length(vec2(dFdx(maskVal), dFdy(maskVal)));

    float edgeSoftness = 2.0; // higher = softer
    
    // Create a smooth edge around binary transition
    float smoothAlpha = smoothstep(0.5 - grad * edgeSoftness, 0.5 + grad * edgeSoftness, maskVal);

    // Optional: preserve frame alpha, or override as fully opaque
    vec4 blended = mix(bgTex, vec4(frameTex.rgb, 1.0), 1.0 - smoothAlpha);
    
    fragColor = blended;
  
  }
`;function gVe(t){const e=Jd(t,t.VERTEX_SHADER,VL()),n=Jd(t,t.FRAGMENT_SHADER,pVe),r=o_(t,e,n),i={position:t.getAttribLocation(r,"position")},s={mask:t.getUniformLocation(r,"mask"),frame:t.getUniformLocation(r,"frame"),background:t.getUniformLocation(r,"background"),stepWidth:t.getUniformLocation(r,"u_stepWidth")};return{program:r,vertexShader:e,fragmentShader:n,attribLocations:i,uniformLocations:s}}function vVe(t,e,n){const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=`
      attribute vec2 position;
      varying vec2 v_uv;
      void main() {
        v_uv = (position + 1.0) * 0.5;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,a=`
      precision mediump float;
      varying vec2 v_uv;
      uniform sampler2D u_texture;
      void main() {
        gl_FragColor = texture2D(u_texture, v_uv);
      }
    `,o=Jd(t,t.VERTEX_SHADER,s),l=Jd(t,t.FRAGMENT_SHADER,a),c=o_(t,o,l),d={texture:t.getUniformLocation(c,"u_texture"),position:t.getAttribLocation(c,"position")};return{framebuffer:i,texture:r,program:c,uniforms:d}}function yVe(t,e,n,r,i,s){return t.useProgram(n.program),t.bindFramebuffer(t.FRAMEBUFFER,n.framebuffer),t.viewport(0,0,i,s),t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(n.uniforms.position),t.vertexAttribPointer(n.uniforms.position,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.uniform1i(n.uniforms.texture,0),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,null),n.texture}var bq=t=>{const e=t.getContext("webgl2",{antialias:!0,premultipliedAlpha:!0});let n=null,r=8;const i=4;if(!e){console.error("Failed to create WebGL context");return}e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);const s=gVe(e),a=s.program,o=s.attribLocations.position,{mask:l,frame:c,background:d}=s.uniformLocations,f=hVe(e),p=f.program,g=f.uniforms,y=mVe(e),v=y.program,b=y.uniforms,C=$1(e,0),S=$1(e,1),R=cVe(e);if(!R)throw new Error("Failed to create vertex buffer");let w=[],I=[],k=[],x=0,L=1;w.push($1(e,3)),w.push($1(e,4));const N=Math.floor(t.width/i),D=Math.floor(t.height/i),U=vVe(e,N,D);I.push(D3(e,w[0],N,D)),I.push(D3(e,w[1],N,D));const j=$1(e,5),$=D3(e,j,t.width,t.height);k.push($1(e,6)),k.push($1(e,7));const Z=[D3(e,k[0],t.width,t.height),D3(e,k[1],t.width,t.height)];e.useProgram(a),e.uniform1i(d,0),e.uniform1i(c,1),e.uniform1i(l,2);let V=HS();function z(B){if(B.codedWidth===0||k.length===0)return;const Q=B.displayWidth,pe=B.displayHeight;e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,S),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,B);let ve=C;if(n){const Re=yVe(e,S,U,R,N,D);ve=Cq(e,Re,N,D,n,p,g,R,I,w)}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,C),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,V),ve=C;e.viewport(0,0,Q,pe),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(a),e.bindBuffer(e.ARRAY_BUFFER,R),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(o),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,ve),e.uniform1i(d,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,S),e.uniform1i(c,1),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,k[x]),e.uniform1i(l,2),e.drawArrays(e.TRIANGLES,0,6)}async function K(B){if(V=HS(),B)try{V=await uVe(B,t.width,t.height)}catch(Q){console.error("Error processing background image, falling back to black background:",Q)}e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,C),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,V)}function q(B){n=B?Math.max(1,Math.floor(B/i)):null,K(null)}function G(B){const Q=[$,Z[L]],pe=[j,k[L]];Cq(e,B,t.width,t.height,r,v,b,R,Q,pe),x=L,L=1-L}function J(){e.deleteProgram(a),e.deleteProgram(p),e.deleteProgram(v),e.deleteTexture(C),e.deleteTexture(S),e.deleteTexture(j),e.deleteFramebuffer($);for(const B of w)e.deleteTexture(B);for(const B of I)e.deleteFramebuffer(B);for(const B of k)e.deleteTexture(B);for(const B of Z)e.deleteFramebuffer(B);e.deleteBuffer(R),U&&(e.deleteTexture(U.texture),e.deleteFramebuffer(U.framebuffer),e.deleteProgram(U.program)),V&&(V instanceof ImageBitmap&&V.close(),V=HS()),w=[],I=[],k=[]}return{renderFrame:z,updateMask:G,setBackgroundImage:K,setBlurRadius:q,cleanup:J}},Foe=class{constructor(){this.isDisabled=!1}async init({outputCanvas:t,inputElement:e}){if(!(e instanceof HTMLVideoElement))throw TypeError("Video transformer needs a HTMLVideoElement as input");this.transformer=new TransformStream({transform:(n,r)=>this.transform(n,r)}),this.canvas=t||null,t&&(this.gl=bq(this.canvas||X5(e.videoWidth,e.videoHeight))),this.inputVideo=e,this.isDisabled=!1}async restart({outputCanvas:t,inputElement:e}){var n;this.canvas=t||null,(n=this.gl)==null||n.cleanup(),this.gl=bq(this.canvas||X5(e.videoWidth,e.videoHeight)),this.inputVideo=e,this.isDisabled=!1}async destroy(){var t;this.isDisabled=!0,this.canvas=void 0,(t=this.gl)==null||t.cleanup(),this.gl=void 0}},joe=class extends Foe{constructor(t){super(),this.backgroundImage=null,this.segmentationTimeMs=0,this.options=t,this.update(t)}static get isSupported(){return typeof OffscreenCanvas<"u"&&typeof VideoFrame<"u"&&typeof createImageBitmap<"u"&&!!document.createElement("canvas").getContext("webgl2")}async init({outputCanvas:t,inputElement:e}){var n,r,i,s,a,o;await super.init({outputCanvas:t,inputElement:e});const l=await W1.forVisionTasks((r=(n=this.options.assetPaths)==null?void 0:n.tasksVisionFileSet)!=null?r:`https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@${lVe["@mediapipe/tasks-vision"]}/wasm`);this.imageSegmenter=await Di.createFromOptions(l,{baseOptions:{modelAssetPath:(s=(i=this.options.assetPaths)==null?void 0:i.modelAssetPath)!=null?s:"https://storage.googleapis.com/mediapipe-models/image_segmenter/selfie_segmenter/float16/latest/selfie_segmenter.tflite",delegate:"GPU",...this.options.segmenterOptions},canvas:this.canvas,runningMode:"VIDEO",outputCategoryMask:!0,outputConfidenceMasks:!1}),(a=this.options)!=null&&a.imagePath&&!this.backgroundImage&&await this.loadBackground(this.options.imagePath).catch(c=>console.error("Error while loading processor background image: ",c)),this.options.blurRadius&&((o=this.gl)==null||o.setBlurRadius(this.options.blurRadius))}async destroy(){var t;await super.destroy(),await((t=this.imageSegmenter)==null?void 0:t.close()),this.backgroundImage=null}async loadBackground(t){var e;const n=new Image;await new Promise((i,s)=>{n.crossOrigin="Anonymous",n.onload=()=>i(n),n.onerror=a=>s(a),n.src=t});const r=await createImageBitmap(n);(e=this.gl)==null||e.setBackgroundImage(r)}async transform(t,e){var n,r;try{if(!(t instanceof VideoFrame)||t.codedWidth===0||t.codedHeight===0){console.debug("empty frame detected, ignoring");return}if(this.isDisabled){e.enqueue(t);return}const i=Date.now();if(!this.canvas)throw TypeError("Canvas needs to be initialized first");this.canvas.width=t.displayWidth,this.canvas.height=t.displayHeight;const s=new Promise((o,l)=>{var c;try{let d=performance.now();(c=this.imageSegmenter)==null||c.segmentForVideo(t,d,f=>{this.segmentationTimeMs=performance.now()-d,this.segmentationResults=f,this.updateMask(f.categoryMask),f.close(),o()})}catch(d){l(d)}}),a=performance.now();if(this.drawFrame(t),this.canvas&&this.canvas.width>0&&this.canvas.height>0){const o=new VideoFrame(this.canvas,{timestamp:t.timestamp||i});e.enqueue(o);const l=performance.now()-a,c={processingTimeMs:this.segmentationTimeMs+l,segmentationTimeMs:this.segmentationTimeMs,filterTimeMs:l};(r=(n=this.options).onFrameProcessed)==null||r.call(n,c)}else e.enqueue(t);await s}catch(i){console.error("Error while processing frame: ",i)}finally{t.close()}}async update(t){var e;this.options={...this.options,...t},t.blurRadius?(e=this.gl)==null||e.setBlurRadius(t.blurRadius):t.imagePath&&await this.loadBackground(t.imagePath)}async drawFrame(t){var e;this.gl&&((e=this.gl)==null||e.renderFrame(t))}async updateMask(t){var e;t&&((e=this.gl)==null||e.updateMask(t.getAsWebGLTexture()))}},_Ve=()=>joe.isSupported&&Doe.isSupported;const CVe="/assets/selfie_segmenter-DF05sdL4.tflite",bVe={wasmLoaderPath:new URL("/assets/vision_wasm_internal-CEyeacG0.js",import.meta.url).href,wasmBinaryPath:new URL("/assets/vision_wasm_internal-TmjHuG4I.wasm",import.meta.url).href};class EVe extends joe{async init({outputCanvas:e,inputElement:n}){var r;await Foe.prototype.init.call(this,{outputCanvas:e,inputElement:n}),this.imageSegmenter=await Di.createFromOptions(bVe,{baseOptions:{modelAssetPath:CVe,delegate:"GPU",...this.options.segmenterOptions},canvas:this.canvas,runningMode:"VIDEO",outputCategoryMask:!0,outputConfidenceMasks:!1}),this.options.blurRadius&&((r=this.gl)==null||r.setBlurRadius(this.options.blurRadius))}}const Hoe=u.createContext(void 0);function l_(){const t=u.useContext(Hoe);if(t===void 0)throw new Error("useTrackProcessor must be used within a ProcessorProvider");return t}const $oe=t=>{const{processor:e}=l_();u.useEffect(()=>{t&&(e&&!t.getProcessor()&&t.setProcessor(e),!e&&t.getProcessor()&&t.stopProcessor())},[e,t])},SVe=({children:t})=>{const[e]=Gr(nse),n=u.useMemo(()=>_Ve(),[]),r=u.useMemo(()=>new Doe(new EVe({blurRadius:15}),"background-blur"),[]),i=u.useMemo(()=>({supported:n,processor:n&&e?r:void 0}),[n,e,r]);return E.jsx(Hoe.Provider,{value:i,children:t})},BL="audio",qL=({open:t,onDismiss:e,tab:n,onTabChange:r,client:i,roomId:s,livekitRoom:a})=>{const{t:o}=it(),l=()=>{const{supported:I}=l_(),[k,x]=Gr(nse);return E.jsxs(E.Fragment,{children:[E.jsx("h4",{children:o("settings.background_blur_header")}),E.jsx(en,{children:E.jsx(hi,{id:"activateBackgroundBlur",label:o("settings.background_blur_label"),description:I?"":o("settings.blur_not_supported_by_browser"),type:"checkbox",checked:!!k,onChange:L=>x(L.target.checked),disabled:!I})})]})},c=u1();Xje(c,t);const[d,f]=Gr(sse),[p,g]=u.useState(d);Gr(kP),RP();const{controlledAudioDevices:y}=Yo(),v=Qe(wse),b={key:"audio",name:o("common.audio"),content:E.jsx(E.Fragment,{children:E.jsxs(d$,{children:[!y&&E.jsx(kS,{device:c.audioInput,title:o("settings.devices.microphone"),numberedLabel:I=>o("settings.devices.microphone_numbered",{n:I})}),v&&y&&E.jsx(Bt,{onClick:I=>{var k,x,L,N;I.preventDefault(),(x=(k=window.controls).showNativeAudioDevicePicker)==null||x.call(k),(N=(L=window.controls).showNativeOutputDevicePicker)==null||N.call(L)},children:o("settings.devices.change_device_button")}),E.jsx(kS,{device:c.audioOutput,title:o("settings.devices.speaker"),numberedLabel:I=>o("settings.devices.speaker_numbered",{n:I})}),E.jsxs("div",{className:iB.volumeSlider,children:[E.jsx("label",{children:o("settings.audio_tab.effect_volume_label")}),E.jsx("p",{children:o("settings.audio_tab.effect_volume_description")}),E.jsx(Vse,{label:o("video_tile.volume"),value:p,onValueChange:g,onValueCommit:f,min:0,max:1,step:.01})]})]})})},C={key:"video",name:o("common.video"),content:E.jsxs(E.Fragment,{children:[E.jsx(d$,{children:E.jsx(kS,{device:c.videoInput,title:o("settings.devices.camera"),numberedLabel:I=>o("settings.devices.camera_numbered",{n:I})})}),E.jsx(BM,{}),E.jsx(l,{})]})},S={key:"preferences",name:o("common.preferences"),content:E.jsx(eHe,{})},R={key:"profile",name:o("common.profile"),content:E.jsx(Mje,{client:i})},w=[b,C];return Xe===null&&w.push(R),w.push(S),E.jsx(Yh,{title:o("common.settings"),className:iB.settingsModal,open:t,onDismiss:e,tabbed:!0,children:E.jsx(lje,{label:o("common.settings"),tab:n,onTabChange:r,tabs:w})})},wVe=(t,e)=>u.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("mask",{id:"path-1-inside-1_898_2641",fill:"white"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1502 20.1214C15.3946 21.3074 13.2782 22 11 22C8.52367 22 6.23845 21.1817 4.4 19.8008C1.72821 17.794 0 14.5988 0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 14.797 20.0762 18.1446 17.1502 20.1214ZM11 11.55C12.8225 11.55 14.3 9.94942 14.3 7.975C14.3 6.00058 12.8225 4.4 11 4.4C9.17746 4.4 7.7 6.00058 7.7 7.975C7.7 9.94942 9.17746 11.55 11 11.55ZM11 19.8C13.3782 19.8 15.536 18.8566 17.1197 17.3237C16.1403 14.9056 13.7693 13.2 11 13.2C8.23066 13.2 5.85969 14.9056 4.88028 17.3237C6.46399 18.8566 8.62183 19.8 11 19.8Z"})),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1502 20.1214C15.3946 21.3074 13.2782 22 11 22C8.52367 22 6.23845 21.1817 4.4 19.8008C1.72821 17.794 0 14.5988 0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 14.797 20.0762 18.1446 17.1502 20.1214ZM11 11.55C12.8225 11.55 14.3 9.94942 14.3 7.975C14.3 6.00058 12.8225 4.4 11 4.4C9.17746 4.4 7.7 6.00058 7.7 7.975C7.7 9.94942 9.17746 11.55 11 11.55ZM11 19.8C13.3782 19.8 15.536 18.8566 17.1197 17.3237C16.1403 14.9056 13.7693 13.2 11 13.2C8.23066 13.2 5.85969 14.9056 4.88028 17.3237C6.46399 18.8566 8.62183 19.8 11 19.8Z",fill:"white"}),u.createElement("path",{d:"M17.1502 20.1214L17.9339 21.2814L17.1502 20.1214ZM4.4 19.8008L3.55919 20.9202H3.55919L4.4 19.8008ZM17.1197 17.3237L18.0934 18.3296L18.7717 17.6731L18.4173 16.7981L17.1197 17.3237ZM4.88028 17.3237L3.58268 16.7981L3.22829 17.6731L3.90659 18.3296L4.88028 17.3237ZM11 23.4C13.5662 23.4 15.9541 22.619 17.9339 21.2814L16.3665 18.9613C14.835 19.9959 12.9902 20.6 11 20.6V23.4ZM3.55919 20.9202C5.63176 22.477 8.21011 23.4 11 23.4V20.6C8.83723 20.6 6.84514 19.8865 5.24081 18.6814L3.55919 20.9202ZM-1.4 11C-1.4 15.0577 0.55052 18.6603 3.55919 20.9202L5.24081 18.6814C2.90591 16.9276 1.4 14.1399 1.4 11H-1.4ZM11 -1.4C4.15167 -1.4 -1.4 4.15167 -1.4 11H1.4C1.4 5.69807 5.69807 1.4 11 1.4V-1.4ZM23.4 11C23.4 4.15167 17.8483 -1.4 11 -1.4V1.4C16.3019 1.4 20.6 5.69807 20.6 11H23.4ZM17.9339 21.2814C21.2288 19.0554 23.4 15.2815 23.4 11H20.6C20.6 14.3124 18.9236 17.2337 16.3665 18.9613L17.9339 21.2814ZM12.9 7.975C12.9 9.28384 11.9459 10.15 11 10.15V12.95C13.6991 12.95 15.7 10.615 15.7 7.975H12.9ZM11 5.8C11.9459 5.8 12.9 6.66616 12.9 7.975H15.7C15.7 5.335 13.6991 3 11 3V5.8ZM9.1 7.975C9.1 6.66616 10.0541 5.8 11 5.8V3C8.30086 3 6.3 5.335 6.3 7.975H9.1ZM11 10.15C10.0541 10.15 9.1 9.28384 9.1 7.975H6.3C6.3 10.615 8.30086 12.95 11 12.95V10.15ZM16.146 16.3178C14.8129 17.6081 13.0004 18.4 11 18.4V21.2C13.756 21.2 16.2591 20.1051 18.0934 18.3296L16.146 16.3178ZM11 14.6C13.1797 14.6 15.0494 15.9415 15.8221 17.8493L18.4173 16.7981C17.2312 13.8697 14.359 11.8 11 11.8V14.6ZM6.17788 17.8493C6.95058 15.9415 8.8203 14.6 11 14.6V11.8C7.64102 11.8 4.7688 13.8697 3.58268 16.7981L6.17788 17.8493ZM11 18.4C8.99963 18.4 7.18709 17.6081 5.85397 16.3178L3.90659 18.3296C5.74088 20.1051 8.24402 21.2 11 21.2V18.4Z",fill:"white",mask:"url(#path-1-inside-1_898_2641)"})),Eq=u.forwardRef(wVe),kVe=(t,e)=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0988 9.01625C20.3188 9.59375 20.8825 9.97875 21.5013 9.97875C22.3263 9.97875 23 10.6525 23 11.4775V12.5225C23 13.3475 22.3263 14.0213 21.5013 14.0213C20.8825 14.0213 20.3188 14.4062 20.0988 14.9838C20.0806 15.0292 20.0624 15.0753 20.0441 15.1218C19.9792 15.2863 19.9125 15.4555 19.8375 15.6163C19.5763 16.18 19.7 16.84 20.14 17.28C20.7313 17.8575 20.7313 18.8062 20.14 19.3975L19.3975 20.14C18.82 20.7313 17.8713 20.7313 17.28 20.14C16.8538 19.7 16.18 19.5763 15.6163 19.8375C15.41 19.9338 15.2037 20.0163 14.9838 20.0988C14.4062 20.3188 14.0213 20.8825 14.0213 21.5013C14.0213 22.3263 13.3475 23 12.5225 23H11.4775C10.6525 23 9.97875 22.3263 9.97875 21.5013C9.97875 20.8825 9.59375 20.3188 9.01625 20.0988C8.97079 20.0806 8.92466 20.0624 8.87815 20.044C8.71368 19.9792 8.54454 19.9125 8.38375 19.8375C7.82 19.5763 7.16 19.7 6.72 20.14C6.1425 20.7313 5.19375 20.7313 4.6025 20.14L3.86 19.3975C3.26875 18.82 3.26875 17.8713 3.86 17.28C4.3 16.8538 4.42375 16.18 4.1625 15.6163C4.06625 15.41 3.98375 15.2037 3.90125 14.9838C3.68125 14.4062 3.1175 14.0213 2.49875 14.0213C1.67375 14.0213 1 13.3475 1 12.5225V11.4775C1 10.6525 1.67375 9.97875 2.49875 9.97875C3.1175 9.97875 3.68125 9.59375 3.90125 9.01625C3.94464 8.87742 3.99897 8.74406 4.0539 8.60926C4.086 8.53046 4.11831 8.45117 4.14875 8.37C4.41 7.80625 4.28625 7.14625 3.84625 6.70625C3.255 6.12875 3.255 5.18 3.84625 4.58875L4.6025 3.86C5.18 3.26875 6.12875 3.26875 6.72 3.86C7.14625 4.3 7.82 4.42375 8.38375 4.1625C8.59 4.06625 8.79625 3.97 9.01625 3.90125C9.59375 3.68125 9.97875 3.1175 9.97875 2.49875C9.97875 1.67375 10.6525 1 11.4775 1H12.5225C13.3475 1 14.0213 1.67375 14.0213 2.49875C14.0213 3.13125 14.4062 3.68125 14.9838 3.90125C15.0292 3.91943 15.0753 3.93762 15.1218 3.95595C15.2863 4.02079 15.4555 4.08746 15.6163 4.1625C16.18 4.42375 16.84 4.3 17.28 3.86C17.8575 3.26875 18.8062 3.26875 19.3975 3.86L20.14 4.6025C20.7313 5.18 20.7313 6.12875 20.14 6.72C19.7 7.14625 19.5763 7.82 19.8375 8.38375C19.9338 8.59 20.0163 8.79625 20.0988 9.01625ZM12 17.5C8.96125 17.5 6.5 15.0387 6.5 12C6.5 8.96125 8.96125 6.5 12 6.5C15.0387 6.5 17.5 8.96125 17.5 12C17.5 15.0387 15.0387 17.5 12 17.5Z",fill:"#ffffff"})),TVe=u.forwardRef(kVe),RVe=(t,e)=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.49966 2.38889C7.49966 1.89797 7.89763 1.5 8.38855 1.5H20.1108C20.6017 1.5 20.9997 1.89797 20.9997 2.38889V21.6111C20.9997 22.102 20.6017 22.5 20.1108 22.5H8.38855C7.89763 22.5 7.49966 22.102 7.49966 21.6111V12.6667H7.49089H7.4821H7.47331H7.46452H7.45573H7.44694H7.43815H7.42936H7.42057H7.41178H7.403H7.39421H7.38542H7.37663H7.36784H7.35905H7.35026H7.34147H7.33268H7.32389H7.3151H7.30632H7.29753H7.28874H7.27995H7.27116H7.26237H7.25358H7.24479H7.236H7.22721H7.21842H7.20964H7.20085H7.19206H7.18327H7.17448H7.16569H7.1569H7.14811H7.13932H7.13053H7.12175H7.11296H7.10417H7.09538H7.08659H7.0778H7.06901H7.06022H7.05143H7.04264H7.03385H7.02507H7.01628H7.00749H6.9987H6.98991H6.98112H6.97233H6.96354H6.95475H6.94596H6.93717H6.92839H6.9196H6.91081H6.90202H6.89323H6.88444H6.87565H6.86686H6.85807H6.84928H6.8405H6.83171H6.82292H6.81413H6.80534H6.79655H6.78776H6.77897H6.77018H6.76139H6.7526H6.74382H6.73503H6.72624H6.71745H6.70866H6.69987H6.69108H6.68229H6.6735H6.66471H6.65592H6.64714H6.63835H6.62956H6.62077H6.61198H6.60319H6.5944H6.58561H6.57682H6.56803H6.55925H6.55046H6.54167H6.53288H6.52409H6.5153H6.50651H6.49772H6.48893H6.48014H6.47135H6.46257H6.45378H6.44499H6.4362H6.42741H6.41862H6.40983H6.40104H6.39225H6.38346H6.37467H6.36589H6.3571H6.34831H6.33952H6.33073H6.32194H6.31315H6.30436H6.29557H6.28678H6.27799H6.26921H6.26042H6.25163H6.24284H6.23405H6.22526H6.21647H6.20768H6.19889H6.1901H6.18132H6.17253H6.16374H6.15495H6.14616H6.13737H6.12858H6.11979H6.111H6.10221H6.09342H6.08464H6.07585H6.06706H6.05827H6.04948H6.04069H6.0319H6.02311H6.01432H6.00553H5.99674H5.98796H5.97917H5.97038H5.96159H5.9528H5.94401H5.93522H5.92643H5.91764H5.90885H5.90007H5.89128H5.88249H5.8737H5.86491H5.85612H5.84733H5.83854H5.82975H5.82096H5.81217H5.80339H5.7946H5.78581H5.77702H5.76823H5.75944H5.75065H5.74186H5.73307H5.72428H5.71549H5.70671H5.69792H5.68913H5.68034H5.67155H5.66276H5.65397H5.64518H5.63639H5.6276H5.61882H5.61003H5.60124H5.59245H5.58366H5.57487H5.56608H5.55729H5.5485H5.53971H5.53092H5.52214H5.51335H5.50456H5.49577H5.48698H5.47819H5.4694H5.46061H5.45182H5.44303H5.43424H5.42546H5.41667H5.40788H5.39909H5.3903H5.38151H5.37272H5.36393H5.35514H5.34635H5.33757H5.32878H5.31999H5.3112H5.30241H5.29362H5.28483H5.27604H5.26725H5.25846H5.24967H5.24089H5.2321H5.22331H5.21452H5.20573H5.19694H5.18815H5.17936H5.17057H5.16178H5.15299H5.14421H5.13542H5.12663H5.11784H5.10905H5.10026H5.09147H5.08268H5.07389H5.0651H5.05632H5.04753H5.03874H5.02995H5.02116H5.01237H5.00358H4.99479H4.986H4.97721H4.96842H4.95964H4.95085H4.94206H4.93327H4.92448H4.91569H4.9069H4.89811H4.88932H4.88053H4.87174H4.86296H4.85417H4.84538H4.83659H4.8278H4.81901H4.81022H4.80143H4.79264H4.78385H4.77507H4.76628H4.75749H4.7487H4.73991H4.73112H4.72233H4.71354H4.70475H4.69596H4.68717H4.67839H4.6696H4.66081H4.65202H4.64323H4.63444H4.62565H4.61686H4.60807H4.59928H4.59049H4.58171H4.57292H4.56413H4.55534H4.54655H4.53776H4.52897H4.52018H4.51139H4.5026H4.49382H4.48503H4.47624H4.46745H4.45866H4.44987H4.44108H4.43229H4.4235H4.41471H4.40592H4.39714H4.38835H4.37956H4.37077H4.36198H4.35319H4.3444H4.33561H4.32682H4.31803H4.30924H4.30046H4.29167H4.28288H4.27409H4.2653H4.25651H4.24772H4.23893H4.23014H4.22135H4.21257H4.20378H4.19499H4.1862H4.17741H4.16862H4.15983H4.15104H4.14225H4.13346H4.12467H4.11589H4.1071H4.09831H4.08952H4.08073H4.07194H4.06315H4.05436H4.04557H4.03678H4.02799H4.01921H4.01042H4.00163H3.99284H3.98405H3.97526H3.96647H3.95768H3.94889H3.9401H3.93132H3.92253H3.91374H3.90495H3.89616H3.88737H3.87858H3.86979H3.861H3.85221H3.84342H3.83464H3.82585H3.81706H3.80827H3.79948H3.79069H3.7819H3.77311H3.76432H3.75553H3.74674H3.73796H3.72917H3.72038H3.71159H3.7028H3.69401H3.68522H3.67643H3.66764H3.65885H3.65007H3.64128H3.63249H3.6237H3.61491H3.60612H3.59733H3.58854H3.57975H3.57096H3.56217H3.55339H3.5446H3.53581H3.52702H3.51823H3.50944H3.50065H3.49186H3.48307H3.47428H3.46549H3.45671H3.44792H3.43913H3.43034H3.42155H3.41276H3.40397H3.39518H3.38639H3.3776H3.36882H3.36003H3.35124H3.34245H3.33366H3.32487H3.31608H3.30729H3.2985H3.28971H3.28092H3.27214H3.26335H3.25456H3.24577H3.23698H3.22819H3.2194H3.21061H3.20182H3.19303H3.18424H3.17546H3.16667H3.15788H3.14909H3.1403H3.13151H3.12272H3.11393H3.10514H3.09635H3.08757H3.07878H3.06999H3.0612H3.05241H3.04362H3.03483H3.02604H3.01725H3.00846H2.99967C2.63148 12.6667 2.33301 12.3682 2.33301 12C2.33301 11.6318 2.63148 11.3333 2.99967 11.3333H3.00846H3.01725H3.02604H3.03483H3.04362H3.05241H3.0612H3.06999H3.07878H3.08757H3.09635H3.10514H3.11393H3.12272H3.13151H3.1403H3.14909H3.15788H3.16667H3.17546H3.18424H3.19303H3.20182H3.21061H3.2194H3.22819H3.23698H3.24577H3.25456H3.26335H3.27214H3.28092H3.28971H3.2985H3.30729H3.31608H3.32487H3.33366H3.34245H3.35124H3.36003H3.36882H3.3776H3.38639H3.39518H3.40397H3.41276H3.42155H3.43034H3.43913H3.44792H3.45671H3.46549H3.47428H3.48307H3.49186H3.50065H3.50944H3.51823H3.52702H3.53581H3.5446H3.55339H3.56217H3.57096H3.57975H3.58854H3.59733H3.60612H3.61491H3.6237H3.63249H3.64128H3.65007H3.65885H3.66764H3.67643H3.68522H3.69401H3.7028H3.71159H3.72038H3.72917H3.73796H3.74674H3.75553H3.76432H3.77311H3.7819H3.79069H3.79948H3.80827H3.81706H3.82585H3.83464H3.84342H3.85221H3.861H3.86979H3.87858H3.88737H3.89616H3.90495H3.91374H3.92253H3.93132H3.9401H3.94889H3.95768H3.96647H3.97526H3.98405H3.99284H4.00163H4.01042H4.01921H4.02799H4.03678H4.04557H4.05436H4.06315H4.07194H4.08073H4.08952H4.09831H4.1071H4.11589H4.12467H4.13346H4.14225H4.15104H4.15983H4.16862H4.17741H4.1862H4.19499H4.20378H4.21257H4.22135H4.23014H4.23893H4.24772H4.25651H4.2653H4.27409H4.28288H4.29167H4.30046H4.30924H4.31803H4.32682H4.33561H4.3444H4.35319H4.36198H4.37077H4.37956H4.38835H4.39714H4.40592H4.41471H4.4235H4.43229H4.44108H4.44987H4.45866H4.46745H4.47624H4.48503H4.49382H4.5026H4.51139H4.52018H4.52897H4.53776H4.54655H4.55534H4.56413H4.57292H4.58171H4.59049H4.59928H4.60807H4.61686H4.62565H4.63444H4.64323H4.65202H4.66081H4.6696H4.67839H4.68717H4.69596H4.70475H4.71354H4.72233H4.73112H4.73991H4.7487H4.75749H4.76628H4.77507H4.78385H4.79264H4.80143H4.81022H4.81901H4.8278H4.83659H4.84538H4.85417H4.86296H4.87174H4.88053H4.88932H4.89811H4.9069H4.91569H4.92448H4.93327H4.94206H4.95085H4.95964H4.96842H4.97721H4.986H4.99479H5.00358H5.01237H5.02116H5.02995H5.03874H5.04753H5.05631H5.0651H5.07389H5.08268H5.09147H5.10026H5.10905H5.11784H5.12663H5.13542H5.14421H5.15299H5.16178H5.17057H5.17936H5.18815H5.19694H5.20573H5.21452H5.22331H5.2321H5.24089H5.24967H5.25846H5.26725H5.27604H5.28483H5.29362H5.30241H5.3112H5.31999H5.32878H5.33757H5.34635H5.35514H5.36393H5.37272H5.38151H5.3903H5.39909H5.40788H5.41667H5.42546H5.43424H5.44303H5.45182H5.46061H5.4694H5.47819H5.48698H5.49577H5.50456H5.51335H5.52214H5.53092H5.53971H5.5485H5.55729H5.56608H5.57487H5.58366H5.59245H5.60124H5.61003H5.61882H5.6276H5.63639H5.64518H5.65397H5.66276H5.67155H5.68034H5.68913H5.69792H5.70671H5.71549H5.72428H5.73307H5.74186H5.75065H5.75944H5.76823H5.77702H5.78581H5.7946H5.80339H5.81217H5.82096H5.82975H5.83854H5.84733H5.85612H5.86491H5.8737H5.88249H5.89128H5.90007H5.90885H5.91764H5.92643H5.93522H5.94401H5.9528H5.96159H5.97038H5.97917H5.98796H5.99674H6.00553H6.01432H6.02311H6.0319H6.04069H6.04948H6.05827H6.06706H6.07585H6.08464H6.09342H6.10221H6.111H6.11979H6.12858H6.13737H6.14616H6.15495H6.16374H6.17253H6.18132H6.1901H6.19889H6.20768H6.21647H6.22526H6.23405H6.24284H6.25163H6.26042H6.26921H6.27799H6.28678H6.29557H6.30436H6.31315H6.32194H6.33073H6.33952H6.34831H6.3571H6.36589H6.37467H6.38346H6.39225H6.40104H6.40983H6.41862H6.42741H6.4362H6.44499H6.45378H6.46257H6.47135H6.48014H6.48893H6.49772H6.50651H6.5153H6.52409H6.53288H6.54167H6.55046H6.55925H6.56803H6.57682H6.58561H6.5944H6.60319H6.61198H6.62077H6.62956H6.63835H6.64714H6.65592H6.66471H6.6735H6.68229H6.69108H6.69987H6.70866H6.71745H6.72624H6.73503H6.74382H6.7526H6.76139H6.77018H6.77897H6.78776H6.79655H6.80534H6.81413H6.82292H6.83171H6.8405H6.84928H6.85807H6.86686H6.87565H6.88444H6.89323H6.90202H6.91081H6.9196H6.92839H6.93717H6.94596H6.95475H6.96354H6.97233H6.98112H6.98991H6.9987H7.00749H7.01628H7.02507H7.03385H7.04264H7.05143H7.06022H7.06901H7.0778H7.08659H7.09538H7.10417H7.11296H7.12175H7.13053H7.13932H7.14811H7.1569H7.16569H7.17448H7.18327H7.19206H7.20085H7.20964H7.21842H7.22721H7.236H7.24479H7.25358H7.26237H7.27116H7.27995H7.28874H7.29753H7.30632H7.3151H7.32389H7.33268H7.34147H7.35026H7.35905H7.36784H7.37663H7.38542H7.39421H7.403H7.41178H7.42057H7.42936H7.43815H7.44694H7.45573H7.46452H7.47331H7.4821H7.49089H7.49966V2.38889ZM13.3687 6.24853C13.1172 5.9796 12.7095 5.9796 12.458 6.24853C12.2065 6.51747 12.2065 6.9535 12.458 7.22243L16.3022 11.3336L16.2894 11.3336L16.2726 11.3336L16.2558 11.3336L16.239 11.3335L16.2223 11.3335L16.2055 11.3335L16.1887 11.3335L16.1719 11.3335L16.1552 11.3334L16.1384 11.3334L16.1216 11.3334L16.1048 11.3334L16.088 11.3334L16.0713 11.3333L16.0545 11.3333L16.0377 11.3333L16.0209 11.3333L16.0041 11.3333L15.9874 11.3332L15.9706 11.3332L15.9538 11.3332L15.937 11.3332L15.9202 11.3332L15.9035 11.3331L15.8867 11.3331L15.8699 11.3331L15.8531 11.3331L15.8364 11.3331L15.8196 11.333L15.8028 11.333L15.786 11.333L15.7692 11.333L15.7525 11.333L15.7357 11.3329L15.7189 11.3329L15.7021 11.3329L15.6853 11.3329L15.6686 11.3329L15.6518 11.3328L15.635 11.3328L15.6182 11.3328L15.6014 11.3328L15.5847 11.3328L15.5679 11.3327L15.5511 11.3327L15.5343 11.3327L15.5175 11.3327L15.5008 11.3327L15.484 11.3326L15.4672 11.3326L15.4504 11.3326L15.4337 11.3326L15.4169 11.3326L15.4001 11.3325L15.3833 11.3325L15.3665 11.3325L15.3498 11.3325L15.333 11.3324L15.3162 11.3324L15.2994 11.3324L15.2826 11.3324L15.2659 11.3324L15.2491 11.3323L15.2323 11.3323L15.2155 11.3323L15.1987 11.3323L15.182 11.3323L15.1652 11.3322L15.1484 11.3322L15.1316 11.3322L15.1148 11.3322L15.0981 11.3322L15.0813 11.3321L15.0645 11.3321L15.0477 11.3321L15.031 11.3321L15.0142 11.3321L14.9974 11.332L14.9806 11.332L14.9638 11.332L14.9471 11.332L14.9303 11.332L14.9135 11.3319L14.8967 11.3319L14.8799 11.3319L14.8632 11.3319L14.8464 11.3319L14.8296 11.3318L14.8128 11.3318L14.796 11.3318L14.7793 11.3318L14.7625 11.3318L14.7457 11.3317L14.7289 11.3317L14.7122 11.3317L14.6954 11.3317L14.6786 11.3317L14.6618 11.3316L14.645 11.3316L14.6283 11.3316L14.6115 11.3316L14.5947 11.3316L14.5779 11.3315L14.5611 11.3315L14.5444 11.3315L14.5276 11.3315L14.5108 11.3315L14.494 11.3314L14.4772 11.3314L14.4605 11.3314L14.4437 11.3314L14.4269 11.3314L14.4101 11.3313L14.3933 11.3313L14.3766 11.3313L14.3598 11.3313L14.343 11.3313L14.3262 11.3312L14.3095 11.3312L14.2927 11.3312L14.2759 11.3312L14.2591 11.3312L14.2423 11.3311L14.2256 11.3311L14.2088 11.3311L14.192 11.3311L14.1752 11.3311L14.1584 11.331L14.1417 11.331L14.1249 11.331L14.1081 11.331L14.0913 11.331L14.0745 11.3309L14.0578 11.3309L14.041 11.3309L14.0242 11.3309L14.0074 11.3309L13.9906 11.3308L13.9739 11.3308L13.9571 11.3308L13.9403 11.3308L13.9235 11.3308L13.9068 11.3307L13.89 11.3307L13.8732 11.3307L13.8564 11.3307L13.8396 11.3307L13.8229 11.3306L13.8061 11.3306L13.7893 11.3306L13.7725 11.3306L13.7557 11.3306L13.739 11.3305L13.7222 11.3305L13.7054 11.3305L13.6886 11.3305L13.6718 11.3305L13.6551 11.3304L13.6383 11.3304L13.6215 11.3304L13.6047 11.3304L13.5879 11.3304L13.5712 11.3303L13.5544 11.3303L13.5376 11.3303L13.5208 11.3303L13.5041 11.3303L13.4873 11.3302L13.4705 11.3302L13.4537 11.3302L13.4369 11.3302L13.4202 11.3302L13.4034 11.3301L13.3866 11.3301L13.3698 11.3301L13.353 11.3301L13.3363 11.33L13.3195 11.33L13.3027 11.33L13.2859 11.33L13.2691 11.33L13.2524 11.3299L13.2356 11.3299L13.2188 11.3299L13.202 11.3299L13.1853 11.3299L13.1685 11.3298L13.1517 11.3298L13.1349 11.3298L13.1181 11.3298L13.1014 11.3298L13.0846 11.3297L13.0678 11.3297L13.051 11.3297L13.0342 11.3297L13.0175 11.3297L13.0007 11.3296L12.9839 11.3296L12.9671 11.3296L12.9503 11.3296L12.9336 11.3296L12.9168 11.3295L12.9 11.3295L12.8832 11.3295L12.8664 11.3295L12.8497 11.3295L12.8329 11.3294L12.8161 11.3294L12.7993 11.3294L12.7826 11.3294L12.7658 11.3294L12.749 11.3293L12.7322 11.3293L12.7154 11.3293L12.6987 11.3293L12.6819 11.3293L12.6651 11.3292L12.6483 11.3292L12.6315 11.3292L12.6148 11.3292L12.598 11.3292L12.5812 11.3291L12.5644 11.3291L12.5476 11.3291L12.5309 11.3291L12.5141 11.3291L12.4973 11.329L12.4805 11.329L12.4637 11.329L12.447 11.329L12.4302 11.329L12.4134 11.3289L12.3966 11.3289L12.3799 11.3289L12.3631 11.3289L12.3463 11.3289L12.3295 11.3288L12.3127 11.3288L12.296 11.3288L12.2792 11.3288L12.2624 11.3288L12.2456 11.3287L12.2288 11.3287L12.2121 11.3287L12.1953 11.3287L12.1785 11.3287L12.1617 11.3286L12.1449 11.3286L12.1282 11.3286L12.1114 11.3286L12.0946 11.3286L12.0778 11.3285L12.0611 11.3285L12.0443 11.3285L12.0275 11.3285L12.0107 11.3285L11.9939 11.3284L11.9772 11.3284L11.9604 11.3284L11.9436 11.3284L11.9268 11.3284L11.91 11.3283L11.8933 11.3283L11.8765 11.3283L11.8597 11.3283L11.8429 11.3283L11.8261 11.3282L11.8094 11.3282L11.7926 11.3282L11.7758 11.3282L11.759 11.3282L11.7422 11.3281L11.7255 11.3281L11.7087 11.3281L11.6919 11.3281L11.6751 11.3281L11.6583 11.328L11.6416 11.328L11.6248 11.328L11.608 11.328L11.5912 11.328L11.5745 11.3279L11.5577 11.3279L11.5409 11.3279L11.5241 11.3279L11.5073 11.3279L11.4906 11.3278L11.4738 11.3278L11.457 11.3278L11.4402 11.3278L11.4234 11.3278L11.4067 11.3277L11.3899 11.3277L11.3731 11.3277L11.3563 11.3277L11.3395 11.3277L11.3228 11.3276L11.306 11.3276L11.2892 11.3276L11.2724 11.3276L11.2557 11.3275L11.2389 11.3275L11.2221 11.3275L11.2053 11.3275L11.1885 11.3275L11.1718 11.3274L11.155 11.3274L11.1382 11.3274L11.1214 11.3274L11.1046 11.3274L11.0879 11.3273L11.0711 11.3273L11.0543 11.3273L11.0375 11.3273L11.0207 11.3273L11.004 11.3272L10.9872 11.3272L10.9704 11.3272L10.9536 11.3272L10.9368 11.3272L10.9201 11.3271L10.9033 11.3271L10.8865 11.3271L10.8697 11.3271L10.853 11.3271L10.8362 11.327L10.8194 11.327L10.8026 11.327L10.7858 11.327L10.7691 11.327L10.7523 11.3269L10.7355 11.3269L10.7187 11.3269L10.7019 11.3269L10.6852 11.3269L10.6684 11.3268L10.6516 11.3268L10.6348 11.3268L10.618 11.3268L10.6013 11.3268L10.5845 11.3267L10.5677 11.3267L10.5509 11.3267L10.5341 11.3267L10.5174 11.3267L10.5006 11.3266L10.4838 11.3266L10.467 11.3266L10.4503 11.3266L10.4335 11.3266L10.4167 11.3265L10.3999 11.3265L10.3831 11.3265L10.3664 11.3265L10.3496 11.3265L10.3328 11.3264L10.316 11.3264L10.2992 11.3264L10.2825 11.3264L10.2657 11.3264L10.2489 11.3263L10.2321 11.3263L10.2153 11.3263L10.1986 11.3263L10.1818 11.3263L10.165 11.3262L10.1482 11.3262L10.1315 11.3262L10.1147 11.3262L10.0979 11.3262L10.0811 11.3261L10.0643 11.3261L10.0476 11.3261L10.0308 11.3261L10.014 11.3261L9.99722 11.326L9.98044 11.326L9.96366 11.326L9.94688 11.326L9.9301 11.326L9.91332 11.3259L9.89654 11.3259L9.87977 11.3259L9.86299 11.3259L9.84621 11.3259L9.82943 11.3258L9.81265 11.3258L9.79587 11.3258L9.77909 11.3258L9.76231 11.3258L9.74553 11.3257L9.72875 11.3257L9.71197 11.3257L9.69519 11.3257L9.67841 11.3257L9.66163 11.3256L9.64486 11.3256L9.62808 11.3256L9.6113 11.3256L9.59452 11.3256L9.57774 11.3255L9.56096 11.3255L9.54418 11.3255L9.5274 11.3255L9.51062 11.3255L9.49384 11.3254L9.47706 11.3254L9.46029 11.3254L9.44351 11.3254L9.42673 11.3254L9.40995 11.3253L9.39317 11.3253L9.37639 11.3253L9.35961 11.3253L9.34283 11.3253L9.32605 11.3252L9.30927 11.3252L9.29249 11.3252L9.27572 11.3252L9.25894 11.3252L9.24216 11.3251L9.22538 11.3251L9.2086 11.3251L9.19182 11.3251L9.17504 11.325L9.15826 11.325L9.14148 11.325L9.1247 11.325L9.10792 11.325L9.09115 11.3249L9.07437 11.3249L9.05759 11.3249L9.04081 11.3249L9.02403 11.3249L9.00725 11.3248L8.99047 11.3248L8.97369 11.3248L8.95691 11.3248L8.94013 11.3248L8.92335 11.3247L8.90658 11.3247L8.8898 11.3247L8.87302 11.3247L8.85624 11.3247L8.83946 11.3246L8.82268 11.3246L8.8059 11.3246L8.78912 11.3246L8.77234 11.3246L8.75556 11.3245L8.73878 11.3245L8.722 11.3245L8.70523 11.3245L8.68845 11.3245L8.67167 11.3244L8.65489 11.3244L8.63811 11.3244L8.62133 11.3244L8.60455 11.3244L8.58777 11.3243L8.57099 11.3243L8.55421 11.3243L8.53743 11.3243L8.52066 11.3243L8.50388 11.3242L8.4871 11.3242L8.47032 11.3242L8.45354 11.3242L8.43676 11.3242L8.41998 11.3241L8.4032 11.3241L8.38642 11.3241L8.36964 11.3241L8.35286 11.3241L8.33608 11.324L8.31931 11.324L8.30253 11.324L8.28575 11.324L8.26897 11.324L8.25219 11.3239L8.23541 11.3239L8.21863 11.3239L8.20185 11.3239L8.18507 11.3239L8.16829 11.3238L8.15151 11.3238L8.13474 11.3238L8.11796 11.3238L8.10118 11.3238L8.0844 11.3237L8.06762 11.3237L8.05084 11.3237L8.03406 11.3237L8.01728 11.3237L8.0005 11.3236L7.99885 12.657L8.01563 12.657L8.03241 12.657L8.04919 12.657L8.06597 12.6571L8.08274 12.6571L8.09952 12.6571L8.1163 12.6571L8.13308 12.6571L8.14986 12.6572L8.16664 12.6572L8.18342 12.6572L8.2002 12.6572L8.21698 12.6572L8.23376 12.6573L8.25054 12.6573L8.26731 12.6573L8.28409 12.6573L8.30087 12.6573L8.31765 12.6574L8.33443 12.6574L8.35121 12.6574L8.36799 12.6574L8.38477 12.6574L8.40155 12.6575L8.41833 12.6575L8.43511 12.6575L8.45189 12.6575L8.46866 12.6575L8.48544 12.6576L8.50222 12.6576L8.519 12.6576L8.53578 12.6576L8.55256 12.6576L8.56934 12.6577L8.58612 12.6577L8.6029 12.6577L8.61968 12.6577L8.63646 12.6577L8.65323 12.6578L8.67001 12.6578L8.68679 12.6578L8.70357 12.6578L8.72035 12.6578L8.73713 12.6579L8.75391 12.6579L8.77069 12.6579L8.78747 12.6579L8.80425 12.6579L8.82103 12.658L8.83781 12.658L8.85458 12.658L8.87136 12.658L8.88814 12.658L8.90492 12.6581L8.9217 12.6581L8.93848 12.6581L8.95526 12.6581L8.97204 12.6581L8.98882 12.6582L9.0056 12.6582L9.02238 12.6582L9.03915 12.6582L9.05593 12.6582L9.07271 12.6583L9.08949 12.6583L9.10627 12.6583L9.12305 12.6583L9.13983 12.6583L9.15661 12.6584L9.17339 12.6584L9.19017 12.6584L9.20695 12.6584L9.22373 12.6584L9.2405 12.6585L9.25728 12.6585L9.27406 12.6585L9.29084 12.6585L9.30762 12.6585L9.3244 12.6586L9.34118 12.6586L9.35796 12.6586L9.37474 12.6586L9.39152 12.6586L9.4083 12.6587L9.42507 12.6587L9.44185 12.6587L9.45863 12.6587L9.47541 12.6587L9.49219 12.6588L9.50897 12.6588L9.52575 12.6588L9.54253 12.6588L9.55931 12.6588L9.57609 12.6589L9.59287 12.6589L9.60964 12.6589L9.62642 12.6589L9.6432 12.6589L9.65998 12.659L9.67676 12.659L9.69354 12.659L9.71032 12.659L9.7271 12.659L9.74388 12.6591L9.76066 12.6591L9.77744 12.6591L9.79421 12.6591L9.81099 12.6591L9.82777 12.6592L9.84455 12.6592L9.86133 12.6592L9.87811 12.6592L9.89489 12.6592L9.91167 12.6593L9.92845 12.6593L9.94523 12.6593L9.96201 12.6593L9.97879 12.6594L9.99556 12.6594L10.0123 12.6594L10.0291 12.6594L10.0459 12.6594L10.0627 12.6595L10.0795 12.6595L10.0962 12.6595L10.113 12.6595L10.1298 12.6595L10.1466 12.6596L10.1634 12.6596L10.1801 12.6596L10.1969 12.6596L10.2137 12.6596L10.2305 12.6597L10.2473 12.6597L10.264 12.6597L10.2808 12.6597L10.2976 12.6597L10.3144 12.6598L10.3311 12.6598L10.3479 12.6598L10.3647 12.6598L10.3815 12.6598L10.3983 12.6599L10.415 12.6599L10.4318 12.6599L10.4486 12.6599L10.4654 12.6599L10.4822 12.66L10.4989 12.66L10.5157 12.66L10.5325 12.66L10.5493 12.66L10.5661 12.6601L10.5828 12.6601L10.5996 12.6601L10.6164 12.6601L10.6332 12.6601L10.65 12.6602L10.6667 12.6602L10.6835 12.6602L10.7003 12.6602L10.7171 12.6602L10.7338 12.6603L10.7506 12.6603L10.7674 12.6603L10.7842 12.6603L10.801 12.6603L10.8177 12.6604L10.8345 12.6604L10.8513 12.6604L10.8681 12.6604L10.8849 12.6604L10.9016 12.6605L10.9184 12.6605L10.9352 12.6605L10.952 12.6605L10.9688 12.6605L10.9855 12.6606L11.0023 12.6606L11.0191 12.6606L11.0359 12.6606L11.0526 12.6606L11.0694 12.6607L11.0862 12.6607L11.103 12.6607L11.1198 12.6607L11.1365 12.6607L11.1533 12.6608L11.1701 12.6608L11.1869 12.6608L11.2037 12.6608L11.2204 12.6608L11.2372 12.6609L11.254 12.6609L11.2708 12.6609L11.2876 12.6609L11.3043 12.6609L11.3211 12.661L11.3379 12.661L11.3547 12.661L11.3715 12.661L11.3882 12.661L11.405 12.6611L11.4218 12.6611L11.4386 12.6611L11.4553 12.6611L11.4721 12.6611L11.4889 12.6612L11.5057 12.6612L11.5225 12.6612L11.5392 12.6612L11.556 12.6612L11.5728 12.6613L11.5896 12.6613L11.6064 12.6613L11.6231 12.6613L11.6399 12.6613L11.6567 12.6614L11.6735 12.6614L11.6903 12.6614L11.707 12.6614L11.7238 12.6614L11.7406 12.6615L11.7574 12.6615L11.7742 12.6615L11.7909 12.6615L11.8077 12.6615L11.8245 12.6616L11.8413 12.6616L11.858 12.6616L11.8748 12.6616L11.8916 12.6616L11.9084 12.6617L11.9252 12.6617L11.9419 12.6617L11.9587 12.6617L11.9755 12.6617L11.9923 12.6618L12.0091 12.6618L12.0258 12.6618L12.0426 12.6618L12.0594 12.6618L12.0762 12.6619L12.093 12.6619L12.1097 12.6619L12.1265 12.6619L12.1433 12.662L12.1601 12.662L12.1768 12.662L12.1936 12.662L12.2104 12.662L12.2272 12.6621L12.244 12.6621L12.2607 12.6621L12.2775 12.6621L12.2943 12.6621L12.3111 12.6622L12.3279 12.6622L12.3446 12.6622L12.3614 12.6622L12.3782 12.6622L12.395 12.6623L12.4118 12.6623L12.4285 12.6623L12.4453 12.6623L12.4621 12.6623L12.4789 12.6624L12.4957 12.6624L12.5124 12.6624L12.5292 12.6624L12.546 12.6624L12.5628 12.6625L12.5795 12.6625L12.5963 12.6625L12.6131 12.6625L12.6299 12.6625L12.6467 12.6626L12.6634 12.6626L12.6802 12.6626L12.697 12.6626L12.7138 12.6626L12.7306 12.6627L12.7473 12.6627L12.7641 12.6627L12.7809 12.6627L12.7977 12.6627L12.8145 12.6628L12.8312 12.6628L12.848 12.6628L12.8648 12.6628L12.8816 12.6628L12.8984 12.6629L12.9151 12.6629L12.9319 12.6629L12.9487 12.6629L12.9655 12.6629L12.9822 12.663L12.999 12.663L13.0158 12.663L13.0326 12.663L13.0494 12.663L13.0661 12.6631L13.0829 12.6631L13.0997 12.6631L13.1165 12.6631L13.1333 12.6631L13.15 12.6632L13.1668 12.6632L13.1836 12.6632L13.2004 12.6632L13.2172 12.6632L13.2339 12.6633L13.2507 12.6633L13.2675 12.6633L13.2843 12.6633L13.3011 12.6633L13.3178 12.6634L13.3346 12.6634L13.3514 12.6634L13.3682 12.6634L13.3849 12.6634L13.4017 12.6635L13.4185 12.6635L13.4353 12.6635L13.4521 12.6635L13.4688 12.6635L13.4856 12.6636L13.5024 12.6636L13.5192 12.6636L13.536 12.6636L13.5527 12.6636L13.5695 12.6637L13.5863 12.6637L13.6031 12.6637L13.6199 12.6637L13.6366 12.6637L13.6534 12.6638L13.6702 12.6638L13.687 12.6638L13.7038 12.6638L13.7205 12.6638L13.7373 12.6639L13.7541 12.6639L13.7709 12.6639L13.7876 12.6639L13.8044 12.6639L13.8212 12.664L13.838 12.664L13.8548 12.664L13.8715 12.664L13.8883 12.664L13.9051 12.6641L13.9219 12.6641L13.9387 12.6641L13.9554 12.6641L13.9722 12.6641L13.989 12.6642L14.0058 12.6642L14.0226 12.6642L14.0393 12.6642L14.0561 12.6642L14.0729 12.6643L14.0897 12.6643L14.1064 12.6643L14.1232 12.6643L14.14 12.6644L14.1568 12.6644L14.1736 12.6644L14.1903 12.6644L14.2071 12.6644L14.2239 12.6645L14.2407 12.6645L14.2575 12.6645L14.2742 12.6645L14.291 12.6645L14.3078 12.6646L14.3246 12.6646L14.3414 12.6646L14.3581 12.6646L14.3749 12.6646L14.3917 12.6647L14.4085 12.6647L14.4253 12.6647L14.442 12.6647L14.4588 12.6647L14.4756 12.6648L14.4924 12.6648L14.5091 12.6648L14.5259 12.6648L14.5427 12.6648L14.5595 12.6649L14.5763 12.6649L14.593 12.6649L14.6098 12.6649L14.6266 12.6649L14.6434 12.665L14.6602 12.665L14.6769 12.665L14.6937 12.665L14.7105 12.665L14.7273 12.6651L14.7441 12.6651L14.7608 12.6651L14.7776 12.6651L14.7944 12.6651L14.8112 12.6652L14.828 12.6652L14.8447 12.6652L14.8615 12.6652L14.8783 12.6652L14.8951 12.6653L14.9118 12.6653L14.9286 12.6653L14.9454 12.6653L14.9622 12.6653L14.979 12.6654L14.9957 12.6654L15.0125 12.6654L15.0293 12.6654L15.0461 12.6654L15.0629 12.6655L15.0796 12.6655L15.0964 12.6655L15.1132 12.6655L15.13 12.6655L15.1468 12.6656L15.1635 12.6656L15.1803 12.6656L15.1971 12.6656L15.2139 12.6656L15.2306 12.6657L15.2474 12.6657L15.2642 12.6657L15.281 12.6657L15.2978 12.6657L15.3145 12.6658L15.3313 12.6658L15.3481 12.6658L15.3649 12.6658L15.3817 12.6658L15.3984 12.6659L15.4152 12.6659L15.432 12.6659L15.4488 12.6659L15.4656 12.6659L15.4823 12.666L15.4991 12.666L15.5159 12.666L15.5327 12.666L15.5495 12.666L15.5662 12.6661L15.583 12.6661L15.5998 12.6661L15.6166 12.6661L15.6333 12.6661L15.6501 12.6662L15.6669 12.6662L15.6837 12.6662L15.7005 12.6662L15.7172 12.6662L15.734 12.6663L15.7508 12.6663L15.7676 12.6663L15.7844 12.6663L15.8011 12.6663L15.8179 12.6664L15.8347 12.6664L15.8515 12.6664L15.8683 12.6664L15.885 12.6664L15.9018 12.6665L15.9186 12.6665L15.9354 12.6665L15.9522 12.6665L15.9689 12.6665L15.9857 12.6666L16.0025 12.6666L16.0193 12.6666L16.036 12.6666L16.0528 12.6666L16.0696 12.6667L16.0864 12.6667L16.1032 12.6667L16.1199 12.6667L16.1367 12.6667L16.1535 12.6668L16.1703 12.6668L16.1871 12.6668L16.2038 12.6668L16.2206 12.6669L16.2374 12.6669L16.2542 12.6669L16.271 12.6669L16.2836 12.6669L12.458 16.7581C12.2065 17.0271 12.2065 17.4631 12.458 17.732C12.7095 18.001 13.1172 18.001 13.3687 17.732L18.2822 12.4772C18.5337 12.2083 18.5337 11.7723 18.2822 11.5033L13.3687 6.24853Z",fill:"white"})),IVe=u.forwardRef(RVe),xVe=(t,e)=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2139 2.44646L12 3.99992H5.4375C4.64359 3.99992 4 4.64352 4 5.43742V18.5624C4 19.3563 4.64359 19.9999 5.4375 19.9999H12L18.2139 21.5534C19.1211 21.7802 20 21.094 20 20.1588V3.84104C20 2.90584 19.1211 2.21964 18.2139 2.44646ZM12 17.9999V5.99992H6V17.9999H12Z",fill:"white"})),MVe=u.forwardRef(xVe),PVe="_userButton_xt7lw_29",LVe={userButton:PVe},OVe=({preventNavigation:t,isAuthenticated:e,isPasswordlessUser:n,userId:r,displayName:i,avatarUrl:s,onAction:a})=>{const{t:o}=it(),l=Gi(),c=u.useMemo(()=>{const p=[];return e&&(p.push({key:"user",icon:Eq,label:i,dataTestid:"usermenu_user"}),p.push({key:"settings",icon:TVe,label:o("common.settings")}),n&&!t&&p.push({key:"login",label:o("action.sign_in"),icon:IVe,dataTestid:"usermenu_login"}),!n&&!t&&p.push({key:"logout",label:o("action.sign_out"),icon:MVe,dataTestid:"usermenu_logout"})),p},[e,n,i,t,o]),[d,f]=u.useState(!1);return e?E.jsx(NM,{title:o("a11y.user_menu"),showTitle:!1,align:"end",open:d,onOpenChange:f,trigger:E.jsx("button",{"aria-label":o("common.profile"),className:LVe.userButton,"data-testid":"usermenu_open",children:e&&(!n||s)?E.jsx(rp,{id:r,name:i,size:np.SM,src:s}):E.jsx(Eq,{})}),children:c.map(({key:p,icon:g,label:y,dataTestid:v})=>E.jsx(vm,{Icon:g,label:y,"data-testid":v,onSelect:()=>a(p)},p))}):E.jsx(IP,{to:{pathname:"/login"},state:{from:l},children:o("log_in")})},GL=({preventNavigation:t=!1})=>{const e=Gi(),n=Wl(),{client:r,logout:i,authenticated:s,passwordlessUser:a}=PP(),{displayName:o,avatarUrl:l}=E4(r),[c,d]=u.useState(!1),f=u.useCallback(()=>d(!1),[d]),[p,g]=u.useState(BL),y=u.useCallback(b=>{var C;switch(b){case"user":g("profile"),d(!0);break;case"settings":g("audio"),d(!0);break;case"logout":i==null||i();break;case"login":(C=n("/login",{state:{from:e}}))==null||C.catch(S=>A.error("Failed to navigate to login",S));break}},[n,e,i,d]),v=(r==null?void 0:r.getUserIdLocalpart())??"";return E.jsxs(E.Fragment,{children:[E.jsx(OVe,{preventNavigation:t,isAuthenticated:s,isPasswordlessUser:a,avatarUrl:l,onAction:y,userId:(r==null?void 0:r.getUserId())??"",displayName:o||(v?v.replace("@",""):"")}),r&&E.jsx(qL,{client:r,open:c,onDismiss:f,tab:p,onTabChange:g})]})};function AVe(t){return new Worker("/assets/IndexedDBWorker-whz4J8_U.js",{name:t==null?void 0:t.name})}const y6=new MI,NVe=t=>{const[e,n]=u.useState(()=>localStorage.getItem(t));return u.useEffect(()=>(y6.on(t,n),()=>{y6.off(t,n)}),[t,n]),[e,u.useCallback(r=>{n(r),localStorage.setItem(t,r),y6.emit(t,r)},[t,n])]},DVe=(t,e)=>{localStorage.getItem(t)!==e&&(localStorage.setItem(t,e),y6.emit(t,e))};function Voe(t,e){DVe(KL(t),e)}const KL=t=>`room-shared-key-${t}`,UVe=t=>{const e=KL(t),[n]=NVe(e);return n};function FVe(t){Boe(Xa());const e=KL(t);return localStorage.getItem(e)}function Boe(t){!t.password||!t.roomId||Voe(t.roomId,t.password)}const jVe=()=>{const t=Yo();return u.useEffect(()=>Boe(t),[t]),t.roomId&&t.password?[t.roomId,t.password]:[void 0,void 0]};function I4(t){const{client:e}=lp(),[n,r]=jVe(),i=UVe(t),s=e==null?void 0:e.getRoom(t);return u.useMemo(()=>s?i?{kind:Wt.SHARED_KEY,secret:i}:n===t?{kind:Wt.SHARED_KEY,secret:r}:s.hasEncryptionStateEvent()?{kind:Wt.PER_PARTICIPANT}:{kind:Wt.NONE}:{kind:Wt.NONE},[r,s,t,i,n])}const Sq=!1,HVe="element-call-sync";async function $Ve(t){let e=!!await t.store.getSavedSyncToken();return new Promise((n,r)=>{const i=(s,a,o)=>{s==="PREPARED"?e?e=!1:(t.removeListener(Le.Sync,i),n()):s==="ERROR"&&(t.removeListener(Le.Sync,i),r(o==null?void 0:o.error))};t.on(Le.Sync,i)})}async function qoe(t,e){var o;let n;try{n=window.indexedDB}catch(l){A.warn("Could not get indexDB from window.",l)}const r={fallbackICEServerAllowed:Sq,isVoipWithNoMediaAllowed:(o=At.get().features)==null?void 0:o.feature_group_calls_without_video_and_audio};n&&localStorage?r.store=new bz({indexedDB:window.indexedDB,localStorage,dbName:HVe,workerFactory:()=>new AVe}):localStorage&&(r.store=new ng({localStorage}));const{e2eEnabled:i}=Xa();i||A.info("Disabling E2E: group call signalling will NOT be encrypted.");const s=L9({...r,...t,useAuthorizationHeader:!0,localTimeoutMs:5e3,useE2eForGroupCall:i,fallbackICEServerAllowed:Sq});e||await s.clearStores();try{await s.store.startup()}catch(l){A.error("Error starting matrix client indexDB store. Falling back to memory store.",l),s.store=new ng({localStorage}),await s.store.startup()}try{await s.initRustCrypto()}catch(l){A.warn(l,"Make sure to clear client stores before initializing the rust crypto.")}const a=$Ve(s);return await s.startClient({clientWellKnownPollPeriod:60*10}),await a,s}function x4(t){return t.trim().replace(/\s/g,"-").replace(/[^\w-]/g,"").toLowerCase()}function VVe(t,e){return`#${x4(t)}:${e.getDomain()}`}function Goe(t){const e=t.split(":",2);if(e.length===2&&e[0][0]==="#"){if(e[1]===At.defaultServerName())return e[0];throw new Error("Unsupported remote room alias")}return t}async function Koe(t,e,n){A.log("Creating room for group call");const r=t.createRoom({visibility:UZ.Private,preset:T9.PublicChat,name:e,room_alias_name:n?void 0:x4(e),power_level_content_override:{invite:100,kick:100,ban:100,redact:50,state_default:0,events_default:0,users_default:0,events:{"m.room.power_levels":100,"m.room.history_visibility":100,"m.room.tombstone":100,"m.room.encryption":100,"m.room.name":50,"m.room.message":0,"m.room.encrypted":50,"m.sticker":50,"org.matrix.msc3401.call.member":0},users:{[t.getUserId()]:100}}}),i=await new Promise((a,o)=>{r.catch(d=>{o(d),c()});const l=d=>{r.then(f=>{d.roomId===f.room_id&&(a(d.roomId),c())},f=>{A.error("Failed to wait for the room to arrive",f)})},c=()=>{t.off(Le.Room,l)};t.on(Le.Room,l)});let s;return n==Wt.SHARED_KEY&&(s=OZ(16),Voe(i,s)),{roomId:i,alias:n?void 0:VVe(e,t),password:s}}function Zoe(t,e,n,r){return`${window.location.protocol}//${window.location.host}${c_(t,e,n)}`}function c_(t,e,n,r){return`/room/#${n?"/"+x4(n):""}?${JMe(t,e).toString()}`}async function BVe(t){let e=0;for(;;)try{return await t()}catch(n){e++;const r=$I(n,e,!0);if(r<0)throw n;await ru(r)}}const ZL=t=>{const[e,n]=u.useState(void 0),[r,i]=u.useState(void 0),s=u.useRef(void 0);s.current||(s.current=L9({baseUrl:At.defaultHomeserverUrl()})),u.useEffect(()=>{Xe||s.current.registerRequest({}).catch(o=>{var l,c,d,f,p,g,y;n((p=(f=(d=(c=(l=o.data)==null?void 0:l.params["m.login.terms"])==null?void 0:c.policies)==null?void 0:d.privacy_policy)==null?void 0:f.en)==null?void 0:p.url),i((y=(g=o.data)==null?void 0:g.params["m.login.recaptcha"])==null?void 0:y.public_key)})},[]);const a=u.useCallback(async(o,l,c,d,f)=>{const p=new ax({matrixClient:s.current,doRequest:async R=>s.current.registerRequest({username:o,password:l,auth:R||void 0}),stateUpdated:(R,w)=>{if(w.error)throw new Error(w.error);R==="m.login.terms"?p.submitAuthDict({type:"m.login.terms"}).catch(I=>{A.error(I)}):R==="m.login.recaptcha"&&p.submitAuthDict({type:"m.login.recaptcha",response:d}).catch(I=>{A.error(I)})},requestEmailToken:async()=>Promise.resolve({sid:"dummy"})}),{user_id:g,access_token:y,device_id:v}=await p.attemptAuth();await(t==null?void 0:t.logout(!0));const b=await qoe({baseUrl:At.defaultHomeserverUrl(),accessToken:y,userId:g,deviceId:v},!1);await b.setDisplayName(c);const C={user_id:g,device_id:v,access_token:y,passwordlessUser:f};f&&(C.tempPassword=l);const S=b.getUser(b.getUserId());return S.setRawDisplayName(c),S.setDisplayName(c),[b,C]},[t]);return{privacyPolicyUrl:e,recaptchaKey:r,register:a}},qVe="_buttons_mlos2_15",GVe={buttons:qVe},zoe=({onJoin:t,open:e,onDismiss:n})=>{const{t:r}=it();return E.jsxs(Yh,{title:r("join_existing_call_modal.title"),open:e,onDismiss:n,children:[E.jsx("p",{children:r("join_existing_call_modal.text")}),E.jsxs(en,{rightAlign:!0,className:GVe.buttons,children:[E.jsx(Bt,{onClick:n,children:r("action.no")}),E.jsx(Bt,{onClick:t,"data-testid":"home_joinExistingRoom",children:r("join_existing_call_modal.join_button")})]})]})},wq="https://www.recaptcha.net/recaptcha/api.js?onload=mxOnRecaptchaLoaded&render=explicit";function zL(t){const{t:e}=it(),[n]=u.useState(()=>Ba(16)),r=u.useRef(void 0);u.useEffect(()=>{var o;if(!t)return;const a=()=>{document.getElementById(n)&&window.grecaptcha.render(n,{sitekey:t,size:"invisible",callback:l=>{var c;return(c=r.current)==null?void 0:c.resolve(l)},"error-callback":()=>{var l;return(l=r.current)==null?void 0:l.reject(new Error)}})};if(typeof((o=window.grecaptcha)==null?void 0:o.render)=="function")a();else if(window.mxOnRecaptchaLoaded=a,!document.querySelector(`script[src="${wq}"]`)){const l=document.createElement("script");l.src=wq,l.async=!0,document.body.appendChild(l)}},[n,t]);const i=u.useCallback(async()=>t?window.grecaptcha?new Promise((a,o)=>{var d,f;const l=new MutationObserver(p=>{var g,y;for(const v of p)if(((y=(g=v.target)==null?void 0:g.style)==null?void 0:y.visibility)!=="visible"){o(aB("recaptcha_dismissed",e)),l.disconnect();return}});r.current={resolve:p=>{a(p),l.disconnect()},reject:p=>{o(p),l.disconnect()}},window.grecaptcha.execute().then(()=>{},p=>{A.error("Recaptcha execution failed",p)});const c=document.querySelector('iframe[src*="recaptcha/api2/bframe"]');(d=c==null?void 0:c.parentNode)!=null&&d.parentNode&&l.observe((f=c==null?void 0:c.parentNode)==null?void 0:f.parentNode,{attributes:!0})}):(A.log("Recaptcha not loaded"),Promise.reject(aB("recaptcha_not_loaded",e))):Promise.resolve(""),[t,e]),s=u.useCallback(()=>{var a;(a=window.grecaptcha)==null||a.reset()},[]);return{execute:i,reset:s,recaptchaId:n}}const KVe="_form_1voaa_15",ZVe={form:KVe},u_=u.forwardRef(({children:t,className:e,onSubmit:n},r)=>E.jsx("form",{onSubmit:n,className:De(ZVe.form,e),ref:r,children:t}));u_.displayName="Form";const zVe="_footer_1459u_15",WVe="_mobileLoginLink_1459u_37",YVe="_form_1459u_47",JVe="_notice_1459u_81",U3={footer:zVe,mobileLoginLink:WVe,form:YVe,notice:JVe},QVe="_container_1xbqu_15",XVe="_main_1xbqu_29",eBe="_logo_1xbqu_45",W2={container:QVe,main:XVe,logo:eBe},kq=t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};class tBe{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:s,seed:a}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=s,this.seed=a}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(a=>{if(typeof a=="string"){const o=a.split("").map(c=>c.charCodeAt(0)).reduce((c,d)=>c+d,1),l=Math.floor(Number(o));return kq(l)}return kq(a)})(e),e=4294967296*i):i=Math.random();let s=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")s=s.toLowerCase();else if(this.style==="capital"){const[a,...o]=s.split("");s=a.toUpperCase()+o.join("")}else this.style==="upperCase"&&(s=s.toUpperCase());return n?`${n}${this.separator}${s}`:`${s}`},"")}}const Tq={separator:"_",dictionaries:[]},nBe=t=>{const e=[...t&&t.dictionaries||Tq.dictionaries],n={...Tq,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new tBe(n).generate()};var rBe=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blind","blonde","bloody","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","capitalist","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","christian","chronic","chubby","circular","civic","civil","civilian","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colonial","colorful","colossal","coloured","colourful","combative","combined","comfortable","coming","commercial","common","communist","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","conservative","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","crazy","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deaf","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disabled","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","drunk","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","ethnic","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fat","fatal","favourable","favourite","federal","fellow","female","feminist","few","fierce","filthy","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","gay","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handicapped","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homeless","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","imperial","implicit","important","impossible","impressed","impressive","improved","inadequate","inappropriate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","intimate","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","liberal","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","male","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","marxist","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mute","mutual","mysterious","naked","narrow","nasty","national","native","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","olympic","only","open","operational","opposite","optimistic","oral","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","political","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","primitive","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","sexual","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","socialist","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","soviet","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","stupid","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thirsty","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","tory","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xenophobic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],iBe=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],sBe=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"];const aBe=["hydrogen","helium","lithium","beryllium","boron","carbon","nitrogen","oxygen","fluorine","neon","sodium","magnesium","aluminum","silicon","phosphorus","sulfur","chlorine","argon","potassium","calcium","scandium","titanium","vanadium","chromium","manganese","iron","cobalt","nickel","copper","zinc","gallium","germanium","arsenic","selenium","bromine","krypton","rubidium","strontium","yttrium","zirconium","niobium","molybdenum","technetium","ruthenium","rhodium","palladium","silver","cadmium","indium","tin","antimony","tellurium","iodine","xenon","cesium","barium","lanthanum","cerium","praseodymium","neodymium","promethium","samarium","europium","gadolinium","terbium","dysprosium","holmium","erbium","thulium","ytterbium","lutetium","hafnium","tantalum","wolfram","rhenium","osmium","iridium","platinum","gold","mercury","thallium","lead","bismuth","polonium","astatine","radon","francium","radium","actinium","thorium","protactinium","uranium","neptunium","plutonium","americium","curium","berkelium","californium","einsteinium","fermium","mendelevium","nobelium","lawrencium","rutherfordium","dubnium","seaborgium","bohrium","hassium","meitnerium","darmstadtium","roentgenium","copernicium","nihonium","flerovium","moscovium","livermorium","tennessine","oganesson"];function Woe(){return nBe({dictionaries:[sBe,rBe,iBe,aBe],style:"lowerCase",length:3,separator:"-"})}const Yoe=()=>E.jsxs(ca,{i18nKey:"analytics_notice",children:["By participating in this beta, you consent to the collection of anonymous data, which we use to improve the product. You can find more information about which data we track in our"," ",E.jsx(NR,{href:"https://element.io/privacy",children:"Privacy Policy"})," ","and our"," ",E.jsx(NR,{href:"https://element.io/cookie-policy",children:"Cookie Policy"}),"."]}),oBe=()=>{const{setClient:t}=lp(),[e,n]=u.useState(!1),[r,i]=u.useState(),[s]=wP(),{recaptchaKey:a,register:o}=ZL(),{execute:l,reset:c,recaptchaId:d}=zL(a),[f,p]=u.useState(!1),g=u.useCallback(()=>p(!1),[p]),[y,v]=u.useState(),b=Wl(),{t:C}=it(),S=u.useCallback(R=>{R.preventDefault();const w=new FormData(R.target),I=Goe(w.get("callName")),k=w.get("displayName");async function x(){i(void 0),n(!0);const L=await l(),N=Woe(),[D,U]=await o(N,Ba(16),k,L,!0);let j;try{j=await Koe(D,I,Wt.SHARED_KEY)}catch($){if(!t)throw $;if($.errcode==="M_ROOM_IN_USE"){v(()=>{var V;t(D,U);const Z=x4(I);(V=b(`/${Z}`))==null||V.catch(z=>{A.error("Failed to navigate to alias localpart",z)})}),n(!1),p(!0);return}else throw $}if(!t)throw new Error("setClient is undefined");if(!j.password)throw new Error("Failed to create room with shared secret");t(D,U),await b(c_(j.roomId,{kind:Wt.SHARED_KEY,secret:j.password},I))}x().catch(L=>{A.error(L),n(!1),i(L),c()})},[o,c,l,b,p,t]);return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:W2.container,children:[E.jsxs(l1,{children:[E.jsx(Zh,{children:E.jsx(Mh,{})}),E.jsx(zh,{hideMobile:!0,children:E.jsx(GL,{})})]}),E.jsxs("main",{className:W2.main,children:[E.jsx(Mh,{className:W2.logo}),E.jsx(o1,{size:"lg",weight:"semibold",children:C("start_new_call")}),E.jsxs(u_,{className:U3.form,onSubmit:S,children:[E.jsx(en,{children:E.jsx(hi,{id:"callName",name:"callName",label:C("call_name"),placeholder:C("call_name"),type:"text",required:!0,autoComplete:"off","data-testid":"home_callName"})}),E.jsx(en,{children:E.jsx(hi,{id:"displayName",name:"displayName",label:C("common.display_name"),placeholder:C("common.display_name"),type:"text",required:!0,"data-testid":"home_displayName",autoComplete:"off"})}),s===null&&E.jsx(_n,{size:"sm",className:U3.notice,children:E.jsx(Yoe,{})}),E.jsx(_n,{size:"sm",className:U3.notice,children:E.jsx(ca,{i18nKey:"unauthenticated_view_ssla_caption"})}),r&&E.jsx(en,{children:E.jsx(Jh,{error:r})}),E.jsx(Bt,{type:"submit",size:"lg",disabled:e,"data-testid":"home_go",children:C(e?"common.loading":"action.go")}),E.jsx("div",{id:d})]})]}),E.jsxs("footer",{className:U3.footer,children:[E.jsx(_n,{className:U3.mobileLoginLink,children:E.jsx($l,{to:"/login","data-testid":"home_login",children:C("unauthenticated_view_login_button")})}),E.jsx(_n,{children:E.jsxs(ca,{i18nKey:"unauthenticated_view_body",children:["Not registered yet?"," ",E.jsx($l,{to:"/register","data-testid":"home_register",children:"Create an account"})]})})]})]}),y&&E.jsx(zoe,{onJoin:y,open:f,onDismiss:g})]})},qf={};function Rq(t,e){if(qf[e.roomId])return qf[e.roomId];if(!e||!e.timeline){const i=Number.MAX_SAFE_INTEGER;return qf[e.roomId]=i,i}const n=t.getUserId();if(e.getMyMembership()!==Ke.Join){const i=e.currentState.getStateEvents("m.room.member",n);if(i&&!Array.isArray(i)){const s=i.getTs();return qf[e.roomId]=s,s}}for(let i=e.timeline.length-1;i>=0;--i){const a=e.timeline[i].getTs();if(a)return qf[e.roomId]=a,a}const r=Number.MAX_SAFE_INTEGER;return qf[e.roomId]=r,r}function lBe(t,e){return e.sort((n,r)=>Rq(t,r)-Rq(t,n))}const cBe=t=>{var e,n;if(!t.hasEncryptionStateEvent()&&!FVe(t.roomId))return!1;switch(t.getJoinRule()){case kd.Public:return!0;case kd.Knock:switch(t.getMyMembership()){case Ke.Join:case Ke.Knock:return!0;case Ke.Invite:return((n=(e=t.getLiveTimeline().getState(Me.FORWARDS))==null?void 0:e.getStateEvents(ee.RoomMember,t.myUserId))==null?void 0:n.getPrevContent().membership)===kd.Knock;default:return!1}default:return t.getMyMembership()===Ke.Join}},uBe=t=>{var e,n;switch(t.getMyMembership()){case Ke.Join:return!!((n=(e=t.getLiveTimeline().getState(Me.FORWARDS))==null?void 0:e.events)!=null&&n.get(ee.GroupCallMemberPrefix));case Ke.Knock:return!0;default:return!1}};function dBe(t){const[e,n]=u.useState([]);return u.useEffect(()=>{function r(){const i=t.getRooms().filter(uBe).filter(cBe),a=lBe(t,i).map(o=>{const l=t.matrixRTC.getRoomSession(o);return{roomAlias:o.getCanonicalAlias()??void 0,roomName:o.name,avatarUrl:o.getMxcAvatarUrl(),room:o,session:l,participants:l.memberships.filter(c=>c.sender).map(c=>o.getMember(c.sender)).filter(c=>c)}});n(a)}return r(),t.matrixRTC.on(F6.SessionStarted,r),t.on(xe.MyMembership,r),()=>{t.matrixRTC.off(F6.SessionStarted,r),t.off(xe.MyMembership,r)}},[t]),e}const hBe="_form_1d7zl_15",fBe="_fieldRow_1d7zl_33",mBe="_button_1d7zl_49",pBe="_notice_1d7zl_65",F3={form:hBe,fieldRow:fBe,button:mBe,notice:pBe},gBe="_callTileSpacer_b2ib1_15",vBe="_callTile_b2ib1_15",yBe="_callTileLink_b2ib1_55",_Be="_callInfo_b2ib1_79",CBe="_callName_b2ib1_105",bBe="_callList_b2ib1_125",EBe="_disabled_b2ib1_147",Mc={callTileSpacer:gBe,callTile:vBe,callTileLink:yBe,callInfo:_Be,callName:CBe,callList:bBe,disabled:EBe},SBe=({rooms:t,client:e})=>E.jsx(E.Fragment,{children:E.jsxs("div",{className:Mc.callList,children:[t.map(({room:n,roomName:r,avatarUrl:i,participants:s})=>E.jsx(wBe,{client:e,name:r,avatarUrl:i,room:n,participants:s},n.roomId)),t.length>3&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:Mc.callTileSpacer}),E.jsx("div",{className:Mc.callTileSpacer})]})]})}),wBe=({name:t,avatarUrl:e,room:n,client:r})=>{const{t:i}=it(),s=I4(n.roomId),[a,o]=u.useState(!1),l=u.useCallback(d=>{d.stopPropagation(),d.preventDefault(),o(!0),r.leave(n.roomId).catch(()=>o(!1))},[n,r]),c=E.jsxs(E.Fragment,{children:[E.jsx(rp,{id:n.roomId,name:t,size:np.LG,src:e}),E.jsx("div",{className:Mc.callInfo,children:E.jsx(_n,{weight:"semibold",className:Mc.callName,children:t})}),E.jsx(ZQ,{onClick:l,disabled:a,"aria-label":i("action.remove"),children:E.jsx(ny,{})})]});return E.jsx("div",{className:Mc.callTile,children:a?E.jsx("span",{className:De(Mc.callTileLink,Mc.disabled),children:c}):E.jsx(V9,{to:c_(n.roomId,s,n.name),className:Mc.callTileLink,children:c})})},kBe=({client:t})=>{const[e,n]=u.useState(!1),[r,i]=u.useState(),[s]=wP(),a=Wl(),{t:o}=it(),[l,c]=u.useState(!1),d=u.useCallback(()=>c(!1),[c]),f=u.useCallback(b=>{b.preventDefault();const S=new FormData(b.target).get("callName"),R=typeof S=="string"?Goe(S):"";async function w(){i(void 0),n(!0);const I=await Koe(t,R,Wt.SHARED_KEY);if(!I.password)throw new Error("Failed to create room with shared secret");await a(c_(I.roomId,{kind:Wt.SHARED_KEY,secret:I.password},R))}w().catch(I=>{I.errcode==="M_ROOM_IN_USE"?(y(x4(R)),n(!1),i(void 0),c(!0)):(A.error(I),n(!1),i(I))})},[t,a,c]),p=dBe(t),[g,y]=u.useState(),v=u.useCallback(()=>{var b;(b=a(`/${g}`))==null||b.catch(C=>{A.error("Failed to navigate to existing alias",C)})},[a,g]);return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:W2.container,children:[E.jsxs(l1,{children:[E.jsx(Zh,{children:E.jsx(Mh,{})}),E.jsx(zh,{children:E.jsx(GL,{})})]}),E.jsxs("main",{className:W2.main,children:[E.jsx(Mh,{className:W2.logo}),E.jsx(o1,{size:"lg",weight:"semibold",children:o("start_new_call")}),E.jsxs(u_,{className:F3.form,onSubmit:f,children:[E.jsxs(en,{className:F3.fieldRow,children:[E.jsx(hi,{id:"callName",name:"callName",label:o("call_name"),placeholder:o("call_name"),type:"text",required:!0,autoComplete:"off","data-testid":"home_callName"}),E.jsx(Bt,{type:"submit",size:"lg",className:F3.button,disabled:e,"data-testid":"home_go",children:o(e?"common.loading":"action.go")})]}),s===null&&E.jsx(_n,{size:"sm",className:F3.notice,children:E.jsx(Yoe,{})}),r&&E.jsx(en,{className:F3.fieldRow,children:E.jsx(Jh,{error:r})})]}),p.length>0&&E.jsx(SBe,{rooms:p,client:t})]})]}),E.jsx(zoe,{onJoin:v,open:l,onDismiss:d})]})};function M4(t){u.useEffect(()=>{const e="Beep Pakistan";document.title=t?`${e} | ${t}`:e},[t])}const Joe=()=>{const{t}=it();M4(t("common.home"));const e=op();return e?e.state==="error"?E.jsx(Mg,{widget:Xe,error:e.error}):e.authenticated?E.jsx(kBe,{client:e.authenticated.client}):E.jsx(oBe,{}):E.jsx(Py,{})},TBe=(t,e)=>u.createElement("svg",{width:571,height:329,viewBox:"0 0 571 329",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{d:"M457.256 177.164V276.563C457.256 281.443 453.292 285.404 448.408 285.404C443.524 285.404 439.56 281.443 439.56 276.563V175.388C439.56 170.508 443.524 166.548 448.408 166.548C450.191 166.548 451.848 167.071 453.235 167.976C453.632 168.238 454.007 168.528 454.361 168.846C454.814 169.264 455.231 169.73 455.599 170.232C455.925 172.637 456.477 174.957 457.256 177.164Z",fill:"#A6A7A9"}),u.createElement("path",{d:"M537.979 167.573V167.474C537.979 164.136 537.413 160.904 536.655 157.785C536.429 156.823 536.174 155.875 535.891 154.941C535.551 153.803 535.169 152.685 534.744 151.582C533.265 147.748 531.29 144.113 528.826 140.69C519.83 128.27 508.327 120.978 494.616 118.977C493.781 118.849 492.946 118.75 492.096 118.666C487.892 118.255 483.467 118.34 478.923 118.927C475.136 119.408 471.512 120.278 468.058 121.516C467.789 121.608 467.52 121.707 467.258 121.813C465.354 122.251 463.492 122.796 461.687 123.447C454.608 127.485 448.464 133.002 442.929 139.169C440.72 141.624 438.611 144.177 436.587 146.78C434.683 149.205 432.849 151.674 431.065 154.142C430.379 155.083 429.706 156.031 429.034 156.971C417.213 173.592 406.51 190.658 389.062 200.652C388.609 200.921 388.142 201.175 387.674 201.43C387.667 201.437 387.653 201.444 387.639 201.451C386.896 201.918 385.756 202.625 384.439 203.382C382.139 204.726 379.308 206.24 377.156 206.968C372.845 208.432 368.704 209.153 364.719 209.153C354.646 209.153 346.117 207.435 339.158 201.734C333.128 196.798 329.157 191.238 327.252 183.869C326.962 182.737 326.714 181.676 326.523 180.262H402.122C404.776 180.262 406.963 178.387 408.69 176.725C410.163 175.311 411.005 173.196 411.217 171.032C411.253 170.664 411.274 170.31 411.274 169.943C411.274 168.761 411.246 167.587 411.196 166.434C410.8 157.339 408.832 149.007 405.307 141.843C401.329 133.752 395.623 127.33 388.198 122.824C380.766 118.319 371.946 115.992 361.739 115.992C356.09 115.992 350.76 116.657 345.763 118.071C344.035 118.552 342.351 119.097 340.709 119.755C330.947 124.189 323.069 131.771 316.224 140.35C309.868 148.307 304.389 157.134 299.094 165.091C295.994 169.759 292.943 174.349 289.857 178.734C289.177 179.703 288.498 180.658 287.811 181.598C285.327 185.021 282.807 188.275 280.202 191.288C278.538 193.212 276.783 195.058 274.971 196.84C274.1 197.689 273.201 198.502 272.288 199.308C272.097 199.478 271.269 200.15 270.724 200.588C270.49 200.786 270.306 200.935 270.256 200.992C268.614 202.208 266.88 203.283 265.075 204.252C264.764 204.408 263.369 205.087 263.284 205.136C263.001 205.264 256.56 207.803 256.56 207.803C252.249 209.26 248.108 209.889 244.123 209.889C234.036 209.889 225.52 208.149 218.555 202.442C212.524 197.505 208.553 191.939 206.649 184.562C206.359 183.43 206.111 182.369 205.92 180.955H281.511C283.083 180.955 284.491 180.304 285.737 179.399C286.594 178.783 287.372 178.076 288.073 177.397C289.248 176.266 290.027 174.681 290.395 172.977C290.494 172.552 290.558 172.128 290.6 171.697C290.635 171.329 290.657 170.968 290.657 170.6C290.657 169.419 290.628 168.252 290.579 167.092C290.182 157.997 288.222 149.644 284.689 142.479C280.711 134.409 275.013 127.966 267.581 123.461C260.155 118.963 251.329 116.629 241.121 116.629C234.899 116.629 222.371 119.288 221.741 119.507C201.355 126.545 187.941 143.151 175.178 159.616C171.094 164.893 166.996 170.098 162.727 175.077C162.706 175.113 162.671 175.148 162.642 175.183C162.671 174.688 162.692 174.186 162.699 173.684C162.727 173.005 162.741 172.312 162.741 171.626C162.741 171.124 162.734 170.629 162.72 170.134C162.72 169.787 162.706 169.447 162.692 169.101C162.359 159.765 160.158 151.221 156.081 143.498C151.635 135.088 145.527 128.49 137.776 123.723C130.018 118.948 121.361 116.565 111.812 116.565C104.124 116.565 95.9488 118.156 89.3234 121.332C83.0447 124.345 76.3768 128.482 72.0872 133.752C71.8395 134.049 71.344 134.353 71.344 134.657V80.0629C71.344 78.1533 71.3015 65.288 70.6362 57.7627C70.3884 54.9266 70.0486 52.8472 69.5956 52.3875C67.7411 50.5344 65.8016 49.6079 62.7578 49.6079C59.8344 49.6079 56.5217 50.5344 54.5963 52.3875C52.671 54.2476 50.8164 77.934 50.8164 80.9823V171.633C50.8164 172.1 50.8235 172.559 50.8376 173.026C50.9297 175.785 51.2907 178.472 51.8357 181.096C53.2089 187.766 55.9271 193.99 59.2469 199.754C64.0886 208.17 71.2307 214.798 79.5197 219.635C87.7944 224.473 97.3433 226.885 107.55 226.885C117.772 226.885 127.222 224.473 135.645 219.635C136.424 219.19 137.252 218.73 137.995 218.249C157.539 207.767 172.071 191.076 185.527 173.726L187.396 171.35C187.389 171.506 187.396 171.668 187.396 171.831C187.396 182.44 189.817 191.91 194.658 200.256C199.493 208.602 206.239 215.13 214.86 219.833C223.475 224.537 233.229 226.885 244.101 226.885C250.196 226.885 256.602 225.76 263.298 223.511C267.899 221.969 271.984 220.102 275.558 217.931C275.558 217.931 275.565 217.931 275.565 217.924C289.666 209.733 299.929 194.428 308.785 181.132C309.839 187.808 312.005 193.968 315.276 199.612C320.117 207.958 326.849 214.493 335.471 219.19C344.092 223.893 353.839 226.248 364.712 226.248C370.813 226.248 377.219 225.124 383.916 222.867C390.605 220.618 395.864 217.704 400.373 214.126C401.024 213.638 418.253 196.317 429.027 182.893C430.832 180.636 432.467 178.493 433.798 176.563C433.847 176.492 433.89 176.428 433.939 176.357L434.463 174.801C434.647 176.867 434.959 178.925 435.397 180.962C435.652 182.15 435.943 183.338 436.289 184.512C436.318 184.618 436.353 184.724 436.381 184.831C436.573 185.474 436.771 186.118 436.99 186.754C437.011 186.825 437.033 186.889 437.054 186.959C437.118 187.136 437.181 187.32 437.245 187.497C437.443 188.063 437.656 188.629 437.875 189.187C437.351 190.687 436.82 192.186 436.289 193.678C435.666 195.44 435.036 197.201 434.406 198.962L428.97 215.01L428.85 215.356L428.284 217.025L427.576 219.112L427.059 220.632L427.576 220.541L428.284 220.413L436.296 218.956L440.317 218.228L441.025 218.1L444.791 217.414C445.895 217.209 446.999 217.004 448.103 216.799C448.344 216.764 448.578 216.714 448.811 216.672C449.852 216.481 450.885 216.29 451.919 216.099C452.917 215.915 453.901 215.731 454.892 215.547C455.09 215.512 455.295 215.469 455.493 215.434C456.845 215.194 458.19 214.939 459.535 214.691C459.967 214.953 460.406 215.201 460.845 215.448C461.078 215.583 461.312 215.71 461.552 215.837C470.684 220.788 480.707 222.811 491.169 221.814C493.618 221.58 496.003 221.191 498.325 220.647C507.379 218.546 515.384 214.126 522.229 207.435C533.35 196.599 538.687 183.19 537.979 167.573ZM327.677 159.786C328.647 156.038 330.02 152.268 331.797 149.403C333.524 146.589 335.647 143.632 338.153 141.425C340.362 139.488 342.825 137.67 345.529 136.453C350.194 134.325 355.602 133.15 361.732 133.15C370.481 133.15 377.58 136.63 383.017 141.935C387.54 146.348 390.591 152.834 392.176 159.786C392.502 161.187 392.764 162.58 392.962 164.001H326.714C326.983 162.58 327.295 161.222 327.677 159.786ZM207.095 160.493C209.035 153.52 212.517 146.963 217.543 142.543C223.574 137.246 231.438 134.134 241.114 134.134C249.87 134.134 256.963 137.493 262.406 142.791C266.922 147.204 269.98 153.569 271.559 160.486C271.885 161.88 272.146 163.287 272.345 164.702H206.097C206.373 163.287 206.699 161.894 207.095 160.493ZM485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.44 198.976C480.367 198.976 474.867 197.491 469.94 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.143 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.78 458.898 146.461C458.898 146.454 458.898 146.454 458.898 146.447C464.964 138.285 474.669 132.995 485.626 132.995ZM72.6818 169.129C73.0075 163.103 74.5081 157.608 77.1908 152.657C80.2417 147.027 84.4534 142.578 89.8259 139.332C95.1985 136.086 101.201 134.466 107.834 134.466C114.466 134.466 120.469 136.086 125.841 139.332C131.214 142.578 135.454 147.02 138.575 152.657C141.315 157.601 142.844 163.089 143.176 169.108C143.226 169.943 143.247 170.784 143.247 171.64C143.247 172.354 143.233 173.062 143.198 173.762C142.915 179.95 141.371 185.609 138.575 190.722C135.461 196.416 131.221 200.9 125.841 204.139C120.469 207.392 114.466 209.012 107.834 209.012C101.201 209.012 95.1985 207.392 89.8259 204.139C84.4604 200.9 80.2417 196.423 77.1908 190.722C74.4515 185.609 72.9437 179.95 72.6677 173.762C72.6323 173.062 72.6181 172.354 72.6181 171.64C72.6181 170.791 72.6394 169.957 72.6818 169.129Z",fill:"#A6A7A9",stroke:"white",strokeWidth:2,strokeMiterlimit:10}),u.createElement("path",{d:"M536.691 161.922C536.577 159.539 536.316 157.212 535.905 154.941C534.893 149.319 532.996 144.042 530.207 139.127C525.832 131.418 519.78 125.342 512.065 120.908C504.349 116.48 495.805 114.266 486.448 114.266C485.641 114.266 484.848 114.281 484.055 114.323C475.639 114.662 467.959 116.862 461.015 120.908C453.419 125.342 447.403 131.418 442.964 139.127C442.957 139.141 442.802 139.155 442.802 139.169C438.378 146.871 436.021 155.451 436.021 164.907V276.302C436.021 279.095 437.054 281.337 438.817 283.042C440.572 284.739 442.865 285.588 445.548 285.588C448.337 285.588 450.737 284.739 452.436 283.042C454.134 281.337 455.139 279.095 455.139 276.302V198.792C459.387 204.012 464.441 208.078 470.521 210.999C476.594 213.913 483.107 215.37 490.157 215.37C498.906 215.37 506.812 213.185 513.919 208.814C521.033 204.443 526.611 198.396 530.681 190.687C534.751 182.977 536.783 174.384 536.783 164.914C536.776 163.902 536.747 162.905 536.691 161.922ZM469.941 135.124C474.86 132.146 480.367 130.661 486.441 130.661C490.206 130.661 493.746 131.234 497.072 132.379C499.111 133.073 501.065 133.992 502.941 135.124C507.867 138.101 511.739 142.196 514.592 147.423C517.444 152.643 518.86 158.478 518.86 164.914V164.956C518.86 171.378 517.437 177.164 514.592 182.313C511.739 187.469 507.86 191.535 502.933 194.52C498.014 197.498 492.514 198.983 486.441 198.983C480.367 198.983 474.867 197.498 469.941 194.52C465.021 191.542 461.163 187.476 458.367 182.313C455.571 177.15 454.177 171.35 454.177 164.914C454.177 158.478 455.571 152.643 458.367 147.423C458.537 147.105 458.714 146.787 458.898 146.468C458.898 146.461 458.905 146.461 458.905 146.454C460.038 144.488 461.34 142.684 462.806 141.051C464.858 138.731 467.237 136.757 469.941 135.124Z",fill:"#154423"}),u.createElement("mask",{id:"mask0_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask0_61_306)"},u.createElement("path",{d:"M340.418 131.517H339.71V132.931H340.418V131.517Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask1_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask1_61_306)"},u.createElement("path",{d:"M341.126 131.517H340.418V132.931H341.126V131.517Z",fill:"#247B3D"})),u.createElement("mask",{id:"mask2_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask2_61_306)"},u.createElement("path",{d:"M341.834 131.517H341.126V132.931H341.834V131.517Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask3_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask3_61_306)"},u.createElement("path",{d:"M342.542 131.517H341.834V132.931H342.542V131.517Z",fill:"#5B9841"})),u.createElement("mask",{id:"mask4_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask4_61_306)"},u.createElement("path",{d:"M343.25 131.517H342.542V132.931H343.25V131.517Z",fill:"#74A841"})),u.createElement("mask",{id:"mask5_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask5_61_306)"},u.createElement("path",{d:"M343.958 131.517H343.25V132.931H343.958V131.517Z",fill:"#90B93E"})),u.createElement("mask",{id:"mask6_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask6_61_306)"},u.createElement("path",{d:"M344.665 131.517H343.958V132.931H344.665V131.517Z",fill:"#AAC637"})),u.createElement("mask",{id:"mask7_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:340,y:131,width:6,height:3},u.createElement("path",{d:"M345.062 131.488C343.335 131.969 341.65 132.535 340.008 133.193L345.062 131.488Z",fill:"white"})),u.createElement("g",{mask:"url(#mask7_61_306)"},u.createElement("path",{d:"M345.373 131.517H344.666V132.931H345.373V131.517Z",fill:"#C6D32F"})),u.createElement("mask",{id:"mask8_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask8_61_306)"},u.createElement("path",{d:"M386.981 214.097H386.974V214.875H386.981V214.097Z",fill:"#0A6938"})),u.createElement("mask",{id:"mask9_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask9_61_306)"},u.createElement("path",{d:"M386.988 214.097H386.981V214.875H386.988V214.097Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask10_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask10_61_306)"},u.createElement("path",{d:"M386.995 214.097H386.988V214.875H386.995V214.097Z",fill:"#0D6B38"})),u.createElement("mask",{id:"mask11_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask11_61_306)"},u.createElement("path",{d:"M387.002 214.097H386.995V214.875H387.002V214.097Z",fill:"#0B6D38"})),u.createElement("mask",{id:"mask12_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask12_61_306)"},u.createElement("path",{d:"M387.009 214.097H387.002V214.875H387.009V214.097Z",fill:"#0B6D38"})),u.createElement("mask",{id:"mask13_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask13_61_306)"},u.createElement("path",{d:"M387.016 214.097H387.009V214.875H387.016V214.097Z",fill:"#0F6C39"})),u.createElement("mask",{id:"mask14_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask14_61_306)"},u.createElement("path",{d:"M387.023 214.097H387.016V214.875H387.023V214.097Z",fill:"#0F6C39"})),u.createElement("mask",{id:"mask15_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask15_61_306)"},u.createElement("path",{d:"M387.03 214.097H387.023V214.875H387.03V214.097Z",fill:"#126E39"})),u.createElement("mask",{id:"mask16_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask16_61_306)"},u.createElement("path",{d:"M387.037 214.097H387.03V214.875H387.037V214.097Z",fill:"#116F39"})),u.createElement("mask",{id:"mask17_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask17_61_306)"},u.createElement("path",{d:"M387.044 214.097H387.037V214.875H387.044V214.097Z",fill:"#146F3A"})),u.createElement("mask",{id:"mask18_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask18_61_306)"},u.createElement("path",{d:"M387.051 214.097H387.044V214.875H387.051V214.097Z",fill:"#13703A"})),u.createElement("mask",{id:"mask19_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask19_61_306)"},u.createElement("path",{d:"M387.058 214.097H387.052V214.875H387.058V214.097Z",fill:"#146F3A"})),u.createElement("mask",{id:"mask20_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask20_61_306)"},u.createElement("path",{d:"M387.066 214.097H387.059V214.875H387.066V214.097Z",fill:"#16713A"})),u.createElement("mask",{id:"mask21_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask21_61_306)"},u.createElement("path",{d:"M387.073 214.097H387.066V214.875H387.073V214.097Z",fill:"#16713A"})),u.createElement("mask",{id:"mask22_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask22_61_306)"},u.createElement("path",{d:"M387.08 214.097H387.073V214.875H387.08V214.097Z",fill:"#15723A"})),u.createElement("mask",{id:"mask23_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask23_61_306)"},u.createElement("path",{d:"M387.087 214.097H387.08V214.875H387.087V214.097Z",fill:"#18723B"})),u.createElement("mask",{id:"mask24_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask24_61_306)"},u.createElement("path",{d:"M387.094 214.097H387.087V214.875H387.094V214.097Z",fill:"#18723B"})),u.createElement("mask",{id:"mask25_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask25_61_306)"},u.createElement("path",{d:"M387.101 214.097H387.094V214.875H387.101V214.097Z",fill:"#17733C"})),u.createElement("mask",{id:"mask26_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask26_61_306)"},u.createElement("path",{d:"M387.108 214.097H387.101V214.875H387.108V214.097Z",fill:"#19753B"})),u.createElement("mask",{id:"mask27_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask27_61_306)"},u.createElement("path",{d:"M387.115 214.097H387.108V214.875H387.115V214.097Z",fill:"#19753B"})),u.createElement("mask",{id:"mask28_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask28_61_306)"},u.createElement("path",{d:"M387.122 214.097H387.115V214.875H387.122V214.097Z",fill:"#1B763C"})),u.createElement("mask",{id:"mask29_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask29_61_306)"},u.createElement("path",{d:"M387.129 214.097H387.122V214.875H387.129V214.097Z",fill:"#1B763C"})),u.createElement("mask",{id:"mask30_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask30_61_306)"},u.createElement("path",{d:"M387.136 214.097H387.129V214.875H387.136V214.097Z",fill:"#1A783C"})),u.createElement("mask",{id:"mask31_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask31_61_306)"},u.createElement("path",{d:"M387.143 214.097H387.136V214.875H387.143V214.097Z",fill:"#1D783C"})),u.createElement("mask",{id:"mask32_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask32_61_306)"},u.createElement("path",{d:"M387.15 214.097H387.144V214.875H387.15V214.097Z",fill:"#1F793D"})),u.createElement("mask",{id:"mask33_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask33_61_306)"},u.createElement("path",{d:"M387.158 214.097H387.151V214.875H387.158V214.097Z",fill:"#1F793D"})),u.createElement("mask",{id:"mask34_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask34_61_306)"},u.createElement("path",{d:"M387.165 214.097H387.158V214.875H387.165V214.097Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask35_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask35_61_306)"},u.createElement("path",{d:"M387.172 214.097H387.165V214.875H387.172V214.097Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask36_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask36_61_306)"},u.createElement("path",{d:"M387.179 214.097H387.172V214.875H387.179V214.097Z",fill:"#257B3D"})),u.createElement("mask",{id:"mask37_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask37_61_306)"},u.createElement("path",{d:"M387.186 214.097H387.179V214.875H387.186V214.097Z",fill:"#257B3D"})),u.createElement("mask",{id:"mask38_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask38_61_306)"},u.createElement("path",{d:"M387.186 214.097H387.179V214.875H387.186V214.097Z",fill:"#247B3D"})),u.createElement("mask",{id:"mask39_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask39_61_306)"},u.createElement("path",{d:"M387.193 214.097H387.186V214.875H387.193V214.097Z",fill:"#267C3D"})),u.createElement("mask",{id:"mask40_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask40_61_306)"},u.createElement("path",{d:"M387.2 214.097H387.193V214.875H387.2V214.097Z",fill:"#267C3D"})),u.createElement("mask",{id:"mask41_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask41_61_306)"},u.createElement("path",{d:"M387.207 214.097H387.2V214.875H387.207V214.097Z",fill:"#277D3E"})),u.createElement("mask",{id:"mask42_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask42_61_306)"},u.createElement("path",{d:"M387.214 214.097H387.207V214.875H387.214V214.097Z",fill:"#2A7D3E"})),u.createElement("mask",{id:"mask43_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask43_61_306)"},u.createElement("path",{d:"M387.221 214.097H387.214V214.875H387.221V214.097Z",fill:"#2B7F3E"})),u.createElement("mask",{id:"mask44_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask44_61_306)"},u.createElement("path",{d:"M387.228 214.097H387.221V214.875H387.228V214.097Z",fill:"#2B7F3E"})),u.createElement("mask",{id:"mask45_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask45_61_306)"},u.createElement("path",{d:"M387.235 214.097H387.229V214.875H387.235V214.097Z",fill:"#2D803E"})),u.createElement("mask",{id:"mask46_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask46_61_306)"},u.createElement("path",{d:"M387.243 214.097H387.236V214.875H387.243V214.097Z",fill:"#2C803F"})),u.createElement("mask",{id:"mask47_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask47_61_306)"},u.createElement("path",{d:"M387.25 214.097H387.243V214.875H387.25V214.097Z",fill:"#2D803E"})),u.createElement("mask",{id:"mask48_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask48_61_306)"},u.createElement("path",{d:"M387.257 214.097H387.25V214.875H387.257V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask49_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask49_61_306)"},u.createElement("path",{d:"M387.264 214.097H387.257V214.875H387.264V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask50_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask50_61_306)"},u.createElement("path",{d:"M387.271 214.097H387.264V214.875H387.271V214.097Z",fill:"#32813F"})),u.createElement("mask",{id:"mask51_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask51_61_306)"},u.createElement("path",{d:"M387.278 214.097H387.271V214.875H387.278V214.097Z",fill:"#30803F"})),u.createElement("mask",{id:"mask52_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask52_61_306)"},u.createElement("path",{d:"M387.285 214.097H387.278V214.875H387.285V214.097Z",fill:"#33823F"})),u.createElement("mask",{id:"mask53_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask53_61_306)"},u.createElement("path",{d:"M387.292 214.097H387.285V214.875H387.292V214.097Z",fill:"#33823F"})),u.createElement("mask",{id:"mask54_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask54_61_306)"},u.createElement("path",{d:"M387.299 214.097H387.292V214.875H387.299V214.097Z",fill:"#358340"})),u.createElement("mask",{id:"mask55_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask55_61_306)"},u.createElement("path",{d:"M387.306 214.097H387.299V214.875H387.306V214.097Z",fill:"#378240"})),u.createElement("mask",{id:"mask56_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask56_61_306)"},u.createElement("path",{d:"M387.313 214.097H387.306V214.875H387.313V214.097Z",fill:"#368440"})),u.createElement("mask",{id:"mask57_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask57_61_306)"},u.createElement("path",{d:"M387.32 214.097H387.313V214.875H387.32V214.097Z",fill:"#388340"})),u.createElement("mask",{id:"mask58_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask58_61_306)"},u.createElement("path",{d:"M387.327 214.097H387.321V214.875H387.327V214.097Z",fill:"#3A8440"})),u.createElement("mask",{id:"mask59_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask59_61_306)"},u.createElement("path",{d:"M387.335 214.097H387.328V214.875H387.335V214.097Z",fill:"#3A8440"})),u.createElement("mask",{id:"mask60_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask60_61_306)"},u.createElement("path",{d:"M387.342 214.097H387.335V214.875H387.342V214.097Z",fill:"#3B8640"})),u.createElement("mask",{id:"mask61_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask61_61_306)"},u.createElement("path",{d:"M387.349 214.097H387.342V214.875H387.349V214.097Z",fill:"#3B8641"})),u.createElement("mask",{id:"mask62_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask62_61_306)"},u.createElement("path",{d:"M387.356 214.097H387.349V214.875H387.356V214.097Z",fill:"#3B8641"})),u.createElement("mask",{id:"mask63_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask63_61_306)"},u.createElement("path",{d:"M387.363 214.097H387.356V214.875H387.363V214.097Z",fill:"#3E8742"})),u.createElement("mask",{id:"mask64_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask64_61_306)"},u.createElement("path",{d:"M387.37 214.097H387.363V214.875H387.37V214.097Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask65_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask65_61_306)"},u.createElement("path",{d:"M387.377 214.097H387.37V214.875H387.377V214.097Z",fill:"#3E8841"})),u.createElement("mask",{id:"mask66_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask66_61_306)"},u.createElement("path",{d:"M387.384 214.097H387.377V214.875H387.384V214.097Z",fill:"#418842"})),u.createElement("mask",{id:"mask67_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask67_61_306)"},u.createElement("path",{d:"M387.391 214.097H387.384V214.875H387.391V214.097Z",fill:"#438941"})),u.createElement("mask",{id:"mask68_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask68_61_306)"},u.createElement("path",{d:"M387.398 214.097H387.391V214.875H387.398V214.097Z",fill:"#428A40"})),u.createElement("mask",{id:"mask69_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask69_61_306)"},u.createElement("path",{d:"M387.405 214.097H387.398V214.875H387.405V214.097Z",fill:"#458A41"})),u.createElement("mask",{id:"mask70_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask70_61_306)"},u.createElement("path",{d:"M387.412 214.097H387.405V214.875H387.412V214.097Z",fill:"#448C41"})),u.createElement("mask",{id:"mask71_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask71_61_306)"},u.createElement("path",{d:"M387.419 214.097H387.412V214.875H387.419V214.097Z",fill:"#458B40"})),u.createElement("mask",{id:"mask72_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask72_61_306)"},u.createElement("path",{d:"M387.426 214.097H387.419V214.875H387.426V214.097Z",fill:"#478D41"})),u.createElement("mask",{id:"mask73_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask73_61_306)"},u.createElement("path",{d:"M387.434 214.097H387.427V214.875H387.434V214.097Z",fill:"#478C40"})),u.createElement("mask",{id:"mask74_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask74_61_306)"},u.createElement("path",{d:"M387.441 214.097H387.434V214.875H387.441V214.097Z",fill:"#4A8D41"})),u.createElement("mask",{id:"mask75_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask75_61_306)"},u.createElement("path",{d:"M387.448 214.097H387.441V214.875H387.448V214.097Z",fill:"#498E42"})),u.createElement("mask",{id:"mask76_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask76_61_306)"},u.createElement("path",{d:"M387.455 214.097H387.448V214.875H387.455V214.097Z",fill:"#4B8E41"})),u.createElement("mask",{id:"mask77_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask77_61_306)"},u.createElement("path",{d:"M387.462 214.097H387.455V214.875H387.462V214.097Z",fill:"#4B8F42"})),u.createElement("mask",{id:"mask78_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask78_61_306)"},u.createElement("path",{d:"M387.469 214.097H387.462V214.875H387.469V214.097Z",fill:"#4D8F42"})),u.createElement("mask",{id:"mask79_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask79_61_306)"},u.createElement("path",{d:"M387.476 214.097H387.469V214.875H387.476V214.097Z",fill:"#4D9142"})),u.createElement("mask",{id:"mask80_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask80_61_306)"},u.createElement("path",{d:"M387.483 214.097H387.476V214.875H387.483V214.097Z",fill:"#4F9242"})),u.createElement("mask",{id:"mask81_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask81_61_306)"},u.createElement("path",{d:"M387.49 214.097H387.483V214.875H387.49V214.097Z",fill:"#4F9142"})),u.createElement("mask",{id:"mask82_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask82_61_306)"},u.createElement("path",{d:"M387.497 214.097H387.49V214.875H387.497V214.097Z",fill:"#509242"})),u.createElement("mask",{id:"mask83_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask83_61_306)"},u.createElement("path",{d:"M387.504 214.097H387.497V214.875H387.504V214.097Z",fill:"#519242"})),u.createElement("mask",{id:"mask84_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask84_61_306)"},u.createElement("path",{d:"M387.511 214.097H387.504V214.875H387.511V214.097Z",fill:"#539342"})),u.createElement("mask",{id:"mask85_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask85_61_306)"},u.createElement("path",{d:"M387.518 214.097H387.511V214.875H387.518V214.097Z",fill:"#539342"})),u.createElement("mask",{id:"mask86_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask86_61_306)"},u.createElement("path",{d:"M387.525 214.097H387.519V214.875H387.525V214.097Z",fill:"#549442"})),u.createElement("mask",{id:"mask87_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask87_61_306)"},u.createElement("path",{d:"M387.533 214.097H387.526V214.875H387.533V214.097Z",fill:"#559542"})),u.createElement("mask",{id:"mask88_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask88_61_306)"},u.createElement("path",{d:"M387.54 214.097H387.533V214.875H387.54V214.097Z",fill:"#579542"})),u.createElement("mask",{id:"mask89_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask89_61_306)"},u.createElement("path",{d:"M387.547 214.097H387.54V214.875H387.547V214.097Z",fill:"#579641"})),u.createElement("mask",{id:"mask90_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask90_61_306)"},u.createElement("path",{d:"M387.554 214.097H387.547V214.875H387.554V214.097Z",fill:"#579641"})),u.createElement("mask",{id:"mask91_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask91_61_306)"},u.createElement("path",{d:"M387.561 214.097H387.554V214.875H387.561V214.097Z",fill:"#589742"})),u.createElement("mask",{id:"mask92_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask92_61_306)"},u.createElement("path",{d:"M387.568 214.097H387.561V214.875H387.568V214.097Z",fill:"#599842"})),u.createElement("mask",{id:"mask93_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask93_61_306)"},u.createElement("path",{d:"M387.575 214.097H387.568V214.875H387.575V214.097Z",fill:"#5B9841"})),u.createElement("mask",{id:"mask94_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask94_61_306)"},u.createElement("path",{d:"M387.582 214.097H387.575V214.875H387.582V214.097Z",fill:"#5C9942"})),u.createElement("mask",{id:"mask95_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask95_61_306)"},u.createElement("path",{d:"M387.589 214.097H387.582V214.875H387.589V214.097Z",fill:"#5C9942"})),u.createElement("mask",{id:"mask96_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask96_61_306)"},u.createElement("path",{d:"M387.596 214.097H387.589V214.875H387.596V214.097Z",fill:"#5D9A42"})),u.createElement("mask",{id:"mask97_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask97_61_306)"},u.createElement("path",{d:"M387.603 214.097H387.596V214.875H387.603V214.097Z",fill:"#5F9A42"})),u.createElement("mask",{id:"mask98_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask98_61_306)"},u.createElement("path",{d:"M387.61 214.097H387.604V214.875H387.61V214.097Z",fill:"#609B42"})),u.createElement("mask",{id:"mask99_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask99_61_306)"},u.createElement("path",{d:"M387.617 214.097H387.611V214.875H387.617V214.097Z",fill:"#609B41"})),u.createElement("mask",{id:"mask100_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask100_61_306)"},u.createElement("path",{d:"M387.625 214.097H387.618V214.875H387.625V214.097Z",fill:"#619D42"})),u.createElement("mask",{id:"mask101_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask101_61_306)"},u.createElement("path",{d:"M387.632 214.097H387.625V214.875H387.632V214.097Z",fill:"#629D42"})),u.createElement("mask",{id:"mask102_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask102_61_306)"},u.createElement("path",{d:"M387.639 214.097H387.632V214.875H387.639V214.097Z",fill:"#629D42"})),u.createElement("mask",{id:"mask103_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask103_61_306)"},u.createElement("path",{d:"M387.646 214.097H387.639V214.875H387.646V214.097Z",fill:"#629F42"})),u.createElement("mask",{id:"mask104_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask104_61_306)"},u.createElement("path",{d:"M387.653 214.097H387.646V214.875H387.653V214.097Z",fill:"#649D42"})),u.createElement("mask",{id:"mask105_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask105_61_306)"},u.createElement("path",{d:"M387.66 214.097H387.653V214.875H387.66V214.097Z",fill:"#659F41"})),u.createElement("mask",{id:"mask106_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask106_61_306)"},u.createElement("path",{d:"M387.667 214.097H387.66V214.875H387.667V214.097Z",fill:"#669F41"})),u.createElement("mask",{id:"mask107_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask107_61_306)"},u.createElement("path",{d:"M387.674 214.097H387.667V214.875H387.674V214.097Z",fill:"#69A041"})),u.createElement("mask",{id:"mask108_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask108_61_306)"},u.createElement("path",{d:"M387.681 214.097H387.674V214.875H387.681V214.097Z",fill:"#6AA141"})),u.createElement("mask",{id:"mask109_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask109_61_306)"},u.createElement("path",{d:"M387.688 214.097H387.681V214.875H387.688V214.097Z",fill:"#6BA141"})),u.createElement("mask",{id:"mask110_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask110_61_306)"},u.createElement("path",{d:"M387.695 214.097H387.688V214.875H387.695V214.097Z",fill:"#6BA241"})),u.createElement("mask",{id:"mask111_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask111_61_306)"},u.createElement("path",{d:"M387.702 214.097H387.696V214.875H387.702V214.097Z",fill:"#6CA241"})),u.createElement("mask",{id:"mask112_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask112_61_306)"},u.createElement("path",{d:"M387.71 214.097H387.703V214.875H387.71V214.097Z",fill:"#6DA442"})),u.createElement("mask",{id:"mask113_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask113_61_306)"},u.createElement("path",{d:"M387.717 214.097H387.71V214.875H387.717V214.097Z",fill:"#6DA442"})),u.createElement("mask",{id:"mask114_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask114_61_306)"},u.createElement("path",{d:"M387.724 214.097H387.717V214.875H387.724V214.097Z",fill:"#6FA542"})),u.createElement("mask",{id:"mask115_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask115_61_306)"},u.createElement("path",{d:"M387.731 214.097H387.724V214.875H387.731V214.097Z",fill:"#70A642"})),u.createElement("mask",{id:"mask116_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask116_61_306)"},u.createElement("path",{d:"M387.738 214.097H387.731V214.875H387.738V214.097Z",fill:"#71A541"})),u.createElement("mask",{id:"mask117_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask117_61_306)"},u.createElement("path",{d:"M387.745 214.097H387.738V214.875H387.745V214.097Z",fill:"#71A642"})),u.createElement("mask",{id:"mask118_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask118_61_306)"},u.createElement("path",{d:"M387.752 214.097H387.745V214.875H387.752V214.097Z",fill:"#72A642"})),u.createElement("mask",{id:"mask119_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask119_61_306)"},u.createElement("path",{d:"M387.759 214.097H387.752V214.875H387.759V214.097Z",fill:"#73A841"})),u.createElement("mask",{id:"mask120_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask120_61_306)"},u.createElement("path",{d:"M387.766 214.097H387.759V214.875H387.766V214.097Z",fill:"#74A841"})),u.createElement("mask",{id:"mask121_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask121_61_306)"},u.createElement("path",{d:"M387.773 214.097H387.766V214.875H387.773V214.097Z",fill:"#76A841"})),u.createElement("mask",{id:"mask122_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask122_61_306)"},u.createElement("path",{d:"M387.78 214.097H387.773V214.875H387.78V214.097Z",fill:"#77A940"})),u.createElement("mask",{id:"mask123_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask123_61_306)"},u.createElement("path",{d:"M387.787 214.097H387.781V214.875H387.787V214.097Z",fill:"#78A941"})),u.createElement("mask",{id:"mask124_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask124_61_306)"},u.createElement("path",{d:"M387.794 214.097H387.788V214.875H387.794V214.097Z",fill:"#7AAA41"})),u.createElement("mask",{id:"mask125_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask125_61_306)"},u.createElement("path",{d:"M387.802 214.097H387.795V214.875H387.802V214.097Z",fill:"#7BAA40"})),u.createElement("mask",{id:"mask126_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask126_61_306)"},u.createElement("path",{d:"M387.809 214.097H387.802V214.875H387.809V214.097Z",fill:"#7CAC3F"})),u.createElement("mask",{id:"mask127_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask127_61_306)"},u.createElement("path",{d:"M387.816 214.097H387.809V214.875H387.816V214.097Z",fill:"#7DAD3F"})),u.createElement("mask",{id:"mask128_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask128_61_306)"},u.createElement("path",{d:"M387.823 214.097H387.816V214.875H387.823V214.097Z",fill:"#7EAC40"})),u.createElement("mask",{id:"mask129_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask129_61_306)"},u.createElement("path",{d:"M387.83 214.097H387.823V214.875H387.83V214.097Z",fill:"#7EAE40"})),u.createElement("mask",{id:"mask130_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask130_61_306)"},u.createElement("path",{d:"M387.837 214.097H387.83V214.875H387.837V214.097Z",fill:"#7FAD40"})),u.createElement("mask",{id:"mask131_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask131_61_306)"},u.createElement("path",{d:"M387.844 214.097H387.837V214.875H387.844V214.097Z",fill:"#7FAE3F"})),u.createElement("mask",{id:"mask132_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask132_61_306)"},u.createElement("path",{d:"M387.851 214.097H387.844V214.875H387.851V214.097Z",fill:"#80AD3F"})),u.createElement("mask",{id:"mask133_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask133_61_306)"},u.createElement("path",{d:"M387.858 214.097H387.851V214.875H387.858V214.097Z",fill:"#81AF3F"})),u.createElement("mask",{id:"mask134_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask134_61_306)"},u.createElement("path",{d:"M387.865 214.097H387.858V214.875H387.865V214.097Z",fill:"#82B13E"})),u.createElement("mask",{id:"mask135_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask135_61_306)"},u.createElement("path",{d:"M387.872 214.097H387.865V214.875H387.872V214.097Z",fill:"#83B03E"})),u.createElement("mask",{id:"mask136_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask136_61_306)"},u.createElement("path",{d:"M387.879 214.097H387.873V214.875H387.879V214.097Z",fill:"#84B23F"})),u.createElement("mask",{id:"mask137_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask137_61_306)"},u.createElement("path",{d:"M387.887 214.097H387.88V214.875H387.887V214.097Z",fill:"#84B23F"})),u.createElement("mask",{id:"mask138_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask138_61_306)"},u.createElement("path",{d:"M387.894 214.097H387.887V214.875H387.894V214.097Z",fill:"#85B340"})),u.createElement("mask",{id:"mask139_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask139_61_306)"},u.createElement("path",{d:"M387.901 214.097H387.894V214.875H387.901V214.097Z",fill:"#86B33F"})),u.createElement("mask",{id:"mask140_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask140_61_306)"},u.createElement("path",{d:"M387.908 214.097H387.901V214.875H387.908V214.097Z",fill:"#87B43F"})),u.createElement("mask",{id:"mask141_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask141_61_306)"},u.createElement("path",{d:"M387.915 214.097H387.908V214.875H387.915V214.097Z",fill:"#8AB53F"})),u.createElement("mask",{id:"mask142_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask142_61_306)"},u.createElement("path",{d:"M387.922 214.097H387.915V214.875H387.922V214.097Z",fill:"#8BB53F"})),u.createElement("mask",{id:"mask143_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask143_61_306)"},u.createElement("path",{d:"M387.929 214.097H387.922V214.875H387.929V214.097Z",fill:"#8CB63E"})),u.createElement("mask",{id:"mask144_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask144_61_306)"},u.createElement("path",{d:"M387.936 214.097H387.929V214.875H387.936V214.097Z",fill:"#8CB63E"})),u.createElement("mask",{id:"mask145_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask145_61_306)"},u.createElement("path",{d:"M387.943 214.097H387.936V214.875H387.943V214.097Z",fill:"#8CB73E"})),u.createElement("mask",{id:"mask146_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask146_61_306)"},u.createElement("path",{d:"M387.95 214.097H387.943V214.875H387.95V214.097Z",fill:"#8DB83D"})),u.createElement("mask",{id:"mask147_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask147_61_306)"},u.createElement("path",{d:"M387.957 214.097H387.95V214.875H387.957V214.097Z",fill:"#8EB83D"})),u.createElement("mask",{id:"mask148_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask148_61_306)"},u.createElement("path",{d:"M387.964 214.097H387.958V214.875H387.964V214.097Z",fill:"#90B93E"})),u.createElement("mask",{id:"mask149_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask149_61_306)"},u.createElement("path",{d:"M387.971 214.097H387.965V214.875H387.971V214.097Z",fill:"#91BA3D"})),u.createElement("mask",{id:"mask150_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask150_61_306)"},u.createElement("path",{d:"M387.979 214.097H387.972V214.875H387.979V214.097Z",fill:"#92BB3C"})),u.createElement("mask",{id:"mask151_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask151_61_306)"},u.createElement("path",{d:"M387.986 214.097H387.979V214.875H387.986V214.097Z",fill:"#92BA3C"})),u.createElement("mask",{id:"mask152_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask152_61_306)"},u.createElement("path",{d:"M387.993 214.097H387.986V214.875H387.993V214.097Z",fill:"#93BB3C"})),u.createElement("mask",{id:"mask153_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask153_61_306)"},u.createElement("path",{d:"M388 214.097H387.993V214.875H388V214.097Z",fill:"#95BD3C"})),u.createElement("mask",{id:"mask154_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask154_61_306)"},u.createElement("path",{d:"M388.007 214.097H388V214.875H388.007V214.097Z",fill:"#97BC3B"})),u.createElement("mask",{id:"mask155_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask155_61_306)"},u.createElement("path",{d:"M388.014 214.097H388.007V214.875H388.014V214.097Z",fill:"#97BD3B"})),u.createElement("mask",{id:"mask156_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask156_61_306)"},u.createElement("path",{d:"M388.021 214.097H388.014V214.875H388.021V214.097Z",fill:"#98BD3C"})),u.createElement("mask",{id:"mask157_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask157_61_306)"},u.createElement("path",{d:"M388.028 214.097H388.021V214.875H388.028V214.097Z",fill:"#9ABE3C"})),u.createElement("mask",{id:"mask158_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask158_61_306)"},u.createElement("path",{d:"M388.035 214.097H388.028V214.875H388.035V214.097Z",fill:"#9BBD3C"})),u.createElement("mask",{id:"mask159_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask159_61_306)"},u.createElement("path",{d:"M388.042 214.097H388.035V214.875H388.042V214.097Z",fill:"#9BBE3D"})),u.createElement("mask",{id:"mask160_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask160_61_306)"},u.createElement("path",{d:"M388.049 214.097H388.042V214.875H388.049V214.097Z",fill:"#9BBF3B"})),u.createElement("mask",{id:"mask161_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask161_61_306)"},u.createElement("path",{d:"M388.056 214.097H388.05V214.875H388.056V214.097Z",fill:"#9CBF3A"})),u.createElement("mask",{id:"mask162_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask162_61_306)"},u.createElement("path",{d:"M388.064 214.097H388.057V214.875H388.064V214.097Z",fill:"#9DC03A"})),u.createElement("mask",{id:"mask163_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask163_61_306)"},u.createElement("path",{d:"M388.071 214.097H388.064V214.875H388.071V214.097Z",fill:"#9FC03A"})),u.createElement("mask",{id:"mask164_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask164_61_306)"},u.createElement("path",{d:"M388.078 214.097H388.071V214.875H388.078V214.097Z",fill:"#A0C139"})),u.createElement("mask",{id:"mask165_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask165_61_306)"},u.createElement("path",{d:"M388.085 214.097H388.078V214.875H388.085V214.097Z",fill:"#A1C239"})),u.createElement("mask",{id:"mask166_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask166_61_306)"},u.createElement("path",{d:"M388.092 214.097H388.085V214.875H388.092V214.097Z",fill:"#A2C239"})),u.createElement("mask",{id:"mask167_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask167_61_306)"},u.createElement("path",{d:"M388.099 214.097H388.092V214.875H388.099V214.097Z",fill:"#A3C338"})),u.createElement("mask",{id:"mask168_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask168_61_306)"},u.createElement("path",{d:"M388.106 214.097H388.099V214.875H388.106V214.097Z",fill:"#A4C337"})),u.createElement("mask",{id:"mask169_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask169_61_306)"},u.createElement("path",{d:"M388.113 214.097H388.106V214.875H388.113V214.097Z",fill:"#A5C438"})),u.createElement("mask",{id:"mask170_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask170_61_306)"},u.createElement("path",{d:"M388.12 214.097H388.113V214.875H388.12V214.097Z",fill:"#A6C438"})),u.createElement("mask",{id:"mask171_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask171_61_306)"},u.createElement("path",{d:"M388.127 214.097H388.12V214.875H388.127V214.097Z",fill:"#A7C538"})),u.createElement("mask",{id:"mask172_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask172_61_306)"},u.createElement("path",{d:"M388.134 214.097H388.127V214.875H388.134V214.097Z",fill:"#A6C639"})),u.createElement("mask",{id:"mask173_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask173_61_306)"},u.createElement("path",{d:"M388.141 214.097H388.135V214.875H388.141V214.097Z",fill:"#A8C537"})),u.createElement("mask",{id:"mask174_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask174_61_306)"},u.createElement("path",{d:"M388.148 214.097H388.142V214.875H388.148V214.097Z",fill:"#A9C637"})),u.createElement("mask",{id:"mask175_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask175_61_306)"},u.createElement("path",{d:"M388.156 214.097H388.149V214.875H388.156V214.097Z",fill:"#AAC637"})),u.createElement("mask",{id:"mask176_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask176_61_306)"},u.createElement("path",{d:"M388.163 214.097H388.156V214.875H388.163V214.097Z",fill:"#ACC735"})),u.createElement("mask",{id:"mask177_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask177_61_306)"},u.createElement("path",{d:"M388.17 214.097H388.163V214.875H388.17V214.097Z",fill:"#ADC735"})),u.createElement("mask",{id:"mask178_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask178_61_306)"},u.createElement("path",{d:"M388.177 214.097H388.17V214.875H388.177V214.097Z",fill:"#AEC835"})),u.createElement("mask",{id:"mask179_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask179_61_306)"},u.createElement("path",{d:"M388.184 214.097H388.177V214.875H388.184V214.097Z",fill:"#AFC933"})),u.createElement("mask",{id:"mask180_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask180_61_306)"},u.createElement("path",{d:"M388.191 214.097H388.184V214.875H388.191V214.097Z",fill:"#B0CA34"})),u.createElement("mask",{id:"mask181_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask181_61_306)"},u.createElement("path",{d:"M388.198 214.097H388.191V214.875H388.198V214.097Z",fill:"#B2CC36"})),u.createElement("mask",{id:"mask182_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask182_61_306)"},u.createElement("path",{d:"M388.205 214.097H388.198V214.875H388.205V214.097Z",fill:"#B2CA35"})),u.createElement("mask",{id:"mask183_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask183_61_306)"},u.createElement("path",{d:"M388.212 214.097H388.205V214.875H388.212V214.097Z",fill:"#B3CC35"})),u.createElement("mask",{id:"mask184_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask184_61_306)"},u.createElement("path",{d:"M388.219 214.097H388.212V214.875H388.219V214.097Z",fill:"#B5CD36"})),u.createElement("mask",{id:"mask185_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask185_61_306)"},u.createElement("path",{d:"M388.226 214.097H388.219V214.875H388.226V214.097Z",fill:"#B6CD35"})),u.createElement("mask",{id:"mask186_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask186_61_306)"},u.createElement("path",{d:"M388.233 214.097H388.227V214.875H388.233V214.097Z",fill:"#B7CE34"})),u.createElement("mask",{id:"mask187_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask187_61_306)"},u.createElement("path",{d:"M388.241 214.097H388.234V214.875H388.241V214.097Z",fill:"#B8CE34"})),u.createElement("mask",{id:"mask188_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask188_61_306)"},u.createElement("path",{d:"M388.248 214.097H388.241V214.875H388.248V214.097Z",fill:"#B8CE33"})),u.createElement("mask",{id:"mask189_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask189_61_306)"},u.createElement("path",{d:"M388.255 214.097H388.248V214.875H388.255V214.097Z",fill:"#B8CE33"})),u.createElement("mask",{id:"mask190_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask190_61_306)"},u.createElement("path",{d:"M388.262 214.097H388.255V214.875H388.262V214.097Z",fill:"#B9CE34"})),u.createElement("mask",{id:"mask191_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask191_61_306)"},u.createElement("path",{d:"M388.269 214.097H388.262V214.875H388.269V214.097Z",fill:"#BACF33"})),u.createElement("mask",{id:"mask192_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask192_61_306)"},u.createElement("path",{d:"M388.276 214.097H388.269V214.875H388.276V214.097Z",fill:"#BBCF33"})),u.createElement("mask",{id:"mask193_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask193_61_306)"},u.createElement("path",{d:"M388.283 214.097H388.276V214.875H388.283V214.097Z",fill:"#BCCF34"})),u.createElement("mask",{id:"mask194_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask194_61_306)"},u.createElement("path",{d:"M388.29 214.097H388.283V214.875H388.29V214.097Z",fill:"#BCD032"})),u.createElement("mask",{id:"mask195_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask195_61_306)"},u.createElement("path",{d:"M388.297 214.097H388.29V214.875H388.297V214.097Z",fill:"#BDD033"})),u.createElement("mask",{id:"mask196_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask196_61_306)"},u.createElement("path",{d:"M388.304 214.097H388.297V214.875H388.304V214.097Z",fill:"#BED032"})),u.createElement("mask",{id:"mask197_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask197_61_306)"},u.createElement("path",{d:"M388.311 214.097H388.304V214.875H388.311V214.097Z",fill:"#BFD131"})),u.createElement("mask",{id:"mask198_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask198_61_306)"},u.createElement("path",{d:"M388.318 214.097H388.312V214.875H388.318V214.097Z",fill:"#C1D231"})),u.createElement("mask",{id:"mask199_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask199_61_306)"},u.createElement("path",{d:"M388.325 214.097H388.319V214.875H388.325V214.097Z",fill:"#C2D232"})),u.createElement("mask",{id:"mask200_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask200_61_306)"},u.createElement("path",{d:"M388.333 214.097H388.326V214.875H388.333V214.097Z",fill:"#C3D233"})),u.createElement("mask",{id:"mask201_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask201_61_306)"},u.createElement("path",{d:"M388.34 214.097H388.333V214.875H388.34V214.097Z",fill:"#C4D330"})),u.createElement("mask",{id:"mask202_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask202_61_306)"},u.createElement("path",{d:"M388.347 214.097H388.34V214.875H388.347V214.097Z",fill:"#C5D331"})),u.createElement("mask",{id:"mask203_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask203_61_306)"},u.createElement("path",{d:"M388.354 214.097H388.347V214.875H388.354V214.097Z",fill:"#C6D32F"})),u.createElement("mask",{id:"mask204_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:386,y:214,width:3,height:1},u.createElement("path",{d:"M387.851 214.309C387.851 214.309 387.526 214.522 386.974 214.875C387.441 214.621 387.908 214.366 388.361 214.097C388.035 214.224 387.851 214.309 387.851 214.309Z",fill:"white"})),u.createElement("g",{mask:"url(#mask204_61_306)"},u.createElement("path",{d:"M388.361 214.097H388.354V214.875H388.361V214.097Z",fill:"#C6D332"})),u.createElement("path",{d:"M538.014 162.523C537.873 159.185 537.427 155.953 536.677 152.834C535.211 146.666 532.585 140.944 528.834 135.739C519.837 123.319 508.334 116.027 494.623 114.026C493.788 113.899 492.953 113.792 492.103 113.715C487.899 113.304 483.475 113.389 478.93 113.969C475.143 114.457 471.519 115.327 468.065 116.565C467.796 116.657 467.527 116.756 467.265 116.862C465.361 117.301 463.499 117.845 461.694 118.496C449.172 125.639 439.588 137.408 431.066 149.198C430.379 150.139 429.706 151.087 429.034 152.027C417.213 168.641 406.51 185.715 389.062 195.701C388.609 195.977 388.142 196.232 387.674 196.486C387.667 196.493 387.653 196.5 387.639 196.507C386.896 196.974 385.756 197.682 384.44 198.438C382.139 199.782 379.308 201.296 377.156 202.024C372.845 203.481 368.704 204.21 364.719 204.21C354.639 204.21 346.117 202.491 339.159 196.79C333.411 192.087 329.546 187.172 327.543 180.339C327.437 180 327.345 179.618 327.253 179.271C326.962 178.14 326.715 177.44 326.523 176.025H402.122C404.776 176.025 406.963 173.79 408.69 172.128C410.12 170.749 410.963 168.542 411.196 166.434C411.203 166.378 411.21 166.321 411.217 166.265C411.253 165.897 411.274 165.458 411.274 165.091C411.274 154.623 409.285 145.025 405.307 136.941C401.329 128.857 395.624 122.407 388.198 117.902C380.766 113.396 371.946 111.062 361.739 111.062C356.09 111.062 350.76 111.72 345.763 113.135C344.036 113.616 342.351 114.16 340.709 114.818C330.947 119.253 323.069 126.834 316.224 135.414C309.868 143.37 304.389 152.197 299.094 160.154C296.178 164.546 293.304 168.867 290.402 173.012C290.225 173.274 290.041 173.535 289.857 173.797C289.177 174.766 288.498 175.721 287.811 176.662C287.125 177.609 286.438 178.543 285.744 179.455C283.925 181.867 282.085 184.173 280.202 186.351C278.538 188.275 276.783 190.121 274.971 191.903C274.1 192.752 273.201 193.558 272.288 194.372C272.097 194.541 271.269 195.213 270.724 195.652C270.49 195.843 270.306 195.998 270.257 196.048C268.614 197.271 266.88 198.346 265.075 199.315C264.764 199.471 263.369 200.15 263.284 200.199C263.001 200.327 256.56 202.866 256.56 202.866C252.249 204.323 248.108 204.952 244.123 204.952C234.036 204.952 225.521 203.212 218.555 197.505C212.808 192.801 208.943 187.872 206.94 181.04C206.833 180.7 206.741 180.318 206.649 179.972C206.359 178.84 206.111 178.14 205.92 176.725H281.511C284.159 176.725 286.346 174.455 288.073 172.793C289.503 171.414 290.345 169.207 290.579 167.092C290.586 167.036 290.593 166.979 290.6 166.922C290.635 166.555 290.657 166.116 290.657 165.748C290.657 155.281 288.668 145.662 284.69 137.585C280.711 129.508 275.013 123.044 267.581 118.538C260.156 114.04 251.329 111.699 241.122 111.699C234.9 111.699 222.371 114.351 221.741 114.57C201.355 121.608 187.941 138.214 175.178 154.68C171.094 159.956 166.996 165.161 162.727 170.141C162.727 170.141 162.727 170.148 162.72 170.148C162.699 170.183 162.671 170.211 162.642 170.247C162.664 169.872 162.678 169.497 162.692 169.115C162.692 168.995 162.699 168.867 162.699 168.747C162.727 168.068 162.741 167.375 162.741 166.689C162.741 156.349 160.519 146.977 156.081 138.561C151.635 130.152 145.527 123.553 137.776 118.786C130.018 114.012 121.361 111.628 111.812 111.628C104.125 111.628 95.9489 113.22 89.3234 116.395C83.0448 119.408 76.023 123.546 71.7334 128.815C71.6555 128.914 71.5069 129.013 71.3441 129.105C71.0185 129.31 70.6362 129.515 70.6362 129.713V53.8727C70.6362 51.2416 70.9052 49.1057 69.2418 47.4365C67.3872 45.5835 65.6247 44.657 62.5809 44.657C59.6575 44.657 56.0758 45.5835 54.1505 47.4365C52.2251 49.2967 50.1086 51.7438 50.1086 54.7921V166.689C50.1086 168.846 50.4343 170.954 50.8377 173.033C51.043 174.08 51.2695 175.12 51.4819 176.152C52.8551 182.822 55.7502 189.046 59.07 194.81C63.9117 203.227 71.1459 209.847 79.4348 214.691C87.7095 219.529 97.3009 221.941 107.508 221.941C117.729 221.941 127.2 219.529 135.624 214.691C136.402 214.239 137.245 213.786 137.988 213.305C157.532 202.823 172.071 186.132 185.52 168.783L187.396 166.406C187.389 166.562 187.396 166.724 187.396 166.887C187.396 177.496 189.817 186.966 194.658 195.312C199.493 203.651 206.239 210.186 214.86 214.889C223.475 219.593 233.229 221.941 244.102 221.941C250.196 221.941 256.602 220.809 263.298 218.567C267.899 217.025 271.984 215.151 275.558 212.987C275.558 212.987 275.565 212.987 275.565 212.98C289.666 204.79 299.93 189.477 308.785 176.188C309.839 182.864 312.005 189.025 315.276 194.669C320.117 203.014 326.849 209.55 335.471 214.239C344.092 218.949 353.839 221.304 364.712 221.304C370.813 221.304 377.219 220.18 383.916 217.924C390.605 215.667 395.864 212.761 400.373 209.182C401.024 208.694 418.253 191.373 429.027 177.949C430.549 176.046 431.95 174.221 433.154 172.538C433.423 172.156 433.685 171.781 433.939 171.414L434.463 169.858C434.647 171.923 434.959 173.981 435.398 176.018C435.652 177.206 435.943 178.394 436.289 179.568C436.318 179.674 436.353 179.781 436.381 179.887C436.813 181.351 437.309 182.801 437.875 184.243C437.578 185.085 437.288 185.927 436.99 186.761C436.983 186.768 436.983 186.775 436.976 186.783C436.75 187.433 436.523 188.084 436.289 188.735C435.667 190.496 435.037 192.257 434.407 194.018L428.277 212.06L427.569 214.147L427.052 215.66L427.569 215.575L428.277 215.448L428.843 215.342L436.289 213.991L440.31 213.263L441.018 213.135L444.784 212.449C445.888 212.244 446.992 212.039 448.096 211.834C448.337 211.799 448.571 211.749 448.804 211.707C449.845 211.516 450.878 211.325 451.912 211.134C452.91 210.95 453.894 210.766 454.885 210.582C455.083 210.547 455.288 210.504 455.486 210.469C455.961 210.384 456.442 210.299 456.916 210.207C457.787 210.052 458.657 209.889 459.528 209.726C459.96 209.988 460.399 210.236 460.838 210.483C461.071 210.617 461.305 210.745 461.545 210.872C470.677 215.823 480.7 217.846 491.162 216.849C493.611 216.615 495.996 216.226 498.318 215.674C507.081 213.645 514.889 209.436 521.578 203.092L521.599 203.071C521.812 202.88 522.024 202.675 522.236 202.47C532.139 192.794 537.434 181.068 537.986 167.559C538.092 165.918 538.085 164.235 538.014 162.523ZM331.804 144.778C333.531 141.963 335.655 138.837 338.16 136.63C340.369 134.692 342.832 132.797 345.536 131.58C350.201 129.451 355.609 128.228 361.739 128.228C370.488 128.228 377.588 132.019 383.024 137.316C388.46 142.621 391.773 151.256 392.976 159.751H326.729C327.656 154.8 329.341 148.746 331.804 144.778ZM217.55 137.924C223.581 132.627 231.445 129.345 241.122 129.345C249.878 129.345 256.97 132.952 262.414 138.25C267.843 143.554 271.163 151.971 272.352 160.465H206.104C207.697 151.971 211.512 143.229 217.55 137.924ZM143.191 168.811C143.184 168.91 143.184 169.009 143.169 169.108C142.858 175.183 141.322 180.735 138.568 185.764C135.454 191.465 131.214 195.949 125.834 199.188C120.462 202.441 114.459 204.061 107.827 204.061C101.194 204.061 95.1915 202.441 89.8189 199.188C84.4534 195.949 80.2347 191.472 77.1838 185.764C74.494 180.735 72.9863 175.197 72.6748 169.129C72.6678 169.023 72.6678 168.917 72.6607 168.811C72.6253 168.104 72.6111 167.396 72.6111 166.689C72.6111 159.666 74.133 153.336 77.1838 147.706C80.2347 142.076 84.4464 137.627 89.8189 134.381C95.1915 131.135 101.194 129.515 107.827 129.515C114.459 129.515 120.462 131.135 125.834 134.381C131.207 137.627 135.447 142.069 138.568 147.706C141.683 153.336 143.24 159.666 143.24 166.689C143.24 167.396 143.226 168.104 143.191 168.811ZM518.86 164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.441 198.976C480.367 198.976 474.867 197.491 469.941 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.142 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447C464.971 138.285 474.669 132.995 485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949Z",fill:"#154423",stroke:"white",strokeWidth:2,strokeMiterlimit:10}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.4495 111.084C72.8376 123.659 65.9219 139.155 66.6369 157.728C67.2102 172.736 73.0287 185.658 83.5898 196.394C105.993 219.176 145.01 220.088 168.39 194.393C162.281 211.891 141.881 233.017 111.868 234.212C80.5673 235.464 52.6427 213.468 46.7392 182.624C40.6518 150.726 59.0275 121.417 86.4495 111.084Z",fill:"#498E42"}),u.createElement("path",{d:"M109.327 235.337C78.2811 235.337 51.5173 213.256 45.6988 182.836C39.76 151.744 56.7342 121.148 86.0674 110.093L91.1639 108.177L87.1646 111.869C73.5597 124.437 67.005 139.855 67.6916 157.693C68.2508 172.22 73.8499 184.993 84.3402 195.659C94.8801 206.374 109.731 212.52 125.098 212.52C141.457 212.52 156.555 205.829 167.604 193.686L171.108 189.838L169.395 194.753C162.671 214.027 140.763 234.134 111.911 235.287C111.054 235.315 110.184 235.337 109.327 235.337ZM81.7778 114.231C56.543 126.368 42.3932 154.185 47.787 182.426C53.4143 211.848 79.2933 233.201 109.327 233.201C110.155 233.201 110.998 233.186 111.833 233.151C137.273 232.14 157.114 215.922 165.339 198.976C154.339 209.111 140.246 214.628 125.112 214.628C109.186 214.628 93.7759 208.248 82.8396 197.13C71.9671 186.075 66.1556 172.835 65.5823 157.756C64.9381 141.107 70.3815 126.481 81.7778 114.231Z",fill:"white"}),u.createElement("mask",{id:"mask205_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask205_61_306)"},u.createElement("path",{d:"M129.402 144.898H80.5461V194.421H129.402V144.898Z",fill:"#00804A"})),u.createElement("mask",{id:"mask206_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask206_61_306)"},u.createElement("path",{d:"M104.925 194.202C118.541 194.202 129.579 183.173 129.579 169.568C129.579 155.962 118.541 144.933 104.925 144.933C91.3084 144.933 80.2703 155.962 80.2703 169.568C80.2703 183.173 91.3084 194.202 104.925 194.202Z",fill:"#00804A"})),u.createElement("mask",{id:"mask207_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask207_61_306)"},u.createElement("path",{d:"M104.924 193.431C118.114 193.431 128.807 182.747 128.807 169.568C128.807 156.388 118.114 145.704 104.924 145.704C91.7342 145.704 81.0415 156.388 81.0415 169.568C81.0415 182.747 91.7342 193.431 104.924 193.431Z",fill:"#008048"})),u.createElement("mask",{id:"mask208_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask208_61_306)"},u.createElement("path",{d:"M104.924 192.66C117.688 192.66 128.036 182.321 128.036 169.567C128.036 156.814 117.688 146.475 104.924 146.475C92.1605 146.475 81.8132 156.814 81.8132 169.567C81.8132 182.321 92.1605 192.66 104.924 192.66Z",fill:"#008048"})),u.createElement("mask",{id:"mask209_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask209_61_306)"},u.createElement("path",{d:"M104.924 191.889C117.262 191.889 127.264 181.895 127.264 169.567C127.264 157.24 117.262 147.246 104.924 147.246C92.5865 147.246 82.5847 157.24 82.5847 169.567C82.5847 181.895 92.5865 191.889 104.924 191.889Z",fill:"#007E47"})),u.createElement("mask",{id:"mask210_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask210_61_306)"},u.createElement("path",{d:"M104.924 191.118C116.836 191.118 126.492 181.47 126.492 169.568C126.492 157.666 116.836 148.017 104.924 148.017C93.0126 148.017 83.3562 157.666 83.3562 169.568C83.3562 181.47 93.0126 191.118 104.924 191.118Z",fill:"#007E46"})),u.createElement("mask",{id:"mask211_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask211_61_306)"},u.createElement("path",{d:"M104.924 190.347C116.41 190.347 125.721 181.044 125.721 169.567C125.721 158.091 116.41 148.788 104.924 148.788C93.4386 148.788 84.1277 158.091 84.1277 169.567C84.1277 181.044 93.4386 190.347 104.924 190.347Z",fill:"#007E46"})),u.createElement("mask",{id:"mask212_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask212_61_306)"},u.createElement("path",{d:"M104.924 189.583C115.988 189.583 124.957 180.622 124.957 169.567C124.957 158.513 115.988 149.552 104.924 149.552C93.861 149.552 84.8923 158.513 84.8923 169.567C84.8923 180.622 93.861 189.583 104.924 189.583Z",fill:"#007E44"})),u.createElement("mask",{id:"mask213_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask213_61_306)"},u.createElement("path",{d:"M104.924 188.812C115.562 188.812 124.185 180.196 124.185 169.568C124.185 158.939 115.562 150.323 104.924 150.323C94.2871 150.323 85.6638 158.939 85.6638 169.568C85.6638 180.196 94.2871 188.812 104.924 188.812Z",fill:"#057F44"})),u.createElement("mask",{id:"mask214_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask214_61_306)"},u.createElement("path",{d:"M104.924 188.041C115.135 188.041 123.413 179.77 123.413 169.568C123.413 159.365 115.135 151.094 104.924 151.094C94.7131 151.094 86.4353 159.365 86.4353 169.568C86.4353 179.77 94.7131 188.041 104.924 188.041Z",fill:"#057F44"})),u.createElement("mask",{id:"mask215_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask215_61_306)"},u.createElement("path",{d:"M104.924 187.27C114.71 187.27 122.642 179.344 122.642 169.567C122.642 159.79 114.71 151.865 104.924 151.865C95.1394 151.865 87.207 159.79 87.207 169.567C87.207 179.344 95.1394 187.27 104.924 187.27Z",fill:"#0C7F42"})),u.createElement("mask",{id:"mask216_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask216_61_306)"},u.createElement("path",{d:"M104.924 186.5C114.283 186.5 121.87 178.919 121.87 169.568C121.87 160.216 114.283 152.635 104.924 152.635C95.5654 152.635 87.9785 160.216 87.9785 169.568C87.9785 178.919 95.5654 186.5 104.924 186.5Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask217_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask217_61_306)"},u.createElement("path",{d:"M104.924 185.729C113.857 185.729 121.099 178.493 121.099 169.568C121.099 160.642 113.857 153.406 104.924 153.406C95.9915 153.406 88.75 160.642 88.75 169.568C88.75 178.493 95.9915 185.729 104.924 185.729Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask218_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask218_61_306)"},u.createElement("path",{d:"M104.924 184.965C113.435 184.965 120.334 178.071 120.334 169.567C120.334 161.064 113.435 154.17 104.924 154.17C96.4136 154.17 89.5144 161.064 89.5144 169.567C89.5144 178.071 96.4136 184.965 104.924 184.965Z",fill:"#0C7F41"})),u.createElement("mask",{id:"mask219_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask219_61_306)"},u.createElement("path",{d:"M104.924 184.194C113.009 184.194 119.563 177.645 119.563 169.567C119.563 161.49 113.009 154.941 104.924 154.941C96.8399 154.941 90.2861 161.49 90.2861 169.567C90.2861 177.645 96.8399 184.194 104.924 184.194Z",fill:"#0B7D40"})),u.createElement("mask",{id:"mask220_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask220_61_306)"},u.createElement("path",{d:"M104.924 183.423C112.583 183.423 118.791 177.22 118.791 169.568C118.791 161.915 112.583 155.712 104.924 155.712C97.266 155.712 91.0576 161.915 91.0576 169.568C91.0576 177.22 97.266 183.423 104.924 183.423Z",fill:"#0B7D40"})),u.createElement("mask",{id:"mask221_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask221_61_306)"},u.createElement("path",{d:"M104.924 182.652C112.157 182.652 118.019 176.794 118.019 169.567C118.019 162.341 112.157 156.483 104.924 156.483C97.692 156.483 91.8291 162.341 91.8291 169.567C91.8291 176.794 97.692 182.652 104.924 182.652Z",fill:"#0C7D3F"})),u.createElement("mask",{id:"mask222_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask222_61_306)"},u.createElement("path",{d:"M104.924 181.881C111.731 181.881 117.248 176.368 117.248 169.567C117.248 162.767 111.731 157.254 104.924 157.254C98.1183 157.254 92.6008 162.767 92.6008 169.567C92.6008 176.368 98.1183 181.881 104.924 181.881Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask223_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask223_61_306)"},u.createElement("path",{d:"M104.924 181.11C111.304 181.11 116.476 175.942 116.476 169.568C116.476 163.193 111.304 158.025 104.924 158.025C98.5444 158.025 93.3723 163.193 93.3723 169.568C93.3723 175.942 98.5444 181.11 104.924 181.11Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask224_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask224_61_306)"},u.createElement("path",{d:"M104.924 180.346C110.882 180.346 115.712 175.521 115.712 169.568C115.712 163.615 110.882 158.789 104.924 158.789C98.9665 158.789 94.1367 163.615 94.1367 169.568C94.1367 175.521 98.9665 180.346 104.924 180.346Z",fill:"#107D3F"})),u.createElement("mask",{id:"mask225_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask225_61_306)"},u.createElement("path",{d:"M104.924 179.575C110.456 179.575 114.94 175.095 114.94 169.567C114.94 164.04 110.456 159.56 104.924 159.56C99.3925 159.56 94.9082 164.04 94.9082 169.567C94.9082 175.095 99.3925 179.575 104.924 179.575Z",fill:"#117D3E"})),u.createElement("mask",{id:"mask226_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask226_61_306)"},u.createElement("path",{d:"M104.924 178.804C110.03 178.804 114.169 174.669 114.169 169.567C114.169 164.466 110.03 160.331 104.924 160.331C99.8188 160.331 95.6799 164.466 95.6799 169.567C95.6799 174.669 99.8188 178.804 104.924 178.804Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask227_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask227_61_306)"},u.createElement("path",{d:"M104.924 178.034C109.604 178.034 113.397 174.243 113.397 169.568C113.397 164.892 109.604 161.102 104.924 161.102C100.245 161.102 96.4514 164.892 96.4514 169.568C96.4514 174.243 100.245 178.034 104.924 178.034Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask228_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask228_61_306)"},u.createElement("path",{d:"M104.924 177.262C109.178 177.262 112.626 173.817 112.626 169.567C112.626 165.318 109.178 161.872 104.924 161.872C100.671 161.872 97.2229 165.318 97.2229 169.567C97.2229 173.817 100.671 177.262 104.924 177.262Z",fill:"#157D3E"})),u.createElement("mask",{id:"mask229_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask229_61_306)"},u.createElement("path",{d:"M104.924 176.492C108.752 176.492 111.854 173.392 111.854 169.567C111.854 165.743 108.752 162.643 104.924 162.643C101.097 162.643 97.9946 165.743 97.9946 169.567C97.9946 173.392 101.097 176.492 104.924 176.492Z",fill:"#197D3E"})),u.createElement("mask",{id:"mask230_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask230_61_306)"},u.createElement("path",{d:"M104.924 175.728C108.329 175.728 111.09 172.97 111.09 169.568C111.09 166.165 108.329 163.407 104.924 163.407C101.519 163.407 98.759 166.165 98.759 169.568C98.759 172.97 101.519 175.728 104.924 175.728Z",fill:"#197C3E"})),u.createElement("mask",{id:"mask231_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask231_61_306)"},u.createElement("path",{d:"M104.924 174.957C107.903 174.957 110.318 172.544 110.318 169.568C110.318 166.591 107.903 164.178 104.924 164.178C101.945 164.178 99.5305 166.591 99.5305 169.568C99.5305 172.544 101.945 174.957 104.924 174.957Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask232_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask232_61_306)"},u.createElement("path",{d:"M104.924 174.186C107.477 174.186 109.547 172.118 109.547 169.567C109.547 167.017 107.477 164.949 104.924 164.949C102.372 164.949 100.302 167.017 100.302 169.567C100.302 172.118 102.372 174.186 104.924 174.186Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask233_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask233_61_306)"},u.createElement("path",{d:"M104.924 173.415C107.051 173.415 108.775 171.692 108.775 169.568C108.775 167.443 107.051 165.72 104.924 165.72C102.798 165.72 101.074 167.443 101.074 169.568C101.074 171.692 102.798 173.415 104.924 173.415Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask234_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask234_61_306)"},u.createElement("path",{d:"M104.924 172.644C106.625 172.644 108.003 171.267 108.003 169.568C108.003 167.868 106.625 166.491 104.924 166.491C103.224 166.491 101.845 167.868 101.845 169.568C101.845 171.267 103.224 172.644 104.924 172.644Z",fill:"#1D7C3E"})),u.createElement("mask",{id:"mask235_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask235_61_306)"},u.createElement("path",{d:"M104.924 171.873C106.199 171.873 107.232 170.841 107.232 169.567C107.232 168.294 106.199 167.262 104.924 167.262C103.65 167.262 102.617 168.294 102.617 169.567C102.617 170.841 103.65 171.873 104.924 171.873Z",fill:"#207B3E"})),u.createElement("mask",{id:"mask236_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask236_61_306)"},u.createElement("path",{d:"M104.924 171.109C105.777 171.109 106.468 170.419 106.468 169.567C106.468 168.716 105.777 168.026 104.924 168.026C104.072 168.026 103.381 168.716 103.381 169.567C103.381 170.419 104.072 171.109 104.924 171.109Z",fill:"#207A3D"})),u.createElement("mask",{id:"mask237_61_306",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:80,y:144,width:50,height:51},u.createElement("path",{d:"M124.964 149.877C121.891 155.783 119.046 161.25 116.151 166.816C120.504 171.251 124.872 175.692 129.557 180.481C125.41 179.802 121.736 179.193 118.055 178.599C116.009 178.267 113.942 177.991 111.925 177.538C110.884 177.305 110.481 177.637 110.042 178.493C107.685 183.112 105.271 187.702 102.872 192.306C102.61 192.815 102.312 193.31 101.803 194.216C101.201 190.354 100.67 186.995 100.161 183.621C99.7996 181.195 99.5235 178.748 99.0563 176.336C98.9643 175.869 98.1857 175.289 97.6548 175.197C92.5016 174.278 87.3343 173.457 82.16 172.602C81.6432 172.51 81.1336 172.382 80.2771 172.191C81.0699 171.753 81.5725 171.463 82.0963 171.208C86.6336 168.945 91.1497 166.611 95.7294 164.454C97.0036 163.853 97.1947 163.188 96.9965 161.929C96.14 156.639 95.3826 151.348 94.6039 146.058C94.5686 145.81 94.5756 145.542 94.5402 144.919C96.6496 147.048 98.5184 148.922 100.373 150.811C102.532 152.982 104.719 155.132 106.786 157.388C107.586 158.244 108.195 158.244 109.157 157.749C113.631 155.465 118.14 153.244 122.628 151.002C123.251 150.691 123.881 150.401 124.964 149.877Z",fill:"white"})),u.createElement("g",{mask:"url(#mask237_61_306)"},u.createElement("path",{d:"M104.924 170.338C105.351 170.338 105.696 169.993 105.696 169.568C105.696 169.142 105.351 168.797 104.924 168.797C104.498 168.797 104.153 169.142 104.153 169.568C104.153 169.993 104.498 170.338 104.924 170.338Z",fill:"#257B3D"})),u.createElement("path",{d:"M101.428 196.331L100.713 191.755C100.274 188.925 99.8633 186.33 99.4669 183.72C99.3537 182.977 99.2546 182.235 99.1555 181.499C98.9289 179.844 98.6954 178.125 98.3697 176.47C98.3131 176.322 97.8459 175.947 97.5345 175.891C93.797 175.226 89.9817 174.596 86.2939 173.995C84.8782 173.762 83.4695 173.528 82.0538 173.295C81.6928 173.231 81.346 173.153 80.9 173.054L78.3022 172.489L80.2913 171.378C80.9 171.039 81.3318 170.798 81.7919 170.579C82.9882 169.978 84.1986 169.37 85.402 168.761C88.6722 167.113 92.0628 165.402 95.4322 163.817C96.3736 163.372 96.4585 163.061 96.2957 162.042C95.6374 157.975 95.0287 153.845 94.4412 149.849L93.8961 146.164C93.8678 145.98 93.8608 145.796 93.8466 145.492L93.7333 143.109L96.0126 145.407C97.7327 147.14 99.3041 148.724 100.868 150.316L102.065 151.518C103.806 153.265 105.604 155.069 107.296 156.915C107.685 157.325 107.904 157.381 108.053 157.381C108.237 157.381 108.485 157.296 108.825 157.12C112.265 155.359 115.776 153.612 119.173 151.928L122.302 150.372C122.684 150.181 123.081 149.99 123.583 149.757L126.563 148.328L121.481 158.096C119.973 160.988 118.494 163.832 117.007 166.696L122.599 172.397C125.02 174.865 127.491 177.376 130.06 180L131.575 181.542L125.813 180.594C123.081 180.148 120.511 179.724 117.942 179.307C117.404 179.222 116.866 179.137 116.335 179.052C114.834 178.819 113.284 178.578 111.776 178.239C111.614 178.203 111.472 178.182 111.359 178.182C111.153 178.182 111.005 178.182 110.679 178.819C108.832 182.44 106.921 186.096 105.073 189.633L103.509 192.632C103.318 193.006 103.105 193.374 102.801 193.905L101.428 196.331ZM82.3016 171.902C83.7031 172.135 85.1117 172.368 86.5204 172.595C90.2153 173.203 94.0306 173.825 97.7822 174.497C98.4972 174.632 99.5872 175.339 99.75 176.202C100.083 177.899 100.323 179.632 100.55 181.308C100.649 182.044 100.755 182.779 100.861 183.515C101.258 186.118 101.661 188.713 102.107 191.535L102.192 192.08C102.213 192.045 102.228 192.009 102.249 191.974L103.813 188.968C105.661 185.432 107.572 181.775 109.412 178.161C109.844 177.319 110.495 176.485 112.074 176.838C113.539 177.171 115.068 177.404 116.54 177.637C117.078 177.722 117.623 177.807 118.161 177.892C120.731 178.309 123.3 178.734 126.032 179.179L127.533 179.427C125.502 177.355 123.534 175.346 121.587 173.366L115.28 166.937L115.514 166.484C117.085 163.464 118.635 160.472 120.228 157.424L123.35 151.426C123.208 151.497 123.074 151.561 122.939 151.624L119.81 153.18C116.42 154.871 112.909 156.61 109.476 158.364C108.917 158.654 108.478 158.782 108.053 158.782C107.218 158.782 106.63 158.258 106.255 157.862C104.57 156.03 102.787 154.234 101.06 152.501L99.8562 151.299C98.4193 149.835 96.9753 148.378 95.418 146.815L95.8356 149.637C96.4232 153.626 97.0319 157.756 97.6831 161.809C97.9096 163.237 97.7114 164.284 96.0197 165.083C92.6645 166.661 89.288 168.365 86.0249 170.006C84.8144 170.614 83.6111 171.223 82.4007 171.831C82.3795 171.859 82.3441 171.88 82.3016 171.902Z",fill:"white"}),u.createElement("path",{d:"M497.072 132.372C494.036 131.531 490.836 131.078 487.531 131.078C477.932 131.078 469.211 134.869 462.812 141.036C456.081 147.508 451.883 156.618 451.883 166.689C451.883 186.358 467.845 202.307 487.531 202.307C507.216 202.307 523.178 186.358 523.178 166.689C523.171 150.33 512.128 136.545 497.072 132.372ZM458.905 146.447C464.971 138.285 474.669 132.995 485.626 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.437 177.157 514.592 182.306C511.739 187.462 507.86 191.528 502.933 194.513C498.014 197.491 492.514 198.976 486.44 198.976C480.367 198.976 474.867 197.491 469.941 194.513C465.021 191.535 461.163 187.469 458.367 182.306C455.571 177.143 454.177 171.343 454.177 164.907C454.177 158.471 455.571 152.636 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447Z",fill:"white"}),u.createElement("path",{d:"M429.706 215.773C429.367 215.773 429.069 215.533 429.013 215.186C428.949 214.804 429.204 214.437 429.593 214.373L458.622 209.422C459.004 209.351 459.372 209.613 459.436 210.002C459.5 210.384 459.245 210.752 458.856 210.816L429.827 215.766C429.784 215.773 429.742 215.773 429.706 215.773Z",fill:"white"}),u.createElement("path",{d:"M536.69 161.922C536.393 158.364 535.735 154.899 534.751 151.575C528.394 130.031 508.447 114.309 484.833 114.309C484.572 114.309 484.317 114.309 484.055 114.316C462.565 114.627 444.231 127.966 436.601 146.779C434.152 152.805 432.8 159.404 432.8 166.314C432.8 168.422 432.927 170.494 433.175 172.538C433.33 173.896 433.55 175.24 433.819 176.569C434.399 179.512 435.242 182.369 436.311 185.106C436.523 185.672 436.756 186.231 436.997 186.782C437.018 186.846 437.047 186.903 437.075 186.966C437.146 187.129 437.217 187.292 437.287 187.454C437.28 187.468 437.273 187.49 437.266 187.504C436.955 188.388 436.636 189.265 436.311 190.142C435.631 192.023 434.944 193.905 434.251 195.786L427.469 215.257L428.984 214.995L436.311 213.736L439.56 213.178L444.104 212.393C447.714 211.763 451.31 211.134 454.913 210.497C455.564 210.384 456.208 210.271 456.859 210.158C456.888 210.179 456.916 210.193 456.944 210.207C457.05 210.278 457.157 210.341 457.263 210.405C465.254 215.413 474.711 218.305 484.833 218.305C499.196 218.305 512.192 212.492 521.613 203.092L521.635 203.071C531.049 193.664 536.882 180.665 536.882 166.3C536.874 164.836 536.811 163.372 536.69 161.922ZM454.177 164.907C454.177 158.47 455.571 152.635 458.367 147.416C458.537 147.098 458.714 146.779 458.898 146.461C458.898 146.454 458.905 146.454 458.905 146.447C464.971 138.285 474.676 132.995 485.619 132.995C503.556 132.995 518.152 147.161 518.86 164.907V164.949C518.86 171.371 517.444 177.156 514.599 182.305C511.746 187.461 507.867 191.528 502.933 194.513C498.014 197.49 492.514 198.976 486.433 198.976C480.36 198.976 474.86 197.49 469.94 194.513C465.021 191.535 461.163 187.468 458.36 182.305C457.964 181.57 457.588 180.813 457.249 180.049C455.691 176.584 454.729 172.849 454.354 168.839C454.233 167.559 454.177 166.243 454.177 164.907Z",fill:"#498E42"}),u.createElement("path",{d:"M485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915ZM485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915ZM537.752 161.83C537.448 158.251 536.783 154.701 535.77 151.278C529.166 128.886 508.214 113.248 484.827 113.248C484.558 113.248 484.289 113.248 484.034 113.255C462.657 113.566 443.644 126.566 435.61 146.383C433.033 152.713 431.731 159.425 431.731 166.314C431.731 168.436 431.858 170.572 432.113 172.658C432.269 173.988 432.488 175.374 432.771 176.775C433.352 179.731 434.208 182.659 435.313 185.481C435.497 185.983 435.723 186.528 436.006 187.172C436.028 187.242 436.056 187.306 436.091 187.391L436.141 187.49C435.865 188.254 435.589 189.017 435.305 189.781C434.626 191.663 433.939 193.537 433.239 195.439L425.87 216.608L439.56 214.253L444.288 213.439C447.898 212.81 451.494 212.18 455.097 211.544L456.64 211.275C456.845 211.403 457.058 211.537 457.263 211.657C465.559 216.7 475.065 219.366 484.834 219.366C499.005 219.366 512.326 213.857 522.385 203.821C532.415 193.799 537.943 180.474 537.943 166.3C537.936 164.843 537.873 163.337 537.752 161.83ZM484.827 217.259C475.115 217.259 465.658 214.514 457.511 209.323L457.44 209.288L457.256 209.146L457.121 209.047L454.722 209.465C451.126 210.101 447.53 210.731 443.913 211.36L439.553 212.11L429.048 213.92L435.235 196.168C435.928 194.287 436.615 192.398 437.295 190.524C437.613 189.654 437.932 188.784 438.243 187.907L438.441 187.497L437.96 186.372C437.684 185.743 437.472 185.227 437.287 184.731C436.226 182.023 435.405 179.208 434.845 176.371C434.576 175.028 434.364 173.705 434.215 172.425C433.968 170.416 433.847 168.365 433.847 166.328C433.847 159.715 435.1 153.272 437.571 147.19C445.286 128.171 463.534 115.688 484.069 115.391C484.324 115.384 484.565 115.384 484.819 115.384C507.265 115.384 527.375 130.399 533.718 151.893C534.694 155.168 535.332 158.577 535.622 162.021C535.735 163.464 535.799 164.914 535.799 166.328C535.799 179.936 530.497 192.724 520.842 202.371C511.229 211.961 498.431 217.259 484.827 217.259ZM485.796 131.934C474.903 131.934 464.617 137.097 458.155 145.761L457.964 146.016V146.178C457.964 146.426 457.624 146.673 457.497 146.914C454.637 152.254 453.15 158.315 453.15 164.907C453.15 165.939 453.172 166.965 453.249 167.969C453.618 173.217 454.955 178.076 457.263 182.44C457.327 182.567 457.383 182.687 457.447 182.808C460.314 188.105 464.341 192.342 469.41 195.418C474.471 198.481 480.211 200.037 486.483 200.037C492.754 200.037 498.502 198.481 503.57 195.418C508.709 192.313 512.787 188.077 515.703 182.815C518.74 177.326 520.276 171.307 520.276 164.949V164.864C519.539 146.397 504.391 131.934 485.796 131.934ZM486.483 197.915C480.615 197.915 475.235 196.465 470.514 193.608C465.764 190.736 461.998 186.768 459.302 181.803C458.502 180.318 457.815 178.769 457.249 177.164C456.47 174.957 455.918 172.644 455.592 170.232C455.352 168.507 455.238 166.731 455.238 164.914C455.238 158.676 456.605 152.954 459.294 147.925C459.443 147.656 459.655 147.381 459.811 147.112L460.08 146.9V146.808C465.743 138.823 475.724 134.063 485.853 134.063C503.308 134.063 517.48 147.635 518.173 164.956C518.173 170.954 516.708 176.626 513.848 181.796C511.13 186.719 507.294 190.694 502.473 193.615C497.752 196.465 492.365 197.915 486.483 197.915Z",fill:"white"}),u.createElement("path",{d:"M518.923 166.251C518.923 184.611 504.023 199.506 485.64 199.506C467.265 199.506 452.357 184.611 452.357 166.251C452.357 158.838 454.785 151.985 458.891 146.461C458.707 146.779 458.53 147.098 458.36 147.416C455.564 152.636 454.17 158.471 454.17 164.907C454.17 171.343 455.564 177.142 458.36 182.306C461.156 187.462 465.014 191.528 469.94 194.513C474.86 197.491 480.367 198.976 486.44 198.976C492.514 198.976 498.021 197.491 502.94 194.513C507.867 191.535 511.753 187.469 514.613 182.306C517.458 177.157 518.888 171.371 518.895 164.949C518.916 165.381 518.923 165.812 518.923 166.251Z",fill:"white"}),u.createElement("path",{d:"M415.245 278.664C414.686 278.664 414.226 278.211 414.226 277.652V253.372C414.226 252.813 414.686 252.36 415.245 252.36C415.804 252.36 416.264 252.813 416.264 253.372V277.652C416.264 278.211 415.804 278.664 415.245 278.664Z",fill:"#18572B"}),u.createElement("path",{d:"M422.026 275.29C421.467 275.29 421.007 274.837 421.007 274.279V256.746C421.007 256.187 421.467 255.734 422.026 255.734C422.585 255.734 423.045 256.187 423.045 256.746V274.279C423.045 274.837 422.585 275.29 422.026 275.29Z",fill:"#18572B"}),u.createElement("path",{d:"M427.455 270.565C426.896 270.565 426.436 270.113 426.436 269.554V259.44C426.436 258.881 426.896 258.429 427.455 258.429C428.015 258.429 428.475 258.881 428.475 259.44V269.554C428.468 270.113 428.015 270.565 427.455 270.565Z",fill:"#18572B"}),u.createElement("path",{d:"M72.0942 261.902C72.0942 260.558 72.2641 259.334 72.5968 258.224C72.9295 257.113 73.4392 256.173 74.1258 255.395C74.8053 254.617 75.6689 254.023 76.7094 253.591C77.7499 253.167 78.9887 252.948 80.4256 252.948C81.2821 252.948 82.1103 253.032 82.9102 253.209C83.71 253.386 84.4179 253.626 85.0479 253.938C85.6708 254.249 86.1733 254.61 86.5414 255.013C86.9095 255.416 87.0935 255.84 87.0935 256.279C87.0935 256.738 86.9237 257.135 86.591 257.46C86.2583 257.785 85.8336 257.948 85.3239 257.948C84.9983 257.948 84.7506 257.898 84.5807 257.792C84.4037 257.686 84.1914 257.552 83.9365 257.396L83.7596 257.29C82.8323 256.639 81.7776 256.321 80.6026 256.321C79.7248 256.321 78.9816 256.448 78.3799 256.703C77.7783 256.958 77.2898 257.325 76.9218 257.813C76.5537 258.302 76.2918 258.889 76.1431 259.582C75.9945 260.275 75.9166 261.053 75.9166 261.909V269.052C75.9166 269.908 75.9945 270.679 76.1431 271.379C76.2918 272.072 76.5537 272.659 76.9218 273.147C77.2898 273.635 77.7783 274.003 78.3799 274.257C78.9816 274.512 79.7248 274.639 80.6026 274.639C81.7564 274.639 82.8111 274.328 83.7596 273.706L83.9365 273.6C84.1914 273.437 84.4037 273.303 84.5807 273.204C84.7576 273.098 85.0054 273.048 85.3239 273.048C85.8336 273.048 86.2583 273.211 86.591 273.536C86.9237 273.861 87.0935 274.243 87.0935 274.682C87.0935 275.142 86.9095 275.58 86.5414 275.983C86.1733 276.386 85.6708 276.74 85.0479 277.044C84.425 277.348 83.71 277.582 82.9102 277.758C82.1103 277.935 81.2821 278.02 80.4256 278.02C78.9887 278.02 77.7499 277.808 76.7094 277.377C75.6689 276.952 74.8053 276.351 74.1258 275.573C73.4462 274.802 72.9366 273.861 72.5968 272.765C72.2641 271.669 72.0942 270.438 72.0942 269.073V261.902Z",fill:"#18572B"}),u.createElement("path",{d:"M97.9236 278.07C96.515 278.07 95.2763 277.829 94.2074 277.355C93.1456 276.881 92.2608 276.238 91.553 275.432C90.8451 274.625 90.3143 273.67 89.9532 272.567C89.5922 271.471 89.4153 270.297 89.4153 269.045V261.902C89.4153 260.699 89.571 259.553 89.8825 258.464C90.1939 257.375 90.6894 256.42 91.376 255.6C92.0556 254.779 92.9404 254.129 94.0163 253.655C95.0922 253.181 96.3947 252.94 97.9236 252.94C99.4526 252.94 100.755 253.181 101.831 253.655C102.907 254.129 103.785 254.779 104.471 255.6C105.151 256.42 105.653 257.375 105.965 258.464C106.276 259.553 106.432 260.699 106.432 261.902V269.045C106.432 270.297 106.255 271.471 105.894 272.567C105.533 273.663 105.002 274.618 104.294 275.432C103.586 276.245 102.702 276.881 101.64 277.355C100.571 277.829 99.3322 278.07 97.9236 278.07ZM97.9236 256.491C96.2106 256.491 95.0002 256.986 94.2924 257.983C93.5845 258.981 93.2306 260.282 93.2306 261.902V269.045C93.2306 270.665 93.6057 271.973 94.3561 272.984C95.1064 273.989 96.2956 274.491 97.9165 274.491C99.5163 274.491 100.691 273.989 101.456 272.984C102.22 271.98 102.602 270.665 102.602 269.045V261.902C102.602 260.282 102.249 258.973 101.541 257.983C100.84 256.986 99.6295 256.491 97.9236 256.491Z",fill:"#18572B"}),u.createElement("path",{d:"M125.07 278.07C124.702 278.07 124.341 277.978 123.994 277.794C123.647 277.61 123.378 277.369 123.194 277.065L114.169 260.798V276.238C114.169 276.726 113.978 277.15 113.595 277.518C113.213 277.886 112.753 278.07 112.222 278.07C111.691 278.07 111.245 277.886 110.884 277.518C110.523 277.15 110.346 276.719 110.346 276.238V254.9C110.346 254.341 110.53 253.881 110.899 253.513C111.267 253.146 111.755 252.955 112.357 252.955C112.753 252.955 113.121 253.047 113.468 253.23C113.815 253.414 114.084 253.669 114.268 253.994C114.523 254.433 114.884 255.083 115.358 255.939C115.832 256.795 116.356 257.743 116.937 258.782C117.517 259.822 118.126 260.918 118.756 262.078C119.393 263.238 120.001 264.342 120.582 265.41C121.162 266.47 121.686 267.432 122.16 268.288C122.635 269.144 123.01 269.802 123.286 270.269V254.801C123.286 254.291 123.477 253.86 123.859 253.499C124.241 253.138 124.695 252.962 125.232 252.962C125.763 252.962 126.209 253.138 126.57 253.499C126.931 253.86 127.108 254.291 127.108 254.801V276.132C127.108 276.662 126.917 277.122 126.535 277.504C126.16 277.879 125.671 278.07 125.07 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M146.595 278.07C146.227 278.07 145.866 277.978 145.519 277.794C145.173 277.61 144.904 277.369 144.72 277.065L135.694 260.798V276.238C135.694 276.726 135.503 277.15 135.121 277.518C134.739 277.886 134.279 278.07 133.748 278.07C133.217 278.07 132.771 277.886 132.41 277.518C132.049 277.15 131.872 276.719 131.872 276.238V254.9C131.872 254.341 132.056 253.881 132.424 253.513C132.792 253.146 133.281 252.955 133.882 252.955C134.279 252.955 134.647 253.047 134.994 253.23C135.341 253.414 135.61 253.669 135.794 253.994C136.048 254.433 136.409 255.083 136.884 255.939C137.358 256.795 137.882 257.743 138.462 258.782C139.043 259.822 139.651 260.918 140.281 262.078C140.918 263.238 141.527 264.342 142.108 265.41C142.688 266.47 143.212 267.432 143.686 268.288C144.16 269.144 144.535 269.802 144.812 270.269V254.801C144.812 254.291 145.003 253.86 145.385 253.499C145.767 253.138 146.22 252.962 146.758 252.962C147.289 252.962 147.735 253.138 148.096 253.499C148.457 253.86 148.634 254.291 148.634 254.801V276.132C148.634 276.662 148.443 277.122 148.061 277.504C147.685 277.879 147.197 278.07 146.595 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M167.215 275.884C167.215 276.415 167.031 276.853 166.663 277.2C166.295 277.546 165.842 277.723 165.311 277.723H156.109C155.394 277.723 154.757 277.582 154.219 277.292C153.674 277.002 153.405 276.464 153.405 275.679V255.317C153.405 254.808 153.61 254.341 154.014 253.909C154.417 253.485 154.934 253.266 155.557 253.266H164.964C165.495 253.266 165.948 253.443 166.316 253.803C166.684 254.164 166.875 254.596 166.875 255.105C166.875 255.614 166.691 256.031 166.316 256.357C165.948 256.682 165.495 256.845 164.964 256.845H157.22V263.677H164.306C164.766 263.677 165.198 263.847 165.587 264.179C165.983 264.511 166.174 264.936 166.174 265.445C166.174 265.954 165.997 266.379 165.636 266.725C165.275 267.072 164.829 267.249 164.299 267.249H157.213V274.187H165.304C165.813 274.187 166.259 274.357 166.642 274.689C167.024 275.021 167.215 275.418 167.215 275.884Z",fill:"#18572B"}),u.createElement("path",{d:"M169.572 261.902C169.572 260.558 169.742 259.334 170.075 258.224C170.407 257.113 170.917 256.173 171.604 255.395C172.283 254.617 173.147 254.023 174.187 253.591C175.228 253.167 176.466 252.948 177.903 252.948C178.76 252.948 179.588 253.032 180.388 253.209C181.188 253.386 181.896 253.626 182.526 253.938C183.149 254.249 183.651 254.61 184.019 255.013C184.387 255.416 184.571 255.84 184.571 256.279C184.571 256.738 184.401 257.135 184.069 257.46C183.736 257.785 183.311 257.948 182.802 257.948C182.476 257.948 182.228 257.898 182.058 257.792C181.882 257.686 181.669 257.552 181.414 257.396L181.237 257.29C180.31 256.639 179.255 256.321 178.08 256.321C177.203 256.321 176.459 256.448 175.858 256.703C175.256 256.958 174.768 257.325 174.4 257.813C174.031 258.302 173.77 258.889 173.621 259.582C173.472 260.275 173.394 261.053 173.394 261.909V269.052C173.394 269.908 173.472 270.679 173.621 271.379C173.77 272.072 174.031 272.659 174.4 273.147C174.768 273.635 175.256 274.003 175.858 274.257C176.459 274.512 177.203 274.639 178.08 274.639C179.234 274.639 180.289 274.328 181.237 273.706L181.414 273.6C181.669 273.437 181.882 273.303 182.058 273.204C182.235 273.098 182.483 273.048 182.802 273.048C183.311 273.048 183.736 273.211 184.069 273.536C184.401 273.861 184.571 274.243 184.571 274.682C184.571 275.142 184.387 275.58 184.019 275.983C183.651 276.386 183.149 276.74 182.526 277.044C181.903 277.348 181.188 277.582 180.388 277.758C179.588 277.935 178.76 278.02 177.903 278.02C176.466 278.02 175.228 277.808 174.187 277.377C173.147 276.952 172.283 276.351 171.604 275.573C170.924 274.802 170.414 273.861 170.075 272.765C169.742 271.669 169.572 270.438 169.572 269.073V261.902Z",fill:"#18572B"}),u.createElement("path",{d:"M193.08 256.838H188.882C188.33 256.838 187.87 256.661 187.509 256.3C187.148 255.939 186.971 255.529 186.971 255.069C186.971 254.673 187.155 254.277 187.523 253.874C187.891 253.471 188.344 253.266 188.875 253.266H201.093C201.581 253.266 202.027 253.443 202.43 253.789C202.834 254.136 203.039 254.567 203.039 255.069C203.039 255.529 202.848 255.939 202.466 256.3C202.083 256.661 201.623 256.838 201.093 256.838H196.895V276.266C196.895 276.726 196.711 277.143 196.336 277.518C195.968 277.886 195.515 278.07 194.984 278.07C194.453 278.07 194 277.886 193.632 277.518C193.264 277.15 193.08 276.733 193.08 276.266V256.838Z",fill:"#18572B"}),u.createElement("path",{d:"M206.097 254.758C206.097 254.27 206.281 253.853 206.649 253.492C207.017 253.131 207.47 252.955 208.001 252.955C208.532 252.955 208.985 253.131 209.353 253.492C209.721 253.853 209.905 254.27 209.905 254.758V276.266C209.905 276.726 209.721 277.143 209.353 277.518C208.985 277.886 208.532 278.07 208.001 278.07C207.47 278.07 207.017 277.886 206.649 277.518C206.281 277.15 206.097 276.733 206.097 276.266V254.758Z",fill:"#18572B"}),u.createElement("path",{d:"M229.392 278.07C229.024 278.07 228.663 277.978 228.316 277.794C227.969 277.61 227.7 277.369 227.516 277.065L218.491 260.798V276.238C218.491 276.726 218.3 277.15 217.918 277.518C217.536 277.886 217.076 278.07 216.545 278.07C216.014 278.07 215.568 277.886 215.207 277.518C214.846 277.15 214.669 276.719 214.669 276.238V254.9C214.669 254.341 214.853 253.881 215.221 253.513C215.589 253.146 216.078 252.955 216.679 252.955C217.076 252.955 217.444 253.047 217.791 253.23C218.137 253.414 218.406 253.669 218.59 253.994C218.845 254.433 219.206 255.083 219.681 255.939C220.155 256.795 220.679 257.743 221.259 258.782C221.839 259.822 222.448 260.918 223.078 262.078C223.715 263.238 224.324 264.342 224.904 265.41C225.485 266.47 226.009 267.432 226.483 268.288C226.957 269.144 227.332 269.802 227.608 270.269V254.801C227.608 254.291 227.8 253.86 228.182 253.499C228.564 253.138 229.017 252.962 229.555 252.962C230.086 252.962 230.532 253.138 230.893 253.499C231.254 253.86 231.431 254.291 231.431 254.801V276.132C231.431 276.662 231.24 277.122 230.857 277.504C230.489 277.879 229.994 278.07 229.392 278.07Z",fill:"#18572B"}),u.createElement("path",{d:"M239.04 269.052C239.04 269.908 239.118 270.679 239.267 271.379C239.415 272.072 239.677 272.659 240.045 273.147C240.413 273.635 240.902 274.003 241.503 274.258C242.105 274.512 242.848 274.639 243.726 274.639C244.441 274.639 245.071 274.555 245.616 274.378C246.161 274.201 246.664 273.953 247.124 273.635V267.22H244.519C244.059 267.22 243.648 267.043 243.301 266.697C242.955 266.35 242.778 265.933 242.778 265.445C242.778 264.957 242.955 264.547 243.301 264.214C243.648 263.882 244.052 263.712 244.519 263.712H248.476C249.127 263.712 249.693 263.882 250.175 264.214C250.663 264.547 250.904 265.056 250.904 265.721V273.699C250.904 274.463 250.677 275.113 250.224 275.658C249.771 276.203 249.191 276.648 248.469 276.995C247.754 277.341 246.961 277.596 246.09 277.758C245.22 277.921 244.37 277.999 243.535 277.999C242.098 277.999 240.859 277.787 239.819 277.355C238.778 276.931 237.915 276.33 237.235 275.552C236.556 274.781 236.046 273.84 235.706 272.744C235.373 271.648 235.204 270.417 235.204 269.052V261.909C235.204 260.565 235.373 259.341 235.706 258.231C236.039 257.12 236.549 256.18 237.235 255.402C237.915 254.624 238.778 254.03 239.819 253.598C240.859 253.174 242.098 252.955 243.535 252.955C244.391 252.955 245.22 253.039 246.02 253.216C246.819 253.393 247.527 253.634 248.157 253.945C248.78 254.256 249.283 254.617 249.651 255.02C250.019 255.423 250.203 255.847 250.203 256.286C250.203 256.746 250.033 257.142 249.7 257.467C249.368 257.792 248.943 257.955 248.433 257.955C248.108 257.955 247.86 257.905 247.69 257.799C247.513 257.693 247.301 257.559 247.046 257.403L246.869 257.297C246.409 256.972 245.913 256.731 245.397 256.569C244.873 256.406 244.314 256.328 243.712 256.328C242.834 256.328 242.091 256.456 241.489 256.71C240.888 256.965 240.399 257.333 240.031 257.821C239.663 258.309 239.401 258.896 239.253 259.589C239.104 260.282 239.026 261.06 239.026 261.916V269.052H239.04Z",fill:"#18572B"}),u.createElement("path",{d:"M269.181 269.052V276.196C269.181 276.684 268.996 277.115 268.628 277.497C268.26 277.879 267.807 278.07 267.276 278.07C266.767 278.07 266.321 277.886 265.939 277.518C265.556 277.15 265.365 276.712 265.365 276.203V255.352C265.365 254.801 265.578 254.313 266.009 253.895C266.434 253.478 266.951 253.273 267.552 253.273H272.656C274.185 253.273 275.48 253.492 276.542 253.931C277.604 254.369 278.467 254.963 279.126 255.699C279.784 256.442 280.258 257.283 280.549 258.231C280.839 259.179 280.98 260.176 280.98 261.216C280.98 262.467 280.782 263.578 280.393 264.561C279.996 265.544 279.437 266.364 278.708 267.022C277.979 267.68 277.108 268.182 276.089 268.529C275.07 268.875 273.923 269.052 272.649 269.052H269.181ZM269.181 265.509H272.649C275.657 265.509 277.165 264.066 277.165 261.173C277.165 260.643 277.101 260.112 276.974 259.596C276.847 259.073 276.613 258.613 276.28 258.21C275.948 257.807 275.487 257.474 274.907 257.219C274.327 256.965 273.576 256.838 272.649 256.838H269.181V265.509Z",fill:"#18572B"}),u.createElement("path",{d:"M285.008 276.719C284.895 277.136 284.64 277.461 284.265 277.688C283.882 277.921 283.529 278.034 283.203 278.034C282.672 278.034 282.205 277.872 281.816 277.546C281.419 277.221 281.228 276.797 281.228 276.266C281.228 276.174 281.235 276.061 281.242 275.92C281.256 275.778 281.271 275.679 281.292 275.608L288.059 255.041C288.243 254.44 288.512 253.945 288.859 253.549C289.205 253.153 289.715 252.962 290.388 252.962C291.06 252.962 291.563 253.16 291.895 253.549C292.228 253.945 292.504 254.44 292.709 255.041L299.476 275.608C299.526 275.679 299.554 275.785 299.561 275.92C299.575 276.061 299.575 276.174 299.575 276.266C299.575 276.797 299.384 277.228 299.002 277.546C298.62 277.865 298.153 278.034 297.594 278.034C296.971 278.034 296.518 277.836 296.242 277.447C295.965 277.051 295.711 276.549 295.477 275.92L294.366 272.553H286.275L285.008 276.719ZM290.388 258.676C289.949 260.529 289.467 262.305 288.944 264.016C288.42 265.728 287.896 267.461 287.365 269.222H293.375C292.844 267.468 292.306 265.721 291.761 263.981C291.216 262.248 290.763 260.48 290.388 258.676Z",fill:"#18572B"}),u.createElement("path",{d:"M307.645 267.248L306.463 268.67V276.231C306.463 276.719 306.279 277.136 305.911 277.497C305.543 277.858 305.09 278.034 304.559 278.034C304.028 278.034 303.575 277.858 303.207 277.497C302.839 277.136 302.655 276.719 302.655 276.231V254.758C302.655 254.27 302.839 253.853 303.207 253.492C303.575 253.131 304.028 252.955 304.559 252.955C305.09 252.955 305.543 253.131 305.911 253.492C306.279 253.853 306.463 254.27 306.463 254.758V263.083L314.277 253.789C314.461 253.584 314.702 253.393 314.992 253.216C315.283 253.039 315.587 252.955 315.913 252.955C316.309 252.955 316.705 253.117 317.109 253.443C317.512 253.768 317.718 254.192 317.718 254.723C317.718 254.928 317.689 255.133 317.633 255.331C317.576 255.529 317.456 255.727 317.272 255.939L310.087 264.405C311.404 266.209 312.713 268.012 314.008 269.816C315.304 271.619 316.613 273.423 317.93 275.226C318.043 275.41 318.121 275.573 318.156 275.714C318.192 275.856 318.206 276.004 318.206 276.167C318.206 276.584 318.057 277.002 317.753 277.419C317.449 277.836 316.988 278.041 316.366 278.041C315.672 278.041 315.141 277.773 314.766 277.242L307.645 267.248Z",fill:"#18572B"}),u.createElement("path",{d:"M321.115 254.758C321.115 254.27 321.299 253.853 321.667 253.492C322.035 253.131 322.488 252.955 323.019 252.955C323.55 252.955 324.003 253.131 324.371 253.492C324.739 253.853 324.923 254.27 324.923 254.758V276.266C324.923 276.726 324.739 277.143 324.371 277.518C324.003 277.886 323.55 278.07 323.019 278.07C322.488 278.07 322.035 277.886 321.667 277.518C321.299 277.15 321.115 276.733 321.115 276.266V254.758Z",fill:"#18572B"}),u.createElement("path",{d:"M339.654 270.891C339.654 269.964 339.463 269.293 339.08 268.861C338.698 268.437 338.323 268.125 337.955 267.942C337.374 267.666 336.744 267.418 336.065 267.199C335.385 266.98 334.692 266.746 333.998 266.506C333.304 266.265 332.632 265.982 331.988 265.657C331.337 265.332 330.763 264.922 330.268 264.426C329.772 263.931 329.369 263.316 329.071 262.588C328.767 261.859 328.618 260.975 328.618 259.935C328.618 257.764 329.298 256.06 330.65 254.822C332.002 253.584 333.835 252.969 336.15 252.969C336.61 252.969 337.212 253.004 337.941 253.075C338.67 253.146 339.385 253.28 340.078 253.471C340.772 253.669 341.367 253.945 341.869 254.305C342.365 254.666 342.613 255.133 342.613 255.713C342.613 256.173 342.443 256.583 342.11 256.929C341.777 257.276 341.303 257.453 340.701 257.453C340.397 257.453 340.114 257.403 339.831 257.311C339.555 257.219 339.25 257.106 338.932 256.979C338.606 256.852 338.245 256.746 337.842 256.647C337.438 256.555 336.943 256.505 336.369 256.505C335.881 256.505 335.407 256.555 334.947 256.661C334.486 256.767 334.076 256.937 333.715 257.184C333.354 257.425 333.071 257.764 332.865 258.188C332.66 258.62 332.554 259.143 332.554 259.766C332.554 260.254 332.611 260.657 332.731 260.982C332.844 261.307 332.993 261.583 333.163 261.817C333.34 262.05 333.524 262.227 333.722 262.354C333.92 262.482 334.111 262.595 334.295 262.687C334.876 262.991 335.513 263.245 336.207 263.465C336.9 263.684 337.594 263.924 338.288 264.179C338.981 264.434 339.647 264.724 340.284 265.049C340.921 265.374 341.487 265.777 341.983 266.265C342.478 266.753 342.882 267.355 343.179 268.069C343.476 268.783 343.632 269.653 343.632 270.672C343.632 271.853 343.427 272.9 343.023 273.812C342.62 274.724 342.053 275.502 341.324 276.139C340.595 276.775 339.732 277.256 338.741 277.582C337.743 277.907 336.667 278.07 335.513 278.07C334.911 278.07 334.21 278.02 333.411 277.914C332.611 277.808 331.86 277.645 331.152 277.412C330.445 277.179 329.843 276.881 329.347 276.507C328.852 276.139 328.604 275.686 328.604 275.156C328.604 274.696 328.774 274.286 329.107 273.925C329.44 273.564 329.864 273.388 330.374 273.388C330.629 273.388 330.912 273.444 331.223 273.564C331.535 273.678 331.896 273.812 332.299 273.96C332.703 274.109 333.17 274.243 333.708 274.357C334.239 274.47 334.855 274.533 335.548 274.533C336.936 274.533 337.969 274.222 338.656 273.6C339.307 272.935 339.654 272.044 339.654 270.891Z",fill:"#18572B"}),u.createElement("path",{d:"M351.73 256.838H347.532C346.98 256.838 346.52 256.661 346.159 256.3C345.798 255.939 345.621 255.529 345.621 255.069C345.621 254.673 345.805 254.277 346.173 253.874C346.541 253.471 346.994 253.266 347.525 253.266H359.743C360.231 253.266 360.677 253.443 361.08 253.789C361.484 254.136 361.689 254.567 361.689 255.069C361.689 255.529 361.498 255.939 361.116 256.3C360.734 256.661 360.274 256.838 359.743 256.838H355.545V276.266C355.545 276.726 355.361 277.143 354.986 277.518C354.618 277.886 354.165 278.07 353.634 278.07C353.103 278.07 352.65 277.886 352.282 277.518C351.914 277.15 351.73 276.733 351.73 276.266V256.838Z",fill:"#18572B"}),u.createElement("path",{d:"M364.443 276.719C364.329 277.136 364.075 277.461 363.7 277.688C363.317 277.921 362.963 278.034 362.638 278.034C362.107 278.034 361.64 277.872 361.25 277.546C360.854 277.221 360.663 276.797 360.663 276.266C360.663 276.174 360.67 276.061 360.677 275.92C360.691 275.778 360.705 275.679 360.727 275.608L367.494 255.041C367.678 254.44 367.947 253.945 368.293 253.549C368.64 253.153 369.15 252.962 369.822 252.962C370.495 252.962 370.997 253.16 371.33 253.549C371.663 253.945 371.939 254.44 372.144 255.041L378.911 275.608C378.961 275.679 378.989 275.785 378.996 275.92C379.01 276.061 379.01 276.174 379.01 276.266C379.01 276.797 378.819 277.228 378.437 277.546C378.055 277.865 377.588 278.034 377.028 278.034C376.405 278.034 375.952 277.836 375.676 277.447C375.4 277.051 375.145 276.549 374.912 275.92L373.801 272.553H365.71L364.443 276.719ZM369.822 258.676C369.384 260.529 368.902 262.305 368.378 264.016C367.855 265.728 367.331 267.461 366.8 269.222H372.802C372.272 267.468 371.734 265.721 371.189 263.981C370.651 262.248 370.191 260.48 369.822 258.676Z",fill:"#18572B"}),u.createElement("path",{d:"M396.791 278.07C396.423 278.07 396.062 277.978 395.715 277.794C395.369 277.61 395.1 277.369 394.916 277.065L385.89 260.798V276.238C385.89 276.726 385.699 277.15 385.317 277.518C384.935 277.886 384.475 278.07 383.944 278.07C383.413 278.07 382.967 277.886 382.606 277.518C382.245 277.15 382.068 276.719 382.068 276.238V254.9C382.068 254.341 382.252 253.881 382.62 253.513C382.988 253.146 383.477 252.955 384.078 252.955C384.475 252.955 384.843 253.047 385.19 253.23C385.537 253.414 385.806 253.669 385.99 253.994C386.244 254.433 386.605 255.083 387.08 255.939C387.554 256.795 388.078 257.743 388.658 258.782C389.239 259.822 389.847 260.918 390.477 262.078C391.114 263.238 391.723 264.342 392.304 265.41C392.884 266.47 393.408 267.432 393.882 268.288C394.356 269.144 394.731 269.802 395.008 270.269V254.801C395.008 254.291 395.199 253.86 395.581 253.499C395.963 253.138 396.416 252.962 396.954 252.962C397.485 252.962 397.931 253.138 398.292 253.499C398.653 253.86 398.83 254.291 398.83 254.801V276.132C398.83 276.662 398.639 277.122 398.257 277.504C397.889 277.879 397.393 278.07 396.791 278.07Z",fill:"#18572B"})),Qoe=u.forwardRef(TBe),RBe="_logo_af0wb_15",IBe="_container_af0wb_27",xBe="_content_af0wb_43",MBe="_formContainer_af0wb_59",PBe="_authLinks_af0wb_123",Ll={logo:RBe,container:IBe,content:xBe,formContainer:MBe,authLinks:PBe};function LBe(t){return u.useCallback(async(e,n,r)=>{const i=L9({baseUrl:e}),s=new ax({matrixClient:i,doRequest:async()=>i.login("m.login.password",{identifier:{type:"m.id.user",user:n},password:r}),stateUpdated:()=>{},requestEmailToken:async()=>Promise.resolve({sid:""})}),{user_id:a,access_token:o,device_id:l}=await s.attemptAuth(),c={user_id:a,access_token:o,device_id:l,passwordlessUser:!1};return await(t==null?void 0:t.logout(!0)),[await qoe({baseUrl:e,accessToken:o,userId:a,deviceId:l},!1),c]},[t])}const OBe=()=>{var v,b;const{t}=it();M4(t("login_title"));const{client:e,setClient:n}=lp(),r=LBe(e),i=At.defaultHomeserverUrl(),s=u.useRef(null),a=u.useRef(null),o=Wl(),l=Gi(),[c,d]=u.useState(!1),[f,p]=u.useState(),g=u.useCallback(C=>{if(C.preventDefault(),d(!0),!i||!s.current||!a.current){p(Error("Login parameters are undefined")),d(!1);return}r(i,s.current.value,a.current.value).then(async([S,R])=>{if(!n)return;n(S,R);const w=l.state;w&&w.from?await o(w.from):await o("/"),It.instance.eventLogin.track()}).catch(S=>{p(S),d(!1)})},[r,l,o,i,n]);let y=(v=At.defaultServerName())==null?void 0:v.slice(0,25);return y=(y==null?void 0:y.length)!==((b=At.defaultServerName())==null?void 0:b.length)?y+"...":y,E.jsx(E.Fragment,{children:E.jsx("div",{className:Ll.container,children:E.jsxs("div",{className:Ll.content,children:[E.jsxs("div",{className:Ll.formContainer,children:[E.jsx(Qoe,{width:"auto",height:"auto",className:Ll.logo}),E.jsx("h2",{children:t("log_in")}),E.jsx("h4",{children:t("login_subheading")}),E.jsxs("form",{onSubmit:g,children:[E.jsx(en,{children:E.jsx(hi,{type:"text",ref:s,placeholder:t("common.username"),label:t("common.username"),autoCorrect:"off",autoCapitalize:"none",prefix:"@",suffix:`:${y}`,"data-testid":"login_username"})}),E.jsx(en,{children:E.jsx(hi,{type:"password",ref:a,placeholder:t("common.password"),label:t("common.password"),"data-testid":"login_password"})}),f&&E.jsx(en,{children:E.jsx(Jh,{error:f})}),E.jsx(en,{children:E.jsx(Bt,{type:"submit",disabled:c,"data-testid":"login_login",children:t(c?"logging_in":"login_title")})})]})]}),E.jsxs("div",{className:Ll.authLinks,children:[E.jsx("p",{children:t("login_auth_links_prompt")}),E.jsx("p",{children:E.jsxs(ca,{i18nKey:"login_auth_links",children:[E.jsx($l,{to:"/register",children:"Create an account"})," Or ",E.jsx($l,{to:"/",children:"Access as a guest"})]})})]})]})})})},ABe=()=>{const{t}=it();M4(t("action.register"));const{loading:e,authenticated:n,passwordlessUser:r,client:i,setClient:s}=PP(),a=u.useRef(null),o=Wl(),l=Gi(),[c,d]=u.useState(!1),[f,p]=u.useState(),[g,y]=u.useState(""),[v,b]=u.useState(""),{recaptchaKey:C,register:S}=ZL(i),{execute:R,reset:w,recaptchaId:I}=zL(C),k=u.useCallback(x=>{x.preventDefault();const L=new FormData(x.target),N=L.get("userName"),D=L.get("password"),U=L.get("passwordConfirmation");if(D!==U)return;(async()=>{d(!0);const $=await R(),[Z,V]=await S(N,D,N,$,r);if(i&&(i!=null&&i.groupCallEventHandler)&&r)for(const z of i.groupCallEventHandler.groupCalls.values()){const K=z.room.roomId;try{await Z.joinRoom(K)}catch(q){q.errcode==="M_LIMIT_EXCEEDED"?(await ru(q.data.retry_after_ms),await Z.joinRoom(K)):(J9(q),A.error(`Couldn't join room ${K}`,q))}}s==null||s(Z,V),It.instance.eventSignup.cacheSignupEnd(new Date)})().then(async()=>{var $,Z;($=l.state)!=null&&$.from?await o((Z=l.state)==null?void 0:Z.from):await o("/")}).catch($=>{p($),d(!1),w()})},[S,l,o,r,w,R,i,s]);return u.useEffect(()=>{var x,L;g&&v&&g!==v?(x=a.current)==null||x.setCustomValidity(t("register.passwords_must_match")):(L=a.current)==null||L.setCustomValidity("")},[g,v,t]),u.useEffect(()=>{var x;!e&&n&&!r&&!c&&((x=o("/"))==null||x.catch(L=>{A.error("Failed to navigate to /",L)}))},[e,o,n,r,c]),e?E.jsx(Py,{}):(It.instance.eventSignup.cacheSignupStart(new Date),E.jsx(E.Fragment,{children:E.jsx("div",{className:Ll.container,children:E.jsxs("div",{className:Ll.content,children:[E.jsxs("div",{className:Ll.formContainer,children:[E.jsx(Qoe,{width:"auto",height:"auto",className:Ll.logo}),E.jsx("h2",{children:t("register_heading")}),E.jsxs("form",{onSubmit:k,children:[E.jsx(en,{children:E.jsx(hi,{type:"text",name:"userName",placeholder:t("common.username"),label:t("common.username"),autoCorrect:"off",autoCapitalize:"none",prefix:"@",suffix:`:${At.defaultServerName()}`,"data-testid":"register_username"})}),E.jsx(en,{children:E.jsx(hi,{required:!0,name:"password",type:"password",onChange:x=>y(x.target.value),value:g,placeholder:t("common.password"),label:t("common.password"),"data-testid":"register_password"})}),E.jsx(en,{children:E.jsx(hi,{required:!0,type:"password",name:"passwordConfirmation",onChange:x=>b(x.target.value),value:v,placeholder:t("register_confirm_password_label"),label:t("register_confirm_password_label"),ref:a,"data-testid":"register_confirm_password"})}),E.jsx(_n,{size:"sm"}),f&&E.jsx(en,{children:E.jsx(Jh,{error:f})}),E.jsx(en,{children:E.jsx(Bt,{type:"submit",disabled:c,"data-testid":"register_register",children:t(c?"register.registering":"action.register")})}),E.jsx("div",{id:I})]})]}),E.jsx("div",{className:Ll.authLinks,children:E.jsxs(ca,{i18nKey:"register_auth_links",children:[E.jsx("p",{children:"Already have an account?"}),E.jsxs("p",{children:[E.jsx($l,{to:"/login",children:"Log in"})," Or ",E.jsx($l,{to:"/",children:"Access as a guest"})]})]})})]})})}))},NBe="_form_9m4c3_15",DBe="_headline_9m4c3_37",UBe="_container_9m4c3_75",FBe="_main_9m4c3_91",jBe="_footer_9m4c3_125",j3={form:NBe,headline:DBe,container:UBe,main:FBe,footer:jBe};function Xoe(){const{setClient:t}=lp(),{privacyPolicyUrl:e,recaptchaKey:n,register:r}=ZL(),{execute:i,reset:s,recaptchaId:a}=zL(n),o=u.useCallback(async l=>{if(!t)throw new Error("No client context");if(Xe)throw new Error("Registration was skipped: We should never try to register password-less user in embedded mode.");try{const c=await i(),d=Woe(),[f,p]=await r(d,Ba(16),l,c,!0);t(f,p)}catch(c){throw s(),c}},[i,s,r,t]);return{privacyPolicyUrl:e,registerPasswordlessUser:o,recaptchaId:a}}const HBe=()=>{const[t,e]=u.useState(!1),[n,r]=u.useState(),{registerPasswordlessUser:i,recaptchaId:s}=Xoe(),a=u.useCallback(c=>{c.preventDefault(),e(!0);const f=new FormData(c.target).get("displayName");i(typeof f=="string"?f:"").catch(g=>{A.error("Failed to register passwordless user",c),e(!1),r(g)})},[i]),{t:o}=it(),l=Gi();return E.jsxs(E.Fragment,{children:[E.jsxs(l1,{children:[E.jsx(Zh,{children:E.jsx(Mh,{})}),E.jsx(zh,{children:E.jsx(GL,{preventNavigation:!0})})]}),E.jsxs("div",{className:j3.container,children:[E.jsxs("main",{className:j3.main,children:[E.jsx(o1,{size:"xl",weight:"semibold",className:j3.headline,children:o("lobby.join_as_guest")}),E.jsxs(u_,{className:j3.form,onSubmit:a,children:[E.jsx(en,{children:E.jsx(hi,{id:"displayName",name:"displayName",label:o("common.display_name"),placeholder:o("common.display_name"),"data-testid":"joincall_displayName",type:"text",required:!0,autoComplete:"off"})}),E.jsx(_n,{size:"sm",children:E.jsxs(ca,{i18nKey:"room_auth_view_ssla_caption",children:[''," ",E.jsx(NR,{href:At.get().ssla,children:""})]})}),n&&E.jsx(en,{children:E.jsx(Jh,{error:n})}),E.jsx(Bt,{type:"submit",size:"lg",disabled:t,"data-testid":"joincall_joincall",children:o(t?"common.loading":"room_auth_view_continue_button")}),E.jsx("div",{id:s})]})]}),E.jsx(_n,{className:j3.footer,children:E.jsxs(ca,{i18nKey:"unauthenticated_view_body",children:["Not registered yet?"," ",E.jsx($l,{to:"/register",state:{from:l},children:"Create an account"})]})})]})]})};var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ele(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tle={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(a0,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function o(v,b){var C=v[b];if(typeof C.bind=="function")return C.bind(v);try{return Function.prototype.bind.call(C,v)}catch{return function(){return Function.prototype.apply.apply(C,[v,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(v){return v==="debug"&&(v="log"),typeof console===n?!1:v==="trace"&&r?l:console[v]!==void 0?o(console,v):console.log!==void 0?o(console,"log"):e}function d(){for(var v=this.getLevel(),b=0;b<i.length;b++){var C=i[b];this[C]=b<v?e:this.methodFactory(C,v,this.name)}if(this.log=this.debug,typeof console===n&&v<this.levels.SILENT)return"No console available for logging"}function f(v){return function(){typeof console!==n&&(d.call(this),this[v].apply(this,arguments))}}function p(v,b,C){return c(v)||f.apply(this,arguments)}function g(v,b){var C=this,S,R,w,I="loglevel";typeof v=="string"?I+=":"+v:typeof v=="symbol"&&(I=void 0);function k(U){var j=(i[U]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=j;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+j+";"}catch{}}}function x(){var U;if(!(typeof window===n||!I)){try{U=window.localStorage[I]}catch{}if(typeof U===n)try{var j=window.document.cookie,$=encodeURIComponent(I),Z=j.indexOf($+"=");Z!==-1&&(U=/^([^;]+)/.exec(j.slice(Z+$.length+1))[1])}catch{}return C.levels[U]===void 0&&(U=void 0),U}}function L(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(U){var j=U;if(typeof j=="string"&&C.levels[j.toUpperCase()]!==void 0&&(j=C.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=C.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+U)}C.name=v,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=b||p,C.getLevel=function(){return w??R??S},C.setLevel=function(U,j){return w=N(U),j!==!1&&k(w),d.call(C)},C.setDefaultLevel=function(U){R=N(U),x()||C.setLevel(U,!1)},C.resetLevel=function(){w=null,L(),d.call(C)},C.enableAll=function(U){C.setLevel(C.levels.TRACE,U)},C.disableAll=function(U){C.setLevel(C.levels.SILENT,U)},C.rebuild=function(){if(a!==C&&(S=N(a.getLevel())),d.call(C),a===C)for(var U in s)s[U].rebuild()},S=N(a?a.getLevel():"WARN");var D=x();D!=null&&(w=N(D)),d.call(C)}a=new g,a.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var b=s[v];return b||(b=s[v]=new g(v,a.methodFactory)),b};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})})(tle);var $Be=tle.exports;const VBe=ele($Be);var cI=function(t,e){return cI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},cI(t,e)};function Cu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function BBe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((r=r.apply(t,[])).next())})}function nle(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Lm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function e9(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function t9(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Y2(t){return this instanceof Y2?(this.v=t,this):new Y2(t)}function qBe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(y){return Promise.resolve(y).then(g,f)}}function o(g,y){r[g]&&(i[g]=function(v){return new Promise(function(b,C){s.push([g,v,b,C])>1||l(g,v)})},y&&(i[g]=y(i[g])))}function l(g,y){try{c(r[g](y))}catch(v){p(s[0][3],v)}}function c(g){g.value instanceof Y2?Promise.resolve(g.value.v).then(d,f):p(s[0][2],g)}function d(g){l("next",g)}function f(g){l("throw",g)}function p(g,y){g(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function GBe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lm=="function"?Lm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function Kr(t){return typeof t=="function"}function WL(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $S=WL(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function n9(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var P4=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Lm(a),l=o.next();!l.done;l=o.next()){var c=l.value;c.remove(this)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(Kr(d))try{d()}catch(v){s=v instanceof $S?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var p=Lm(f),g=p.next();!g.done;g=p.next()){var y=g.value;try{Iq(y)}catch(v){s=s??[],v instanceof $S?s=t9(t9([],e9(s)),e9(v.errors)):s.push(v)}}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}if(s)throw new $S(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Iq(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&n9(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&n9(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),rle=P4.EMPTY;function ile(t){return t instanceof P4||t&&"closed"in t&&Kr(t.remove)&&Kr(t.add)&&Kr(t.unsubscribe)}function Iq(t){Kr(t)?t():t.unsubscribe()}var KBe={Promise:void 0},ZBe={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,t9([t,e],e9(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function sle(t){ZBe.setTimeout(function(){throw t})}function xq(){}function _6(t){t()}var YL=function(t){Cu(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,ile(n)&&n.add(r)):r.destination=YBe,r}return e.create=function(n,r,i){return new uI(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(P4),zBe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){t7(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){t7(r)}else t7(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){t7(n)}},t}(),uI=function(t){Cu(e,t);function e(n,r,i){var s=t.call(this)||this,a;return Kr(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,s.destination=new zBe(a),s}return e}(YL);function t7(t){sle(t)}function WBe(t){throw t}var YBe={closed:!0,next:xq,error:WBe,complete:xq},JL=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ale(t){return t}function JBe(t){return t.length===0?ale:t.length===1?t[0]:function(e){return t.reduce(function(n,r){return r(n)},e)}}var fa=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=XBe(e)?e:new uI(e,n,r);return _6(function(){var a=i,o=a.operator,l=a.source;s.add(o?o.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Mq(n),new n(function(i,s){var a=new uI({next:function(o){try{e(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[JL]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return JBe(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Mq(e),new e(function(r,i){var s;n.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function Mq(t){var e;return(e=t??KBe.Promise)!==null&&e!==void 0?e:Promise}function QBe(t){return t&&Kr(t.next)&&Kr(t.error)&&Kr(t.complete)}function XBe(t){return t&&t instanceof YL||QBe(t)&&ile(t)}function eqe(t){return Kr(t==null?void 0:t.lift)}function L4(t){return function(e){if(eqe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function r9(t,e,n,r,i){return new tqe(t,e,n,r,i)}var tqe=function(t){Cu(e,t);function e(n,r,i,s,a,o){var l=t.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=r?function(c){try{r(c)}catch(d){n.error(d)}}:t.prototype._next,l._error=s?function(c){try{s(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(YL),nqe=WL(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ole=function(t){Cu(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Pq(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new nqe},e.prototype.next=function(n){var r=this;_6(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Lm(r.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(n)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;_6(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;_6(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,a=i.isStopped,o=i.observers;return s||a?rle:(this.currentObservers=null,o.push(n),new P4(function(){r.currentObservers=null,n9(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?n.error(s):a&&n.complete()},e.prototype.asObservable=function(){var n=new fa;return n.source=this,n},e.create=function(n,r){return new Pq(n,r)},e}(fa),Pq=function(t){Cu(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:rle},e}(ole);(function(t){Cu(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e})(ole);var rqe={now:function(){return Date.now()}},iqe=function(t){Cu(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(P4),Lq={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,t9([t,e],e9(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},sqe=function(t){Cu(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Lq.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Lq.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,n9(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(iqe),Oq=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=rqe.now,t}(),aqe=function(t){Cu(e,t);function e(n,r){r===void 0&&(r=Oq.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(Oq);new aqe(sqe);function oqe(t){return t&&Kr(t.schedule)}function lqe(t){return t[t.length-1]}function lle(t){return oqe(lqe(t))?t.pop():void 0}var cle=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function ule(t){return Kr(t==null?void 0:t.then)}function dle(t){return Kr(t[JL])}function hle(t){return Symbol.asyncIterator&&Kr(t==null?void 0:t[Symbol.asyncIterator])}function fle(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function cqe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mle=cqe();function ple(t){return Kr(t==null?void 0:t[mle])}function gle(t){return qBe(this,arguments,function(){var e,n,r,i;return nle(this,function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Y2(e.read())];case 3:return n=s.sent(),r=n.value,i=n.done,i?[4,Y2(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Y2(r)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function vle(t){return Kr(t==null?void 0:t.getReader)}function O4(t){if(t instanceof fa)return t;if(t!=null){if(dle(t))return uqe(t);if(cle(t))return dqe(t);if(ule(t))return hqe(t);if(hle(t))return yle(t);if(ple(t))return fqe(t);if(vle(t))return mqe(t)}throw fle(t)}function uqe(t){return new fa(function(e){var n=t[JL]();if(Kr(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dqe(t){return new fa(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function hqe(t){return new fa(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,sle)})}function fqe(t){return new fa(function(e){var n,r;try{for(var i=Lm(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function yle(t){return new fa(function(e){pqe(t,e).catch(function(n){return e.error(n)})})}function mqe(t){return yle(gle(t))}function pqe(t,e){var n,r,i,s;return BBe(this,void 0,void 0,function(){var a,o;return nle(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=GBe(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),i={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function vh(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function _le(t,e){return e===void 0&&(e=0),L4(function(n,r){n.subscribe(r9(r,function(i){return vh(r,t,function(){return r.next(i)},e)},function(){return vh(r,t,function(){return r.complete()},e)},function(i){return vh(r,t,function(){return r.error(i)},e)}))})}function Cle(t,e){return e===void 0&&(e=0),L4(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function gqe(t,e){return O4(t).pipe(Cle(e),_le(e))}function vqe(t,e){return O4(t).pipe(Cle(e),_le(e))}function yqe(t,e){return new fa(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _qe(t,e){return new fa(function(n){var r;return vh(n,e,function(){r=t[mle](),vh(n,e,function(){var i,s,a;try{i=r.next(),s=i.value,a=i.done}catch(o){n.error(o);return}a?n.complete():n.next(s)},0,!0)}),function(){return Kr(r==null?void 0:r.return)&&r.return()}})}function ble(t,e){if(!t)throw new Error("Iterable cannot be null");return new fa(function(n){vh(n,e,function(){var r=t[Symbol.asyncIterator]();vh(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Cqe(t,e){return ble(gle(t),e)}function bqe(t,e){if(t!=null){if(dle(t))return gqe(t,e);if(cle(t))return yqe(t,e);if(ule(t))return vqe(t,e);if(hle(t))return ble(t,e);if(ple(t))return _qe(t,e);if(vle(t))return Cqe(t,e)}throw fle(t)}function Eqe(t,e){return e?bqe(t,e):O4(t)}WL(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function d_(t,e){return L4(function(n,r){var i=0;n.subscribe(r9(r,function(s){r.next(t.call(e,s,i++))}))})}function Sqe(t,e,n,r,i,s,a,o){var l=[],c=0,d=0,f=!1,p=function(){f&&!l.length&&!c&&e.complete()},g=function(v){return c<r?y(v):l.push(v)},y=function(v){c++;var b=!1;O4(n(v,d++)).subscribe(r9(e,function(C){e.next(C)},function(){b=!0},void 0,function(){if(b)try{c--;for(var C=function(){var S=l.shift();a||y(S)};l.length&&c<r;)C();p()}catch(S){e.error(S)}}))};return t.subscribe(r9(e,g,function(){f=!0,p()})),function(){}}function Ele(t,e,n){return n===void 0&&(n=1/0),Kr(e)?Ele(function(r,i){return d_(function(s,a){return e(r,s,i,a)})(O4(t(r,i)))},n):(typeof e=="number"&&(n=e),L4(function(r,i){return Sqe(r,i,t,n)}))}function wqe(t){return Ele(ale,t)}function kqe(){return wqe(1)}function Aq(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kqe()(Eqe(t,lle(t)))}function h_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=lle(t);return L4(function(r,i){(n?Aq(t,r,n):Aq(t,r)).subscribe(i)})}var Tqe="lk";function Sle(t){return typeof t>"u"?!1:Rqe(t)||Iqe(t)}function Rqe(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Iqe(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}var xqe=[le.ConnectionStateChanged,le.RoomMetadataChanged,le.ActiveSpeakersChanged,le.ConnectionQualityChanged,le.ParticipantConnected,le.ParticipantDisconnected,le.ParticipantPermissionsChanged,le.ParticipantMetadataChanged,le.ParticipantNameChanged,le.ParticipantAttributesChanged,le.TrackMuted,le.TrackUnmuted,le.TrackPublished,le.TrackUnpublished,le.TrackStreamStateChanged,le.TrackSubscriptionFailed,le.TrackSubscriptionPermissionChanged,le.TrackSubscriptionStatusChanged],Mqe=[...xqe,le.LocalTrackPublished,le.LocalTrackUnpublished];se.TrackPublished,se.TrackUnpublished,se.TrackMuted,se.TrackUnmuted,se.TrackStreamStateChanged,se.TrackSubscribed,se.TrackUnsubscribed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionFailed,se.LocalTrackPublished,se.LocalTrackUnpublished;var Pqe=[se.ConnectionQualityChanged,se.IsSpeakingChanged,se.ParticipantMetadataChanged,se.ParticipantPermissionsChanged,se.TrackMuted,se.TrackUnmuted,se.TrackPublished,se.TrackUnpublished,se.TrackStreamStateChanged,se.TrackSubscriptionFailed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionStatusChanged];[...Pqe,se.LocalTrackPublished,se.LocalTrackUnpublished];var Qd=VBe.getLogger("lk-components-js");Qd.setDefaultLevel("WARN");function wle(t){return typeof t=="object"}function kle(t){return Array.isArray(t)&&t.filter(wle).length>0}function Lqe(t){return`${Tqe}-${t}`}function Oqe(t){const e=dI(t),n=Tle(t.participant).pipe(d_(()=>dI(t)),h_(e));return{className:Lqe(t.source===ue.Source.Camera||t.source===ue.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function dI(t){if(Sle(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTrackPublications().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(e)return r.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function Aqe(t,...e){return new fa(n=>{const r=()=>{n.next(t)};return e.forEach(i=>{t.on(i,r)}),()=>{e.forEach(i=>{t.off(i,r)})}}).pipe(h_(t))}function Nqe(t,...e){return new fa(n=>{const r=()=>{n.next(t)};return e.forEach(i=>{t.on(i,r)}),()=>{e.forEach(i=>{t.off(i,r)})}}).pipe(h_(t))}function Tle(t){return Nqe(t,se.TrackMuted,se.TrackUnmuted,se.ParticipantPermissionsChanged,se.TrackPublished,se.TrackUnpublished,se.LocalTrackPublished,se.LocalTrackUnpublished,se.MediaDevicesError,se.TrackSubscriptionStatusChanged).pipe(d_(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:i}=e,s=e.getTrackPublication(ue.Source.Microphone),a=e.getTrackPublication(ue.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:i,cameraTrack:a,microphoneTrack:s,participant:e}}))}new TextEncoder;new TextDecoder;function Nq(t,e,n=!0){const r=[t.localParticipant,...Array.from(t.remoteParticipants.values())],i=[];return r.forEach(s=>{e.forEach(a=>{const o=Array.from(s.trackPublications.values()).filter(l=>l.source===a&&(!n||l.track)).map(l=>({participant:s,publication:l,source:l.source}));i.push(...o)})}),{trackReferences:i,participants:r}}function Dqe(t,e,n){var r,i;const s=(r=n.additionalRoomEvents)!=null?r:Mqe,a=(i=n.onlySubscribed)!=null?i:!0,o=Array.from(new Set([le.ParticipantConnected,le.ParticipantDisconnected,le.ConnectionStateChanged,le.LocalTrackPublished,le.LocalTrackUnpublished,le.TrackPublished,le.TrackUnpublished,le.TrackSubscriptionStatusChanged,...s]).values());return Aqe(t,...o).pipe(d_(l=>{const c=Nq(l,e,a);return Qd.debug(`TrackReference[] was updated. (length ${c.trackReferences.length})`,c),c}),h_(Nq(t,e,a)))}u.createContext(void 0);const Uqe=u.createContext(void 0);function Fqe(){return u.useContext(Uqe)}function Rle(t){const e=Fqe(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}u.createContext(void 0);const Ile=u.createContext(void 0);function jqe(){return u.useContext(Ile)}function xle(t){const e=jqe(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}u.createContext(void 0);function Mle(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Mle(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hqe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Mle(t))&&(r&&(r+=" "),r+=e);return r}function $qe(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(r){console.error(r)}}}function Vqe(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const s=e[i],a=r[i];typeof s=="function"&&typeof a=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=$qe(s,a):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof a=="string"?e[i]=Hqe(s,a):e[i]=a!==void 0?a:s}}return e}function Bqe(t){return t!==void 0}function qqe(...t){return Vqe(...t.filter(Bqe))}function Gqe(t,e){return t==="processor"&&e&&typeof e=="object"&&"name"in e?e.name:t==="e2ee"&&e?"e2ee-enabled":e}function Kqe(t={}){const e=xle(t.room),[n,r]=u.useState(e.localParticipant),[i,s]=u.useState(n.isMicrophoneEnabled),[a,o]=u.useState(n.isMicrophoneEnabled),[l,c]=u.useState(n.lastMicrophoneError),[d,f]=u.useState(n.lastCameraError),[p,g]=u.useState(n.isMicrophoneEnabled),[y,v]=u.useState(void 0),[b,C]=u.useState(void 0),S=R=>{o(R.isCameraEnabled),s(R.isMicrophoneEnabled),g(R.isScreenShareEnabled),C(R.cameraTrack),v(R.microphoneTrack),c(R.participant.lastMicrophoneError),f(R.participant.lastCameraError),r(R.participant)};return u.useEffect(()=>{const R=Tle(e.localParticipant).subscribe(S);return()=>R.unsubscribe()},[e]),{isMicrophoneEnabled:i,isScreenShareEnabled:p,isCameraEnabled:a,microphoneTrack:y,cameraTrack:b,lastMicrophoneError:l,lastCameraError:d,localParticipant:n}}function Zqe(t=[ue.Source.Camera,ue.Source.Microphone,ue.Source.ScreenShare,ue.Source.ScreenShareAudio,ue.Source.Unknown],e={}){const n=xle(e.room),[r,i]=u.useState([]),[s,a]=u.useState([]),o=u.useMemo(()=>t.map(l=>wle(l)?l.source:l),[JSON.stringify(t)]);return u.useEffect(()=>{const l=Dqe(n,o,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:c,participants:d})=>{Qd.debug("setting track bundles",c,d),i(c),a(d)});return()=>l.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),u.useMemo(()=>{if(kle(t)){const l=Wqe(t,s),c=Array.from(r);return s.forEach(d=>{l.has(d.identity)&&(l.get(d.identity)??[]).forEach(f=>{if(r.find(({participant:g,publication:y})=>d.identity===g.identity&&y.source===f))return;Qd.debug(`Add ${f} placeholder for participant ${d.identity}.`);const p={participant:d,source:f};c.push(p)})}),c}else return r},[r,s,t])}function zqe(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function Wqe(t,e){const n=new Map;if(kle(t)){const r=t.filter(i=>i.withPlaceholder).map(i=>i.source);e.forEach(i=>{const s=i.getTrackPublications().map(o=>{var l;return(l=o.track)==null?void 0:l.source}).filter(o=>o!==void 0),a=Array.from(zqe(new Set(r),new Set(s)));a.length>0&&n.set(i.identity,a)})}return n}function Ple(t,e={}){const[n,r]=u.useState(dI(t)),[i,s]=u.useState(n==null?void 0:n.isMuted),[a,o]=u.useState(n==null?void 0:n.isSubscribed),[l,c]=u.useState(n==null?void 0:n.track),[d,f]=u.useState("landscape"),p=u.useRef(),{className:g,trackObserver:y}=u.useMemo(()=>Oqe(t),[t.participant.sid??t.participant.identity,t.source,Sle(t)&&t.publication.trackSid]);return u.useEffect(()=>{const v=y.subscribe(b=>{Qd.debug("update track",b),r(b),s(b==null?void 0:b.isMuted),o(b==null?void 0:b.isSubscribed),c(b==null?void 0:b.track)});return()=>v==null?void 0:v.unsubscribe()},[y]),u.useEffect(()=>{var v,b;return l&&(p.current&&l.detach(p.current),(v=e.element)!=null&&v.current&&!(t.participant.isLocal&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),p.current=(b=e.element)==null?void 0:b.current,()=>{p.current&&(l==null||l.detach(p.current))}},[l,e.element]),u.useEffect(()=>{var v,b;if(typeof((v=n==null?void 0:n.dimensions)==null?void 0:v.width)=="number"&&typeof((b=n==null?void 0:n.dimensions)==null?void 0:b.height)=="number"){const C=n.dimensions.width>n.dimensions.height?"landscape":"portrait";f(C)}},[n]),{publication:n,isMuted:i,isSubscribed:a,track:l,elementProps:qqe(e.props,{className:g,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n==null?void 0:n.source,...(n==null?void 0:n.kind)==="video"&&{"data-lk-orientation":d}})}}var Yqe="Expected a function",Dq=NaN,Jqe="[object Symbol]",Qqe=/^\s+|\s+$/g,Xqe=/^[-+]0x[0-9a-f]+$/i,eGe=/^0b[01]+$/i,tGe=/^0o[0-7]+$/i,nGe=parseInt,rGe=typeof a0=="object"&&a0&&a0.Object===Object&&a0,iGe=typeof self=="object"&&self&&self.Object===Object&&self,sGe=rGe||iGe||Function("return this")(),aGe=Object.prototype,oGe=aGe.toString,lGe=Math.max,cGe=Math.min,VS=function(){return sGe.Date.now()};function uGe(t,e,n){var r,i,s,a,o,l,c=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(Yqe);e=Uq(e)||0,hI(n)&&(d=!!n.leading,f="maxWait"in n,s=f?lGe(Uq(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p);function g(k){var x=r,L=i;return r=i=void 0,c=k,a=t.apply(L,x),a}function y(k){return c=k,o=setTimeout(C,e),d?g(k):a}function v(k){var x=k-l,L=k-c,N=e-x;return f?cGe(N,s-L):N}function b(k){var x=k-l,L=k-c;return l===void 0||x>=e||x<0||f&&L>=s}function C(){var k=VS();if(b(k))return S(k);o=setTimeout(C,v(k))}function S(k){return o=void 0,p&&r?g(k):(r=i=void 0,a)}function R(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function w(){return o===void 0?a:S(VS())}function I(){var k=VS(),x=b(k);if(r=arguments,i=this,l=k,x){if(o===void 0)return y(l);if(f)return o=setTimeout(C,e),g(l)}return o===void 0&&(o=setTimeout(C,e)),a}return I.cancel=R,I.flush=w,I}function hI(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function dGe(t){return!!t&&typeof t=="object"}function hGe(t){return typeof t=="symbol"||dGe(t)&&oGe.call(t)==Jqe}function Uq(t){if(typeof t=="number")return t;if(hGe(t))return Dq;if(hI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Qqe,"");var n=eGe.test(t);return n||tGe.test(t)?nGe(t.slice(2),n?2:8):Xqe.test(t)?Dq:+t}var fGe=uGe;const Fq=ele(fGe);function mGe(t){const e=u.useRef(t);e.current=t,u.useEffect(()=>()=>{e.current()},[])}function pGe(t,e=500,n){const r=u.useRef();mGe(()=>{r.current&&r.current.cancel()});const i=u.useMemo(()=>{const s=Fq(t,e,n),a=(...o)=>s(...o);return a.cancel=()=>{s.cancel()},a.isPending=()=>!!r.current,a.flush=()=>s.flush(),a},[t,e,n]);return u.useEffect(()=>{r.current=Fq(t,e,n)},[t,e,n]),i}function gGe(t,e,n){const r=(c,d)=>c===d,i=t instanceof Function?t():t,[s,a]=u.useState(i),o=u.useRef(i),l=pGe(a,e,n);return r(o.current,i)||(l(i),o.current=i),[s,l]}function vGe({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:s}={}){var a;const[o,l]=u.useState(null),[c,d]=u.useState(()=>({isIntersecting:i,entry:void 0})),f=u.useRef();f.current=s;const p=((a=c.entry)==null?void 0:a.isIntersecting)&&r;u.useEffect(()=>{if(!o||!("IntersectionObserver"in window)||p)return;const v=new IntersectionObserver(b=>{const C=Array.isArray(v.thresholds)?v.thresholds:[v.thresholds];b.forEach(S=>{const R=S.isIntersecting&&C.some(w=>S.intersectionRatio>=w);d({isIntersecting:R,entry:S}),f.current&&f.current(R,S)})},{threshold:t,root:e,rootMargin:n});return v.observe(o),()=>{v.disconnect()}},[o,JSON.stringify(t),e,n,p,r]);const g=u.useRef(null);u.useEffect(()=>{var v;!o&&(v=c.entry)!=null&&v.target&&!r&&!p&&g.current!==c.entry.target&&(g.current=c.entry.target,d({isIntersecting:i,entry:void 0}))},[o,c.entry,r,p,i]);const y=[l,!!c.isIntersecting,c.entry];return y.ref=y[0],y.isIntersecting=y[1],y.entry=y[2],y}const yGe=u.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:i,...s},a){const o=Rle(r),l=u.useRef(null);u.useImperativeHandle(a,()=>l.current);const c=vGe({root:l.current}),[d]=gGe(c,3e3);u.useEffect(()=>{i&&o.publication instanceof Q6&&(d==null?void 0:d.isIntersecting)===!1&&(c==null?void 0:c.isIntersecting)===!1&&o.publication.setSubscribed(!1)},[d,o,i]),u.useEffect(()=>{i&&o.publication instanceof Q6&&(c==null?void 0:c.isIntersecting)===!0&&o.publication.setSubscribed(!0)},[c,o,i]);const{elementProps:f,publication:p,isSubscribed:g}=Ple(o,{element:l,props:s});u.useEffect(()=>{n==null||n(!!g)},[g,n]);const y=v=>{e==null||e(v),t==null||t({participant:o==null?void 0:o.participant,track:p})};return u.createElement("video",{ref:l,...f,muted:!0,onClick:y})}),_Ge=u.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...r},i){const s=Rle(t),a=u.useRef(null);u.useImperativeHandle(i,()=>a.current);const{elementProps:o,isSubscribed:l,track:c,publication:d}=Ple(s,{element:a,props:r});return u.useEffect(()=>{e==null||e(!!l)},[l,e]),u.useEffect(()=>{c===void 0||n===void 0||(c instanceof gY?c.setVolume(n):Qd.warn("Volume can only be set on remote audio tracks."))},[n,c]),u.useEffect(()=>{d===void 0||r.muted===void 0||(d instanceof Q6?d.setEnabled(!r.muted):Qd.warn("Can only call setEnabled on remote track publications."))},[r.muted,d,c]),u.createElement("audio",{ref:a,...o})});function CGe(t,e){const[n,r]=u.useState(),i=u.useMemo(()=>new ns,[]);return u.useEffect(()=>{let s=!1,a=[];return i.lock().then(async o=>{try{(t.audio||t.video)&&(a=await Xg(t),s?a.forEach(l=>l.stop()):r(a))}catch(l){e&&l instanceof Error?e(l):Qd.error(l)}finally{o()}}),()=>{s=!0,a.forEach(o=>{o.stop()})}},[JSON.stringify(t,Gqe),e,i]),n}const bGe="_inRoom_1ttyq_15",EGe="_header_1ttyq_33",SGe="_filler_1ttyq_57",wGe="_footer_1ttyq_67",kGe="_hidden_1ttyq_105",TGe="_overlay_1ttyq_113",RGe="_logo_1ttyq_149",IGe="_buttons_1ttyq_167",xGe="_layout_1ttyq_181",MGe="_raiseHand_1ttyq_221",PGe="_invite_1ttyq_233",LGe="_switchCamera_1ttyq_235",OGe="_shareScreen_1ttyq_237",AGe="_fixedGrid_1ttyq_295",NGe="_scrollingGrid_1ttyq_307",DGe="_tile_1ttyq_345",UGe="_maximised_1ttyq_355",Jn={inRoom:bGe,header:EGe,filler:SGe,footer:wGe,hidden:kGe,overlay:TGe,logo:RGe,buttons:IGe,layout:xGe,raiseHand:MGe,invite:PGe,switchCamera:LGe,shareScreen:OGe,fixedGrid:AGe,scrollingGrid:NGe,tile:DGe,maximised:UGe},FGe="_content_1e8c7_15",jGe="_wait_1e8c7_37",HGe="_join_1e8c7_63",H3={content:FGe,wait:jGe,join:HGe};function jq(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function F0({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=u.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=u.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,d=u.useRef(!1);u.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,p,g]=u.useMemo(()=>{const C=()=>{if(!o.current.element)return;const{left:S,top:R,width:w,height:I,bottom:k,right:x,x:L,y:N}=o.current.element.getBoundingClientRect(),D={left:S,top:R,width:w,height:I,bottom:k,right:x,x:L,y:N};o.current.element instanceof HTMLElement&&r&&(D.height=o.current.element.offsetHeight,D.width=o.current.element.offsetWidth),Object.freeze(D),d.current&&!qGe(o.current.lastBounds,D)&&a(o.current.lastBounds=D)};return[C,c?jq(C,c):C,l?jq(C,l):C]},[a,r,l,c]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",g,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function v(){o.current.element&&(o.current.resizeObserver=new i(g),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(C=>C.addEventListener("scroll",g,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=C=>{!C||C===o.current.element||(y(),o.current.element=C,o.current.scrollContainers=Lle(C),v())};return VGe(g,!!e),$Ge(p),u.useEffect(()=>{y(),v()},[e,g,p]),u.useEffect(()=>y,[]),[b,s,f]}function $Ge(t){u.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function VGe(t,e){u.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Lle(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...Lle(t.parentElement)]}const BGe=["x","y","top","bottom","left","right","width","height"],qGe=(t,e)=>BGe.every(n=>t[n]===e[n]),GGe="_loading_xawve_15",KGe={loading:GGe},ZGe=({size:t,loading:e,...n})=>E.jsxs("div",{children:[e&&E.jsx("div",{className:KGe.loading,children:E.jsx(TTe,{size:t/3})}),E.jsx(rp,{size:t,...n})]}),zGe="_preview_w2rcp_15",WGe="_mirror_w2rcp_47",YGe="_cameraStarting_w2rcp_55",JGe="_avatarContainer_w2rcp_77",QGe="_buttonBar_w2rcp_101",$3={preview:zGe,mirror:WGe,cameraStarting:YGe,avatarContainer:JGe,buttonBar:QGe},XGe=({matrixInfo:t,muteStates:e,videoTrack:n,children:r})=>{const{t:i}=it(),[s,a]=F0(),o=u.useRef(null);u.useEffect(()=>(o.current&&(n==null||n.attach(o.current)),()=>{n==null||n.detach()}),[n]);const l=u.useMemo(()=>e.video.enabled&&!n,[e.video.enabled,n]);return E.jsxs("div",{className:De($3.preview),ref:s,children:[E.jsx("video",{className:n&&kx(n).facingMode==="user"?$3.mirror:void 0,ref:o,muted:!0,playsInline:!0,tabIndex:-1,disablePictureInPicture:!0}),(!e.video.enabled||l)&&E.jsx(E.Fragment,{children:E.jsxs("div",{className:$3.avatarContainer,children:[l&&E.jsx("div",{className:$3.cameraStarting,role:"status",children:i("video_tile.camera_starting")}),E.jsx(ZGe,{id:t.userId,name:t.displayName,size:Math.min(a.width,a.height)/2,src:t.avatarUrl,loading:l})]})}),E.jsx("div",{className:$3.buttonBar,children:r})]})},Ole=t=>{const{t:e}=it();return E.jsx(Bt,{kind:"secondary",size:"sm",Icon:LRe,...t,children:e("action.invite")})};function Xd(t){const e=u.useRef(void 0);return e.current??(e.current={value:t()}),e.current.value}let yh;/android/i.test(navigator.userAgent)?yh="android":/iPad|iPhone|iPod|Mac/.test(navigator.userAgent)&&"ontouchend"in document?yh="ios":yh="desktop";const eKe=()=>{const{userAgent:t}=navigator;return t.includes("Firefox")};function nu(t){const e=u.useRef(t);return e.current=t,e}function Ale(t){const e=u1(),n=nu(e.videoInput.select),r=Oh(s=>s.pipe(Ft(([a])=>a),Ft(a=>a===null?Ot(null):Rg(Nl(a,ke.Restarted).pipe(gn(null),Ne(()=>a)),Nl(a,ke.Muted).pipe(Ne(()=>null))))),[t]),i=Oh(s=>yh==="desktop"?Ot(null):s.pipe(Ft(([a])=>a),Ne(a=>{if(a===null)return null;const o=kx(a).facingMode;return o!=="user"&&o!=="environment"?null:()=>void a.restartTrack({facingMode:o==="user"?"environment":"user"}).then(()=>{const l=a.mediaStreamTrack.getSettings().deviceId;l!==void 0&&n.current(l)}).catch(l=>A.error("Failed to switch camera",o,l))})),[r]);return Qe(i)}const Nle=({client:t,matrixInfo:e,muteStates:n,onEnter:r,enterLabel:i,confineToRoom:s,hideHeader:a,participantCount:o,onShareClick:l,waitingForInvite:c})=>{u.useEffect(()=>(A.info("[Lifecycle] GroupCallView Component mounted"),()=>{A.info("[Lifecycle] GroupCallView Component unmounted")}),[]);const{t:d}=it();M4(e.roomName);const f=u.useCallback(()=>{var z,K;return(K=(z=n.audio).setEnabled)==null?void 0:K.call(z,q=>!q)},[n]),p=u.useCallback(()=>{var z,K;return(K=(z=n.video).setEnabled)==null?void 0:K.call(z,q=>!q)},[n]),[g,y]=u.useState(!1),[v,b]=u.useState(BL),C=u.useCallback(()=>y(!0),[y]),S=u.useCallback(()=>y(!1),[y]),R=Wl(),w=u.useCallback(()=>{var z;(z=R("/"))==null||z.catch(K=>{A.error("Failed to navigate to /",K)})},[R]),I=vy("(max-height: 500px)"),k=!s&&E.jsx($l,{className:H3.recents,to:"/",children:d("lobby.leave_button")}),x=u1(),L=Xd(()=>n.audio.enabled&&{deviceId:x.audioInput.selectedId}),{processor:N}=l_(),D=Xd(()=>N),U=u.useMemo(()=>({audio:Object.assign({},L),video:n.video.enabled&&{deviceId:x.videoInput.selectedId,processor:D}}),[L,n.video.enabled,x.videoInput.selectedId,D]),j=u.useCallback(z=>{var K,q,G,J;A.error("Error while creating preview Tracks:",z),(q=(K=n.audio).setEnabled)==null||q.call(K,!1),(J=(G=n.video).setEnabled)==null||J.call(G,!1)},[n.audio,n.video]),$=CGe(U,j),Z=u.useMemo(()=>($==null?void 0:$.find(z=>z.kind===ue.Kind.Video))??null,[$]);$oe(Z);const V=Ale(Oh(z=>z.pipe(Ne(([K])=>K)),[Z]));return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:De(H3.room,Jn.inRoom),children:[!a&&E.jsxs(l1,{children:[E.jsx(Zh,{children:E.jsx(Yne,{id:e.roomId,name:e.roomName,avatarUrl:e.roomAvatar,encrypted:e.e2eeSystem.kind!==Wt.NONE,participantCount:o})}),E.jsx(zh,{children:l!==null&&E.jsx(Ole,{onClick:l})})]}),E.jsxs("div",{className:H3.content,children:[E.jsx(XGe,{matrixInfo:e,muteStates:n,videoTrack:Z,children:E.jsx(Bt,{className:De(H3.join,{[H3.wait]:c}),size:c?"sm":"lg",onClick:()=>{c||r()},"data-testid":"lobby_joinCall",children:i??d("lobby.join_button")})}),!I&&k]}),E.jsxs("div",{className:Jn.footer,children:[I&&k,E.jsxs("div",{className:Jn.buttons,children:[E.jsx(lse,{muted:!n.audio.enabled,onClick:f,disabled:n.audio.setEnabled===null}),E.jsx(cse,{muted:!n.video.enabled,onClick:p,disabled:n.video.setEnabled===null}),V&&E.jsx(use,{onClick:V}),E.jsx(hse,{onClick:C}),!s&&E.jsx(dse,{onClick:w})]})]})]}),t&&E.jsx(qL,{client:t,open:g,onDismiss:S,tab:v,onTabChange:b})]})},tKe="_headline_zl5gi_15",nKe="_callEndedContent_zl5gi_29",rKe="_callEndedButton_zl5gi_69",iKe="_submitButton_zl5gi_79",sKe="_container_zl5gi_93",aKe="_main_zl5gi_109",oKe="_footer_zl5gi_143",Yu={headline:tKe,callEndedContent:nKe,callEndedButton:rKe,submitButton:iKe,container:sKe,main:aKe,footer:oKe},lKe="_feedback_1m7vw_15",cKe={feedback:lKe},uKe="_starIcon_3kes2_15",dKe="_starRating_3kes2_23",hKe="_inputContainer_3kes2_35",fKe="_hideElement_3kes2_43",V3={starIcon:uKe,starRating:dKe,inputContainer:hKe,hideElement:fKe},mKe=(t,e)=>u.createElement("svg",{width:28,height:26,viewBox:"0 0 28 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{d:"M14 21.0267L22.24 26.0001L20.0533 16.6267L27.3333 10.3201L17.7466 9.50675L14 0.666748L10.2533 9.50675L0.666626 10.3201L7.94663 16.6267L5.75996 26.0001L14 21.0267Z",fill:"white"})),pKe=u.forwardRef(mKe),gKe=(t,e)=>u.createElement("svg",{width:28,height:26,viewBox:"0 0 28 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("path",{id:"Vector",d:"M14 7.50675L15.2933 10.5601L15.92 12.0401L17.52 12.1734L20.8133 12.4534L18.3066 14.6267L17.0933 15.6801L17.4533 17.2534L18.2 20.4667L15.3733 18.7601L14 17.9067L12.6266 18.7334L9.79996 20.4401L10.5466 17.2267L10.9066 15.6534L9.69329 14.6001L7.18663 12.4267L10.48 12.1467L12.08 12.0134L12.7066 10.5334L14 7.50675M14 0.666748L10.2533 9.50675L0.666626 10.3201L7.94663 16.6267L5.75996 26.0001L14 21.0267L22.24 26.0001L20.0533 16.6267L27.3333 10.3201L17.7466 9.50675L14 0.666748Z",fill:"white"})),vKe=u.forwardRef(gKe);function yKe({starCount:t,onChange:e,required:n}){const[r,i]=u.useState(0),[s,a]=u.useState(0),{t:o}=it();return E.jsx("div",{className:V3.starRating,children:[...Array(t)].map((l,c)=>(c+=1,E.jsxs("div",{className:V3.inputContainer,onMouseEnter:()=>a(c),onMouseLeave:()=>a(r),children:[E.jsx("input",{className:V3.hideElement,type:"radio",id:"starInput"+String(c),value:String(c)+"Star",name:"star rating",onChange:d=>{i(c),e(c)},required:!0}),E.jsx("label",{className:V3.hideElement,id:"starInvisibleLabel"+String(c),htmlFor:"starInput"+String(c),children:o("star_rating_input_label",{count:c})}),E.jsx("label",{className:V3.starIcon,id:"starIcon"+String(c),htmlFor:"starInput"+String(c),children:c<=(s||r)?E.jsx(pKe,{}):E.jsx(vKe,{})})]},c)))})}const _Ke=({client:t,isPasswordlessUser:e,confineToRoom:n,endedCallId:r})=>{const{t:i}=it(),s=Wl(),{displayName:a}=E4(t),[o,l]=u.useState(!1),[c,d]=u.useState(0),[f,p]=u.useState(!1),[g,y]=u.useState(!1),v=u.useCallback(S=>{S.preventDefault();const w=new FormData(S.target).get("feedbackText");It.instance.eventQualitySurvey.track(r,w,c),p(!0),setTimeout(()=>{y(!0),setTimeout(()=>{var I;e?l(!0):n||(I=s("/"))==null||I.catch(k=>{A.error("Failed to navigate to /",k)})},1e3)},1e3)},[r,s,e,n,c]),b=e&&E.jsxs("div",{className:Yu.callEndedContent,children:[E.jsxs(ca,{i18nKey:"call_ended_view.create_account_prompt",children:[E.jsx("p",{children:"Why not finish by setting up a password to keep your account?"}),E.jsx("p",{children:"You'll be able to keep your name and set an avatar for use on future calls"})]}),E.jsx(IP,{className:Yu.callEndedButton,to:"/register",children:i("call_ended_view.create_account_button")})]}),C=E.jsxs("div",{className:Yu.callEndedContent,children:[E.jsx(ca,{i18nKey:"call_ended_view.feedback_prompt",children:E.jsx("p",{children:"We'd love to hear your feedback so we can improve your experience."})}),E.jsxs("form",{onSubmit:v,children:[E.jsx(en,{children:E.jsx(yKe,{starCount:5,onChange:d,required:!0})}),E.jsx(en,{children:E.jsx(hi,{className:cKe.feedback,id:"feedbackText",name:"feedbackText",label:i("settings.feedback_tab_description_label"),placeholder:i("settings.feedback_tab_description_label"),type:"textarea"})})," ",E.jsx(en,{children:g?E.jsx(ca,{i18nKey:"call_ended_view.feedback_done",children:E.jsx("p",{children:"Thanks for your feedback!"})}):E.jsx(Bt,{type:"submit",className:Yu.submitButton,"data-testid":"home_go",children:i(f?"submitting":"action.submit")})})]})]});return E.jsxs(E.Fragment,{children:[E.jsxs(l1,{children:[E.jsx(Zh,{children:!n&&E.jsx(Mh,{})}),E.jsx(zh,{})]}),E.jsxs("div",{className:Yu.container,children:[E.jsxs("main",{className:Yu.main,children:[E.jsx(o1,{size:"xl",weight:"semibold",className:Yu.headline,children:o?i("call_ended_view.headline",{displayName:a}):i("call_ended_view.headline",{displayName:a})+`
`+i("call_ended_view.survey_prompt")}),(!o||n)&&It.instance.isEnabled()?C:b]}),!n&&E.jsx(_n,{className:Yu.footer,children:E.jsxs($l,{to:"/",children:[" ",i("call_ended_view.not_now_button")," "]})})]})]})};function Hq(t,e,n){const r=n.find(i=>i.kind===e&&i.label===t);return r==null?void 0:r.deviceId}const CKe=(t,e)=>u.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("g",{id:"Logo Mark"},u.createElement("rect",{width:47.86,height:48,rx:23.93,fill:"#0DBD8B"}),u.createElement("g",{id:"Union"},u.createElement("path",{d:"M21.3075 9.42871C20.3396 9.42871 19.5549 10.214 19.5549 11.1828C19.5549 12.1516 20.3396 12.9369 21.3075 12.9369C25.9321 12.9369 29.6811 16.689 29.6811 21.3175C29.6811 22.2863 30.4657 23.0716 31.4337 23.0716C32.4016 23.0716 33.1863 22.2863 33.1863 21.3175C33.1863 14.7515 27.868 9.42871 21.3075 9.42871Z",fill:"white"}),u.createElement("path",{d:"M38.4591 21.3174C38.4591 20.3486 37.6745 19.5633 36.7065 19.5633C35.7386 19.5633 34.9539 20.3486 34.9539 21.3174C34.9539 25.9459 31.2049 29.698 26.5804 29.698C25.6124 29.698 24.8277 30.4833 24.8277 31.4521C24.8277 32.4209 25.6124 33.2062 26.5804 33.2062C33.1408 33.2062 38.4591 27.8834 38.4591 21.3174Z",fill:"white"}),u.createElement("path",{d:"M28.3329 36.8173C28.3329 37.786 27.5482 38.5714 26.5803 38.5714C20.0198 38.5714 14.7015 33.2486 14.7015 26.6826C14.7015 25.7138 15.4862 24.9285 16.4541 24.9285C17.4221 24.9285 18.2067 25.7138 18.2067 26.6826C18.2067 31.3111 21.9557 35.0632 26.5803 35.0632C27.5482 35.0632 28.3329 35.8485 28.3329 36.8173Z",fill:"white"}),u.createElement("path",{d:"M9.40112 26.6827C9.40112 27.6514 10.1858 28.4368 11.1537 28.4368C12.1217 28.4368 12.9064 27.6514 12.9064 26.6827C12.9064 22.0542 16.6553 18.3021 21.2799 18.3021C22.2478 18.3021 23.0325 17.5167 23.0325 16.548C23.0325 15.5792 22.2478 14.7939 21.2799 14.7939C14.7194 14.7939 9.40112 20.1167 9.40112 26.6827Z",fill:"white"})))),bKe=u.forwardRef(CKe),EKe=(t,e)=>u.createElement("svg",{width:160,height:22,viewBox:"0 0 160 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},u.createElement("g",{id:"Logo Type"},u.createElement("g",{id:"Vector"},u.createElement("path",{d:"M14.8673 15.1575H3.39742C3.53293 16.3508 3.96849 17.3036 4.70411 18.0157C5.43974 18.7087 6.40766 19.0551 7.60789 19.0551C8.40159 19.0551 9.11785 18.8626 9.75668 18.4777C10.3955 18.0927 10.8504 17.5731 11.1215 16.9186H14.606C14.1414 18.4392 13.2702 19.671 11.9926 20.6142C10.7343 21.5381 9.24368 22 7.52078 22C5.27519 22 3.45549 21.259 2.06168 19.7769C0.687227 18.2948 0 16.4182 0 14.147C0 11.9335 0.696906 10.0761 2.09072 8.5748C3.48453 7.07349 5.28487 6.32283 7.49174 6.32283C9.69861 6.32283 11.4796 7.06387 12.8347 8.54593C14.2091 10.0087 14.8964 11.8565 14.8964 14.0892L14.8673 15.1575ZM7.49174 9.12336C6.40766 9.12336 5.50749 9.44095 4.79123 10.0761C4.07496 10.7113 3.62972 11.5582 3.45549 12.6168H11.4699C11.315 11.5582 10.8892 10.7113 10.1922 10.0761C9.49534 9.44095 8.59517 9.12336 7.49174 9.12336Z",fill:"currentColor"}),u.createElement("path",{d:"M17.2743 17.1785V0H20.7298V17.2362C20.7298 18.0061 21.1557 18.3911 22.0074 18.3911L22.6172 18.3622V21.6247C22.2881 21.6824 21.9397 21.7113 21.5719 21.7113C20.0813 21.7113 18.9875 21.336 18.2906 20.5853C17.6131 19.8346 17.2743 18.699 17.2743 17.1785Z",fill:"currentColor"}),u.createElement("path",{d:"M38.71 15.1575H27.2401C27.3756 16.3508 27.8112 17.3036 28.5468 18.0157C29.2824 18.7087 30.2504 19.0551 31.4506 19.0551C32.2443 19.0551 32.9606 18.8626 33.5994 18.4777C34.2382 18.0927 34.6931 17.5731 34.9642 16.9186H38.4487C37.9841 18.4392 37.113 19.671 35.8353 20.6142C34.577 21.5381 33.0864 22 31.3635 22C29.1179 22 27.2982 21.259 25.9044 19.7769C24.5299 18.2948 23.8427 16.4182 23.8427 14.147C23.8427 11.9335 24.5396 10.0761 25.9334 8.5748C27.3272 7.07349 29.1276 6.32283 31.3344 6.32283C33.5413 6.32283 35.3223 7.06387 36.6774 8.54593C38.0518 10.0087 38.7391 11.8565 38.7391 14.0892L38.71 15.1575ZM31.3344 9.12336C30.2504 9.12336 29.3502 9.44095 28.6339 10.0761C27.9177 10.7113 27.4724 11.5582 27.2982 12.6168H35.3126C35.1577 11.5582 34.7319 10.7113 34.035 10.0761C33.3381 9.44095 32.4379 9.12336 31.3344 9.12336Z",fill:"currentColor"}),u.createElement("path",{d:"M54.3001 13.0499V21.6535H50.8446V12.6745C50.8446 10.4033 49.8961 9.26772 47.9989 9.26772C46.9729 9.26772 46.1502 9.59493 45.5307 10.2493C44.9306 10.9038 44.6306 11.7988 44.6306 12.9344V21.6535H41.1751V6.66929H44.3692V8.66142C44.737 7.98775 45.2984 7.42957 46.0534 6.98688C46.8084 6.54418 47.7473 6.32283 48.8701 6.32283C50.9608 6.32283 52.4707 7.11199 53.4 8.69029C54.6776 7.11199 56.3812 6.32283 58.5106 6.32283C60.2722 6.32283 61.6273 6.87139 62.5759 7.9685C63.5244 9.04637 63.9987 10.4707 63.9987 12.2415V21.6535H60.5432V12.6745C60.5432 10.4033 59.5947 9.26772 57.6975 9.26772C56.6522 9.26772 55.8198 9.60455 55.2003 10.2782C54.6002 10.9326 54.3001 11.8565 54.3001 13.0499Z",fill:"currentColor"}),u.createElement("path",{d:"M81.1834 15.1575H69.7135C69.849 16.3508 70.2846 17.3036 71.0202 18.0157C71.7558 18.7087 72.7237 19.0551 73.924 19.0551C74.7177 19.0551 75.4339 18.8626 76.0728 18.4777C76.7116 18.0927 77.1665 17.5731 77.4375 16.9186H80.9221C80.4575 18.4392 79.5863 19.671 78.3087 20.6142C77.0504 21.5381 75.5598 22 73.8369 22C71.5913 22 69.7716 21.259 68.3778 19.7769C67.0033 18.2948 66.3161 16.4182 66.3161 14.147C66.3161 11.9335 67.013 10.0761 68.4068 8.5748C69.8006 7.07349 71.601 6.32283 73.8078 6.32283C76.0147 6.32283 77.7957 7.06387 79.1508 8.54593C80.5252 10.0087 81.2124 11.8565 81.2124 14.0892L81.1834 15.1575ZM73.8078 9.12336C72.7237 9.12336 71.8236 9.44095 71.1073 10.0761C70.391 10.7113 69.9458 11.5582 69.7716 12.6168H77.786C77.6311 11.5582 77.2052 10.7113 76.5083 10.0761C75.8114 9.44095 74.9113 9.12336 73.8078 9.12336Z",fill:"currentColor"}),u.createElement("path",{d:"M86.8426 6.66929V8.66142C87.191 8.007 87.7621 7.45844 88.5558 7.01575C89.3689 6.55381 90.3465 6.32283 91.4886 6.32283C93.2696 6.32283 94.6441 6.86177 95.612 7.93963C96.5993 9.0175 97.0929 10.4514 97.0929 12.2415V21.6535H93.6374V12.6745C93.6374 11.6159 93.3858 10.7883 92.8824 10.1916C92.3985 9.57568 91.6532 9.26772 90.6465 9.26772C89.5431 9.26772 88.672 9.59493 88.0331 10.2493C87.4137 10.9038 87.1039 11.8084 87.1039 12.9633V21.6535H83.6484V6.66929H86.8426Z",fill:"currentColor"}),u.createElement("path",{d:"M107.185 18.5932V21.5669C106.759 21.6824 106.159 21.7402 105.384 21.7402C102.442 21.7402 100.971 20.2677 100.971 17.3228V9.41208H98.6766V6.66929H100.971V2.77165H104.426V6.66929H107.243V9.41208H104.426V16.9764C104.426 18.1505 104.987 18.7375 106.11 18.7375L107.185 18.5932Z",fill:"currentColor"}),u.createElement("path",{d:"M116.115 18.9881C114.474 17.2035 113.653 14.9429 113.653 12.2064C113.653 9.4699 114.474 7.21782 116.115 5.45015C117.773 3.66548 119.953 2.77314 122.654 2.77314C124.876 2.77314 126.756 3.38503 128.295 4.6088C129.833 5.83258 130.816 7.47277 131.244 9.52939H129.269C128.91 7.99967 128.132 6.7844 126.936 5.88357C125.739 4.98273 124.312 4.53232 122.654 4.53232C120.534 4.53232 118.824 5.23769 117.525 6.64842C116.243 8.05916 115.602 9.91182 115.602 12.2064C115.602 14.501 116.243 16.3536 117.525 17.7644C118.824 19.1751 120.534 19.8805 122.654 19.8805C124.312 19.8805 125.739 19.4301 126.936 18.5292C128.132 17.6284 128.91 16.4131 129.269 14.8834H131.244C130.816 16.94 129.833 18.5802 128.295 19.804C126.756 21.0278 124.876 21.6397 122.654 21.6397C119.953 21.6397 117.773 20.7558 116.115 18.9881Z",fill:"currentColor"}),u.createElement("path",{d:"M143.174 15.0874C140.832 15.0874 139.233 15.1384 138.379 15.2403C137.541 15.3253 136.926 15.4698 136.532 15.6738C135.831 16.0647 135.481 16.6936 135.481 17.5604C135.481 19.2261 136.473 20.0589 138.456 20.0589C139.977 20.0589 141.139 19.719 141.943 19.0391C142.763 18.3593 143.174 17.4499 143.174 16.3111V15.0874ZM138.25 21.5632C136.763 21.5632 135.626 21.2062 134.84 20.4924C134.071 19.7615 133.686 18.8012 133.686 17.6114C133.686 16.8295 133.891 16.1327 134.301 15.5208C134.729 14.9089 135.31 14.4585 136.045 14.1695C136.661 13.9316 137.455 13.7786 138.43 13.7106C139.404 13.6256 140.986 13.5831 143.174 13.5831V12.7418C143.174 10.6002 141.943 9.52939 139.481 9.52939C137.361 9.52939 136.131 10.3877 135.789 12.1044H134.019C134.207 10.8466 134.746 9.84383 135.635 9.09597C136.541 8.34811 137.849 7.97418 139.558 7.97418C141.387 7.97418 142.746 8.3991 143.635 9.24894C144.541 10.0988 144.994 11.2716 144.994 12.7673V21.2572H143.251V19.3706C142.345 20.8323 140.678 21.5632 138.25 21.5632Z",fill:"currentColor"}),u.createElement("path",{d:"M149.358 18.4018V2.13576H151.178V18.1978C151.178 18.7247 151.264 19.0901 151.435 19.2941C151.623 19.498 151.956 19.6 152.435 19.6L152.948 19.549V21.2062C152.657 21.2572 152.341 21.2827 151.999 21.2827C150.238 21.2827 149.358 20.3224 149.358 18.4018Z",fill:"currentColor"}),u.createElement("path",{d:"M155.944 18.4018V2.13576H157.764V18.1978C157.764 18.7247 157.85 19.0901 158.021 19.2941C158.209 19.498 158.542 19.6 159.021 19.6L159.534 19.549V21.2062C159.243 21.2572 158.927 21.2827 158.585 21.2827C156.824 21.2827 155.944 20.3224 155.944 18.4018Z",fill:"currentColor"})))),SKe=u.forwardRef(EKe),$q=t=>{const e=document.activeElement;return e!==null&&e.contains(t)},Vq=Object.fromEntries(kg.slice(0,PR).map((t,e)=>[(e+1).toString(),t]));function wKe(t,e,n,r,i,s){const a=u.useRef(!1);T0(window,"keydown",u.useCallback(o=>{t.current!==null&&$q(t.current)&&(o.altKey||o.ctrlKey||o.metaKey||o.shiftKey||(o.key==="m"?(o.preventDefault(),e()):o.key=="v"?(o.preventDefault(),n()):o.key===" "?(o.preventDefault(),a.current||(a.current=!0,r(!1))):o.key==="h"?(o.preventDefault(),s()):Vq[o.key]&&(o.preventDefault(),i(Vq[o.key]))))},[t,n,e,r,i,s]),u.useMemo(()=>({capture:!0}),[])),T0(window,"keyup",u.useCallback(o=>{t.current!==null&&$q(t.current)&&o.key===" "&&(a.current=!1,r(!0))},[t,r])),T0(window,"blur",u.useCallback(()=>{a.current&&(a.current=!1,r(!0))},[r,a]))}const kKe="_tile_3kbln_15",TKe="_speaking_3kbln_53",RKe="_handRaised_3kbln_93",IKe="_muteIcon_3kbln_147",xKe="_volumeSlider_3kbln_163",o0={tile:kKe,speaking:TKe,handRaised:RKe,muteIcon:IKe,volumeSlider:xKe};class Dle{constructor(){this.ended$=new li,this.bindImpl=$Ue(this.ended$),this.stateImpl=e=>e.pipe(this.bind(),Pl(),UUe({bufferSize:1,refCount:!1}))}bind(){return this.bindImpl}state(){return this.stateImpl}end(){this.ended$.next(),this.ended$.complete()}}class f_{constructor(){this.scope=new Dle}destroy(){this.scope.end()}}const Bq=Symbol("nothing");function MKe(t){return e=>gUe(()=>{let n=Bq;return e.pipe(VUe(r=>n=r),NUe(()=>{n!==Bq&&t(n)}))})}function fI(t,e){return n=>n.pipe(_c(e,t),gn(t))}function Ng(t,e){return t.pipe(Ft(n=>n?OP(n).pipe(Ne(()=>({participant:n,publication:n.getTrackPublication(e),source:e})),AUe("publication")):Ot(void 0)))}function Ule(t,e,n){return Bn([Ng(Ot(t),e),LR(1e3).pipe(gn(0))]).pipe(Ft(async([r])=>{var a;const i=(a=r==null?void 0:r.publication)==null?void 0:a.track;if(!i||!(i instanceof wx||i instanceof j9))return;const s=await i.getRTCStatsReport();if(s){for(const o of s.values())if(o.type===n)return o}}),gn(void 0))}function mI(t,e){return Ule(t,e,"inbound-rtp").pipe(Ne(n=>n))}function qq(t,e){return Ule(t,e,"outbound-rtp").pipe(Ne(n=>n))}function n7(t,e){let n={framesDecoded:void 0,framesReceived:void 0};return mI(t,e).pipe(Ne(r=>{if(!r)return;const{framesDecoded:i,framesDropped:s,framesReceived:a}=r;return{framesDecoded:i,framesDropped:s,framesReceived:a}}),Bo(r=>!!r),Ne(r=>{const i=n;if(n=r,typeof r.framesReceived=="number"&&typeof i.framesReceived=="number"&&typeof r.framesDecoded=="number"&&typeof i.framesDecoded=="number"){const s=r.framesReceived-i.framesReceived,a=r.framesDecoded-i.framesDecoded;if(s>0)return a>0}}),Bo(r=>typeof r=="boolean"),gn(void 0))}function BS(t,e,n,r){return Kje(t,le.EncryptionError).pipe(Ne(i=>{const[s]=i;return n.kind===Wt.PER_PARTICIPANT?((s==null?void 0:s.message.includes(e.identity))&&(s==null?void 0:s.message.includes(r)))??!1:n.kind===Wt.SHARED_KEY?!!(s!=null&&s.message.includes(r)):!1}),BUe(1e3),gn(!1))}class Fle extends f_{constructor(e,n,r,i,s,a,o,l){super(),this.id=e,this.member=n,this.participant$=r,this.displayname$=l;const c=Ng(r,s).pipe(this.scope.state());this.video$=Ng(r,a).pipe(this.scope.state()),this.unencryptedWarning$=Bn([c,this.video$],(d,f)=>{var p,g;return i.kind!==Wt.NONE&&(((p=d==null?void 0:d.publication)==null?void 0:p.isEncrypted)===!1||((g=f==null?void 0:f.publication)==null?void 0:g.isEncrypted)===!1)}).pipe(this.scope.state()),this.encryptionStatus$=this.participant$.pipe(Ft(d=>d?d.isLocal||i.kind===Wt.NONE?Ot(1):i.kind===Wt.PER_PARTICIPANT?Bn([BS(o,d,i,"MissingKey"),BS(o,d,i,"InvalidKey"),n7(d,s),n7(d,a)]).pipe(Ne(([f,p,g,y])=>{if(f)return 2;if(p)return 3;if(g||y)return 1}),Bo(f=>!!f),gn(0)):Bn([BS(o,d,i,"InvalidKey"),n7(d,s),n7(d,a)]).pipe(Ne(([f,p,g])=>{if(f)return 4;if(p||g)return 1}),Bo(f=>!!f),gn(0)):Ot(0)),this.scope.state())}}class jle extends Fle{constructor(e,n,r,i,s,a,o,l){super(e,n,r,i,ue.Source.Microphone,ue.Source.Camera,s,a),this.handRaised$=o,this.reaction$=l,this.speaking$=this.participant$.pipe(Ft(d=>d?LP(d,se.IsSpeakingChanged).pipe(Ne(f=>f.isSpeaking)):Ot(!1)),this.scope.state()),this._cropVideo$=new qi(!0),this.cropVideo$=this._cropVideo$;const c=r.pipe(Ft(d=>(d&&OP(d))??Ot(void 0)),this.scope.state());this.audioEnabled$=c.pipe(Ne(d=>{var f;return((f=d==null?void 0:d.microphoneTrack)==null?void 0:f.isMuted)===!1})),this.videoEnabled$=c.pipe(Ne(d=>{var f;return((f=d==null?void 0:d.cameraTrack)==null?void 0:f.isMuted)===!1}))}toggleFitContain(){this._cropVideo$.next(!this._cropVideo$.value)}get local(){return this instanceof Om}}class Om extends jle{constructor(e,n,r,i,s,a,o,l){super(e,n,r,i,s,a,o,l),this.mirror$=this.video$.pipe(Ft(c=>{var f;const d=(f=c==null?void 0:c.publication)==null?void 0:f.track;return d instanceof j9?Nl(d,ke.Restarted).pipe(gn(null),Ne(()=>kx(d).facingMode==="user")):Ot(!1)}),this.scope.state()),this.alwaysShow$=eB.value$,this.setAlwaysShow=eB.setValue,this.audioStreamStats$=Bn([this.participant$,V5.value$]).pipe(Ft(([c,d])=>!c||!d?Ot(void 0):qq(c,ue.Source.Microphone))),this.videoStreamStats$=Bn([this.participant$,V5.value$]).pipe(Ft(([c,d])=>!c||!d?Ot(void 0):qq(c,ue.Source.Camera)))}}class PKe extends jle{constructor(e,n,r,i,s,a,o,l){super(e,n,r,i,s,a,o,l),this.locallyMutedToggle$=new li,this.localVolumeAdjustment$=new li,this.localVolumeCommit$=new li,this.localVolume$=Rg(this.locallyMutedToggle$.pipe(Ne(()=>"toggle mute")),this.localVolumeAdjustment$,this.localVolumeCommit$.pipe(Ne(()=>"commit"))).pipe(fI({volume:1,committedVolume:1},(c,d)=>{switch(d){case"toggle mute":return{...c,volume:c.volume===0?c.committedVolume:0};case"commit":return{...c,committedVolume:c.volume===0?c.committedVolume:c.volume};default:return{...c,volume:d}}}),Ne(({volume:c})=>c),this.scope.state()),this.locallyMuted$=this.localVolume$.pipe(Ne(c=>c===0),this.scope.state()),this.audioStreamStats$=Bn([this.participant$,V5.value$]).pipe(Ft(([c,d])=>!c||!d?Ot(void 0):mI(c,ue.Source.Microphone))),this.videoStreamStats$=Bn([this.participant$,V5.value$]).pipe(Ft(([c,d])=>!c||!d?Ot(void 0):mI(c,ue.Source.Camera))),Bn([r,this.localVolume$.pipe(this.scope.bind())]).subscribe(([c,d])=>c&&c.setVolume(d))}toggleLocallyMuted(){this.locallyMutedToggle$.next()}setLocalVolume(e){this.localVolumeAdjustment$.next(e)}commitLocalVolume(){this.localVolumeCommit$.next()}}class v2 extends Fle{constructor(e,n,r,i,s,a,o){super(e,n,r,i,ue.Source.ScreenShareAudio,ue.Source.ScreenShare,s,a),this.local=o}}var QL=N4(),yt=t=>A4(t,QL),XL=N4();yt.write=t=>A4(t,XL);var m_=N4();yt.onStart=t=>A4(t,m_);var eO=N4();yt.onFrame=t=>A4(t,eO);var tO=N4();yt.onFinish=t=>A4(t,tO);var J2=[];yt.setTimeout=(t,e)=>{const n=yt.now()+e,r=()=>{const s=J2.findIndex(a=>a.cancel==r);~s&&J2.splice(s,1),Ed-=~s?1:0},i={time:n,handler:t,cancel:r};return J2.splice(Hle(n),0,i),Ed+=1,$le(),i};var Hle=t=>~(~J2.findIndex(e=>e.time>t)||~J2.length);yt.cancel=t=>{m_.delete(t),eO.delete(t),tO.delete(t),QL.delete(t),XL.delete(t)};yt.sync=t=>{pI=!0,yt.batchedUpdates(t),pI=!1};yt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,yt.onStart(n)}return r.handler=t,r.cancel=()=>{m_.delete(n),e=null},r};var nO=typeof window<"u"?window.requestAnimationFrame:()=>{};yt.use=t=>nO=t;yt.now=typeof performance<"u"?()=>performance.now():Date.now;yt.batchedUpdates=t=>t();yt.catch=console.error;yt.frameLoop="always";yt.advance=()=>{yt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ble()};var bd=-1,Ed=0,pI=!1;function A4(t,e){pI?(e.delete(t),t(0)):(e.add(t),$le())}function $le(){bd<0&&(bd=0,yt.frameLoop!=="demand"&&nO(Vle))}function LKe(){bd=-1}function Vle(){~bd&&(nO(Vle),yt.batchedUpdates(Ble))}function Ble(){const t=bd;bd=yt.now();const e=Hle(bd);if(e&&(qle(J2.splice(0,e),n=>n.handler()),Ed-=e),!Ed){LKe();return}m_.flush(),QL.flush(t?Math.min(64,bd-t):16.667),eO.flush(),XL.flush(),tO.flush()}function N4(){let t=new Set,e=t;return{add(n){Ed+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ed-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ed-=e.size,qle(e,r=>r(n)&&t.add(r)),Ed+=t.size,e=t)}}}function qle(t,e){t.forEach(n=>{try{e(n)}catch(r){yt.catch(r)}})}var OKe=Object.defineProperty,AKe=(t,e)=>{for(var n in e)OKe(t,n,{get:e[n],enumerable:!0})},Ko={};AKe(Ko,{assign:()=>DKe,colors:()=>Ad,createStringInterpolator:()=>iO,skipAnimation:()=>Kle,to:()=>Gle,willAdvance:()=>sO});function gI(){}var NKe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),_e={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Rc(t,e){if(_e.arr(t)){if(!_e.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var St=(t,e)=>t.forEach(e);function Bl(t,e,n){if(_e.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var rs=t=>_e.und(t)?[]:_e.arr(t)?t:[t];function j0(t,e){if(t.size){const n=Array.from(t);t.clear(),St(n,e)}}var l0=(t,...e)=>j0(t,n=>n(...e)),rO=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),iO,Gle,Ad=null,Kle=!1,sO=gI,DKe=t=>{t.to&&(Gle=t.to),t.now&&(yt.now=t.now),t.colors!==void 0&&(Ad=t.colors),t.skipAnimation!=null&&(Kle=t.skipAnimation),t.createStringInterpolator&&(iO=t.createStringInterpolator),t.requestAnimationFrame&&yt.use(t.requestAnimationFrame),t.batchedUpdates&&(yt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(sO=t.willAdvance),t.frameLoop&&(yt.frameLoop=t.frameLoop)},H0=new Set,Ua=[],qS=[],i9=0,p_={get idle(){return!H0.size&&!Ua.length},start(t){i9>t.priority?(H0.add(t),yt.onStart(UKe)):(Zle(t),yt(vI))},advance:vI,sort(t){if(i9)yt.onFrame(()=>p_.sort(t));else{const e=Ua.indexOf(t);~e&&(Ua.splice(e,1),zle(t))}},clear(){Ua=[],H0.clear()}};function UKe(){H0.forEach(Zle),H0.clear(),yt(vI)}function Zle(t){Ua.includes(t)||zle(t)}function zle(t){Ua.splice(FKe(Ua,e=>e.priority>t.priority),0,t)}function vI(t){const e=qS;for(let n=0;n<Ua.length;n++){const r=Ua[n];i9=r.priority,r.idle||(sO(r),r.advance(t),r.idle||e.push(r))}return i9=0,qS=Ua,qS.length=0,Ua=e,Ua.length>0}function FKe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var jKe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ho="[-+]?\\d*\\.?\\d+",s9=Ho+"%";function g_(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var HKe=new RegExp("rgb"+g_(Ho,Ho,Ho)),$Ke=new RegExp("rgba"+g_(Ho,Ho,Ho,Ho)),VKe=new RegExp("hsl"+g_(Ho,s9,s9)),BKe=new RegExp("hsla"+g_(Ho,s9,s9,Ho)),qKe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,GKe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,KKe=/^#([0-9a-fA-F]{6})$/,ZKe=/^#([0-9a-fA-F]{8})$/;function zKe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=KKe.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ad&&Ad[t]!==void 0?Ad[t]:(e=HKe.exec(t))?(Gf(e[1])<<24|Gf(e[2])<<16|Gf(e[3])<<8|255)>>>0:(e=$Ke.exec(t))?(Gf(e[1])<<24|Gf(e[2])<<16|Gf(e[3])<<8|Zq(e[4]))>>>0:(e=qKe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=ZKe.exec(t))?parseInt(e[1],16)>>>0:(e=GKe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=VKe.exec(t))?(Gq(Kq(e[1]),r7(e[2]),r7(e[3]))|255)>>>0:(e=BKe.exec(t))?(Gq(Kq(e[1]),r7(e[2]),r7(e[3]))|Zq(e[4]))>>>0:null}function GS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Gq(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=GS(i,r,t+1/3),a=GS(i,r,t),o=GS(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function Gf(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Kq(t){return(parseFloat(t)%360+360)%360/360}function Zq(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function r7(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function zq(t){let e=zKe(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Dg=(t,e,n)=>{if(_e.fun(t))return t;if(_e.arr(t))return Dg({range:t,output:e,extrapolate:n});if(_e.str(t.output[0]))return iO(t);const r=t,i=r.output,s=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=YKe(c,s);return WKe(c,s[d],s[d+1],i[d],i[d+1],l,a,o,r.map)}};function WKe(t,e,n,r,i,s,a,o,l){let c=l?l(t):t;if(c<e){if(a==="identity")return c;a==="clamp"&&(c=e)}if(c>n){if(o==="identity")return c;o==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function YKe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var JKe={linear:t=>t},Ug=Symbol.for("FluidValue.get"),Am=Symbol.for("FluidValue.observers"),Na=t=>!!(t&&t[Ug]),ks=t=>t&&t[Ug]?t[Ug]():t,Wq=t=>t[Am]||null;function QKe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Fg(t,e){const n=t[Am];n&&n.forEach(r=>{QKe(r,e)})}var Wle=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");XKe(this,t)}},XKe=(t,e)=>Yle(t,Ug,e);function yp(t,e){if(t[Ug]){let n=t[Am];n||Yle(t,Am,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function jg(t,e){const n=t[Am];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Am]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Yle=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),C6=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,eZe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Yq=new RegExp(`(${C6.source})(%|[a-z]+)`,"i"),tZe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,v_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Jle=t=>{const[e,n]=nZe(t);if(!e||rO())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&v_.test(n))return Jle(n);if(n)return n}return t},nZe=t=>{const e=v_.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},KS,rZe=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Qle=t=>{KS||(KS=Ad?new RegExp(`(${Object.keys(Ad).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ks(s).replace(v_,Jle).replace(eZe,zq).replace(KS,zq)),n=e.map(s=>s.match(C6).map(Number)),i=n[0].map((s,a)=>n.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(s=>Dg({...t,output:s}));return s=>{var l;const a=!Yq.test(e[0])&&((l=e.find(c=>Yq.test(c)))==null?void 0:l.replace(C6,""));let o=0;return e[0].replace(C6,()=>`${i[o++](s)}${a||""}`).replace(tZe,rZe)}},aO="react-spring: ",Xle=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${aO}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},iZe=Xle(console.warn);function sZe(){iZe(`${aO}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var aZe=Xle(console.warn);function oZe(){aZe(`${aO}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function y_(t){return _e.str(t)&&(t[0]=="#"||/\d/.test(t)||!rO()&&v_.test(t)||t in(Ad||{}))}var y2=rO()?u.useEffect:u.useLayoutEffect,lZe=()=>{const t=u.useRef(!1);return y2(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function ece(){const t=u.useState()[1],e=lZe();return()=>{e.current&&t(Math.random())}}function cZe(t,e){const[n]=u.useState(()=>({inputs:e,result:t()})),r=u.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&uZe(e,s.inputs)||(s={inputs:e,result:t()}):s=n,u.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function uZe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var tce=t=>u.useEffect(t,dZe),dZe=[];function hZe(t){const e=u.useRef();return u.useEffect(()=>{e.current=t}),e.current}var Hg=Symbol.for("Animated:node"),fZe=t=>!!t&&t[Hg]===t,Rl=t=>t&&t[Hg],oO=(t,e)=>NKe(t,Hg,e),__=t=>t&&t[Hg]&&t[Hg].getPayload(),nce=class{constructor(){oO(this,this)}getPayload(){return this.payload||[]}},D4=class extends nce{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,_e.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new D4(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return _e.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,_e.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},$g=class extends D4{constructor(t){super(0),this._string=null,this._toString=Dg({output:[t,t]})}static create(t){return new $g(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(_e.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Dg({output:[this.getValue(),t]})),this._value=0,super.reset()}},a9={dependencies:null},C_=class extends nce{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Bl(this.source,(n,r)=>{fZe(n)?e[r]=n.getValue(t):Na(n)?e[r]=ks(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&St(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Bl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){a9.dependencies&&Na(t)&&a9.dependencies.add(t);const e=__(t);e&&St(e,n=>this.add(n))}},rce=class extends C_{constructor(t){super(t)}static create(t){return new rce(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(mZe)),!0)}};function mZe(t){return(y_(t)?$g:D4).create(t)}function yI(t){const e=Rl(t);return e?e.constructor:_e.arr(t)?rce:y_(t)?$g:D4}var Jq=(t,e)=>{const n=!_e.fun(t)||t.prototype&&t.prototype.isReactComponent;return u.forwardRef((r,i)=>{const s=u.useRef(null),a=n&&u.useCallback(y=>{s.current=vZe(i,y)},[i]),[o,l]=gZe(r,e),c=ece(),d=()=>{const y=s.current;if(n&&!y)return;(y?e.applyAnimatedValues(y,o.getValue(!0)):!1)===!1&&c()},f=new pZe(d,l),p=u.useRef();y2(()=>(p.current=f,St(l,y=>yp(y,f)),()=>{p.current&&(St(p.current.deps,y=>jg(y,p.current)),yt.cancel(p.current.update))})),u.useEffect(d,[]),tce(()=>()=>{const y=p.current;St(y.deps,v=>jg(v,y))});const g=e.getComponentProps(o.getValue());return u.createElement(t,{...g,ref:a})})},pZe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&yt.write(this.update)}};function gZe(t,e){const n=new Set;return a9.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new C_(t),a9.dependencies=null,[t,n]}function vZe(t,e){return t&&(_e.fun(t)?t(e):t.current=e),e}var Qq=Symbol.for("AnimatedComponent"),yZe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new C_(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=a=>{const o=Xq(a)||"Anonymous";return _e.str(a)?a=s[a]||(s[a]=Jq(a,i)):a=a[Qq]||(a[Qq]=Jq(a,i)),a.displayName=`Animated(${o})`,a};return Bl(t,(a,o)=>{_e.arr(t)&&(o=Xq(a)),s[o]=s(a)}),{animated:s}},Xq=t=>_e.str(t)?t:t&&_e.str(t.displayName)?t.displayName:_e.fun(t)&&t.name||null;function Ts(t,...e){return _e.fun(t)?t(...e):t}var $0=(t,e)=>t===!0||!!(e&&t&&(_e.fun(t)?t(e):rs(t).includes(e))),ice=(t,e)=>_e.obj(t)?e&&t[e]:t,sce=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,_Ze=t=>t,lO=(t,e=_Ze)=>{let n=CZe;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);_e.und(s)||(r[i]=s)}return r},CZe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],bZe={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function EZe(t){const e={};let n=0;if(Bl(t,(r,i)=>{bZe[i]||(e[i]=r,n++)}),n)return e}function cO(t){const e=EZe(t);if(e){const n={to:e};return Bl(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Vg(t){return t=ks(t),_e.arr(t)?t.map(Vg):y_(t)?Ko.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function SZe(t){for(const e in t)return!0;return!1}function _I(t){return _e.fun(t)||_e.arr(t)&&_e.obj(t[0])}function eG(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function wZe(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var kZe={default:{tension:170,friction:26}},CI={...kZe.default,mass:1,damping:1,easing:JKe.linear,clamp:!1},TZe=class{constructor(){this.velocity=0,Object.assign(this,CI)}};function RZe(t,e,n){n&&(n={...n},tG(n,e),e={...n,...e}),tG(t,e),Object.assign(t,e);for(const a in CI)t[a]==null&&(t[a]=CI[a]);let{frequency:r,damping:i}=t;const{mass:s}=t;return _e.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function tG(t,e){if(!_e.und(e.decay))t.duration=void 0;else{const n=!_e.und(e.tension)||!_e.und(e.friction);(n||!_e.und(e.frequency)||!_e.und(e.damping)||!_e.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var nG=[],IZe=class{constructor(){this.changed=!1,this.values=nG,this.toValues=null,this.fromValues=nG,this.config=new TZe,this.immediate=!1}};function ace(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((a,o)=>{let l,c,d=$0(n.cancel??(r==null?void 0:r.cancel),e);if(d)g();else{_e.und(n.pause)||(i.paused=$0(n.pause,e));let y=r==null?void 0:r.pause;y!==!0&&(y=i.paused||$0(y,e)),l=Ts(n.delay||0,e),y?(i.resumeQueue.add(p),s.pause()):(s.resume(),p())}function f(){i.resumeQueue.add(p),i.timeouts.delete(c),c.cancel(),l=c.time-yt.now()}function p(){l>0&&!Ko.skipAnimation?(i.delayed=!0,c=yt.setTimeout(g,l),i.pauseQueue.add(f),i.timeouts.add(c)):g()}function g(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),t<=(i.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},a)}catch(y){o(y)}}})}var uO=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Q2(t.get()):e.every(n=>n.noop)?oce(t.get()):Ao(t.get(),e.every(n=>n.finished)),oce=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ao=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Q2=t=>({value:t,cancelled:!0,finished:!1});function lce(t,e,n,r){const{callId:i,parentId:s,onRest:a}=e,{asyncTo:o,promise:l}=n;return!s&&t===o&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=lO(e,(b,C)=>C==="onRest"?void 0:b);let d,f;const p=new Promise((b,C)=>(d=b,f=C)),g=b=>{const C=i<=(n.cancelId||0)&&Q2(r)||i!==n.asyncId&&Ao(r,!1);if(C)throw b.result=C,f(b),b},y=(b,C)=>{const S=new rG,R=new iG;return(async()=>{if(Ko.skipAnimation)throw Bg(n),R.result=Ao(r,!1),f(R),R;g(S);const w=_e.obj(b)?{...b}:{...C,to:b};w.parentId=i,Bl(c,(k,x)=>{_e.und(w[x])&&(w[x]=k)});const I=await r.start(w);return g(S),n.paused&&await new Promise(k=>{n.resumeQueue.add(k)}),I})()};let v;if(Ko.skipAnimation)return Bg(n),Ao(r,!1);try{let b;_e.arr(t)?b=(async C=>{for(const S of C)await y(S)})(t):b=Promise.resolve(t(y,r.stop.bind(r))),await Promise.all([b.then(d),p]),v=Ao(r.get(),!0,!1)}catch(b){if(b instanceof rG)v=b.result;else if(b instanceof iG)v=b.result;else throw b}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?o:void 0,n.promise=s?l:void 0)}return _e.fun(a)&&yt.batchedUpdates(()=>{a(v,r,r.item)}),v})()}function Bg(t,e){j0(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var rG=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},iG=class extends Error{constructor(){super("SkipAnimationSignal")}},bI=t=>t instanceof dO,xZe=1,dO=class extends Wle{constructor(){super(...arguments),this.id=xZe++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Rl(this);return t&&t.getValue()}to(...t){return Ko.to(this,t)}interpolate(...t){return sZe(),Ko.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Fg(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||p_.sort(this),Fg(this,{type:"priority",parent:this,priority:t})}},Dh=Symbol.for("SpringPhase"),cce=1,uce=2,dce=4,ZS=t=>(t[Dh]&cce)>0,Ju=t=>(t[Dh]&uce)>0,B3=t=>(t[Dh]&dce)>0,sG=(t,e)=>e?t[Dh]|=uce|cce:t[Dh]&=-3,aG=(t,e)=>e?t[Dh]|=dce:t[Dh]&=-5,MZe=class extends dO{constructor(t,e){if(super(),this.animation=new IZe,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!_e.und(t)||!_e.und(e)){const n=_e.obj(t)?{...t}:{...e,from:t};_e.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ju(this)||this._state.asyncTo)||B3(this)}get goal(){return ks(this.animation.to)}get velocity(){const t=Rl(this);return t instanceof D4?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return ZS(this)}get isAnimating(){return Ju(this)}get isPaused(){return B3(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,a=__(r.to);!a&&Na(r.to)&&(i=rs(ks(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const f=c.constructor==$g?1:a?a[d].lastPosition:i[d];let p=r.immediate,g=f;if(!p){if(g=c.lastPosition,s.tension<=0){c.done=!0;return}let y=c.elapsedTime+=t;const v=r.fromValues[d],b=c.v0!=null?c.v0:c.v0=_e.arr(s.velocity)?s.velocity[d]:s.velocity;let C;const S=s.precision||(v==f?.005:Math.min(1,Math.abs(f-v)*.001));if(_e.und(s.duration))if(s.decay){const R=s.decay===!0?.998:s.decay,w=Math.exp(-(1-R)*y);g=v+b/(1-R)*(1-w),p=Math.abs(c.lastPosition-g)<=S,C=b*w}else{C=c.lastVelocity==null?b:c.lastVelocity;const R=s.restVelocity||S/10,w=s.clamp?0:s.bounce,I=!_e.und(w),k=v==f?c.v0>0:v<f;let x,L=!1;const N=1,D=Math.ceil(t/N);for(let U=0;U<D&&(x=Math.abs(C)>R,!(!x&&(p=Math.abs(f-g)<=S,p)));++U){I&&(L=g==f||g>f==k,L&&(C=-C*w,g=f));const j=-s.tension*1e-6*(g-f),$=-s.friction*.001*C,Z=(j+$)/s.mass;C=C+Z*N,g=g+C*N}}else{let R=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,y=c.elapsedTime+=t)),R=(s.progress||0)+y/this._memoizedDuration,R=R>1?1:R<0?0:R,c.durationProgress=R),g=v+s.easing(R)*(f-v),C=(g-c.lastPosition)/t,p=R==1}c.lastVelocity=C,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),p=!0)}a&&!a[d].done&&(p=!1),p?c.done=!0:e=!1,c.setValue(g,s.round)&&(n=!0)});const o=Rl(this),l=o.getValue();if(e){const c=ks(r.to);(l!==c||n)&&!s.decay?(o.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return yt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ju(this)){const{to:t,config:e}=this.animation;yt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return _e.und(t)?(n=this.queue||[],this.queue=[]):n=[_e.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>uO(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Bg(this._state,t&&this._lastCallId),yt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=_e.obj(n)?n[e]:n,(n==null||_I(n))&&(n=void 0),r=_e.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return ZS(this)||(t.reverse&&([n,r]=[r,n]),r=ks(r),_e.und(r)?Rl(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,lO(t,(a,o)=>/^on/.test(o)?ice(a,n):a)),lG(this,t,"onProps"),G3(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return ace(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{B3(this)||(aG(this,!0),l0(s.pauseQueue),G3(this,"onPause",Ao(this,q3(this,this.animation.to)),this))},resume:()=>{B3(this)&&(aG(this,!1),Ju(this)&&this._resume(),l0(s.resumeQueue),G3(this,"onResume",Ao(this,q3(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(a=>{if(t.loop&&a.finished&&!(e&&a.noop)){const o=hce(t);if(o)return this._update(o,!0)}return a})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Q2(this));const r=!_e.und(t.to),i=!_e.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Q2(this));const{key:s,defaultProps:a,animation:o}=this,{to:l,from:c}=o;let{to:d=l,from:f=c}=t;i&&!r&&(!e.default||_e.und(d))&&(d=f),e.reverse&&([d,f]=[f,d]);const p=!Rc(f,c);p&&(o.from=f),f=ks(f);const g=!Rc(d,l);g&&this._focus(d);const y=_I(e.to),{config:v}=o,{decay:b,velocity:C}=v;(r||i)&&(v.velocity=0),e.config&&!y&&RZe(v,Ts(e.config,s),e.config!==a.config?Ts(a.config,s):void 0);let S=Rl(this);if(!S||_e.und(d))return n(Ao(this,!0));const R=_e.und(e.reset)?i&&!e.default:!_e.und(f)&&$0(e.reset,s),w=R?f:this.get(),I=Vg(d),k=_e.num(I)||_e.arr(I)||y_(I),x=!y&&(!k||$0(a.immediate||e.immediate,s));if(g){const U=yI(d);if(U!==S.constructor)if(x)S=this._set(I);else throw Error(`Cannot animate between ${S.constructor.name} and ${U.name}, as the "to" prop suggests`)}const L=S.constructor;let N=Na(d),D=!1;if(!N){const U=R||!ZS(this)&&p;(g||U)&&(D=Rc(Vg(w),I),N=!D),(!Rc(o.immediate,x)&&!x||!Rc(v.decay,b)||!Rc(v.velocity,C))&&(N=!0)}if(D&&Ju(this)&&(o.changed&&!R?N=!0:N||this._stop(l)),!y&&((N||Na(l))&&(o.values=S.getPayload(),o.toValues=Na(d)?null:L==$g?[1]:rs(I)),o.immediate!=x&&(o.immediate=x,!x&&!R&&this._set(l)),N)){const{onRest:U}=o;St(PZe,$=>lG(this,e,$));const j=Ao(this,q3(this,l));l0(this._pendingCalls,j),this._pendingCalls.add(n),o.changed&&yt.batchedUpdates(()=>{var $;o.changed=!R,U==null||U(j,this),R?Ts(a.onRest,j):($=o.onStart)==null||$.call(o,j,this)})}R&&this._set(w),y?n(lce(e.to,e,this._state,this)):N?this._start():Ju(this)&&!g?this._pendingCalls.add(n):n(oce(w))}_focus(t){const e=this.animation;t!==e.to&&(Wq(this)&&this._detach(),e.to=t,Wq(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Na(e)&&(yp(e,this),bI(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Na(t)&&jg(t,this)}_set(t,e=!0){const n=ks(t);if(!_e.und(n)){const r=Rl(this);if(!r||!Rc(n,r.getValue())){const i=yI(n);!r||r.constructor!=i?oO(this,i.create(n)):r.setValue(n),r&&yt.batchedUpdates(()=>{this._onChange(n,e)})}}return Rl(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,G3(this,"onStart",Ao(this,q3(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Ts(this.animation.onChange,t,this)),Ts(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Rl(this).reset(ks(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ju(this)||(sG(this,!0),B3(this)||this._resume())}_resume(){Ko.skipAnimation?this.finish():p_.start(this)}_stop(t,e){if(Ju(this)){sG(this,!1);const n=this.animation;St(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Fg(this,{type:"idle",parent:this});const r=e?Q2(this.get()):Ao(this.get(),q3(this,t??n.to));l0(this._pendingCalls,r),n.changed&&(n.changed=!1,G3(this,"onRest",r,this))}}};function q3(t,e){const n=Vg(e),r=Vg(t.get());return Rc(r,n)}function hce(t,e=t.loop,n=t.to){const r=Ts(e);if(r){const i=r!==!0&&cO(r),s=(i||t).reverse,a=!i||i.reset;return o9({...t,loop:e,default:!1,pause:void 0,to:!s||_I(n)?n:void 0,from:a?t.from:void 0,reset:a,...i})}}function o9(t){const{to:e,from:n}=t=cO(t),r=new Set;return _e.obj(e)&&oG(e,r),_e.obj(n)&&oG(n,r),t.keys=r.size?Array.from(r):null,t}function oG(t,e){Bl(t,(n,r)=>n!=null&&e.add(r))}var PZe=["onStart","onRest","onChange","onPause","onResume"];function lG(t,e,n){t.animation[n]=e[n]!==sce(e,n)?ice(e[n],t.key):void 0}function G3(t,e,...n){var r,i,s,a;(i=(r=t.animation)[e])==null||i.call(r,...n),(a=(s=t.defaultProps)[e])==null||a.call(s,...n)}var LZe=["onStart","onChange","onRest"],OZe=1,AZe=class{constructor(e,n){this.id=OZe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,r)=>e[r]=n.get()),e}set(e){for(const n in e){const r=e[n];_e.und(r)||this.springs[n].set(r)}}update(e){return e&&this.queue.push(o9(e)),this}start(e){let{queue:n}=this;return e?n=rs(e).map(o9):this.queue=[],this._flush?this._flush(this,n):(gce(this,n),NZe(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const r=this.springs;St(rs(n),i=>r[i].stop(!!e))}else Bg(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(_e.und(e))this.start({pause:!0});else{const n=this.springs;St(rs(e),r=>n[r].pause())}return this}resume(e){if(_e.und(e))this.start({pause:!1});else{const n=this.springs;St(rs(e),r=>n[r].resume())}return this}each(e){Bl(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,j0(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!i&&this._started,o=s||a&&r.size?this.get():null;s&&n.size&&j0(n,([l,c])=>{c.value=o,l(c,this,this._item)}),a&&(this._started=!1,j0(r,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;yt.onFrame(this._onFrame)}};function NZe(t,e){return Promise.all(e.map(n=>fce(t,n))).then(n=>uO(t,n))}async function fce(t,e,n){const{keys:r,to:i,from:s,loop:a,onRest:o,onResolve:l}=e,c=_e.obj(e.default)&&e.default;a&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const d=_e.arr(i)||_e.fun(i)?i:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):St(LZe,v=>{const b=e[v];if(_e.fun(b)){const C=t._events[v];e[v]=({finished:S,cancelled:R})=>{const w=C.get(b);w?(S||(w.finished=!1),R&&(w.cancelled=!0)):C.set(b,{value:null,finished:S||!1,cancelled:R||!1})},c&&(c[v]=e[v])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,l0(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const p=(r||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),g=e.cancel===!0||sce(e,"cancel")===!0;(d||g&&f.asyncId)&&p.push(ace(++t._lastAsyncId,{props:e,state:f,actions:{pause:gI,resume:gI,start(v,b){g?(Bg(f,t._lastAsyncId),b(Q2(t))):(v.onRest=o,b(lce(d,v,f,t)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});const y=uO(t,await Promise.all(p));if(a&&y.finished&&!(n&&y.noop)){const v=hce(e,a,i);if(v)return gce(t,[v]),fce(t,v,!0)}return l&&yt.batchedUpdates(()=>l(y,t,t.item)),y}function DZe(t,e){const n={...t.springs};return e&&St(rs(e),r=>{_e.und(r.keys)&&(r=o9(r)),_e.obj(r.to)||(r={...r,to:void 0}),pce(n,r,i=>mce(i))}),UZe(t,n),n}function UZe(t,e){Bl(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,yp(n,t))})}function mce(t,e){const n=new MZe;return n.key=t,e&&yp(n,e),n}function pce(t,e,n){e.keys&&St(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function gce(t,e){St(e,n=>{pce(t.springs,n,r=>mce(r,t))})}var b_=({children:t,...e})=>{const n=u.useContext(l9),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=cZe(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=l9;return u.createElement(s,{value:e},t)},l9=FZe(b_,{});b_.Provider=l9.Provider;b_.Consumer=l9.Consumer;function FZe(t,e){return Object.assign(t,u.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var jZe=()=>{const t=[],e=function(r){oZe();const i=[];return St(t,(s,a)=>{if(_e.und(r))i.push(s.start());else{const o=n(r,s,a);o&&i.push(s.start(o))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return St(t,r=>r.pause(...arguments)),this},e.resume=function(){return St(t,r=>r.resume(...arguments)),this},e.set=function(r){St(t,(i,s)=>{const a=_e.fun(r)?r(s,i):r;a&&i.set(a)})},e.start=function(r){const i=[];return St(t,(s,a)=>{if(_e.und(r))i.push(s.start());else{const o=this._getProps(r,s,a);o&&i.push(s.start(o))}}),i},e.stop=function(){return St(t,r=>r.stop(...arguments)),this},e.update=function(r){return St(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return _e.fun(r)?r(s,i):r};return e._getProps=n,e};function HZe(t,e,n){const r=_e.fun(e)&&e,{reset:i,sort:s,trail:a=0,expires:o=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:d,config:f}=r?r():e,p=u.useMemo(()=>r||arguments.length==3?jZe():void 0,[]),g=rs(t),y=[],v=u.useRef(null),b=i?null:v.current;y2(()=>{v.current=y}),tce(()=>(St(y,Z=>{p==null||p.add(Z.ctrl),Z.ctrl.ref=p}),()=>{St(v.current,Z=>{Z.expired&&clearTimeout(Z.expirationId),eG(Z.ctrl,p),Z.ctrl.stop(!0)})}));const C=VZe(g,r?r():e,b),S=i&&v.current||[];y2(()=>St(S,({ctrl:Z,item:V,key:z})=>{eG(Z,p),Ts(c,V,z)}));const R=[];if(b&&St(b,(Z,V)=>{Z.expired?(clearTimeout(Z.expirationId),S.push(Z)):(V=R[V]=C.indexOf(Z.key),~V&&(y[V]=Z))}),St(g,(Z,V)=>{y[V]||(y[V]={key:C[V],item:Z,phase:"mount",ctrl:new AZe},y[V].ctrl.item=Z)}),R.length){let Z=-1;const{leave:V}=r?r():e;St(R,(z,K)=>{const q=b[K];~z?(Z=y.indexOf(q),y[Z]={...q,item:g[z]}):V&&y.splice(++Z,0,q)})}_e.fun(s)&&y.sort((Z,V)=>s(Z.item,V.item));let w=-a;const I=ece(),k=lO(e),x=new Map,L=u.useRef(new Map),N=u.useRef(!1);St(y,(Z,V)=>{const z=Z.key,K=Z.phase,q=r?r():e;let G,J;const B=Ts(q.delay||0,z);if(K=="mount")G=q.enter,J="enter";else{const Re=C.indexOf(z)<0;if(K!="leave")if(Re)G=q.leave,J="leave";else if(G=q.update)J="update";else return;else if(!Re)G=q.enter,J="enter";else return}if(G=Ts(G,Z.item,V),G=_e.obj(G)?cO(G):{to:G},!G.config){const Re=f||k.config;G.config=Ts(Re,Z.item,V,J)}w+=a;const Q={...k,delay:B+w,ref:d,immediate:q.immediate,reset:!1,...G};if(J=="enter"&&_e.und(Q.from)){const Re=r?r():e,Te=_e.und(Re.initial)||b?Re.from:Re.initial;Q.from=Ts(Te,Z.item,V)}const{onResolve:pe}=Q;Q.onResolve=Re=>{Ts(pe,Re);const Te=v.current,Ce=Te.find(we=>we.key===z);if(Ce&&!(Re.cancelled&&Ce.phase!="update")&&Ce.ctrl.idle){const we=Te.every(Ee=>Ee.ctrl.idle);if(Ce.phase=="leave"){const Ee=Ts(o,Ce.item);if(Ee!==!1){const ze=Ee===!0?0:Ee;if(Ce.expired=!0,!we&&ze>0){ze<=2147483647&&(Ce.expirationId=setTimeout(I,ze));return}}}we&&Te.some(Ee=>Ee.expired)&&(L.current.delete(Ce),l&&(N.current=!0),I())}};const ve=DZe(Z.ctrl,Q);J==="leave"&&l?L.current.set(Z,{phase:J,springs:ve,payload:Q}):x.set(Z,{phase:J,springs:ve,payload:Q})});const D=u.useContext(b_),U=hZe(D),j=D!==U&&SZe(D);y2(()=>{j&&St(y,Z=>{Z.ctrl.start({default:D})})},[D]),St(x,(Z,V)=>{if(L.current.size){const z=y.findIndex(K=>K.key===V.key);y.splice(z,1)}}),y2(()=>{St(L.current.size?L.current:x,({phase:Z,payload:V},z)=>{const{ctrl:K}=z;z.phase=Z,p==null||p.add(K),j&&Z=="enter"&&K.start({default:D}),V&&(wZe(K,V.ref),(K.ref||p)&&!N.current?K.update(V):(K.start(V),N.current&&(N.current=!1)))})},i?void 0:n);const $=Z=>u.createElement(u.Fragment,null,y.map((V,z)=>{const{springs:K}=x.get(V)||V.ctrl,q=Z({...K},V.item,V,z);return q&&q.type?u.createElement(q.type,{...q.props,key:_e.str(V.key)||_e.num(V.key)?V.key:V.ctrl.id,ref:q.ref}):q}));return p?[$,p]:$}var $Ze=1;function VZe(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const a=r&&r.find(o=>o.item===s&&o.phase!=="leave"&&!i.has(o));return a?(i.add(a),a.key):$Ze++})}return _e.und(n)?t:_e.fun(n)?t.map(n):rs(n)}var BZe=class extends dO{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Dg(...e);const n=this._get(),r=yI(n);oO(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Rc(e,n)||(Rl(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&cG(this._active)&&zS(this)}_get(){const t=_e.arr(this.source)?this.source.map(ks):rs(ks(this.source));return this.calc(...t)}_start(){this.idle&&!cG(this._active)&&(this.idle=!1,St(__(this),t=>{t.done=!1}),Ko.skipAnimation?(yt.batchedUpdates(()=>this.advance()),zS(this)):p_.start(this))}_attach(){let t=1;St(rs(this.source),e=>{Na(e)&&yp(e,this),bI(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){St(rs(this.source),t=>{Na(t)&&jg(t,this)}),this._active.clear(),zS(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=rs(this.source).reduce((e,n)=>Math.max(e,(bI(n)?n.priority:0)+1),0))}};function qZe(t){return t.idle!==!1}function cG(t){return!t.size||Array.from(t).every(qZe)}function zS(t){t.idle||(t.idle=!0,St(__(t),e=>{e.done=!0}),Fg(t,{type:"idle",parent:t}))}Ko.assign({createStringInterpolator:Qle,to:(t,e)=>new BZe(t,e)});var vce=/^--/;function GZe(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!vce.test(t)&&!(V0.hasOwnProperty(t)&&V0[t])?e+"px":(""+e).trim()}var uG={};function KZe(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:i,children:s,scrollTop:a,scrollLeft:o,viewBox:l,...c}=e,d=Object.values(c),f=Object.keys(c).map(p=>n||t.hasAttribute(p)?p:uG[p]||(uG[p]=p.replace(/([A-Z])/g,g=>"-"+g.toLowerCase())));s!==void 0&&(t.textContent=s);for(const p in i)if(i.hasOwnProperty(p)){const g=GZe(p,i[p]);vce.test(p)?t.style.setProperty(p,g):t.style[p]=g}f.forEach((p,g)=>{t.setAttribute(p,d[g])}),r!==void 0&&(t.className=r),a!==void 0&&(t.scrollTop=a),o!==void 0&&(t.scrollLeft=o),l!==void 0&&t.setAttribute("viewBox",l)}var V0={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZZe=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),zZe=["Webkit","Ms","Moz","O"];V0=Object.keys(V0).reduce((t,e)=>(zZe.forEach(n=>t[ZZe(n,e)]=t[e]),t),V0);var WZe=/^(matrix|translate|scale|rotate|skew)/,YZe=/^(translate)/,JZe=/^(rotate|skew)/,WS=(t,e)=>_e.num(t)&&t!==0?t+e:t,b6=(t,e)=>_e.arr(t)?t.every(n=>b6(n,e)):_e.num(t)?t===e:parseFloat(t)===e,QZe=class extends C_{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(a=>[`translate3d(${a.map(o=>WS(o,"px")).join(",")})`,b6(a,0)])),Bl(r,(a,o)=>{if(o==="transform")i.push([a||""]),s.push(l=>[l,l===""]);else if(WZe.test(o)){if(delete r[o],_e.und(a))return;const l=YZe.test(o)?"px":JZe.test(o)?"deg":"";i.push(rs(a)),s.push(o==="rotate3d"?([c,d,f,p])=>[`rotate3d(${c},${d},${f},${WS(p,l)})`,b6(p,0)]:c=>[`${o}(${c.map(d=>WS(d,l)).join(",")})`,b6(c,o.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new XZe(i,s)),super(r)}},XZe=class extends Wle{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return St(this.inputs,(n,r)=>{const i=ks(n[0]),[s,a]=this.transforms[r](_e.arr(i)?i:n.map(ks));t+=" "+s,e=e&&a}),e?"none":t}observerAdded(t){t==1&&St(this.inputs,e=>St(e,n=>Na(n)&&yp(n,this)))}observerRemoved(t){t==0&&St(this.inputs,e=>St(e,n=>Na(n)&&jg(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Fg(this,t)}},eze=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ko.assign({batchedUpdates:Bm.unstable_batchedUpdates,createStringInterpolator:Qle,colors:jKe});var tze=yZe(eze,{applyAnimatedValues:KZe,createAnimatedStyle:t=>new QZe(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),yce=tze.animated;const nze="_media_ganm0_15",rze="_mirror_ganm0_49",ize="_bg_ganm0_73",sze="_avatar_ganm0_89",aze="_fg_ganm0_139",oze="_nameTag_ganm0_167",lze="_status_ganm0_199",cze="_reactions_ganm0_237",uze="_name_ganm0_167",dze="_errorIcon_ganm0_275",wo={media:nze,mirror:rze,bg:ize,avatar:sze,fg:aze,nameTag:oze,status:lze,reactions:cze,name:uze,errorIcon:dze},hze="_reactionIndicatorWidget_1o9dg_1",fze="_reactionIndicatorWidgetLarge_1o9dg_41",mze="_reactionLarge_1o9dg_55",pze="_reaction_1o9dg_1",i7={reactionIndicatorWidget:hze,reactionIndicatorWidgetLarge:fze,reactionLarge:mze,reaction:pze};function _ce({emoji:t,miniature:e,children:n}){const{t:r}=it();return E.jsxs("div",{className:De(i7.reactionIndicatorWidget,{[i7.reactionIndicatorWidgetLarge]:!e}),children:[E.jsx("div",{className:De(i7.reaction,{[i7.reactionLarge]:!e}),children:E.jsx("span",{role:"img","aria-label":r("common.reaction"),children:t})}),n]})}function gze({raisedHandTime:t,miniature:e,showTimer:n,onClick:r}){const{t:i}=it(),[s,a]=u.useState(""),o=u.useMemo(()=>new Intl.DurationFormat(void 0,{minutesDisplay:"always",secondsDisplay:"always",hoursDisplay:"auto",style:"digital"}),[]),l=u.useCallback(d=>{r&&(d.preventDefault(),r())},[r]);if(u.useEffect(()=>{if(!t||!n)return;const d=()=>{const p=Math.ceil((new Date().getTime()-t.getTime())/1e3);a(o.format({seconds:p%60,minutes:Math.floor(p/60)}))};d();const f=setInterval(d,1e3);return()=>clearInterval(f)},[a,t,n,o]),!t)return;const c=E.jsx(_ce,{emoji:"✋",miniature:e,children:n&&E.jsx("p",{children:s})});return r?E.jsx("button",{"aria-label":i("action.lower_hand"),style:{display:"contents",background:"none"},onClick:l,children:c}):c}const vze="_modal_1bnc4_15",yze="_statsPill_1bnc4_23",dG={modal:vze,statsPill:yze},_ze=({audio:t,video:e,...n})=>{const[r,i]=u.useState(!1),[s,a]=u.useState("none"),o=c=>{i(!0),a(c)},l=()=>{i(!1),a("none")};return E.jsxs("div",{className:De(wo.nameTag,dG.statsPill),children:[E.jsx(Yh,{title:"RTC Connection Stats",open:r,onDismiss:l,children:E.jsx("div",{className:dG.modal,children:E.jsx("pre",{children:s!=="none"&&JSON.stringify(s==="video"?e:t,null,2)})})}),t&&E.jsx("div",{children:E.jsx(Bt,{onClick:()=>o("audio"),size:"sm",kind:"tertiary",Icon:KM,children:"jitter"in t&&typeof t.jitter=="number"&&E.jsxs(_n,{as:"span",size:"xs",title:"jitter",children:[" ",(t.jitter*1e3).toFixed(0),"ms"]})})}),e&&E.jsx("div",{children:E.jsxs(Bt,{onClick:()=>o("video"),size:"sm",kind:"tertiary",Icon:Gne,children:[!!(e!=null&&e.framesPerSecond)&&E.jsxs(_n,{as:"span",size:"xs",title:"frame rate",children:[" ",e.framesPerSecond.toFixed(0),"fps"]}),"jitter"in e&&typeof e.jitter=="number"&&E.jsxs(_n,{as:"span",size:"xs",title:"jitter",children:[" ",(e.jitter*1e3).toFixed(0),"ms"]}),"frameHeight"in e&&typeof e.frameHeight=="number"&&"frameWidth"in e&&typeof e.frameWidth=="number"&&E.jsxs(_n,{as:"span",size:"xs",title:"frame size",children:[" ",e.frameWidth,"x",e.frameHeight]}),"qualityLimitationReason"in e&&typeof e.qualityLimitationReason=="string"&&e.qualityLimitationReason!=="none"&&E.jsxs(_n,{as:"span",size:"xs",title:"quality limitation reason",children:[" ",e.qualityLimitationReason]})]})})]})},U4=u.forwardRef(({className:t,style:e,targetWidth:n,targetHeight:r,video:i,videoFit:s,mirror:a,member:o,videoEnabled:l,unencryptedWarning:c,nameTagLeadingIcon:d,displayName:f,primaryButton:p,encryptionStatus:g,raisedHandTime:y,currentReaction:v,raisedHandOnClick:b,localParticipant:C,audioStreamStats:S,videoStreamStats:R,...w},I)=>{const{t:k}=it(),[x]=Gr(rse),L=Math.round(Math.min(n,r)/2);return E.jsxs(yce.div,{className:De(wo.media,t,{[wo.mirror]:a}),style:e,ref:I,"data-testid":"videoTile","data-video-fit":s,...w,children:[E.jsxs("div",{className:wo.bg,children:[E.jsx(rp,{id:(o==null?void 0:o.userId)??f,name:f,size:L,src:o==null?void 0:o.getMxcAvatarUrl(),className:wo.avatar,style:{display:i&&l?"none":"initial"}}),(i==null?void 0:i.publication)!==void 0&&E.jsx(yGe,{trackRef:i,tabIndex:-1,disablePictureInPicture:!0,style:{display:i&&l?"block":"none"},"data-testid":"video"})]}),E.jsxs("div",{className:wo.fg,children:[E.jsxs("div",{className:wo.reactions,children:[E.jsx(gze,{raisedHandTime:y,miniature:L<96,showTimer:x,onClick:b}),v&&E.jsx(_ce,{miniature:L<96,emoji:v.emoji})]}),!i&&!C&&E.jsx("div",{className:wo.status,children:k("video_tile.waiting_for_media")}),(S||R)&&E.jsx(_ze,{audio:S,video:R}),E.jsxs("div",{className:wo.nameTag,children:[d,E.jsx(_n,{as:"span",size:"sm",weight:"medium",className:wo.name,"data-testid":"name_tag",children:f}),c&&E.jsx(Bi,{label:k("common.unencrypted"),placement:"bottom",isTriggerInteractive:!1,children:E.jsx(ty,{width:20,height:20,className:wo.errorIcon,role:"img","aria-label":k("common.unencrypted")})})]}),p]})]})});U4.displayName="MediaView";const F4=(...t)=>u.useCallback(e=>t.forEach(n=>{typeof n=="function"?n(e):n!==null&&(n.current=e)}),t),hO=u.forwardRef(({vm:t,showSpeakingIndicators:e,locallyMuted:n,menuStart:r,menuEnd:i,className:s,displayName:a,...o},l)=>{const{toggleRaisedHand:c}=xP(),{t:d}=it(),f=Qe(t.video$),p=Qe(t.unencryptedWarning$),g=Qe(t.encryptionStatus$),y=Qe(t.audioStreamStats$),v=Qe(t.videoStreamStats$),b=Qe(t.audioEnabled$),C=Qe(t.videoEnabled$),S=Qe(t.speaking$),R=Qe(t.cropVideo$),w=u.useCallback(V=>{V.preventDefault(),t.toggleFitContain()},[t]),I=Ig(t.handRaised$),k=Ig(t.reaction$),x=n?ARe:b?KM:wne,L=d(n?"video_tile.muted_for_me":b?"microphone_on":"microphone_off"),[N,D]=u.useState(!1),U=E.jsxs(E.Fragment,{children:[r,E.jsx(qM,{Icon:vne,label:d("video_tile.change_fit_contain"),checked:R,onSelect:w}),i]}),j=t.local?()=>void c():void 0,$=e&&S,Z=E.jsx(U4,{ref:l,video:f,member:t.member,unencryptedWarning:p,encryptionStatus:g,videoEnabled:C,videoFit:R?"cover":"contain",className:De(s,o0.tile,{[o0.speaking]:$,[o0.handRaised]:!$&&I}),nameTagLeadingIcon:E.jsx(x,{width:20,height:20,"aria-label":L,"data-muted":n||!b,className:o0.muteIcon}),displayName:a,primaryButton:E.jsx(NM,{open:N,onOpenChange:D,title:a,trigger:E.jsx("button",{"aria-label":d("common.options"),children:E.jsx(wRe,{"aria-hidden":!0,width:20,height:20})}),side:"left",align:"start",children:U}),raisedHandTime:I??void 0,currentReaction:k??void 0,raisedHandOnClick:j,localParticipant:t.local,audioStreamStats:y,videoStreamStats:v,...o});return E.jsx(eke,{title:a,trigger:Z,hasAccessibleAlternative:!0,children:U})});hO.displayName="UserMediaTile";const Cce=u.forwardRef(({vm:t,onOpenProfile:e,...n},r)=>{const{t:i}=it(),s=Qe(t.mirror$),a=Qe(t.alwaysShow$),o=nu(a),l=u.useCallback(c=>{c.preventDefault(),t.setAlwaysShow(!o.current)},[t,o]);return E.jsx(hO,{ref:r,vm:t,locallyMuted:!1,mirror:s,menuStart:E.jsx(qM,{Icon:xTe,label:i("video_tile.always_show"),checked:a,onSelect:l}),menuEnd:e&&E.jsx(vm,{Icon:Vne,label:i("common.profile"),onSelect:e}),...n})});Cce.displayName="LocalUserMediaTile";const bce=u.forwardRef(({vm:t,...e},n)=>{const{t:r}=it(),i=Qe(t.locallyMuted$),s=Qe(t.localVolume$),a=u.useCallback(d=>{d.preventDefault(),t.toggleLocallyMuted()},[t]),o=u.useCallback(d=>t.setLocalVolume(d),[t]),l=u.useCallback(()=>t.commitLocalVolume(),[t]),c=i?NRe:DRe;return E.jsx(hO,{ref:n,vm:t,locallyMuted:i,mirror:!1,menuStart:E.jsxs(E.Fragment,{children:[E.jsx(qM,{Icon:ERe,label:r("video_tile.mute_for_me"),checked:i,onSelect:a}),E.jsx(vm,{as:"div",Icon:c,label:null,onSelect:null,children:E.jsx(Vse,{className:o0.volumeSlider,label:r("video_tile.volume"),value:s,onValueChange:o,onValueCommit:l,min:0,max:1,step:.01})})]}),...e})});bce.displayName="RemoteUserMediaTile";const Ece=u.forwardRef(({vm:t,onOpenProfile:e,...n},r)=>{const i=u.useRef(null),s=F4(i,r),a=Qe(t.media$),o=Qe(a.displayname$);return a instanceof Om?E.jsx(Cce,{ref:s,vm:a,onOpenProfile:e,displayName:o,...n}):E.jsx(bce,{ref:s,vm:a,displayName:o,...n})});Ece.displayName="GridTile";const Cze=({rageshakeRequestId:t,roomId:e,open:n,onDismiss:r})=>{const{t:i}=it(),{submitRageshake:s,sending:a,sent:o,error:l}=RP();return u.useEffect(()=>{o&&r()},[o,r]),E.jsxs(Yh,{title:i("rageshake_request_modal.title"),open:n,onDismiss:r,children:[E.jsx(_n,{children:i("rageshake_request_modal.body")}),E.jsx(en,{children:E.jsx(Bt,{onClick:()=>void s({sendLogs:!0,rageshakeRequestId:t,roomId:e}),disabled:a,children:i(a?"rageshake_sending_logs":"rageshake_send_logs")})}),l&&E.jsx(en,{children:E.jsx(Jh,{error:l})})]})};function hG(t){return new Worker("/assets/livekit-client.e2ee.worker-ChP6sqnt.js",{name:t==null?void 0:t.name})}const bze={audioPreset:z6.music,dtx:!0,red:!1,forceStereo:!1,simulcast:!0,videoSimulcastLayers:[Ol.h180,Ol.h360],screenShareEncoding:U9.h1080fps30.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",videoEncoding:Ol.h720.encoding,backupCodec:{codec:"vp8",encoding:Ol.h720.encoding}},YS={adaptiveStream:!0,dynacast:!0,videoCaptureDefaults:{resolution:Ol.h720.resolution},publishDefaults:bze,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new bW,disconnectOnPageLeave:!0,webAudioMix:!1};function Eze(t){const[e,n]=u.useState(()=>{const i=t.getActiveFocus();return i&&ok(i)?i:void 0}),r=u.useCallback(()=>{const i=t.getActiveFocus();if(!(i&&!ok(i))&&!_h(e,i)){const s=t.getOldestMembership();A.warn(`Got new active focus from membership: ${s==null?void 0:s.sender}/${s==null?void 0:s.deviceId}.
        Updating focus (focus switch) from ${JSON.stringify(e)} to ${JSON.stringify(i)}`),n(i)}},[e,t]);return u.useEffect(()=>(t.on(xr.MembershipsChanged,r),()=>{t.off(xr.MembershipsChanged,r)})),e}function Sze(){const[t,e]=u.useState(null),n=u.useMemo(()=>({showErrorBoundary:r=>e(r)}),[]);if(t)throw t;return n}const mt=t=>typeof t=="string",K3=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},fG=t=>t==null?"":""+t,wze=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},kze=/###/g,mG=t=>t&&t.indexOf("###")>-1?t.replace(kze,"."):t,pG=t=>!t||mt(t),B0=(t,e,n)=>{const r=mt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(pG(t))return{};const s=mG(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return pG(t)?{}:{obj:t,k:mG(r[i])}},gG=(t,e,n)=>{const{obj:r,k:i}=B0(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=B0(t,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=B0(t,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=n},Tze=(t,e,n,r)=>{const{obj:i,k:s}=B0(t,e,Object);i[s]=i[s]||[],i[s].push(n)},c9=(t,e)=>{const{obj:n,k:r}=B0(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Rze=(t,e,n)=>{const r=c9(t,n);return r!==void 0?r:c9(e,n)},Sce=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?mt(t[r])||t[r]instanceof String||mt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Sce(t[r],e[r],n):t[r]=e[r]);return t},Kf=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ize={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const xze=t=>mt(t)?t.replace(/[&<>"'\/]/g,e=>Ize[e]):t;class Mze{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Pze=[" ",",","?","!",";"],Lze=new Mze(20),Oze=(t,e,n)=>{e=e||"",n=n||"";const r=Pze.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const i=Lze.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(t);if(!s){const a=t.indexOf(n);a>0&&!i.test(t.substring(0,a))&&(s=!0)}return s},EI=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=s;l<r.length;++l)if(l!==s&&(o+=n),o+=r[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=a}return i},u9=t=>t==null?void 0:t.replace("_","-"),Aze={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class d9{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Aze,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(mt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new d9(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new d9(this.logger,e)}}var Dl=new d9;class E_{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o.apply(o,[e,...r])})}}class vG extends E_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){var c,d;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,n],r&&(Array.isArray(r)?o.push(...r):mt(r)&&s?o.push(...r.split(s)):o.push(r)));const l=c9(this.data,o);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=o[0],n=o[1],r=o.slice(2).join(".")),l||!a||!mt(r)?l:EI((d=(c=this.data)==null?void 0:c[e])==null?void 0:d[n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,n];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=n,n=o[1]),this.addNamespaces(n),gG(this.data,o,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(mt(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,n];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=n,n=o[1]),this.addNamespaces(n);let l=c9(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Sce(l,r,s):l={...l,...r},gG(this.data,o,l),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var wce={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,n,r,i))??e}),e}};const yG={},_G=t=>!mt(t)&&typeof t!="boolean"&&typeof t!="number";class h9 extends E_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),wze(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Dl.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Oze(e,r,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:mt(s)?[s]:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return{key:e,namespaces:mt(s)?[s]:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],n),l=o[o.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode"){if(d){const U=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${U}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${U}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:a}const f=this.resolve(e,n);let p=f==null?void 0:f.res;const g=(f==null?void 0:f.usedKey)||a,y=(f==null?void 0:f.exactUsedKey)||a,v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,S=n.count!==void 0&&!mt(n.count),R=h9.hasDefaultValue(n),w=S?this.pluralResolver.getSuffix(c,n.count,n):"",I=n.ordinal&&S?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",k=S&&!n.ordinal&&n.count===0,x=k&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${w}`]||n[`defaultValue${I}`]||n.defaultValue;let L=p;C&&!p&&R&&(L=x);const N=_G(L),D=Object.prototype.toString.apply(L);if(C&&L&&N&&v.indexOf(D)<0&&!(mt(b)&&Array.isArray(L))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,L,{...n,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(f.res=U,f.usedParams=this.getUsedParamsDetails(n),f):U}if(s){const U=Array.isArray(L),j=U?[]:{},$=U?y:g;for(const Z in L)if(Object.prototype.hasOwnProperty.call(L,Z)){const V=`${$}${s}${Z}`;R&&!p?j[Z]=this.translate(V,{...n,defaultValue:_G(x)?x[Z]:void 0,joinArrays:!1,ns:o}):j[Z]=this.translate(V,{...n,joinArrays:!1,ns:o}),j[Z]===V&&(j[Z]=L[Z])}p=j}}else if(C&&mt(b)&&Array.isArray(p))p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let U=!1,j=!1;!this.isValidLookup(p)&&R&&(U=!0,p=x),this.isValidLookup(p)||(j=!0,p=a);const Z=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&j?void 0:p,V=R&&x!==p&&this.options.updateMissing;if(j||U||V){if(this.logger.log(V?"updateKey":"missingKey",c,l,a,V?x:p),s){const G=this.resolve(a,{...n,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let G=0;G<K.length;G++)z.push(K[G]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(n.lng||this.language):z.push(n.lng||this.language);const q=(G,J,B)=>{var pe;const Q=R&&B!==p?B:Z;this.options.missingKeyHandler?this.options.missingKeyHandler(G,l,J,Q,V,n):(pe=this.backendConnector)!=null&&pe.saveMissing&&this.backendConnector.saveMissing(G,l,J,Q,V,n),this.emit("missingKey",G,l,J,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?z.forEach(G=>{const J=this.pluralResolver.getSuffixes(G,n);k&&n[`defaultValue${this.options.pluralSeparator}zero`]&&J.indexOf(`${this.options.pluralSeparator}zero`)<0&&J.push(`${this.options.pluralSeparator}zero`),J.forEach(B=>{q([G],a+B,n[`defaultValue${B}`]||x)})}):q(z,a,x))}p=this.extendTranslation(p,e,n,f,r),j&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${a}`),(j||U)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,U?p:void 0))}return i?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,n,r,i,s){var c,d;var a=this;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=mt(e)&&(((d=r==null?void 0:r.interpolation)==null?void 0:d.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(f){const y=e.match(this.interpolator.nestingRegexp);p=y&&y.length}let g=r.replace&&!mt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||i.usedLng,r),f){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;p<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,v=new Array(y),b=0;b<y;b++)v[b]=arguments[b];return(s==null?void 0:s[0])===v[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${n[0]}`),null):a.translate(...v,n)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=mt(o)?[o]:o;return e!=null&&(l!=null&&l.length)&&r.applyPostProcessor!==!1&&(e=wce.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return mt(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),d=c.key;i=d;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&!mt(n.count),g=p&&!n.ordinal&&n.count===0,y=n.context!==void 0&&(mt(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(b=>{var C,S;this.isValidLookup(r)||(o=b,!yG[`${v[0]}-${b}`]&&((C=this.utils)!=null&&C.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(yG[`${v[0]}-${b}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(R=>{var k;if(this.isValidLookup(r))return;a=R;const w=[d];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(w,d,R,b,n);else{let x;p&&(x=this.pluralResolver.getSuffix(R,n.count,n));const L=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(w.push(d+x),n.ordinal&&x.indexOf(N)===0&&w.push(d+x.replace(N,this.options.pluralSeparator)),g&&w.push(d+L)),y){const D=`${d}${this.options.contextSeparator}${n.context}`;w.push(D),p&&(w.push(D+x),n.ordinal&&x.indexOf(N)===0&&w.push(D+x.replace(N,this.options.pluralSeparator)),g&&w.push(D+L))}}let I;for(;I=w.pop();)this.isValidLookup(r)||(s=I,r=this.getResource(R,b,I,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!mt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class CG{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Dl.create("languageUtils")}getScriptPartFromCode(e){if(e=u9(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=u9(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(mt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),mt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return mt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):mt(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const bG={zero:0,one:1,two:2,few:3,many:4,other:5},EG={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Nze{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Dl.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=u9(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),EG;if(!e.match(/-|_/))return EG;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,n)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>bG[i]-bG[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const SG=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Rze(t,e,n);return!s&&i&&mt(n)&&(s=EI(t,n,r),s===void 0&&(s=EI(e,n,r))),s},JS=t=>t.replace(/\$/g,"$$$$");class Dze{constructor(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Dl.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:v,nestingOptionsSeparator:b,maxReplaces:C,alwaysFormat:S}=e.interpolation;this.escape=n!==void 0?n:xze,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Kf(s):a||"{{",this.suffix=o?Kf(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Kf(p):g||Kf("$t("),this.nestingSuffix=y?Kf(y):v||Kf(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=C||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var g;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=y=>{if(y.indexOf(this.formatSeparator)<0){const S=SG(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...i,...n,interpolationkey:y}):S}const v=y.split(this.formatSeparator),b=v.shift().trim(),C=v.join(this.formatSeparator).trim();return this.format(SG(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),C,r,{...i,...n,interpolationkey:b})};this.resetRegExp();const d=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((g=i==null?void 0:i.interpolation)==null?void 0:g.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>JS(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?JS(this.escape(y)):JS(y)}].forEach(y=>{for(o=0;s=y.regex.exec(e);){const v=s[1].trim();if(a=c(v),a===void 0)if(typeof d=="function"){const C=d(e,s,i);a=mt(C)?C:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))a="";else if(f){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!mt(a)&&!this.useRawValueToEscape&&(a=fG(a));const b=y.safeValue(a);if(e=e.replace(s[0],b),f?(y.regex.lastIndex+=a.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const f=l.split(new RegExp(`${d}[ ]*{`));let p=`{${f[1]}`;l=f[0],p=this.interpolate(p,a);const g=p.match(/'/g),y=p.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),c&&(a={...c,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${d}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&!mt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const d=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=d.shift(),l=d,c=!0}if(s=n(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!mt(s))return s;mt(s)||(s=fG(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const Uze=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Zf=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=t(u9(r),i),e[a]=o),o(n)}};class Fze{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Dl.create("formatter"),this.options=e,this.formats={number:Zf((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:Zf((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:Zf((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:Zf((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:Zf((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Zf(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{var f;const{formatName:c,formatOptions:d}=Uze(l);if(this.formats[c]){let p=o;try{const g=((f=i==null?void 0:i.formatParams)==null?void 0:f[i.interpolationkey])||{},y=g.locale||g.lng||i.locale||i.lng||r;p=this.formats[c](o,y,{...d,...i,...g})}catch(g){this.logger.warn(g)}return p}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const jze=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Hze extends E_{constructor(e,n,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Dl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,n,r,i){const s={},a={},o={},l={};return e.forEach(c=>{let d=!0;n.forEach(f=>{const p=`${c}|${f}`;!r.reload&&this.store.hasResourceBundle(c,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,d=!1,a[p]===void 0&&(a[p]=!0),s[p]===void 0&&(s[p]=!0),l[f]===void 0&&(l[f]=!0)))}),d||(o[c]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],a=i[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{Tze(l.loaded,[s],a),jze(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const d=l.loaded[c];d.length&&d.forEach(f=>{o[c][f]===void 0&&(o[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,a)},s);return}a(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(d=>o(null,d)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,n,o)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();mt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),mt(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,n,r,i,s){var l,c,d,f,p;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((f=(d=this.services)==null?void 0:d.utils)!=null&&f.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((p=this.backend)!=null&&p.create){const g={...a,isUpdate:s},y=this.backend.create.bind(this.backend);if(y.length<6)try{let v;y.length===5?v=y(e,n,r,i,g):v=y(e,n,r,i),v&&typeof v.then=="function"?v.then(b=>o(null,b)).catch(o):o(null,v)}catch(v){o(v)}else y(e,n,r,i,o,g)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const wG=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),mt(t[1])&&(e.defaultValue=t[1]),mt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),kG=t=>{var e,n;return mt(t.ns)&&(t.ns=[t.ns]),mt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),mt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},s7=()=>{},$ze=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class qg extends E_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=kG(e),this.services={},this.logger=Dl,this.modules={external:[]},$ze(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(mt(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=wG();this.options={...i,...this.options,...kG(n)},this.options.interpolation={...i.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Dl.init(s(this.modules.logger),this.options):Dl.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Fze;const f=new CG(this.options);this.store=new vG(this.options.resources,this.options);const p=this.services;p.logger=Dl,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new Nze(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(p.formatter=s(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new Dze(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new Hze(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var y=arguments.length,v=new Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];e.emit(g,...v)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new h9(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,v=new Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];e.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=s7),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=K3(),c=()=>{const d=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(f,p)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s7;const i=mt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const i=K3();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=s7),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&wce.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=K3();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},o=l=>{var d,f;!e&&!l&&this.services.languageDetector&&(l=[]);const c=mt(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),(f=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||f.call(d,c)),this.loadResources(c,p=>{a(p,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,n,r){var i=this;const s=function(a,o){let l;if(typeof o!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),f=2;f<c;f++)d[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([a,o].concat(d))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const p=i.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(y=>`${l.keyPrefix}${p}${y}`):g=l.keyPrefix?`${l.keyPrefix}${p}${a}`:a,i.t(g,l)};return mt(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...n)}exists(){var i;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const o=n.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,n){const r=K3();return this.options.ns?(mt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=K3();mt(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new CG(wG());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new qg(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s7;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new qg(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},Object.keys(l[c]).reduce((d,f)=>(d[f]={...l[c][f]},d),{})),{});s.store=new vG(o,i),s.services.resourceStore=s.store}return s.translator=new h9(s.services,i),s.translator.on("*",function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];s.emit(o,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ii=qg.createInstance();Ii.createInstance=qg.createInstance;Ii.createInstance;Ii.dir;Ii.init;Ii.loadResources;Ii.reloadResources;Ii.use;Ii.changeLanguage;Ii.getFixedT;const Zo=Ii.t;Ii.exists;Ii.setDefaultNamespace;Ii.hasLoadedNamespace;Ii.loadNamespaces;Ii.loadLanguages;var fO=(t=>(t.MISSING_MATRIX_RTC_FOCUS="MISSING_MATRIX_RTC_FOCUS",t.CONNECTION_LOST_ERROR="CONNECTION_LOST_ERROR",t.MEMBERSHIP_MANAGER_UNRECOVERABLE="MEMBERSHIP_MANAGER_UNRECOVERABLE",t.INSUFFICIENT_CAPACITY_ERROR="INSUFFICIENT_CAPACITY_ERROR",t.E2EE_NOT_SUPPORTED="E2EE_NOT_SUPPORTED",t.OPEN_ID_ERROR="OPEN_ID_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t))(fO||{}),E6=(t=>(t.CONFIGURATION_ISSUE="CONFIGURATION_ISSUE",t.NETWORK_CONNECTIVITY="NETWORK_CONNECTIVITY",t.RTC_SESSION_FAILURE="RTC_SESSION_FAILURE",t.CLIENT_CONFIGURATION="CLIENT_CONFIGURATION",t.UNKNOWN="UNKNOWN",t))(E6||{});class tc extends Error{constructor(e,n,r,i,s){super(e,{cause:s}),this.localisedTitle=e,this.localisedMessage=i,this.category=r,this.code=n}}class Vze extends tc{constructor(e){super(Zo("error.call_is_not_supported"),"MISSING_MATRIX_RTC_FOCUS","CONFIGURATION_ISSUE",Zo("error.matrix_rtc_focus_missing",{domain:e,brand:"Element Call",errorCode:"MISSING_MATRIX_RTC_FOCUS"})),this.domain=e}}class kce extends tc{constructor(){super(Zo("error.connection_lost"),"CONNECTION_LOST_ERROR","NETWORK_CONNECTIVITY",Zo("error.connection_lost_description"))}}class Bze extends tc{constructor(e,n){super("RTCSession Error",e,"RTC_SESSION_FAILURE",n)}}class qze extends tc{constructor(){super(Zo("error.e2ee_unsupported"),"E2EE_NOT_SUPPORTED","CLIENT_CONFIGURATION",Zo("error.e2ee_unsupported_description"))}}class mO extends tc{constructor(e){super(Zo("error.generic"),"UNKNOWN_ERROR","UNKNOWN",e.message,e)}}class Tce extends tc{constructor(e){super(Zo("error.generic"),"OPEN_ID_ERROR","CONFIGURATION_ISSUE",void 0,e)}}class Gze extends tc{constructor(){super(Zo("error.insufficient_capacity"),"INSUFFICIENT_CAPACITY_ERROR","UNKNOWN",Zo("error.insufficient_capacity_description"))}}function Kze(t,e){return t===void 0&&e===void 0?!0:t===void 0||e===void 0?!1:t.jwt===e.jwt&&t.url===e.url}function Zze(t,e){const[n,r]=u.useState(void 0),i=Eze(e),{showErrorBoundary:s}=Sze();return u.useEffect(()=>{i?zze(t,i).then(a=>{r(a)},a=>{s(new Tce(a)),A.error("Failed to get SFU config",a)}):r(void 0)},[t,i,s]),n}async function zze(t,e){let n;try{n=await BVe(async()=>t.getOpenIdToken())}catch(r){throw new Tce(r instanceof Error?r:new Error("Unknown error"))}A.debug("Got openID token",n);try{A.info(`Trying to get JWT from call's active focus URL of ${e.livekit_service_url}...`);const r=await Wze(t,e.livekit_service_url,e.livekit_alias,n);return A.info("Got JWT from call's active focus URL."),r}catch(r){A.warn(`Failed to get JWT from RTC session's active focus URL of ${e.livekit_service_url}.`,r);return}}async function Wze(t,e,n,r){try{const i=await fetch(e+"/sfu/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:n,openid_token:r,device_id:t.getDeviceId()})});if(!i.ok)throw new Error("SFU Config fetch failed with status code "+i.status);return await i.json()}catch(i){throw new Error("SFU Config fetch failed with exception "+i)}}class Yze{constructor(e=!1){this.aborted=e}abort(){this.aborted=!0}isAborted(){return this.aborted}}var SI=(t=>(t.ECSwitchingFocus="ec_switching_focus",t.ECWaiting="ec_waiting",t))(SI||{});function a7(t){return!!(t!=null&&t.url)&&!!(t!=null&&t.jwt)}async function Jze(t,e,n,r,i){if(t.localParticipant.getTrackPublication(ue.Source.Microphone)){A.warn("Pre-creating audio track but participant already appears to have an microphone track: this shouldn't happen!"),$ve("Pre-creating audio track but participant already appears to have an microphone track!");return}A.info("Pre-creating microphone track");let s;try{const a=await t.localParticipant.createTracks({audio:{deviceId:r}});if(a.length<1?A.info("Tried to pre-create local audio track but got no tracks"):s=a[0],i.isAborted()){A.info("[Lifecycle] Signal Aborted: Pre-created audio track but connection aborted"),s==null||s.stop();return}A.info("Pre-created microphone track")}catch(a){A.error("Failed to pre-create microphone track",a)}if(!n&&(await(s==null?void 0:s.mute()),i.isAborted())){A.info("[Lifecycle] Signal Aborted: Pre-created audio track but connection aborted"),s==null||s.stop();return}if(t.localParticipant.getTrackPublication(ue.Source.Microphone)){A.warn("Pre-created audio track but participant already appears to have an microphone track: this shouldn't happen!"),s==null||s.stop();return}A.info("[Lifecycle] Connecting & publishing");try{if(await Rce(t,e,s,[]),i.isAborted()){A.info("[Lifecycle] Signal Aborted: Connected but operation was cancelled. Force disconnect"),t==null||t.disconnect().catch(a=>{A.error("Failed to disconnect from SFU",a)});return}}catch(a){throw s==null||s.stop(),A.debug("Stopped precreated audio tracks."),a}}async function Rce(t,e,n,r){const i=It.instance.eventCallConnectDuration;i.cacheConnectStart(),t.once(le.SignalConnected,i.cacheWsConnect);try{A.info(`[Lifecycle] Connecting to livekit room ${e.url} ...`),await t.connect(e.url,e.jwt,{peerConnectionTimeout:window.peerConnectionTimeout??45e3,websocketTimeout:window.websocketTimeout??45e3}),A.info("[Lifecycle] ... connected to livekit room")}catch(s){throw A.error("[Lifecycle] Failed to connect",s),s instanceof hn&&(s.status===503||s.status===200||s.status===429)?new Gze:s}t.off(le.SignalConnected,i.cacheWsConnect),i.track({log:!0}),n&&(A.info("Publishing precreated mic track"),await t.localParticipant.publishTrack(n,{source:ue.Source.Microphone})),A.info(`Publishing ${r.length} precreated screenshare tracks`);for(const s of r)t.localParticipant.publishTrack(s,{source:ue.Source.ScreenShare}).catch(a=>{A.error("Failed to publish screenshare track",a)})}function Qze(t,e,n,r){const[i,s]=u.useState(r&&n?n.state:"ec_waiting"),[a,o]=u.useState(!1),[l,c]=u.useState(!1),[d,f]=u.useState(null);if(d!==null)throw d;const p=u.useCallback(b=>{b==Rt.Connected&&o(!1),s(b)},[]);u.useEffect(()=>{const b=n;return n&&n.on(le.ConnectionStateChanged,p),()=>{b&&b.off(le.ConnectionStateChanged,p)}},[n,p]);const g=u.useCallback(async()=>{const b=[];for(const C of n.localParticipant.videoTrackPublications.values())if(C.track&&C.source==ue.Source.ScreenShare){const S=C.track.mediaStreamTrack.clone();S.enabled=!0,b.push(S)}o(!0),await(n==null?void 0:n.disconnect()),c(!0);try{await Rce(n,r,void 0,b)}finally{c(!1)}},[n,r]),y=u.useRef(Object.assign({},r)),v=u.useRef(new Set);return u.useEffect(()=>{const b=v.current;return()=>{b.forEach(C=>{C.abort()})}},[]),u.useEffect(()=>{var b;if(a7(r)&&a7(y.current)&&!Kze(y.current,r))A.info(`SFU config changed! URL was ${(b=y.current)==null?void 0:b.url} now ${r==null?void 0:r.url}`),g().catch(C=>{A.error("Failed to switch focus",C)});else if(!a7(y.current)&&a7(r)){c(!0);const C=new Yze;v.current.add(C),Jze(n,r,e,t,C).catch(S=>{S instanceof tc?f(S):S instanceof Error?f(new mO(S)):A.error("Failed to connect to SFU",S)}).finally(()=>{v.current.delete(C),c(!1)})}y.current=Object.assign({},r)},[r,n,t,e,g]),a?"ec_switching_focus":l?Rt.Connecting:i}class Xze extends tY{constructor(){super({ratchetWindowSize:10,keyringSize:256}),this.onEncryptionKeyChanged=(e,n,r)=>{crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveBits","deriveKey"]).then(i=>{var s;this.onSetEncryptionKey(i,r,n),A.debug(`Sent new key to livekit room=${(s=this.rtcSession)==null?void 0:s.room.roomId} participantId=${r} encryptionKeyIndex=${n}`)},i=>{var s;A.error(`Failed to create key material from buffer for livekit room=${(s=this.rtcSession)==null?void 0:s.room.roomId} participantId=${r} encryptionKeyIndex=${n}`,i)})}}setRTCSession(e){this.rtcSession&&this.rtcSession.off(xr.EncryptionKeyChanged,this.onEncryptionKeyChanged),this.rtcSession=e,this.rtcSession.on(xr.EncryptionKeyChanged,this.onEncryptionKeyChanged),this.rtcSession.reemitEncryptionKeys()}}function eWe(t,e,n,r){const{controlledAudioDevices:i}=Yo(),s=u.useMemo(()=>{if(r.kind!==Wt.NONE){if(r.kind===Wt.PER_PARTICIPANT)return A.info("Created MatrixKeyProvider (per participant)"),{keyProvider:new Xze,worker:new hG};if(r.kind===Wt.SHARED_KEY&&r.secret)return A.info("Created ExternalE2EEKeyProvider (shared key)"),{keyProvider:new L3e,worker:new hG}}},[r]);u.useEffect(()=>{r.kind===Wt.NONE||!s||(r.kind===Wt.PER_PARTICIPANT?s.keyProvider.setRTCSession(t):r.kind===Wt.SHARED_KEY&&r.secret&&s.keyProvider.setKey(r.secret).catch(C=>{A.error("Failed to set shared key for E2EE",C)}))},[s,r,t]);const a=u.useRef(e),o=u1(),l=u.useRef(o),{processor:c}=l_(),d=Xd(()=>c),f=u.useMemo(()=>({...YS,videoCaptureDefaults:{...YS.videoCaptureDefaults,deviceId:l.current.videoInput.selectedId,processor:d},audioCaptureDefaults:{...YS.audioCaptureDefaults,deviceId:l.current.audioInput.selectedId},audioOutput:{deviceId:l.current.audioOutput.selectedId},e2ee:s}),[s,d]),p=u.useRef(!1),g=u.useRef(!1),y=u.useRef({audio:a.current.audio.enabled,video:a.current.video.enabled}),v=u.useMemo(()=>{A.info("[LivekitRooms] Create LiveKit room with options",f);const C=new su(f);return C.setE2EEEnabled(r.kind!==Wt.NONE).catch(S=>{A.error("Failed to set E2EE enabled on room",S)}),C},[f,r]);$oe(Qe(Oh(C=>Ng(C.pipe(Ne(([S])=>S.localParticipant)),ue.Source.Camera).pipe(Ne(S=>{var w;const R=(w=S==null?void 0:S.publication)==null?void 0:w.track;return R instanceof lm?R:null})),[v])));const b=Qze(l.current.audioInput.selectedId,a.current.audio.enabled,v,n);return u.useEffect(()=>{if(v!==void 0&&b===Rt.Connected){const C=v.localParticipant;y.current={audio:e.audio.enabled,video:e.video.enabled};let S;(w=>{w[w.Microphone=0]="Microphone",w[w.Camera=1]="Camera"})(S||(S={}));const R=async(w,I)=>{var N,D,U,j;if(w>10){A.error("Stop trying to sync the input device with current mute state after 10 failed tries");return}let k,x,L;switch(I){case 0:k=C.isMicrophoneEnabled,x=y.current.audio,L=p.current;break;case 1:k=C.isCameraEnabled,x=y.current.video,L=g.current;break}if(k!==x&&!L)try{let $;switch(I){case 0:p.current=!0,$=await C.setMicrophoneEnabled(y.current.audio,v.options.audioCaptureDefaults),p.current=!1;break;case 1:g.current=!0,$=await C.setCameraEnabled(y.current.video,v.options.videoCaptureDefaults),g.current=!1;break}if($)await new Promise(Z=>setTimeout(Z,100)),await R(w+1,I);else throw new Error("track with new mute state could not be published")}catch($){$.name==="NotAllowedError"?(A.error("Fatal error while syncing mute state: resetting",$),I===0?(p.current=!1,(D=(N=e.audio).setEnabled)==null||D.call(N,!1)):(g.current=!1,(j=(U=e.video).setEnabled)==null||j.call(U,!1))):(A.error("Failed to sync audio mute state with LiveKit (will retry to sync in 1s):",$),setTimeout(()=>{R(w+1,I).catch(Z=>{A.error(`Failed to sync ${S[I]} mute state with LiveKit iterCount=${w+1}`,Z)})},1e3))}};R(0,0).catch(w=>{A.error("Failed to sync audio mute state with LiveKit",w)}),R(0,1).catch(w=>{A.error("Failed to sync video mute state with LiveKit",w)})}},[v,e,b]),u.useEffect(()=>{if(v!==void 0&&b===Rt.Connected&&!i){const C=(S,R)=>{var I,k,x,L;const w=R.selectedId;if(w==="default"&&S==="audioinput"&&((I=v.options.audioCaptureDefaults)==null?void 0:I.deviceId)==="default"){const N=(k=Array.from(v.localParticipant.audioTrackPublications.values()).find(D=>D.source===ue.Source.Microphone))==null?void 0:k.track;N&&N.mediaStreamTrack.readyState!=="ended"&&R.selectedGroupId!==N.mediaStreamTrack.getSettings().groupId&&((L=(x=v.localParticipant.getTrackPublication(ue.Source.Microphone))==null?void 0:x.audioTrack)==null||L.restartTrack().catch(D=>{A.error("Failed to restart audio device track",D)}))}else w!==void 0&&v.getActiveDevice(S)!==w&&v.switchActiveDevice(S,w).catch(N=>A.error(`Failed to sync ${S} device with LiveKit`,N))};C("audioinput",o.audioInput),C("audiooutput",o.audioOutput),C("videoinput",o.videoInput)}},[v,o,b,i]),{connState:b,livekitRoom:v}}function tWe(){u.useEffect(()=>{if("wakeLock"in navigator){let t=!0,e=null;const n=()=>{document.visibilityState==="visible"&&navigator.wakeLock.request("screen").then(r=>{e=r,t||e.release().catch(i=>A.warn("Can't release wake lock",i))},r=>{A.warn("Can't acquire wake lock",r)})};return n(),document.addEventListener("visibilitychange",n),()=>{t=!1,e!==null&&e.release().catch(r=>A.warn("Can't release wake lock",r)),document.removeEventListener("visibilitychange",n)}}},[])}const nWe="_toggle_7rnyy_15",rWe={toggle:nWe},iWe=({layout:t,setLayout:e,className:n,onTouchEnd:r})=>{const{t:i}=it(),s=u.useCallback(a=>e(a.target.value),[e]);return E.jsxs("div",{className:De(rWe.toggle,n),children:[E.jsx(Bi,{label:i("layout_spotlight_label"),children:E.jsx("input",{type:"radio",name:"layout",value:"spotlight",checked:t==="spotlight",onChange:s,onTouchEnd:r})}),E.jsx(xRe,{"aria-hidden":!0,width:24,height:24}),E.jsx(Bi,{label:i("layout_grid_label"),children:E.jsx("input",{type:"radio",name:"layout",value:"grid",checked:t==="grid",onChange:s,onTouchEnd:r})}),E.jsx(vRe,{"aria-hidden":!0,width:24,height:24})]})};let sWe=0;function aWe(){return(sWe++).toString()}class Ice extends f_{constructor(e){super(),this.media$=e,this.id=aWe()}}class oWe extends f_{constructor(e,n){super(),this.media$=e,this.maximised$=n}}function lWe(t,e){return{[Symbol.iterator](){const n=t[Symbol.iterator](),r=e[Symbol.iterator]();return{next(){let i;do{if(i=n.next(),!i.done&&i.value!==void 0)return i;const s=r.next();if(!s.done)return s}while(!i.done);return i}}}}}function o7(t){return t.map(e=>{var n;return((n=e.media.member)==null?void 0:n.rawDisplayName)??"[👻]"})}let S6=!1;ese.value$.subscribe(t=>S6=t);class cWe{get media(){return this.media$.value}set media(e){this.media$.next(e)}get maximised(){return this.maximised$.value}set maximised(e){this.maximised$.next(e)}constructor(e,n){this.media$=new qi(e),this.maximised$=new qi(n),this.vm=new oWe(this.media$,this.maximised$)}destroy(){this.vm.destroy()}}class TG{get media(){return this.media$.value}set media(e){this.media$.next(e)}constructor(e){this.media$=new qi(e),this.vm=new Ice(this.media$)}destroy(){this.vm.destroy()}}class f9{constructor(e,n,r){var i;this.spotlight=e,this.grid=n,this.generation=r,this.spotlightTile=(i=this.spotlight)==null?void 0:i.vm,this.gridTiles=this.grid.map(({vm:s})=>s),this.gridTilesByMedia=new Map(this.grid.map(({vm:s,media:a})=>[a,s]))}static empty(){return new f9(null,[],0)}from(e){return new uWe(this.spotlight,this.grid,(n,r)=>new f9(n,r,this.generation+1),e,this.generation)}}class uWe{constructor(e,n,r,i,s){var a;this.prevSpotlight=e,this.prevGrid=n,this.construct=r,this.visibleTiles=i,this.generation=s,this.spotlight=null,this.prevSpotlightSpeaker=((a=this.prevSpotlight)==null?void 0:a.media.length)===1&&"speaking"in this.prevSpotlight.media[0]&&this.prevSpotlight.media[0],this.prevGridByMedia=new Map(this.prevGrid.map((o,l)=>[o.media,[o,l]])),this.numGridEntries=0,this.stationaryGridEntries=new Array(this.prevGrid.length),this.visibleGridEntries=[],this.invisibleGridEntries=[]}registerSpotlight(e,n){if(S6&&A.debug(`[TileStore, ${this.generation}] register spotlight: ${e.map(r=>{var i;return((i=r.member)==null?void 0:i.rawDisplayName)??"[👻]"})}`),this.spotlight!==null)throw new Error("Spotlight already set");if(this.numGridEntries>0)throw new Error("Spotlight must be registered before grid tiles");this.prevSpotlight===null?this.spotlight=new cWe(e,n):(this.spotlight=this.prevSpotlight,this.spotlight.media=e,this.spotlight.maximised=n)}registerGridTile(e){var r;if(S6&&A.debug(`[TileStore, ${this.generation}] register grid tile: ${((r=e.member)==null?void 0:r.rawDisplayName)??"[👻]"}`),this.spotlight!==null){if(!e.local&&this.spotlight.media.includes(e))return;if(e===this.prevSpotlightSpeaker&&this.spotlight.media.length===1&&"speaking"in this.spotlight.media[0]&&this.prevSpotlightSpeaker!==this.spotlight.media[0]){const i=this.prevGridByMedia.get(this.spotlight.media[0]);if(i!==void 0){const[s,a]=i,o=a<this.visibleTiles,l=this.numGridEntries<this.visibleTiles;o===l?(this.stationaryGridEntries[a]=s,s.media=e,this.prevGridByMedia.delete(this.spotlight.media[0]),this.prevGridByMedia.set(e,i)):(l?this.visibleGridEntries:this.invisibleGridEntries).push(new TG(e)),this.numGridEntries++;return}}}const n=this.prevGridByMedia.get(e);if(n===void 0)(this.numGridEntries<this.visibleTiles?this.visibleGridEntries:this.invisibleGridEntries).push(new TG(e));else{const[i,s]=n,a=s<this.visibleTiles,o=this.numGridEntries<this.visibleTiles;a===o?this.stationaryGridEntries[s]=i:(o?this.visibleGridEntries:this.invisibleGridEntries).push(i)}this.numGridEntries++}build(){const e=[...lWe(this.stationaryGridEntries,[...this.visibleGridEntries,...this.invisibleGridEntries])];S6&&(A.debug(`[TileStore, ${this.generation}] stationary: ${o7(this.stationaryGridEntries)}`),A.debug(`[TileStore, ${this.generation}] visible: ${o7(this.visibleGridEntries)}`),A.debug(`[TileStore, ${this.generation}] invisible: ${o7(this.invisibleGridEntries)}`),A.debug(`[TileStore, ${this.generation}] result: ${o7(e)}`)),this.spotlight===null&&this.prevSpotlight!==null&&this.prevSpotlight.destroy();const n=new Set(e);for(const r of this.prevGrid)n.has(r)||r.destroy();return this.construct(this.spotlight,e)}}function dWe(t,e,n,r){const i=r.from(e);t.spotlight!==void 0&&i.registerSpotlight(t.spotlight,t.type==="spotlight-portrait");for(const a of t.grid)i.registerGridTile(a);const s=i.build();return[{type:t.type,spotlight:s.spotlightTile,grid:s.gridTiles,setVisibleTiles:n},s]}function hWe(t,e){const n=e.from(1);n.registerSpotlight(t.spotlight,!0),t.pip!==void 0&&n.registerGridTile(t.pip);const r=n.build();return[{type:t.type,spotlight:r.spotlightTile,pip:r.gridTiles[0]},r]}function fWe(t,e){const n=e.from(2);n.registerGridTile(t.local),n.registerGridTile(t.remote);const r=n.build();return[{type:t.type,local:r.gridTilesByMedia.get(t.local),remote:r.gridTilesByMedia.get(t.remote)},r]}function mWe(t,e){const n=e.from(0);n.registerSpotlight(t.spotlight,!0);const r=n.build();return[{type:t.type,spotlight:r.spotlightTile},r]}function pWe(t){const e=t.pipe(Pl());return e.pipe(IUe(n=>Rg(Cd(n?1e3:6e4),e.pipe(Bo(r=>r!==n)))),gn(!1),Pl())}function RG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const Z3=new Map;function wI(t){if(Z3.has(t))return Z3.get(t);const e=Sd(t);return Z3.size>500&&Z3.clear(),Z3.set(t,e),e}function gWe(t,e,n){const{rawDisplayName:r,userId:i}=t;if(!r||r===i)return!1;const s=wI(r);return s?/@.+:.+/.test(r)||/[\u200E\u200F\u202A-\u202F]/.test(r)?!0:e.map(a=>a.sender&&n.getMember(a.sender)).filter(a=>!!a).filter(a=>a.userId!==i).some(a=>wI(xce(a,!1))===s):!1}function xce(t,e){const{rawDisplayName:n,userId:r}=t;if(!n||n===r)return r;const i=R6(n);return e?i+" ("+r+")":wI(n)?i:r}const vWe=3e3,yWe=3,QS=4e3;class l7{constructor(e,n,r,i,s,a,o,l){this.id=e,this.scope=new Dle,this.participant$=new qi(r),r!=null&&r.isLocal?this.vm=new Om(this.id,n,this.participant$.asObservable(),i,s,a,o,l):this.vm=new PKe(e,n,this.participant$.asObservable(),i,s,a,o,l),this.speaker$=pWe(this.vm.speaking$).pipe(this.scope.state()),this.presenter$=this.participant$.pipe(Ft(c=>(c&&LP(c,se.TrackPublished,se.TrackUnpublished,se.LocalTrackPublished,se.LocalTrackUnpublished).pipe(Ne(d=>d.isScreenShareEnabled)))??Ot(!1)),this.scope.state())}updateParticipant(e){this.participant$.value!==e&&this.participant$.next(e)}destroy(){this.scope.end(),this.vm.destroy()}}class IG{constructor(e,n,r,i,s,a){this.participant$=new qi(r),this.vm=new v2(e,n,this.participant$.asObservable(),i,s,a,r.isLocal)}destroy(){this.vm.destroy()}}function xG(t,e){let n=t.sender+":"+t.deviceId;if(!t.sender)return{id:n,member:void 0};t.sender===e.client.getUserId()&&t.deviceId===e.client.getDeviceId()&&(n="local");const r=e.getMember(t.sender)??void 0;return{id:n,member:r}}class _We extends f_{constructor(e,n,r,i,s,a){super(),this.matrixRTCSession=e,this.livekitRoom=n,this.encryptionSystem=r,this.connectionState$=i,this.handsRaisedSubject$=s,this.reactionsSubject$=a,this.localVideo$=Ng(Ot(this.livekitRoom.localParticipant),ue.Source.Camera).pipe(Ne(o=>{var c;const l=(c=o==null?void 0:o.publication)==null?void 0:c.track;return l instanceof lm?l:null})),this.rawRemoteParticipants$=zje(this.livekitRoom).pipe(this.scope.state()),this.remoteParticipantHolds$=this.connectionState$.pipe(qUe(this.rawRemoteParticipants$),b4(([o,l])=>o===SI.ECSwitchingFocus?$5(Ot({hold:l}),vUe([Cd(vWe),this.connectionState$.pipe(Bo(c=>c!==SI.ECSwitchingFocus),OR(1))]).pipe(Ne(()=>({unhold:l})))):H5),fI([],(o,l)=>"hold"in l?[l.hold,...o]:o.filter(c=>c!==l.unhold))),this.remoteParticipants$=Bn([this.rawRemoteParticipants$,this.remoteParticipantHolds$],(o,l)=>{const c=[...o],d=new Set(c.map(f=>f.identity));for(const f of l)for(const p of f)d.has(p.identity)||(c.push(p),d.add(p.identity));return c}),this.memberDisplaynames$=Rg(Nl(this.matrixRTCSession,xr.MembershipsChanged),Nl(this.matrixRTCSession.room,vt.Members)).pipe(gn(null),Ne(()=>{const o=new Map,{room:l,memberships:c}=this.matrixRTCSession;for(const d of c){const f=`${d.sender}:${d.deviceId}`,{member:p}=xG(d,l);if(!p){A.error("Could not find member for media id:",f);continue}const g=gWe(p,c,l);o.set(f,xce(p,g))}return o}),this.scope.state()),this.mediaItems$=Bn([this.remoteParticipants$,OP(this.livekitRoom.localParticipant),XUe.value$,Nl(this.matrixRTCSession,xr.MembershipsChanged).pipe(gn(null)),eFe.value$]).pipe(_c((o,[l,{participant:c},d,f,p])=>{const g=new Map((function*(){const b=this.matrixRTCSession.room;for(const C of this.matrixRTCSession.memberships){const{member:S,id:R}=xG(C,b),w=`${C.sender}:${C.deviceId}`;let I;R==="local"?I=c:I=l.find(k=>k.identity===R),S||A.error("Could not find member for media id: ",R);for(let k=0;k<1+d;k++){const x=`${R}:${k}`;let L=o.get(x);if(L&&L instanceof l7&&(L.updateParticipant(I),L.vm.member===void 0&&(L=void 0)),yield[x,L??new l7(x,S,I,this.encryptionSystem,this.livekitRoom,this.memberDisplaynames$.pipe(Ne(N=>N.get(w)??"[👻]")),this.handsRaised$.pipe(Ne(N=>{var D;return((D=N[w])==null?void 0:D.time)??null})),this.reactions$.pipe(Ne(N=>N[w]??void 0)))],I!=null&&I.isScreenShareEnabled){const N=`${x}:screen-share`;yield[N,o.get(N)??new IG(N,S,I,this.encryptionSystem,this.livekitRoom,this.memberDisplaynames$.pipe(Ne(D=>D.get(w)??"[👻]")))]}}}}).bind(this)()),y=p?new Map((function*(){for(const b of l)for(let C=0;C<1+d;C++){const S=b.identity+":"+C;if(!g.has(S)){const R=S;yield[R,o.get(R)??new l7(R,void 0,b,this.encryptionSystem,this.livekitRoom,this.memberDisplaynames$.pipe(Ne(w=>w.get(b.identity)??"[👻]")),Ot(null),Ot(null))]}}}).bind(this)()):new Map;y.size>0&&A.debug("Added NonMember items: ",y);const v=new Map([...y.entries(),...g.entries()]);for(const[b,C]of o)v.has(b)||C.destroy();return v},new Map),Ne(o=>[...o.values()]),MKe(o=>{for(const l of o)l.destroy()}),this.scope.state()),this.userMedia$=this.mediaItems$.pipe(Ne(o=>o.filter(l=>l instanceof l7))),this.memberChanges$=this.userMedia$.pipe(Ne(o=>o.map(l=>l.id))).pipe(_c((o,l)=>{const c=o.ids.filter(f=>!l.includes(f)),d=l.filter(f=>!o.ids.includes(f));return{ids:l,joined:d,left:c}},{ids:[],joined:[],left:[]})),this.screenShares$=this.mediaItems$.pipe(Ne(o=>o.filter(l=>l instanceof IG)),this.scope.state()),this.spotlightSpeaker$=this.userMedia$.pipe(Ft(o=>o.length===0?Ot([]):Bn(o.map(l=>l.vm.speaking$.pipe(Ne(c=>[l,c]))))),_c((o,l)=>{var f,p,g;const[c,d]=!(o!=null&&o.vm.local)&&l.find(([y])=>y===o)||[];return d?c:((f=l.find(([y,v])=>!y.vm.local&&v))==null?void 0:f[0])??c??((p=l.find(([y])=>!y.vm.local))==null?void 0:p[0])??((g=l.find(([y])=>y.vm.local))==null?void 0:g[0])},null),Ne(o=>(o==null?void 0:o.vm)??null),this.scope.state()),this.grid$=this.userMedia$.pipe(Ft(o=>{const l=o.map(c=>Bn([c.speaker$,c.presenter$,c.vm.videoEnabled$,c.vm.handRaised$,c.vm instanceof Om?c.vm.alwaysShow$:Ot(!1)],(d,f,p,g,y)=>{let v;return c.vm.local?v=y?0:6:f?v=1:d?v=2:g?v=3:p?v=4:v=5,[c,v]}));return l.length===0?Ot([]):Bn(l,(...c)=>c.sort(([,d],[,f])=>d-f).map(([d])=>d.vm))}),Pl(RG),this.scope.state()),this.spotlight$=this.screenShares$.pipe(Ft(o=>o.length>0?Ot(o.map(l=>l.vm)):this.spotlightSpeaker$.pipe(Ne(l=>l?[l]:[]))),Pl(RG),this.scope.state()),this.pip$=Bn([this.screenShares$,this.spotlightSpeaker$,this.mediaItems$]).pipe(Ft(([o,l,c])=>{if(o.length>0)return this.spotlightSpeaker$;if(!l||l.local)return Ot(null);const d=c.find(p=>p.vm instanceof Om),f=d==null?void 0:d.vm;return f?f.alwaysShow$.pipe(Ne(p=>p?f:null)):Ot(null)}),this.scope.state()),this.hasRemoteScreenShares$=this.spotlight$.pipe(Ne(o=>o.some(l=>!l.local&&l instanceof v2)),Pl()),this.pipEnabled$=i2.pipe(gn(!1)),this.naturalWindowMode$=Nl(window,"resize").pipe(gn(null),Ne(()=>{const o=window.innerHeight,l=window.innerWidth;return o<=400&&l<=340?"pip":o<=600?"flat":l<=600?"narrow":"normal"}),this.scope.state()),this.windowMode$=this.pipEnabled$.pipe(Ft(o=>o?Ot("pip"):this.naturalWindowMode$)),this.spotlightExpandedToggle$=new li,this.spotlightExpanded$=this.spotlightExpandedToggle$.pipe(fI(!1,o=>!o),this.scope.state()),this.gridModeUserSelection$=new li,this.gridMode$=this.gridModeUserSelection$.pipe(gn(null),Ft(o=>(o==="spotlight"?H5:Bn([this.hasRemoteScreenShares$,this.windowMode$]).pipe(FUe(o===null?0:1),Ne(([l,c])=>l||c==="flat"?"spotlight":"grid"))).pipe(gn(o??"grid"))),this.scope.state()),this.gridLayoutMedia$=Bn([this.grid$,this.spotlight$],(o,l)=>({type:"grid",spotlight:l.some(c=>c instanceof v2)?l:void 0,grid:o})),this.spotlightLandscapeLayoutMedia$=Bn([this.grid$,this.spotlight$],(o,l)=>({type:"spotlight-landscape",spotlight:l,grid:o})),this.spotlightPortraitLayoutMedia$=Bn([this.grid$,this.spotlight$],(o,l)=>({type:"spotlight-portrait",spotlight:l,grid:o})),this.spotlightExpandedLayoutMedia$=Bn([this.spotlight$,this.pip$],(o,l)=>({type:"spotlight-expanded",spotlight:o,pip:l??void 0})),this.oneOnOneLayoutMedia$=this.mediaItems$.pipe(Ne(o=>{var d,f;if(o.length!==2)return null;const l=(d=o.find(p=>p.vm.local))==null?void 0:d.vm,c=(f=o.find(p=>!p.vm.local))==null?void 0:f.vm;return!c||!l?null:{type:"one-on-one",local:l,remote:c}})),this.pipLayoutMedia$=this.spotlight$.pipe(Ne(o=>({type:"pip",spotlight:o}))),this.layoutMedia$=this.windowMode$.pipe(Ft(o=>{switch(o){case"normal":return this.gridMode$.pipe(Ft(l=>{switch(l){case"grid":return this.oneOnOneLayoutMedia$.pipe(Ft(c=>c===null?this.gridLayoutMedia$:Ot(c)));case"spotlight":return this.spotlightExpanded$.pipe(Ft(c=>c?this.spotlightExpandedLayoutMedia$:this.spotlightLandscapeLayoutMedia$))}}));case"narrow":return this.oneOnOneLayoutMedia$.pipe(Ft(l=>l===null?Bn([this.grid$,this.spotlight$],(c,d)=>c.length>yWe||d.some(f=>f instanceof v2)?this.spotlightPortraitLayoutMedia$:this.gridLayoutMedia$).pipe(jUe()):this.spotlightExpandedLayoutMedia$));case"flat":return this.gridMode$.pipe(Ft(l=>{switch(l){case"grid":return this.spotlightLandscapeLayoutMedia$;case"spotlight":return this.spotlightExpandedLayoutMedia$}}));case"pip":return this.pipLayoutMedia$}}),this.scope.state()),this.visibleTiles$=new li,this.setVisibleTiles=o=>this.visibleTiles$.next(o),this.layoutInternals$=Bn([this.layoutMedia$,this.visibleTiles$.pipe(gn(0),Pl())]).pipe(_c(({tiles:o},[l,c])=>{let d,f;switch(l.type){case"grid":case"spotlight-landscape":case"spotlight-portrait":[d,f]=dWe(l,c,this.setVisibleTiles,o);break;case"spotlight-expanded":[d,f]=hWe(l,o);break;case"one-on-one":[d,f]=fWe(l,o);break;case"pip":[d,f]=mWe(l,o);break}return{layout:d,tiles:f}},{layout:null,tiles:f9.empty()}),this.scope.state()),this.layout$=this.layoutInternals$.pipe(Ne(({layout:o})=>o),this.scope.state()),this.tileStoreGeneration$=this.layoutInternals$.pipe(Ne(({tiles:o})=>o.generation),this.scope.state()),this.showSpotlightIndicators$=this.layout$.pipe(Ne(o=>o.type!=="grid"),this.scope.state()),this.showSpeakingIndicators$=this.layout$.pipe(Ft(o=>{switch(o.type){case"spotlight-landscape":case"spotlight-portrait":return o.spotlight.media$.pipe(Ne(l=>l.some(c=>c instanceof v2)));case"spotlight-expanded":case"one-on-one":return Ot(!1);default:return Ot(!0)}}),this.scope.state()),this.toggleSpotlightExpanded$=this.windowMode$.pipe(Ft(o=>o==="normal"?this.layout$.pipe(Ne(l=>l.type==="spotlight-landscape"||l.type==="spotlight-expanded")):Ot(!1)),Pl(),Ne(o=>o?()=>this.spotlightExpandedToggle$.next():null),this.scope.state()),this.screenTap$=new li,this.controlsTap$=new li,this.screenHover$=new li,this.screenUnhover$=new li,this.showHeader$=this.windowMode$.pipe(Ne(o=>o!=="pip"&&o!=="flat"),this.scope.state()),this.showFooter$=this.windowMode$.pipe(Ft(o=>{switch(o){case"pip":return Ot(!1);case"normal":case"narrow":return Ot(!0);case"flat":return eKe()?Ot(!0):Rg(this.screenTap$.pipe(Ne(()=>"tap screen")),this.controlsTap$.pipe(Ne(()=>"tap controls")),this.screenHover$.pipe(Ne(()=>"hover"))).pipe(HUe((l,c)=>{switch(c){case"tap screen":return l?Ot(!1):Cd(QS).pipe(Ne(()=>!1),gn(!0));case"tap controls":return Cd(QS).pipe(Ne(()=>!1),gn(!0));case"hover":return TUe(Cd(QS),this.screenUnhover$.pipe(OR(1))).pipe(Ne(()=>!1),gn(!0))}},!1),gn(!1))}}),this.scope.state()),this.reactions$=this.reactionsSubject$.pipe(Ne(o=>Object.fromEntries(Object.entries(o).map(([l,{reactionOption:c}])=>[l,c])))),this.handsRaised$=this.handsRaisedSubject$.pipe(),this.visibleReactions$=ise.value$.pipe(Ft(o=>o?this.reactions$:Ot({})),_c((o,l)=>{var d;const c=[];for(const[f,p]of Object.entries(l)){const g=((d=o.find(y=>y.sender===f&&y.emoji))==null?void 0:d.startX)??Math.ceil(Math.random()*80)+10;c.push({sender:f,emoji:p.emoji,startX:g})}return c},[])),this.audibleReactions$=TP.value$.pipe(Ft(o=>o?this.reactions$:Ot({})),Ne(o=>Object.values(o).map(l=>l.name)),_c((o,l)=>({playing:l.filter(c=>o.playing.includes(c)||o.newSounds.includes(c)),newSounds:l.filter(c=>!o.playing.includes(c)&&!o.newSounds.includes(c))}),{playing:[],newSounds:[]}),Ne(o=>o.newSounds)),this.newHandRaised$=this.handsRaised$.pipe(Ne(o=>Object.keys(o).length),_c((o,l)=>({value:l,playSounds:l>o.value}),{value:0,playSounds:!1}),Bo(o=>o.playSounds)),this.newScreenShare$=this.screenShares$.pipe(Ne(o=>o.length),_c((o,l)=>({value:l,playSounds:l>o.value}),{value:0,playSounds:!1}),Bo(o=>o.playSounds))}setGridMode(e){this.gridModeUserSelection$.next(e)}tapScreen(){this.screenTap$.next()}tapControls(){this.controlsTap$.next()}hoverScreen(){this.screenHover$.next()}unhoverScreen(){this.screenUnhover$.next()}}function CWe(t,e,n){return Math.max(e,Math.min(t,n))}const fi={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function MG(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function PG(t,e,n,r=.15){return r===0?CWe(t,e,n):t<e?-MG(e-t,n-e,r)+e:t>n?+MG(t-n,n-e,r)+n:t}function bWe(t,[e,n],[r,i]){const[[s,a],[o,l]]=t;return[PG(e,s,a,r),PG(n,o,l,i)]}function EWe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SWe(t){var e=EWe(t,"string");return typeof e=="symbol"?e:String(e)}function Ji(t,e,n){return e=SWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(n),!0).forEach(function(r){Ji(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Mce={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function OG(t){return t?t[0].toUpperCase()+t.slice(1):""}const wWe=["enter","leave"];function kWe(t=!1,e){return t&&!wWe.includes(e)}function TWe(t,e="",n=!1){const r=Mce[t],i=r&&r[e]||e;return"on"+OG(t)+OG(i)+(kWe(n,i)?"Capture":"")}const RWe=["gotpointercapture","lostpointercapture"];function IWe(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=RWe.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function xWe(t,e=""){const n=Mce[t],r=n&&n[e]||e;return t+r}function S_(t){return"touches"in t}function Pce(t){return S_(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function MWe(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function PWe(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function Lce(t){return S_(t)?PWe(t)[0]:t}function LWe(t){return MWe(t).map(e=>e.identifier)}function XS(t){const e=Lce(t);return S_(t)?e.identifier:e.pointerId}function AG(t){const e=Lce(t);return[e.clientX,e.clientY]}function OWe(t){var e,n;const{scrollX:r,scrollY:i,scrollLeft:s,scrollTop:a}=t.currentTarget;return[(e=r??s)!==null&&e!==void 0?e:0,(n=i??a)!==null&&n!==void 0?n:0]}function AWe(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function m9(t,...e){return typeof t=="function"?t(...e):t}function NWe(){}function DWe(...t){return t.length===0?NWe:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function NG(t,e){return Object.assign({},e,t||{})}const UWe=32;class FWe{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?m9(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,AWe(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const k=n._delta.map(Math.abs);fi.addTo(n._distance,k)}this.axisIntent&&this.axisIntent(e);const[a,o]=n._movement,[l,c]=r.threshold,{_step:d,values:f}=n;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(a)>=l&&f[0]),d[1]===!1&&(d[1]=Math.abs(o)>=c&&f[1])):(d[0]===!1&&(d[0]=Math.abs(a)>=l&&Math.sign(a)*l),d[1]===!1&&(d[1]=Math.abs(o)>=c&&Math.sign(o)*c)),n.intentional=d[0]!==!1||d[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[k,x]=f;p[0]=d[0]!==!1?k-d[0]:0,p[1]=d[1]!==!1?x-d[1]:0}else p[0]=d[0]!==!1?a-d[0]:0,p[1]=d[1]!==!1?o-d[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const g=n.offset,y=n._active&&!n._blocked||n.active;y&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=m9(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,b]=n.offset,[[C,S],[R,w]]=n._bounds;n.overflow=[v<C?-1:v>S?1:0,b<R?-1:b>w?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const I=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=bWe(n._bounds,n.offset,I),n.delta=fi.sub(n.offset,g),this.computeMovement(),y&&(!n.last||s>UWe)){n.delta=fi.sub(n.offset,g);const k=n.delta.map(Math.abs);fi.addTo(n.distance,k),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[k[0]/s,k[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Xn(Xn(Xn({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function jWe([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class Oce extends FWe{constructor(...e){super(...e),Ji(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=fi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=fi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Pce(e)]:r.axisThreshold;n.axis=jWe(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const HWe=t=>t,DG=.15,Ace={enabled(t=!0){return t},eventOptions(t,e,n){return Xn(Xn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[DG,DG];case!1:return[0,0];default:return fi.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return fi.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||HWe},threshold(t){return fi.toVector(t,0)}},$We=0,_p=Xn(Xn({},Ace),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=$We){return t},bounds(t={}){if(typeof t=="function")return s=>_p.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),UG={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class VWe extends Oce{constructor(...e){super(...e),Ji(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=_p.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=XS(e),r._pointerActive=!0,this.computeValues(AG(e)),this.computeInitial(),n.preventScrollAxis&&Pce(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=XS(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=AG(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=fi.sub(s,n._values),this.computeValues(s)),fi.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=XS(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=n._distance;if(n.tap=s<=r.tapsThreshold&&a<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[o,l]=n._delta,[c,d]=n._movement,[f,p]=r.swipe.velocity,[g,y]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const b=Math.abs(o/n.timeDelta),C=Math.abs(l/n.timeDelta);b>f&&Math.abs(c)>g&&(n.swipe[0]=Math.sign(o)),C>p&&Math.abs(d)>y&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,BWe(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=UG[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,fi.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in UG&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function BWe(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const j4=typeof window<"u"&&window.document&&window.document.createElement;function Nce(){return j4&&"ontouchstart"in window}function qWe(){return Nce()||j4&&window.navigator.maxTouchPoints>1}function GWe(){return j4&&"onpointerdown"in window}function KWe(){return j4&&"exitPointerLock"in window.document}function ZWe(){try{return"constructor"in GestureEvent}catch{return!1}}const Da={isBrowser:j4,gesture:ZWe(),touch:Nce(),touchscreen:qWe(),pointer:GWe(),pointerLock:KWe()},zWe=250,WWe=180,YWe=.5,JWe=50,QWe=250,XWe=10,FG={mouse:0,touch:0,pen:8},eYe=Xn(Xn({},_p),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Da.pointerLock,Da.touch&&n?"touch":this.pointerLock?"mouse":Da.pointer&&!i?"pointer":Da.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?zWe:void 0,!(!Da.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=fi.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=YWe,distance:e=JWe,duration:n=QWe}={}){return{velocity:this.transform(fi.toVector(t)),distance:this.transform(fi.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return WWe;case!1:return 0;default:return t}},axisThreshold(t){return t?Xn(Xn({},FG),t):FG},keyboardDisplacement(t=XWe){return t}});Xn(Xn({},Ace),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Da.touch&&Da.gesture)return"gesture";if(Da.touch&&r)return"touch";if(Da.touchscreen){if(Da.pointer)return"pointer";if(Da.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=a=>{const o=NG(m9(n,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=NG(m9(r,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:a=>[i(a),s(a)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",fi.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Xn(Xn({},_p),{},{mouseOnly:(t=!0)=>t});class tYe extends Oce{constructor(...e){super(...e),Ji(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const n=this.state,r=OWe(e);n._delta=fi.sub(r,n._values),fi.addTo(n._movement,n._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const nYe=_p;Xn(Xn({},_p),{},{mouseOnly:(t=!0)=>t});const Dce=new Map,kI=new Map;function Uce(t){Dce.set(t.key,t.engine),kI.set(t.key,t.resolver)}const rYe={key:"drag",engine:VWe,resolver:eYe},iYe={key:"scroll",engine:tYe,resolver:nYe};function sYe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aYe(t,e){if(t==null)return{};var n=sYe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const oYe={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Da.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},lYe=["target","eventOptions","window","enabled","transform"];function w6(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=w6(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function cYe(t,e,n={}){const r=t,{target:i,eventOptions:s,window:a,enabled:o,transform:l}=r,c=aYe(r,lYe);if(n.shared=w6({target:i,eventOptions:s,window:a,enabled:o,transform:l},oYe),e){const d=kI.get(e);n[e]=w6(Xn({shared:n.shared},c),d)}else for(const d in c){const f=kI.get(d);f&&(n[d]=w6(Xn({shared:n.shared},c[d]),f))}return n}class Fce{constructor(e,n){Ji(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const a=this._listeners,o=xWe(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Xn(Xn({},l),s);e.addEventListener(o,i,c);const d=()=>{e.removeEventListener(o,i,c),a.delete(d)};return a.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class uYe{constructor(){Ji(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class dYe{constructor(e){Ji(this,"gestures",new Set),Ji(this,"_targetEventStore",new Fce(this)),Ji(this,"gestureEventStores",{}),Ji(this,"gestureTimeoutStores",{}),Ji(this,"handlers",{}),Ji(this,"config",{}),Ji(this,"pointerIds",new Set),Ji(this,"touchIds",new Set),Ji(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),hYe(this,e)}setEventIds(e){if(S_(e))return this.touchIds=new Set(LWe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=cYe(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const a of this.gestures){const o=this.config[a],l=jG(r,o.eventOptions,!!i);if(o.enabled){const c=Dce.get(a);new c(this,e,a).bind(l)}}const s=jG(r,n.eventOptions,!!i);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](Xn(Xn({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in r)r[s]=DWe(...r[s]);if(!i)return r;for(const s in r){const{device:a,capture:o,passive:l}=IWe(s);this._targetEventStore.add(i,a,"",r[s],{capture:o,passive:l})}}}}function zf(t,e){t.gestures.add(e),t.gestureEventStores[e]=new Fce(t,e),t.gestureTimeoutStores[e]=new uYe}function hYe(t,e){e.drag&&zf(t,"drag"),e.wheel&&zf(t,"wheel"),e.scroll&&zf(t,"scroll"),e.move&&zf(t,"move"),e.pinch&&zf(t,"pinch"),e.hover&&zf(t,"hover")}const jG=(t,e,n)=>(r,i,s,a={},o=!1)=>{var l,c;const d=(l=a.capture)!==null&&l!==void 0?l:e.capture,f=(c=a.passive)!==null&&c!==void 0?c:e.passive;let p=o?r:TWe(r,i,d);n&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(s)};function jce(t,e={},n,r){const i=be.useMemo(()=>new dYe(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),be.useEffect(i.effect.bind(i)),be.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function fYe(t,e){return Uce(rYe),jce({drag:t},e||{},"drag")}function mYe(t,e){return Uce(iYe),jce({scroll:t},e||{},"scroll")}const pYe="_grid_1xkxw_15",gYe="_slot_1xkxw_23",ew={grid:pYe,slot:gYe},vYe="_tile_1f4n6_15",yYe="_draggable_1f4n6_15",HG={tile:vYe,draggable:yYe},Hce=u.memo(({id:t,onDrag:e,targetWidth:n,targetHeight:r,model:i,Tile:s,opacity:a,scale:o,zIndex:l,x:c,y:d,width:f,height:p})=>{const g=u.useRef(null);return fYe(y=>e==null?void 0:e.current(t,y),{target:g,filterTaps:!0,preventScroll:!0}),E.jsx(s,{ref:g,className:De(HG.tile,{[HG.draggable]:e}),style:{opacity:a,scale:o,zIndex:l,x:c,y:d,width:f,height:p},targetWidth:n,targetHeight:r,model:i})});Hce.displayName="TileWrapper";const _Ye=Hce,CYe=()=>vy("(prefers-reduced-motion)");function $ce(t,e){if(!(t.offsetParent instanceof HTMLElement)||t.offsetParent===e)return{x:t.offsetLeft,y:t.offsetTop};{const n=$ce(t.offsetParent,e);return n.x+=t.offsetLeft,n.y+=t.offsetTop,n}}const Vce=u.createContext(null);function Bce(){const t=u.useContext(Vce);if(t===null)throw new Error("useUpdateLayout called outside a Grid layout context");return t}function ql(){const{setGeneration:t}=Bce();u.useEffect(()=>t(e=>e===null?0:e+1))}function pO(t){const{setVisibleTilesCallback:e}=Bce();u.useEffect(()=>e(()=>t),[t,e]),u.useEffect(()=>()=>e(null),[e])}const bYe=Nl(window,"resize").pipe(gn(null),Ne(()=>window.innerHeight));function $G({model:t,Layout:e,Tile:n,className:r,style:i}){const[s,a]=F0(),[o,l]=u.useState(null),c=F4(s,l),d=Qe(bYe),[f,p]=u.useState(null),[g,y]=u.useState(null),[v,b]=u.useState(null),C=Xd(()=>new Map),S=CYe(),R=u.useMemo(()=>function({id:z,model:K,onDrag:q,style:G,className:J,...B}){const Q=u.useRef(null);return u.useEffect(()=>(C.set(z,{id:z,model:K,onDrag:q}),()=>void C.delete(z)),[z,K,q]),E.jsx("div",{ref:Q,className:De(J,ew.slot),"data-id":z,style:G,...B})},[C]),w=u.useMemo(()=>u.memo(u.forwardRef(function({Layout:z,...K},q){return E.jsx(z,{...K,ref:q})})),[]),I=u.useMemo(()=>({setGeneration:y,setVisibleTilesCallback:b}),[b]),k=u.useMemo(()=>{const V=[];if(o!==null&&f!==null){const z=f.getElementsByClassName(ew.slot);for(const K of z){const q=K.getAttribute("data-id");K.offsetWidth>0&&K.offsetHeight>0&&V.push({...C.get(q),...$ce(K,o),width:K.offsetWidth,height:K.offsetHeight})}}return V},[o,f,C,a,g]),x=u.useMemo(()=>Math.min(a.bottom,d)-a.top,[a,d]);u.useEffect(()=>{v==null||v(k.filter(V=>V.y+V.height<=x).length)},[k,v,x]);const L=u.useRef(null),[N,D]=HZe(k,()=>({key:({id:V})=>V,from:({x:V,y:z,width:K,height:q})=>({opacity:0,scale:0,zIndex:1,x:V,y:z,width:K,height:q,immediate:S}),enter:{opacity:1,scale:1,immediate:S},update:({id:V,x:z,y:K,width:q,height:G})=>{var J;return V===((J=L.current)==null?void 0:J.tileId)?null:{x:z,y:K,width:q,height:G,immediate:S}},leave:{opacity:0,scale:0,immediate:S},config:{mass:.7,tension:252,friction:25}}));u.useEffect(()=>{D.start().forEach(V=>void V.catch(A.error))},[k,D]);const U=(V,z)=>{var B;const{tileId:K,tileX:q,tileY:G}=L.current,J=k.find(Q=>Q.id===K);(B=D.current.find(Q=>Q.item.id===K))==null||B.start(V?{scale:1,zIndex:1,x:J.x,y:J.y,width:J.width,height:J.height,immediate:S||(Q=>Q==="zIndex"),delay:Q=>Q==="zIndex"?500:0}:{scale:1.1,zIndex:2,x:q,y:G,immediate:S||(Q=>Q==="zIndex"||Q==="x"||Q==="y")}).catch(A.error),V&&z({x:q,y:G,xRatio:q/(a.width-J.width),yRatio:G/(a.height-J.height)})},j=(V,{tap:z,initial:[K,q],delta:[G,J],last:B})=>{if(!z){const Q=D.current.find(ve=>ve.item.id===V),pe=C.get(Q.item.id).onDrag;if(pe!=null){if(L.current===null){const ve=Q.get();L.current={tileId:V,tileX:ve.x,tileY:ve.y,cursorX:K-a.x,cursorY:q-a.y+Z.current}}L.current.tileX+=G,L.current.tileY+=J,L.current.cursorX+=G,L.current.cursorY+=J,U(B,pe),B&&(L.current=null)}}},$=u.useRef(j);$.current=j;const Z=u.useRef(0);return mYe(({xy:[,V],delta:[,z]})=>{Z.current=V,L.current!==null&&(L.current.tileY+=z,L.current.cursorY+=z,U(!1,C.get(L.current.tileId).onDrag))},{target:o??void 0}),E.jsxs("div",{ref:c,className:De(r,ew.grid),style:i,children:[E.jsx(Vce.Provider,{value:I,children:E.jsx(w,{ref:p,Layout:e,model:t,Slot:R})}),N((V,{id:z,model:K,onDrag:q,width:G,height:J})=>E.jsx(_Ye,{id:z,onDrag:q?$:null,targetWidth:G,targetHeight:J,model:K,Tile:n,...V},z))]})}const EYe="_contents_11zqk_15",SYe="_tile_11zqk_49",wYe="_maximised_11zqk_49",kYe="_item_11zqk_57",TYe="_snap_11zqk_71",RYe="_advance_11zqk_79",IYe="_back_11zqk_151",xYe="_next_11zqk_159",MYe="_expand_11zqk_167",PYe="_indicators_11zqk_255",LYe="_show_11zqk_279",ta={contents:EYe,tile:SYe,maximised:wYe,item:kYe,snap:TYe,advance:RYe,back:IYe,next:xYe,expand:MYe,indicators:PYe,show:LYe},gO=(t,e)=>{const n=u.useRef(void 0);n.current===void 0&&(n.current=t());const r=u.useRef(void 0),[,i]=u.useState(0);return(r.current===void 0||e.length!==r.current.length||e.some((s,a)=>!Object.is(s,r.current[a])))&&(n.current=t(n.current)),r.current=e,[n.current,u.useCallback(s=>{typeof s=="function"?n.current=s(n.current):n.current=s,i(a=>a+1)},[i])]},qce=u.forwardRef(({vm:t,...e},n)=>{const r=Qe(t.mirror$);return E.jsx(U4,{ref:n,mirror:r,...e})});qce.displayName="SpotlightLocalUserMediaItem";const Gce=u.forwardRef(({vm:t,...e},n)=>{const r=Qe(t.videoEnabled$),i=Qe(t.cropVideo$),s={ref:n,videoEnabled:r,videoFit:i?"cover":"contain",...e};return t instanceof Om?E.jsx(qce,{vm:t,...s}):E.jsx(U4,{mirror:!1,...s})});Gce.displayName="SpotlightUserMediaItem";const Kce=u.forwardRef(({vm:t,targetWidth:e,targetHeight:n,intersectionObserver$:r,snap:i,"aria-hidden":s},a)=>{const o=u.useRef(null),l=F4(o,a),c=Qe(t.displayname$),d=Qe(t.video$),f=Qe(t.unencryptedWarning$),p=Qe(t.encryptionStatus$);u.useEffect(()=>{const y=o.current;let v=null;const b=r.subscribe(C=>{v==null||v.unobserve(y),C.observe(y),v=C});return()=>{b.unsubscribe(),v==null||v.unobserve(y)}},[r]);const g={ref:l,"data-id":t.id,className:De(ta.item,{[ta.snap]:i}),targetWidth:e,targetHeight:n,video:d,member:t.member,unencryptedWarning:f,displayName:c,encryptionStatus:p,"aria-hidden":s,localParticipant:t.local};return t instanceof v2?E.jsx(U4,{videoEnabled:!0,videoFit:"contain",mirror:!1,...g}):E.jsx(Gce,{vm:t,...g})});Kce.displayName="SpotlightItem";const TI=u.forwardRef(({vm:t,expanded:e,onToggleExpanded:n,targetWidth:r,targetHeight:i,showIndicators:s,className:a,style:o},l)=>{var j;const{t:c}=it(),[d,f]=QUe(null),p=F4(d,l),g=Qe(t.maximised$),y=Qe(t.media$),[v,b]=u.useState((j=y[0])==null?void 0:j.id),C=nu(y),S=nu(v),R=y.findIndex($=>$.id===v),w=R>0,I=R!==-1&&R<y.length-1,k=Xd(()=>f.pipe(Ne($=>new IntersectionObserver(Z=>{const V=Z.find(z=>z.isIntersecting);V!==void 0&&b(V.target.getAttribute("data-id"))},{root:$,threshold:.5})))),[x,L]=gO($=>$==null||$===v||y.every(Z=>Z.id!==$)?null:$,[v]),N=u.useCallback(()=>{const $=C.current,Z=$.findIndex(V=>V.id===S.current);Z>0&&L($[Z-1].id)},[S,C,L]),D=u.useCallback(()=>{const $=C.current,Z=$.findIndex(V=>V.id===S.current);Z!==-1&&Z!==$.length-1&&L($[Z+1].id)},[S,C,L]),U=e?pRe:vne;return E.jsxs(yce.div,{ref:p,className:De(a,ta.tile,{[ta.maximised]:g}),style:o,children:[w&&E.jsx("button",{className:De(ta.advance,ta.back),"aria-label":c("common.back"),onClick:N,children:E.jsx(HTe,{"aria-hidden":!0,width:24,height:24})}),E.jsx("div",{className:ta.contents,children:y.map($=>E.jsx(Kce,{vm:$,targetWidth:r,targetHeight:i,intersectionObserver$:k,snap:x===null||x===$.id,"aria-hidden":(x??v)!==$.id},$.id))}),n&&E.jsx("button",{className:De(ta.expand),"aria-label":c(e?"video_tile.collapse":"video_tile.expand"),onClick:n,children:E.jsx(U,{"aria-hidden":!0,width:20,height:20})}),I&&E.jsx("button",{className:De(ta.advance,ta.next),"aria-label":c("common.next"),onClick:D,children:E.jsx(Ute,{"aria-hidden":!0,width:24,height:24})}),!e&&E.jsx("div",{className:De(ta.indicators,{[ta.show]:s&&y.length>1}),children:y.map($=>E.jsx("div",{className:ta.item,"data-visible":$.id===v},$.id))})]})});TI.displayName="SpotlightTile";const OYe="_fixed_170i2_15",AYe="_scrolling_170i2_17",NYe="_slot_170i2_41",c7={fixed:OYe,scrolling:AYe,slot:NYe},DYe={inline:"end",block:"end"},UYe={inline:"end",block:"start"},VG=17/9,tw=4/3;function vO(t,e,n){const r=t<800?16:20,i=t*e,s=Math.pow(Math.sqrt(i)/8+125,2),a=Math.min(n,i/s);let o=Math.min(a,Math.round(Math.sqrt(t/e/tw*a))),l=a/o;a===n&&(l=Math.ceil(l),o=Math.ceil(n/l));let c=(t-(o+1)*r)/o,d=(e-(l-1)*r)/l;const f=c/d;return f>VG?c=d*VG:f<tw&&(d=c/tw),{tileWidth:c,tileHeight:d,gap:r,columns:o}}const FYe=({minBounds$:t,spotlightAlignment$:e})=>({scrollingOnTop:!1,fixed:u.forwardRef(function({model:r,Slot:i},s){ql();const a=Qe(Xd(()=>e.pipe(Pl((l,c)=>l.block===c.block&&l.inline===c.inline)))),o=u.useCallback(({xRatio:l,yRatio:c})=>e.next({block:c<.5?"start":"end",inline:l<.5?"start":"end"}),[]);return E.jsx("div",{ref:s,className:c7.fixed,children:r.spotlight&&E.jsx(i,{className:c7.slot,id:"spotlight",model:r.spotlight,onDrag:o,"data-block-alignment":a.block,"data-inline-alignment":a.inline})})}),scrolling:u.forwardRef(function({model:r,Slot:i},s){ql(),pO(r.setVisibleTiles);const{width:a,height:o}=Qe(t),{gap:l,tileWidth:c,tileHeight:d}=u.useMemo(()=>vO(a,o,r.grid.length),[a,o,r.grid.length]);return E.jsx("div",{ref:s,className:c7.scrolling,style:{width:a,"--gap":`${l}px`,"--width":`${Math.floor(c)}px`,"--height":`${Math.floor(d)}px`},children:r.grid.map(f=>E.jsx(i,{className:c7.slot,id:f.id,model:f},f.id))})})}),jYe="_layer_b3hh3_15",HYe="_container_b3hh3_27",$Ye="_local_b3hh3_35",VYe="_slot_b3hh3_61",u7={layer:jYe,container:HYe,local:$Ye,slot:VYe},BYe=({minBounds$:t,pipAlignment$:e})=>({scrollingOnTop:!1,fixed:u.forwardRef(function(r,i){return ql(),E.jsx("div",{ref:i})}),scrolling:u.forwardRef(function({model:r,Slot:i},s){ql();const{width:a,height:o}=Qe(t),l=Qe(e),{tileWidth:c,tileHeight:d}=u.useMemo(()=>vO(a,o,1),[a,o]),f=u.useCallback(({xRatio:p,yRatio:g})=>e.next({block:g<.5?"start":"end",inline:p<.5?"start":"end"}),[]);return E.jsx("div",{ref:s,className:u7.layer,children:E.jsx(i,{id:r.remote.id,model:r.remote,className:u7.container,style:{width:c,height:d},children:E.jsx(i,{className:De(u7.slot,u7.local),id:r.local.id,model:r.local,onDrag:f,"data-block-alignment":l.block,"data-inline-alignment":l.inline})})})})}),qYe="_layer_1mt3a_15",GYe="_spotlight_1mt3a_23",KYe="_pip_1mt3a_33",d7={layer:qYe,spotlight:GYe,pip:KYe},ZYe=({pipAlignment$:t})=>({scrollingOnTop:!0,fixed:u.forwardRef(function({model:n,Slot:r},i){return ql(),E.jsx("div",{ref:i,className:d7.layer,children:E.jsx(r,{className:d7.spotlight,id:"spotlight",model:n.spotlight})})}),scrolling:u.forwardRef(function({model:n,Slot:r},i){ql();const s=Qe(t),a=u.useCallback(({xRatio:o,yRatio:l})=>t.next({block:l<.5?"start":"end",inline:o<.5?"start":"end"}),[]);return E.jsx("div",{ref:i,className:d7.layer,children:n.pip&&E.jsx(r,{className:d7.pip,id:n.pip.id,model:n.pip,onDrag:a,"data-block-alignment":s.block,"data-inline-alignment":s.inline})})})}),zYe="_layer_wwwhr_15",WYe="_spotlight_wwwhr_37",YYe="_slot_wwwhr_55",JYe="_grid_wwwhr_67",mc={layer:zYe,spotlight:WYe,slot:YYe,grid:JYe},QYe=({minBounds$:t})=>({scrollingOnTop:!1,fixed:u.forwardRef(function({model:n,Slot:r},i){return ql(),Qe(t),E.jsxs("div",{ref:i,className:mc.layer,children:[E.jsx("div",{className:mc.spotlight,children:E.jsx(r,{className:mc.slot,id:"spotlight",model:n.spotlight})}),E.jsx("div",{className:mc.grid})]})}),scrolling:u.forwardRef(function({model:n,Slot:r},i){ql(),pO(n.setVisibleTiles),Qe(t);const s=Qe(n.spotlight.media$).length>1;return E.jsxs("div",{ref:i,className:mc.layer,children:[E.jsx("div",{className:De(mc.spotlight,{[mc.withIndicators]:s})}),E.jsx("div",{className:mc.grid,children:n.grid.map(a=>E.jsx(r,{className:mc.slot,id:a.id,model:a},a.id))})]})})}),XYe="_layer_9zsk4_15",eJe="_spotlight_9zsk4_33",tJe="_withIndicators_9zsk4_51",nJe="_slot_9zsk4_59",rJe="_grid_9zsk4_69",Qu={layer:XYe,spotlight:eJe,withIndicators:tJe,slot:nJe,grid:rJe},iJe=({minBounds$:t})=>({scrollingOnTop:!1,fixed:u.forwardRef(function({model:n,Slot:r},i){return ql(),E.jsx("div",{ref:i,className:Qu.layer,children:E.jsx("div",{className:Qu.spotlight,children:E.jsx(r,{className:Qu.slot,id:"spotlight",model:n.spotlight})})})}),scrolling:u.forwardRef(function({model:n,Slot:r},i){ql(),pO(n.setVisibleTiles);const{width:s}=Qe(t),{gap:a,tileWidth:o,tileHeight:l}=vO(s,s,n.grid.length),c=Qe(n.spotlight.media$).length>1;return E.jsxs("div",{ref:i,className:Qu.layer,style:{"--grid-gap":`${a}px`,"--grid-tile-width":`${Math.floor(o)}px`,"--grid-tile-height":`${Math.floor(l)}px`},children:[E.jsx("div",{className:De(Qu.spotlight,{[Qu.withIndicators]:c})}),E.jsx("div",{className:Qu.grid,children:n.grid.map(d=>E.jsx(r,{className:Qu.slot,id:d.id,model:d},d.id))})]})})});async function sJe(t,e,n,r){const i=t.createGain();i.gain.setValueAtTime(n,0);const s=t.createStereoPanner();s.pan.setValueAtTime(r,0);const a=t.createBufferSource();a.buffer=e,a.connect(i).connect(s).connect(t.destination);const o=new Promise(l=>a.addEventListener("ended",()=>l()));return a.start(),o}function yO(t){const[e]=Gr(sse),{audioOutput:n}=u1(),{controlledAudioDevices:r}=Yo(),[i,s]=u.useState(),[a,o]=u.useState();u.useEffect(()=>{const d=t.sounds;if(!d)return;const f=new AudioContext({latencyHint:t.latencyHint});return(async()=>{const p={};for(const[g,y]of Object.entries(await d)){const v=await f.decodeAudioData(y.slice(0));p[g]=v}o(p)})().catch(p=>{A.debug("Failed to setup audio context",p)}),s(f),()=>{f.close().catch(p=>{A.debug("Failed to close audio engine",p)}),s(void 0)}},[t.sounds,t.latencyHint]),u.useEffect(()=>{i&&"setSinkId"in i&&!r&&i.setSinkId(n.selectedId).catch(d=>{A.warn("Unable to change sink for audio context",d)})},[i,n.selectedId,r]);const{pan:l,volume:c}=Rse();return!i||!a||t.muted?null:{playSound:async d=>{if(!a[d]){A.debug(`Tried to play a sound that wasn't buffered (${d})`);return}return sJe(i,a[d],e*c,l)}}}function aJe(){return document.createElement("audio").canPlayType("audio/ogg")==="maybe"?"ogg":"mp3"}const oJe=aJe();async function Zce(t){const e={};return await Promise.all(Object.entries(t).map(async([n,r])=>{const{mp3:i,ogg:s}=r,a=await fetch(oJe==="ogg"?s:i??s);if(JM(a)){A.warn(`Could not load sound ${n}, response was not okay`);return}e[n]=await a.arrayBuffer()})),e}const BG=Object.fromEntries([...kg.filter(t=>t.sound!==void 0).map(t=>[t.name,t.sound]),[MR.name,MR.sound]]);function lJe({vm:t,muted:e}){const[n]=Gr(TP),[r,i]=u.useState(null),s=yO({sounds:r,latencyHint:"interactive",muted:e}),a=nu(s);return u.useEffect(()=>{!n||r||i(Zce(BG))},[r,n]),u.useEffect(()=>{const o=t.audibleReactions$.subscribe(l=>{var c,d;for(const f of l)BG[f]?(c=a.current)==null||c.playSound(f):(d=a.current)==null||d.playSound("generic")});return()=>{o.unsubscribe()}},[t,a]),null}const cJe="_container_qhn86_1",uJe="_reaction_qhn86_23",qG={container:cJe,reaction:uJe};function dJe({vm:t}){const e=Ig(t.visibleReactions$);return E.jsx("div",{className:qG.container,children:e==null?void 0:e.map(({sender:n,emoji:r,startX:i})=>E.jsx("span",{role:"presentation",style:{left:`${i}vw`},className:qG.reaction,children:r},n))})}const hJe="/assets/join_call-dEJCP2wD.mp3",fJe="/assets/join_call-DlMV9nHk.ogg",mJe="/assets/left_call-BbqmRgnC.mp3",pJe="/assets/left_call-C7NMl6WI.ogg",gJe="/assets/raise_hand-CUbxEnt9.ogg",vJe="/assets/raise_hand-Bzqn65WB.mp3",yJe="/assets/screen_share_started-IZDL-kAw.ogg",_Je="/assets/screen_share_started-DH3qxml5.mp3",GG=8,KG=500,zce=Zce({join:{mp3:hJe,ogg:fJe},left:{mp3:mJe,ogg:pJe},raiseHand:{mp3:vJe,ogg:gJe},screenshareStarted:{mp3:_Je,ogg:yJe}});function CJe({vm:t,muted:e}){const n=yO({sounds:zce,latencyHint:"interactive",muted:e}),r=nu(n);return u.useEffect(()=>{const i=t.memberChanges$.pipe(Bo(({joined:l,ids:c})=>c.length<=GG&&l.length>0),AR(()=>LR(KG))).subscribe(()=>{var l;(l=r.current)==null||l.playSound("join")}),s=t.memberChanges$.pipe(Bo(({ids:l,left:c})=>l.length<=GG&&c.length>0),AR(()=>LR(KG))).subscribe(()=>{var l;(l=r.current)==null||l.playSound("left")}),a=t.newHandRaised$.subscribe(()=>{var l;(l=r.current)==null||l.playSound("raiseHand")}),o=t.newScreenShare$.subscribe(()=>{var l;(l=r.current)==null||l.playSound("screenshareStarted")});return()=>{i.unsubscribe(),s.unsubscribe(),a.unsubscribe(),o.unsubscribe()}},[r,t]),E.jsx(E.Fragment,{})}const ZG=3e3;class bJe{constructor(e){this.rtcSession=e,this.raisedHandsSubject$=new qi({}),this.reactionsSubject$=new qi({}),this.raisedHands$=this.raisedHandsSubject$.asObservable(),this.reactions$=this.reactionsSubject$.asObservable(),this.onMembershipsChanged=n=>{for(const r of Object.keys(this.raisedHandsSubject$.value).filter(i=>n.find(s=>s.sender==i)))this.removeRaisedHand(r);for(const r of this.rtcSession.memberships){if(!r.sender||!r.eventId)continue;const i=`${r.sender}:${r.deviceId}`;this.raisedHandsSubject$.value[i]&&this.raisedHandsSubject$.value[i].membershipEventId!==r.eventId&&this.removeRaisedHand(i);const s=this.getLastReactionEvent(r.eventId,r.sender);if(s){const a=s==null?void 0:s.getId();if(!a)continue;this.addRaisedHand(`${r.sender}:${r.deviceId}`,{membershipEventId:r.eventId,reactionEventId:a,time:new Date(s.localTimestamp)})}}},this.handleReactionEvent=n=>{var a,o,l;const r=this.rtcSession.room;if(n.getRoomId()!==r.roomId||n.isSending())return;const i=n.getSender(),s=n.getId();if(!(!i||!s)&&(r.client.decryptEventIfNeeded(n).catch(c=>A.warn(`Failed to decrypt ${n.getId()}`,c)),!(n.isBeingDecrypted()||n.isDecryptionFailure()))){if(n.getType()===gP){const c=n.getContent(),d=(a=c==null?void 0:c["m.relates_to"])==null?void 0:a.event_id,f=this.rtcSession.memberships.find(C=>C.eventId===d&&C.sender===i);if(!f){A.warn(`Reaction target was not a membership event for ${i}, ignoring`);return}const p=`${f.sender}:${f.deviceId}`;if(!c.emoji){A.warn(`Reaction had no emoji from ${s}`);return}const y=(o=new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(c.emoji)[Symbol.iterator]().next().value)==null?void 0:o.segment;if(!(y!=null&&y.trim())){A.warn(`Reaction had no emoji from ${s} after splitting`);return}const v={...MR,emoji:y,...kg.find(C=>C.name===c.name)},b=this.reactionsSubject$.value;if(b[p]){A.warn(`Got reaction from ${p} but one is still playing`);return}this.reactionsSubject$.next({...b,[p]:{reactionOption:v,expireAfter:new Date(Date.now()+ZG)}})}else if(n.getType()===ee.Reaction){const c=n.getContent(),d=c["m.relates_to"].event_id,f=this.rtcSession.memberships.find(p=>p.eventId===d&&p.sender===i);if(!f){A.warn(`Reaction target was not a membership event for ${i}, ignoring`);return}(c==null?void 0:c["m.relates_to"].key)==="🖐️"&&this.addRaisedHand(`${f.sender}:${f.deviceId}`,{reactionEventId:s,membershipEventId:d,time:new Date(n.localTimestamp)})}else if(n.getType()===ee.RoomRedaction){const c=n.event.redacts,d=(l=Object.entries(this.raisedHandsSubject$.value).find(([f,p])=>p.reactionEventId===c))==null?void 0:l[0];if(!d)return;this.removeRaisedHand(d)}}},this.reactionsSub=this.reactionsSubject$.pipe(LUe(ZG)).subscribe(n=>{const r=new Date,i=Object.fromEntries(Object.entries(n).filter(([s,a])=>a.expireAfter>r));Object.keys(n).length!==Object.keys(i).length&&this.reactionsSubject$.next(i)}),this.rtcSession.room.on(xe.Timeline,this.handleReactionEvent),this.rtcSession.room.on(xe.Redaction,this.handleReactionEvent),this.rtcSession.room.client.on($t.Decrypted,this.handleReactionEvent),this.rtcSession.room.on(xe.LocalEchoUpdated,this.handleReactionEvent),e.on(xr.MembershipsChanged,this.onMembershipsChanged),this.onMembershipsChanged([])}getLastReactionEvent(e,n){const r=this.rtcSession.room.relations.getChildEventsForEvent(e,Sn.Annotation,ee.Reaction);return((r==null?void 0:r.getRelations())??[]).find(s=>{var a,o;return s.event.sender===n&&s.getType()===ee.Reaction&&((o=(a=s.getContent())==null?void 0:a["m.relates_to"])==null?void 0:o.key)==="🖐️"})}addRaisedHand(e,n){this.raisedHandsSubject$.next({...this.raisedHandsSubject$.value,[e]:n})}removeRaisedHand(e){this.raisedHandsSubject$.next(Object.fromEntries(Object.entries(this.raisedHandsSubject$.value).filter(([n])=>n!==e)))}destroy(){this.rtcSession.off(xr.MembershipsChanged,this.onMembershipsChanged),this.rtcSession.room.off(xe.Timeline,this.handleReactionEvent),this.rtcSession.room.off(xe.Redaction,this.handleReactionEvent),this.rtcSession.room.client.off($t.Decrypted,this.handleReactionEvent),this.rtcSession.room.off(xe.LocalEchoUpdated,this.handleReactionEvent),this.reactionsSub.unsubscribe()}}function EJe({members:t,muted:e}){const n=u.useMemo(()=>new Set(t==null?void 0:t.map(p=>`${p.sender}:${p.deviceId}`)),[t]),r=u.useRef(new Set),i=(p,g)=>{r.current.has(p)||(A.warn(`Audio track ${p} has no matching matrix call member`,`current members: ${Array.from(g.values())}`,"track will not get rendered"),r.current.add(p))},s=Zqe([ue.Source.Microphone,ue.Source.ScreenShareAudio,ue.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(p=>{const g=n==null?void 0:n.has(p.participant.identity);return!g&&!p.participant.isLocal&&i(p.participant.identity,n),!p.participant.isLocal&&p.publication.kind===ue.Kind.Audio&&g}),{pan:a,volume:o}=Rse(),l=a!==0,[c,d]=u.useState(void 0);u.useEffect(()=>{const p=new AudioContext;return d(p),()=>{p.close()}},[]);const f=u.useMemo(()=>({gain:c==null?void 0:c.createGain(),pan:c==null?void 0:c.createStereoPanner()}),[c]);return u.useEffect(()=>{f.pan&&(f.pan.pan.value=a)},[f.pan,a]),u.useEffect(()=>{f.gain&&(f.gain.gain.value=o)},[f.gain,o]),E.jsx("div",{style:{display:"none"},children:s.map(p=>E.jsx(SJe,{trackRef:p,muted:e,audioContext:l?c:void 0,audioNodes:f},Hje(p)))})}function SJe({trackRef:t,muted:e,audioContext:n,audioNodes:r,...i}){const[s,a]=gO(()=>!1,[n&&r]);return u.useEffect(()=>{if(!t||s)return;const o=t.publication.track,l=n&&r.gain&&r.pan;o.setAudioContext(l?n:void 0),o.setWebAudioPlugins(l?[r.gain,r.pan]:[]),a(!0)},[n,r,a,s,t]),s&&E.jsx(_Ge,{trackRef:t,muted:e,...i})}const Wce=Bn([FR.pipe(gn(!0)),iFe.value$],(t,e)=>!t||e),wJe="getDisplayMedia"in(navigator.mediaDevices??{}),kJe=400,TJe=t=>{const e=Zze(t.client,t.rtcSession),{livekitRoom:n,connState:r}=eWe(t.rtcSession,t.muteStates,e,t.e2eeSystem),i=Oh(o=>o.pipe(Ne(([l])=>l)),[r]),[s,a]=u.useState(null);return u.useEffect(()=>(A.info(`[Lifecycle] InCallView Component mounted, livekitroom state ${n==null?void 0:n.state}`),()=>{A.info(`[Lifecycle] InCallView Component unmounted, livekitroom state ${n==null?void 0:n.state}`),n==null||n.disconnect().then(()=>{A.info(`[Lifecycle] Disconnected from livekite room, state:${n==null?void 0:n.state}`)}).catch(o=>{A.error("[Lifecycle] Failed to disconnect from livekit room",o)})}),[]),u.useEffect(()=>{if(n!==void 0){const o=new bJe(t.rtcSession),l=new _We(t.rtcSession,n,t.e2eeSystem,i,o.raisedHands$,o.reactions$);return a(l),()=>{l.destroy(),o.destroy()}}},[t.rtcSession,n,t.e2eeSystem,i]),n===void 0||s===null?null:E.jsx(Ile.Provider,{value:n,children:E.jsx(bFe,{vm:s,rtcSession:t.rtcSession,children:E.jsx(RJe,{...t,vm:s,livekitRoom:n,connState:r})})})},RJe=({client:t,vm:e,matrixInfo:n,rtcSession:r,livekitRoom:i,muteStates:s,participantCount:a,onLeave:o,hideHeader:l,connState:c,onShareClick:d})=>{const{supportsReactions:f,sendReaction:p,toggleRaisedHand:g}=xP();if(tWe(),c===Rt.Disconnected)throw new kce;const y=u.useRef(null),[v,b]=F0(),C=F4(y,v),{hideScreensharing:S,showControls:R}=Yo(),{isScreenShareEnabled:w,localParticipant:I}=Kqe({room:i}),k=Qe(Wce),[x,L]=u.useState(!1);gy(r,R9.EnabledTransportsChanged,pt=>L(pt.room));const[N]=Gr(kP),[D]=Gr(ase),U=I4(r.room.roomId),j=u.useMemo(()=>N&&D&&U.kind===Wt.PER_PARTICIPANT&&!x,[N,D,U.kind,x]),$=u.useCallback(()=>{var pt,Fn;return(Fn=(pt=s.audio).setEnabled)==null?void 0:Fn.call(pt,Sr=>!Sr)},[s]),Z=u.useCallback(()=>{var pt,Fn;return(Fn=(pt=s.video).setEnabled)==null?void 0:Fn.call(pt,Sr=>!Sr)},[s]);wKe(y,$,Z,pt=>{var Fn,Sr;return(Sr=(Fn=s.audio).setEnabled)==null?void 0:Sr.call(Fn,!pt)},pt=>void p(pt),()=>void g());const V=Qe(e.windowMode$),z=Qe(e.layout$),K=Qe(e.tileStoreGeneration$),[q]=Gr(ese),G=Qe(e.gridMode$),J=Qe(e.showHeader$),B=Qe(e.showFooter$),Q=Ale(e.localVideo$),pe=u.useRef(null),ve=u.useCallback(()=>pe.current=Date.now(),[]),Re=u.useCallback(()=>{const pt=pe.current;pt!==null&&Date.now()-pt<=kJe&&e.tapScreen(),pe.current=null},[e]),Te=u.useCallback(()=>pe.current=null,[]),Ce=u.useCallback(pt=>{B?(pt.stopPropagation(),e.tapControls()):pt.preventDefault()},[e,B]),we=u.useCallback(pt=>{pt.pointerType==="mouse"&&e.hoverScreen()},[e]),Ee=u.useCallback(()=>e.unhoverScreen(),[e]),[ze,qt]=u.useState(!1),[dr,nn]=u.useState(BL),We=u.useCallback(()=>qt(!0),[qt]),pi=u.useCallback(()=>qt(!1),[qt]),hr=u.useMemo(()=>Xe===null?()=>{nn("profile"),qt(!0)}:null,[nn,qt]),[Mi,tl]=F0(),[va,Ki]=F0(),ds=u.useMemo(()=>({width:b.width,height:b.height-tl.height-(V==="flat"?0:Ki.height)}),[b.width,b.height,tl.height,Ki.height,V]),bu=Oh(pt=>pt.pipe(Ne(([Fn])=>Fn)),[ds]),lo=Xd(()=>new qi(DYe)),m1=Xd(()=>new qi(UYe)),nl=u.useCallback(pt=>e.setGridMode(pt),[e]);u.useEffect(()=>{Xe==null||Xe.api.transport.send(G==="grid"?ui.TileLayout:ui.SpotlightLayout,{}).catch(pt=>{A.error("Failed to send layout change to widget API",pt)})},[G]),u.useEffect(()=>{if(Xe){const pt=Sr=>{nl("grid"),Xe.api.transport.reply(Sr.detail,{})},Fn=Sr=>{nl("spotlight"),Xe.api.transport.reply(Sr.detail,{})};return Xe.lazyActions.on(ui.TileLayout,pt),Xe.lazyActions.on(ui.SpotlightLayout,Fn),()=>{Xe.lazyActions.off(ui.TileLayout,pt),Xe.lazyActions.off(ui.SpotlightLayout,Fn)}}},[nl]);const p1=u.useMemo(()=>u.forwardRef(function({className:Fn,style:Sr,targetWidth:Eu,targetHeight:Su,model:rc},tt){const Mt=Qe(e.spotlightExpanded$),Pt=Qe(e.toggleSpotlightExpanded$),Et=Qe(e.showSpeakingIndicators$),bn=Qe(e.showSpotlightIndicators$);return rc instanceof Ice?E.jsx(Ece,{ref:tt,vm:rc,onOpenProfile:hr,targetWidth:Eu,targetHeight:Su,className:De(Fn,Jn.tile),style:Sr,showSpeakingIndicators:Et}):E.jsx(TI,{ref:tt,vm:rc,expanded:Mt,onToggleExpanded:Pt,targetWidth:Eu,targetHeight:Su,showIndicators:bn,className:De(Fn,Jn.tile),style:Sr})}),[e,hr]),g1=u.useMemo(()=>{const pt={minBounds$:bu,spotlightAlignment$:lo,pipAlignment$:m1};return{grid:FYe(pt),"spotlight-landscape":QYe(pt),"spotlight-portrait":iJe(pt),"spotlight-expanded":ZYe(pt),"one-on-one":BYe(pt)}},[bu,lo,m1]),co=()=>{if(z.type==="pip")return E.jsx(TI,{className:De(Jn.tile,Jn.maximised),vm:z.spotlight,expanded:!0,onToggleExpanded:null,targetWidth:ds.height,targetHeight:ds.width,showIndicators:!1});const pt=g1[z.type],Fn=E.jsx($G,{className:Jn.fixedGrid,style:{insetBlockStart:tl.bottom,height:ds.height},model:z,Layout:pt.fixed,Tile:p1},"fixed"),Sr=E.jsx($G,{className:Jn.scrollingGrid,model:z,Layout:pt.scrolling,Tile:p1},"scrolling");return z.type==="spotlight-expanded"?E.jsxs(E.Fragment,{children:[Fn,Sr]}):E.jsxs(E.Fragment,{children:[Sr,Fn]})},tf=hFe(r.room.roomId),rl=u.useCallback(()=>{I.setScreenShareEnabled(!w,{audio:!0,selfBrowserSurface:"include",surfaceSwitching:"include",systemAudio:"include"}).catch(A.error)},[I,w]),Zi=[];Zi.push(E.jsx(lse,{muted:!s.audio.enabled,onClick:$,onTouchEnd:Ce,disabled:s.audio.setEnabled===null,"data-testid":"incall_mute"},"audio"),E.jsx(cse,{muted:!s.video.enabled,onClick:Z,onTouchEnd:Ce,disabled:s.video.setEnabled===null,"data-testid":"incall_videomute"},"video")),Q!==null&&Zi.push(E.jsx(use,{className:Jn.switchCamera,onClick:Q,onTouchEnd:Ce},"switch_camera")),wJe&&!S&&Zi.push(E.jsx(yFe,{className:Jn.shareScreen,enabled:w,onClick:rl,onTouchEnd:Ce,"data-testid":"incall_screenshare"},"share_screen")),f&&Zi.push(E.jsx(QFe,{vm:e,className:Jn.raiseHand,identifier:`${t.getUserId()}:${t.getDeviceId()}`,onTouchEnd:Ce},"raise_hand")),z.type!=="pip"&&Zi.push(E.jsx(hse,{onClick:We,onTouchEnd:Ce},"settings")),Zi.push(E.jsx(dse,{onClick:function(){o()},onTouchEnd:Ce,"data-testid":"incall_leave"},"end_call"));const nc=E.jsxs("div",{ref:va,className:De(Jn.footer,{[Jn.overlay]:V==="flat",[Jn.hidden]:!B||!R&&l}),children:[!l&&E.jsxs("div",{className:Jn.logo,children:[E.jsx(bKe,{width:24,height:24,"aria-hidden":!0}),E.jsx(SKe,{width:80,height:11,"aria-label":"Element Call"}),q?`Tiles generation: ${K}`:void 0]}),R&&E.jsx("div",{className:Jn.buttons,children:Zi}),R&&E.jsx(iWe,{className:Jn.layout,layout:G,setLayout:nl,onTouchEnd:Ce})]});return E.jsxs("div",{className:Jn.inRoom,ref:C,onTouchStart:ve,onTouchEnd:Re,onTouchCancel:Te,onPointerMove:we,onPointerOut:Ee,children:[J&&(l?E.jsx("div",{className:De(Jn.header,Jn.filler),ref:Mi}):E.jsxs(l1,{className:Jn.header,ref:Mi,children:[E.jsx(Zh,{children:E.jsx(Yne,{id:n.roomId,name:n.roomName,avatarUrl:n.roomAvatar,encrypted:n.e2eeSystem.kind!==Wt.NONE,participantCount:a})}),E.jsx(zh,{children:R&&d!==null&&E.jsx(Ole,{className:Jn.invite,onClick:d})})]})),j&&E.jsx(_n,{style:{height:0,zIndex:1,alignSelf:"center",margin:0},size:"sm",children:"using to Device key transport"}),E.jsx(EJe,{members:r.memberships,muted:k}),co(),E.jsx(CJe,{vm:e,muted:k}),E.jsx(lJe,{vm:e,muted:k}),E.jsx(dJe,{vm:e}),nc,z.type!=="pip"&&E.jsxs(E.Fragment,{children:[E.jsx(Cze,{...tf}),E.jsx(qL,{client:t,roomId:r.room.roomId,open:ze,onDismiss:pi,tab:dr,onTabChange:nn,livekitRoom:i})]})]})},IJe=8,xJe={enabled:!1,setEnabled:null};function zG(t,e){const[n,r]=gO(i=>i??(t.available.size>0?e():void 0),[t]);return u.useMemo(()=>t.available.size===0?xJe:{enabled:n??!1,setEnabled:r},[t,n,r])}function MJe(t){const e=u1(),{skipLobby:n}=Yo(),r=zG(e.audioInput,()=>At.get().media_devices.enable_audio&&!n&&!t),i=zG(e.videoInput,()=>At.get().media_devices.enable_video&&!n&&!t);u.useEffect(()=>{Xe==null||Xe.api.transport.send(ui.DeviceMute,{audio_enabled:r.enabled,video_enabled:i.enabled}).catch(a=>A.warn("Could not send DeviceMute action to widget",a))},[r,i]);const s=u.useCallback(a=>{var l,c;const o={audio_enabled:r.enabled,video_enabled:i.enabled};a.detail.data.audio_enabled!=null&&typeof a.detail.data.audio_enabled=="boolean"&&((l=r.setEnabled)==null||l.call(r,a.detail.data.audio_enabled),o.audio_enabled=a.detail.data.audio_enabled),a.detail.data.video_enabled!=null&&typeof a.detail.data.video_enabled=="boolean"&&((c=i.setEnabled)==null||c.call(i,a.detail.data.video_enabled),o.video_enabled=a.detail.data.video_enabled),Xe.api.transport.reply(a.detail,o)},[r,i]);return u.useEffect(()=>{if(Xe)return Xe.lazyActions.on(ui.DeviceMute,s),()=>{Xe==null||Xe.lazyActions.off(ui.DeviceMute,s)}},[s]),u.useMemo(()=>({audio:r,video:i}),[r,i])}const PJe="org.matrix.msc4143.rtc_foci";function LJe(){return{type:"livekit",focus_selection:"oldest_membership"}}async function OJe(t,e){var a,o;A.log("Start building foci_preferred list: ",t.room.roomId);const n=[],r=t.getFocusInUse();r&&ok(r)&&(A.log("Adding livekit focus from oldest member: ",r),n.push(r));const i=t.room.client.getDomain();if(i){const l=(a=await dt.getRawClientConfig(i))==null?void 0:a[PJe];Array.isArray(l)&&n.push(...l.filter(c=>!!c).filter(qZ).map(c=>(A.log("Adding livekit focus from well known: ",c),{...c,livekit_alias:e})))}const s=(o=At.get().livekit)==null?void 0:o.livekit_service_url;if(s){const l={type:"livekit",livekit_service_url:s,livekit_alias:e};A.log("Adding livekit focus from config: ",l),n.push(l)}if(n.length===0)throw new Vze(i??"");return Promise.resolve(n)}async function AJe(t,e,n=!0,r=!1){It.instance.eventCallEnded.cacheStartCall(new Date),It.instance.eventCallStarted.track(t.room.roomId);const i=t.room.roomId,{features:s,matrix_rtc_session:a}=At.get(),o=s==null?void 0:s.feature_use_device_session_member_events;if(t.joinRoomSession(await OJe(t,i),LJe(),{useNewMembershipManager:n,manageMediaKeys:e,...o!==void 0&&{useLegacyMemberEvents:!o},delayedLeaveEventDelayMs:a==null?void 0:a.membership_server_side_expiry_timeout,networkErrorRetryMs:a==null?void 0:a.membership_keep_alive_period,makeKeyDelay:a==null?void 0:a.key_rotation_on_leave_delay,useExperimentalToDeviceTransport:r}),Xe)try{await Xe.api.transport.send(ui.JoinCall,{})}catch(l){A.error("Failed to send join action",l)}}const NJe=async(t,e,n)=>{try{await t.api.setAlwaysOnScreen(!1)}catch(r){A.error("Failed to set call widget `alwaysOnScreen` to false",r)}await n;try{await t.api.transport.send(ui.HangupCall,{})}catch(r){A.error("Failed to send hangup action",r)}if(e==="user"&&!Xa().returnToLobby){try{await t.api.transport.send(ui.Close,{})}catch(r){A.error("Failed to send close action",r)}t.api.transport.stop()}};async function WG(t,e,n){await t.leaveRoomSession(),Xe?await NJe(Xe,e,n):await n}const Yce=(t,e)=>{const[n,r]=u.useState(0);return gy(t,vt.Update,u.useCallback(()=>r(i=>i+1),[r])),u.useMemo(()=>e(t.currentState),[t,e,n])};function DJe(t){return Yce(t,u.useCallback(()=>t.getMxcAvatarUrl(),[t]))}function UJe(t){const[,e]=u.useState(0);return gy(t,xe.Name,()=>e(n=>n+1)),t.name}function FJe(t){return Yce(t,u.useCallback(e=>e.getJoinRule(),[]))}var nw,YG;function jJe(){return YG||(YG=1,nw=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(i){t.addRange(i)}),e&&e.focus()}}),nw}var rw,JG;function HJe(){if(JG)return rw;JG=1;var t=jJe(),e={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(s){var a=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return s.replace(/#{\s*key\s*}/g,a)}function i(s,a){var o,l,c,d,f,p,g=!1;a||(a={}),o=a.debug||!1;try{c=t(),d=document.createRange(),f=document.getSelection(),p=document.createElement("span"),p.textContent=s,p.ariaHidden="true",p.style.all="unset",p.style.position="fixed",p.style.top=0,p.style.clip="rect(0, 0, 0, 0)",p.style.whiteSpace="pre",p.style.webkitUserSelect="text",p.style.MozUserSelect="text",p.style.msUserSelect="text",p.style.userSelect="text",p.addEventListener("copy",function(v){if(v.stopPropagation(),a.format)if(v.preventDefault(),typeof v.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=e[a.format]||e.default;window.clipboardData.setData(b,s)}else v.clipboardData.clearData(),v.clipboardData.setData(a.format,s);a.onCopy&&(v.preventDefault(),a.onCopy(v.clipboardData))}),document.body.appendChild(p),d.selectNodeContents(p),f.addRange(d);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");g=!0}catch(v){o&&console.error("unable to copy using execCommand: ",v),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",s),a.onCopy&&a.onCopy(window.clipboardData),g=!0}catch(b){o&&console.error("unable to copy using clipboardData: ",b),o&&console.error("falling back to prompt"),l=r("message"in a?a.message:n),window.prompt(l,s)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(d):f.removeAllRanges()),p&&document.body.removeChild(p),c()}return g}return rw=i,rw}var $Je=HJe();const VJe=zo($Je);function BJe(t,e){var n=u.useState(!1),r=n[0],i=n[1],s=e;return u.useEffect(function(){},[r,s]),[r,function(){var a=VJe(t);i(a)}]}const qJe="_url_17aav_15",GJe="_button_17aav_29",KJe="_qrCode_17aav_37",iw={url:qJe,button:GJe,qrCode:KJe},ZJe="_toast_g0mss_15",zJe={toast:ZJe},WJe=({open:t,onDismiss:e,autoDismiss:n,children:r,Icon:i})=>{const s=u.useCallback(a=>{a||e()},[e]);return u.useEffect(()=>{if(t&&n!==void 0){const a=setTimeout(e,n);return()=>clearTimeout(a)}},[t,n,e]),E.jsx(kM,{open:t,onOpenChange:s,children:E.jsxs(TM,{children:[E.jsx(RM,{className:De(xl.bg,xl.animate)}),E.jsx(IM,{"aria-describedby":void 0,asChild:!0,children:E.jsxs(pte,{className:De(xl.overlay,xl.animate,zJe.toast),children:[E.jsx(xM,{asChild:!0,children:E.jsx(_n,{as:"h3",size:"sm",weight:"semibold",children:r})}),i&&E.jsx(i,{width:20,height:20,"aria-hidden":!0})]})})]})})};var Wf={},sw,QG;function YJe(){return QG||(QG=1,sw=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),sw}var aw={},Xu={},XG;function Xh(){if(XG)return Xu;XG=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Xu.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Xu.getSymbolTotalCodewords=function(r){return e[r]},Xu.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},Xu.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},Xu.isKanjiModeEnabled=function(){return typeof t<"u"},Xu.toSJIS=function(r){return t(r)},Xu}var ow={},eK;function _O(){return eK||(eK=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}}(ow)),ow}var lw,tK;function JJe(){if(tK)return lw;tK=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let r=0;r<n;r++)this.putBit((e>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},lw=t,lw}var cw,nK;function QJe(){if(nK)return cw;nK=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,r,i){const s=e*this.size+n;this.data[s]=r,i&&(this.reservedBit[s]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,r){this.data[e*this.size+n]^=r},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},cw=t,cw}var uw={},rK;function XJe(){return rK||(rK=1,function(t){const e=Xh().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),a=s===145?26:Math.ceil((s-13)/(2*i-2))*2,o=[s-7];for(let l=1;l<i-1;l++)o[l]=o[l-1]-a;return o.push(6),o.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),a=s.length;for(let o=0;o<a;o++)for(let l=0;l<a;l++)o===0&&l===0||o===0&&l===a-1||o===a-1&&l===0||i.push([s[o],s[l]]);return i}}(uw)),uw}var dw={},iK;function eQe(){if(iK)return dw;iK=1;const t=Xh().getSymbolSize,e=7;return dw.getPositions=function(r){const i=t(r);return[[0,0],[i-e,0],[0,i-e]]},dw}var hw={},sK;function tQe(){return sK||(sK=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let a=0,o=0,l=0,c=null,d=null;for(let f=0;f<s;f++){o=l=0,c=d=null;for(let p=0;p<s;p++){let g=i.get(f,p);g===c?o++:(o>=5&&(a+=e.N1+(o-5)),c=g,o=1),g=i.get(p,f),g===d?l++:(l>=5&&(a+=e.N1+(l-5)),d=g,l=1)}o>=5&&(a+=e.N1+(o-5)),l>=5&&(a+=e.N1+(l-5))}return a},t.getPenaltyN2=function(i){const s=i.size;let a=0;for(let o=0;o<s-1;o++)for(let l=0;l<s-1;l++){const c=i.get(o,l)+i.get(o,l+1)+i.get(o+1,l)+i.get(o+1,l+1);(c===4||c===0)&&a++}return a*e.N2},t.getPenaltyN3=function(i){const s=i.size;let a=0,o=0,l=0;for(let c=0;c<s;c++){o=l=0;for(let d=0;d<s;d++)o=o<<1&2047|i.get(c,d),d>=10&&(o===1488||o===93)&&a++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&a++}return a*e.N3},t.getPenaltyN4=function(i){let s=0;const a=i.data.length;for(let l=0;l<a;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/a/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const a=s.size;for(let o=0;o<a;o++)for(let l=0;l<a;l++)s.isReserved(l,o)||s.xor(l,o,n(i,l,o))},t.getBestMask=function(i,s){const a=Object.keys(t.Patterns).length;let o=0,l=1/0;for(let c=0;c<a;c++){s(c),t.applyMask(c,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),d<l&&(l=d,o=c)}return o}}(hw)),hw}var h7={},aK;function Jce(){if(aK)return h7;aK=1;const t=_O(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return h7.getBlocksCount=function(i,s){switch(s){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},h7.getTotalCodewordsCount=function(i,s){switch(s){case t.L:return n[(i-1)*4+0];case t.M:return n[(i-1)*4+1];case t.Q:return n[(i-1)*4+2];case t.H:return n[(i-1)*4+3];default:return}},h7}var fw={},z3={},oK;function nQe(){if(oK)return z3;oK=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let i=0;i<255;i++)t[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)t[i]=t[i-255]}(),z3.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},z3.exp=function(r){return t[r]},z3.mul=function(r,i){return r===0||i===0?0:t[e[r]+e[i]]},z3}var lK;function rQe(){return lK||(lK=1,function(t){const e=nQe();t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let a=0;a<r.length;a++)for(let o=0;o<i.length;o++)s[a+o]^=e.mul(r[a],i[o]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const a=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],a);let o=0;for(;o<s.length&&s[o]===0;)o++;s=s.slice(o)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(fw)),fw}var mw,cK;function iQe(){if(cK)return mw;cK=1;const t=rQe();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const s=t.mod(i,this.genPoly),a=this.degree-s.length;if(a>0){const o=new Uint8Array(this.degree);return o.set(s,a),o}return s},mw=e,mw}var pw={},gw={},vw={},uK;function Qce(){return uK||(uK=1,vw.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),vw}var pl={},dK;function Xce(){if(dK)return pl;dK=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;pl.KANJI=new RegExp(n,"g"),pl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),pl.BYTE=new RegExp(r,"g"),pl.NUMERIC=new RegExp(t,"g"),pl.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+n+"$"),s=new RegExp("^"+t+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return pl.testKanji=function(l){return i.test(l)},pl.testNumeric=function(l){return s.test(l)},pl.testAlphanumeric=function(l){return a.test(l)},pl}var hK;function ef(){return hK||(hK=1,function(t){const e=Qce(),n=Xce();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,a){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?s.ccBits[0]:a<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,a){if(t.isValid(s))return s;try{return r(s)}catch{return a}}}(gw)),gw}var fK;function sQe(){return fK||(fK=1,function(t){const e=Xh(),n=Jce(),r=_O(),i=ef(),s=Qce(),a=7973,o=e.getBCHDigit(a);function l(p,g,y){for(let v=1;v<=40;v++)if(g<=t.getCapacity(v,y,p))return v}function c(p,g){return i.getCharCountIndicator(p,g)+4}function d(p,g){let y=0;return p.forEach(function(v){const b=c(v.mode,g);y+=b+v.getBitsLength()}),y}function f(p,g){for(let y=1;y<=40;y++)if(d(p,y)<=t.getCapacity(y,g,i.MIXED))return y}t.from=function(g,y){return s.isValid(g)?parseInt(g,10):y},t.getCapacity=function(g,y,v){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const b=e.getSymbolTotalCodewords(g),C=n.getTotalCodewordsCount(g,y),S=(b-C)*8;if(v===i.MIXED)return S;const R=S-c(v,g);switch(v){case i.NUMERIC:return Math.floor(R/10*3);case i.ALPHANUMERIC:return Math.floor(R/11*2);case i.KANJI:return Math.floor(R/13);case i.BYTE:default:return Math.floor(R/8)}},t.getBestVersionForData=function(g,y){let v;const b=r.from(y,r.M);if(Array.isArray(g)){if(g.length>1)return f(g,b);if(g.length===0)return 1;v=g[0]}else v=g;return l(v.mode,v.getLength(),b)},t.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let y=g<<12;for(;e.getBCHDigit(y)-o>=0;)y^=a<<e.getBCHDigit(y)-o;return g<<12|y}}(pw)),pw}var yw={},mK;function aQe(){if(mK)return yw;mK=1;const t=Xh(),e=1335,n=21522,r=t.getBCHDigit(e);return yw.getEncodedBits=function(s,a){const o=s.bit<<3|a;let l=o<<10;for(;t.getBCHDigit(l)-r>=0;)l^=e<<t.getBCHDigit(l)-r;return(o<<10|l)^n},yw}var _w={},Cw,pK;function oQe(){if(pK)return Cw;pK=1;const t=ef();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,s,a;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),a=parseInt(s,10),r.put(a,10);const o=this.data.length-i;o>0&&(s=this.data.substr(i),a=parseInt(s,10),r.put(a,o*3+1))},Cw=e,Cw}var bw,gK;function lQe(){if(gK)return bw;gK=1;const t=ef(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=t.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let a=e.indexOf(this.data[s])*45;a+=e.indexOf(this.data[s+1]),i.put(a,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},bw=n,bw}var Ew,vK;function cQe(){if(vK)return Ew;vK=1;const t=ef();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let r=0,i=this.data.length;r<i;r++)n.put(this.data[r],8)},Ew=e,Ew}var Sw,yK;function uQe(){if(yK)return Sw;yK=1;const t=ef(),e=Xh();function n(r){this.mode=t.KANJI,this.data=r}return n.getBitsLength=function(i){return i*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),r.put(s,13)}},Sw=n,Sw}var ww={exports:{}},_K;function dQe(){return _K||(_K=1,function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},a={};a[r]=0;var o=e.PriorityQueue.make();o.push(r,0);for(var l,c,d,f,p,g,y,v,b;!o.empty();){l=o.pop(),c=l.value,f=l.cost,p=n[c]||{};for(d in p)p.hasOwnProperty(d)&&(g=p[d],y=f+g,v=a[d],b=typeof a[d]>"u",(b||v>y)&&(a[d]=y,o.push(d,y),s[d]=c))}if(typeof i<"u"&&typeof a[i]>"u"){var C=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(C)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(ww)),ww.exports}var CK;function hQe(){return CK||(CK=1,function(t){const e=ef(),n=oQe(),r=lQe(),i=cQe(),s=uQe(),a=Xce(),o=Xh(),l=dQe();function c(C){return unescape(encodeURIComponent(C)).length}function d(C,S,R){const w=[];let I;for(;(I=C.exec(R))!==null;)w.push({data:I[0],index:I.index,mode:S,length:I[0].length});return w}function f(C){const S=d(a.NUMERIC,e.NUMERIC,C),R=d(a.ALPHANUMERIC,e.ALPHANUMERIC,C);let w,I;return o.isKanjiModeEnabled()?(w=d(a.BYTE,e.BYTE,C),I=d(a.KANJI,e.KANJI,C)):(w=d(a.BYTE_KANJI,e.BYTE,C),I=[]),S.concat(R,w,I).sort(function(x,L){return x.index-L.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function p(C,S){switch(S){case e.NUMERIC:return n.getBitsLength(C);case e.ALPHANUMERIC:return r.getBitsLength(C);case e.KANJI:return s.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function g(C){return C.reduce(function(S,R){const w=S.length-1>=0?S[S.length-1]:null;return w&&w.mode===R.mode?(S[S.length-1].data+=R.data,S):(S.push(R),S)},[])}function y(C){const S=[];for(let R=0;R<C.length;R++){const w=C[R];switch(w.mode){case e.NUMERIC:S.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:S.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:S.push([w,{data:w.data,mode:e.BYTE,length:c(w.data)}]);break;case e.BYTE:S.push([{data:w.data,mode:e.BYTE,length:c(w.data)}])}}return S}function v(C,S){const R={},w={start:{}};let I=["start"];for(let k=0;k<C.length;k++){const x=C[k],L=[];for(let N=0;N<x.length;N++){const D=x[N],U=""+k+N;L.push(U),R[U]={node:D,lastCount:0},w[U]={};for(let j=0;j<I.length;j++){const $=I[j];R[$]&&R[$].node.mode===D.mode?(w[$][U]=p(R[$].lastCount+D.length,D.mode)-p(R[$].lastCount,D.mode),R[$].lastCount+=D.length):(R[$]&&(R[$].lastCount=D.length),w[$][U]=p(D.length,D.mode)+4+e.getCharCountIndicator(D.mode,S))}}I=L}for(let k=0;k<I.length;k++)w[I[k]].end=0;return{map:w,table:R}}function b(C,S){let R;const w=e.getBestModeForData(C);if(R=e.from(S,w),R!==e.BYTE&&R.bit<w.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(R)+`.
 Suggested mode is: `+e.toString(w));switch(R===e.KANJI&&!o.isKanjiModeEnabled()&&(R=e.BYTE),R){case e.NUMERIC:return new n(C);case e.ALPHANUMERIC:return new r(C);case e.KANJI:return new s(C);case e.BYTE:return new i(C)}}t.fromArray=function(S){return S.reduce(function(R,w){return typeof w=="string"?R.push(b(w,null)):w.data&&R.push(b(w.data,w.mode)),R},[])},t.fromString=function(S,R){const w=f(S,o.isKanjiModeEnabled()),I=y(w),k=v(I,R),x=l.find_path(k.map,"start","end"),L=[];for(let N=1;N<x.length-1;N++)L.push(k.table[x[N]].node);return t.fromArray(g(L))},t.rawSplit=function(S){return t.fromArray(f(S,o.isKanjiModeEnabled()))}}(_w)),_w}var bK;function fQe(){if(bK)return aw;bK=1;const t=Xh(),e=_O(),n=JJe(),r=QJe(),i=XJe(),s=eQe(),a=tQe(),o=Jce(),l=iQe(),c=sQe(),d=aQe(),f=ef(),p=hQe();function g(k,x){const L=k.size,N=s.getPositions(x);for(let D=0;D<N.length;D++){const U=N[D][0],j=N[D][1];for(let $=-1;$<=7;$++)if(!(U+$<=-1||L<=U+$))for(let Z=-1;Z<=7;Z++)j+Z<=-1||L<=j+Z||($>=0&&$<=6&&(Z===0||Z===6)||Z>=0&&Z<=6&&($===0||$===6)||$>=2&&$<=4&&Z>=2&&Z<=4?k.set(U+$,j+Z,!0,!0):k.set(U+$,j+Z,!1,!0))}}function y(k){const x=k.size;for(let L=8;L<x-8;L++){const N=L%2===0;k.set(L,6,N,!0),k.set(6,L,N,!0)}}function v(k,x){const L=i.getPositions(x);for(let N=0;N<L.length;N++){const D=L[N][0],U=L[N][1];for(let j=-2;j<=2;j++)for(let $=-2;$<=2;$++)j===-2||j===2||$===-2||$===2||j===0&&$===0?k.set(D+j,U+$,!0,!0):k.set(D+j,U+$,!1,!0)}}function b(k,x){const L=k.size,N=c.getEncodedBits(x);let D,U,j;for(let $=0;$<18;$++)D=Math.floor($/3),U=$%3+L-8-3,j=(N>>$&1)===1,k.set(D,U,j,!0),k.set(U,D,j,!0)}function C(k,x,L){const N=k.size,D=d.getEncodedBits(x,L);let U,j;for(U=0;U<15;U++)j=(D>>U&1)===1,U<6?k.set(U,8,j,!0):U<8?k.set(U+1,8,j,!0):k.set(N-15+U,8,j,!0),U<8?k.set(8,N-U-1,j,!0):U<9?k.set(8,15-U-1+1,j,!0):k.set(8,15-U-1,j,!0);k.set(N-8,8,1,!0)}function S(k,x){const L=k.size;let N=-1,D=L-1,U=7,j=0;for(let $=L-1;$>0;$-=2)for($===6&&$--;;){for(let Z=0;Z<2;Z++)if(!k.isReserved(D,$-Z)){let V=!1;j<x.length&&(V=(x[j]>>>U&1)===1),k.set(D,$-Z,V),U--,U===-1&&(j++,U=7)}if(D+=N,D<0||L<=D){D-=N,N=-N;break}}}function R(k,x,L){const N=new n;L.forEach(function(Z){N.put(Z.mode.bit,4),N.put(Z.getLength(),f.getCharCountIndicator(Z.mode,k)),Z.write(N)});const D=t.getSymbolTotalCodewords(k),U=o.getTotalCodewordsCount(k,x),j=(D-U)*8;for(N.getLengthInBits()+4<=j&&N.put(0,4);N.getLengthInBits()%8!==0;)N.putBit(0);const $=(j-N.getLengthInBits())/8;for(let Z=0;Z<$;Z++)N.put(Z%2?17:236,8);return w(N,k,x)}function w(k,x,L){const N=t.getSymbolTotalCodewords(x),D=o.getTotalCodewordsCount(x,L),U=N-D,j=o.getBlocksCount(x,L),$=N%j,Z=j-$,V=Math.floor(N/j),z=Math.floor(U/j),K=z+1,q=V-z,G=new l(q);let J=0;const B=new Array(j),Q=new Array(j);let pe=0;const ve=new Uint8Array(k.buffer);for(let Ee=0;Ee<j;Ee++){const ze=Ee<Z?z:K;B[Ee]=ve.slice(J,J+ze),Q[Ee]=G.encode(B[Ee]),J+=ze,pe=Math.max(pe,ze)}const Re=new Uint8Array(N);let Te=0,Ce,we;for(Ce=0;Ce<pe;Ce++)for(we=0;we<j;we++)Ce<B[we].length&&(Re[Te++]=B[we][Ce]);for(Ce=0;Ce<q;Ce++)for(we=0;we<j;we++)Re[Te++]=Q[we][Ce];return Re}function I(k,x,L,N){let D;if(Array.isArray(k))D=p.fromArray(k);else if(typeof k=="string"){let V=x;if(!V){const z=p.rawSplit(k);V=c.getBestVersionForData(z,L)}D=p.fromString(k,V||40)}else throw new Error("Invalid data");const U=c.getBestVersionForData(D,L);if(!U)throw new Error("The amount of data is too big to be stored in a QR Code");if(!x)x=U;else if(x<U)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+U+`.
`);const j=R(x,L,D),$=t.getSymbolSize(x),Z=new r($);return g(Z,x),y(Z),v(Z,x),C(Z,L,0),x>=7&&b(Z,x),S(Z,j),isNaN(N)&&(N=a.getBestMask(Z,C.bind(null,Z,L))),a.applyMask(N,Z),C(Z,L,N),{modules:Z,version:x,errorCorrectionLevel:L,maskPattern:N,segments:D}}return aw.create=function(x,L){if(typeof x>"u"||x==="")throw new Error("No input text");let N=e.M,D,U;return typeof L<"u"&&(N=e.from(L.errorCorrectionLevel,e.M),D=c.from(L.version),U=a.from(L.maskPattern),L.toSJISFunc&&t.setToSJISFunction(L.toSJISFunc)),I(x,D,N,U)},aw}var kw={},Tw={},EK;function eue(){return EK||(EK=1,function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:s,scale:s?4:a,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const a=i.modules.size,o=i.modules.data,l=t.getScale(a,s),c=Math.floor((a+s.margin*2)*l),d=s.margin*l,f=[s.color.light,s.color.dark];for(let p=0;p<c;p++)for(let g=0;g<c;g++){let y=(p*c+g)*4,v=s.color.light;if(p>=d&&g>=d&&p<c-d&&g<c-d){const b=Math.floor((p-d)/l),C=Math.floor((g-d)/l);v=f[o[b*a+C]?1:0]}r[y++]=v.r,r[y++]=v.g,r[y++]=v.b,r[y]=v.a}}}(Tw)),Tw}var SK;function mQe(){return SK||(SK=1,function(t){const e=eue();function n(i,s,a){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=a,s.width=a,s.style.height=a+"px",s.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,a,o){let l=o,c=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(c=r()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),f=c.getContext("2d"),p=f.createImageData(d,d);return e.qrToImageData(p.data,s,l),n(f,c,d),f.putImageData(p,0,0),c},t.renderToDataURL=function(s,a,o){let l=o;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const c=t.render(s,a,l),d=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(d,f.quality)}}(kw)),kw}var Rw={},wK;function pQe(){if(wK)return Rw;wK=1;const t=eue();function e(i,s){const a=i.a/255,o=s+'="'+i.hex+'"';return a<1?o+" "+s+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function n(i,s,a){let o=i+s;return typeof a<"u"&&(o+=" "+a),o}function r(i,s,a){let o="",l=0,c=!1,d=0;for(let f=0;f<i.length;f++){const p=Math.floor(f%s),g=Math.floor(f/s);!p&&!c&&(c=!0),i[f]?(d++,f>0&&p>0&&i[f-1]||(o+=c?n("M",p+a,.5+g+a):n("m",l,0),l=0,c=!1),p+1<s&&i[f+1]||(o+=n("h",d),d=0)):l++}return o}return Rw.render=function(s,a,o){const l=t.getOptions(a),c=s.modules.size,d=s.modules.data,f=c+l.margin*2,p=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",g="<path "+e(l.color.dark,"stroke")+' d="'+r(d,c,l.margin)+'"/>',y='viewBox="0 0 '+f+" "+f+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+y+' shape-rendering="crispEdges">'+p+g+`</svg>
`;return typeof o=="function"&&o(null,b),b},Rw}var kK;function gQe(){if(kK)return Wf;kK=1;const t=YJe(),e=fQe(),n=mQe(),r=pQe();function i(s,a,o,l,c){const d=[].slice.call(arguments,1),f=d.length,p=typeof d[f-1]=="function";if(!p&&!t())throw new Error("Callback required as last argument");if(p){if(f<2)throw new Error("Too few arguments provided");f===2?(c=o,o=a,a=l=void 0):f===3&&(a.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=o,o=a,a=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(o=a,a=l=void 0):f===2&&!a.getContext&&(l=o,o=a,a=void 0),new Promise(function(g,y){try{const v=e.create(o,l);g(s(v,a,l))}catch(v){y(v)}})}try{const g=e.create(o,l);c(null,s(g,a,l))}catch(g){c(g)}}return Wf.create=e.create,Wf.toCanvas=i.bind(null,n.render),Wf.toDataURL=i.bind(null,n.renderToDataURL),Wf.toString=i.bind(null,function(s,a,o){return r.render(s,o)}),Wf}var vQe=gQe();const yQe="_qrCode_ufi44_15",_Qe={qrCode:yQe},CQe=({data:t,className:e})=>{const[n,r]=u.useState(null);return u.useEffect(()=>{let i=!1;return vQe.toDataURL(t,{errorCorrectionLevel:"L"}).then(s=>{i||r(s)}).catch(s=>{i||r(null)}),()=>{i=!0}},[t]),E.jsx("div",{className:De(_Qe.qrCode,e),children:n&&E.jsx("img",{src:n,alt:Zo("qr_code")})})},bQe=({room:t,open:e,onDismiss:n})=>{const{t:r}=it(),i=I4(t.roomId),s=u.useMemo(()=>Zoe(t.roomId,i,t.name),[i,t.name,t.roomId]),[,a]=BJe(s),[o,l]=u.useState(!1),c=u.useCallback(()=>l(!1),[l]),d=u.useCallback(f=>{f.stopPropagation(),a(),n(),l(!0)},[a,n]);return E.jsxs(E.Fragment,{children:[E.jsxs(Yh,{title:r("invite_modal.title"),open:e,onDismiss:n,children:[E.jsx(CQe,{className:iw.qrCode,data:s}),E.jsx(_n,{className:iw.url,size:"sm",weight:"semibold",children:s}),E.jsx(Bt,{className:iw.button,Icon:_Re,onClick:d,"data-testid":"modal_inviteLink",children:r("action.copy_link")})]}),E.jsx(WJe,{open:o,onDismiss:c,autoDismiss:2e3,Icon:Yte,children:r("invite_modal.link_copied_toast")})]})},EQe=({error:t,recoveryActionHandler:e,widget:n})=>{const{t:r}=it();let i;switch(t.category){case E6.CONFIGURATION_ISSUE:i=yRe;break;case E6.NETWORK_CONNECTIVITY:i=SRe;break;case E6.CLIENT_CONFIGURATION:i=URe;break;default:i=ty}const s=[];return t instanceof kce&&s.push({label:r("call_ended_view.reconnect_button"),onClick:()=>e("reconnect")}),E.jsx(B2,{children:E.jsxs(xg,{Icon:i,title:t.localisedTitle,rageshake:t.code==fO.UNKNOWN_ERROR,widget:n,children:[E.jsx("p",{children:t.localisedMessage??E.jsx(ca,{i18nKey:"error.unexpected_ec_error",components:[E.jsx("b",{}),E.jsx("code",{})],values:{errorCode:t.code}})}),s&&s.map((a,o)=>E.jsx("button",{onClick:a.onClick,children:a.label},`action${o}`))]})})},SQe=({recoveryActionHandler:t,onError:e,children:n,widget:r})=>{const i=u.useCallback(({error:s,resetError:a})=>{const o=s instanceof tc?s:new mO(s instanceof Error?s:new Error);return E.jsx(EQe,{widget:r??null,error:o,resetError:a,recoveryActionHandler:l=>{a(),t(l)}})},[t,r]);return E.jsx(ey,{fallback:i,onError:s=>e==null?void 0:e(s),children:n})},wQe=({client:t,isPasswordlessUser:e,confineToRoom:n,preload:r,skipLobby:i,hideHeader:s,rtcSession:a,isJoined:o,muteStates:l,widget:c})=>{const[d,f]=u.useState(null),p=mse(a),g=Qe(Wce),y=nu(yO({sounds:zce,latencyHint:"interactive",muted:g}));u.useEffect(()=>{var we,Ee;p.length>=IJe&&((Ee=(we=l.audio).setEnabled)==null||Ee.call(we,!1))},[]),u.useEffect(()=>(A.info("[Lifecycle] GroupCallView Component mounted"),()=>{A.info("[Lifecycle] GroupCallView Component unmounted")}),[]),u.useEffect(()=>(window.rtcSession=a,()=>{delete window.rtcSession}),[a]),gy(a,xr.MembershipManagerError,we=>{f(new Bze(fO.MEMBERSHIP_MANAGER_UNRECOVERABLE,we.message??we))}),u.useEffect(()=>{t.getRoom(a.room.roomId)!==a.room&&A.warn(`We've ended up with multiple rooms for the same ID (${a.room.roomId}). This indicates a bug in the group call loading code, and may lead to incomplete room state.`)},[t,a.room]);const v=a.room,{displayName:b,avatarUrl:C}=E4(t),S=UJe(v),R=DJe(v),{perParticipantE2EE:w,returnToLobby:I}=Yo(),k=I4(v.roomId),[x]=Gr(rFe),[L]=Gr(ase);M4(S);const N=u.useMemo(()=>({userId:t.getUserId(),displayName:b,avatarUrl:C,roomId:v.roomId,roomName:S,roomAlias:v.getCanonicalAlias(),roomAvatar:R,e2eeSystem:k}),[t,b,C,S,v,R,k]),D=u.useMemo(()=>new Set(p.map(we=>we.sender)).size,[p]),U=u1(),j=nu(U),$=nu(l),Z=u.useCallback(async we=>{try{await AJe(we,w,x,L)}catch(Ee){if(Ee instanceof tc)f(Ee);else{A.error("Unknown Error while entering RTC session",Ee);const ze=new mO(Ee instanceof Error?Ee:new Error("Unknown error",{cause:Ee}));f(ze)}}},[w,L,x]);u.useEffect(()=>{const we=async({audioInput:Ee,videoInput:ze})=>{var dr,nn,We,pi;const qt=await su.getLocalDevices(void 0,!0);if(Ee){const hr=Hq(Ee,"audioinput",qt);hr?(A.debug(`Found audio input ID ${hr} for name ${Ee}`),j.current.audioInput.select(hr)):(A.warn("Unknown audio input: "+Ee),(nn=(dr=$.current.audio).setEnabled)==null||nn.call(dr,!1))}if(ze){const hr=Hq(ze,"videoinput",qt);hr?(A.debug(`Found video input ID ${hr} for name ${ze}`),j.current.videoInput.select(hr)):(A.warn("Unknown video input: "+ze),(pi=(We=$.current.video).setEnabled)==null||pi.call(We,!1))}};if(i)if(c)if(r){const Ee=ze=>{(async()=>{await we(ze.detail.data),await Z(a),c.api.transport.reply(ze.detail,{})})().catch(qt=>{A.error("Error joining RTC session",qt)})};return c.lazyActions.on(ui.JoinCall,Ee),()=>{c.lazyActions.off(ui.JoinCall,Ee)}}else(async()=>{await Z(a)})().catch(Ee=>{A.error("Error joining RTC session",Ee)});else Z(a)},[c,a,r,i,w,j,$,Z,x]);const[V,z]=u.useState(!1),K=Wl(),q=u.useCallback((we="user")=>{var dr;const Ee=(dr=y.current)==null?void 0:dr.playSound("left"),ze=!!c;z(!0);const qt=new Promise(nn=>{It.instance.eventCallEnded.track(v.roomId,a.memberships.length,ze,a),window.setTimeout(nn,10)});WG(a,we,Promise.all([Ee,qt])).then(async()=>{!e&&!n&&!It.instance.isEnabled()&&await K("/")}).catch(nn=>{A.error("Error leaving RTC session",nn)})},[y,c,a,v.roomId,e,n,K]);u.useEffect(()=>{if(c&&o){c.api.setAlwaysOnScreen(!0).catch(Ee=>{A.error("Error calling setAlwaysOnScreen(true)",Ee)});const we=Ee=>{c.api.transport.reply(Ee.detail,{}),WG(a,"user").catch(ze=>{A.error("Failed to leave RTC session",ze)})};return c.lazyActions.once(ui.HangupCall,we),()=>{c.lazyActions.off(ui.HangupCall,we)}}},[c,o,a]);const G=FJe(v),[J,B]=u.useState(!1),Q=u.useCallback(()=>B(!1),[B]),pe=u.useCallback(()=>B(!0),[B]),ve=G===kd.Public?pe:null;if(!eY()&&k.kind!==Wt.NONE)throw new qze;const Re=E.jsx(bQe,{room:v,open:J,onDismiss:Q}),Te=E.jsxs(E.Fragment,{children:[Re,E.jsx(Nle,{client:t,matrixInfo:N,muteStates:l,onEnter:()=>void Z(a),confineToRoom:n,hideHeader:s,participantCount:D,onShareClick:ve})]});let Ce;if(d){const we=()=>{throw d};Ce=E.jsx(we,{})}else o?Ce=E.jsxs(E.Fragment,{children:[Re,E.jsx(TJe,{client:t,matrixInfo:N,rtcSession:a,participantCount:D,onLeave:q,hideHeader:s,muteStates:l,e2eeSystem:k,onShareClick:ve})]}):V&&c===null?e||It.instance.isEnabled()&&c===null?Ce=E.jsx(_Ke,{endedCallId:a.room.roomId,client:t,isPasswordlessUser:e,confineToRoom:n}):Ce=null:V&&c!==null?Ce=I?Te:null:r||i?Ce=null:Ce=Te;return E.jsx(SQe,{widget:c,recoveryActionHandler:we=>{we=="reconnect"&&(z(!1),Z(a).catch(Ee=>{A.error("Error re-entering RTC session",Ee)}))},onError:()=>{a.isJoined()&&q("error")},children:Ce})},kQe="_modal_64o3w_15",TQe={modal:kQe},RQe=({roomId:t})=>{const{t:e}=it(),[n,r]=u.useState(!0),i=u.useCallback(o=>{o.preventDefault(),o.stopPropagation(),r(!1)},[r]),s=I4(t);s.kind===Wt.NONE&&A.error("Generating app redirect URL for encrypted room but don't have key available!");const a=u.useMemo(()=>{const o=new URL(t===null?window.location.href:Zoe(t,s));o.hash=zMe(o.hash,c=>(c.set("appPrompt","false"),c.set("confineToRoom","true"),c));const l=new URL("io.element.call:/");return l.searchParams.set("url",o.toString()),l.toString()},[s,t]);return E.jsxs(Yh,{className:TQe.modal,title:e("app_selection_modal.title"),open:n,children:[E.jsx(_n,{size:"md",weight:"semibold",children:e("app_selection_modal.text")}),E.jsx(Bt,{kind:"secondary",onClick:i,children:e("app_selection_modal.continue_in_browser")}),E.jsx(Bt,{as:"a",href:a,Icon:Mne,children:e("app_selection_modal.open_in_app")})]})},IQe=3,xQe=3e3;async function tue(t,e=0,...n){try{return await t.joinRoom(...n)}catch(r){if(r instanceof On&&r.errcode==="M_FORBIDDEN"&&e<IQe)return await new Promise(i=>setTimeout(i,xQe)),tue(t,e+1,...n);throw r}}class k6 extends Error{constructor(e,n,r,i){super(n),this.icon=e,this.messageBody=r,this.reason=i}}const MQe=(t,e,n)=>{const[r,i]=u.useState({kind:"loading"}),s=u.useRef(void 0),{t:a}=it(),o=u.useCallback(()=>new k6(fRe,a("group_call_loader.banned_heading"),a("group_call_loader.banned_body"),d()),[a]),l=u.useCallback(()=>new k6(ny,a("group_call_loader.knock_reject_heading"),a("group_call_loader.knock_reject_body"),d()),[a]),c=u.useCallback(()=>new k6(pne,a("group_call_loader.call_ended_heading"),a("group_call_loader.call_ended_body"),d()),[a]),d=()=>{var f,p,g;return(g=(p=s.current)==null?void 0:p.currentState.getStateEvents(ee.RoomMember,(f=s.current)==null?void 0:f.myUserId))==null?void 0:g.getContent().reason};return u.useEffect(()=>{if(!t||!e)return;const f=async C=>{let S=null;const R=await t.getRoomIdForAlias(C.toLowerCase());return A.info(`${C} resolved to ${R.room_id}`),S=t.getRoom(R.room_id),S?A.info(`Already in room ${R.room_id}, not rejoining.`):(A.info(`Room ${R.room_id} not found, joining.`),S=await t.joinRoom(R.room_id,{viaServers:R.servers})),S},p=async(C,S,R)=>(await t.knockRoom(C,{viaServers:S}),R(),await new Promise((w,I)=>{t.on(xe.MyMembership,(k,x,L)=>{C===k.roomId&&(s.current=k,x===Ke.Invite&&L===Ke.Knock&&tue(t,0,k.roomId,{viaServers:S}).then(N=>{A.log("Auto-joined %s",N.roomId),w(N)},I),x===Ke.Ban&&I(o()),x===Ke.Leave&&I(l()))})})),g=async()=>{let C=null;if(e[0]==="#")C=await f(e),s.current=C;else{const S=e;C=t.getRoom(S),s.current=C??void 0;const R=C==null?void 0:C.getMyMembership();if(R===Ke.Join)return C;if(Xe)throw new Error("Room not found. The widget-api did not pass over the relevant room events/information.");if(R===Ke.Ban)throw o();if(R===Ke.Invite)C=await t.joinRoom(S,{viaServers:n});else{let w;try{w=await t.getRoomSummary(S,n)}catch(I){A.warn("Could not load room summary to decide whether we want to join or knock.\n              EC will fallback to join as if this would be a public room.\n              Reach out to your homeserver admin to ask them about supporting the `/summary` endpoint (im.nheko.summary):",I)}if(w===void 0||w.join_rule===kd.Public)C=await t.joinRoom(S,{viaServers:n});else if(w.join_rule===kd.Knock){const I=w;let k=()=>{};const x=new Promise(L=>{I.membership!==Ke.Knock?k=L:L()});i({kind:"canKnock",roomSummary:I,knock:k}),await x,C=await p(w.room_id,n,()=>i({kind:"waitForInvite",roomSummary:I}))}else throw new Error(`Room ${w.room_id} is not joinable. This likely means, that the conference owner has changed the room settings to private.`)}}return A.info(`Joined ${e}, waiting room to be ready for group calls`),await t.waitUntilRoomReadyForGroupCalls(C.roomId),A.info(`${e}, is ready for group calls`),C},y=async()=>{const C=await g();return s.current=C,A.debug(`Fetched / joined room ${e}`),t.matrixRTC.getRoomSession(C)},v=async()=>{t.getSyncState()!==Kt.Syncing&&(A.debug("useLoadGroupCall: waiting for client to start syncing..."),await new Promise(C=>{const S=()=>{if(t.getSyncState()===Kt.Syncing)return t.off(Le.Sync,S),C()};t.on(Le.Sync,S)}),A.debug("useLoadGroupCall: client is now syncing."))},b=async()=>{await new Promise((C,S)=>{t.on(xe.MyMembership,(R,w)=>{w===Ke.Leave&&S(c()),w===Ke.Ban&&S(o())})})};r.kind==="loading"&&(A.log("Start loading group call"),v().then(y).then(C=>i({kind:"loaded",rtcSession:C})).then(b).catch(C=>i({kind:"failed",error:C})))},[o,t,l,c,e,r,a,n]),r};function PQe(t){const[,e]=u.useState(0);return u.useEffect(()=>{if(t!==void 0){const n=r=>{A.info(`Session in room ${t.room.roomId} changed to ${r?"joined":"left"}`),e(i=>i+1)};return t.on(xr.JoinStateChanged,n),()=>{t.off(xr.JoinStateChanged,n)}}},[t]),(t==null?void 0:t.isJoined())??!1}const LQe=()=>{const{confineToRoom:t,appPrompt:e,preload:n,hideHeader:r,displayName:i,skipLobby:s}=Yo(),{t:a}=it(),{roomAlias:o,roomId:l,viaServers:c}=YMe(),d=l??o;d||A.error("No room specified");const{registerPasswordlessUser:f}=Xoe(),[p,g]=u.useState(!1),{loading:y,authenticated:v,client:b,error:C,passwordlessUser:S}=PP(),{avatarUrl:R,displayName:w}=E4(b),I=MQe(b,d,c),k=PQe(I.kind==="loaded"?I.rtcSession:void 0),x=MJe(k);u.useEffect(()=>{!y&&!v&&i&&!Xe&&(g(!0),f(i).catch($=>{A.error("Failed to register passwordless user",$)}).finally(()=>{g(!1)}))},[y,v,i,g,f]);const[L,N]=wP();u.useEffect(()=>{L===null&&N&&N(!0)},[L,N]);const D=u.useRef(!1);u.useEffect(()=>{I.kind==="loaded"&&D.current&&A.log("Play join sound 'Not yet implemented'")},[I.kind]);const U=()=>{switch(I.kind){case"loaded":return E.jsx(wQe,{widget:Xe,client:b,rtcSession:I.rtcSession,isJoined:k,isPasswordlessUser:S,confineToRoom:t,preload:n,skipLobby:s||D.current,hideHeader:r,muteStates:x});case"waitForInvite":case"canKnock":{D.current=D.current||I.kind==="waitForInvite";const $=I.kind==="canKnock"?I.knock:null,Z=I.kind==="canKnock"?a("lobby.ask_to_join"):E.jsxs(E.Fragment,{children:[a("lobby.waiting_for_invite"),E.jsx(Yte,{})]});return E.jsx(Nle,{client:b,matrixInfo:{userId:b.getUserId()??"",displayName:w??"",avatarUrl:R??"",roomAlias:null,roomId:I.roomSummary.room_id,roomName:I.roomSummary.name??"",roomAvatar:I.roomSummary.avatar_url??null,e2eeSystem:{kind:I.roomSummary["im.nheko.summary.encryption"]?Wt.PER_PARTICIPANT:Wt.NONE}},onEnter:()=>$==null?void 0:$(),enterLabel:Z,waitingForInvite:I.kind==="waitForInvite",confineToRoom:t,hideHeader:r,participantCount:null,muteStates:x,onShareClick:null})}case"loading":return E.jsx(B2,{children:E.jsx("h1",{children:a("common.loading")})});case"failed":return D.current=!1,I.error.errcode==="M_NOT_FOUND"?E.jsx(B2,{children:E.jsx(xg,{Icon:PRe,title:a("error.call_not_found"),widget:Xe,children:E.jsx(ca,{i18nKey:"error.call_not_found_description",children:E.jsxs("p",{children:["That link doesn't appear to belong to any existing call. Check that you have the right link, or"," ",E.jsx($l,{to:"/",children:"create a new one"}),"."]})})})}):I.error instanceof k6?E.jsx(B2,{children:E.jsxs(xg,{Icon:I.error.icon,title:I.error.message,widget:Xe,children:[E.jsx("p",{children:I.error.messageBody}),I.error.reason&&E.jsx("p",{children:a("group_call_loader.reason",{reason:I.error.reason})})]})}):E.jsx(Mg,{widget:Xe,error:I.error});default:return E.jsx(E.Fragment,{children:" "})}};let j;return y||p?j=E.jsx(Py,{}):C?j=E.jsx(Mg,{widget:Xe,error:C}):b?d?j=U():j=E.jsx(Joe,{}):j=E.jsx(HBe,{}),E.jsxs(E.Fragment,{children:[j,e&&At.get().app_prompt&&(yh==="android"||yh==="ios")&&l&&E.jsx(RQe,{roomId:l})]})},OQe="_banner_e0al8_15",AQe={banner:OQe},NQe=({children:t,className:e,...n})=>{const{t:r}=it(),i=op();let s=!1;return(i==null?void 0:i.state)==="valid"&&(s=i.disconnected),E.jsx(E.Fragment,{children:s&&E.jsxs("div",{className:De(AQe.banner,e),...n,children:[t,r("disconnected_banner")]})})},DQe="data:application/json;base64,ew0KICAiYTExeSI6IHsNCiAgICAidXNlcl9tZW51IjogItCf0L7RgtGA0LXQsdC40YLQtdC70YHQutC+INC80LXQvdGOIg0KICB9LA0KICAiYWN0aW9uIjogew0KICAgICJjbG9zZSI6ICLQl9Cw0YLQstC+0YDQuCIsDQogICAgImNvcHlfbGluayI6ICLQmtC+0L/QuNGA0LDQvdC1INC90LAg0LLRgNGK0LfQutCw0YLQsCIsDQogICAgImdvIjogItCd0LDQv9GA0LXQtCIsDQogICAgImludml0ZSI6ICLQn9C+0LrQsNC90LAiLA0KICAgICJubyI6ICLQndC1IiwNCiAgICAicmVnaXN0ZXIiOiAi0KDQtdCz0LjRgdGC0YDQsNGG0LjRjyIsDQogICAgInJlbW92ZSI6ICLQn9GA0LXQvNCw0YXQvdC4IiwNCiAgICAic2lnbl9pbiI6ICLQktC70LXQtyIsDQogICAgInNpZ25fb3V0IjogItCY0LfQu9C10LciDQogIH0sDQogICJjYWxsX2VuZGVkX3ZpZXciOiB7DQogICAgImNyZWF0ZV9hY2NvdW50X2J1dHRvbiI6ICLQodGK0LfQtNCw0Lkg0LDQutCw0YPQvdGCIiwNCiAgICAiY3JlYXRlX2FjY291bnRfcHJvbXB0IjogIjwwPtCX0LDRidC+INC90LUg0L3QsNGB0YLRgNC+0LnRgtC1INC/0LDRgNC+0LvQsCDQt9CwINC00LAg0LfQsNC/0LDQt9C40YLQtSDQsNC60LDRg9C90YLQsCDRgdC4PzwvMD48MT7QqdC1INC80L7QttC10YLQtSDQtNCwINC30LDQv9Cw0LfQuNGC0LUg0LjQvNC10YLQviDQuCDQsNCy0LDRgtCw0YDQsCDRgdC4INC30LAg0LHRitC00LXRidC4INGA0LDQt9Cz0L7QstC+0YDQuDwvMT4iLA0KICAgICJub3Rfbm93X2J1dHRvbiI6ICLQndC1INGB0LXQs9CwLCDQstGK0YDQvdC4INGB0LUg0L3QsCDQvdCw0YfQsNC70L3QuNGPINC10LrRgNCw0L0iDQogIH0sDQogICJjb21tb24iOiB7DQogICAgImF1ZGlvIjogItCX0LLRg9C6IiwNCiAgICAiYXZhdGFyIjogItCQ0LLQsNGC0LDRgCIsDQogICAgImRpc3BsYXlfbmFtZSI6ICLQmNC80LUv0L/RgdC10LLQtNC+0L3QuNC8IiwNCiAgICAiaG9tZSI6ICLQndCw0YfQsNC70L4iLA0KICAgICJsb2FkaW5nIjogItCX0LDRgNC10LbQtNCw0L3QteKApiIsDQogICAgInBhc3N3b3JkIjogItCf0LDRgNC+0LvQsCIsDQogICAgInByb2ZpbGUiOiAi0J/RgNC+0YTQuNC7IiwNCiAgICAic2V0dGluZ3MiOiAi0J3QsNGB0YLRgNC+0LnQutC4IiwNCiAgICAidXNlcm5hbWUiOiAi0J/QvtGC0YDQtdCx0LjRgtC10LvRgdC60L4g0LjQvNC1IiwNCiAgICAidmlkZW8iOiAi0JLQuNC00LXQviINCiAgfSwNCiAgImpvaW5fZXhpc3RpbmdfY2FsbF9tb2RhbCI6IHsNCiAgICAiam9pbl9idXR0b24iOiAi0JTQsCwg0L/RgNC40YHRitC10LTQuNC90Lgg0YHQtSIsDQogICAgInRleHQiOiAi0KLQvtC30Lgg0YDQsNC30LPQvtCy0L7RgCDQstC10YfQtSDRgdGK0YnQtdGB0YLQstGD0LLQsCwg0LjRgdC60LDRgtC1INC70Lgg0LTQsCDRgdC1INC/0YDQuNGB0YrQtdC00LjQvdC40YLQtT8iLA0KICAgICJ0aXRsZSI6ICLQn9GA0LjRgdGK0LXQtNC40L3Rj9Cy0LDQvdC1INC60YrQvCDRgdGK0YnQtdGB0YLQstGD0LLQsNGJINGA0LDQt9Cz0L7QstC+0YA/Ig0KICB9LA0KICAibGF5b3V0X3Nwb3RsaWdodF9sYWJlbCI6ICLQn9GA0L7QttC10LrRgtC+0YAiLA0KICAibG9iYnkiOiB7DQogICAgImpvaW5fYnV0dG9uIjogItCS0LvQtdC3INCyINGA0LDQt9Cz0L7QstC+0YDQsCINCiAgfSwNCiAgImxvZ2dpbmdfaW4iOiAi0JLQu9C40LfQsNC90LXigKYiLA0KICAibG9naW5fYXV0aF9saW5rcyI6ICI8MD7QodGK0LfQtNCw0LnRgtC1INCw0LrQsNGD0L3RgjwvMD4g0LjQu9C4IDwyPtCS0LvQtdC30YLQtSDQutCw0YLQviDQs9C+0YHRgjwvMj4iLA0KICAibG9naW5fdGl0bGUiOiAi0JLQu9C10LciLA0KICAicmFnZXNoYWtlX3JlcXVlc3RfbW9kYWwiOiB7DQogICAgImJvZHkiOiAi0JTRgNGD0LMg0L/QvtGC0YDQtdCx0LjRgtC10Lsg0LIg0YLQvtC30Lgg0YDQsNC30LPQvtCy0L7RgCDQuNC80LAg0L/RgNC+0LHQu9C10LwuINCX0LAg0LTQsCDQtNC40LDQs9C90L7RgdGC0LjRhtC40YDQsNC80LUg0YLQvtC30Lgg0L/RgNC+0LHQu9C10Lwg0L/Qvi3QtNC+0LHRgNC1INC90Lgg0YHQtSDQuNGB0LrQsCDQtNCwINGB0YrQsdC10YDQtdC8IGRlYnVnINC70L7Qs9C+0LLQtS4iLA0KICAgICJ0aXRsZSI6ICLQl9Cw0Y/QstC60LAg0LfQsCBkZWJ1ZyDQu9C+0LPQvtCy0LUiDQogIH0sDQogICJyYWdlc2hha2Vfc2VuZF9sb2dzIjogItCY0LfQv9GA0LDRgtC10YLQtSBkZWJ1ZyDQu9C+0LPQvtCy0LUiLA0KICAicmFnZXNoYWtlX3NlbmRpbmciOiAi0JjQt9C/0YDQsNGJ0LDQvdC14oCmIiwNCiAgInJlY2FwdGNoYV9kaXNtaXNzZWQiOiAiUmVjYXB0Y2hhINC+0YLRhdCy0YrRgNC70LXQvdCwIiwNCiAgInJlY2FwdGNoYV9ub3RfbG9hZGVkIjogIlJlY2FwdGNoYSDQvdC1INC1INC30LDRgNC10LTQtdC90LAiLA0KICAicmVnaXN0ZXIiOiB7DQogICAgInBhc3N3b3Jkc19tdXN0X21hdGNoIjogItCf0LDRgNC+0LvQuNGC0LUg0L3QtSDRgdGK0LLQv9Cw0LTQsNGCIiwNCiAgICAicmVnaXN0ZXJpbmciOiAi0KDQtdCz0LjRgdGC0YDQuNGA0LDQvdC14oCmIg0KICB9LA0KICAicmVnaXN0ZXJfYXV0aF9saW5rcyI6ICI8MD7QktC10YfQtSDQuNC80LDRgtC1INCw0LrQsNGD0L3Rgj88LzA+PDE+PDA+0JLQu9C10LfRgtC1INGBINC90LXQs9C+PC8wPiDQuNC70LggPDI+0JLQu9C10LfRgtC1INC60LDRgtC+INCz0L7RgdGCPC8yPjwvMT4iLA0KICAicmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZF9sYWJlbCI6ICLQn9C+0YLQstGK0YDQtNC4INC/0LDRgNC+0LvQsNGC0LAiLA0KICAicmV0dXJuX2hvbWVfYnV0dG9uIjogItCS0YDRitGJ0LDQvdC1INC90LAg0L3QsNGH0LDQu9C90LjRjyDQtdC60YDQsNC9IiwNCiAgInNjcmVlbnNoYXJlX2J1dHRvbl9sYWJlbCI6ICLQodC/0L7QtNC10LvQuCDQtdC60YDQsNC90LAiLA0KICAic2V0dGluZ3MiOiB7DQogICAgImRldmVsb3Blcl90YWJfdGl0bGUiOiAi0KDQsNC30YDQsNCx0L7RgtGH0LjQuiIsDQogICAgImZlZWRiYWNrX3RhYl9oNCI6ICLQmNC30L/RgNCw0YLQuCDQvtCx0YDQsNGC0L3QsCDQstGA0YrQt9C60LAiLA0KICAgICJmZWVkYmFja190YWJfc2VuZF9sb2dzX2xhYmVsIjogItCS0LrQu9GO0YfQuCBkZWJ1ZyDQu9C+0LPQvtCy0LUiDQogIH0sDQogICJ1bmF1dGhlbnRpY2F0ZWRfdmlld19ib2R5IjogItCS0YHQtSDQvtGJ0LUg0L3QtSDRgdGC0LUg0YDQtdCz0LjRgdGC0YDQuNGA0LDQvdC4PyA8Mj7QodGK0LfQtNCw0LnRgtC1INCw0LrQsNGD0L3RgjwvMj4iLA0KICAidW5hdXRoZW50aWNhdGVkX3ZpZXdfbG9naW5fYnV0dG9uIjogItCS0LvQtdC30YLQtSDQsiDQsNC60LDRg9C90YLQsCDRgdC4IiwNCiAgInZlcnNpb24iOiAi0JLQtdGA0YHQuNGPOiB7e3ZlcnNpb259fSINCn0NCg==",UQe="/assets/cs-app-C2mXGPyM.json",FQe="/assets/da-app-ClOnasQK.json",jQe="/assets/de-app-DWzfdQtU.json",HQe="/assets/el-app-D4QghGoD.json",$Qe="/assets/en-app-B8YhsZY9.json",VQe="/assets/es-app-DPk6ag7I.json",BQe="/assets/et-app-UrNTg7TQ.json",qQe="data:application/json;base64,ew0KICAiYTExeSI6IHsNCiAgICAidXNlcl9tZW51IjogItmB2YfYsdiz2Kog2qnYp9ix2KjYsSINCiAgfSwNCiAgImFjdGlvbiI6IHsNCiAgICAiY2xvc2UiOiAi2KjYs9iq2YYiLA0KICAgICJnbyI6ICLYsdmB2KrZhiIsDQogICAgIm5vIjogItiu24zYsSIsDQogICAgInJlZ2lzdGVyIjogItir2KjYquKAjNmG2KfZhSIsDQogICAgInJlbW92ZSI6ICLYrdiw2YEiLA0KICAgICJzaWduX2luIjogItmI2LHZiNivIiwNCiAgICAic2lnbl9vdXQiOiAi2K7YsdmI2KwiDQogIH0sDQogICJjYWxsX2VuZGVkX3ZpZXciOiB7DQogICAgImNyZWF0ZV9hY2NvdW50X2J1dHRvbiI6ICLYs9in2K7YqiDYrdiz2KfYqCDaqdin2LHYqNix24wiLA0KICAgICJjcmVhdGVfYWNjb3VudF9wcm9tcHQiOiAiPDA+2obYsdinINuM2qkg2LHZhdiyINi52KjZiNixINio2LHYp9uMINit2LPYp9ioINqp2KfYsdio2LHbjCDYrtmI2K8g2KrZhti424zZhSDZhtmF24zigIzaqdmG24zYr9ifPC8wPjwxPti02YXYpyDZhduM4oCM2KrZiNin2YbbjNivINmG2KfZhSDYrtmI2K8g2LHYpyDYrdmB2Lgg2qnZhtuM2K8g2Ygg24zaqSDYotmI2KfYqtin2LEg2KjYsdin24wg2KrZhdin2LPigIzZh9in24wg2KLbjNmG2K/ZhyDYqNiz2KfYstuM2K88LzE+IiwNCiAgICAibm90X25vd19idXR0b24iOiAi2KfZhNin2YYg2YbZh9iMINio2Ycg2LXZgdit2Ycg2KfYtdmE24wg2KjYsdqv2LHYr9uM2K8iDQogIH0sDQogICJjb21tb24iOiB7DQogICAgImF1ZGlvIjogIti12K/YpyIsDQogICAgImF2YXRhciI6ICLYotmI2KfYqtin2LEiLA0KICAgICJkaXNwbGF5X25hbWUiOiAi2YbYp9mFINmG2YXYp9uM2LTbjCIsDQogICAgImhvbWUiOiAi2K7Yp9mG2YciLA0KICAgICJsb2FkaW5nIjogItio2KfYsdqv2LLYp9ix24zigKYiLA0KICAgICJwYXNzd29yZCI6ICLYsdmF2LIg2LnYqNmI2LEiLA0KICAgICJwcm9maWxlIjogItm+2LHZiNmB2KfbjNmEIiwNCiAgICAic2V0dGluZ3MiOiAi2KrZhti424zZhdin2KoiLA0KICAgICJ1c2VybmFtZSI6ICLZhtin2YUg2qnYp9ix2KjYsduMIiwNCiAgICAidmlkZW8iOiAi2YjbjNiv24zZiCINCiAgfSwNCiAgImhlYWRlcl9sYWJlbCI6ICLYrtin2YbZh9mUINiq2YXYp9izINin2YTZhdmG2KoiLA0KICAiam9pbl9leGlzdGluZ19jYWxsX21vZGFsIjogew0KICAgICJqb2luX2J1dHRvbiI6ICLYqNmE2YfYjCDYqNmHINiq2YXYp9izINio2b7bjNmI2YbYr9uM2K8iLA0KICAgICJ0ZXh0IjogItin24zZhiDYqtmF2KfYsyDYp9iyINmC2KjZhCDZiNis2YjYryDYr9in2LHYr9iMINmF24zigIzYrtmI2KfZh9uM2K8g2KjZvtuM2YjZhtiv24zYr9ifIiwNCiAgICAidGl0bGUiOiAi2b7bjNmI2LPYqiDYqNmHINiq2YXYp9iz2J8iDQogIH0sDQogICJsYXlvdXRfc3BvdGxpZ2h0X2xhYmVsIjogItmG2YjYsSDYp9mB2qnZhiIsDQogICJsb2JieSI6IHsNCiAgICAiam9pbl9idXR0b24iOiAi2b7bjNmI2LPYqtmGINio2Ycg2KrZhdin2LMiDQogIH0sDQogICJsb2dnaW5nX2luIjogItmI2LHZiNiv4oCmIiwNCiAgImxvZ2luX2F1dGhfbGlua3MiOiAiPDA+2LPYp9iu2Kog2K3Ys9in2Kgg2qnYp9ix2KjYsduMPC8wPiBPciA8Mj7Yr9iz2KrYsdiz24wg2KjZhyDYudmG2YjYp9mGINmF24zZh9mF2KfZhjwvMj4iLA0KICAibG9naW5fdGl0bGUiOiAi2YjYsdmI2K8iLA0KICAicmFnZXNoYWtlX3JlcXVlc3RfbW9kYWwiOiB7DQogICAgImJvZHkiOiAi2qnYp9ix2KjYsSDYr9uM2q/YsduMINiv2LEg2KfbjNmGINiq2YXYp9izINmF2LTaqdmE24wg2K/Yp9ix2K8uINio2LHYp9uMINiq2LTYrtuM2LUg2KjZh9iq2LEg2YXYtNqp2YTYjCDYqNmH2KrYsSDYp9iz2Kog2YXYpyDZhNin2q8g2LnbjNio4oCM24zYp9io24wg2LHYpyDYrNmF2LnigIzYotmI2LHbjCDaqdmG24zZhS4iLA0KICAgICJ0aXRsZSI6ICLYr9ix2K7ZiNin2LPYqiDZhNin2q8g2LnbjNio4oCM24zYp9io24wiDQogIH0sDQogICJyYWdlc2hha2Vfc2VuZF9sb2dzIjogItin2LHYs9in2YQg2YTYp9qv4oCM2YfYp9uMINi524zYqOKAjNuM2KfYqNuMIiwNCiAgInJhZ2VzaGFrZV9zZW5kaW5nIjogItiv2LEg2K3Yp9mEINin2LHYs9in2YTigKYiLA0KICAicmFnZXNoYWtlX3NlbmRpbmdfbG9ncyI6ICLYr9ixINit2KfZhCDYp9ix2LPYp9mEINio2Kfar+KAjNmH2KfbjCDYuduM2KjigIzbjNin2KjbjOKApiIsDQogICJyZWNhcHRjaGFfZGlzbWlzc2VkIjogItix24zaqdm+2obYpyDYsdivINi02K8iLA0KICAicmVjYXB0Y2hhX25vdF9sb2FkZWQiOiAi2qnZvtqG2Kcg2KjYp9ix2q/bjNix24wg2YbYtNivIiwNCiAgInJlZ2lzdGVyIjogew0KICAgICJwYXNzd29yZHNfbXVzdF9tYXRjaCI6ICLYsdmF2LIg2LnYqNmI2LEg2KjYp9uM2K8g2YfZhdiu2YjYp9mG24wg2K/Yp9i02KrZhyDYqNin2LTYryIsDQogICAgInJlZ2lzdGVyaW5nIjogItir2KjYquKAjNmG2KfZheKApiINCiAgfSwNCiAgInJlZ2lzdGVyX2F1dGhfbGlua3MiOiAiPDA+2KfYsiDZgtio2YQg2K3Ys9in2Kgg2qnYp9ix2KjYsduMINiv2KfYsduM2K/YnzwvMD48MT48MD7ZiNix2YjYrzwvMD4gT3IgPDI+2KjZhyDYudmG2YjYp9mGINuM2qkg2YXbjNmH2YXYp9mGINmI2KfYsdivINi02YjbjNivPC8yPjwvMT4iLA0KICAicmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZF9sYWJlbCI6ICLYqtin24zbjNivINix2YXYsti52KjZiNixIiwNCiAgInJldHVybl9ob21lX2J1dHRvbiI6ICLYqNix2q/YtNiqINio2Ycg2LXZgdit2Ycg2KfYtdmE24wiLA0KICAic2NyZWVuc2hhcmVfYnV0dG9uX2xhYmVsIjogItin2LTYqtix2KfaqSDar9iw2KfYsduMINi12YHYrdmHINmG2YXYp9uM2LQiLA0KICAic2V0dGluZ3MiOiB7DQogICAgImRldmVsb3Blcl90YWJfdGl0bGUiOiAi2KrZiNiz2LnZhyDYr9mH2YbYr9mHIiwNCiAgICAiZmVlZGJhY2tfdGFiX2g0IjogItio2KfYstiu2YjYsdivINin2LHYp9im2Ycg2K/Zh9uM2K8iLA0KICAgICJmZWVkYmFja190YWJfc2VuZF9sb2dzX2xhYmVsIjogIti02KfZhdmEINmE2Kfar+KAjNmH2KfbjCDYuduM2KjigIzbjNin2KjbjCINCiAgfSwNCiAgInVuYXV0aGVudGljYXRlZF92aWV3X2JvZHkiOiAi2YfZhtmI2LIg2KvYqNiq4oCM2YbYp9mFINmG2qnYsdiv2YfigIzYp9uM2K/YnyA8Mj7Ys9in2K7YqiDYrdiz2KfYqCDaqdin2LHYqNix24w8LzI+IiwNCiAgInVuYXV0aGVudGljYXRlZF92aWV3X2xvZ2luX2J1dHRvbiI6ICLYqNmHINit2LPYp9ioINqp2KfYsdio2LHbjCDYrtmI2K8g2YjYp9ix2K8g2LTZiNuM2K8iLA0KICAidmVyc2lvbiI6ICLZhtiz2K7Zhzoge3vZhtiz2K7Zh319Ig0KfQ0K",GQe="/assets/fi-app-BA7aSxLD.json",KQe="/assets/fr-app-DaIbmf_p.json",ZQe="/assets/id-app-DL3Pba1X.json",zQe="/assets/it-app-D3WdEUfL.json",WQe="/assets/ja-app-BEZu28a_.json",YQe="/assets/lv-app-B9c4FpL6.json",JQe="/assets/pl-app-An2q1_oY.json",QQe="/assets/ro-app-DZii82u5.json",XQe="/assets/ru-app-ZcK6UIAz.json",eXe="/assets/sk-app-EVJ9Xoz0.json",tXe="/assets/sv-app-BrNTuqlc.json",nXe="/assets/tr-app-BsgUIgJ5.json",rXe="/assets/uk-app-D4q4NPuq.json",iXe="data:application/json;base64,ew0KICAiYWN0aW9uIjogew0KICAgICJjbG9zZSI6ICLEkMOzbmciLA0KICAgICJubyI6ICJLaMO0bmciLA0KICAgICJyZWdpc3RlciI6ICLEkMSDbmcga8O9IiwNCiAgICAic2lnbl9pbiI6ICLEkMSDbmcgbmjhuq1wIiwNCiAgICAic2lnbl9vdXQiOiAixJDEg25nIHh14bqldCIsDQogICAgInN1Ym1pdCI6ICJH4butaSINCiAgfSwNCiAgImNhbGxfZW5kZWRfdmlldyI6IHsNCiAgICAiY3JlYXRlX2FjY291bnRfYnV0dG9uIjogIlThuqFvIHTDoGkga2hv4bqjbiIsDQogICAgImNyZWF0ZV9hY2NvdW50X3Byb21wdCI6ICI8MD5U4bqhaSBzYW8gbOG6oWkga2jDtG5nIGhvw6BuIHRoaeG7h24gYuG6sW5nIGPDoWNoIMSR4bq3dCBt4bqtdCBraOG6qXUgxJHhu4MgZ2nhu68gdMOgaSBraG/huqNuIGPhu6dhIGLhuqFuPzwvMD48MT5C4bqhbiBz4bq9IGPDsyB0aOG7gyBnaeG7ryB0w6puIHbDoCDEkeG6t3Qg4bqjbmggxJHhuqFpIGRp4buHbiBjaG8gbmjhu69uZyBjdeG7mWMgZ+G7jWkgdGnhur9wIHRoZW8uPC8xPiIsDQogICAgImZlZWRiYWNrX2RvbmUiOiAiPDA+Q+G6o20gaMahbiB2w6wgxJHDoyBwaOG6o24gaOG7k2khPC8wPiIsDQogICAgImZlZWRiYWNrX3Byb21wdCI6ICI8MD5DaMO6bmcgdMO0aSBtdeG7kW4gbmdoZSBwaOG6o24gaOG7k2kgY+G7p2EgYuG6oW4gxJHhu4MgY8OybiBj4bqjaSB0aGnhu4duIHRy4bqjaSBuZ2hp4buHbSBjaG8gYuG6oW4uPC8wPiIsDQogICAgImhlYWRsaW5lIjogInt7ZGlzcGxheU5hbWV9fSwgY3Xhu5ljIGfhu41pIMSRw6Mga+G6v3QgdGjDumMuIg0KICB9LA0KICAiY29tbW9uIjogew0KICAgICJhdWRpbyI6ICLDgm0gdGhhbmgiLA0KICAgICJhdmF0YXIiOiAi4bqibmggxJHhuqFpIGRp4buHbiIsDQogICAgImRpc3BsYXlfbmFtZSI6ICJUw6puIGhp4buDbiB0aOG7iyIsDQogICAgImxvYWRpbmciOiAixJBhbmcgdOG6o2nigKYiLA0KICAgICJwYXNzd29yZCI6ICJN4bqtdCBraOG6qXUiLA0KICAgICJwcm9maWxlIjogIkjhu5Mgc8ahIiwNCiAgICAic2V0dGluZ3MiOiAiQ8OgaSDEkeG6t3QiLA0KICAgICJ1c2VybmFtZSI6ICJUw6puIG5nxrDhu51pIGTDuW5nIiwNCiAgICAidmlkZW8iOiAiVHJ1eeG7gW4gaMOsbmgiDQogIH0sDQogICJqb2luX2V4aXN0aW5nX2NhbGxfbW9kYWwiOiB7DQogICAgImpvaW5fYnV0dG9uIjogIlbDom5nLCB0aGFtIGdpYSBjdeG7mWMgZ+G7jWkiLA0KICAgICJ0ZXh0IjogIkN14buZYyBn4buNaSDEkcOjIHThu5NuIHThuqFpLCBi4bqhbiBjw7MgbXXhu5FuIHRoYW0gZ2lhIGtow7RuZz8iLA0KICAgICJ0aXRsZSI6ICJUaGFtIGdpYSBjdeG7mWMgZ+G7jWk/Ig0KICB9LA0KICAibGF5b3V0X3Nwb3RsaWdodF9sYWJlbCI6ICJUacOqdSDEkWnhu4NtIiwNCiAgImxvYmJ5Ijogew0KICAgICJqb2luX2J1dHRvbiI6ICJUaGFtIGdpYSBjdeG7mWMgZ+G7jWkiDQogIH0sDQogICJsb2dnaW5nX2luIjogIsSQYW5nIMSRxINuZyBuaOG6rXDigKYiLA0KICAibG9naW5fYXV0aF9saW5rcyI6ICI8MD5U4bqhbyB0w6BpIGtob+G6o248LzA+IEhheSA8Mj5UaGFtIGdpYSBkxrDhu5tpIHTDqm4ga2jDoWM8LzI+IiwNCiAgImxvZ2luX3RpdGxlIjogIsSQxINuZyBuaOG6rXAiLA0KICAicmFnZXNoYWtlX3JlcXVlc3RfbW9kYWwiOiB7DQogICAgImJvZHkiOiAiTeG7mXQgbmfGsOG7nWkgZMO5bmcga2jDoWMgdHJvbmcgY3Xhu5ljIGfhu41pIMSRYW5nIGfhurdwIHbhuqVuIMSR4buBLiDEkOG7gyBjw7MgdGjhu4MgY2jhuqluIMSRb8OhbiB04buRdCBoxqFuIGNow7puZyB0w7RpIG114buRbiB0aHUgdGjhuq1wIG5o4bqtdCBrw70gZ+G7oSBs4buXaS4iLA0KICAgICJ0aXRsZSI6ICJZw6p1IGPhuqd1IG5o4bqtdCBrw70gZ+G7oSBs4buXaSINCiAgfSwNCiAgInJhZ2VzaGFrZV9zZW5kaW5nIjogIsSQYW5nIGfhu61p4oCmIiwNCiAgInJlY2FwdGNoYV9ub3RfbG9hZGVkIjogIkNoxrBhIHThuqNpIMSRxrDhu6NjIFJlY2FwdGNoYSIsDQogICJyZWdpc3RlciI6IHsNCiAgICAicGFzc3dvcmRzX211c3RfbWF0Y2giOiAiTeG6rXQga2jhuql1IHBo4bqjaSBraOG7m3AiLA0KICAgICJyZWdpc3RlcmluZyI6ICLEkGFuZyDEkcSDbmcga8O94oCmIg0KICB9LA0KICAicmVnaXN0ZXJfYXV0aF9saW5rcyI6ICI8MD7EkMOjIGPDsyB0w6BpIGtob+G6o24/PC8wPjwxPjwwPsSQxINuZyBuaOG6rXA8LzA+IEhheSA8Mj5UaGFtIGdpYSBkxrDhu5tpIHTDqm4gS2jDoWNoPC8yPjwvMT4iLA0KICAicmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZF9sYWJlbCI6ICJYw6FjIG5o4bqtbiBt4bqtdCBraOG6qXUiLA0KICAic2NyZWVuc2hhcmVfYnV0dG9uX2xhYmVsIjogIkNoaWEgc+G6uyBtw6BuIGjDrG5oIiwNCiAgInNldHRpbmdzIjogew0KICAgICJkZXZlbG9wZXJfdGFiX3RpdGxlIjogIk5ow6AgcGjDoXQgdHJp4buDbiIsDQogICAgImZlZWRiYWNrX3RhYl9kZXNjcmlwdGlvbl9sYWJlbCI6ICJQaOG6o24gaOG7k2kgY+G7p2EgYuG6oW4iLA0KICAgICJmZWVkYmFja190YWJfaDQiOiAiR+G7rWkgcGjhuqNuIGjhu5NpIiwNCiAgICAiZmVlZGJhY2tfdGFiX3NlbmRfbG9nc19sYWJlbCI6ICJLw6htIHRoZW8gbmjhuq10IGvDvSBn4buhIGzhu5dpIiwNCiAgICAiZmVlZGJhY2tfdGFiX3RoYW5rX3lvdSI6ICJD4bqjbSDGoW4sIGNow7puZyB0w7RpIMSRw6Mgbmjhuq1uIMSRxrDhu6NjIHBo4bqjbiBo4buTaSEiLA0KICAgICJmZWVkYmFja190YWJfdGl0bGUiOiAiUGjhuqNuIGjhu5NpIg0KICB9LA0KICAic3VibWl0dGluZyI6ICLEkGFuZyBn4butaeKApiIsDQogICJ1bmF1dGhlbnRpY2F0ZWRfdmlld19ib2R5IjogIkNoxrBhIMSRxINuZyBrw70/IDwyPlThuqFvIHTDoGkga2hv4bqjbjwvMj4iLA0KICAidW5hdXRoZW50aWNhdGVkX3ZpZXdfbG9naW5fYnV0dG9uIjogIsSQxINuZyBuaOG6rXAgdsOgbyB0w6BpIGtob+G6o24gY+G7p2EgYuG6oW4iLA0KICAidmVyc2lvbiI6ICJQaGnDqm4gYuG6o246IHt7dmVyc2lvbn19Ig0KfQ0K",sXe="/assets/zh-Hans-app-QZDdnnUv.json",aXe="/assets/zh-Hant-app-CEBcoHNZ.json",{slice:oXe,forEach:lXe}=[];function cXe(t){return lXe.call(oXe.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const TK=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,uXe=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!TK.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!TK.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},RK={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=uXe(t,encodeURIComponent(e),i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t){this.create(t,"",-1)}};var dXe={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return RK.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&RK.create(n,t,r,i,s)}},hXe={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let o=0;o<a.length;o++){const l=a[o].indexOf("=");l>0&&a[o].substring(0,l)===e&&(n=a[o].substring(l+1))}}return n}};let Yf=null;const IK=()=>{if(Yf!==null)return Yf;try{if(Yf=typeof window<"u"&&window.localStorage!==null,!Yf)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Yf=!1}return Yf};var fXe={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&IK())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&IK()&&window.localStorage.setItem(n,t)}};let Jf=null;const xK=()=>{if(Jf!==null)return Jf;try{if(Jf=typeof window<"u"&&window.sessionStorage!==null,!Jf)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Jf=!1}return Jf};var mXe={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&xK())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&xK()&&window.sessionStorage.setItem(n,t)}},pXe={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},gXe={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},vXe={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},yXe={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let nue=!1;try{document.cookie,nue=!0}catch{}const rue=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];nue||rue.splice(1,1);const _Xe=()=>({order:rue,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class iue{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=cXe(n,this.options||{},_Xe()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(dXe),this.addDetector(hXe),this.addDetector(fXe),this.addDetector(mXe),this.addDetector(pXe),this.addDetector(gXe),this.addDetector(vXe),this.addDetector(yXe)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}iue.type="languageDetector";var f7={},MK;function CXe(){if(MK)return f7;MK=1,Object.defineProperty(f7,"__esModule",{value:!0}),f7.shouldPolyfill=t;function t(){return!Intl.Segmenter}return f7}var bXe=CXe(),m7={},PK;function EXe(){if(PK)return m7;PK=1,Object.defineProperty(m7,"__esModule",{value:!0}),m7.shouldPolyfill=t;function t(){return typeof Intl>"u"||!("DurationFormat"in Intl)}return m7}var SXe=EXe();const sue=Object.assign({"../locales/bg/app.json":DQe,"../locales/cs/app.json":UQe,"../locales/da/app.json":FQe,"../locales/de/app.json":jQe,"../locales/el/app.json":HQe,"../locales/en/app.json":$Qe,"../locales/es/app.json":VQe,"../locales/et/app.json":BQe,"../locales/fa/app.json":qQe,"../locales/fi/app.json":GQe,"../locales/fr/app.json":KQe,"../locales/id/app.json":ZQe,"../locales/it/app.json":zQe,"../locales/ja/app.json":WQe,"../locales/lv/app.json":YQe,"../locales/pl/app.json":JQe,"../locales/ro/app.json":QQe,"../locales/ru/app.json":XQe,"../locales/sk/app.json":eXe,"../locales/sv/app.json":tXe,"../locales/tr/app.json":nXe,"../locales/uk/app.json":rXe,"../locales/vi/app.json":iXe,"../locales/zh-Hans/app.json":sXe,"../locales/zh-Hant/app.json":aXe}),wXe=(t,e)=>sue[`../locales/${t}/${e}.json`],kXe=[...new Set(Object.keys(sue).map(t=>{var n;const e=(n=t.match(/\/([^/]+)\/[^/]+\.json$/))==null?void 0:n[1];if(!e)throw new Error(`Could not parse locale URL ${t}`);return e}))],TXe={type:"backend",init(){},read(t,e,n){(async()=>{const r=wXe(t,e);if(!r)throw new Error(`Namespace ${e} for locale ${t} not found`);const i=await fetch(r,{credentials:"omit",headers:{Accept:"application/json"}});if(JM(i))throw Error(`Failed to fetch ${r}`);return await i.json()})().then(r=>n(null,r),r=>n(r,null))}};class RXe{constructor(){this.config=0,this.sentry=0,this.openTelemetry=0}allDepsAreLoaded(){return!Object.values(this).some(e=>e!==2)}}class na{constructor(){this.isInitialized=!1,this.loadStates=new RXe}static isInitialized(){var e;return!!((e=na.internalInstance)!=null&&e.isInitialized)}static async initBeforeReact(){const e=[];bXe.shouldPolyfill()&&e.push(z0(()=>import("./polyfill-force-DEAq6lV2.js").then(s=>s.p),__vite__mapDeps([2,3]))),SXe.shouldPolyfill()&&e.push(z0(()=>import("./polyfill-force-3i2-chVN.js").then(s=>s.p),__vite__mapDeps([4,3]))),await Promise.all(e);const n=new iue;n.addDetector({name:"urlFragment",lookup:()=>Xa().lang??void 0}),Ii.on("languageChanged",s=>{document.documentElement.lang=s}),await Ii.use(TXe).use(n).use(cRe).init({fallbackLng:"en",defaultNS:"app",keySeparator:".",nsSeparator:!1,pluralSeparator:"_",contextSeparator:"|",supportedLngs:kXe,interpolation:{escapeValue:!1},detection:{order:["urlFragment","navigator"],caches:[]}});const{fonts:r,fontScale:i}=Xa();i!==null&&document.documentElement.style.setProperty("--font-scale",i.toString()),r.length>0&&document.documentElement.style.setProperty("--font-family",r.map(s=>`"${s}"`).join(", ")),document.body.setAttribute("data-platform",yh)}static init(){var e;return(e=na==null?void 0:na.internalInstance)!=null&&e.initPromise?null:(na.internalInstance=new na,na.internalInstance.initPromise=new Promise(n=>{var r;(r=na.internalInstance)==null||r.initStep(n)}),na.internalInstance.initPromise)}static reset(){na.internalInstance=void 0}initStep(e){var n,r;if(this.loadStates.config===0&&(this.loadStates.config=1,At.init().then(()=>{this.loadStates.config=2,this.initStep(e)},i=>{A.error("Failed to load config",i)})),this.loadStates.sentry===0&&this.loadStates.config===2){let i,s;i=(n=At.get().sentry)==null?void 0:n.DSN,s=(r=At.get().sentry)==null?void 0:r.environment,i&&B9e({dsn:i,environment:s,integrations:[lye({useEffect:be.useEffect,useLocation:Gi,useNavigationType:Jge,createRoutesFromChildren:t5,matchRoutes:Tx})],tracesSampleRate:1}),this.loadStates.sentry=2}this.loadStates.openTelemetry===0&&this.loadStates.config===2&&(My.globalInit(),this.loadStates.openTelemetry=2),this.loadStates.allDepsAreLoaded()&&(e(),this.isInitialized=!0)}}const IXe=()=>{const[t,e]=u.useState(()=>Xa().theme),n=u.useRef(document.body.classList.item(0));u.useEffect(()=>{if(Xe){const r=i=>{i.preventDefault(),"name"in i.detail.data&&typeof i.detail.data.name=="string"&&e(i.detail.data.name),Xe.api.transport.reply(i.detail,{})};return Xe.lazyActions.on(sr.ThemeChange,r),()=>{Xe.lazyActions.off(sr.ThemeChange,r)}}},[]),u.useLayoutEffect(()=>{const r=t!=null&&t.includes("light")?"light":"dark",i=t!=null&&t.includes("high-contrast")?"-hc":"",s="cpd-theme-"+r+i;s!==n.current&&(document.body.classList.remove("cpd-theme-light","cpd-theme-dark","cpd-theme-light-hc","cpd-theme-dark-hc"),document.body.classList.add(s),n.current=s),document.body.classList.remove("no-theme")},[n,t])},p7=cye(MY),xXe=({children:t})=>{const{pathname:e}=Gi();return u.useEffect(()=>{let n="";!["/login","/register"].includes(e)&&!Xe&&(n="var(--background-gradient)"),document.getElementsByTagName("body")[0].style.backgroundImage=n},[e]),E.jsx(E.Fragment,{children:t})},MXe=({children:t})=>(IXe(),t),PXe=()=>{const[t,e]=u.useState(!1);return u.useEffect(()=>{var n;(n=na.init())==null||n.then(async()=>{t||(e(!0),await(Xe==null?void 0:Xe.api.sendContentLoaded()))}).catch(A.error)}),E.jsx(U4e,{children:E.jsx(xXe,{children:E.jsx(MXe,{children:E.jsx(KQ,{children:t?E.jsx(u.Suspense,{fallback:null,children:E.jsx(tje,{children:E.jsx(Jje,{children:E.jsx(SVe,{children:E.jsxs(ey,{fallback:n=>E.jsx(Mg,{error:n,widget:Xe}),children:[E.jsx(NQe,{}),E.jsxs(f4e,{children:[E.jsx(p7,{path:"/",element:E.jsx(Joe,{})}),E.jsx(p7,{path:"/login",element:E.jsx(OBe,{})}),E.jsx(p7,{path:"/register",element:E.jsx(ABe,{})}),E.jsx(p7,{path:"*",element:E.jsx(LQe,{})})]})]})})})})}):E.jsx(Py,{})})})})})};window.setLKLogLevel=CW;iPe().catch(t=>{A.error("Failed to initialize rageshake",t)});CW("info");f3e((t,e,n)=>{global.mx_rage_logger.log(t,"livekit",e,n)});A.info("Element Call dev");const RI=Ame.createRoot(document.getElementById("root"));let q0=null;window.isSecureContext?navigator.mediaDevices||(q0=new Error("Your browser does not support WebRTC.")):q0=new Error(`This app cannot run in an insecure context. To fix this, access the app via a local loopback address, or serve it over HTTPS.
https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`);if(q0!==null)throw RI.render(q0.message),q0;na.initBeforeReact().then(()=>{RI.render(E.jsx(u.StrictMode,{children:E.jsx(PXe,{})}))}).catch(t=>{A.error("Failed to initialize app",t),RI.render(t.message)});export{$Xe as A,BXe as B,At as C,Jfe as D,ee as E,GXe as F,Ba as G,zI as H,qXe as I,$t as J,Ke as K,UXe as L,On as M,qc as N,VU as O,IU as P,KXe as Q,ZXe as R,K1 as S,Un as T,VXe as U,jt as V,em as W,Xfe as X,Qa as _,AXe as a,so as b,OXe as c,HXe as d,F as e,Sq as f,zo as g,P as h,qoe as i,DXe as j,Xr as k,A as l,oe as m,b2 as n,Ie as o,C9 as p,$I as q,gz as r,ru as s,QXe as t,ime as u,Fm as v,Gl as w,Ur as x,i2e as y,_7 as z};
//# sourceMappingURL=index-9Y0NaW9O.js.map
